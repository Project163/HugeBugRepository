diff --git a/src/main/java/org/apache/commons/jexl3/internal/Engine.java b/src/main/java/org/apache/commons/jexl3/internal/Engine.java
index d7311402..b8c77a80 100644
--- a/src/main/java/org/apache/commons/jexl3/internal/Engine.java
+++ b/src/main/java/org/apache/commons/jexl3/internal/Engine.java
@@ -738,8 +738,8 @@ public class Engine extends JexlEngine {
                 while (start < end && Character.isSpaceChar(str.charAt(start))) {
                     ++start;
                 }
-                // trim ending spaces
-                while (end > 0 && Character.isSpaceChar(str.charAt(end - 1))) {
+                // trim ending spaces; end is > 0 since start >= 0
+                while (end > start && Character.isSpaceChar(str.charAt(end - 1))) {
                     --end;
                 }
                 return str.subSequence(start, end).toString();
diff --git a/src/test/java/org/apache/commons/jexl3/ScriptTest.java b/src/test/java/org/apache/commons/jexl3/ScriptTest.java
index 4ee9233e..33eb75a0 100644
--- a/src/test/java/org/apache/commons/jexl3/ScriptTest.java
+++ b/src/test/java/org/apache/commons/jexl3/ScriptTest.java
@@ -52,6 +52,16 @@ public class ScriptTest extends JexlTestCase {
         super("ScriptTest");
     }
 
+    /**
+     * Test creating a script from spaces.
+     */
+    @Test
+    public void testSpacesScript() throws Exception {
+        String code = " ";
+        JexlScript s = JEXL.createScript(code);
+        Assert.assertTrue(s != null);
+    }
+    
     /**
      * Test creating a script from a string.
      */
