<!--
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Thu Oct 23 09:41:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+%22SCXML%22+AND+issuetype+%3D+Bug+ORDER+BY+key+DESC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="109" total="109"/>
                <build-info>
            <version>8.20.10</version>
            <build-number>820010</build-number>
            <build-date>22-06-2022</build-date>
        </build-info>

<item>
            <title>[SCXML-288] Not able to get the event data using &quot;_event&quot;</title>
                <link>https://issues.apache.org/jira/browse/SCXML-288</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Hi need to raise an event and add some params in it. The event when triggered should execute transitions. The XML format is given below.&lt;/p&gt;

&lt;p&gt;&amp;lt;scxml name=&quot;Scxml&quot; version=&quot;1.0&quot;&amp;lt;scxml name=&quot;Scxml&quot; version=&quot;1.0&quot; xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; initialState=&quot;initial&quot;&amp;gt; &amp;lt;state id=&quot;initial&quot;&amp;gt; &amp;lt;onentry&amp;gt; &amp;lt;send type=&quot;&apos;scxml&apos;&quot; event=&quot;&apos;onentry&apos;&quot;&amp;gt; &amp;lt;param name=&quot;rc1&quot; expr=&quot;&apos;Hello&apos;&quot; /&amp;gt; &amp;lt;/send&amp;gt; &amp;lt;/onentry&amp;gt; &amp;lt;transition event=&quot;onentry&quot; target=&quot;next&quot;&amp;gt; &amp;lt;log label=&quot;Transitioning&quot; expr=&quot;_event.rc1&quot;/&amp;gt; &amp;lt;/transition&amp;gt; &amp;lt;/state&amp;gt;&lt;br/&gt;
 &amp;lt;state id=&quot;next&quot;&amp;gt; &amp;lt;onentry&amp;gt; &amp;lt;log label=&quot;In Next&quot; expr=&quot;_event.rc1&quot; /&amp;gt; &amp;lt;/onentry&amp;gt; &amp;lt;/state&amp;gt;&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;While runnig this the &apos;_event.data.rc1&apos; returns null, with the following error on console.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;PM org.apache.commons.jexl2.Interpreter unknownVariable&lt;/b&gt;&lt;br/&gt;
&lt;b&gt;WARNING: org.apache.commons.scxml2.env.jexl.JexlEvaluator.eval@134!&lt;span class=&quot;error&quot;&gt;&amp;#91;0,10&amp;#93;&lt;/span&gt;: &apos;_event.rc1;&apos; inaccessible or unknown property _event&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.11&lt;/p&gt;

&lt;p&gt;commons-scxml-2.2.0-M-1&lt;/p&gt;

&lt;p&gt;commons-jexl-2.2.1&lt;/p&gt;

&lt;p&gt;commons-logging-1.1.1&lt;/p&gt;</environment>
        <key id="13345801">SCXML-288</key>
            <summary>Not able to get the event data using &quot;_event&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="amar2304">Amar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Dec 2020 09:06:43 +0000</created>
                <updated>Mon, 14 Dec 2020 09:06:43 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lh5c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-287] Compilation error when compiling with Java-11</title>
                <link>https://issues.apache.org/jira/browse/SCXML-287</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;&#160;When compiling with the Java-11 compiler (although source/binary version is set to 1.8), the compilation fails with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] /home/shalomc/workspace/opensource/commons-scxml/src/test/java/org/apache/commons/scxml2/w3c/W3CTests.java:[31,22] &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; javax.xml.bind does not exist

[ERROR] /home/shalomc/workspace/opensource/commons-scxml/src/test/java/org/apache/commons/scxml2/w3c/W3CTests.java:[139,6] cannot find symbol
[ERROR]   symbol:   &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;XmlRootElement
[ERROR]   location: &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.commons.scxml2.w3c.W3CTests
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since other parts of my project need to be compiled with Java 11, and commons SCXML  is compiled from source every time, this is problematic.&lt;/p&gt;

&lt;p&gt;See:&#160;&lt;a href=&quot;https://stackoverflow.com/questions/52502189/java-11-package-javax-xml-bind-does-not-exist&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Stack overflow question&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The fix is to add dependency:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &amp;lt;dependency&amp;gt;
          &amp;lt;groupId&amp;gt;jakarta.xml.bind&amp;lt;/groupId&amp;gt;
          &amp;lt;artifactId&amp;gt;jakarta.xml.bind-api&amp;lt;/artifactId&amp;gt;
          &amp;lt;version&amp;gt;2.3.3&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13316857">SCXML-287</key>
            <summary>Compilation error when compiling with Java-11</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shalomc">Shalom Crown</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jul 2020 08:20:39 +0000</created>
                <updated>Wed, 15 Jul 2020 08:25:26 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0grtc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-286] &lt;assign&gt; tag usage location error</title>
                <link>https://issues.apache.org/jira/browse/SCXML-286</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;I have this state machine description:&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
{{&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; version=&quot;1.0&quot; initial=&quot;Start&quot;&amp;gt; }}&lt;br/&gt;
{{&amp;lt;datamodel&amp;gt; }}&lt;br/&gt;
{{&#160;&#160; &amp;lt;data expr=&quot;true&quot; id=&quot;VarBool&quot;/&amp;gt; }}&lt;br/&gt;
{{&#160;&#160; &amp;lt;data expr=&quot;1&quot; id=&quot;VarInt&quot;/&amp;gt; }}&lt;br/&gt;
{{&#160;&#160; &amp;lt;data id=&quot;currentResponse&quot; expr=&quot;&amp;quot;Sorry I do not understand!&amp;quot;&quot; /&amp;gt; }}&lt;br/&gt;
{{&amp;lt;/datamodel&amp;gt; }}&lt;br/&gt;
{{&amp;lt;state id=&quot;Start&quot;&amp;gt; }}&lt;br/&gt;
{{&#160;&#160; &amp;lt;onentry&amp;gt; }}&lt;br/&gt;
{{&#160;&#160;&#160;&#160; &amp;lt;log expr=&quot;&apos;Start&apos;&quot; /&amp;gt; }}&lt;br/&gt;
{{&#160;&#160; &amp;lt;/onentry&amp;gt; }}&lt;br/&gt;
{{&#160;&#160; &amp;lt;transition event=&quot;what-is-my-name&quot; target=&quot;WhatIsMyName&quot; /&amp;gt;&#160;&#160; }}&lt;br/&gt;
{{&#160;&#160; &amp;lt;transition event=&quot;current-weather&quot; target=&quot;CurrentWeather&quot; /&amp;gt; &amp;lt;/state&amp;gt; }}&lt;br/&gt;
{{&amp;lt;state id=&quot;WhatIsMyName&quot;&amp;gt; }}&lt;br/&gt;
{{&#160;&#160; &amp;lt;onentry&amp;gt; &amp;lt;log expr=&quot;&apos;What is my name&apos;&quot; /&amp;gt; }}&lt;br/&gt;
{{&#160;&#160; &amp;lt;assign location=&quot;currentResponse&quot; expr=&quot;&amp;quot;Your name is noted!&amp;quot;&quot; /&amp;gt; }}&lt;br/&gt;
{{&#160;&#160; &amp;lt;/onentry&amp;gt; }}&lt;br/&gt;
{{&#160;&#160; &amp;lt;transition target=&quot;Start&quot; /&amp;gt; &amp;lt;/state&amp;gt; }}&lt;br/&gt;
When the state &lt;em&gt;WhatIsMyName&lt;/em&gt; becomes active then I am getting this error:&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
{{INFO: transition (event = what-is-my-name, cond = null, from = /Start, to = /WhatIsMyName) Feb 28, 2019 9:04:53 PM org.apache.commons.scxml2.SCXMLExecutionContext execute INFO: null: What is my name Feb 28, 2019 9:04:53 PM org.apache.commons.scxml2.env.SimpleErrorReporter handleErrorMessage &lt;font color=&quot;#FF0000&quot;&gt;WARNING: EXPRESSION_ERROR (evalLocation(&apos;currentResponse&apos;): java.lang.String cannot be cast to org.w3c.dom.Node): Expression error inside /WhatIsMyName&lt;/font&gt; Feb 28, 2019 9:04:53 PM org.apache.commons.scxml2.env.SimpleSCXMLListener onEntry INFO: enter /WhatIsMyName }}&lt;br/&gt;
&#160;&lt;/p&gt;

&lt;p&gt;I am using Apache Commons SCXML version 2 commons-scxml2-2.0-M1.jar.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;I am using Apache Commons SCXML version 2 commons-scxml2-2.0-M1.jar.&lt;/p&gt;</environment>
        <key id="13218706">SCXML-286</key>
            <summary>&lt;assign&gt; tag usage location error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="diptendu">Diptendu Dutta</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Feb 2019 17:58:48 +0000</created>
                <updated>Thu, 28 Feb 2019 18:44:52 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16780824" author="woon_san" created="Thu, 28 Feb 2019 18:44:52 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=diptendu&quot; class=&quot;user-hover&quot; rel=&quot;diptendu&quot;&gt;diptendu&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;According to your description, it doesn&apos;t look like a bug, but sounds like a good question.&lt;br/&gt;
Could you please ask the question again in the &quot;Commons User List&quot; [1]?&lt;br/&gt;
And prefix your message title with &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;SCXML&amp;#93;&lt;/span&gt; &quot;.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;

&lt;p&gt;[1] &lt;a href=&quot;http://commons.apache.org/mail-lists.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/mail-lists.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0078g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-285] Before executing invoke handlers after a macrostep all internal events must have been processed</title>
                <link>https://issues.apache.org/jira/browse/SCXML-285</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;I discovered a tricky bug in SCXMLSemanticsImpl#macroStep where it doesn&apos;t comply with the SCXML specification, part 3.13, which defines the following rules (among many others):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A&#160;&lt;em&gt;macrostep&lt;/em&gt;&#160;is a series of one or more microsteps ending in a configuration where the internal event queue is empty&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;After completing a macrostep, the SCXML Processor&#160;&lt;em&gt;must&lt;/em&gt;&#160;execute in document order the &amp;lt;invoke&amp;gt; handlers &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The tricky bug is that the current implementation does check for internal events first, but only processes the first event!&lt;br/&gt;
In case of more than 1 internal event, the invoke handlers will be executed &lt;b&gt;before&lt;/b&gt;&#160;(thereafter) processing any remaining internal events.&lt;/p&gt;

&lt;p&gt;The &#160;&lt;a href=&quot;https://www.w3.org/Voice/2013/scxml-irp/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SCXML IRP Tests&lt;/a&gt; didn&apos;t catch/test this condition, and it only in special scenarios will actually make a difference.&lt;br/&gt;
I&apos;ll add a dedicated test for this, and then apply a fix proving it.&#160;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13192390">SCXML-285</key>
            <summary>Before executing invoke handlers after a macrostep all internal events must have been processed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Oct 2018 22:46:16 +0000</created>
                <updated>Wed, 17 Oct 2018 23:01:17 +0000</updated>
                            <resolved>Wed, 17 Oct 2018 23:01:17 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3zc2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-277] setJexlEngineSilent and setJexlEngineStrict functions were removed from API</title>
                <link>https://issues.apache.org/jira/browse/SCXML-277</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-254&quot; title=&quot;Update to current dependencies for groovy, commons-jexl, commons-io, jackson&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-254&quot;&gt;&lt;del&gt;SCXML-254&lt;/del&gt;&lt;/a&gt;, the functions &lt;em&gt;setJexlEngineSilent&lt;/em&gt; and &lt;em&gt;setJexlEngineStrict&lt;/em&gt; were removed from the JexlEvaluator, with no apparent replacement.&lt;/p&gt;

&lt;p&gt;Interestingly, the underlying functionality and getters for the silent and strict flags remain.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13128414">SCXML-277</key>
            <summary>setJexlEngineSilent and setJexlEngineStrict functions were removed from API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="shalomc">Shalom Crown</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Jan 2018 06:16:31 +0000</created>
                <updated>Sun, 21 Jan 2018 22:50:12 +0000</updated>
                            <resolved>Sun, 21 Jan 2018 22:50:12 +0000</resolved>
                                    <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16333693" author="adouma" created="Sun, 21 Jan 2018 21:45:47 +0000"  >&lt;p&gt;Jexl3 now initializes the Jexl Engine using final values for strict and silent. Dynamically changing these no longer work, hence the setters no longer are meaningful.&lt;/p&gt;

&lt;p&gt;I agree the current getters and flags are now confusing, although they might be useful if/when someone wants to extend JexlEvaluator.&lt;/p&gt;

&lt;p&gt;Furthermore, while I introduced these flags in &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-183&quot; title=&quot;Expose JexlEngine strict/silent mode settings  through the JexlEvaluator for easier customization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-183&quot;&gt;&lt;del&gt;SCXML-183&lt;/del&gt;&lt;/a&gt; I no longer think these are useful to retain, as the default Jexl3 configuration (strict, non-silent on expression exceptions) are more and most practical.&lt;/p&gt;

&lt;p&gt;For the same reasoning, the changes I recently needed to introduce with &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-258&quot; title=&quot;Add Evaluator strict mode (boolean) needed for Jexl to properly fail on incorrect expressions &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-258&quot;&gt;&lt;del&gt;SCXML-258&lt;/del&gt;&lt;/a&gt; to allow/keep strict=false by default (for Jexl only) also no longer are practical, and made the API (up to the SCXMLExecutor) more complex/ugly.&lt;/p&gt;

&lt;p&gt;I&apos;ll create a new issue to drop these as no longer needed.&lt;/p&gt;


&lt;p&gt;Whoever really needs to use Jexl in a non-default way like with strict=false and/or silent=true can extend the JexlEvaluator class and override its createJexlEngine() method.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16333721" author="adouma" created="Sun, 21 Jan 2018 22:50:12 +0000"  >&lt;p&gt;Resolving as &quot;Not A Problem&quot; as explained above and &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-279&quot; title=&quot;Only use default Jexl3 setting for silent and strict, cleanup APIs accordingly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-279&quot;&gt;&lt;del&gt;SCXML-279&lt;/del&gt;&lt;/a&gt; solving it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="13132538">SCXML-279</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ohuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-275] &lt;content&gt; expression evaluation must fallback to empty string on error</title>
                <link>https://issues.apache.org/jira/browse/SCXML-275</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://www.w3.org/TR/2015/REC-scxml-20150901/#content&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SCXML &amp;lt;content&amp;gt; specification&lt;/a&gt; paragraph 5.6.2&lt;/p&gt;</description>
                <environment></environment>
        <key id="13125492">SCXML-275</key>
            <summary>&lt;content&gt; expression evaluation must fallback to empty string on error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Dec 2017 22:55:40 +0000</created>
                <updated>Sun, 17 Dec 2017 22:59:08 +0000</updated>
                            <resolved>Sun, 17 Dec 2017 22:59:08 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 45 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nzvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-273] Javascript engine (Nashorn) doesn&apos;t fail on accessing non-existing property, by default</title>
                <link>https://issues.apache.org/jira/browse/SCXML-273</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;W3C &lt;a href=&quot;https://www.w3.org/Voice/2013/scxml-irp/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SCXML IRP&lt;/a&gt; test &lt;a href=&quot;https://www.w3.org/Voice/2013/scxml-irp/307/test307.txml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;307&lt;/a&gt; fails for the ecma datamodel, because, &lt;b&gt;by default&lt;/b&gt;, the Javascript engine doesn&apos;t fail on referencing a missing property.&lt;/p&gt;

&lt;p&gt;While it is possible to &apos;fix&apos; this, but using the Nashorn Script API extension to add a &amp;#95;&amp;#95;noSuchProperty&amp;#95;&amp;#95;  hook to each and every object in the script context, see &lt;a href=&quot;https://wiki.openjdk.java.net/display/Nashorn/Nashorn+extensions&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Nashorn Extensions&lt;/a&gt;, this doesn&apos;t seems a practical or efficiently implementable solution.&lt;/p&gt;

&lt;p&gt;NB: the test307 &lt;b&gt;seems&lt;/b&gt; to pass when executed for the ecma datamodel, but this is explicitly a manual test, and the log output shows it is really failing.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="13124041">SCXML-273</key>
            <summary>Javascript engine (Nashorn) doesn&apos;t fail on accessing non-existing property, by default</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Dec 2017 01:17:12 +0000</created>
                <updated>Mon, 11 Dec 2017 01:17:12 +0000</updated>
                                            <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nqzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-266] SCXMLSemantics#matchTransition - code flow bug</title>
                <link>https://issues.apache.org/jira/browse/SCXML-266</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;There was a nasty bug #matchTransition where the for loop could prematurely be exited without a matching event.&lt;br/&gt;
W3C SCXML IRP test 422 surfaced this bug, and after the fix now passes as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13124005">SCXML-266</key>
            <summary>SCXMLSemantics#matchTransition - code flow bug</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Sun, 10 Dec 2017 17:03:26 +0000</created>
                <updated>Sun, 10 Dec 2017 17:04:57 +0000</updated>
                            <resolved>Sun, 10 Dec 2017 17:04:56 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nqrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-263] Javascript engine (Nashorn) cannot be shared between multiple SCXML instance executions</title>
                <link>https://issues.apache.org/jira/browse/SCXML-263</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;When an SCXML statemachine using the &quot;ecmascript&quot; datamodel invokes (&amp;lt;invoke&amp;gt;) another SCXML statemachine, the Javascript global context must not be shared between them.&lt;br/&gt;
The JSEvaluator therefore cannot (anymore) use a static instance of the Nashorn engine but must be created per JSEvaluator instance.&lt;br/&gt;
SCXML users should therefore need to make sure not to reuse/share a pre-defined JSEvaluator for multiple SCXML statemachine executions!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13124000">SCXML-263</key>
            <summary>Javascript engine (Nashorn) cannot be shared between multiple SCXML instance executions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Sun, 10 Dec 2017 14:31:44 +0000</created>
                <updated>Sun, 10 Dec 2017 14:33:18 +0000</updated>
                            <resolved>Sun, 10 Dec 2017 14:33:18 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nqq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-260] &lt;foreach&gt; must fail on using illegal item definition</title>
                <link>https://issues.apache.org/jira/browse/SCXML-260</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Trivial fix, bug discovered thanks to the SCXML IRP tests&lt;/p&gt;</description>
                <environment></environment>
        <key id="13123956">SCXML-260</key>
            <summary>&lt;foreach&gt; must fail on using illegal item definition</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Sun, 10 Dec 2017 03:23:07 +0000</created>
                <updated>Sun, 10 Dec 2017 03:25:22 +0000</updated>
                            <resolved>Sun, 10 Dec 2017 03:25:22 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nqgf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-253] Are entry points, exit points, forks and joins supported in commons SCXML?</title>
                <link>https://issues.apache.org/jira/browse/SCXML-253</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;I can&apos;t seem to find these elements mentioned in this &lt;a href=&quot;https://www.w3.org/TR/scxml/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;link&lt;/a&gt;. Or, are these elements not in the specification of SCXML?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13065760">SCXML-253</key>
            <summary>Are entry points, exit points, forks and joins supported in commons SCXML?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="chanon_s">Chanon</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Apr 2017 04:16:42 +0000</created>
                <updated>Sun, 10 Dec 2017 22:03:26 +0000</updated>
                            <resolved>Sun, 10 Dec 2017 22:03:26 +0000</resolved>
                                    <version>0.9</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16285398" author="adouma" created="Sun, 10 Dec 2017 22:03:26 +0000"  >&lt;p&gt;Please don&apos;t use JIRA tickets for questions,  use the user@commons.apache.org mailing list for that purpose.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3dwrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-251] src attribute is not available for data elements</title>
                <link>https://issues.apache.org/jira/browse/SCXML-251</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The read routine ignores the &quot;src&quot; attribute in &amp;lt;data&amp;gt; elements in the data model.&lt;/p&gt;

&lt;p&gt;The field should be available to allow for users of the library to identify data elements with a src, and process the value of the attribute.&lt;/p&gt;

&lt;p&gt;The Data class itself already has the src member, and the corresponding getters and setters.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12987500">SCXML-251</key>
            <summary>src attribute is not available for data elements</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="tobiasli">Tobias Lippert</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jul 2016 14:44:10 +0000</created>
                <updated>Tue, 2 Aug 2016 22:54:15 +0000</updated>
                            <resolved>Tue, 2 Aug 2016 22:54:15 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="15366220" author="tobiasli" created="Thu, 7 Jul 2016 14:46:29 +0000"  >&lt;p&gt;Adding the parsed attribute is straightforward, and a one-liner, and I will be happy to provide  patch for it.&lt;/p&gt;

&lt;p&gt;However, it be helpful to know which tests I should add, and where.&lt;/p&gt;

&lt;p&gt;How does the patch submission work? Do I post a patch file here, or should I push it to a git repository? (Is there a wiki page that describes the procedure?)&lt;/p&gt;</comment>
                            <comment id="15366231" author="woon_san" created="Thu, 7 Jul 2016 14:54:14 +0000"  >&lt;p&gt;Hi Tobias,&lt;/p&gt;

&lt;p&gt;The easiest way is, IMO, to fork &lt;a href=&quot;https://github.com/apache/commons-scxml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml&lt;/a&gt; and create a pull request. Then the pull request will be updated automatically with this jira ticket. Please prefix your pull request name with this jira ticket number. e.g, &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-251&quot; title=&quot;src attribute is not available for data elements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-251&quot;&gt;&lt;del&gt;SCXML-251&lt;/del&gt;&lt;/a&gt;: ...&quot;.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="15401268" author="githubbot" created="Sun, 31 Jul 2016 17:55:27 +0000"  >&lt;p&gt;GitHub user lippertto opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-251&quot; title=&quot;src attribute is not available for data elements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-251&quot;&gt;&lt;del&gt;SCXML-251&lt;/del&gt;&lt;/a&gt;: Parse src attribute of data elements&lt;/p&gt;

&lt;p&gt;    Also: reject data elements which have src and data defined.&lt;br/&gt;
    According to the scxml standard only either src or data are allowed.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/lippertto/commons-scxml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/lippertto/commons-scxml&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6f6f0f698dd81a0220cc74d6c10f545f23374bf4&lt;br/&gt;
Author: Tobias Lippert &amp;lt;lippertto_oss@fastmail.com&amp;gt;&lt;br/&gt;
Date:   2016-07-31T17:41:22Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-251&quot; title=&quot;src attribute is not available for data elements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-251&quot;&gt;&lt;del&gt;SCXML-251&lt;/del&gt;&lt;/a&gt;: Parse src attribute of data elements&lt;/p&gt;

&lt;p&gt;    Also: reject data elements which have src and data defined.&lt;br/&gt;
    According to the scmxl standard only src or data are allowed.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15402025" author="githubbot" created="Mon, 1 Aug 2016 13:29:49 +0000"  >&lt;p&gt;Github user woonsan commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2#discussion_r72977373&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2#discussion_r72977373&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/scxml2/io/SCXMLReader.java &amp;#8212;&lt;br/&gt;
    @@ -1094,7 +1094,21 @@ private static void readData(final XMLStreamReader reader, final Configuration c&lt;/p&gt;

&lt;p&gt;             Data datum = new Data();&lt;br/&gt;
             datum.setId(readRequiredAV(reader, ELEM_DATA, ATTR_ID));&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;datum.setExpr(readAV(reader, ATTR_EXPR));&lt;br/&gt;
    +        final String expr = readAV(reader, ATTR_EXPR);&lt;br/&gt;
    +        final String src = readAV(reader, ATTR_SRC);&lt;br/&gt;
    +&lt;br/&gt;
    +        if (expr != null &amp;amp;&amp;amp; src != null) {&lt;br/&gt;
    +          LogFactory.getLog(SCXMLReader.class).error(&lt;br/&gt;
    +              &quot;Found src and expr attributes for data node &apos;&quot; + datum.getId() + &quot;&apos;, which is not valid SCXML.&quot;);&lt;br/&gt;
    +          throw new ModelException();
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I think you should invoke #reportConflictingAttribute(reader, configuration, ...) instead here. That method leaves logs in a consistent manner and can handle strict or non-strict mode properly.&lt;/p&gt;</comment>
                            <comment id="15402026" author="woon_san" created="Mon, 1 Aug 2016 13:30:38 +0000"  >&lt;p&gt;Please see my comment in the PR:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I think you should invoke #reportConflictingAttribute(reader, configuration, ...) instead here. That method leaves logs in a consistent manner and can handle strict or non-strict mode properly.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="15402029" author="githubbot" created="Mon, 1 Aug 2016 13:32:48 +0000"  >&lt;p&gt;Github user woonsan commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2#discussion_r72977815&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2#discussion_r72977815&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/main/java/org/apache/commons/scxml2/io/SCXMLReader.java &amp;#8212;&lt;br/&gt;
    @@ -1094,7 +1094,21 @@ private static void readData(final XMLStreamReader reader, final Configuration c&lt;/p&gt;

&lt;p&gt;             Data datum = new Data();&lt;br/&gt;
             datum.setId(readRequiredAV(reader, ELEM_DATA, ATTR_ID));&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;datum.setExpr(readAV(reader, ATTR_EXPR));&lt;br/&gt;
    +        final String expr = readAV(reader, ATTR_EXPR);&lt;br/&gt;
    +        final String src = readAV(reader, ATTR_SRC);&lt;br/&gt;
    +&lt;br/&gt;
    +        if (expr != null &amp;amp;&amp;amp; src != null) 
{
    +          LogFactory.getLog(SCXMLReader.class).error(
    +              &quot;Found src and expr attributes for data node &apos;&quot; + datum.getId() + &quot;&apos;, which is not valid SCXML.&quot;);
    +          throw new ModelException();
    +        }
&lt;p&gt;    +        if (expr != null) &lt;/p&gt;
{
    +            datum.setExpr(expr);
    +        }
&lt;p&gt;    +        if (src != null) {&lt;br/&gt;
    +          datum.setSrc(src);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    it&apos;s minor, but our indentation rule is 4 spaces. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15402030" author="githubbot" created="Mon, 1 Aug 2016 13:33:34 +0000"  >&lt;p&gt;Github user woonsan commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2#discussion_r72977944&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2#discussion_r72977944&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/test/java/org/apache/commons/scxml2/io/SCXMLReaderTest.java &amp;#8212;&lt;br/&gt;
    @@ -278,6 +278,23 @@ public void testSCXMLReaderGroovyClosure() throws Exception &lt;/p&gt;
{
             Assert.assertNotNull(scxml.getGlobalScript());
         }

&lt;p&gt;    +    @Test(expected=org.apache.commons.scxml2.model.ModelException.class)&lt;br/&gt;
    +    public void dataWithSrcAndExprIsRejected() throws Exception &lt;/p&gt;
{
    +      SCXMLTestHelper.parse(&quot;org/apache/commons/scxml2/io/data-with-src-and-expr.xml&quot;);
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    @Test&lt;br/&gt;
    +    public void srcAttributeOfDataIsParsed() throws Exception &lt;/p&gt;
{
    +      SCXML scxml = SCXMLTestHelper.parse(&quot;org/apache/commons/scxml2/io/data-with-src.xml&quot;);
    +      Assert.assertNotNull(scxml);
    +      Assert.assertNotNull(scxml.getDatamodel());
    +      Assert.assertNotNull(scxml.getDatamodel().getData());
    +      Assert.assertEquals(&quot;Exactly one data element parsed.&quot;, 1, scxml.getDatamodel().getData().size());
    +      Data data = scxml.getDatamodel().getData().get(0);
    +      Assert.assertNotNull(data);
    +      Assert.assertEquals(&quot;http://www.w3.org/TR/sxcml&quot;, data.getSrc());
    +    }
&lt;p&gt;    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Could you also add a test to read Data#getExpr()?&lt;/p&gt;</comment>
                            <comment id="15402352" author="githubbot" created="Mon, 1 Aug 2016 16:26:38 +0000"  >&lt;p&gt;Github user lippertto commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hello Woonsan,&lt;br/&gt;
    thanks for the review. I added another commit which addresses your comments.&lt;br/&gt;
    Is there anything else?&lt;br/&gt;
    Tobias&lt;/p&gt;</comment>
                            <comment id="15404943" author="githubbot" created="Tue, 2 Aug 2016 22:45:56 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15404952" author="woon_san" created="Tue, 2 Aug 2016 22:53:59 +0000"  >&lt;p&gt;Thank you very much for the contribution! It&apos;s now merged.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30nlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-239] Groovy Context lose sync after serialize/deserialize of SCinstance</title>
                <link>https://issues.apache.org/jira/browse/SCXML-239</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Groovy Context lose sync after serialize/deserialize SC instance&lt;/p&gt;

&lt;p&gt;Steps to reproduce issue:&lt;br/&gt;
	1. detach SC instance&lt;br/&gt;
	2. serialize SC instance&lt;br/&gt;
	3. deserialize SC instance&lt;br/&gt;
	4. attach SC instance&lt;br/&gt;
Result:&lt;br/&gt;
	Groovy context loose sync, and afterwards In(&apos;state&apos;) condition is not working properly&lt;/p&gt;</description>
                <environment></environment>
        <key id="12901279">SCXML-239</key>
            <summary>Groovy Context lose sync after serialize/deserialize of SCinstance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="gkadnar">Goran Kadnar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Sep 2015 11:02:47 +0000</created>
                <updated>Sat, 2 Jan 2016 22:26:16 +0000</updated>
                            <resolved>Sat, 2 Jan 2016 20:52:51 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14935016" author="gkadnar" created="Tue, 29 Sep 2015 11:24:44 +0000"  >&lt;p&gt;added test case and trace files&lt;/p&gt;</comment>
                            <comment id="15076654" author="adouma" created="Sat, 2 Jan 2016 20:20:52 +0000"  >&lt;p&gt;Thanks for reporting this!&lt;br/&gt;
Clearly a bug and it took me a while to figure out what goes wrong.&lt;/p&gt;

&lt;p&gt;The problem lies in the custom GroovyContext serialization handling, for which I added (&lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-186&quot; title=&quot;Groovy expression evaluator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-186&quot;&gt;&lt;del&gt;SCXML-186&lt;/del&gt;&lt;/a&gt;) overriding readObject and writeObject methods.&lt;br/&gt;
Within the readObject method, Groovy objects stored in the context variables their deserialization class name needs to be dynamically resolved.&lt;br/&gt;
For that purpose an extra extended ByteInputStream is used with an override for the resolveClass() method.&lt;br/&gt;
Long story short, while this technically is working correct, it goes wrong if the variables contain an object &lt;b&gt;also&lt;/b&gt; otherwise deserialized by the &apos;main&apos; ObjectInputStream, in which case this object will be deserialized &lt;b&gt;twice&lt;/b&gt; (separate instances) as these two ObjectInputStreams don&apos;t know about each other &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;br/&gt;
And this occurs with the SCInstance Status instance variable which also is referenced from the protected variables within the SCXMLSystemContext.&lt;br/&gt;
Hence, after SCInstance deserialization these two Statuses are no longer the same, causing the problem you detected.&lt;/p&gt;

&lt;p&gt;For now, I&apos;ll fix this &apos;quick and dirty&apos;, by no longer using an language specific Context (e.g. GroovyContext) for this protected SCXMLSystemContext internal context, nor the (default) root Context.&lt;br/&gt;
Those two contexts don&apos;t need to be, nor IMO should be, language specific anyway.&lt;br/&gt;
With these fixes the SCXMLSystemContext internal context will just use the default (de)serializing ObjectInputStream and thus no longer create two &apos;disconnected&apos; Status objects. &lt;/p&gt;

&lt;p&gt;However, this still leaves the door open for GroovyContext deserialization problems if/when its variables contain an object also otherwise referenced by SCInstance.&lt;/p&gt;

&lt;p&gt;I&apos;ve created &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-247&quot; title=&quot;Provide dedicated SCInstanceObjectInputStream to support proper dynamic class resolution in GroovyContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-247&quot;&gt;&lt;del&gt;SCXML-247&lt;/del&gt;&lt;/a&gt; which will provide a more resilient solution. &lt;/p&gt;</comment>
                            <comment id="15076695" author="adouma" created="Sat, 2 Jan 2016 22:26:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-247&quot; title=&quot;Provide dedicated SCInstanceObjectInputStream to support proper dynamic class resolution in GroovyContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-247&quot;&gt;&lt;del&gt;SCXML-247&lt;/del&gt;&lt;/a&gt; has been implemented. You now must use dedicated SCInstanceObjectInputStream instead of plain ObjectInputStream for de-serializing SCInstances.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12925242">SCXML-247</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12764225" name="testNOK.trc" size="2056" author="gkadnar" created="Tue, 29 Sep 2015 11:24:44 +0000"/>
                            <attachment id="12764226" name="testOK.trc" size="2571" author="gkadnar" created="Tue, 29 Sep 2015 11:24:44 +0000"/>
                            <attachment id="12764227" name="test_case.7z" size="3716215" author="gkadnar" created="Tue, 29 Sep 2015 11:24:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mefr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-238] idlocation not read for invoke element</title>
                <link>https://issues.apache.org/jira/browse/SCXML-238</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;idlocation attribute on &amp;lt;invoke&amp;gt; element is not read by the SCXMLReader, hence can&apos;t refer to the generated id.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12854156">SCXML-238</key>
            <summary>idlocation not read for invoke element</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rgururaj">rajguru</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Aug 2015 13:35:38 +0000</created>
                <updated>Sun, 10 Dec 2017 22:04:54 +0000</updated>
                            <resolved>Sun, 10 Dec 2017 22:04:54 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="13124003">SCXML-264</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2il5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-237] Javadoc generation fails on JDK18</title>
                <link>https://issues.apache.org/jira/browse/SCXML-237</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Maven site plugin fails due to Javadoc errors on JDK 1.8:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-site-plugin:3.4:site (default-site) on project commons-scxml2: Error generating maven-javadoc-plugin:2.10.2:javadoc:
&#8230;
warning: no @param for state
[ERROR] public Context getContext(EnterableState state) {
[ERROR] ^
...
unknown tag: assign
[ERROR] * The allowable types of &amp;lt;assign/&amp;gt; including and in particular when using XPath
[ERROR] ^
...
error: unexpected end tag: &amp;lt;/p&amp;gt;
[ERROR] *  &amp;lt;/p&amp;gt;
[ERROR] ^
...
error: self-closing element not allowed
[ERROR] *  register the provider under the {@link Evaluator#DEFAULT_DATA_MODEL} (&quot;&quot;) value for the datamodel.&amp;lt;br/&amp;gt;
[ERROR] ^
...
warning: no @throws for org.apache.commons.scxml2.model.ModelException
[ERROR] protected void setEvaluator(Evaluator evaluator, boolean reAttach) throws ModelException {
[ERROR] ^
...
error: unexpected content
[ERROR] * @see {@link SCInstance#initialize()}
[ERROR] ^
...
warning - Tag @see:illegal character: &quot;123&quot; in &quot;{@link SCInstance#initialize()}&quot;
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12846931">SCXML-237</key>
            <summary>Javadoc generation fails on JDK18</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="woon_san">Woonsan Ko</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Jul 2015 15:53:18 +0000</created>
                <updated>Sat, 25 Jul 2015 20:26:26 +0000</updated>
                            <resolved>Sat, 25 Jul 2015 20:26:26 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14641776" author="woon_san" created="Sat, 25 Jul 2015 20:26:26 +0000"  >&lt;p&gt;Fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hk7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-234] Unit test (ScriptTest) fails on Java 1.8 due to new JS Engine</title>
                <link>https://issues.apache.org/jira/browse/SCXML-234</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;One unit test fails:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Running org.apache.commons.scxml2.model.ScriptTest
Tests run: 2, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.226 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.commons.scxml2.model.ScriptTest
testJavaScriptExecution(org.apache.commons.scxml2.model.ScriptTest)  Time elapsed: 0.218 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
org.junit.ComparisonFailure: expected:&amp;lt;[end]&amp;gt; but was:&amp;lt;[script]&amp;gt;
	at org.junit.Assert.assertEquals(Assert.java:115)
	at org.junit.Assert.assertEquals(Assert.java:144)
	at org.apache.commons.scxml2.model.ScriptTest.testJavaScriptExecution(ScriptTest.java:49)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tested on JDK 1.8.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12843178">SCXML-234</key>
            <summary>Unit test (ScriptTest) fails on Java 1.8 due to new JS Engine</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="woon_san">Woonsan Ko</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jul 2015 13:09:55 +0000</created>
                <updated>Sun, 12 Jul 2015 15:13:41 +0000</updated>
                            <resolved>Sun, 12 Jul 2015 15:13:41 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14619575" author="adouma" created="Wed, 8 Jul 2015 23:21:43 +0000"  >&lt;p&gt;I was aware this test fails on Java 8.&lt;br/&gt;
However right now SCXML (javascript support) is still assuming Java 6 (or 7) only, and thereby implemented assuming the outdated/limited Mozilla Rhino Javascript engine.   &lt;br/&gt;
As result, the current javascript support and implementation is quite incomplete, broken even, and non-compliant compared to the Jexl and Groovy scripting support.&lt;/p&gt;

&lt;p&gt;I actually we better switch to Java 8 as minimum and completely remove/replace the current implementation and re-implement based on the new and much better Java 8 nashorn Javascript engine instead.&lt;br/&gt;
I don&apos;t have the cycles to work on this right now, but I think this is the only path forward.&lt;br/&gt;
Fixing or trying to workaround the incompatibilities and limitations of the Java 6 Javascript engine is a dead-end.&lt;/p&gt;</comment>
                            <comment id="14623846" author="woon_san" created="Sun, 12 Jul 2015 15:13:20 +0000"  >&lt;p&gt;Fixed by merging this PR: &lt;a href=&quot;https://github.com/apache/commons-scxml/pull/1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/pull/1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The main difference made in nashorn JavaScriptEngine (Java 1.8), from user&apos;s perspective, is &quot;user can supply any ScriptContext implementation containing any Bindings object as ENGINE_SCOPE, nashorn engine cannot always assume ENGINE_SCOPE Bindings to be backed by a nashorn Global instance.&quot; &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
So, the user should retrieve the nashorn global object (the only location where the evaluated variables are stored) like the example &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// nashorn engine associates a fresh nashorn Global with the ENGINE_SCOPE
&lt;/span&gt;   &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; obj = myNewContext.getBindings(ScriptContext.ENGINE_SCOPE);
   &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; nashornGlobal = ((Bindings)obj).get(&lt;span class=&quot;code-quote&quot;&gt;&quot;nashorn.global&quot;&lt;/span&gt;); 
   &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-quote&quot;&gt;&quot;nashorn.global&quot;&lt;/span&gt; is the key used to associate
&lt;/span&gt;   ScriptObjectMirror globalMirror = (ScriptObjectMirror) nashornGlobal;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Luckily ScriptObjectMirror is javax.script.Bindings type, so I used Bindings to cast the nashorn.globals when available. This makes it compatible with standard API usages, without having to depend on nashorn specific APIs.&lt;br/&gt;
Also, I was able to check if nashorn.globals is available or not, so this fix would make the test work on both Java 1.8 and earlier versions.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://wiki.openjdk.java.net/display/Nashorn/Nashorn+jsr223+engine+notes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wiki.openjdk.java.net/display/Nashorn/Nashorn+jsr223+engine+notes&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gxqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-233] SCInstance becomes not serialzable after triggering event</title>
                <link>https://issues.apache.org/jira/browse/SCXML-233</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Triggering an event on SCXML executor with attached JSEvaluator makes the SCInstance not-serializable. Seems like SCXMLExecutor#.triggerEvent invocation sets a reference to SCXMLExecutor in SCInstance.&lt;/p&gt;

&lt;p&gt;Reproducer: &lt;a href=&quot;https://github.com/AdamBien/stateful/blob/master/stateful/src/test/java/com/airhacks/stateful/machine/boundary/StateManagerTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/AdamBien/stateful/blob/master/stateful/src/test/java/com/airhacks/stateful/machine/boundary/StateManagerTest.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.io.NotSerializableException: org.apache.commons.scxml2.SCXMLExecutor
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at java.util.HashMap.internalWriteEntries(HashMap.java:1777)
	at java.util.HashMap.writeObject(HashMap.java:1354)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:988)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at java.util.HashMap.internalWriteEntries(HashMap.java:1777)
	at java.util.HashMap.writeObject(HashMap.java:1354)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:988)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at java.util.HashMap.internalWriteEntries(HashMap.java:1777)
	at java.util.HashMap.writeObject(HashMap.java:1354)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:988)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)
	at com.airhacks.stateful.machine.boundary.StateManagerTest.reserialize(StateManagerTest.java:88)
	at com.airhacks.stateful.machine.boundary.StateManagerTest.triggerWithParametersWithDetachment(StateManagerTest.java:78)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12841865">SCXML-233</key>
            <summary>SCInstance becomes not serialzable after triggering event</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="abien">Adam Bien</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Jul 2015 01:23:55 +0000</created>
                <updated>Tue, 21 Jul 2015 13:50:14 +0000</updated>
                            <resolved>Sun, 12 Jul 2015 17:12:09 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14609486" author="woon_san" created="Wed, 1 Jul 2015 02:59:09 +0000"  >&lt;p&gt;I don&apos;t see an attachment or the test class.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Seems like SCXMLExecutor#.triggerEvent invocation sets a reference to SCXMLExecutor in SCInstance&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;As far as I know, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=adouma&quot; class=&quot;user-hover&quot; rel=&quot;adouma&quot;&gt;adouma&lt;/a&gt; resolved the issue while fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-196&quot; title=&quot;Redefine SCXMLSemantics to align with the Algorithm for SCXML Interpretation as described in the SCXML specification&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-196&quot;&gt;&lt;del&gt;SCXML-196&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-197&quot; title=&quot;Better separation of concern between SCXMLExecutor and SCInstance and introducing a new SCXMLExecutionContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-197&quot;&gt;&lt;del&gt;SCXML-197&lt;/del&gt;&lt;/a&gt;. So, SCInstance doesn&apos;t have SCXMLExecutor member any more.&lt;/p&gt;</comment>
                            <comment id="14609490" author="abien" created="Wed, 1 Jul 2015 03:06:38 +0000"  >&lt;p&gt;The code was moved to: &lt;a href=&quot;https://github.com/AdamBien/stateful/blob/master/stateful/src/test/java/com/airhacks/stateful/machine/boundary/StateManagerTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/AdamBien/stateful/blob/master/stateful/src/test/java/com/airhacks/stateful/machine/boundary/StateManagerTest.java&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;It is the ignored test.&lt;/p&gt;

&lt;p&gt;I&apos;m working with 2.0 Snapshots. Also it seems only to happen with JSEvaluator. The serialization of SCInstance#contexts (Map&amp;lt;EnterableState, Context&amp;gt;) fails.&lt;/p&gt;
</comment>
                            <comment id="14616324" author="abien" created="Tue, 7 Jul 2015 07:37:40 +0000"  >&lt;p&gt;Could you reproduce the problem? Is there an easy way to capture the state of the STM without SCInstance? Just the current state would be sufficient.&lt;/p&gt;

&lt;p&gt;thanks in advance,&lt;/p&gt;

&lt;p&gt;&#8212;adam&lt;/p&gt;
</comment>
                            <comment id="14618454" author="woon_san" created="Wed, 8 Jul 2015 11:38:43 +0000"  >&lt;p&gt;Now I see the issue clearly. Thank you very much for reporting this!&lt;br/&gt;
One mistake on your side is that the SCInstance object must be detached before serialization.&lt;/p&gt;

&lt;p&gt;So, you should have done like this for instance:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        reserialized = copy.detachInstance();  &lt;span class=&quot;code-comment&quot;&gt;// detach first!
&lt;/span&gt;        reserialize(reserialized);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, this wouldn&apos;t solve the serialization problem thoroughly yet. I see some objects are not serializable at all. e.g, org.apache.commons.scxml2.env.javascript.JSFunctions.&lt;br/&gt;
I think we should fix this area and test thoroughly now.. I also found another issue with ECMAScript and filed &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-234&quot; title=&quot;Unit test (ScriptTest) fails on Java 1.8 due to new JS Engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-234&quot;&gt;&lt;del&gt;SCXML-234&lt;/del&gt;&lt;/a&gt; to fix..&lt;/p&gt;</comment>
                            <comment id="14619577" author="adouma" created="Wed, 8 Jul 2015 23:24:35 +0000"  >&lt;p&gt;See my comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-234&quot; title=&quot;Unit test (ScriptTest) fails on Java 1.8 due to new JS Engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-234&quot;&gt;&lt;del&gt;SCXML-234&lt;/del&gt;&lt;/a&gt;: I think we should upgrade/require Java 8 and replace/re-implement the Javascript support based on the new nashorn engine.&lt;br/&gt;
The current javascript support is not very functional and broken for many of the spec tests. &lt;/p&gt;</comment>
                            <comment id="14623903" author="woon_san" created="Sun, 12 Jul 2015 17:11:43 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=commons-scxml.git;a=commit;h=046f547b562ba2df5bc03f9a5c0125840a39cb2f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=commons-scxml.git;a=commit;h=046f547b562ba2df5bc03f9a5c0125840a39cb2f&lt;/a&gt;.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Nashorn JavaScript engine puts &quot;nashorn.global&quot; in JSBindings while evaluating. The globals is not serializable, so it bothers serializing context object.&lt;/li&gt;
	&lt;li&gt;So, putting the global only into Bindings now, which let us not have to serialize it.&lt;/li&gt;
	&lt;li&gt;Also, mark JSFunctions as Serializable.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14623908" author="woon_san" created="Sun, 12 Jul 2015 17:18:43 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abien&quot; class=&quot;user-hover&quot; rel=&quot;abien&quot;&gt;abien&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;It was fixed in master branch now. By the way, Commons SCXML has just moved to GIT, so you should clone it from either github or apache git to build a snapshot version. You will be able to find those URLs here: &lt;a href=&quot;https://git.apache.org&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git.apache.org&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Regarding your test case failure in StateManager#triggerWithParametersWithDetachment(), it will work if you change the following lines:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;BEFORE
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        JsonObject result = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.cut.trigger(stateMachineId, event, condition);
        &lt;span class=&quot;code-comment&quot;&gt;//serialization after state change fails
&lt;/span&gt;        reserialize(reserialized);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;AFTER
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        JsonObject result = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.cut.trigger(stateMachineId, event, condition);
        &lt;span class=&quot;code-comment&quot;&gt;//serialization after state change fails
&lt;/span&gt;        reserialized = copy.detachInstance();
        reserialize(reserialized);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Please note that you should detach the instance by calling SCXMLExecutor#detachInstance() before serializing.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="14624184" author="abien" created="Mon, 13 Jul 2015 04:23:40 +0000"  >&lt;p&gt;Big thanks! I will unit and integration test your fix this week!&lt;/p&gt;

&lt;p&gt;Moving to git is a great idea. &lt;/p&gt;
</comment>
                            <comment id="14630763" author="abien" created="Fri, 17 Jul 2015 04:42:39 +0000"  >&lt;p&gt;I adjusted the test. It still fails with: &lt;/p&gt;

&lt;p&gt;java.io.NotSerializableException: org.apache.commons.scxml2.env.javascript.JSFunctions&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1184)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)&lt;br/&gt;
	at java.util.HashMap.internalWriteEntries(HashMap.java:1777)&lt;br/&gt;
	at java.util.HashMap.writeObject(HashMap.java:1354)&lt;br/&gt;
	at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:497)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:988)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)&lt;br/&gt;
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)&lt;br/&gt;
	at java.util.HashMap.internalWriteEntries(HashMap.java:1777)&lt;br/&gt;
	at java.util.HashMap.writeObject(HashMap.java:1354)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:497)&lt;br/&gt;
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:988)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1496)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)&lt;br/&gt;
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1548)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1509)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1432)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1178)&lt;br/&gt;
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:348)&lt;br/&gt;
	at com.airhacks.stateful.machine.boundary.StateManagerTest.reserialize(StateManagerTest.java:88)&lt;br/&gt;
	at com.airhacks.stateful.machine.boundary.StateManagerTest.triggerWithParametersWithDetachment(StateManagerTest.java:78)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:497)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)&lt;br/&gt;
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)&lt;br/&gt;
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:300)&lt;br/&gt;
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:242)&lt;br/&gt;
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:137)&lt;br/&gt;
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:497)&lt;br/&gt;
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)&lt;br/&gt;
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)&lt;br/&gt;
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)&lt;br/&gt;
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)&lt;br/&gt;
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)&lt;/p&gt;

&lt;p&gt;Did I picked an old snapshot?&lt;/p&gt;</comment>
                            <comment id="14631234" author="woon_san" created="Fri, 17 Jul 2015 11:58:04 +0000"  >&lt;p&gt;Yes, I think so. JSFunctions was marked as Serializable with my commit:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/commons-scxml/blob/master/src/main/java/org/apache/commons/scxml2/env/javascript/JSFunctions.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-scxml/blob/master/src/main/java/org/apache/commons/scxml2/env/javascript/JSFunctions.java&lt;/a&gt;&lt;br/&gt;
Could you try to clone and build/install it locally instead?&lt;br/&gt;
I don&apos;t know if there&apos;s a snapshot repository in ASF side for SCXML. Let me find it out, but it would take time to fix that infra issue if there&apos;s one to update.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14635134" author="abien" created="Tue, 21 Jul 2015 13:50:14 +0000"  >&lt;p&gt;I freshly build scxml from github and it worked. However: the snapshot in the repo is from: commons-scxml2-2.0-20150409 (April). It would be important to push your fixes into the repo. I will raise a separate issue for that.&lt;/p&gt;

&lt;p&gt;Thanks again!,&lt;/p&gt;

&lt;p&gt;adam&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gpsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-232] Invoke element with content as a xml node</title>
                <link>https://issues.apache.org/jira/browse/SCXML-232</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;// TODO: } else &lt;/p&gt;
{ invoker.invoke(srcNode, payloadDataMap); }

&lt;p&gt;I see this line of code in Invoke.java at line number 403.&lt;br/&gt;
I know it&apos;s still in Snapshot version, also there an approximate release date for version 2.0.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12840377">SCXML-232</key>
            <summary>Invoke element with content as a xml node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rgururaj">rajguru</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2015 23:42:18 +0000</created>
                <updated>Sun, 10 Dec 2017 22:00:56 +0000</updated>
                            <resolved>Sun, 10 Dec 2017 22:00:56 +0000</resolved>
                                    <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="13124003">SCXML-264</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ggqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-227] Cancel doesn&apos;t work</title>
                <link>https://issues.apache.org/jira/browse/SCXML-227</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Hey,&lt;/p&gt;

&lt;p&gt;I created a small scxml engine (will attach) and it does not work with the current trunk of commons-scxml. It looks like the SCXMLReader does neither set the sendid nor the sendidexpr. I added the necessary code to SCXMLReader and sendidexpr-support to cancel (will attach).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12786010">SCXML-227</key>
            <summary>Cancel doesn&apos;t work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="hiu.phail">Michael Goerlich</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Mar 2015 21:02:01 +0000</created>
                <updated>Thu, 9 Apr 2015 13:41:48 +0000</updated>
                            <resolved>Thu, 9 Apr 2015 03:44:33 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14382662" author="hiu.phail" created="Thu, 26 Mar 2015 21:03:09 +0000"  >&lt;p&gt;patch for &amp;lt;cancel/&amp;gt;&lt;/p&gt;</comment>
                            <comment id="14382666" author="hiu.phail" created="Thu, 26 Mar 2015 21:03:48 +0000"  >&lt;p&gt;example for cancel&lt;/p&gt;</comment>
                            <comment id="14391299" author="woon_san" created="Wed, 1 Apr 2015 19:39:11 +0000"  >&lt;p&gt;Thanks for reporting this!&lt;br/&gt;
The SCXMLReader seems to be missing the sendid and sendidexpr obviously according to your patch file and the specification &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.&lt;br/&gt;
I&apos;ll try to add or improve a unit test for this when applying your patch soon.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/TR/scxml/#cancel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/scxml/#cancel&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14486640" author="woon_san" created="Thu, 9 Apr 2015 03:44:33 +0000"  >&lt;p&gt;Fixed by applying Michael Goerlich&apos;s patch with validating unit tests.&lt;br/&gt;
Thanks a lot for your contribution!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12707598" name="cancel_example.xml" size="1112" author="hiu.phail" created="Thu, 26 Mar 2015 21:03:48 +0000"/>
                            <attachment id="12707597" name="patchCancel.patch" size="4270" author="hiu.phail" created="Thu, 26 Mar 2015 21:03:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27f3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-226] Support of special send targets #_parent, #_invokeid and #_scxml_sessionid</title>
                <link>https://issues.apache.org/jira/browse/SCXML-226</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Currently it is not possible to use #_parent and #_invokeid to allow communication between two scxml instances where one invoked the other. &lt;/p&gt;

&lt;p&gt;Due to the last changes the _ioprocessors variable was introduced. If the target of a &amp;lt;send&amp;gt; may reference to an entry in the _ioprocessors map, then it should be possible to forward events directly to the registered SCXMLIOProcessor instance.&lt;/p&gt;

&lt;p&gt;Given this the invoker must supply a SCXMLIOProcessor for the parent to register within the its SCXMLExecutionContext map as #_invokeId and the invoker must register the parent SCXMLIOProcessor as #_parent within the execution context of the SCXMLExecutor. As well as this the EventDispatcher must take the SCXMLIOProcessor registered for the target from _ioprocessors.&lt;/p&gt;

&lt;p&gt;Based on my assumptions I tried to implement this and uploaded the patch to: &lt;a href=&quot;http://pastebin.com/t855Ugs1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://pastebin.com/t855Ugs1&lt;/a&gt; . Hope it helps.&lt;br/&gt;
------&lt;br/&gt;
Update (Ate): besides the above improvements, support for #_scxml_sessionid now also has been added, allowing to send events to the own SCXML session through the external SCXMLIOProcessor.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12774301">SCXML-226</key>
            <summary>Support of special send targets #_parent, #_invokeid and #_scxml_sessionid</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="hiu.phail">Michael Goerlich</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Feb 2015 18:17:28 +0000</created>
                <updated>Sun, 10 Dec 2017 21:32:03 +0000</updated>
                            <resolved>Sun, 10 Dec 2017 21:32:03 +0000</resolved>
                                    <version>0.5</version>
                    <version>0.6</version>
                    <version>0.7</version>
                    <version>0.8</version>
                    <version>0.9</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14316700" author="hiu.phail" created="Wed, 11 Feb 2015 18:18:39 +0000"  >&lt;p&gt;Added file to jira as well in case the paste gets deleted.&lt;/p&gt;</comment>
                            <comment id="14317195" author="adouma" created="Wed, 11 Feb 2015 23:26:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hiu.phail&quot; class=&quot;user-hover&quot; rel=&quot;hiu.phail&quot;&gt;hiu.phail&lt;/a&gt; Thank you for this contribution!&lt;br/&gt;
Your timing is perfect &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I&apos;ve actually been working the last few days on an improvement in exactly the same area, although so far only concerning #_parent support.&lt;br/&gt;
I do like your patch and it definitely helps! &lt;br/&gt;
Your changes for the #_parent target in general match those of mine (high-level), but there are a few differences...  &lt;/p&gt;

&lt;p&gt;My changes (for #_parent) are more elaborate  because I also added additional support for setting up the child SCXMLExecutor.&lt;br/&gt;
A child SCXMLExecutor should (as a default) also &apos;share&apos; the same SCXMLSemantics implementation, EventDispatcher, and ErrorReporter.&lt;br/&gt;
This requires that the Invoker (SimpleSCXMLInvoker) gets a reference to the &apos;parent&apos; SCXMLExecutor passed in.&lt;br/&gt;
All this resulted in a few other changes, one of which was dropping the no longer useful (too limiting) InvokerManager interface!&lt;/p&gt;

&lt;p&gt;Long story short: I am about to commit &lt;b&gt;my&lt;/b&gt; changes for #_parent target support first, and I think those changes will &apos;align&apos; with your current usages.&lt;br/&gt;
As said: there are some more API changes and some different from your patch, but I think it should be easy to adjust to those.&lt;/p&gt;

&lt;p&gt;Once I&apos;ve committed those, I&apos;ll rework your patch for the #_invokeid support and merge that in as well.&lt;br/&gt;
If the end result is not providing or somehow limiting in what you need/expected, just let me know and we can work out further adjustments or enhancements.&lt;/p&gt;

&lt;p&gt;Thanks again for your contribution, and I&apos;m looking forward for more &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Regards, Ate&lt;/p&gt;</comment>
                            <comment id="14317319" author="adouma" created="Thu, 12 Feb 2015 01:11:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hiu.phail&quot; class=&quot;user-hover&quot; rel=&quot;hiu.phail&quot;&gt;hiu.phail&lt;/a&gt; I&apos;ve reworked your patch for the remaining #_invokeid support (largely intact) and comitted it.&lt;/p&gt;

&lt;p&gt;I don&apos;t have a direct test-case available for this yet, but am also working on adding support for embedded scxml &amp;lt;content&amp;gt; in invoke definitions, &lt;br/&gt;
for which the w3c tests have plenty examples including (then) tests for the #_invokeid targets.&lt;/p&gt;

&lt;p&gt;But if you can verify if the current changes already work in your context, that would be great!&lt;/p&gt;

&lt;p&gt;I leave this issue open and assign it to you for review.&lt;br/&gt;
If you have any comments or feedback, please let me know.&lt;/p&gt;

&lt;p&gt;Thanks again for the contribution!&lt;/p&gt;

&lt;p&gt;p.s. I&apos;m also working on support for the #_scxml_sessionid target, but that needs a little bit more work.&lt;br/&gt;
Once I have that working, I&apos;ll update and expand this issue (title as well) to add it too.&lt;/p&gt;</comment>
                            <comment id="14317323" author="adouma" created="Thu, 12 Feb 2015 01:12:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hiu.phail&quot; class=&quot;user-hover&quot; rel=&quot;hiu.phail&quot;&gt;hiu.phail&lt;/a&gt; Sorry, can&apos;t assign it to you, for that you need higher privileges (which I can&apos;t give you directly right now).&lt;/p&gt;</comment>
                            <comment id="14317370" author="adouma" created="Thu, 12 Feb 2015 01:42:09 +0000"  >&lt;p&gt;As indicated earlier, I&apos;ve now also added support for #_scxml_sessionid&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12698148" name="fix_invoke_special_targets" size="6630" author="hiu.phail" created="Wed, 11 Feb 2015 18:18:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25hyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-223] Project Page Contains Broken Link to Eclipse Plugin</title>
                <link>https://issues.apache.org/jira/browse/SCXML-223</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The project page &lt;a href=&quot;http://commons.apache.org/proper/commons-scxml/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-scxml/&lt;/a&gt; contains a link, &quot;Commons SCXML - Eclipse&quot; with a reference to &lt;a href=&quot;http://commons.apache.org/sandbox/gsoc/2010/scxml-eclipse/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/sandbox/gsoc/2010/scxml-eclipse/&lt;/a&gt;.  The link is bad.&lt;/p&gt;</description>
                <environment>&lt;p&gt;N/A&lt;/p&gt;</environment>
        <key id="12763053">SCXML-223</key>
            <summary>Project Page Contains Broken Link to Eclipse Plugin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="mbmast">Michael Mast</reporter>
                        <labels>
                            <label>links</label>
                    </labels>
                <created>Sat, 20 Dec 2014 02:58:34 +0000</created>
                <updated>Wed, 29 Jul 2015 14:24:16 +0000</updated>
                            <resolved>Wed, 29 Jul 2015 14:24:16 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14646089" author="woon_san" created="Wed, 29 Jul 2015 14:17:33 +0000"  >&lt;p&gt;I believe the link should be &lt;a href=&quot;http://svn.apache.org/repos/asf/commons/sandbox/gsoc/2010/scxml-eclipse/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/commons/sandbox/gsoc/2010/scxml-eclipse/&lt;/a&gt; instead according to &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. The old GSoC project home doesn&apos;t seem to exist any more.&lt;br/&gt;
I&apos;ll change the link to the SVN source link.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://markmail.org/message/mxadcpp6yqqg4niz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/message/mxadcpp6yqqg4niz&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14646111" author="woon_san" created="Wed, 29 Jul 2015 14:24:06 +0000"  >&lt;p&gt;Fixed in site documentation source.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23nnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-217] &lt;parallel&gt; doesn&apos;t work correctly (according to SCXML2 W3C Spec)</title>
                <link>https://issues.apache.org/jira/browse/SCXML-217</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;W3C Specification says: &lt;blockquote&gt;&lt;p&gt;&amp;lt;parallel&amp;gt;: &#8222;... Transitions &lt;b&gt;within the individual child elements operate normally&lt;/b&gt;. However &lt;b&gt;whenever a transition is taken with a target outside the &amp;lt;parallel&amp;gt; element, the &amp;lt;parallel&amp;gt; element and all of its child elements are exited&lt;/b&gt; and the corresponding &amp;lt;onexit&amp;gt; &#8230;&#8220;&lt;/p&gt;&lt;/blockquote&gt;&lt;/p&gt;

&lt;p&gt;In the current implementation (I tested commons-SCXML2-2.0-SNAPSHOT.jar from the 13th of September) it happens (reproducible) that the &amp;lt;parallel&amp;gt; region is exited also if the target of a &amp;lt;transition&amp;gt; is within the &amp;lt;parallel&amp;gt; region. That&#8217;s a real blocker, because it makes the usage &amp;lt;parallel&amp;gt; elements almost impossible in real/big projects:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&amp;lt;scxml xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2005/07/scxml&quot;&lt;/span&gt; version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt;
	&lt;span class=&quot;code-keyword&quot;&gt;xmlns:cs&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://commons.apache.org/scxml&quot;&lt;/span&gt; initial=&lt;span class=&quot;code-quote&quot;&gt;&quot;p&quot;&lt;/span&gt;&amp;gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;parallel id=&lt;span class=&quot;code-quote&quot;&gt;&quot;p&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;done.state.p&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;end&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S1&quot;&lt;/span&gt; initial=&lt;span class=&quot;code-quote&quot;&gt;&quot;S11&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S11&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;e4&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;S12&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;
			**&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;e3&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;S13&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;**
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S12&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;e1&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;S1Final&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S13&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;e1&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;S1Final&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;final id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S1Final&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;
	
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S2&quot;&lt;/span&gt; initial=&lt;span class=&quot;code-quote&quot;&gt;&quot;S21&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S21&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;e1&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;S22&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S22&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;e2&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;S2Final&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;final id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S2Final&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/parallel&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;final id=&lt;span class=&quot;code-quote&quot;&gt;&quot;end&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scxml&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Output using org.apache.commons.scxml2.test.StandaloneUtils:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;0    [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - enter /p
1    [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - enter /p/S1
1    [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - enter /p/S1/S11
1    [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - enter /p/S2
1    [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - enter /p/S2/S21
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Ok so far!&lt;br/&gt;
Firing Event &lt;b&gt;&lt;font color=&quot;green&quot;&gt;e1&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;43257 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - exit /p/S2/S21
43257 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - transition (event = e1, cond = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, from = /p/S2/S21, to = /p/S2/S22)
43257 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - enter /p/S2/S22
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Ok so far ...&lt;br/&gt;
Now firing Firing Event &lt;b&gt;&lt;font color=&quot;green&quot;&gt;e3&lt;/font&gt;&lt;/b&gt; (Note &lt;b&gt;/p/S1/S11&lt;/b&gt; and &lt;b&gt;/p/S2/S22&lt;/b&gt; &lt;b&gt;are&lt;/b&gt; the &lt;b&gt;active&lt;/b&gt; states now)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;119890 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - exit /p/S2/S22
119890 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - exit /p/S2
119890 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - exit /p/S1/S11
119890 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - exit /p/S1
119891 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - exit /p
119891 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - transition (event = e3, cond = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, from = /p/S1, to = /p/S1/S13)
119891 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - enter /p
119891 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - enter /p/S1
119891 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - enter /p/S1/S13
119891 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - enter /p/S2
119891 [main] INFO  org.apache.commons.scxml2.env.SimpleSCXMLListener  - enter /p/S2/S21
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;&lt;font color=&quot;red&quot;&gt;That&apos;s not correct!&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;If the event &lt;b&gt;e3&lt;/b&gt; is triggered, all &amp;lt;parallel&amp;gt; regions are left! Afterwards state &lt;b&gt;/p/S1/S13&lt;/b&gt; is correctly activated, but unfortunately the other &amp;lt;parallel&amp;gt; region &lt;b&gt;S2&lt;/b&gt; is changing to it&apos;s &amp;lt;initial&amp;gt; state &lt;b&gt;/p/S2/S21&lt;/b&gt;! &lt;/p&gt;

&lt;p&gt;If transition &lt;b&gt;e3&lt;/b&gt; had a target outside the &amp;lt;parallel&amp;gt; element, this behavior would have been correct. But it doesn&apos;t have! It&apos;s target is &lt;b&gt;S13&lt;/b&gt; which is definitely inside the &amp;lt;parallel&amp;gt; element &lt;b&gt;p&lt;/b&gt;!&lt;/p&gt;

&lt;p&gt;After triggering Event &lt;b&gt;e3&lt;/b&gt; the state machine must be in the following active states: &lt;b&gt;/p/S1/S13&lt;/b&gt; and &lt;b&gt;p/S2/S22&lt;/b&gt;. And &lt;b&gt;only&lt;/b&gt; the &amp;lt;onexit&amp;gt; handler of &lt;b&gt;S21&lt;/b&gt; has to be executed and the &amp;lt;onentry&amp;gt; handler of state &lt;b&gt;S13&lt;/b&gt;. Nothing more ...&lt;/p&gt;

&lt;p&gt;If I change the specifications like this, everything works correctly. But that&apos;S not what I/we want:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;done.state.p&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;end&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S1&quot;&lt;/span&gt; initial=&lt;span class=&quot;code-quote&quot;&gt;&quot;S11&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S11&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;e4&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;S12&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;e3&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;S13&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S12&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;e1&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;S1Final&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S13&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;e1&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;S1Final&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;final id=&lt;span class=&quot;code-quote&quot;&gt;&quot;S1Final&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Do you have an idea for a quick fix?&lt;/p&gt;</description>
                <environment>&lt;p&gt;java version &quot;1.7.0_60&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0_60-b19)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 24.60-b09, mixed mode)&lt;br/&gt;
Windows 7&lt;/p&gt;</environment>
        <key id="12750801">SCXML-217</key>
            <summary>&lt;parallel&gt; doesn&apos;t work correctly (according to SCXML2 W3C Spec)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="berlinaut">Johannes Neuber</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Oct 2014 16:25:35 +0000</created>
                <updated>Tue, 28 Oct 2014 18:34:26 +0000</updated>
                            <resolved>Mon, 27 Oct 2014 22:47:46 +0000</resolved>
                                    <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14185957" author="adouma" created="Mon, 27 Oct 2014 22:47:46 +0000"  >&lt;p&gt;I&apos;m resolving this issue as invalid, because it actually does work according to the specification.&lt;/p&gt;

&lt;p&gt;Please read &lt;a href=&quot;http://www.w3.org/TR/scxml/#N101C6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3.1.5 &apos;Type&apos; and Transitions&lt;/a&gt; as it explains this in detail.&lt;br/&gt;
And for even more technical detail, read: &lt;a href=&quot;http://www.w3.org/TR/scxml/#SelectingTransitions&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SelectingTransitions&lt;/a&gt; and the Definition of an exit set in particular.&lt;/p&gt;

&lt;p&gt;In you example the transition with event=&quot;s3&quot; its source is state &quot;S1&quot; (NOT &quot;S11&quot;).&lt;br/&gt;
And (by default) for an external transition the SCXML engine must exit all the active descendants of the &lt;a href=&quot;http://www.w3.org/TR/scxml/#LCCA&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;LLCA&lt;/a&gt; of the source and target states.&lt;br/&gt;
And, because the parent of &quot;S1&quot; parent is parallel &quot;p&quot; and therefore not a Compound State, in this case the LLCA is the SCXML root node itself, and hence the parallel &quot;p&quot; also needs to be exited.&lt;/p&gt;

&lt;p&gt;Anyway, the &apos;fix&apos; for &lt;b&gt;this&lt;/b&gt; example is pretty trivial &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Just add type=&quot;internal&quot; to the transition and it&apos;ll work as you expected.&lt;br/&gt;
But note that this only will work if/when the source of the transition (&quot;S1&quot;) itself is a Compound State and all its targets are descendants of it (as in this example). &lt;/p&gt;</comment>
                            <comment id="14187240" author="berlinaut" created="Tue, 28 Oct 2014 18:34:26 +0000"  >&lt;p&gt;Thank you for the quick reply! I think &amp;lt;transition type=&quot;internal&quot; .../&amp;gt;  is exactly what I was looking for.&lt;/p&gt;

&lt;p&gt;But nevertheless I&apos;m a little bit confused now, because I didn&apos;t expected this behavior. And I didn&apos;t found any examples using &quot;internal transitions&quot;.&lt;/p&gt;

&lt;p&gt;In my imagination it was pretty clear that if the source of the transition &quot;e3&quot; is &quot;S1&quot; and it&apos;s target is &quot;S13&quot;, &quot;S1&quot; wouldn&apos;t need to be left/exited to reach &quot;S13&quot; (because S13 is direct child of S1). I thought this should be the default behavior.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21mcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-211] Bug in current SCXML specification for addDescendantStatesToEnter algorithm can lead to illegal configurations</title>
                <link>https://issues.apache.org/jira/browse/SCXML-211</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;While testing the SCXML specification using the &lt;a href=&quot;http://www.w3.org/Voice/2013/scxml-irp/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;IRP Plan tests&lt;/a&gt; I discovered a bug in the current specification addDescendantStatesToEnter algorithm:  &lt;a href=&quot;http://www.w3.org/TR/2014/WD-scxml-20140529/#addDescendantStatesToEnter&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/2014/WD-scxml-20140529/#addDescendantStatesToEnter&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve already send a notice about this bug to the SCXML specification mailing list, see: &lt;a href=&quot;http://lists.w3.org/Archives/Public/www-voice/2014OctDec/0000.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://lists.w3.org/Archives/Public/www-voice/2014OctDec/0000.html&lt;/a&gt;&lt;br/&gt;
which I&apos;m copying verbatim below:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Hi there,&lt;/p&gt;

&lt;p&gt;I think I detected a bug in the addDescendantStatesToEnter algorithm in the specification concerning &lt;b&gt;when&lt;/b&gt; to invoke the addAncestorsStatesToEnter.&lt;/p&gt;

&lt;p&gt;Currently the algorithm defines the following logic for a compound state, after having added it to the statesForDefaultEntry:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     for s in getEffectiveTargetStates(state.initial.transition):
         addDescendantStatesToEnter(s,statesToEnter,statesForDefaultEntry, defaultHistoryContent)
         addAncestorStatesToEnter(s, state, statesToEnter, statesForDefaultEntry, defaultHistoryContent)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If not first for all effective target states addDescendantStatesToEnter is  executed, the addAncestorStatesToEnter might,&lt;br/&gt;
when in involves an ancestor parallel with nested compound states of which one also happens to be one of the effective&lt;br/&gt;
desendant target &lt;b&gt;but not yet resolved&lt;/b&gt;, end up initializing a different (default) sibling child of such a compound state.&lt;br/&gt;
End result: an invalid configuration with a compound state having multiple active child states.&lt;/p&gt;

&lt;p&gt;I detected this issue when testing &lt;a href=&quot;http://www.w3.org/Voice/2013/scxml-irp/364/test364.txml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;irp test364&lt;/a&gt;, which indeed defines such a SCXML document.&lt;br/&gt;
If the algorithm is implemented as currently defined in the specification, you&apos;ll end up with both s11p121 and s11p122&lt;br/&gt;
being on the statesToEnter set (or s11p111 and s11p112, depending on the processing order of the s1 initial targets).&lt;/p&gt;

&lt;p&gt;In Apache Commons SCXML I&apos;ve implemented a legal configuration check before executing enterStates, and that fails on&lt;br/&gt;
this point for irp test364.&lt;/p&gt;

&lt;p&gt;Maybe important to note is that if I disable the check, the test actually passes, so maybe others might have this same&lt;br/&gt;
bug but going unnoticed?&lt;/p&gt;

&lt;p&gt;Solving this bug however should be pretty trivial.&lt;br/&gt;
To ensure explicit descendant target states are recorded first, I just changed the above logic to:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     for s in getEffectiveTargetStates(state.initial.transition):
         addDescendantStatesToEnter(s,statesToEnter,statesForDefaultEntry, defaultHistoryContent)
     for s in getEffectiveTargetStates(state.initial.transition):
         addAncestorStatesToEnter(s, state, statesToEnter, statesForDefaultEntry, defaultHistoryContent)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And I did the same for the two similar/same for loops in the handling for history states in addDescendantStatesToEnter&lt;br/&gt;
where likewise both descendant and ancestors states to enter are resolved within a single loop.&lt;/p&gt;

&lt;p&gt;Note: the description of addDescendantStatesToEnter actually does seem to say it more correctly where it breaks these&lt;br/&gt;
two separate &apos;steps&apos; down in two separate sentences:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     Then if state is a compound state, add state to statesForDefaultEntry and recursively call addStatesToEnter on its
     default initial state(s).

     Then, since the default initial states may not be children of &apos;state&apos;, add any ancestors between the default
     initial states and &apos;state&apos;.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The above description at least gives the right direction how this should be implemented, namely as separate consecutive steps,&lt;br/&gt;
but not &apos;optimized&apos; into a single loop as currently done.&lt;br/&gt;
Confusingly and incorrectly though this description names the &quot;addDescendantStatesToEnter&quot; routine &quot;addStatesToEnter&quot;.&lt;br/&gt;
It probably would be good to correct that as well.&lt;/p&gt;

&lt;p&gt;Kind regards,&lt;/p&gt;

&lt;p&gt;Ate Douma&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12747496">SCXML-211</key>
            <summary>Bug in current SCXML specification for addDescendantStatesToEnter algorithm can lead to illegal configurations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Oct 2014 10:54:39 +0000</created>
                <updated>Sat, 11 Oct 2014 11:10:09 +0000</updated>
                            <resolved>Sat, 11 Oct 2014 11:08:19 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14168094" author="adouma" created="Sat, 11 Oct 2014 11:08:19 +0000"  >&lt;p&gt;Resolved as described above.&lt;br/&gt;
I will keep this issue non-closed until verification/confirmation from the SCXML specification group on my reported bug.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i212dr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-209] Incomplete legal state configuration validation in ModelUpdater</title>
                <link>https://issues.apache.org/jira/browse/SCXML-209</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The current legal state configuration check in ModelUpdater where it validates if transition targets turns out to be too simplistic, e.g. not covering all allowed configurations as specified in &lt;a href=&quot;http://www.w3.org/TR/scxml/#LegalStateConfigurations&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/scxml/#LegalStateConfigurations&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The current implementation assumes the least common parallel ancestor is the root state, while it also is legal to have this parallel on a deeper level.&lt;/p&gt;

&lt;p&gt;I&apos;ll add a few unit tests and fix the implementation to be more compliant with the specification.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12747148">SCXML-209</key>
            <summary>Incomplete legal state configuration validation in ModelUpdater</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Oct 2014 22:49:28 +0000</created>
                <updated>Thu, 9 Oct 2014 22:57:38 +0000</updated>
                            <resolved>Thu, 9 Oct 2014 22:57:38 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i210an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-208] context reports no states in onentry of non atomic states</title>
                <link>https://issues.apache.org/jira/browse/SCXML-208</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;See my description at the mailer list on sept 2, 21:23. &lt;br/&gt;
summary: &lt;/p&gt;


&lt;p&gt;&amp;lt;state id=&quot;1&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;onentry&amp;gt;&amp;lt;my:printStates/&amp;gt;&amp;lt;/onentry&amp;gt;&lt;br/&gt;
      &amp;lt;state id=&quot;1.1&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;The my:printStates action reports to be in 0 states when accessing the context. &lt;/p&gt;
</description>
                <environment>&lt;p&gt;ubuntu linux 14.04&lt;/p&gt;</environment>
        <key id="12739849">SCXML-208</key>
            <summary>context reports no states in onentry of non atomic states</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="rinke">Rinke Hoekstra</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Sep 2014 10:35:19 +0000</created>
                <updated>Fri, 2 Jan 2015 19:38:41 +0000</updated>
                            <resolved>Fri, 2 Jan 2015 19:38:41 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14263172" author="adouma" created="Fri, 2 Jan 2015 19:38:41 +0000"  >&lt;p&gt;Fixed through &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-224&quot; title=&quot;Improve SCXML state configuration handling and optional validation &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-224&quot;&gt;&lt;del&gt;SCXML-224&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12764644">SCXML-224</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zsbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-207] Race condition in transition notification for SCXMLListeners</title>
                <link>https://issues.apache.org/jira/browse/SCXML-207</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;When using a SimpleSCXMLListener we have seen impossible transitions occur in the log output of that listener. After digging around the source code I can see the issue that results in theses outputs.&lt;/p&gt;

&lt;p&gt;In order to derive the event name passed as the last argument to SCXMLListener#onTransition, the following code inside SCXMLSemanticsImpl is used:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void notifyOnTransition(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SCXMLExecutionContext exctx, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Transition t,
                                      &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; TransitionTarget target) {
    EventVariable event = (EventVariable)exctx.getScInstance().getSystemContext().getVars().get(SCXMLSystemContext.EVENT_KEY);
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; eventName = event != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? event.getName() : &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    exctx.getNotificationRegistry().fireOnTransition(t, t.getParent(), target, t, eventName);
    exctx.getNotificationRegistry().fireOnTransition(exctx.getStateMachine(), t.getParent(), target, t, eventName);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When triggering events on the engine from multiple threads (which is ok according to the online documentation), a different thread might have already replaced the contents of the SCXMLSystemContext.EVENT_KEY context item and hence a wrong event name might be used from this point on.&lt;/p&gt;

&lt;p&gt;Actually, I don&apos;t even understand why the event name is looked up from the context here at all, since is already available inside the transition.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12737766">SCXML-207</key>
            <summary>Race condition in transition notification for SCXMLListeners</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="languitar">Johannes Wienke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Aug 2014 10:12:43 +0000</created>
                <updated>Mon, 15 Sep 2014 14:11:25 +0000</updated>
                            <resolved>Sun, 7 Sep 2014 20:22:11 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14125046" author="adouma" created="Sun, 7 Sep 2014 20:21:25 +0000"  >&lt;p&gt;This issue is caused by the same problem as discovered, and fixed, by &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-206&quot; title=&quot;Specification mismatch: event-less transitions are triggered by named events&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-206&quot;&gt;&lt;del&gt;SCXML-206&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;An SCXML state machine is not supposed to be executed concurrently from multiple threads. This is by design and by the spec.&lt;br/&gt;
I&apos;m not sure where you saw this to be &apos;ok&apos; in the online documentation, but if this is in the Commons SCXML documentation then it should be removed.&lt;br/&gt;
Note the old Commons SCXML (0.9) implementation didn&apos;t allow this either but enforced this through synchronized methods. &lt;br/&gt;
So while with the old Commons SCXML you could (try to) invoke the engine from multiple threads, they were serialized nonetheless.&lt;br/&gt;
The new Commons SCXML implementation no longer uses synchronized methods and leaves it up to the client code not to trigger events concurrently (should use #addEvent instead).   &lt;/p&gt;

&lt;p&gt;Regarding the lookup of the &apos;current&apos; event name from the system context (and why not use the event name from Transition):&lt;br/&gt;
This is according to the specification, see the description of &lt;b&gt;_event&lt;/b&gt; in section &lt;a href=&quot;http://www.w3.org/TR/scxml/#SystemVariables&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;5.10 System Variables&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The SCXML Processor MUST bind the _event variable when an event is pulled off the internal or external event queue to be processed, and MUST keep the variable bound to that event until another event is processed. &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt; In the case of &amp;lt;transition&amp;gt; elements that do not contain an &apos;event&apos; attribute and the &amp;lt;onexit&amp;gt; and &amp;lt;onentry&amp;gt; handlers of any states that are exited or entered by such transitions, the _event variable will not have a easily predictable value since the transition is not being driven by an event. In these cases, _event will be bound to the last event that was matched against a transition.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Also note that the event name in the Transition might not (exactly) match the &apos;current&apos; event name: it might have been matched on prefix only, or maybe even be the &apos;*&apos; match all event name.&lt;/p&gt;</comment>
                            <comment id="14125047" author="adouma" created="Sun, 7 Sep 2014 20:22:11 +0000"  >&lt;p&gt;Fixed through &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-206&quot; title=&quot;Specification mismatch: event-less transitions are triggered by named events&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-206&quot;&gt;&lt;del&gt;SCXML-206&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14125075" author="languitar" created="Sun, 7 Sep 2014 22:36:12 +0000"  >&lt;p&gt;Thanks for your feedback on this. I will have a detailed look at things tomorrow.&lt;/p&gt;

&lt;p&gt;Anyway, the statement about thread safety I was referring to is from the FAQ:&lt;br/&gt;
&lt;a href=&quot;https://commons.apache.org/proper/commons-scxml/faq.html#many-threads&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-scxml/faq.html#many-threads&lt;/a&gt; &quot;Things such as firing events on a state machine or reseting it are threadsafe.&quot;&lt;/p&gt;</comment>
                            <comment id="14133926" author="adouma" created="Mon, 15 Sep 2014 14:11:25 +0000"  >&lt;p&gt;Thanks for pointing this out. I&apos;ve update the FAQ to better reflect the new behavior.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zhbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-206] Specification mismatch: event-less transitions are triggered by named events</title>
                <link>https://issues.apache.org/jira/browse/SCXML-206</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The SCXML 2 specification indicates the following in section 3.13&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A transition is enabled by NULL in atomic state S if a) T lacks an &apos;event&apos; attribute b) T&apos;s source state is S or an ancestor of S c) T lacks an &apos;cond&apos; attribute or its &apos;cond&apos; attribute evaluates to &quot;true&quot;. (Note that such a transition can never be enabled by any named event.)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The last aspect that event-less conditions can never be triggered by a named event is currently violated by the trunk implementation.&lt;/p&gt;

&lt;p&gt;Imagine the following example document:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&amp;lt;scxml xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2005/07/scxml&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;xmlns:rsb&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://opensource.cit-ec.de/rsb&quot;&lt;/span&gt;
	version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; initial=&lt;span class=&quot;code-quote&quot;&gt;&quot;Start&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;CustomActionSequential&quot;&lt;/span&gt;&amp;gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;Start&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;onentry&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;log expr=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;Starting onentry of state Start&apos;&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/log&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;send event=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt;&quot;&lt;/span&gt; delay=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;100ms&apos;&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/send&amp;gt;&lt;/span&gt;
			&amp;lt;rsb:generic rsb:class=&lt;span class=&quot;code-quote&quot;&gt;&quot;rsb.scxml.LongRunningAction&quot;&lt;/span&gt;
				name=&lt;span class=&quot;code-quote&quot;&gt;&quot;first&quot;&lt;/span&gt;&amp;gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/rsb:generic&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;log expr=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;Finished onentry of state Start&apos;&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/log&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/onentry&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;onexit&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;log expr=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;onexit of state Start&apos;&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/log&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/onexit&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition target=&lt;span class=&quot;code-quote&quot;&gt;&quot;End&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/transition&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;final id=&lt;span class=&quot;code-quote&quot;&gt;&quot;End&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;onentry&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;log expr=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;onentry of state End&apos;&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/log&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/onentry&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/final&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scxml&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The rsb:generic action is simply a custom action that wastes some processing time by sleeping 1 second.&lt;/p&gt;

&lt;p&gt;The logging output that you get when executing this is the following:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Aug 29, 2014 11:04:26 AM org.apache.commons.scxml2.model.Log execute
INFO: null: Starting onentry of state Start
Aug 29, 2014 11:04:26 AM org.apache.commons.scxml2.model.Log execute
INFO: null: onexit of state Start
Aug 29, 2014 11:04:26 AM org.apache.commons.scxml2.model.Log execute
INFO: null: onentry of state End
Aug 29, 2014 11:04:27 AM org.apache.commons.scxml2.model.Log execute
INFO: null: Finished onentry of state Start
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As you can see, the named event raised by the send action has triggered the transition since the outputs are not in the expected sequential order. This should not happen according to the specification.&lt;/p&gt;

&lt;p&gt;On the other hand, if you do not send an event at all, the state machine gets stuck. This confirms that the transition was actually really triggered by the sent event. Moreover, it also sounds like a specification mismatch to me. The respective quote from the specification is:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;After checking the state configuration, the Processor must select the optimal transition set enabled by NULL in the current configuration. If the set is not empty, it must execute it as a microstep.&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12737753">SCXML-206</key>
            <summary>Specification mismatch: event-less transitions are triggered by named events</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="languitar">Johannes Wienke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Aug 2014 09:15:57 +0000</created>
                <updated>Sun, 7 Sep 2014 19:56:13 +0000</updated>
                            <resolved>Sun, 7 Sep 2014 19:56:13 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14125019" author="adouma" created="Sun, 7 Sep 2014 19:34:21 +0000"  >&lt;p&gt;Hi Johannes,&lt;/p&gt;

&lt;p&gt;I finally had time to look into this and indeed found some issues/bugs with the current implementation.&lt;br/&gt;
However, not exactly in the way you describe them.&lt;/p&gt;

&lt;p&gt;The crux of the problem is that currently the SCXMLExecutor incorrectly is re-entering its own execution state when using send.&lt;br/&gt;
I&apos;m assuming here you are using the current SimpleScheduler or derivate class.&lt;/p&gt;

&lt;p&gt;Part of the refactoring for the Milestone 1 has been to introduce the internal and external event queues to manage the event processing more appropriately according to the specification.&lt;br/&gt;
That work however is not completed yet. The completion of the external IO Processor work I planned for &lt;a href=&quot;http://commons.apache.org/proper/commons-scxml/roadmap.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Milestone 3&lt;/a&gt;.&lt;br/&gt;
What I overlooked though was to at least not have the SimpleScheduler directly trigger events on the SCXMLExecutor (which in addition also was synchronized before), it should now merely &lt;em&gt;&lt;b&gt;add&lt;/b&gt;&lt;/em&gt; events to the queue. So, instead of calling SCXMLExecutor#triggerEvent it should be calling SCXMLExecutor#addEvent.&lt;br/&gt;
Because of this, you&apos;re now seeing re-entrant execution of a single SCXML state machine, which obviously messes up the internal state.&lt;br/&gt;
This is also the cause for &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-207&quot; title=&quot;Race condition in transition notification for SCXMLListeners&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-207&quot;&gt;&lt;del&gt;SCXML-207&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;I&apos;ll commit a fix for the triggerEvent invocation of SimpleScheduler shortly.&lt;/p&gt;

&lt;p&gt;Then while testing my fix, I also discovered a new bug in SCXMLSemanticsImpl#matchTransition which didn&apos;t initially cause the problems you saw, but with my fix in SimpleScheduler would lead to a similar error. Nice &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
So I&apos;ll fix that that at the same time.&lt;/p&gt;

&lt;p&gt;However I could not reproduce your problem with the state machine getting stuck if no event is send at all, neither before nor after applying my fixes.&lt;br/&gt;
In this regard the specification is IMO pretty clear: enabled event-less transitions must be executed if no other events are left to be processed.&lt;br/&gt;
(which may trigger new events and thus lead to further subsequent event processing)&lt;/p&gt;</comment>
                            <comment id="14125032" author="adouma" created="Sun, 7 Sep 2014 19:56:13 +0000"  >&lt;p&gt;I&apos;ve applied the above mentioned fixes.&lt;br/&gt;
Please test and report if this now works for your scenario(s).&lt;br/&gt;
Note however that full compliance with the specification is not yet intended: there are definitely other limitations and mismatches in the current event IO processing (both internal and external) which will be dealt with later (Milestone 3 or maybe earlier).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zh8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-205] finalStep gets called twice</title>
                <link>https://issues.apache.org/jira/browse/SCXML-205</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;In the current trunk version, finalStep and hence all onexit actions of the final state are called twice. The following scxml can be used to reproduce the problem.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;scxml xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2005/07/scxml&quot;&lt;/span&gt; version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; initial=&lt;span class=&quot;code-quote&quot;&gt;&quot;Start&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;PublishEvent&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;final id=&lt;span class=&quot;code-quote&quot;&gt;&quot;Start&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;onentry&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;log expr=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;Entering state Start&apos;&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/log&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/onentry&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;onexit&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;log expr=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-quote&quot;&gt;&apos;Leaving state Start&apos;&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/log&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/onexit&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/final&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scxml&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The onexit log message appears twice when running this example.&lt;/p&gt;

&lt;p&gt;I digged a bit in the source code and through a debugger I could find the cause for this effect: The finalStep method of SCXMLSemanticsImpl gets called twice. One backtrace looks like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SCXMLSemanticsImpl.finalStep(SCXMLExecutionContext) line: 215	
SCXMLSemanticsImpl.firstStep(SCXMLExecutionContext) line: 132	
SCXMLExecutor.reset() line: 331	
SCXMLExecutor.go() line: 318	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and the seconds looks like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SCXMLSemanticsImpl.finalStep(SCXMLExecutionContext) line: 215	
SCXMLExecutor.reset() line: 334	
SCXMLExecutor.go() line: 318	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I am not sure about what should be the correct behavior, but to my mind, the second call looks suspicious.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12737099">SCXML-205</key>
            <summary>finalStep gets called twice</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="languitar">Johannes Wienke</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Aug 2014 13:06:05 +0000</created>
                <updated>Mon, 1 Sep 2014 21:18:43 +0000</updated>
                            <resolved>Mon, 1 Sep 2014 21:18:43 +0000</resolved>
                                    <version>2.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14112236" author="languitar" created="Wed, 27 Aug 2014 13:20:49 +0000"  >&lt;p&gt;Ok, If I completely remove the suspicious call in the reset method by deleting these lines:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!exctx.isRunning()) {
            semantics.finalStep(exctx);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;then still all tests pass perfectly.&lt;/p&gt;</comment>
                            <comment id="14112255" author="woon_san" created="Wed, 27 Aug 2014 13:50:49 +0000"  >&lt;p&gt;Looks like a regression since &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-197&quot; title=&quot;Better separation of concern between SCXMLExecutor and SCInstance and introducing a new SCXMLExecutionContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-197&quot;&gt;&lt;del&gt;SCXML-197&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
I&apos;d like to ask Ate to look into this.&lt;br/&gt;
Thanks for reporting the problem!&lt;/p&gt;</comment>
                            <comment id="14117729" author="adouma" created="Mon, 1 Sep 2014 21:18:43 +0000"  >&lt;p&gt;Thanks Johannes for catching and reporting this!&lt;/p&gt;

&lt;p&gt;The SCXMLSemantics.finalStep() indeed is incorrectly invoked twice, and not just from SCXMLExecutor.reset() but also .eventStep().&lt;/p&gt;

&lt;p&gt;As Woonsan already indicated, this is an regression since &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-197&quot; title=&quot;Better separation of concern between SCXMLExecutor and SCInstance and introducing a new SCXMLExecutionContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-197&quot;&gt;&lt;del&gt;SCXML-197&lt;/del&gt;&lt;/a&gt; where I moved the handling of the finalStep into the SCXMLSemantics.firstStep() and .nextStep() but forgot to remove them from SCXMLExecutor logic.&lt;/p&gt;

&lt;p&gt;I&apos;ve removed the old .finalStep() calls from SCXMLExecutor so it should now work again as expected.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ze4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-204] Invoker is not getting called twice from the same state</title>
                <link>https://issues.apache.org/jira/browse/SCXML-204</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Hi, &lt;br/&gt;
First I am a newbie for this site and for SCXML as well. I am not sure whether my concern is actually a bug. Below is my problem description:&lt;/p&gt;

&lt;p&gt;I have used SCXML for maintaining state machine in my project. I have used the Invoker to perform some activity each time the transition to the state,for which invoker is defined, is performed.&lt;/p&gt;

&lt;p&gt;Issue is coming when invoker is called twice from same state. &lt;/p&gt;

&lt;p&gt;For example, from State &quot;A&quot; event &quot;TEMP&quot; is fired, then it moves to state &quot;B&quot;. And as soon as it enters the state &quot;B&quot; invoker is called and callback method invoke() of Invoker class is being called.&lt;/p&gt;

&lt;p&gt;&amp;lt;state id=&quot;A&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;transition event=&quot;TEMP&quot; target=&quot;B&quot;&amp;gt;&amp;lt;/transition&amp;gt;&lt;br/&gt;
&amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;state id=&quot;B&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;invoke src=&quot;INVOKER&quot; targettype=&quot;invoker-req&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;transition event=&quot;FAIL&quot; target=&quot;A&quot;&amp;gt;&amp;lt;/transition&amp;gt;&lt;br/&gt;
        &amp;lt;transition event=&quot;SUCC&quot; target=&quot;C&quot;&amp;gt;&amp;lt;/transition&amp;gt;&lt;br/&gt;
    &amp;lt;/invoke&amp;gt;&lt;br/&gt;
&amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;Problem is coming when event &quot;TEMP&quot; is fired again from State A and then Invoker is not getting called. invoke() method is never called again. Can the invoker be called only once?&lt;/p&gt;

&lt;p&gt;Please let me know how can I call the invoker/invoke() again. I am not getting much help on internet.&lt;/p&gt;

&lt;p&gt;Thanks in advance.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.6, apache commons SCXML v0.9&lt;/p&gt;</environment>
        <key id="12725723">SCXML-204</key>
            <summary>Invoker is not getting called twice from the same state</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Infotechie">Anshul Gangwar</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Mon, 7 Jul 2014 11:23:12 +0000</created>
                <updated>Fri, 2 Jan 2015 20:02:16 +0000</updated>
                            <resolved>Fri, 2 Jan 2015 20:02:16 +0000</resolved>
                                    <version>0.9</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14054928" author="woon_san" created="Tue, 8 Jul 2014 13:26:02 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if this is a bug or not, but it could be more helpful if you post a question like this in the mailing list &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.&lt;br/&gt;
You can post a message prefixed with &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;SCXML&amp;#93;&lt;/span&gt;&quot; to Commons User List.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://commons.apache.org/mail-lists.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/mail-lists.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14263196" author="adouma" created="Fri, 2 Jan 2015 20:02:16 +0000"  >&lt;p&gt;Closing as incomplete without further input&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403881</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xien:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403924</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-203] Calculation of states to be entered can be depending on states to be exited and thereby also their possible history</title>
                <link>https://issues.apache.org/jira/browse/SCXML-203</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Currently the SCXMLSemantics implementation calculates the states to be exited and entered upfront, before the actual exiting and entering is performed.&lt;br/&gt;
This is done explicitly to be able to ensure the resulting active states configuration is a valid one.&lt;/p&gt;

&lt;p&gt;However, the currently implementation overlooks the fact that for certain transitions the states exited may have to be re-entered again. And if for those exited state(s) history is recorded, then this might influence and change the resulting set of entered states.&lt;/p&gt;

&lt;p&gt;Thus the current implementation therefore needs to be corrected for this.&lt;/p&gt;

&lt;p&gt;However, following the exact order of processing and execution as defined by SCXML specification its algorithm for SCXML processing will result in exiting states before the determination of the states to be entered. The resulting active state configuration is &apos;assumed&apos; to be always valid thereafter. &lt;/p&gt;

&lt;p&gt;To be able to still ensure the resulting active state configuration to be valid &lt;b&gt;before&lt;/b&gt; actually transition to it (like we do now), the calculation of the states to exit will now be done by also upfront recording the histories for these states (if applicable) as temporary configurations in the Step itself.&lt;br/&gt;
When the step to be taken is ensured to be valid, these &apos;pre-recorded&apos; histories will be persisted to the SCInstance when the states are actually exited, while they already can be used before to determine the proper and correct states to enter if needed.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12709608">SCXML-203</key>
            <summary>Calculation of states to be entered can be depending on states to be exited and thereby also their possible history</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Apr 2014 19:30:30 +0000</created>
                <updated>Mon, 21 Apr 2014 19:48:08 +0000</updated>
                            <resolved>Mon, 21 Apr 2014 19:48:08 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387930</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1utrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388190</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-202] State machine running status must be kept and maintained by SCInstance across serialization and deserialization</title>
                <link>https://issues.apache.org/jira/browse/SCXML-202</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;As was discovered and reported by Francis Tenda on the commons users@ list, currently it isn&apos;t possible to serialize/de-serialize a state machine instance (SCInstance) without keeping hold on the (same) SCXMLExecutor and its embedded SCXMLExecutorContext.&lt;/p&gt;

&lt;p&gt;While the use-cases for re-creating a new SCXMLExecutor/SCXMLExecutorContext every time after deserializing an SCInstance might be limited, as you cannot have/keep running Invokers and will have to re-configure the Evaluator, Dispatcher, ErrorReporter as well as any SCXMLListeners every time then, it still should be possible.&lt;/p&gt;

&lt;p&gt;The problem is that the SCXMLExecutorContext currently manages the state machine running status and never get &apos;triggered&apos; to set it (back) to running after re-attaching a SCInstance. With as effect that any subsequent firing of events will be ignored.&lt;/p&gt;

&lt;p&gt;The running status logically &apos;belongs&apos; to the state machine itself, and thus it currently is wrongly managed.&lt;/p&gt;

&lt;p&gt;I&apos;ll fix this by moving this status property into SCInstance instead, which thereby should also fix the test example Francis Tenda provided on the list.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12709249">SCXML-202</key>
            <summary>State machine running status must be kept and maintained by SCInstance across serialization and deserialization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Apr 2014 11:56:42 +0000</created>
                <updated>Fri, 18 Apr 2014 12:01:06 +0000</updated>
                            <resolved>Fri, 18 Apr 2014 12:01:06 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387571</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1urjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387833</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-188] OpenJDK 1.6 Rhino ScriptEngine error causes JSEvaluationTest to fail</title>
                <link>https://issues.apache.org/jira/browse/SCXML-188</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;On OpenJDK 1.7 and Sun/Oracle java 6 and 7 the following JS expression &quot;1 + 1 + 2 + 3 + 5&quot; returns a Double value (12.0)&lt;br/&gt;
On OpenJDK 1.6 the returned value is an Integer (12), causing the JSEvaluatorTest to fail.&lt;/p&gt;

&lt;p&gt;Seems like the OpenJDK Mozilla Rhino implementation/embedding is broken, and until a newer version of OpenJDK 1.6 comes out which fixes this (unlikely any time soon?) we might want to exclude support for OpenJDK 1.6 when using the Rhino Javscript ScriptEngine.&lt;/p&gt;

&lt;p&gt;The question is though: (how) can we handle this conditionally in the test?&lt;/p&gt;</description>
                <environment>&lt;p&gt;continuum-ci.apache.org, OpenJDK 1.6.2 (6b27-1.12.6-1ubuntu0.12.04, amd64)&lt;/p&gt;</environment>
        <key id="12689831">SCXML-188</key>
            <summary>OpenJDK 1.6 Rhino ScriptEngine error causes JSEvaluationTest to fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Jan 2014 16:03:55 +0000</created>
                <updated>Mon, 20 Jan 2014 20:16:24 +0000</updated>
                            <resolved>Mon, 20 Jan 2014 20:16:16 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13876548" author="sebb@apache.org" created="Mon, 20 Jan 2014 16:15:38 +0000"  >&lt;p&gt;I noticed the same problem - though I was a bit surprised that the return type is Double rather than Integer which seems more natural for the particular expresssion.&lt;/p&gt;

&lt;p&gt;One way to avoid the test failure would be to check the return type of the eval, and allow for Integer as well as Double.&lt;/p&gt;

&lt;p&gt;Or change the test to include non-integral values, e.g. 1.0 + 2 + etc - that might force OJDK 1.6 to use Double.&lt;/p&gt;

&lt;p&gt;Or even both - add another test to force double usage.&lt;/p&gt;

&lt;p&gt;I guess it depends what the test is trying to prove.&lt;/p&gt;</comment>
                            <comment id="13876555" author="adouma" created="Mon, 20 Jan 2014 16:26:22 +0000"  >&lt;p&gt;Yeah, I&apos;ve been thinking around similar solutions. &lt;br/&gt;
I also didn&apos;t expect the Double, but it seems like proper in this case, and even OpenJDK 1.7 returns a Double.&lt;/p&gt;

&lt;p&gt;So I&apos;m inclined to interpret the Integer returned by OpenJDK 1.6 as a bug.&lt;br/&gt;
Of course we can workaround this in the test case by allowing both, but I don&apos;t really like it.&lt;/p&gt;</comment>
                            <comment id="13876563" author="sebb@apache.org" created="Mon, 20 Jan 2014 16:34:28 +0000"  >&lt;p&gt;One solution is to allow Integer (assuming the value is correct) but display a message to say it is unexpected - i.e. the test generates a warning rather than a failure. That way the result is not completely hidden, but it does not cause annoyance.&lt;/p&gt;

&lt;p&gt;What does the real Rhino engine do? Is there any Javadoc on the expression evaluator?&lt;br/&gt;
It&apos;s just possible that OJDK1.6 is correct, and the others are all wrong ... its behaviour is arguably more logical&lt;/p&gt;</comment>
                            <comment id="13876656" author="sebb@apache.org" created="Mon, 20 Jan 2014 18:27:31 +0000"  >&lt;p&gt;I&apos;ve fixed the test so it does not fail.&lt;/p&gt;

&lt;p&gt;OpenJDK 1.6 generates the following:&lt;/p&gt;

&lt;p&gt;Evaluated: 1 + 1 + 2 + 3 + 5. Expected: java.lang.Double, actual: Integer&lt;br/&gt;
Evaluated: 1.0 + 1.0 + 2.0 + 3.0 + 5.0. Expected: java.lang.Double, actual: Integer&lt;/p&gt;

&lt;p&gt;The latter definitely looks like a bug.&lt;/p&gt;</comment>
                            <comment id="13876661" author="sebb@apache.org" created="Mon, 20 Jan 2014 18:32:21 +0000"  >&lt;p&gt;Java 1.7 on Continuum does not show the warnings (as expected)&lt;/p&gt;</comment>
                            <comment id="13876793" author="adouma" created="Mon, 20 Jan 2014 19:50:17 +0000"  >&lt;p&gt;Thanks Sebb.&lt;/p&gt;

&lt;p&gt;I&apos;ve did some more research and actually I now think there should be no assumption made on the specific numeric return type, other than that it should be of type java.lang.Number.&lt;br/&gt;
The Javascript language only knows about Number &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, so mapping that to a concrete Java type always is going to be tricky.&lt;br/&gt;
I found a similar issue &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-4634&quot; title=&quot;Fix test bugs in Javascript tests to work with Java 8&amp;#39;s Mozilla-Rhino-replacement &amp;quot;Nashorn&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SOLR-4634&quot;&gt;&lt;del&gt;SOLR-4634&lt;/del&gt;&lt;/a&gt; which Uwe Schindler IMO correctly fixed by only expecting a return type of java.lang.Number.&lt;/p&gt;

&lt;p&gt;So, maybe we should conclude the current test never should have expected a Double in the first place, and it only just so happen to work because of same/similar implementations in OpenJDK 1.7/Oracle 1.6/1.7.&lt;br/&gt;
But saying OpenJDK 1.6 is returning a &apos;wrong&apos; answer isn&apos;t right either.&lt;/p&gt;

&lt;p&gt;So, I think we should fix this issue by only expecting a java.lang.Number result and checking its intValue being 12. Agreed?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Rhino/Runtime&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://developer.mozilla.org/en-US/docs/Rhino/Runtime&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13876811" author="sebb@apache.org" created="Mon, 20 Jan 2014 20:05:47 +0000"  >&lt;p&gt;For this particular expression, intValue is OK.&lt;br/&gt;
Unfortunately Number is abstract so the expected class cannot be encoded in the test case data currently - the static class TestItem would need to be extended.&lt;/p&gt;

&lt;p&gt;There might be numeric expressions for which Double (or Float) is required; these should be tested too.&lt;/p&gt;</comment>
                            <comment id="13876818" author="adouma" created="Mon, 20 Jan 2014 20:12:18 +0000"  >&lt;p&gt;I added a test which should return a Double, and test it as such. This succeeds on all JDK versions I&apos;ve installed (1.6 and 1.7 for both OpenJDK and Oracle).&lt;br/&gt;
This should be &apos;good enough&apos; testing from an SCXML POV.&lt;br/&gt;
Checking the Javascript engine compliance IMO is out-of-scope here. &lt;/p&gt;</comment>
                            <comment id="13876820" author="sebb@apache.org" created="Mon, 20 Jan 2014 20:14:43 +0000"  >&lt;p&gt;Yes, I think the tests are OK now&lt;/p&gt;</comment>
                            <comment id="13876824" author="adouma" created="Mon, 20 Jan 2014 20:16:16 +0000"  >&lt;p&gt;Thanks Sebb, closing the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rkdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369102</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-180] Prevent NPEs for possible null value returned from Evaluator.eval* methods</title>
                <link>https://issues.apache.org/jira/browse/SCXML-180</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;I just encountered the following NPE:&lt;/p&gt;

&lt;p&gt;  java.lang.NullPointerException&lt;br/&gt;
    at org.apache.commons.scxml2.semantics.SCXMLSemanticsImpl.filterTransitionsSet(SCXMLSemanticsImpl.java:415)&lt;br/&gt;
    at org.apache.commons.scxml2.SCXMLExecutor.triggerEvents(SCXMLExecutor.java:124)&lt;br/&gt;
    at org.apache.commons.scxml2.SCXMLExecutor.reset(SCXMLExecutor.java:256)&lt;br/&gt;
    at org.apache.commons.scxml2.SCXMLExecutor.go(SCXMLExecutor.java:349)&lt;/p&gt;

&lt;p&gt;This turned out to be caused by an transition condition (evaluated through Jexl) resulting in, and thus also returning, a null value.&lt;br/&gt;
A quick scan through the usages of Evaluator.eval* method shows several locations within SCXML where it always assumes an non-null value (Boolean or otherwise) to be returned. All possible sources for unexpected NPEs.&lt;/p&gt;

&lt;p&gt;I think that for at least the Evaluator#evalCond method, which is assumed to return a Boolean, either an error should be catched/returned or maybe even assume null == Boolean.FALSE.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12682384">SCXML-180</key>
            <summary>Prevent NPEs for possible null value returned from Evaluator.eval* methods</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Dec 2013 13:29:41 +0000</created>
                <updated>Wed, 4 Dec 2013 14:39:09 +0000</updated>
                            <resolved>Wed, 4 Dec 2013 14:39:09 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13837938" author="woon_san" created="Tue, 3 Dec 2013 17:42:59 +0000"  >&lt;p&gt;According to the spec &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, &quot;if a conditional expression cannot be evaluated as a boolean value (&apos;true&apos; or &apos;false&apos;) or if its evaluation causes an error, the SCXML Processor MUST treat the expression as if it evaluated to &apos;false&apos; and MUST place the error &apos;error.execution&apos; in the internal event queue.&quot;&lt;br/&gt;
So, the current #evalCond() implementation should be improved to return false when the evaluation result is null or non Boolean object or any exception occurs at least.&lt;/p&gt;

&lt;p&gt;By the way, I couldn&apos;t find any source location caring about &apos;error..&apos; events when error occurs to comply with the specification (3.12.2 Errors). That can be a good improvement and there seems to be no jira issue for that yet. I&apos;ll create a separate issue for that improvement.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/TR/scxml/#ConditionalExpressions&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/scxml/#ConditionalExpressions&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13838935" author="woon_san" created="Wed, 4 Dec 2013 14:39:04 +0000"  >&lt;p&gt;Fixed two classes (SCXMLSemanticsImpl.java and If.java) which are evaluation &apos;cond&apos; expression to treat the result as false when getting non-boolean object or catching an exception.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12682440">SCXML-182</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361641</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qc8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361939</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-178] Initial state ID attribute in SCXML element shouldn&apos;t be mandatory</title>
                <link>https://issues.apache.org/jira/browse/SCXML-178</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Currently, if the top level SCXML element doesn&apos;t have &apos;initial&apos; attribute, SCXMLReader fails to parse the SCXML document.&lt;br/&gt;
The latest spec &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; says the &apos;initial&apos; attribute is not required, and &quot;If not specified, the default initial state is the first child state in document order.&quot;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/TR/2013/WD-scxml-20130801/#scxml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/2013/WD-scxml-20130801/#scxml&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12681699">SCXML-178</key>
            <summary>Initial state ID attribute in SCXML element shouldn&apos;t be mandatory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="woon_san">Woonsan Ko</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Nov 2013 05:15:38 +0000</created>
                <updated>Thu, 28 Nov 2013 06:21:01 +0000</updated>
                            <resolved>Thu, 28 Nov 2013 06:21:01 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13834540" author="woon_san" created="Thu, 28 Nov 2013 06:20:54 +0000"  >&lt;p&gt;Fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360963</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1q82f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361262</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-177] Correct error/warning messages in SCXML reading to be up-to-date</title>
                <link>https://issues.apache.org/jira/browse/SCXML-177</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Some error/warning logs are outdated against the newest spec.&lt;br/&gt;
For example,&lt;/p&gt;

&lt;p&gt;org.apache.commons.scxml2.model.ModelException: No SCXML child state with ID &quot;null&quot; found; illegal initialstate for SCXML document&lt;br/&gt;
	at org.apache.commons.scxml2.io.ModelUpdater.logAndThrowModelError(ModelUpdater.java:297)&lt;/p&gt;

&lt;p&gt;It should inform of &apos;initial&apos;, not &apos;initialstate&apos; and check if it is not set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12681684">SCXML-177</key>
            <summary>Correct error/warning messages in SCXML reading to be up-to-date</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="woon_san">Woonsan Ko</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Nov 2013 23:25:06 +0000</created>
                <updated>Thu, 5 Dec 2013 13:05:40 +0000</updated>
                            <resolved>Thu, 5 Dec 2013 03:13:57 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13834547" author="woon_san" created="Thu, 28 Nov 2013 06:40:18 +0000"  >&lt;p&gt;Fixed:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Changed &apos;... initialstate ...&apos; to &apos;... initial state ...&apos; in error message.&lt;/li&gt;
	&lt;li&gt;Also, there will be no logs like &apos;No SCXML child state with ID &quot;null&quot; found&apos;  thanks to the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-178&quot; title=&quot;Initial state ID attribute in SCXML element shouldn&amp;#39;t be mandatory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-178&quot;&gt;&lt;del&gt;SCXML-178&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13836640" author="woon_san" created="Mon, 2 Dec 2013 16:12:16 +0000"  >&lt;p&gt;Reopening this because it doesn&apos;t give a warning or error when there&apos;s a custom action with wrong local name in execution block.&lt;/p&gt;

&lt;p&gt;The SCXMLReader.java currently doesn&apos;t care of the case when no proper custom action is found:&lt;/p&gt;

&lt;p&gt;                        for (CustomAction ca : configuration.customActions) {&lt;br/&gt;
                            if (ca.getNamespaceURI().equals(nsURI) &amp;amp;&amp;amp; ca.getLocalName().equals(name)) &lt;/p&gt;
{
                                readCustomAction(reader, configuration, ca, tt, executable, iff);
                            }
&lt;p&gt;                        }&lt;/p&gt;

&lt;p&gt;It should give a warning for the unknown custom action element at least.&lt;/p&gt;</comment>
                            <comment id="13836990" author="woon_san" created="Mon, 2 Dec 2013 22:23:42 +0000"  >&lt;p&gt;Committed the changes to give a proper warning when there&apos;s no registered custom action in SCXML even in case there&apos;s no custom actions.&lt;br/&gt;
I&apos;ll keep this issue open for the time being in order to fix other possible error/warning logging improvements.&lt;/p&gt;</comment>
                            <comment id="13837507" author="adouma" created="Tue, 3 Dec 2013 09:49:36 +0000"  >&lt;p&gt;I find it odd the SCXMLReader ignores and only warns about unknown custom actions (within a known namespace).&lt;br/&gt;
Seems to me the SCXML document cannot be properly executed then, so why not reporting it as an error?&lt;br/&gt;
Is there anything in the spec saying such errors should be ignored?&lt;br/&gt;
If not, I would suggest hardening the behavior and make it an error instead.&lt;/p&gt;</comment>
                            <comment id="13837770" author="woon_san" created="Tue, 3 Dec 2013 15:01:23 +0000"  >&lt;p&gt;I couldn&apos;t find any statement specifying that. And I agree that it should&apos;ve been logged as ERROR level.&lt;br/&gt;
SCXMLReader invokes #reportIgnoredElement() and it leaves a warning log and invokes XMLReporter#report() in the end.&lt;br/&gt;
The current warnings in #reportIgnoredElement() are logged when there are unexpected or invalid elements inside an SCXML element (e.g, no &apos;data&apos; element inside &apos;datamodel&apos;). So, I think this warning should be logged as ERROR level. In that way, users can be informed of the error more clearly.&lt;/p&gt;</comment>
                            <comment id="13837794" author="adouma" created="Tue, 3 Dec 2013 15:30:47 +0000"  >&lt;p&gt;Logging as ERROR is an improvement, but shouldn&apos;t this better result in a ModelException instead (too)?&lt;br/&gt;
IMO such a SCXML definition cannot be regarded as valid when elements are &apos;dropped&apos; silently.&lt;/p&gt;

&lt;p&gt;From this regard the SCXMLReader#reportIgnoredElement method is questionable itself.&lt;br/&gt;
Maybe we could/should introduce a &apos;strict&apos; SCXMLReader flag, which when true (default) would fail with ModelExceptions in such cases?&lt;br/&gt;
For backwards compatibility this &apos;strict&apos; flag then could be set to false if so desired.&lt;br/&gt;
WDYT?&lt;/p&gt;</comment>
                            <comment id="13837818" author="woon_san" created="Tue, 3 Dec 2013 15:51:47 +0000"  >&lt;p&gt;Sounds like a plan!&lt;br/&gt;
It&apos;s a good idea to have a flag to use &apos;strict&apos; mode in SCXMLReader with keeping the backward compatibility.&lt;/p&gt;</comment>
                            <comment id="13837820" author="rahul@apache.org" created="Tue, 3 Dec 2013 15:52:50 +0000"  >&lt;p&gt;+1 to having a strict and lenient configuration for the SCXMLReader.&lt;/p&gt;

&lt;p&gt;I suggest not changing behavior to throw a ModelException in all cases. Besides the compatibility aspect of doing this, leniency is appropriate or even desired in certain usecases involving compound namespace documents where not all parts of the document may relate to (or be generated for) the purposes of the document controller or state machine.&lt;/p&gt;</comment>
                            <comment id="13837829" author="adouma" created="Tue, 3 Dec 2013 15:58:29 +0000"  >&lt;p&gt;Ah, that makes sense, I agree for some cases it might be needed to support lenient configurations.&lt;br/&gt;
Thanks for chiming in Rahul!&lt;/p&gt;</comment>
                            <comment id="13837906" author="woon_san" created="Tue, 3 Dec 2013 17:08:46 +0000"  >&lt;p&gt;Thanks for the suggestions!&lt;/p&gt;

&lt;p&gt;I&apos;ve looked up how JEXL is doing with that kind of options as an example. It has strict/lenient option to determine whether or not it is an error to throw an exeption, and silent option to determine whether or not it should leave warning logs. &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
So, I think we can add the following in SCXMLReader:&lt;br/&gt;
+ boolean isStrict();&lt;br/&gt;
+ void setStrict(boolean strict);&lt;br/&gt;
+ boolean isLenient();&lt;br/&gt;
+ void setLenient(boolean lenient); // &lt;/p&gt;
{ this.strict = !lenient; }
&lt;p&gt;+ boolean isSilent();&lt;br/&gt;
+ void setSilent(boolean silent);&lt;/p&gt;

&lt;p&gt;The default options can be ( !strict &amp;amp;&amp;amp; !silent ), which gives warning logs by default.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://commons.apache.org/proper/commons-jexl/apidocs/org/apache/commons/jexl2/JexlEngine.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-jexl/apidocs/org/apache/commons/jexl2/JexlEngine.html&lt;/a&gt;&lt;br/&gt;
     (The javadoc was not precise about &apos;silent&apos; option. It only determine whether or not the exception should be logged as WARN level. It doesn&apos;t force to throw an exception.)&lt;/p&gt;</comment>
                            <comment id="13838517" author="adouma" created="Wed, 4 Dec 2013 02:28:38 +0000"  >&lt;p&gt;Hi Woonsan,&lt;/p&gt;

&lt;p&gt;I looked into the JexlEngine silent mode and it does make a difference with regards to behavior. &lt;/p&gt;

&lt;p&gt;If (silent==false) (the default) it will throw a JexlException, which then is re-thrown by the (SCXML) JexlEvaluator as SCXMLExpressionException, which is good.&lt;br/&gt;
If (silent==true) Jexl will only log a WARN message and return null (within its invocation context).&lt;br/&gt;
So IMO sticking to the default silent==false for the JexlEngine should be fine, probably without need to also configure/override this through the SCXMLReader.&lt;/p&gt;

&lt;p&gt;The (strict==true) setting for JexlEngine should IMO also be preferred, as default, but has a most important caveat or consequence that  undefined/null variables result in an exception.&lt;br/&gt;
This will thus require somewhat more verbose scripting, e.g. like requiring &apos;!empty(foo) and foo.booleanMethod&apos; instead of more lenient &apos;foo and foo.booleanMethod&apos;.&lt;br/&gt;
Nonetheless, I&apos;d prefer using (strict==true) for both the JexlEngine and SCXMLReader as default, and providing SCXMLReader.setLenient(boolean) method to override this.&lt;/p&gt;</comment>
                            <comment id="13839024" author="woon_san" created="Wed, 4 Dec 2013 15:58:36 +0000"  >&lt;p&gt;Hi Ate,&lt;/p&gt;

&lt;p&gt;The suggested operations for strict/lenient and silent were mainly for SCXMLReader. The options in the context of SCXML reading are not really related to the JEXLEngine options which should play a role in the context of SCXML execution.&lt;br/&gt;
With this issue, I think we&apos;d better focus on strict/lenient and silent options in the SCXMLReader context in order to deal with unexpected / unknown / invalid elements in SCXML model.&lt;br/&gt;
As you&apos;re already aware of it, JexlEvaluator allows to override #createJexlEngine() to give additional options.&lt;/p&gt;

&lt;p&gt;Regarding the default options of JEXL Engine we might have to take in SCXML, I guess it is better to use JEXL Engine without any specific options as we do now. Then it means we&apos;re using the default options of JEXL engine as provided, which seems natural to me for most JEXL script users, IMHO.&lt;br/&gt;
Anyway, this JEXL default options issue can be dealt with a separate issue. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="13839752" author="woon_san" created="Thu, 5 Dec 2013 03:13:01 +0000"  >&lt;p&gt;Added &apos;strict&apos; option and &apos;silent&apos; option into SCXMLReader.Configuration:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;In strict mode, SCXMLReader throws a ModelException on any invalid/unknown elements in the context;&lt;br/&gt;
  in the default non-strict (lenient) mode, it doesn&apos;t throw a ModelException.&lt;/li&gt;
	&lt;li&gt;In silent mode, SCXMLReader doesn&apos;t leave any warning logs on any invalid/unknown elements in the context;&lt;br/&gt;
  in the default non-silent (verbose) mode, it leave warning logs.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So example code can be like the following:&lt;/p&gt;

&lt;p&gt;        configuration = new Configuration(...);&lt;br/&gt;
        configuration.setStrict(false);&lt;br/&gt;
        configuration.setSilent(true);&lt;br/&gt;
        scxml = SCXMLReader.read(scxmlRes, configuration);&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;configuration.setStrict(true) turns on the strict mode; configuration.setStrict(false) turns off the strict mode (meaning enabling the default lenient mode).&lt;/li&gt;
	&lt;li&gt;configuration.setSilent(true) turns on the silent mode; configuration.setSilent(false) turns off the silent mode (meaning enabling the default verbose mode).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Just for information, reader operations in SCXMLReader are all static members, so I put the strict and silent options in SCXMLReader.Configuration.&lt;br/&gt;
Also, I think our strict/lenient and silent/verbose options (simple model elements checking) should be much simpler than those in JEXL (more sophisticated handling for null, conditionals, etc.). So, I tried to keep it as simple as possible.&lt;/p&gt;</comment>
                            <comment id="13840061" author="adouma" created="Thu, 5 Dec 2013 13:05:40 +0000"  >&lt;p&gt;Hi Woonsan,&lt;/p&gt;

&lt;p&gt;Nice work!&lt;br/&gt;
I agree managing the JEXL Engine options for silent/strict are a separate issue, and maybe we should stick to the current &apos;lenient&apos; configurations by default for easier backwards compatibility.&lt;/p&gt;

&lt;p&gt;I like to provide an easier way to configure these properties on the JEXL Engine though, currently you have to extend the JEXLEvaluator for this which is less convenient.&lt;br/&gt;
It is trivial to improve though and I&apos;ve created separate issue &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-183&quot; title=&quot;Expose JexlEngine strict/silent mode settings  through the JexlEvaluator for easier customization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-183&quot;&gt;&lt;del&gt;SCXML-183&lt;/del&gt;&lt;/a&gt; for that.&lt;/p&gt;

&lt;p&gt;With these changes as well as &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-180&quot; title=&quot;Prevent NPEs for possible null value returned from Evaluator.eval* methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-180&quot;&gt;&lt;del&gt;SCXML-180&lt;/del&gt;&lt;/a&gt; the error control of SCXML has been greatly improved!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360948</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1q7z3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361247</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-168] Test failure in SCXMLWriterTest using Java 7</title>
                <link>https://issues.apache.org/jira/browse/SCXML-168</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Tests in the SCXMLWriterTest use StaX to transform SCXML to a pretty printed output and then compare this to a predefined expected output.&lt;br/&gt;
However this is not reliable across Java compilers as to how pretty printing is precisely done. &lt;br/&gt;
In this case, with (Oracle) Java 6, a newline is inserted between the XML declaration and the root element, while on (Oracle) Java 7 no such newline is added. As result these tests fail with Java 7. &lt;/p&gt;

&lt;p&gt;For these tests I think it is easy to fix: there is no functional need (here) to compare the XML output pretty formatted, so I simply removed the pretty printing and adjusted the predefined String to compare against.&lt;/p&gt;

&lt;p&gt;I&apos;ll attach a patch file shortly.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Oracle Java 1.7.0_40-b43&lt;/p&gt;</environment>
        <key id="12672151">SCXML-168</key>
            <summary>Test failure in SCXMLWriterTest using Java 7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ate">Ate Douma</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Oct 2013 14:59:57 +0000</created>
                <updated>Mon, 14 Oct 2013 20:28:52 +0000</updated>
                            <resolved>Mon, 14 Oct 2013 20:28:52 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13794440" author="adouma" created="Mon, 14 Oct 2013 20:28:52 +0000"  >&lt;p&gt;Patch applied (myself)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12606585" name="SCXML-168.patch" size="3877" author="ate" created="Thu, 3 Oct 2013 15:01:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351777</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ongv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352065</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-167] SimpleScheduler removes wrong Timer</title>
                <link>https://issues.apache.org/jira/browse/SCXML-167</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The SimpleScheduler provides the execution of delayed events. Therefore it uses Timers, stored in a map under the senderid. The Timers start DelayedEventTasks. These tasks trigger the given event and then remove their Timer identified by the senderid. In the case that triggering the event processes a new &amp;lt;send&amp;gt; with the same senderid, the task will remove the wrong (new) Timer from the internal map. This new Timer is unreachable for canceling now. Of course, the senderid should be unique, but cannot be assigned by an expression and the following example fails:&lt;/p&gt;

&lt;p&gt;    &amp;lt;state id=&quot;Timer&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;onentry&amp;gt;&lt;br/&gt;
            &amp;lt;send event=&quot;&apos;tick&apos;&quot; sendid=&quot;sendtick&quot; delay=&quot;&apos;1s&apos;&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/onentry&amp;gt;&lt;br/&gt;
        &amp;lt;transition event=&quot;tick&quot; target=&quot;Timer&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;transition event=&quot;stop&quot; target=&quot;NoTimer&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;onexit&amp;gt;&lt;br/&gt;
            &amp;lt;cancel sendid=&quot;sendtick&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/onexit&amp;gt;&lt;br/&gt;
    &amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;The solution is very simple: just remove the Timer from the Map first and then trigger the event.&lt;/p&gt;

&lt;p&gt;So this code:&lt;br/&gt;
        public void run() {&lt;br/&gt;
            try &lt;/p&gt;
{
                executor.triggerEvent(new TriggerEvent(event,
                    TriggerEvent.SIGNAL_EVENT, payload));
            } catch (ModelException me) {
                log.error(me.getMessage(), me);
            }&lt;br/&gt;
            timers.remove(sendId);&lt;br/&gt;
            if (log.isDebugEnabled()) {
                log.debug(&quot;Fired event &apos;&quot; + event + &quot;&apos; as scheduled by &quot;
                    + &quot;&amp;lt;send&amp;gt; with id &apos;&quot; + sendId + &quot;&apos;&quot;);
            }&lt;br/&gt;
        }&lt;br/&gt;
&lt;br/&gt;
Changes to:&lt;br/&gt;
&lt;br/&gt;
        public void run() {&lt;br/&gt;
            timers.remove(sendId);&lt;br/&gt;
            try {                executor.triggerEvent(new TriggerEvent(event,                    TriggerEvent.SIGNAL_EVENT, payload));            }
&lt;p&gt; catch (ModelException me) &lt;/p&gt;
{
                log.error(me.getMessage(), me);
            }
&lt;p&gt;            if (log.isDebugEnabled()) &lt;/p&gt;
{
                log.debug(&quot;Fired event &apos;&quot; + event + &quot;&apos; as scheduled by &quot;
                    + &quot;&amp;lt;send&amp;gt; with id &apos;&quot; + sendId + &quot;&apos;&quot;);
            }
&lt;p&gt;        }&lt;/p&gt;

&lt;p&gt;It should not brake any logic applied to the internal private Map timers.&lt;/p&gt;</description>
                <environment>&lt;p&gt;supersteps activated&lt;/p&gt;</environment>
        <key id="12604239">SCXML-167</key>
            <summary>SimpleScheduler removes wrong Timer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="malinke">Maikel Linke</reporter>
                        <labels>
                            <label>cancel</label>
                            <label>delay</label>
                            <label>patch</label>
                            <label>send</label>
                            <label>timing</label>
                    </labels>
                <created>Tue, 21 Aug 2012 15:43:28 +0000</created>
                <updated>Thu, 28 Nov 2013 06:47:19 +0000</updated>
                            <resolved>Thu, 28 Nov 2013 06:47:19 +0000</resolved>
                                    <version>0.5</version>
                    <version>0.6</version>
                    <version>0.7</version>
                    <version>0.8</version>
                    <version>0.9</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13824009" author="woon_san" created="Fri, 15 Nov 2013 19:44:51 +0000"  >&lt;p&gt;Your suggestion makes sense to me.&lt;br/&gt;
Even if the sendid should be unique, it wouldn&apos;t hurt by removing the timer first from the map and triggering the event next because it should remove the timer in the end anyway. It&apos;s actually safer to do this even for some corner cases.&lt;/p&gt;

&lt;p&gt;I will fix this soon by following your suggestion.&lt;/p&gt;

&lt;p&gt;Thanks a lot!&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="13834548" author="woon_san" created="Thu, 28 Nov 2013 06:47:19 +0000"  >&lt;p&gt;Fixed.&lt;/p&gt;

&lt;p&gt;Thank you very much for reporting this and giving a solution, Maikel Linke!&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>298485</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i15slz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241935</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-165] Warning with nested parallel tags on XML</title>
                <link>https://issues.apache.org/jira/browse/SCXML-165</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;I get this warning message when I try to load the XML file attached to this JIRA&lt;/p&gt;

&lt;p&gt;WARN SCXMLParser:1716 - Ignoring element &amp;lt;parallel&amp;gt; in namespace &quot;http://www.w3.org/2005/07/scxml&quot; at &lt;a href=&quot;file:../SuperController.xml:20:29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:../SuperController.xml:20:29&lt;/a&gt; and digester match &quot;scxml/parallel/parallel&quot;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt; 
&amp;lt;scxml xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2005/07/scxml&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;xmlns:cs&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://commons.apache.org/scxml&quot;&lt;/span&gt;
	version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; initialstate=&lt;span class=&quot;code-quote&quot;&gt;&quot;off&quot;&lt;/span&gt;&amp;gt;

	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;off&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;wakeup&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;controller&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;

	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;parallel id=&lt;span class=&quot;code-quote&quot;&gt;&quot;engine&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;controller&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;initial&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition target=&lt;span class=&quot;code-quote&quot;&gt;&quot;controller.ready&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/initial&amp;gt;&lt;/span&gt;

			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;controller.ready&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;start_controller&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;machine1&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;

		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;

		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;parallel id=&lt;span class=&quot;code-quote&quot;&gt;&quot;machines&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;machine1&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;transition event=&lt;span class=&quot;code-quote&quot;&gt;&quot;start_machine2&quot;&lt;/span&gt; target=&lt;span class=&quot;code-quote&quot;&gt;&quot;machine2&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;

			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;state id=&lt;span class=&quot;code-quote&quot;&gt;&quot;machine2&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/state&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/parallel&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/parallel&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scxml&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </description>
                <environment></environment>
        <key id="12553722">SCXML-165</key>
            <summary>Warning with nested parallel tags on XML</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ice2scream">Ice2scream</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 May 2012 09:13:40 +0000</created>
                <updated>Sat, 22 Mar 2014 23:41:11 +0000</updated>
                            <resolved>Sat, 22 Mar 2014 23:41:11 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13944272" author="adouma" created="Sat, 22 Mar 2014 23:41:11 +0000"  >&lt;p&gt;This has now been fixed through &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-200&quot; title=&quot;Normalize and complete the SCXML object model and parsing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-200&quot;&gt;&lt;del&gt;SCXML-200&lt;/del&gt;&lt;/a&gt;: nested parallel now is supported as by the specification.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>237926</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a57r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267311</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-164] In Parallel, it is not work when State transitions to History.</title>
                <link>https://issues.apache.org/jira/browse/SCXML-164</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The problem was occurred when using Parallel and History together.&lt;/p&gt;

&lt;p&gt;2011-12-28 15:08:03,775 INFO : Illegal state machine configuration!&lt;br/&gt;
org.apache.commons.scxml.model.ModelException: Illegal state machine&lt;br/&gt;
configuration!&lt;br/&gt;
    at&lt;br/&gt;
org.apache.commons.scxml.semantics.SCXMLSemanticsImpl.followTransitions(SCXMLSemanticsImpl.java:703)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.commons.scxml.SCXMLExecutor.triggerEvents(SCXMLExecutor.java:127)&lt;br/&gt;
    at&lt;br/&gt;
org.apache.commons.scxml.env.AbstractStateMachine.fireEvent(AbstractStateMachine.java:201)&lt;/p&gt;

&lt;p&gt;This exception was fired when transition from &quot;S1&quot; to &quot;History&quot; by&lt;br/&gt;
triggering &quot;Sig1&quot; event (History was already memorized). After the investigation, if we want to transition to History in any States in Parallel, it seems that SCXML requires triggering the same event(that is &quot;Sig1&quot; in this case) for all States in Parallel node(It works fine if we create Transition to self with event &quot;Sig1&quot; on State &quot;S10&quot;), which I think it is not correct.&lt;/p&gt;

&lt;p&gt;The equivalent SCXML is following:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; version=&quot;null&quot;&lt;br/&gt;
initial=&quot;Main&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;!-- &lt;a href=&quot;http://commons.apache.org/scxml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/scxml&lt;/a&gt; --&amp;gt;&lt;br/&gt;
 &amp;lt;parallel id=&quot;Main&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;region_Region1&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;initial&amp;gt;&lt;br/&gt;
    &amp;lt;transition target=&quot;S1&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;/transition&amp;gt;&lt;br/&gt;
   &amp;lt;/initial&amp;gt;&lt;br/&gt;
   &amp;lt;state id=&quot;S7&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;initial&amp;gt;&lt;br/&gt;
     &amp;lt;transition target=&quot;s4&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;/transition&amp;gt;&lt;br/&gt;
    &amp;lt;/initial&amp;gt;&lt;br/&gt;
    &amp;lt;history id=&quot;History&quot; type=&quot;shallow&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;transition&amp;gt;&lt;br/&gt;
      &amp;lt;target&amp;gt;       &amp;lt;state id=&quot;s4&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;transition event=&quot;Sig3&quot; target=&quot;S3&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;/transition&amp;gt;&lt;br/&gt;
       &amp;lt;/state&amp;gt;&lt;br/&gt;
      &amp;lt;/target&amp;gt;     &amp;lt;/transition&amp;gt;&lt;br/&gt;
    &amp;lt;/history&amp;gt;&lt;br/&gt;
    &amp;lt;transition event=&quot;Sig2&quot; target=&quot;S1&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;/transition&amp;gt;&lt;br/&gt;
    &amp;lt;state id=&quot;S3&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;/state&amp;gt;&lt;br/&gt;
    &amp;lt;state id=&quot;s4&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;transition event=&quot;Sig3&quot; target=&quot;S3&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;/transition&amp;gt;&lt;br/&gt;
    &amp;lt;/state&amp;gt;&lt;br/&gt;
   &amp;lt;/state&amp;gt;&lt;br/&gt;
   &amp;lt;state id=&quot;S1&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;transition event=&quot;Sig1&quot; target=&quot;History&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;/transition&amp;gt;&lt;br/&gt;
    &amp;lt;transition event=&quot;Sig0&quot; target=&quot;S7&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;/transition&amp;gt;&lt;br/&gt;
   &amp;lt;/state&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;region_Region2&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;initial&amp;gt;&lt;br/&gt;
    &amp;lt;transition target=&quot;S10&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;/transition&amp;gt;&lt;br/&gt;
   &amp;lt;/initial&amp;gt;&lt;br/&gt;
   &amp;lt;state id=&quot;S10&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;/state&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;br/&gt;
 &amp;lt;/parallel&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;From the source, active states was not valid in Parallel&lt;/p&gt;

&lt;p&gt;        if (!SCXMLHelper.isLegalConfig(targetSet, errorReporter)) &lt;/p&gt;
{
            throw new ModelException(&quot;Illegal state machine
configuration!&quot;);
        }

&lt;p&gt;in SCXMLHelper.isLegalConfig(targetSet, errorReporter):&lt;br/&gt;
        if (tt instanceof Parallel) {&lt;br/&gt;
            Parallel p = (Parallel) tt;&lt;br/&gt;
            if (count.size() &amp;lt; p.getChildren().size()) &lt;/p&gt;
{
                errRep.onError(ErrorConstants.ILLEGAL_CONFIG,
                    &quot;Not all AND states active for parallel &quot;
                    + p.getId(), entry);
                legalConfig = false;
            }
&lt;p&gt;        }&lt;/p&gt;</description>
                <environment>&lt;p&gt;MAC OS X version 10.6.8&lt;/p&gt;</environment>
        <key id="12538730">SCXML-164</key>
            <summary>In Parallel, it is not work when State transitions to History.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="arnon">Arnon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Jan 2012 03:39:08 +0000</created>
                <updated>Tue, 18 Mar 2014 00:44:37 +0000</updated>
                            <resolved>Tue, 18 Mar 2014 00:44:37 +0000</resolved>
                                    <version>0.9</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13938616" author="adouma" created="Tue, 18 Mar 2014 00:44:37 +0000"  >&lt;p&gt;After looking at this example in more detail it turns out it uses a model configuration which no longer is valid nor supported with the latest SCXML specification and neither Commons SCXML 2+.&lt;/p&gt;

&lt;p&gt;So further investigating this doesn&apos;t make much sense anymore.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>224233</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 33 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a57b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267309</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-161] transition leaving a child state of parallel </title>
                <link>https://issues.apache.org/jira/browse/SCXML-161</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The following SCXML is not correctly executed&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; version=&quot;1.0&quot; exmode=&quot;lax&quot; initialstate=&quot;initialstate&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;state id=&quot;initialstate&quot;&amp;gt;&lt;br/&gt;
                &amp;lt;transition event=&quot;start&quot; target=&quot;onetwo&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/state&amp;gt;&lt;br/&gt;
        &amp;lt;parallel id=&quot;onetwo&quot;&amp;gt;&lt;br/&gt;
                &amp;lt;transition event=&quot;onetwo_three&quot; target=&quot;three&quot; /&amp;gt;&lt;br/&gt;
                &amp;lt;state id=&quot;one&quot;&amp;gt;&lt;br/&gt;
                &amp;lt;/state&amp;gt;&lt;br/&gt;
                &amp;lt;state id=&quot;two&quot;&amp;gt;&lt;br/&gt;
                        &amp;lt;transition event=&quot;two_four&quot; target=&quot;four&quot; /&amp;gt;&lt;br/&gt;
                &amp;lt;/state&amp;gt;&lt;br/&gt;
        &amp;lt;/parallel&amp;gt;&lt;br/&gt;
        &amp;lt;state id=&quot;three&quot;&amp;gt;&lt;br/&gt;
                &amp;lt;transition event=&quot;three_one&quot; target=&quot;one&quot; /&amp;gt;&lt;br/&gt;
                &amp;lt;transition event=&quot;three_four&quot; target=&quot;four&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/state&amp;gt;&lt;br/&gt;
        &amp;lt;state id=&quot;four&quot;&amp;gt;&lt;br/&gt;
                &amp;lt;transition event=&quot;four_onetwo&quot; target=&quot;onetwo&quot; /&amp;gt;&lt;br/&gt;
                &amp;lt;transition event=&quot;four_three&quot; target=&quot;three&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/state&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;Issuing event &quot;onetwo_three&quot; while in the parallel correctly brings the state machine in &quot;three&quot;.&lt;/p&gt;

&lt;p&gt;Issuing event &quot;two_four&quot; while in the parallel raises an ILLEGAL_CONFIG error.&lt;/p&gt;

&lt;p&gt;Here is a detailed log transcription showing first working transitions and lastly the failing one:&lt;/p&gt;

&lt;p&gt;3-giu-2011 3.30.35 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: entering initialstate&lt;/p&gt;

&lt;p&gt;event: start&lt;br/&gt;
3-giu-2011 3.30.46 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: leaving initialstate&lt;br/&gt;
3-giu-2011 3.30.46 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: entering onetwo&lt;br/&gt;
3-giu-2011 3.30.46 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: entering one&lt;br/&gt;
3-giu-2011 3.30.46 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: entering two&lt;/p&gt;

&lt;p&gt;event: onetwo_three&lt;br/&gt;
3-giu-2011 3.30.53 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: leaving two&lt;br/&gt;
3-giu-2011 3.30.53 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: leaving one&lt;br/&gt;
3-giu-2011 3.30.53 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: leaving onetwo&lt;br/&gt;
3-giu-2011 3.30.53 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: entering three&lt;/p&gt;

&lt;p&gt;event: three_four&lt;br/&gt;
3-giu-2011 3.31.04 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: leaving three&lt;br/&gt;
3-giu-2011 3.31.04 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: entering four&lt;/p&gt;

&lt;p&gt;event: four_onetwo&lt;br/&gt;
3-giu-2011 3.31.08 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: leaving four&lt;br/&gt;
3-giu-2011 3.31.08 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: entering onetwo&lt;br/&gt;
3-giu-2011 3.31.08 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: entering one&lt;br/&gt;
3-giu-2011 3.31.08 org.apache.commons.scxml.model.Log execute&lt;br/&gt;
INFO: null: entering two&lt;/p&gt;

&lt;p&gt;event: two_four&lt;br/&gt;
3-giu-2011 3.31.15 org.apache.commons.scxml.env.SimpleErrorReporter onError&lt;br/&gt;
AVVERTENZA: ILLEGAL_CONFIG (Not all AND states active for parallel onetwo): /onetwo : &lt;span class=&quot;error&quot;&gt;&amp;#91;/onetwo/one&amp;#93;&lt;/span&gt;&lt;br/&gt;
Illegal state machine configuration!&lt;br/&gt;
3-giu-2011 3.31.15 org.apache.commons.scxml.env.SimpleErrorReporter onError&lt;br/&gt;
AVVERTENZA: ILLEGAL_CONFIG (Multiple top-level OR states active!): &amp;lt;SCXML&amp;gt; : &lt;span class=&quot;error&quot;&gt;&amp;#91;/four, /onetwo&amp;#93;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12509384">SCXML-161</key>
            <summary>transition leaving a child state of parallel </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nardelli">Enrico Nardelli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Jun 2011 20:02:10 +0000</created>
                <updated>Mon, 6 Jun 2011 22:51:11 +0000</updated>
                            <resolved>Mon, 6 Jun 2011 22:51:11 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.10</fixVersion>
                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13045170" author="rahul@apache.org" created="Mon, 6 Jun 2011 22:17:36 +0000"  >&lt;p&gt;Setting fix version to next release (v0.10). At first draft, parallels were assumed to have composite regions (there was also verbiage to that effect); and I suspect this may be related to such assumption. I&apos;ll take a look shortly.&lt;/p&gt;</comment>
                            <comment id="13045188" author="rahul@apache.org" created="Mon, 6 Jun 2011 22:51:11 +0000"  >&lt;p&gt;Fixes committed in r1132819 (trunk) and r1132823 (J6 branch). Resolving as fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>71850</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zy2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207821</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-160] Cast to State in TransitionTargetComparator</title>
                <link>https://issues.apache.org/jira/browse/SCXML-160</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The line 90 of the /commons/proper/scxml/trunk/src/main/java/org/apache/commons/scxml/semantics/TransitionTargetComparator (compare(...) method)&lt;br/&gt;
looks like this:&lt;/p&gt;

&lt;p&gt;State s = (State) iter.next();&lt;/p&gt;

&lt;p&gt;The cast to State causes a cast exception in case if the state machine has nested parallels (without intermediate states). The line should be replaced with&lt;br/&gt;
TransitionTarget s = (TransitionTarget) iter.next();&lt;/p&gt;</description>
                <environment></environment>
        <key id="12506684">SCXML-160</key>
            <summary>Cast to State in TransitionTargetComparator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="eugen_k">Eugen Kogan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 May 2011 06:56:37 +0000</created>
                <updated>Fri, 8 Nov 2013 03:56:40 +0000</updated>
                            <resolved>Fri, 8 Nov 2013 03:56:40 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13031505" author="rahul@apache.org" created="Wed, 11 May 2011 01:29:15 +0000"  >&lt;p&gt;Marking fix version(s) to next release.&lt;/p&gt;</comment>
                            <comment id="13816801" author="woon_san" created="Thu, 7 Nov 2013 23:40:53 +0000"  >&lt;p&gt;This is an easy one.&lt;br/&gt;
In the current code below, we can simply remove the line casting tt to State and just use tt variable instead in the comparisons below:&lt;/p&gt;

&lt;p&gt;                for (TransitionTarget tt : lca.getChildren()) {&lt;br/&gt;
                    State s = (State) tt;&lt;br/&gt;
                    if (s == parent1) &lt;/p&gt;
{
                        return 1;
                    }
&lt;p&gt; else if (s == parent2) &lt;/p&gt;
{
                        return -1;
                    }
&lt;p&gt;                }&lt;/p&gt;

&lt;p&gt;Will fix it soon.&lt;/p&gt;</comment>
                            <comment id="13816975" author="woon_san" created="Fri, 8 Nov 2013 03:56:12 +0000"  >&lt;p&gt;Fixed as described in the description.&lt;br/&gt;
Also LCA cannot necessarily be a Parallel, so added checking if it is Parallel before casting.&lt;/p&gt;

&lt;p&gt;Thanks a lot for reporting this with a solution!&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172816</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16svb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247809</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-157] initial child is not accepted if it&apos;s the child of the top scxml node</title>
                <link>https://issues.apache.org/jira/browse/SCXML-157</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;from the standard, it seems that the following is a valid scxml file:&lt;/p&gt;

&lt;p&gt;&amp;lt;scxml id=&quot;SCXML&quot; xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;initial&amp;gt;&lt;br/&gt;
  &amp;lt;transition target=&quot;node1&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;log expr=&quot;123&quot; name=&quot;test&quot;&amp;gt;&amp;lt;/log&amp;gt;&lt;br/&gt;
  &amp;lt;/transition&amp;gt;&lt;br/&gt;
 &amp;lt;/initial&amp;gt;&lt;br/&gt;
 &amp;lt;state id=&quot;node1&quot;&amp;gt;&amp;lt;/state&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;but the initial element is ignored by the current scxml parser.&lt;br/&gt;
Basically it seems one cannot assign any executable content to be executed on initial entry on the initialchild of the top scxml node.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12479542">SCXML-157</key>
            <summary>initial child is not accepted if it&apos;s the child of the top scxml node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fmorbini">Fabrizio Morbini</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Nov 2010 00:31:41 +0000</created>
                <updated>Sun, 16 Feb 2014 01:25:31 +0000</updated>
                            <resolved>Wed, 10 Nov 2010 18:35:55 +0000</resolved>
                                    <version>0.9</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12930652" author="rahul@apache.org" created="Wed, 10 Nov 2010 16:59:48 +0000"  >&lt;p&gt;I don&apos;t see &amp;lt;initial&amp;gt; child of &amp;lt;scxml&amp;gt; listed in latest public WD (Section 3.1.2 and 3.1.3), here is a pointer to those sections:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://www.w3.org/TR/2010/WD-scxml-20100513/#N101B5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/2010/WD-scxml-20100513/#N101B5&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please quote the portions you referred to.&lt;/p&gt;</comment>
                            <comment id="12930655" author="fmorbini" created="Wed, 10 Nov 2010 17:11:14 +0000"  >&lt;p&gt;i was referring to the previous draft:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.w3.org/TR/2009/WD-scxml-20091029/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/2009/WD-scxml-20091029/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;i didn&apos;t realize that that feature had been removed.&lt;/p&gt;
</comment>
                            <comment id="12930700" author="rahul@apache.org" created="Wed, 10 Nov 2010 18:35:55 +0000"  >&lt;p&gt;OK, thanks for confirming, resolving as Won&apos;t Fix since the latest draft doesn&apos;t include it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172813</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zyiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-155] Final State Error </title>
                <link>https://issues.apache.org/jira/browse/SCXML-155</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>
&lt;p&gt;Final State Transition Target not found error is generated even though it is present in SCXML definition.&lt;/p&gt;

&lt;p&gt;&amp;lt;final id=&quot;STOP&quot;&amp;gt;&amp;lt;/final&amp;gt;&lt;/p&gt;

&lt;p&gt;The below final state definition works:&lt;br/&gt;
&amp;lt;state id=&quot;STOP&quot; final=&quot;true&quot;&amp;gt;&amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;As per latest working draft :&lt;br/&gt;
&lt;a href=&quot;http://www.w3.org/TR/scxml/#final&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/scxml/#final&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;state&amp;gt; supports only id=&quot;&quot;and initial=&quot;&quot; attribute, and &amp;lt;final&amp;gt; is separate tag. &lt;/p&gt;

&lt;p&gt;Error Detail:&lt;/p&gt;

&lt;p&gt;Aug 11, 2010 3:22:40 PM org.apache.commons.scxml.io.ModelUpdater logAndThrowModelError&lt;br/&gt;
SEVERE: Transition target with ID &quot;STOP&quot; not found&lt;br/&gt;
Aug 11, 2010 3:22:40 PM org.apache.commons.scxml.SCXMLTestHelper digest&lt;br/&gt;
SEVERE: Transition target with ID &quot;STOP&quot; not found&lt;br/&gt;
org.apache.commons.scxml.model.ModelException: Transition target with ID &quot;STOP&quot; not found&lt;br/&gt;
	at org.apache.commons.scxml.io.ModelUpdater.logAndThrowModelError(ModelUpdater.java:287)&lt;br/&gt;
	at org.apache.commons.scxml.io.ModelUpdater.updateTransition(ModelUpdater.java:257)&lt;br/&gt;
	at org.apache.commons.scxml.io.ModelUpdater.updateState(ModelUpdater.java:173)&lt;br/&gt;
	at org.apache.commons.scxml.io.ModelUpdater.updateSCXML(ModelUpdater.java:77)&lt;br/&gt;
	at org.apache.commons.scxml.io.SCXMLDigester.digest(SCXMLDigester.java:252)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLTestHelper.digest(SCXMLTestHelper.java:79)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLTestHelper.digest(SCXMLTestHelper.java:62)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLTestHelper.getExecutor(SCXMLTestHelper.java:162)&lt;br/&gt;
	at com.connectgaia.water.EngineTest.testEngine(EngineTest.java:47)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
	at junit.framework.TestCase.runTest(TestCase.java:168)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:134)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:110)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:128)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:113)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:124)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:243)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:238)&lt;br/&gt;
	at junit.textui.TestRunner.doRun(TestRunner.java:116)&lt;br/&gt;
	at junit.textui.TestRunner.doRun(TestRunner.java:109)&lt;br/&gt;
	at junit.textui.TestRunner.run(TestRunner.java:77)&lt;br/&gt;
	at com.connectgaia.water.EngineTest.main(EngineTest.java:86)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP ,Eclipse &lt;/p&gt;</environment>
        <key id="12471267">SCXML-155</key>
            <summary>Final State Error </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ajax">Ajar B. Mathur</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Aug 2010 10:03:25 +0000</created>
                <updated>Sun, 16 Feb 2014 01:24:45 +0000</updated>
                            <resolved>Fri, 27 Aug 2010 15:15:32 +0000</resolved>
                                    <version>0.9</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12903449" author="rahul@apache.org" created="Fri, 27 Aug 2010 15:15:32 +0000"  >&lt;p&gt;The SCXMLDigester class is deprecated in v0.9. Use SCXMLParser instead, which supports &amp;lt;final&amp;gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172811</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zyof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207920</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-152] copied state in diagram cannot get a name (and icon different)</title>
                <link>https://issues.apache.org/jira/browse/SCXML-152</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;1. create a new diagram.&lt;br/&gt;
2. create a new state&lt;br/&gt;
3. select this new state and press CTRL-C (copy)&lt;br/&gt;
4. press CTRL-V (paste)&lt;br/&gt;
 &amp;#8211;&lt;br/&gt;
5. select the copied state and type in a new name&lt;br/&gt;
6. press &quot;return&quot; -&amp;gt; new typed name vanishs &lt;/p&gt;

&lt;p&gt;=&amp;gt; it is not possible to give that state a name&lt;br/&gt;
=&amp;gt; the icon of that copied state is not the &quot;S&quot; on a blue circle, but it is some pencil on a paper&lt;/p&gt;</description>
                <environment>&lt;p&gt;WindowsXP, Eclipse 3.4.0, Java6&lt;/p&gt;</environment>
        <key id="12469349">SCXML-152</key>
            <summary>copied state in diagram cannot get a name (and icon different)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jhgoebbert">Jens H.</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Jul 2010 14:13:46 +0000</created>
                <updated>Fri, 23 Jul 2010 03:36:38 +0000</updated>
                            <resolved>Fri, 23 Jul 2010 03:36:38 +0000</resolved>
                                    <version>GSoC</version>
                                    <fixVersion>GSoC</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12891460" author="guixl" created="Fri, 23 Jul 2010 03:36:38 +0000"  >&lt;p&gt;In current state, we can not finish copy and paste operation in diagram canvas, so there is not &quot;can not give name&quot; problem&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172808</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1005z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208161</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-113] Log not initialized in 2 of 4 AbstractStateMachine constructors.</title>
                <link>https://issues.apache.org/jira/browse/SCXML-113</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;&quot;Log&quot; in AbstractStateMachine is NOT initialized if using either of these two constructors.&lt;/p&gt;

&lt;p&gt;This causes a NPE if a failure occurs while initializing the state machine.&lt;/p&gt;

&lt;p&gt; /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Convenience constructor.&lt;br/&gt;
     *&lt;/li&gt;
	&lt;li&gt;@param stateMachine The parsed SCXML instance that&lt;/li&gt;
	&lt;li&gt;describes the &amp;quot;lifecycle&amp;quot; of the&lt;/li&gt;
	&lt;li&gt;instances of this class.&lt;br/&gt;
     *&lt;/li&gt;
	&lt;li&gt;@since 0.7&lt;br/&gt;
     */&lt;br/&gt;
    public AbstractStateMachine(final SCXML stateMachine) 
{
        // default is JEXL
        this(stateMachine, new JexlContext(), new JexlEvaluator());
    }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Primary constructor.&lt;br/&gt;
     *&lt;/li&gt;
	&lt;li&gt;@param stateMachine The parsed SCXML instance that&lt;/li&gt;
	&lt;li&gt;describes the &amp;quot;lifecycle&amp;quot; of the&lt;/li&gt;
	&lt;li&gt;instances of this class.&lt;/li&gt;
	&lt;li&gt;@param rootCtx The root context for this instance.&lt;/li&gt;
	&lt;li&gt;@param evaluator The expression evaluator for this instance.&lt;br/&gt;
     *&lt;/li&gt;
	&lt;li&gt;@see Context&lt;/li&gt;
	&lt;li&gt;@see Evaluator&lt;br/&gt;
     *&lt;/li&gt;
	&lt;li&gt;@since 0.7&lt;br/&gt;
     */&lt;br/&gt;
    public AbstractStateMachine(final SCXML stateMachine,&lt;br/&gt;
            final Context rootCtx, final Evaluator evaluator) 
{
        initialize(stateMachine, rootCtx, evaluator);
    }&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12441324">SCXML-113</key>
            <summary>Log not initialized in 2 of 4 AbstractStateMachine constructors.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="eric.gulatee@gmail.com">Eric Gulatee</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Nov 2009 19:48:17 +0000</created>
                <updated>Fri, 15 Jan 2010 22:14:34 +0000</updated>
                            <resolved>Fri, 15 Jan 2010 22:14:34 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.10</fixVersion>
                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12781567" author="rahul@apache.org" created="Mon, 23 Nov 2009 19:29:05 +0000"  >&lt;p&gt;Setting fix versions for now, will take a look soon.&lt;/p&gt;</comment>
                            <comment id="12800945" author="rahul@apache.org" created="Fri, 15 Jan 2010 22:14:34 +0000"  >&lt;p&gt;Resolving as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-104&quot; title=&quot;AbstractStateMachine log error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-104&quot;&gt;&lt;del&gt;SCXML-104&lt;/del&gt;&lt;/a&gt; which has already been fixed in SVN and will be included in the next release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172769</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zyl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207905</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-112] Wrong behavior if event is triggered from EventDispatcher</title>
                <link>https://issues.apache.org/jira/browse/SCXML-112</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Method SCMLExecutor#triggerEvents is synchronized which is too naive way to ensure that events are processed in order they arrive.&lt;/p&gt;

&lt;p&gt;Since the callback to EventDispatcher is made by thread that holds lock on SCMLExecutor triggering event from the dispatcher allows this thread to re-enter the event handling.&lt;/p&gt;

&lt;p&gt;Note: This has nothing to do with multi-threading since there is only one thread.&lt;/p&gt;

&lt;p&gt;Simple queue might e sufficient but in multi-threaded application would make the first thread to enter #triggerEvents process events from other threads queued while the method is running.&lt;/p&gt;

&lt;p&gt;Another approach might be to call EventDispatcher in separate thread,but it has it&apos;s drawbacks too:&lt;br/&gt;
a) changes single-threaded application into-multithreaded which might break assumtions made by unaware user&lt;br/&gt;
b) might start too many threads&lt;br/&gt;
c) Java does not guarantee that threads waiting for lock will get it in same order as they arrive =&amp;gt; might result in non-deterministic behavior of SCXML interpretation&lt;/p&gt;

&lt;p&gt;Possible solutions would be:&lt;/p&gt;

&lt;p&gt;1) add queue and allow the &quot;first&quot; thread server all events - might be just fine since multi-threaded applications might create dedicate thread just for SCXML imterpretation&lt;br/&gt;
2) add queue and block threads after they queue event - so they &quot;wait&quot; until execute their event become first in queue&lt;br/&gt;
3) factor out the queue event queue management and allow for &quot;pluggable&quot; strategy&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12430665">SCXML-112</key>
            <summary>Wrong behavior if event is triggered from EventDispatcher</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="alesd">Ales Dolecek</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jul 2009 13:12:25 +0000</created>
                <updated>Thu, 3 Apr 2014 09:17:43 +0000</updated>
                            <resolved>Thu, 3 Apr 2014 09:17:43 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12731933" author="alesd" created="Thu, 16 Jul 2009 13:25:37 +0000"  >&lt;p&gt;Interpreting test1.xml with JEXL will end &quot;in good-end&quot;. Interpreting test2.xml will end in &quot;disconnected&quot; while &quot;visiting&quot; the &quot;wrong-end&quot; state. In both cases the SCXMLexecutor should use attached Dispatcher which simply triggers any event back to executor.&lt;/p&gt;

&lt;p&gt;INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; /initial&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; /initial&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; transition (event = start, cond = null, from = /initial, to = /disconnected)&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; /disconnected&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; /disconnected&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; transition (event = event, cond = null, from = /disconnected, to = /good-end)&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; /good-end&lt;/p&gt;

&lt;p&gt;INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; /initial&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; /initial&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; transition (event = start, cond = null, from = /initial, to = /disconnected)&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; /initial&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; transition (event = event, cond = null, from = /initial, to = /wrong-end)&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; /wrong-end&lt;br/&gt;
INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;SimpleSCXMLListener&amp;#93;&lt;/span&gt; /disconnected&lt;/p&gt;</comment>
                            <comment id="12731934" author="alesd" created="Thu, 16 Jul 2009 13:27:47 +0000"  >&lt;p&gt;Oh and probably the easiest solution:&lt;/p&gt;

&lt;p&gt;4) throw IllegalStateException if the EventDispatcher tries to re-enter the loop (although it will not help with the non-deterministic behavior)&lt;/p&gt;

&lt;p&gt;BTW: Same probably holds for triggering events from &amp;lt;invoke&amp;gt; or listeners&lt;/p&gt;</comment>
                            <comment id="12732372" author="rahul@apache.org" created="Fri, 17 Jul 2009 06:42:44 +0000"  >&lt;p&gt;The current behavior is very much so by design. As you&apos;ve well articulated in your comments, there are trade-offs and in the end the drawbacks of always spawning a thread for the EventDispatcher / Invoker / SCXMLListener outweigh any benefits (especially when users can still choose to do some processing asynchronously per application needs). In many container environments, a very large number of SCXML instances are live in the same JVM (furthermore, any &amp;lt;onentry&amp;gt;, &amp;lt;onexit&amp;gt; or &amp;lt;transition&amp;gt; may have multiple &amp;lt;send&amp;gt;s for example) so we have to take a resource-conservative approach.&lt;/p&gt;

&lt;p&gt;In fact, executable content (which includes &amp;lt;send&amp;gt;) is supposed to take negligible amount of time (tending to zero) in state chart theory. So, in general, the EventDispatcher shouldn&apos;t do anything that takes noticeable amount of time. However, a pragmatic view suggests that sometimes a bit of processing is helpful in executable content, and when that happens doing it asynchronously is always possible as application choice.&lt;/p&gt;

&lt;p&gt;Furthermore, using the EventDispatcher, Invokers or SCXMLListeners to immediately trigger events to the originating/host state machine is generally an anti-pattern (they may ofcourse do so to report the result of some processing). The recommended way for adding immediate events to the queue is through use of &amp;lt;send&amp;gt; with no target and type &quot;SCXML&quot;. These entities should also use something like the AsyncTrigger when needed (though now that I&apos;m pointing to it, I can spot a couple of improvements):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/commons/proper/scxml/trunk/src/main/java/org/apache/commons/scxml/invoke/AsyncTrigger.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/commons/proper/scxml/trunk/src/main/java/org/apache/commons/scxml/invoke/AsyncTrigger.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So your attached Dispatcher would do something similar. I did try to understand the rest of your test cases (but test1.xml and test2.xml seem very similar &amp;#8211; except one has &amp;lt;send&amp;gt; attribute &quot;targettype&quot; and the other just has &quot;type&quot;). It&apos;d be great if you could please attach complete JUnit tests so its easy to run these without guesswork. There are many helper methods in SCXMLTestHelper class which make the JUnit tests quite brief (and therefore, hopefully quick to author).&lt;/p&gt;

&lt;p&gt;In terms of action items, perhaps it may make sense to add something like the AsyncTrigger as a public class in the v1.0 timeframe. It may also make sense to improve the documentation by adding, say a section to the user guide on the website about triggering events back on the originating executor.&lt;/p&gt;</comment>
                            <comment id="12732403" author="alesd" created="Fri, 17 Jul 2009 07:54:28 +0000"  >&lt;p&gt;Sorry - the difference between the files SHOULD be the type - not name of the attribute - but it&apos;s name but it&apos;s value. (I have edited the file in-place and made 2 versions just for the report - apparently wrong). When &quot;scxml&quot; is used the SCXMLExecutor handles the event by itself and everything works fine. When &quot;non-scxml&quot; is used the SCXMLExecutor calls EventDispatcher which calls back #triggerEvent. It is single thread and the call takes &quot;neglible amount of time&quot;.&lt;/p&gt;

&lt;p&gt;The point was to show that executor itself does not use #triggerEvents internally.&lt;/p&gt;

&lt;p&gt;I have no problem with the issue as I&apos;m using ScheduledThreadPoolExecutor (introduced in J5) which converts #send invocations into asyncronous calls and also provides queue.&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;/p&gt;

&lt;p&gt;I&apos;m in telephony world, which is fast, async and event based by it&apos;s nature and is also &quot;behind&quot; SCXML. The dispatcher calls CTI and the results come back asynchronously and very fast. I came acros the issue in test unit which fake the CTI loop and fire expected events directly from dispatcher.&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;/p&gt;

&lt;p&gt;Maybe the triggering of events should be separated from it&apos;s execution. The SCXMLExecutor might expose methods to check if there are external events in queue and that make single macro-step. User would then call triggerEvent(...) and &quot;while (pendingEvents()) &lt;/p&gt;
{ step(); }
&lt;p&gt;&quot;. The step might have variants that would block waiting for events (possibly with timeout).&lt;/p&gt;

&lt;p&gt;AsyncTrigger does not solve the problem of non-derministic behavior. If you trigger multiple AsyncTriggers you have no guarantee that they will be processed in the order you fired them - which might be problem and violate SCXML specification. External queue won&apos;t help since events of type &quot;scxml&quot; would not use it and would skip events in the queue.&lt;/p&gt;

&lt;p&gt;As result there is currently no way how to achive the deterministic behavior of SCXML in multithreaded environment. And no way to correctly trigger events from &amp;lt;send&amp;gt; or &amp;lt;invoke&amp;gt; in single-threaded environment. Both of these are however needed to conform to SCXML as using send/invoke with wrong type MUST result in firing error event.&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;/p&gt;

&lt;p&gt;The idea I&apos;m trying to express, rather clumsily, is that the the SCXMLExecutor should be designed as thread safe, or at least with thread safety &quot;in-mind&quot;, since the events MAY come from different &quot;sources&quot; and MAY do so while the state machine is in transition.&lt;/p&gt;

&lt;p&gt;The SCXML is multi-threaded and async by nature/design and at least SCXMLExecutor should be as well.&lt;/p&gt;</comment>
                            <comment id="12732628" author="rahul@apache.org" created="Fri, 17 Jul 2009 17:49:44 +0000"  >&lt;p&gt;OK, great, with that clarification for the test SCXML documents, the tests and comments make sense. What I didn&apos;t get around to mentioning in my last comment was that we&apos;ve always said that users should set up an external event queue as a feeder to the SCXMLExecutor instances (using an appropriate implementation that makes sense for their application domain).&lt;/p&gt;

&lt;p&gt;Towards that end, I agree that having something along the lines of option (3) mentioned in your initial post to this issue i.e. factor out the queue event queue management and allow for &quot;pluggable&quot; strategy, seems like a reasonable addition at this time. We would want to be able to allow for any number of queueing solutions/implementations. For example, using ScheduledThreadPoolExecutor as you mention may be one basis. Note that SCXML trunk is JDK 1.4 based, though we can definitely add such a solution in the J6 branch. So I think this is open to code proposals, any proposal via patch(es) welcome.&lt;/p&gt;</comment>
                            <comment id="12732874" author="alesd" created="Sat, 18 Jul 2009 10:14:12 +0000"  >&lt;p&gt;I&apos;m afraid that I can&apos;t externalize the queue.&lt;/p&gt;

&lt;p&gt;I&apos;m sorry to say that, but the code seems &quot;scattered&quot;. There are many interlinked classes/interfaces which overlap eg.&lt;/p&gt;

&lt;p&gt;Status and SCInstance&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;both hold state information&lt;br/&gt;
SCXMLExecutor and SCInstance reference each other in 1:1 relation&lt;/li&gt;
	&lt;li&gt;seems useless to have them separated&lt;/li&gt;
	&lt;li&gt;might give sense if executor was intended as &quot;driver&quot;, but then this is purpose of the SCXMLSemantics&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Also came across other issues while digging into the code:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the events are not processed one at time but in chunks - submitting multiple events via #triggerEvents behave differently than repeated invocation of #triggerEvent&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Factoring out the queue would mean radical changes in code and, what is worse, also to contracts of the public APIs.&lt;/p&gt;

&lt;p&gt;It might be possible to keep contract of SCXMLExecutor eg. by adding:&lt;/p&gt;

&lt;p&gt;#microStep() and #macroStep() methods and let&lt;/p&gt;

&lt;p&gt;a) triggerEvents&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;lock external queue, enqueue all queued events and then call, get it&apos;s size, unlock it and call #macroStep &quot;size&quot; times so that it process all currently queued external events plus the ones added by the invocation&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;b) all methods invoked by SCXMLExecutor that might generate internal events must have access to the internalQueue =&amp;gt;&#160;pass along SCInstance (if the queue would be there)&lt;/p&gt;

&lt;p&gt;c) all methods that take TriggerEvent[] should be rewriten so theat they take just TriggerEvent&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;or ensure that they are invoked with array of lenght == 1&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&amp;#8212;&lt;/p&gt;

&lt;p&gt;The API deserve major revision/rethink&lt;/p&gt;</comment>
                            <comment id="12732923" author="rahul@apache.org" created="Sat, 18 Jul 2009 19:02:11 +0000"  >&lt;p&gt;I&apos;m afraid externalizing the queue is best for the 0.x line.&lt;/p&gt;

&lt;p&gt;Your feedback is appreciated. Some comments:&lt;/p&gt;

&lt;p&gt;This involves years of code evolution, but to summarize quickly (not in any order):&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;SCXMLExecutor is the primary API for clients&lt;/li&gt;
	&lt;li&gt;SCInstance is the backing store for internal state&lt;/li&gt;
	&lt;li&gt;Status exposes the state clients most want to know about&lt;/li&gt;
	&lt;li&gt;SCXMLSemantics is the crux of the SCXML algorithm (extension point for users to have different algorithm if and when it makes sense)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Much of that separation is useful IMO.&lt;/p&gt;

&lt;p&gt;The #triggerEvents() behavior is different from a series of triggerEvent() calls, but that was intentional when it was done (multiple active regions).&lt;/p&gt;

&lt;p&gt;With many of the changes in the spec, its certainly on the cards to create a version of the SCXMLExecutor for the next major line of development that internalizes the external events queue that feeds the main loop for processing events (there&apos;d be a inner loop for internal events) and makes other tweaks to the algorithm as needed. But the idea won&apos;t be to drastically change any API / contracts.&lt;/p&gt;</comment>
                            <comment id="12732940" author="alesd" created="Sat, 18 Jul 2009 22:44:28 +0000"  >&lt;p&gt;No, no - that is fine. I understand that the project has it&apos;s history and that it is hard to keep up with changing &quot;standard&quot;. I&apos;m just not up to made the changes and actually externalize the queue since I&apos;m just starting to dig into commons-scxml internals and my attempt to &quot;fix&quot; this issue grew fast out of my time and skills. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12732948" author="rahul@apache.org" created="Sun, 19 Jul 2009 00:08:32 +0000"  >&lt;p&gt;Got it. In any case, getting the external queue set up as part of the executor has been on my todo list &amp;#8211; it will be added to the J6 branch in SVN at some point. I just don&apos;t have an ETA for it (likely its going to be a few weeks, not days). Ofcourse, if someone proposes a patch to this issue, it could be faster.&lt;/p&gt;</comment>
                            <comment id="13824198" author="woon_san" created="Fri, 15 Nov 2013 22:44:25 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;ve just met this issue while looking into the internal Send action behavior.&lt;br/&gt;
IIUC, then I think there are two improvement ideas here:&lt;br/&gt;
1 - to queue the events and execute event in order&lt;br/&gt;
2 - hopefully to have a new EventDispatcher implementation (maybe using ScheduledThreadPoolExecutor for instance)&lt;/p&gt;

&lt;p&gt;IMO, the first one is more important because it guarantees the execution order. The second one is still possible if a custom one is provided for their domain.&lt;br/&gt;
To simply fix the first one, I think we can improve SimpleDispatcher to inject an event queue instance (e.g, EventQueue interface) or create a default implementation (e.g, SimpleEventQueue) and SimpleDispatcher#send() can simply push the event into the event queue instance first and try to poll/execute all the remaining events afterward.&lt;br/&gt;
Then I think the SimpleDispatcher will perform more correctly even though it is still a trivial and simple implementation (as intended).&lt;/p&gt;

&lt;p&gt;The second improvement idea (another EventDispatcher implementation) can be another JIRA issue.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Woonsan&lt;/p&gt;</comment>
                            <comment id="13958656" author="adouma" created="Thu, 3 Apr 2014 09:17:43 +0000"  >&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-196&quot; title=&quot;Redefine SCXMLSemantics to align with the Algorithm for SCXML Interpretation as described in the SCXML specification&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-196&quot;&gt;&lt;del&gt;SCXML-196&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-197&quot; title=&quot;Better separation of concern between SCXMLExecutor and SCInstance and introducing a new SCXMLExecutionContext&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-197&quot;&gt;&lt;del&gt;SCXML-197&lt;/del&gt;&lt;/a&gt; the event handling has been completely refactored and for the larger part all the above issues have either be resolved or handled differently.&lt;br/&gt;
I&apos;m closing this now as it probably is better to review the new implementation first and start from there if other/extra functionality is needed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12413684" name="Dispatcher.java" size="806" author="alesd" created="Thu, 16 Jul 2009 13:25:37 +0000"/>
                            <attachment id="12413682" name="test1.xml" size="578" author="alesd" created="Thu, 16 Jul 2009 13:25:37 +0000"/>
                            <attachment id="12413683" name="test2.xml" size="572" author="alesd" created="Thu, 16 Jul 2009 13:25:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172768</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a54v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267298</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-105] Current status updated after onentry is called</title>
                <link>https://issues.apache.org/jira/browse/SCXML-105</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;When retrieving the current state using a custom action in the onentry section of a state, the state is incorrect.  The state retrieved is the previous state.  The problem appears to be in SCXMLExecutor.triggerEvents, where updateStatus() is called after semantics.executeActions().  Adding an additional updateStatus() before executeActions() seems to fix the problem, and all tests still pass.&lt;/p&gt;

&lt;p&gt;Attached is a test case showing the problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412104">SCXML-105</key>
            <summary>Current status updated after onentry is called</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mtillberg">Mike Tillberg</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Jan 2009 06:25:07 +0000</created>
                <updated>Thu, 3 Apr 2014 09:25:29 +0000</updated>
                            <resolved>Thu, 3 Apr 2014 09:25:29 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12662628" author="mtillberg" created="Sat, 10 Jan 2009 06:25:57 +0000"  >&lt;p&gt;Patch to the CustomActionTest unit tests&lt;/p&gt;</comment>
                            <comment id="12662629" author="mtillberg" created="Sat, 10 Jan 2009 06:26:21 +0000"  >&lt;p&gt;State model&lt;/p&gt;</comment>
                            <comment id="12662630" author="mtillberg" created="Sat, 10 Jan 2009 06:26:41 +0000"  >&lt;p&gt;Custom action&lt;/p&gt;</comment>
                            <comment id="12662705" author="mtillberg" created="Sat, 10 Jan 2009 23:58:39 +0000"  >&lt;p&gt;  The additional updateStatus call may not be the correct fix.  When that is in place, getting the state in an onExit or in a transition returns the destination state.  It looks like this may be a deeper problem.  SCXMLSemantics.executeActions is defined to execute &quot;all OnExit/Transition/OnEntry transitional actions&quot;, which would infer that the same state would be current for all of those sections.&lt;/p&gt;</comment>
                            <comment id="12662735" author="rahul@apache.org" created="Sun, 11 Jan 2009 07:15:02 +0000"  >&lt;p&gt;This behavior is actually by design, though somewhat subtle. Since any transitions on the state machine are supposed to be atomic operations, the status is not updated until all the necessary steps to complete the transition are done without any fatal errors. This includes the executable content onexit of source state, in transition and onentry of target state. However, finding out the parent transition target (state) for actions within an onentry block is fairly straightforward &amp;#8211; in Action#execute(), the Action#getParentTransitionTarget() method will give the parent transition target if needed.&lt;/p&gt;</comment>
                            <comment id="12662798" author="mtillberg" created="Sun, 11 Jan 2009 16:41:44 +0000"  >&lt;p&gt;  That would work for the test case, it wouldn&apos;t be sufficient if there are parallel states.  Although it may be possible to look at Action.getParent to see if it&apos;s an OnEntry and compare the current state against getParentTransitionTarget to derive the real current state.  Would it make sense to change:&lt;/p&gt;

&lt;p&gt;semantics.executeActions();&lt;br/&gt;
updateStatus(step);&lt;/p&gt;

&lt;p&gt;to&lt;/p&gt;

&lt;p&gt;semantics.executeExitActions();&lt;br/&gt;
semantics.executeTransitionActions();&lt;br/&gt;
try {&lt;br/&gt;
    updateStatus(step);&lt;br/&gt;
    semantics.executeEntryActions();&lt;br/&gt;
} catch (ModelException me) {&lt;br/&gt;
    restoreStatus(step);  // using step&apos;s beforestatus&lt;br/&gt;
    throw me;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;  updateStatus changes both the current state list and event list, so it may make sense to split that as well to prevent recalculating the ancestor closure.&lt;/p&gt;</comment>
                            <comment id="12662806" author="rahul@apache.org" created="Sun, 11 Jan 2009 18:35:01 +0000"  >&lt;p&gt;Thanks for your patches and suggestions. In the spirit of the latest suggestion, more changes would be needed though. During a transition, you&apos;d be in neither the source nor target states (however, theoretically transitions are supposed to be instantaneous so state chart theory doesn&apos;t need to address that very much). So it&apos;d look something like:&lt;/p&gt;

&lt;p&gt;// here status returns source(s) as current states&lt;br/&gt;
semantics.executeExitActions();&lt;br/&gt;
// here status returns no current states (which is quite bad IMO)&lt;br/&gt;
semantics.executeTransitionActions();&lt;br/&gt;
// here status returns target(s) as current states&lt;br/&gt;
semantics.executeEntryActions();&lt;/p&gt;

&lt;p&gt;I will try to clarify with the Working Group what the consensus is regarding the behavior here, but I&apos;d be inclined to not make any changes until such time.&lt;/p&gt;</comment>
                            <comment id="13194592" author="toby200" created="Fri, 27 Jan 2012 10:20:04 +0000"  >&lt;p&gt;This issue has caught me out; I worked around it in a similar manner to Mike&apos;s proposal above, by splitting the actions between pre- and post- transition and updating the status in between. &lt;/p&gt;

&lt;p&gt;This appears to match what the SCXML standard dictates in their psuedo-code as listed under &lt;a href=&quot;http://www.w3.org/TR/scxml/#AlgorithmforSCXMLInterpretation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/scxml/#AlgorithmforSCXMLInterpretation&lt;/a&gt;. In procedure enterStates(enabledTransitions), the new state is put into the configuration before the call to any onEntry actions:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; s in statesToEnter:
        configuration.add(s)  &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;----  State is updated here
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; binding == &lt;span class=&quot;code-quote&quot;&gt;&quot;late&quot;&lt;/span&gt; and s.isFirstEntry:
            initializeDataModel(datamodel.s,doc.s)
            s.isFirstEntry = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; content in s.onentry:
            executeContent(content)   &lt;span class=&quot;code-comment&quot;&gt;//  &amp;lt;-------- onentry actions are executed here&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The earlier onExit and transition actions are handled as part of the microstep, from which I&apos;d infer that the transition technically takes place whilst still in the previous state.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;procedure microstep(enabledTransitions):
    exitStates(enabledTransitions)
    executeTransitionContent(enabledTransitions)
    enterStates(enabledTransitions)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Even if the change is not 100% perfect (I note the comments about rollback) I feel it would be more correct this way and cause fewer people problems.&lt;/p&gt;</comment>
                            <comment id="13958660" author="adouma" created="Thu, 3 Apr 2014 09:25:29 +0000"  >&lt;p&gt;Indeed, with &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-196&quot; title=&quot;Redefine SCXMLSemantics to align with the Algorithm for SCXML Interpretation as described in the SCXML specification&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-196&quot;&gt;&lt;del&gt;SCXML-196&lt;/del&gt;&lt;/a&gt; the processing logic and order is now exactly according to the specification, so closing this as &apos;Not a Problem&apos; (any more).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12397591" name="CustomActionTest.patch" size="3409" author="mtillberg" created="Sat, 10 Jan 2009 06:25:57 +0000"/>
                            <attachment id="12397593" name="GetStateAction.java" size="2589" author="mtillberg" created="Sat, 10 Jan 2009 06:26:41 +0000"/>
                            <attachment id="12397592" name="custom-state-01.xml" size="1490" author="mtillberg" created="Sat, 10 Jan 2009 06:26:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172761</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 31 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a52v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267289</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-104] AbstractStateMachine log error</title>
                <link>https://issues.apache.org/jira/browse/SCXML-104</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Using the constructor of AbstractStateMachine&lt;/p&gt;

&lt;p&gt;   public AbstractStateMachine(final SCXML stateMachine) &lt;/p&gt;

&lt;p&gt;   Invokes the following constructor:&lt;/p&gt;

&lt;p&gt;    public AbstractStateMachine(final SCXML stateMachine,&lt;br/&gt;
            final Context rootCtx, final Evaluator evaluator) &lt;/p&gt;
{
        initialize(stateMachine, rootCtx, evaluator);
    }


&lt;p&gt;    And the initialize method.&lt;/p&gt;

&lt;p&gt;    private void initialize(final SCXML stateMachine,&lt;br/&gt;
            final Context rootCtx, final Evaluator evaluator) {&lt;br/&gt;
        engine = new SCXMLExecutor(evaluator, new SimpleDispatcher(),&lt;br/&gt;
            new SimpleErrorReporter());&lt;br/&gt;
        engine.setStateMachine(stateMachine);&lt;br/&gt;
        engine.setSuperStep(true);&lt;br/&gt;
        engine.setRootContext(rootCtx);&lt;br/&gt;
        engine.addListener(stateMachine, new EntryListener());&lt;br/&gt;
        try &lt;/p&gt;
{
            engine.go();
        }
&lt;p&gt; catch (ModelException me) &lt;/p&gt;
{
            logError(me);
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;    Any exception raised in the &quot;engine.go()&quot; initial processing is captured and logged, but the log is not initialized properly.&lt;br/&gt;
   First sentence in &quot;initialise()&quot; method should be:&lt;/p&gt;

&lt;p&gt;           log = LogFactory.getLog(this.getClass());&lt;/p&gt;</description>
                <environment>&lt;p&gt;commons-scxml 0.9&lt;/p&gt;</environment>
        <key id="12412006">SCXML-104</key>
            <summary>AbstractStateMachine log error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="enderr">Jorge Vila Forc&#233;n</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Jan 2009 09:17:21 +0000</created>
                <updated>Sun, 11 Jan 2009 07:10:01 +0000</updated>
                            <resolved>Fri, 9 Jan 2009 09:21:44 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.10</fixVersion>
                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="600">10m</timeoriginalestimate>
                            <timeestimate seconds="600">10m</timeestimate>
                                        <comments>
                            <comment id="12662290" author="enderr" created="Fri, 9 Jan 2009 09:21:44 +0000"  >&lt;p&gt;Added &lt;/p&gt;

&lt;p&gt;log = LogFactory.getLog(this.getClass());&lt;/p&gt;

&lt;p&gt;in the initialise method&lt;/p&gt;</comment>
                            <comment id="12662492" author="rahul@apache.org" created="Fri, 9 Jan 2009 19:40:00 +0000"  >&lt;p&gt;Thanks, fixed in SVN as well.&lt;/p&gt;</comment>
                            <comment id="12662493" author="rahul@apache.org" created="Fri, 9 Jan 2009 19:42:34 +0000"  >&lt;p&gt;Updating the fix versions.&lt;/p&gt;</comment>
                            <comment id="12662652" author="enderr" created="Sat, 10 Jan 2009 11:46:02 +0000"  >&lt;p&gt;Thank you!&lt;/p&gt;

&lt;p&gt;I mistaken the choice of version&lt;/p&gt;

&lt;p&gt;I fixed it in the svn as well, I hope I have done correctly as it was my &lt;br/&gt;
first commit in Apache commons &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Nevertheless, I am using a modified version of the AbstractStateMachine &lt;br/&gt;
as the SimpleDispatcher does not processes the delay in the &amp;lt;send&amp;gt; &lt;br/&gt;
events, does it?&lt;/p&gt;

&lt;p&gt;I will try to make you a new proposal for the constructors.&lt;/p&gt;

&lt;p&gt;Great job with SCXML!!&lt;/p&gt;

&lt;p&gt;Best regards&lt;br/&gt;
JORGE&lt;/p&gt;

</comment>
                            <comment id="12662734" author="rahul@apache.org" created="Sun, 11 Jan 2009 07:10:01 +0000"  >&lt;p&gt;Commit access to the SVN repository is not open to all, so your commit won&apos;t go through yet.&lt;/p&gt;

&lt;p&gt;To your question &amp;#8211; yup, the SimpleDispatcher doesn&apos;t handle delays, though the SimpleScheduler does. If you&apos;d like to suggest an enhancement, please attach a patch here. See:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://commons.apache.org/patches.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/patches.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zy9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207853</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-103] Remove any catch (Throwable t) occurences</title>
                <link>https://issues.apache.org/jira/browse/SCXML-103</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;There are a few instances where the code catches Throwable, but fails to rethrow anything.&lt;br/&gt;
For example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.commons.scxml.io.SCXMLSerializer.getTransformer()
...
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It would be safer if the code only caught the relevant Exception(s) (and perhaps some Errors).&lt;br/&gt;
For example does it really make sense to catch OutOfMemory ?&lt;/p&gt;

&lt;p&gt;In particular, the Javadoc for ThreadDeath says:&lt;/p&gt;

&lt;p&gt;&lt;blockquote&gt;&lt;/blockquote&gt; If ThreadDeath is caught by a method, it is important that it be rethrown so that the thread actually dies.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12411704">SCXML-103</key>
            <summary>Remove any catch (Throwable t) occurences</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Jan 2009 18:38:21 +0000</created>
                <updated>Tue, 6 Jan 2009 20:51:28 +0000</updated>
                            <resolved>Tue, 6 Jan 2009 20:51:28 +0000</resolved>
                                                    <fixVersion>0.10</fixVersion>
                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12660895" author="rahul@apache.org" created="Mon, 5 Jan 2009 20:11:27 +0000"  >&lt;p&gt;Any such instances clearly need improvement. The example above does indeed throw an Error (it was a strange API choice IMO, but it is what it is) so that will need to be caught as well.&lt;/p&gt;

&lt;p&gt;Setting fix version to next releases out of trunk and J6 branch.&lt;/p&gt;
</comment>
                            <comment id="12660899" author="rahul@apache.org" created="Mon, 5 Jan 2009 20:14:23 +0000"  >&lt;p&gt;I think this subject for the issue is clearer, but feel free to change if you don&apos;t like it.&lt;/p&gt;</comment>
                            <comment id="12661002" author="sebb@apache.org" created="Tue, 6 Jan 2009 00:32:56 +0000"  >&lt;p&gt;(Re subject change - sorry meant to do it myself!).&lt;/p&gt;

&lt;p&gt;Applied to J6&lt;br/&gt;
URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=731781&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=731781&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-103&quot; title=&quot;Remove any catch (Throwable t) occurences&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-103&quot;&gt;&lt;del&gt;SCXML-103&lt;/del&gt;&lt;/a&gt; Remove any catch (Throwable t) occurences:&lt;br/&gt;
Catch specific Exceptions/Errors rather than generic ones&lt;/p&gt;

&lt;p&gt;and trunk:&lt;br/&gt;
URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=731791&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=731791&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-103&quot; title=&quot;Remove any catch (Throwable t) occurences&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-103&quot;&gt;&lt;del&gt;SCXML-103&lt;/del&gt;&lt;/a&gt; Remove any catch (Throwable t) occurences:&lt;br/&gt;
Catch specific Exceptions/Errors rather than generic ones&lt;/p&gt;</comment>
                            <comment id="12661305" author="rahul@apache.org" created="Tue, 6 Jan 2009 20:47:29 +0000"  >&lt;p&gt;Great, thanks, please resolve / close as you see fit (generally, I resolve issues, then close all issues in one sweep when the fix version is released &amp;#8211; first fix version to be released if there are more than one).&lt;/p&gt;</comment>
                            <comment id="12661310" author="sebb@apache.org" created="Tue, 6 Jan 2009 20:51:28 +0000"  >&lt;p&gt;OK&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172759</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zy47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207829</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-101] &lt;datamodel&gt; not handled as global</title>
                <link>https://issues.apache.org/jira/browse/SCXML-101</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The SCXML spec says: &quot;Logically, there is a single globally visible data model for the entire state machine. As an authoring convenience, however, we allow &amp;lt;datamodel&amp;gt; as a child of any &amp;lt;state&amp;gt;, thus allowing parts of the data model to be distributed throughout the document closer to the locations where the data will be accessed. However, all instances of the &amp;lt;data&amp;gt; element are created and initialized when the state machine is instantiated and may be accessed from any state at any time.&quot; &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;There are two issues:&lt;/p&gt;

&lt;p&gt;1) The current impl of commons-scxml introduced a scoping, such that &amp;lt;data&amp;gt; in &amp;lt;datamodel&amp;gt; elements contained within a &amp;lt;state&amp;gt; are only visible in this state and its children (due to context chain). I.e. the &amp;lt;datamodel&amp;gt; is not entirely global.&lt;/p&gt;

&lt;p&gt;2) Initialization of &amp;lt;datamodel&amp;gt;&apos;s contained in a &amp;lt;state&amp;gt; (i.e. non-root-datamodels) take place while entering the corresponding state for the first time while creating the context (SCXMLInstance#getContext()). But initialization of &amp;lt;data&amp;gt; elements has to take place at state machine initialization time.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/TR/scxml/#datamodel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/scxml/#datamodel&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12410483">SCXML-101</key>
            <summary>&lt;datamodel&gt; not handled as global</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Dec 2008 15:18:09 +0000</created>
                <updated>Sun, 10 Dec 2017 21:41:56 +0000</updated>
                            <resolved>Sun, 10 Dec 2017 21:41:56 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12655694" author="rahul@apache.org" created="Thu, 11 Dec 2008 16:45:13 +0000"  >&lt;p&gt;Setting fix version to v0.10 but some of this actually needs more clarification. Regarding the two issues you mention:&lt;/p&gt;

&lt;p&gt;1) Its fairly easy to produce a flat datamodel actually. The API is designed so that many flavors of flat or heirarchical data modeling in possible with the Commons SCXML library. The default, as you mention, is closer to what you&apos;d expect in procedural languages (equivalent to block scopes where a child has access to the parent&apos;s data space). The place where the decision gets made is in Evaluator#newContext(Context), here it is in the v0.9 Javadoc (long URL):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://commons.apache.org/scxml/0.9/apidocs/org/apache/commons/scxml/Evaluator.html#newContext(org.apache.commons.scxml.Context&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/scxml/0.9/apidocs/org/apache/commons/scxml/Evaluator.html#newContext(org.apache.commons.scxml.Context&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;The evaluator implementations by default return a new context, but if the same context is returned (which is also the root context) one will end up with a flat datamodel.&lt;/p&gt;

&lt;p&gt;2) We should probably revisit the language in the spec. For large statemachines (with many states), the creation of all datamodels at initialization does seem like bloat. Moreover, when we have such state machines, usually any one single execution will only traverse a limited number of states. The JIT (just-in-time) approach Commons SCXML takes is quite effective and efficient in this regard.&lt;/p&gt;

</comment>
                            <comment id="13824710" author="woon_san" created="Sun, 17 Nov 2013 02:10:27 +0000"  >&lt;p&gt;For the record, in the latest version of the spec, the part assisting the first issue seems to have been removed. &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
So, I assume the scoping is up to implementations.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/TR/2013/WD-scxml-20130801/#datamodel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/2013/WD-scxml-20130801/#datamodel&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14317143" author="adouma" created="Wed, 11 Feb 2015 22:48:20 +0000"  >&lt;p&gt;Some of the W3C specification implementation test &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; actually do check and require a &apos;flat&apos; or global datamodel.&lt;br/&gt;
To allow enforcing and passing these tests, I&apos;ll add an option to SCXMLExecutor to restrict usage of a &apos;single&apos; Context, e.g. scxmlExecutor.setSingleContext(boolean)&lt;br/&gt;
The default of course remains using hierarchical contexts. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/Voice/2013/scxml-irp/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/Voice/2013/scxml-irp/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14317153" author="adouma" created="Wed, 11 Feb 2015 22:53:30 +0000"  >&lt;p&gt;The early vs lazy initialization as defined by the specification is not yet covered properly, so I&apos;ll leave this issue open for now to be resolved later.&lt;/p&gt;</comment>
                            <comment id="14317357" author="adouma" created="Thu, 12 Feb 2015 01:34:36 +0000"  >&lt;p&gt;I just noticed the global datamodel (scxml root &amp;lt;datamodel&amp;gt; element) was initialized and stored in the &lt;b&gt;root&lt;/b&gt; context, not the &lt;b&gt;global&lt;/b&gt; context (also and only) used as &lt;b&gt;single&lt;/b&gt; context.&lt;br/&gt;
I&apos;ve updated this to now also (always) use the global context, which broke several unit tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
To still allow and provide access to the initial &amp;lt;datamodel&amp;gt; data, I&apos;ve added access to the global context from the SCXMLExecutor.&lt;/p&gt;

&lt;p&gt;NB: any current (external) usage of Commons SCXML expecting these to still be available from the root context will have to be updated to use this global context instead.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172757</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a53b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267291</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-100] Support _event variable</title>
                <link>https://issues.apache.org/jira/browse/SCXML-100</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The SCXML spec defines a variable &quot;_event&quot; which is is bound to a structure containing the event name and payload:&lt;/p&gt;

&lt;p&gt;_event.name&lt;br/&gt;
_event.data&lt;/p&gt;

&lt;p&gt;The &quot;_event&quot; variable has to be read-only (from application point of view).&lt;/p&gt;

&lt;p&gt;This change will break backward compatibility of existing SCXML documents. Would it be useful to keep the current variable &quot;_eventdata&quot; while adding the &quot;_event&quot; structure? &quot;_eventdata&quot; could be marked as depricated and removed later.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12410413">SCXML-100</key>
            <summary>Support _event variable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="woon_san">Woonsan Ko</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Dec 2008 23:16:42 +0000</created>
                <updated>Fri, 2 Jan 2015 20:16:30 +0000</updated>
                            <resolved>Thu, 2 Jan 2014 20:28:31 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12655452" author="rahul@apache.org" created="Thu, 11 Dec 2008 01:17:45 +0000"  >&lt;p&gt;I think deprecating _eventdata until v1.0 (and then removing it) might be a good way to proceed.&lt;/p&gt;

&lt;p&gt;Setting fix version to next release, v0.10.&lt;/p&gt;</comment>
                            <comment id="13829478" author="woon_san" created="Thu, 21 Nov 2013 23:40:18 +0000"  >&lt;p&gt;Just for the record, since 20080516 &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, _eventdata seems to have been replaced by _event variable.&lt;br/&gt;
For scxml document compatibility, I think SCXMLExecutor set both _event (and _event.data) and _eventdata, and possibly it can log warning on accesses to the deprecated _eventdata access.&lt;br/&gt;
(By the way, _eventdata is equivalent to _event.data, not to _event itself.)&lt;/p&gt;

&lt;p&gt;And let&apos;s deal with the readonly system variable support separately in &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-99&quot; title=&quot;Support read-only system variables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-99&quot;&gt;&lt;del&gt;SCXML-99&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/TR/2008/WD-scxml-20080516/#SystemVariables&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/2008/WD-scxml-20080516/#SystemVariables&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13839796" author="woon_san" created="Thu, 5 Dec 2013 04:28:32 +0000"  >&lt;p&gt;Just added &apos;_event&apos; system variable which supports _event.name and _event.data for now. (currently _event.type always returns &apos;internal&apos; at this moment.)&lt;br/&gt;
Still TO-DO: determine type, sendid, origin and origintype based on context&lt;/p&gt;</comment>
                            <comment id="13860713" author="woon_san" created="Thu, 2 Jan 2014 20:20:55 +0000"  >&lt;p&gt;Translated TriggerEvent.ERROR_EVENT and TriggerEvent.CHANGE_EVENT into &apos;platform&apos; type event variables, and all the others into &apos;external&apos; type event variables based on the spec 5.10.1.&lt;/p&gt;

&lt;p&gt;By the way, because the current Send model for &amp;lt;send&amp;gt; element doesn&apos;t support any target attribute values yet, we can&apos;t support &apos;internal&apos; event variables either. Also, if we want to support determination of &apos;sendid&apos;, &apos;origin&apos; and &apos;origintype&apos; based on the context, we need to refactor many parts.&lt;br/&gt;
So, I&apos;ll create a separate issue for the refactoring for the future release (2.1 or later) and resolve this issue.&lt;/p&gt;</comment>
                            <comment id="13860725" author="woon_san" created="Thu, 2 Jan 2014 20:28:23 +0000"  >&lt;p&gt;Most important features, _event.name, _event.type (partially) and _event.data, are supported now.&lt;br/&gt;
The others will be covered with a separate issue, &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-185&quot; title=&quot;Support all the fields of _event variable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-185&quot;&gt;&lt;del&gt;SCXML-185&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                            <outwardlinks description="contains">
                                        <issuelink>
            <issuekey id="12430393">SCXML-110</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12687034">SCXML-185</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172756</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 43 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a53j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267292</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-99] Support read-only system variables</title>
                <link>https://issues.apache.org/jira/browse/SCXML-99</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The SCXML WD &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; describes a set of system variables which are read-only for the application. See section 5.5 &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;: &quot;The Data Module maintains a protected portion of the data model containing information that may be useful to applications....&quot;&lt;/p&gt;

&lt;p&gt;It may necessary to abstract out the notion of a partitioned root context, just like we have a notion of ordinary context.&lt;/p&gt;

&lt;p&gt;The implementation should take into account, that some expression languages support read-only behaviors natively (such as ECMAScript through scope chains), whereas other expression languages (or there implementations resp.) don&apos;t. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/TR/2008/WD-scxml-20080516/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/2008/WD-scxml-20080516/&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/TR/2008/WD-scxml-20080516/#SystemVariables&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/2008/WD-scxml-20080516/#SystemVariables&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12410409">SCXML-99</key>
            <summary>Support read-only system variables</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Dec 2008 22:30:29 +0000</created>
                <updated>Thu, 9 Apr 2015 13:48:46 +0000</updated>
                            <resolved>Sun, 30 Mar 2014 19:20:14 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12655404" author="rahul@apache.org" created="Wed, 10 Dec 2008 23:03:08 +0000"  >&lt;p&gt;Thanks, further Ideas, or patches welcome.&lt;/p&gt;

&lt;p&gt;Tentatively setting fix version to next release.&lt;/p&gt;</comment>
                            <comment id="13954806" author="adouma" created="Sun, 30 Mar 2014 19:12:59 +0000"  >&lt;p&gt;The latest SCXML specification now is at: &lt;a href=&quot;http://www.w3.org/TR/2014/CR-scxml-20140313/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/2014/CR-scxml-20140313/&lt;/a&gt;&lt;br/&gt;
and the reference to the section about system variables: &lt;a href=&quot;http://www.w3.org/TR/2014/CR-scxml-20140313/#SystemVariables&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/2014/CR-scxml-20140313/#SystemVariables&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m introducing a new SCXMLSystemContext, which is a wrapper around a normal Context, which protects the system variables against modification.&lt;br/&gt;
This SCXMLSystemContext will be injected between the rootContext (for external context data) and the globalContext (the base context for internal data).&lt;/p&gt;

&lt;p&gt;I&apos;ll also add the required _sessionid and _name system variables.&lt;br/&gt;
Furthermore, I&apos;ll now drop the old and custom _eventdata and _eventdatamap variables. &lt;/p&gt;

&lt;p&gt;Which results in only the _ioprocessors system variable not yet provided, but that&apos;ll be a different story/issue to deal with.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172755</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 31 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a53r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267293</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-98] TestCases should use SCXMLParser</title>
                <link>https://issues.apache.org/jira/browse/SCXML-98</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The SCXMLParser implements the latest SCXML parsing rules, whereas the SCXMLDigester is deprecated. But a lot of testcases still rely on the SCXMLDigester (indirectly) by using SCXMLTestHelper::getExecutor(url). The testHelper implementation should use the SCXMLParser.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12409683">SCXML-98</key>
            <summary>TestCases should use SCXMLParser</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Dec 2008 21:33:35 +0000</created>
                <updated>Wed, 17 Dec 2008 03:33:20 +0000</updated>
                            <resolved>Wed, 17 Dec 2008 03:33:20 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12652964" author="rahul@apache.org" created="Wed, 3 Dec 2008 20:38:16 +0000"  >&lt;p&gt;We already do that in the J6 branch:  &lt;a href=&quot;http://svn.apache.org/repos/asf/commons/proper/scxml/branches/J6/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/commons/proper/scxml/branches/J6/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We do some of that in trunk (newer tests use the SCXMLParser). It might be better to port most of the tests to use the SCXMLParser as you say, but I&apos;d leave a couple for the SCXMLDigester as well (we want to test it even if its deprecated, until it is removed in v1.0).&lt;/p&gt;

&lt;p&gt;Please provide a patch to move more tests in trunk to using the SCXMLParser if possible (necessary changes to the test cases can be seen in the J6 branch, so its mostly a matter of porting changes to trunk).&lt;/p&gt;

&lt;p&gt;Tentatively setting fix version to next release v0.10.&lt;/p&gt;</comment>
                            <comment id="12652996" author="ingmar" created="Wed, 3 Dec 2008 22:04:55 +0000"  >&lt;p&gt;I agree that we should leave a couple of test cases for the digester. My proposal is&lt;/p&gt;

&lt;p&gt;1) to change the getExecutor() implementations (of SCXMLTestHelper) to use the parser and &lt;br/&gt;
2) to move all digester test cases into the single (specifically named) &quot;SCXMLDigesterTest&quot; class&lt;/p&gt;

&lt;p&gt;We may want to implement the same test cases (which we leave for the digester) for the parser. Would we want to have separate SCXML documents in this case for the digester and the parser test cases (i.e. a microwave01_digester.xml and a microwave01.xml)?&lt;/p&gt;</comment>
                            <comment id="12653019" author="rahul@apache.org" created="Wed, 3 Dec 2008 22:44:53 +0000"  >&lt;p&gt;Thanks for the concrete proposal.&lt;br/&gt;
1) Yes, we&apos;d use SCXMLTestHelper#parse() methods instead of corresponding #digest() methods. The SCXML test documents may need corresponding tweaks as well.&lt;br/&gt;
2) Yes, but we already have such a class so we&apos;d change it as needed: &lt;a href=&quot;http://svn.apache.org/repos/asf/commons/proper/scxml/trunk/src/test/java/org/apache/commons/scxml/io/SCXMLDigesterTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/commons/proper/scxml/trunk/src/test/java/org/apache/commons/scxml/io/SCXMLDigesterTest.java&lt;/a&gt;&lt;br/&gt;
And finally, if its only a couple of tests for the deprecated SCXMLDigester class, I don&apos;t mind the duplicate SCXML documents (obviously, we don&apos;t want to go from N documents to 2*N documents, but N+2 seems OK &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="12655667" author="ingmar" created="Thu, 11 Dec 2008 14:42:56 +0000"  >&lt;p&gt;SCXMLTestHelper#getExecutor() implementations now make use of the SCXMLParser. &lt;/p&gt;

&lt;p&gt;In some test cases I had to move &amp;lt;var&amp;gt; into the &quot;cs&quot; namespace and to add some &quot;initial&quot; attributes on compound states. The test case documents which are shared between parser and digester test cases make use of the &amp;lt;initial&amp;gt; tag instead of the initial attribute.&lt;/p&gt;</comment>
                            <comment id="12657274" author="rahul@apache.org" created="Wed, 17 Dec 2008 03:33:20 +0000"  >&lt;p&gt;Thanks, I&apos;ve applied a variant of the patch (I added two legacy documents in SVN rather than reuse the old ones with both versions of the parser &amp;#8211; this ensures that the newer versions don&apos;t have any legacy flavor to them).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12395841" name="SCXML-98.patch.txt" size="14064" author="ingmar" created="Thu, 11 Dec 2008 14:42:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172754</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zxc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207703</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-96] Match &quot;profile&quot; attributes of src-ed states</title>
                <link>https://issues.apache.org/jira/browse/SCXML-96</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;SCXML state machines can be composed using refereces to external files (&amp;lt;state src=&quot;...&quot;&amp;gt;). Presumably the &quot;profile&quot; attribute of the referenced file would have to be matched against the referencing documents profile for compatibility reasons. The exact behavior needs to be defined by the SCXML spec. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12409309">SCXML-96</key>
            <summary>Match &quot;profile&quot; attributes of src-ed states</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Nov 2008 22:30:01 +0000</created>
                <updated>Sun, 16 Feb 2014 00:46:13 +0000</updated>
                            <resolved>Sun, 16 Feb 2014 00:46:13 +0000</resolved>
                                    <version>0.8</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12651579" author="rahul@apache.org" created="Fri, 28 Nov 2008 14:54:50 +0000"  >&lt;p&gt;Yup, this needs some more clarification so the fix version of v1.0 that you&apos;ve set here seems appropriate &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13902597" author="adouma" created="Sun, 16 Feb 2014 00:46:13 +0000"  >&lt;p&gt;See also &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-95&quot; title=&quot;profile attribute of &amp;lt;scxml&amp;gt;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-95&quot;&gt;&lt;del&gt;SCXML-95&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The SCXML datamodel attribute (although currently not yet supported) would be the more appropriate &apos;handle&apos; to ensure compatibility with external sourced configurations.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172752</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a53z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267294</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-94] &lt;assign&gt; does not support non-XML datamodels</title>
                <link>https://issues.apache.org/jira/browse/SCXML-94</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The current impl of &amp;lt;assign&amp;gt; still supports &quot;name&quot; and &quot;location&quot; attributes, which is not in line with the SCXML WD. SCXML only defines the &quot;location&quot; attribute.&lt;/p&gt;

&lt;p&gt;The impl of &amp;lt;assign&amp;gt; uses the evalLocation() function of the evaluator to determine the location and evalLocation() has to return a Node. But this does not work for non-XML datamodels. &lt;/p&gt;

&lt;p&gt;Non-XML datamodels worked using the &quot;name&quot; atribute (which used the set() function of the context). But the &quot;name&quot; attribute is no longer standardized. Thus &amp;lt;assign&amp;gt; only has the &quot;location&quot; attribute and  it needs to support XML and non-XML data models. &lt;/p&gt;

&lt;p&gt;The question is, whether &amp;lt;assign&amp;gt; should manipulate the DOM tree or whether it is the responsibility of the context to manipulate the data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12409307">SCXML-94</key>
            <summary>&lt;assign&gt; does not support non-XML datamodels</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Nov 2008 22:13:15 +0000</created>
                <updated>Sat, 15 Nov 2014 03:35:07 +0000</updated>
                            <resolved>Sat, 15 Nov 2014 03:35:06 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12651576" author="rahul@apache.org" created="Fri, 28 Nov 2008 14:48:41 +0000"  >&lt;p&gt;The location attribute value is supposed to be a &apos;location expression&apos;. We could collapse the two attribute semantics , so if evalLocation() doesn&apos;t return a Node, we can apply the same semantics that the name attribute currently has (look for an existing &apos;variable&apos; in the context to set). Will need some verification that we&apos;ve covered all the &apos;name&apos; cases before we remove it.&lt;/p&gt;

&lt;p&gt;Setting fix version to v0.10.&lt;/p&gt;</comment>
                            <comment id="14213327" author="adouma" created="Sat, 15 Nov 2014 03:35:06 +0000"  >&lt;p&gt;This should now be fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-213&quot; title=&quot;Fixing the datamodel handling - reimplement xpath processing, the Data() function and the &amp;lt;assign&amp;gt; action&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-213&quot;&gt;&lt;del&gt;SCXML-213&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12750642">SCXML-213</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12750642">SCXML-213</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172750</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a54f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267296</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-93] SCXMLTestHelper generates a lot of serialisation files which are not tidied up</title>
                <link>https://issues.apache.org/jira/browse/SCXML-93</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;SCXMLTestHelper generates files to test serialisation of classes in testExecutorSerializability() and testModelSerializability().&lt;/p&gt;

&lt;p&gt;These files are only used temporarily, but are not cleared up at the end of a run.&lt;br/&gt;
They can be replaced by using ByteArray classes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12409180">SCXML-93</key>
            <summary>SCXMLTestHelper generates a lot of serialisation files which are not tidied up</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Nov 2008 10:35:46 +0000</created>
                <updated>Tue, 9 Dec 2008 00:32:35 +0000</updated>
                            <resolved>Tue, 9 Dec 2008 00:32:35 +0000</resolved>
                                                    <fixVersion>0.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12650726" author="rahul@apache.org" created="Tue, 25 Nov 2008 20:35:53 +0000"  >&lt;p&gt;I think the aspect of tidying up here is no different from what folks using any of the builds should expect &amp;#8211; to elaborate, lets say you execute this command:&lt;/p&gt;

&lt;p&gt;  mvn test&lt;/p&gt;

&lt;p&gt;(or &apos;maven test&apos;, or &apos;ant&apos;), you&apos;ll find a bunch of artifacts created in the target directory. These persist until you clean the build, so in the above case a:&lt;/p&gt;

&lt;p&gt;  mvn clean&lt;/p&gt;

&lt;p&gt;will do the trick. The serialization files follow a similar pattern, they can be cleaned using the corresponding clean command.&lt;/p&gt;

&lt;p&gt;A useful advantage of using File I/O is that the artifacts can be introspected once you run the tests and you can observe how certain changes to the datamodel or history affect size on disk etc.&lt;/p&gt;

&lt;p&gt;You are right that this can be replaced by using ByteArray I/O instead, but at this point its unclear we should (its much harder to introspect serializations or track serialization timelines that way).&lt;/p&gt;

&lt;p&gt;Resolving as Won&apos;t Fix.&lt;/p&gt;</comment>
                            <comment id="12650965" author="sebb@apache.org" created="Wed, 26 Nov 2008 11:39:48 +0000"  >&lt;p&gt;Yes, testing generates other artifacts, however these are regenerated for each run - they don&apos;t normally accumulate as in this case.&lt;/p&gt;

&lt;p&gt;There&apos;s also no easy way to tie the file to the test case, so I don&apos;t see what purpose is served by keeping the files.&lt;br/&gt;
If you really want to keep the files, name them after the testcases that use them. At least then the number of files would be limited.&lt;/p&gt;</comment>
                            <comment id="12651128" author="rahul@apache.org" created="Wed, 26 Nov 2008 20:00:43 +0000"  >&lt;p&gt;When running a single (problematic or new) test at a time, as I prefer to do, its actually not difficult to locate serialization artifacts (they are usually &amp;lt; 5 per test, and timestamp order corresponds to document order of serialization).&lt;/p&gt;

&lt;p&gt;I agree on accumulation, and since you insist on this, I don&apos;t mind those bits being redone such that we use names that match the testcases etc. I agree its an improvement since the number would be limited on a complete run (or many runs) as you say above.&lt;/p&gt;

&lt;p&gt;However, its not something I personally care to do (which is why the Won&apos;t Fix before).&lt;/p&gt;

&lt;p&gt;So I&apos;m setting the fix version to 1.0 (which currently means &apos;some time in the future if a well-tested patch appears on this ticket&apos;).&lt;/p&gt;</comment>
                            <comment id="12654002" author="sebb@apache.org" created="Sat, 6 Dec 2008 00:27:41 +0000"  >&lt;p&gt;It&apos;s not too difficult to walk the call stack to find a calling method with the name textXXX, but this does not uniquely identify all usages.&lt;/p&gt;

&lt;p&gt;So I suggest just replacing the millisecond stamp (which is not necessarily unique, by the way) with a simple int counter.&lt;br/&gt;
This can be a static (class) variable. If the test is re-run without reloading the class, then the counter will increase, but at least repeated &quot;mvn test&quot; runs won&apos;t create lots of files.&lt;/p&gt;

&lt;p&gt;Is that OK?&lt;/p&gt;</comment>
                            <comment id="12654008" author="sebb@apache.org" created="Sat, 6 Dec 2008 01:06:18 +0000"  >&lt;p&gt;Patch to replace millisecond suffix with integer suffix to reduce number of files generated (and ensure uniqueness)&lt;/p&gt;</comment>
                            <comment id="12654297" author="rahul@apache.org" created="Mon, 8 Dec 2008 04:13:52 +0000"  >&lt;p&gt;Patch looks good, thanks. As a minor nit, I&apos;ll request that you add the static int and the new method towards the top where the constants for the serialization tests are defined.&lt;/p&gt;</comment>
                            <comment id="12654651" author="sebb@apache.org" created="Tue, 9 Dec 2008 00:02:08 +0000"  >&lt;p&gt;Updated location for int and method&lt;/p&gt;</comment>
                            <comment id="12654662" author="rahul@apache.org" created="Tue, 9 Dec 2008 00:16:49 +0000"  >&lt;p&gt;It would&apos;ve been fine to just apply this one &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; (atleast thats what I intended to say in the last comment)&lt;/p&gt;

&lt;p&gt;Updating fix version to v0.10 since a patch is now available (I&apos;m assuming you&apos;ll commit and resolve this).&lt;/p&gt;</comment>
                            <comment id="12654666" author="sebb@apache.org" created="Tue, 9 Dec 2008 00:32:35 +0000"  >&lt;p&gt;Fixed in trunk:&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=724565&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=724565&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-93&quot; title=&quot;SCXMLTestHelper generates a lot of serialisation files which are not tidied up&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-93&quot;&gt;&lt;del&gt;SCXML-93&lt;/del&gt;&lt;/a&gt;: SCXMLTestHelper generates a lot of serialisation files which are not tidied up&lt;/p&gt;

&lt;p&gt;and in branch J6:&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=724567&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=724567&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-93&quot; title=&quot;SCXMLTestHelper generates a lot of serialisation files which are not tidied up&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-93&quot;&gt;&lt;del&gt;SCXML-93&lt;/del&gt;&lt;/a&gt;: SCXMLTestHelper generates a lot of serialisation files which are not tidied up&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12395606" name="SCXMLTestHelper2.patch" size="1483" author="sebb" created="Tue, 9 Dec 2008 00:02:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zy53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207833</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-92] Incorrect log level for entry/exit trace etc</title>
                <link>https://issues.apache.org/jira/browse/SCXML-92</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Many of the classes use INFO level for what appear to be DEBUG level information.&lt;/p&gt;

&lt;p&gt;For example, SCXMLListener#onEntry() uses INFO level to log the state parameter. Such logs should be reduced to DEBUG level.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12409178">SCXML-92</key>
            <summary>Incorrect log level for entry/exit trace etc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Nov 2008 10:06:58 +0000</created>
                <updated>Mon, 5 Jan 2009 23:25:09 +0000</updated>
                            <resolved>Mon, 5 Jan 2009 20:49:03 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.10</fixVersion>
                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12650723" author="rahul@apache.org" created="Tue, 25 Nov 2008 20:30:46 +0000"  >&lt;p&gt;There is nothing really incorrect about the log level. If anything, it reflects more on the choices made that make development easier for a particular style. I prefer to run individual tests in my IDE (and especially so when I add tests or when tests fail), and the additional output to console about the progress of the state machine upto the point of failure is very helpful. When I run the entire test suite, the output does not annoy me because I&apos;m mostly interested in overall success or failure rather than the nitty gritty of individual tests. Seems like a matter of taste to me.&lt;/p&gt;

&lt;p&gt;Also note that such copious output doesn&apos;t automatically appear on production boxes because you actively choose to attach listeners you want (the tests use listeners that choose to log at info).&lt;/p&gt;

&lt;p&gt;Resolving as Won&apos;t Fix.&lt;/p&gt;</comment>
                            <comment id="12652961" author="rahul@apache.org" created="Wed, 3 Dec 2008 20:26:16 +0000"  >&lt;p&gt;Closing since 0.9 is released.&lt;/p&gt;</comment>
                            <comment id="12660806" author="sebb@apache.org" created="Mon, 5 Jan 2009 16:19:34 +0000"  >&lt;p&gt;How about adding properties to the Surefire configuration to reduce the test output?&lt;/p&gt;

&lt;p&gt;These would only apply when using &quot;mvn test&quot; - i.e. would not affect IDE testing output as far as I can tell.&lt;/p&gt;

&lt;p&gt;I&apos;ve tried the following and it works well for me:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;systemProperties&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;org.apache.commons.logging.Log&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;org.apache.commons.logging.impl.SimpleLog&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;org.apache.commons.logging.simplelog.defaultlog&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;warn&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;
&amp;lt;/systemProperties&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12660891" author="rahul@apache.org" created="Mon, 5 Jan 2009 20:07:54 +0000"  >&lt;p&gt;This sounds like a good solution. Please go ahead and I&apos;ll try it out once its in SVN.&lt;/p&gt;

&lt;p&gt;Setting fix versions to next releases from trunk and J6 branch.&lt;/p&gt;</comment>
                            <comment id="12660906" author="sebb@apache.org" created="Mon, 5 Jan 2009 20:34:10 +0000"  >&lt;p&gt;Fixed in trunk:&lt;br/&gt;
URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=731692&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=731692&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-92&quot; title=&quot;Incorrect log level for entry/exit trace etc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-92&quot;&gt;&lt;del&gt;SCXML-92&lt;/del&gt;&lt;/a&gt; - reduce logging when running full test suite&lt;/p&gt;

&lt;p&gt;and J6:&lt;br/&gt;
URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=731693&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=731693&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-92&quot; title=&quot;Incorrect log level for entry/exit trace etc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-92&quot;&gt;&lt;del&gt;SCXML-92&lt;/del&gt;&lt;/a&gt; - reduce logging when running full test suite&lt;/p&gt;</comment>
                            <comment id="12660916" author="rahul@apache.org" created="Mon, 5 Jan 2009 20:49:00 +0000"  >&lt;p&gt;I changed the XML formatting to match your comment above, I like that better and matches the style in the poms. Also works well for me so resolving as fixed &amp;#8211; thanks for fixing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172748</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 44 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208099</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-91] Test case bugs</title>
                <link>https://issues.apache.org/jira/browse/SCXML-91</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Test cases are difficult to debug if they fail.&lt;/p&gt;

&lt;p&gt;This is because many test cases catch Exception, and don&apos;t report it fully.&lt;br/&gt;
Test cases should only catch a (specific) Exception if the test is expected to generate one, and should otherwise throw the Exception.&lt;/p&gt;

&lt;p&gt;Several test cases report problems to System.out or System.err and carry on processing.&lt;br/&gt;
For example, serialisation errors are largely ignored, and SCXMLTestHelper#testExecutorSerializability() ignores IO errors.&lt;/p&gt;

&lt;p&gt;Testing generates a lot of output, some of which appears to be errors (e.g. stack traces) yet the test passes.&lt;br/&gt;
Ideally tests should suppress output stack traces which are expected during testing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12409177">SCXML-91</key>
            <summary>Test case bugs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Nov 2008 10:02:46 +0000</created>
                <updated>Sun, 16 Feb 2014 01:12:49 +0000</updated>
                            <resolved>Wed, 7 Jan 2009 20:47:45 +0000</resolved>
                                    <version>0.9</version>
                                    <fixVersion>0.10</fixVersion>
                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12650720" author="rahul@apache.org" created="Tue, 25 Nov 2008 20:20:40 +0000"  >&lt;p&gt;You&apos;ve mentioned three separable items, and I will respond in order:&lt;/p&gt;

&lt;p&gt;1) As mentioned on the dev list, we should fix the bit about catching exceptions only when expected for the particular test. I&apos;m setting a fix version of v0.10 on this issue for that.&lt;/p&gt;

&lt;p&gt;2) Regarding the System.err error reporting, especially for serialization failures, I contend that its doing its job. It is not a fatal error from the PoV of library code, its more like a configuration error if serialization is needed. The purpose is to draw attention of the person running the build by spewing to console, which it does well I think.&lt;/p&gt;

&lt;p&gt;3) The testing output is desired (more in &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-92&quot; title=&quot;Incorrect log level for entry/exit trace etc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-92&quot;&gt;&lt;del&gt;SCXML-92&lt;/del&gt;&lt;/a&gt; later) and the stack traces are unavoidable. Some time ago, Commons introduced code in various places that both logs an exception and rethrows it. We now know that it is not the best practice, but ofcourse legacy persists until someone does something about it. Here is a pointer to the particular traces we see in the Commons SCXML build (in this case, they are from Commons Digester):&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://commons.apache.org/digester/xref/org/apache/commons/digester/Digester.html#1455&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/digester/xref/org/apache/commons/digester/Digester.html#1455&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(above URL may become outdated over time since it refers to a line number in source code)&lt;/p&gt;</comment>
                            <comment id="12650962" author="sebb@apache.org" created="Wed, 26 Nov 2008 11:32:10 +0000"  >&lt;p&gt;1) OK&lt;/p&gt;

&lt;p&gt;2) There is so much output generated that it is possible to overlook the serialisation errors.&lt;br/&gt;
Also, a lot of this output is expected; it&apos;s tedious scanning through all of it.&lt;/p&gt;

&lt;p&gt;Perhaps a work-round would be to add a single test to check the serialisability of a known problematic class and report that as a failure.&lt;/p&gt;

&lt;p&gt;SCXMLTestHelper#testExecutorSerializability() should not ignore I/O errors.&lt;/p&gt;

&lt;p&gt;3) OK, I discovered this myself later.&lt;/p&gt;</comment>
                            <comment id="12651125" author="rahul@apache.org" created="Wed, 26 Nov 2008 19:51:50 +0000"  >&lt;p&gt;Regarding (2):&lt;/p&gt;

&lt;p&gt;As I mentioned, the copious output suits my style (of running one test at a time when digging into details) so I&apos;m in favor of retaining it.&lt;/p&gt;

&lt;p&gt;I mentioned on the dev list in the RC thread why the DOM serialization shouldn&apos;t be a test failure.&lt;/p&gt;

&lt;p&gt;Agree on the I/O errors (though we do print the trace IIRC).&lt;/p&gt;</comment>
                            <comment id="12651203" author="sebb@apache.org" created="Thu, 27 Nov 2008 00:46:23 +0000"  >&lt;p&gt;I would prefer to see minimal output when things are working well (Unix mindset perhaps, or maybe I&apos;m lazy) and be able to switch on additional trace only if required.&lt;br/&gt;
This would be easy enough to do by changing the default to debug level.&lt;/p&gt;</comment>
                            <comment id="12654005" author="sebb@apache.org" created="Sat, 6 Dec 2008 00:50:09 +0000"  >&lt;p&gt;Fixed item 2) I/O errors:&lt;/p&gt;

&lt;p&gt;Trunk:&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=723933&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=723933&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-91&quot; title=&quot;Test case bugs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-91&quot;&gt;&lt;del&gt;SCXML-91&lt;/del&gt;&lt;/a&gt; - SCXMLTestHelper#testExecutorSerializability() should not ignore I/O errors.&lt;/p&gt;

&lt;p&gt;J6 branch:&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=723934&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=723934&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-91&quot; title=&quot;Test case bugs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-91&quot;&gt;&lt;del&gt;SCXML-91&lt;/del&gt;&lt;/a&gt; - SCXMLTestHelper#testExecutorSerializability() should not ignore I/O errors.&lt;/p&gt;

&lt;p&gt;Changing the method to throw the errors would require lots of other changes.&lt;/p&gt;</comment>
                            <comment id="12654295" author="rahul@apache.org" created="Mon, 8 Dec 2008 04:08:57 +0000"  >&lt;p&gt;OK, so thats that for (2) and (3). Did you have anything else in mind for (1)?&lt;/p&gt;</comment>
                            <comment id="12654658" author="sebb@apache.org" created="Tue, 9 Dec 2008 00:12:52 +0000"  >&lt;p&gt;As to 1), what I had in mind was to change code of the form:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testInvoke01Sample() {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            SCXML scxml = SCXMLParser.parse(invoke01,
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleErrorHandler());
            exec = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SCXMLExecutor(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEvaluator(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleDispatcher(),
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleErrorReporter());
            assertNotNull(exec);
            exec.setRootContext(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlContext());
            exec.setStateMachine(scxml);
            exec.registerInvokerClass(&lt;span class=&quot;code-quote&quot;&gt;&quot;scxml&quot;&lt;/span&gt;, SimpleSCXMLInvoker.class);
            exec.go();
            Set&amp;lt;TransitionTarget&amp;gt; currentStates = exec.getCurrentStatus().getStates();
            assertEquals(1, currentStates.size());
            assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;invoker&quot;&lt;/span&gt;, currentStates.iterator().next().getId());
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
            e.printStackTrace();
            fail(e.getMessage());
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testInvoke01Sample() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        SCXML scxml = SCXMLParser.parse(invoke01,
            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleErrorHandler());
        exec = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SCXMLExecutor(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlEvaluator(), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleDispatcher(),
            &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SimpleErrorReporter());
        assertNotNull(exec);
        exec.setRootContext(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JexlContext());
        exec.setStateMachine(scxml);
        exec.registerInvokerClass(&lt;span class=&quot;code-quote&quot;&gt;&quot;scxml&quot;&lt;/span&gt;, SimpleSCXMLInvoker.class);
        exec.go();
        Set&amp;lt;TransitionTarget&amp;gt; currentStates = exec.getCurrentStatus().getStates();
        assertEquals(1, currentStates.size());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;invoker&quot;&lt;/span&gt;, currentStates.iterator().next().getId());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;As to 2), I still think it would be sensible to report at least one test failure if the test environment does not allow all the tests to be completed successfully.&lt;/p&gt;</comment>
                            <comment id="12654665" author="rahul@apache.org" created="Tue, 9 Dec 2008 00:27:14 +0000"  >&lt;p&gt;Please go ahead with any changes for (1) such as in the comment above.&lt;/p&gt;

&lt;p&gt;As to (2), I&apos;m afraid we&apos;re going around in circles and nothing new has been said since the thread on dev@.&lt;/p&gt;</comment>
                            <comment id="12660430" author="sebb@apache.org" created="Sat, 3 Jan 2009 00:41:38 +0000"  >&lt;p&gt;Patches for 1) applied to trunk and J6&lt;/p&gt;</comment>
                            <comment id="12660442" author="rahul@apache.org" created="Sat, 3 Jan 2009 04:55:24 +0000"  >&lt;p&gt;Thanks, if you&apos;re happy with the changes for (1), I think we can resolve this issue now.&lt;/p&gt;</comment>
                            <comment id="12660460" author="sebb@apache.org" created="Sat, 3 Jan 2009 11:47:12 +0000"  >&lt;p&gt;SCXMLTestHelper still contains quite a few catch blocks that merely call fail().&lt;/p&gt;

&lt;p&gt;These still need looking at to see if they can be replaced by throws clauses.&lt;/p&gt;</comment>
                            <comment id="12660740" author="sebb@apache.org" created="Mon, 5 Jan 2009 12:53:31 +0000"  >&lt;p&gt;SCXMLTestHelper has now been updated in J6 to throw Exceptions:&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=731386&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=731386&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
Prepare for changes to SCXMLTestHelper&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=731387&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=731387&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
Remove try/catch blocks for Exceptions that are not expected in testing&lt;/p&gt;

&lt;p&gt;In trunk, the same changes have been made, except that DOM serialisation errors are allowed through&lt;br/&gt;
(which is closer to what I would like to see):&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=731393&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=731393&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
Prepare for changes to SCXMLTestHelper&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=731543&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=731543&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
Remove try/catch blocks for Exceptions that are not expected in testing&lt;br/&gt;
Improve non-serialisable check so it only allows DOM elements to fail&lt;/p&gt;</comment>
                            <comment id="12660887" author="rahul@apache.org" created="Mon, 5 Jan 2009 20:05:57 +0000"  >&lt;p&gt;Pasting some comments from the dev list in JIRA as well:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Comment #1:&lt;br/&gt;
The idea (verifying if the NSE is actually due to the DOM implementation) is good.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think this implementation (r731543) is fragile since:&lt;br/&gt;
(a) It relies on an exception message&lt;br/&gt;
(b) It only accounts for crimson, but in theory the package name could be anything (by virtue of the Java endorsed standards override mechanism)&lt;/p&gt;

&lt;p&gt;Lets retain the NSE catch blocks as before. Other changes look good.&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;Comment #2:&lt;br/&gt;
WRT the directory creation, if you&apos;d rather have the build fail if creation fails, there would ideally be a nice message stating the problem (rather than a generic x failures and y errors kind of thing) and additonally, there&apos;d be a build time switch that allows folks to say &quot;we don&apos;t care about serialization&quot; which would cause the build to succeed (this could also help the NSE catches you are looking at eliminating &amp;#8211; all NSEs could then cause tests to error out by default). So maybe the approach of providing such a switch helps both cases we&apos;re discussing.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12661381" author="rahul@apache.org" created="Tue, 6 Jan 2009 23:53:23 +0000"  >&lt;p&gt;Summarizing the dev list discussion (hopefully the crimson check will not require any more maintenance):&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;sebb wrote:&lt;br/&gt;
&amp;gt; but I think NSEs which are not caused by&lt;br/&gt;
&amp;gt; the faulty Sun 1.4 DOM should cause failures.&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;lt;snap/&amp;gt;&lt;/p&gt;

&lt;p&gt;OK, so what you added to trunk does that. I guess we can retain the crimson check as-is and keep refining it as and when it breaks with other obscure JDKs and configurations you and I haven&apos;t tested on.&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;Looks like the major items on this issue are addressed?&lt;/p&gt;</comment>
                            <comment id="12661406" author="sebb@apache.org" created="Wed, 7 Jan 2009 01:53:18 +0000"  >&lt;p&gt;Yes, I think the test output is a lot easier to follow, and hopefully more bugs will be caught as fewer errors are ignored.&lt;/p&gt;

&lt;p&gt;One minor tweak which might be worth considering would be to output messages to show which warning and error messages are expected, for example to print a message to say that the 2 stack traces are expected.&lt;/p&gt;</comment>
                            <comment id="12661453" author="rahul@apache.org" created="Wed, 7 Jan 2009 05:44:09 +0000"  >&lt;p&gt;My way of saying the exceptions are expected is to have the string &apos;404&apos; in the URLs that aren&apos;t meant to be found &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; (if folks read the exception messages in the trace)&lt;/p&gt;

&lt;p&gt;If you want to further improve any messages, please go ahead.&lt;/p&gt;</comment>
                            <comment id="12661684" author="sebb@apache.org" created="Wed, 7 Jan 2009 19:49:29 +0000"  >&lt;p&gt;I&apos;ve just realised that the stack dumps are part of the log message, so changing the log level to fatal (rather than warn) will eliminate these, and also eliminate the remaining non-essential output.&lt;/p&gt;

&lt;p&gt;I think that&apos;s the neatest solution overall - agreed?&lt;/p&gt;</comment>
                            <comment id="12661688" author="rahul@apache.org" created="Wed, 7 Jan 2009 20:03:34 +0000"  >&lt;p&gt;Sounds good.&lt;/p&gt;</comment>
                            <comment id="12661702" author="sebb@apache.org" created="Wed, 7 Jan 2009 20:47:45 +0000"  >&lt;p&gt;I think this can now finally be resolved!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172747</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zxev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207715</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-90] event attribute of &lt;send&gt; is not evaluated</title>
                <link>https://issues.apache.org/jira/browse/SCXML-90</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The &quot;event&quot;-Attribute of &amp;lt;send&amp;gt; is not evaluated. This is not in line with the SCXML WD.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12408910">SCXML-90</key>
            <summary>event attribute of &lt;send&gt; is not evaluated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Nov 2008 15:05:35 +0000</created>
                <updated>Wed, 3 Dec 2008 20:26:16 +0000</updated>
                            <resolved>Fri, 21 Nov 2008 16:40:40 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12649397" author="rahul@apache.org" created="Thu, 20 Nov 2008 16:07:03 +0000"  >&lt;p&gt;This will be a breaking change, but given that the previous behavior is incorrect, I think it makes sense to change for v0.9 with a prominent remark about this in the release notes.&lt;/p&gt;</comment>
                            <comment id="12649702" author="rahul@apache.org" created="Fri, 21 Nov 2008 16:40:40 +0000"  >&lt;p&gt;This has been fixed in SVN trunk. If possible, please build trunk and verify.&lt;/p&gt;</comment>
                            <comment id="12649709" author="ingmar" created="Fri, 21 Nov 2008 17:13:13 +0000"  >&lt;p&gt;I checked out the fix and run the test cases and it worked for me.&lt;/p&gt;

&lt;p&gt;The only question I have: You check whether &quot;event&quot; evaluates to an empty &quot;eventValue&quot;:&lt;/p&gt;

&lt;p&gt;            if (SCXMLHelper.isStringEmpty(eventValue)&lt;br/&gt;
                    &amp;amp;&amp;amp; appLog.isWarnEnabled()) {&lt;br/&gt;
                appLog.warn(&quot;&amp;lt;send&amp;gt;: event expression \&quot;&quot; + event&lt;br/&gt;
                    + &quot;\&quot; evaluated to null or empty String&quot;);&lt;/p&gt;

&lt;p&gt;to log a warning message in this case. Because of a logging a &quot;warning&quot;, this case seems to be close to an error (at least when reading the log). But there are certainly valid usecases where the eventname is meaningless, e.g. an HTTP request:&lt;/p&gt;

&lt;p&gt;&amp;lt;send target=&quot;URL&quot; targettype=&quot;basichttp&quot; namelist=&quot;some params&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;In this case the implementation would log a warning. Should an empty eventname be a &quot;info&quot; or &quot;debug&quot; message instead? But this is just a minor comment.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12649722" author="rahul@apache.org" created="Fri, 21 Nov 2008 18:03:34 +0000"  >&lt;p&gt;You may have misread the change. An empty or absent event attribute will not generate any warning.&lt;/p&gt;

&lt;p&gt;A warning will be generated if and only if:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The event attribute has a value (that is not an empty string)&lt;/li&gt;
	&lt;li&gt;On evaluating the said value as an expression, the evaluator returns null or an empty string&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This is useful because we have changed behavior here (from a string to expression), and if people update to the next release and do not correct their SCXML documents to match, they will get these warnings.&lt;/p&gt;

&lt;p&gt;Finally, your HTTP example above should not generate a warning if you try it.&lt;/p&gt;</comment>
                            <comment id="12652960" author="rahul@apache.org" created="Wed, 3 Dec 2008 20:26:16 +0000"  >&lt;p&gt;Closing since 0.9 is released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172746</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208037</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-89] Assign.execute() doesn&apos;t remove all children of oldNode (includes fix)</title>
                <link>https://issues.apache.org/jira/browse/SCXML-89</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;This code, from Assign.execute(), seems to remove the oldNode child and &lt;b&gt;then&lt;/b&gt; ask for its next sibling, which returns null.  The result is to remove the first child, but leave the other children around, so that the result of &quot;Assign&quot; is a concatenation of all-but-one of the old nodes, followed by the new nodes.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;for (Node child = oldNode.getFirstChild();
   child != null;
   child = child.getNextSibling()) {
   oldNode.removeChild(child);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This (modified) code finds the next sibling before removal and produces the expected result.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;for (Node child = oldNode.getFirstChild(); child != null;) {
   Node nextChild = child.getNextSibling();
   oldNode.removeChild(child);
   child = nextChild;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I can supply a test case if that would be helpful.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 7.10 (64 bit), JRE ia32-java6-sun-1.6.0.03&lt;/p&gt;</environment>
        <key id="12408471">SCXML-89</key>
            <summary>Assign.execute() doesn&apos;t remove all children of oldNode (includes fix)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="joel.truher">joel truher</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Nov 2008 06:20:51 +0000</created>
                <updated>Wed, 3 Dec 2008 20:26:16 +0000</updated>
                            <resolved>Fri, 14 Nov 2008 23:51:15 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                                                    <timeoriginalestimate seconds="0">0h</timeoriginalestimate>
                            <timeestimate seconds="0">0h</timeestimate>
                                        <comments>
                            <comment id="12647699" author="rahul@apache.org" created="Fri, 14 Nov 2008 18:55:31 +0000"  >&lt;p&gt;Yup, needs fixing, setting fix version to v0.9 (next release). It will indeed be quite helpful if you can attach a patch &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; with an appropriate JUnit test case added to the existing test suite &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;. Thanks.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://commons.apache.org/patches.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/patches.html&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://commons.apache.org/scxml/junit-report.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/scxml/junit-report.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12647739" author="joel.truher" created="Fri, 14 Nov 2008 22:13:06 +0000"  >&lt;p&gt;Here&apos;s a patch with the fix and the test case.&lt;/p&gt;</comment>
                            <comment id="12647759" author="rahul@apache.org" created="Fri, 14 Nov 2008 23:51:15 +0000"  >&lt;p&gt;A variant of the patch has been applied to trunk and I&apos;ve added you to the list of contributors in r714191:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=714191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=714191&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If possible, please build the latest trunk and verify the fix.&lt;/p&gt;

&lt;p&gt;For patches, please provide the output of &apos;svn diff&apos; in a working copy of trunk (those are easier to apply). Thanks for this test case and patch.&lt;/p&gt;</comment>
                            <comment id="12647767" author="joel.truher" created="Sat, 15 Nov 2008 00:31:31 +0000"  >&lt;p&gt;verified on the trunk (svn 714196, last change 714191 Fri Nov 14 15:43:16 PST).  also ran a somewhat more extensive test within my app which independently verifies.&lt;/p&gt;

&lt;p&gt;thanks for the tips on diffs; i wasn&apos;t thinking about it.&lt;/p&gt;</comment>
                            <comment id="12652959" author="rahul@apache.org" created="Wed, 3 Dec 2008 20:26:16 +0000"  >&lt;p&gt;Closing since 0.9 is released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12393963" name="jira-89.diff" size="11028" author="joel.truher" created="Fri, 14 Nov 2008 22:13:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172745</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zza7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208018</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-88] SCXMLSerializer does not serialize custom namespace declarations</title>
                <link>https://issues.apache.org/jira/browse/SCXML-88</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The SCXMLSerializer writes the scxml namespace as the default namespace to the &amp;lt;scxml&amp;gt; root tag and adds a &quot;cs&quot; (&quot;commons-scxml&quot;) namespace by default.&lt;/p&gt;

&lt;p&gt;But it does not take into account that the original scxml document might contain other namespace declarations, e.g. on child tags:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; xmlns:cs=&quot;http://commons.apache.org/scxml&quot; version=&quot;1.0&quot; initial=&quot;S1&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;state id=&quot;S1&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;!-- some E4X like condition using XML namespaces --&amp;gt;&lt;br/&gt;
  &amp;lt;!-- redefine default namespace to &quot;foo&quot; and use explicit namespace prefix for scxml:transition tag --&amp;gt;&lt;br/&gt;
  &amp;lt;scxml:transition event=&quot;foo&quot; cond=&quot;a.b.bar::c.* == 3&quot; target=&quot;S2&quot; xmlns=&quot;foo&quot; xmlns:scxml=&quot;http://www.w3.org/2005/07/scxml&quot; xmlns:bar=&quot;bar&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;/transition&amp;gt;&lt;br/&gt;
 &amp;lt;/state&amp;gt;&lt;br/&gt;
 &amp;lt;state id=&quot;S2&quot; final=&quot;true&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;/state&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;The above SCXML document is parsed properly and namespaces are forwarded to the executor (i.e. it works correct).  But if it comes to serialization the namespaces are not serialized properly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12408063">SCXML-88</key>
            <summary>SCXMLSerializer does not serialize custom namespace declarations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Nov 2008 11:30:12 +0000</created>
                <updated>Wed, 3 Dec 2008 20:26:16 +0000</updated>
                            <resolved>Fri, 21 Nov 2008 21:12:11 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12645975" author="ingmar" created="Sat, 8 Nov 2008 11:38:49 +0000"  >&lt;p&gt;JUnit Testcase for using namespaces in transitions&lt;/p&gt;</comment>
                            <comment id="12646134" author="rahul@apache.org" created="Sun, 9 Nov 2008 23:50:04 +0000"  >&lt;p&gt;Setting fix version to v0.9.&lt;/p&gt;

&lt;p&gt;This is going to be interesting, since we don&apos;t retain namespace prefixes for all elements (only executable content, i.e. actions). I suspect we may have to make some recommendations (or, lay some restrictions, depending how one looks at it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; about this.&lt;/p&gt;</comment>
                            <comment id="12646500" author="ingmar" created="Tue, 11 Nov 2008 07:42:03 +0000"  >&lt;p&gt;And why not retaining namespace prefixes for all elements? This shouldn&apos;t be too much overhead.&lt;/p&gt;</comment>
                            <comment id="12646579" author="rahul@apache.org" created="Tue, 11 Nov 2008 16:04:34 +0000"  >&lt;p&gt;Could be quite significant actually. Maps have high overhead, especially when they are close to empty which these guys are (a map would perhaps be a logical choice, and thats what the digester gives us so its also least effort). I&apos;m leaning towards making some recommendations if folks want to use the serializer. I won&apos;t be able to look at this immediately, but if you (or anyone else) is able to whip up a patch, it can always be sooner. Thanks,&lt;/p&gt;</comment>
                            <comment id="12649796" author="rahul@apache.org" created="Fri, 21 Nov 2008 21:12:11 +0000"  >&lt;p&gt;I&apos;m marking this as fixed since the situation has now improved in the sense that it is possible to get the serializer to write out the custom declarations, but only within certain limitations.&lt;/p&gt;

&lt;p&gt;Those limitations are now clearly specified in the class Javadoc, which I have deployed to the site. See:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://commons.apache.org/scxml/apidocs/org/apache/commons/scxml/io/SCXMLSerializer.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/scxml/apidocs/org/apache/commons/scxml/io/SCXMLSerializer.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In order to not rely on the link above, I&apos;ll reproduce the limitations below:&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;NOTE: This serializer makes the following assumptions about the original SCXML document(s) parsed to create the object model: &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The default document namespace is the SCXML namespace: &lt;a href=&quot;http://www.w3.org/2005/07/scxml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/2005/07/scxml&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;The Commons SCXML namespace ( &lt;a href=&quot;http://commons.apache.org/scxml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/scxml&lt;/a&gt; ), if needed, uses the &quot;cs&quot; prefix&lt;/li&gt;
	&lt;li&gt;All namespace prefixes needed throughout the document are declared on the document root element (&amp;lt;scxml&amp;gt;)
&lt;hr /&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Your test case will still not work, unless you move the namespace declarations to the root &amp;lt;scxml&amp;gt; element.&lt;/p&gt;

&lt;p&gt;Ofcourse, ideally it should be possible to accomodate declarations anywhere in the document, but I contend that the focus of this library is the execution of state machines rather than the serialization of its object model. Furthermore, even though I do not intend to spend more time on this at the moment given that a workable solution is available within those limitations, if a patch were to become available that serialized the namespace declarations for transitions, actions etc. and included test cases to demonstrate correctness, we can revisit this.&lt;/p&gt;</comment>
                            <comment id="12652958" author="rahul@apache.org" created="Wed, 3 Dec 2008 20:26:16 +0000"  >&lt;p&gt;Closing since 0.9 is released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12393561" name="NamespacesInTransition_testcase.patch" size="3200" author="ingmar" created="Sat, 8 Nov 2008 11:38:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172744</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zyzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207969</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-87] Delayed events not passing payload</title>
                <link>https://issues.apache.org/jira/browse/SCXML-87</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;In the attached test case with delay = 0ms, the payload is delivered correctly.  When delay is set to a value &amp;gt; 0, the eventdata payload is null.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12408048">SCXML-87</key>
            <summary>Delayed events not passing payload</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="theduderog">Roger Hoover</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Nov 2008 23:41:36 +0000</created>
                <updated>Tue, 18 Nov 2008 00:46:04 +0000</updated>
                            <resolved>Fri, 14 Nov 2008 02:12:12 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12645913" author="theduderog" created="Fri, 7 Nov 2008 23:44:23 +0000"  >&lt;p&gt;Attaching test scxml file&lt;/p&gt;</comment>
                            <comment id="12646133" author="rahul@apache.org" created="Sun, 9 Nov 2008 23:43:56 +0000"  >&lt;p&gt;Setting fix version to v0.9, the next release (no release date yet).&lt;/p&gt;</comment>
                            <comment id="12647502" author="rahul@apache.org" created="Fri, 14 Nov 2008 02:12:12 +0000"  >&lt;p&gt;Thanks for the test case, this has been fixed in trunk (r713905). If possible, please build from trunk and verify the fix.&lt;/p&gt;</comment>
                            <comment id="12648444" author="theduderog" created="Tue, 18 Nov 2008 00:46:04 +0000"  >&lt;p&gt;Works great.  Thank you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12393540" name="eventdata.xml" size="1367" author="theduderog" created="Fri, 7 Nov 2008 23:44:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172743</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208024</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-86] Using initial attribute of state ends with IllegalArgumentException</title>
                <link>https://issues.apache.org/jira/browse/SCXML-86</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Parsing following state fails:&lt;/p&gt;

&lt;p&gt;&amp;lt;state id=&quot;parent&quot; initial=&quot;child&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;child&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;using &amp;lt;initial&amp;gt; works:&lt;/p&gt;

&lt;p&gt;&amp;lt;state id=&quot;parent&amp;gt;&lt;br/&gt;
  &amp;lt;initial&amp;gt;&lt;br/&gt;
    &amp;lt;transition target=&quot;child&quot;/&amp;gt;&lt;br/&gt;
  &amp;lt;/initial&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;child&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;I belive it is because when digester hits the parent state it does not know how to resolve IDREF to child, because it was not parsed yet. SCXML solve this by invoking #setInitialstate(String) on Rule#begin() and #setInitialTarget(TransitionTarget) later.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12407112">SCXML-86</key>
            <summary>Using initial attribute of state ends with IllegalArgumentException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alesd">Ales Dolecek</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Oct 2008 19:23:20 +0000</created>
                <updated>Wed, 3 Dec 2008 20:26:16 +0000</updated>
                            <resolved>Fri, 21 Nov 2008 21:57:50 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12643088" author="rahul@apache.org" created="Mon, 27 Oct 2008 22:48:36 +0000"  >&lt;p&gt;Setting fix version to next release (v0.9). Will take a look when I get a chance.&lt;/p&gt;</comment>
                            <comment id="12649818" author="rahul@apache.org" created="Fri, 21 Nov 2008 21:57:50 +0000"  >&lt;p&gt;This has been fixed in SVN trunk. We can already resolve IDREFs anywhere in the document, the support for the initial attribute simply wasn&apos;t added (it is now).&lt;/p&gt;

&lt;p&gt;If possible, please build trunk and verify.&lt;/p&gt;</comment>
                            <comment id="12652957" author="rahul@apache.org" created="Wed, 3 Dec 2008 20:26:16 +0000"  >&lt;p&gt;Closing since 0.9 is released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172742</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208033</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-83] SCXMLSerializer: errors on serialization of &lt;send&gt;</title>
                <link>https://issues.apache.org/jira/browse/SCXML-83</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The serialization of &amp;lt;send&amp;gt; is wrong:&lt;/p&gt;

&lt;p&gt;a) the &quot;event&quot; Attribule is serialized as &quot;events&quot;&lt;br/&gt;
b) non-existent attributes are serialized as &quot;null&quot; String&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;p&gt;&amp;lt;send event=&quot;foo&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;is serialized to&lt;/p&gt;

&lt;p&gt; &amp;lt;send sendid=&quot;null&quot; target=&quot;null&quot; targetType=&quot;null&quot; namelist=&quot;null&quot; delay=&quot;null&quot; events=&quot;foo&quot; hints=&quot;null&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;/send&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12401506">SCXML-83</key>
            <summary>SCXMLSerializer: errors on serialization of &lt;send&gt;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Aug 2008 19:12:53 +0000</created>
                <updated>Wed, 3 Dec 2008 20:26:15 +0000</updated>
                            <resolved>Tue, 18 Nov 2008 23:33:23 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12619096" author="ingmar" created="Fri, 1 Aug 2008 19:15:31 +0000"  >&lt;p&gt;A test case.&lt;/p&gt;</comment>
                            <comment id="12619140" author="rahul@apache.org" created="Fri, 1 Aug 2008 21:26:58 +0000"  >&lt;p&gt;Thanks for the report.&lt;/p&gt;

&lt;p&gt;I&apos;ve run out of time today so I just fixed the typo (events --&amp;gt; event). The null checks need to be added, I can get to it in a couple of weeks (I can apply a patch sooner if one becomes available).&lt;/p&gt;</comment>
                            <comment id="12619564" author="ingmar" created="Mon, 4 Aug 2008 16:05:50 +0000"  >&lt;p&gt;Hi Rahul,&lt;/p&gt;

&lt;p&gt;here&apos;s a proposal for a patch.&lt;/p&gt;</comment>
                            <comment id="12648811" author="rahul@apache.org" created="Tue, 18 Nov 2008 23:33:23 +0000"  >&lt;p&gt;Thanks a lot for the patch, this has been applied to the SVN trunk. If possible, please build trunk and verify.&lt;/p&gt;</comment>
                            <comment id="12649343" author="ingmar" created="Thu, 20 Nov 2008 11:43:41 +0000"  >&lt;p&gt;Works for me. Thanks!&lt;/p&gt;</comment>
                            <comment id="12652954" author="rahul@apache.org" created="Wed, 3 Dec 2008 20:26:15 +0000"  >&lt;p&gt;Closing since 0.9 is released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12387483" name="SCXMLSerializer_and_Testcase.patch" size="3217" author="ingmar" created="Mon, 4 Aug 2008 16:05:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172739</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208039</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-82] transition-element as an child of parallel-element ignored</title>
                <link>https://issues.apache.org/jira/browse/SCXML-82</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Hi Rahul,&lt;/p&gt;

&lt;p&gt;sorry - it&apos;s me again ...&lt;/p&gt;

&lt;p&gt;The current SCXML draft &lt;a href=&quot;http://www.w3.org/TR/scxml/#parallel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/scxml/#parallel&lt;/a&gt;&lt;br/&gt;
allows me to use transitions as an child of parallel-element.&lt;/p&gt;

&lt;p&gt;If I try this, the SCXML implemention ignores this transition.&lt;/p&gt;

&lt;p&gt;Maybe also a little bug ?&lt;/p&gt;

&lt;p&gt;Please refer to the patch attached to this bug (-:&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
Danny&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;
			&lt;ul&gt;
				&lt;li&gt;Start engagingTest()&lt;br/&gt;
go now&lt;br/&gt;
WARN - Ignoring element &amp;lt;transition&amp;gt; in namespace &quot;http://www.w3.org/2005/07/scxml&quot; at null:6:52 and digester match &quot;scxml/parallel/transition&quot;&lt;br/&gt;
INFO - /running&lt;br/&gt;
INFO - /running/state1&lt;br/&gt;
INFO - /running/state2&lt;br/&gt;
PASSED: engagingTest&lt;/li&gt;
			&lt;/ul&gt;
			&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Rahul said:&lt;br/&gt;
&amp;gt; Yes, in as much as not being implemented is a bug &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; This is another&lt;br/&gt;
&amp;gt; addition in the latest Working Draft which we haven&apos;t gotten to yet.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Can you open an improvement in JIRA? Please attach the smallest test&lt;br/&gt;
&amp;gt; case (test SCXML documents are good, but if you can attach a complete&lt;br/&gt;
&amp;gt; JUnit test case that&apos;d be even better &amp;#8211; see the src/test tree for&lt;br/&gt;
&amp;gt; existing tests for the codebase, you could name this one&lt;br/&gt;
&amp;gt; transitions-05.xml and place it here &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, for example).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12401385">SCXML-82</key>
            <summary>transition-element as an child of parallel-element ignored</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="danny70437">Daniel Schwager</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Jul 2008 08:13:11 +0000</created>
                <updated>Wed, 3 Dec 2008 20:26:15 +0000</updated>
                            <resolved>Tue, 18 Nov 2008 22:36:40 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12618623" author="danny70437" created="Thu, 31 Jul 2008 08:14:06 +0000"  >&lt;p&gt;changing testsuite for reproducing this bug&lt;/p&gt;</comment>
                            <comment id="12618730" author="rahul@apache.org" created="Thu, 31 Jul 2008 15:46:50 +0000"  >&lt;p&gt;Setting fix version to next release (v0.9).&lt;/p&gt;</comment>
                            <comment id="12647893" author="rahul@apache.org" created="Sat, 15 Nov 2008 20:39:12 +0000"  >&lt;p&gt;This has been fixed in the J6 branch (earlier), and needs to be backported to trunk, which I&apos;ll do next week.&lt;/p&gt;

&lt;p&gt;Also updating typo in subject.&lt;/p&gt;</comment>
                            <comment id="12648787" author="rahul@apache.org" created="Tue, 18 Nov 2008 22:36:40 +0000"  >&lt;p&gt;Thanks for the test, this has been fixed in trunk and a couple of test cases added.&lt;/p&gt;</comment>
                            <comment id="12652953" author="rahul@apache.org" created="Wed, 3 Dec 2008 20:26:15 +0000"  >&lt;p&gt;Closing since 0.9 is released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12387262" name="patch-transition05.diff" size="4213" author="danny70437" created="Thu, 31 Jul 2008 08:14:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172738</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208111</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-81] Bug in parallel state with onentry element</title>
                <link>https://issues.apache.org/jira/browse/SCXML-81</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Hi Rahul,&lt;/p&gt;

&lt;p&gt;in &amp;lt;parallel&amp;gt; section, a &amp;lt;onentry&amp;gt; element have to work also with context variables&lt;br/&gt;
(&lt;a href=&quot;http://www.w3.org/TR/scxml/#N102F2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/scxml/#N102F2&lt;/a&gt;) - but I got an exception like shown below.&lt;/p&gt;

&lt;p&gt;If I remove the log-statement in parallel.onentry, the fsm works fine ...&lt;/p&gt;

&lt;p&gt;It must be a bug - isn&apos;t it ?&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
Danny&lt;/p&gt;


&lt;p&gt;Rahul said:&lt;br/&gt;
&amp;gt; Looks like it. Originally, the spec didn&apos;t require (and therefore,&lt;br/&gt;
&amp;gt; Commons SCXML didn&apos;t implement) &amp;lt;onentry&amp;gt; / &amp;lt;onexit&amp;gt; children of&lt;br/&gt;
&amp;gt; &amp;lt;parallel&amp;gt;.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Please submit a smallest possible test case (and a patch, if you want)&lt;br/&gt;
&amp;gt; to the Commons SCXML project in JIRA. Thanks!&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; -Rahul&lt;/p&gt;</description>
                <environment></environment>
        <key id="12401358">SCXML-81</key>
            <summary>Bug in parallel state with onentry element</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="danny70437">Daniel Schwager</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Jul 2008 20:43:37 +0000</created>
                <updated>Wed, 3 Dec 2008 20:26:15 +0000</updated>
                            <resolved>Wed, 19 Nov 2008 16:08:34 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12618501" author="danny70437" created="Wed, 30 Jul 2008 20:48:10 +0000"  >&lt;p&gt;Testcase&lt;/p&gt;</comment>
                            <comment id="12618586" author="rahul@apache.org" created="Thu, 31 Jul 2008 02:28:53 +0000"  >&lt;p&gt;Thanks for the report, setting fix version to v0.9 (the next release).&lt;/p&gt;</comment>
                            <comment id="12649081" author="rahul@apache.org" created="Wed, 19 Nov 2008 16:08:34 +0000"  >&lt;p&gt;This has been fixed in SVN and a couple of new test cases have been added.&lt;/p&gt;</comment>
                            <comment id="12652952" author="rahul@apache.org" created="Wed, 3 Dec 2008 20:26:15 +0000"  >&lt;p&gt;Closing since 0.9 is released.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12387224" name="test.xml" size="407" author="danny70437" created="Wed, 30 Jul 2008 20:48:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172737</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208086</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-79] SCXMLSerializer: nested states have a &quot;parentid&quot; attribute</title>
                <link>https://issues.apache.org/jira/browse/SCXML-79</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Nested states appear to have a &quot;parentid&quot; attribute (which is not defined in the spec) when serialized. Example:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; xmlns:cs=&quot;http://commons.apache.org/scxml&quot; version=&quot;1.0&quot; initial=&quot;par&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;parallel id=&quot;par&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;S1&quot; parentid=&quot;par&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;state id=&quot;S11&quot; parentid=&quot;S1&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;/state&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;S2&quot; parentid=&quot;par&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;state id=&quot;S21&quot; parentid=&quot;S2&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;/state&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;br/&gt;
 &amp;lt;/parallel&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12401318">SCXML-79</key>
            <summary>SCXMLSerializer: nested states have a &quot;parentid&quot; attribute</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Jul 2008 13:27:38 +0000</created>
                <updated>Thu, 31 Jul 2008 15:50:05 +0000</updated>
                            <resolved>Thu, 31 Jul 2008 03:56:15 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12618326" author="ingmar" created="Wed, 30 Jul 2008 13:30:05 +0000"  >&lt;p&gt;This patch contains a test case &quot;testSerializationParallel&quot; which has nested states.&lt;/p&gt;

&lt;p&gt;It also fixes some name space issues for &amp;lt;var&amp;gt; and &amp;lt;exit&amp;gt; test cases.&lt;/p&gt;</comment>
                            <comment id="12618429" author="rahul@apache.org" created="Wed, 30 Jul 2008 16:48:24 +0000"  >&lt;p&gt;Thanks Ingmar, I&apos;ll take a look soon. Setting fix version to next release, v0.9.&lt;/p&gt;

&lt;p&gt;My initial reaction would be to put parentid in the Commons SCXML namespace (its hard to say if anyone is ending up relying on it already).&lt;/p&gt;

&lt;p&gt;As a reminder to myself, the initial attribute on SCXML should be changed to initialstate.&lt;/p&gt;

&lt;p&gt;Finally, do you mind sharing (very briefly) your usecase for the SCXMLSerializer? There has long been a question in my mind towards its usefulness, so its good to know that someone is using the SCXMLSerializer class &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12618594" author="rahul@apache.org" created="Thu, 31 Jul 2008 03:56:15 +0000"  >&lt;p&gt;Thanks for the tests. The end tag for &amp;lt;parallel&amp;gt; was missing in testSerializeParallel(), I&apos;ve added that.&lt;/p&gt;

&lt;p&gt;Resolving as fixed since changes are in SVN (I&apos;ve removed the parentid attribute rendering). Please try it out if you can, thanks.&lt;/p&gt;</comment>
                            <comment id="12618659" author="ingmar" created="Thu, 31 Jul 2008 12:40:56 +0000"  >&lt;p&gt;Hi Rahul,&lt;/p&gt;

&lt;p&gt;when authoring complex SCXML state machines I heavily use to source in the content of states and the datamodel. But this makes it sometimes hard to overlook the resolved state machine. So I use the parser to resolve everything and the serializer to dump the resolved state machine. Also for &quot;debugging&quot; purposes it is much easier to follow the state machine execution based on your logs if you have a resolved SCXML document.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ingmar.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12618731" author="rahul@apache.org" created="Thu, 31 Jul 2008 15:50:05 +0000"  >&lt;p&gt;Thanks for drawing out your usecase, makes sense.&lt;/p&gt;

&lt;p&gt;Closing this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12387185" name="SCXMLSerializerTest.patch" size="4352" author="ingmar" created="Wed, 30 Jul 2008 13:30:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zz87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208009</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-77] &lt;param&gt; is not working properly with only a single &quot;name&quot; attribute</title>
                <link>https://issues.apache.org/jira/browse/SCXML-77</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;WD-scxml-20080516, section 4.3.1 says:&lt;br/&gt;
If the &quot;expr&quot; attribute is missing, the &quot;name&quot; attribute will be taken as a data model location expression (see 8.2 Location Expressions) and the value at that location will be passed to the invoked component. If the &quot;name&quot; attribute does not refer to a location in the data model, an error error.illegalalloc will be generated.&lt;/p&gt;

&lt;p&gt;SCXMLSemanticsImpl.java seems to not handle this properly, as it is ignoring the case where a single &quot;name&quot; attribute is used (line 793).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12400504">SCXML-77</key>
            <summary>&lt;param&gt; is not working properly with only a single &quot;name&quot; attribute</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ehoefig">Edzard Hoefig</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Jul 2008 18:51:35 +0000</created>
                <updated>Tue, 29 Jul 2008 11:14:15 +0000</updated>
                            <resolved>Mon, 28 Jul 2008 22:07:06 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12614489" author="ehoefig" created="Thu, 17 Jul 2008 18:52:34 +0000"  >&lt;p&gt;This is a patch that should get rid of the issue.&lt;/p&gt;</comment>
                            <comment id="12614507" author="rahul@apache.org" created="Thu, 17 Jul 2008 19:46:38 +0000"  >&lt;p&gt;Thanks for the patch, that helps &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I&apos;m traveling and will look at this next week. Setting fix version to next release (v0.9).&lt;/p&gt;

&lt;p&gt;I&apos;d suggest you also fill out an Individual Contributor License Agreement (ICLA). That is here (the fax number is on the form itself, you can mail it in too if you want):&lt;/p&gt;

&lt;p&gt; &lt;a href=&quot;http://www.apache.org/licenses/icla.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/icla.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Its a one-time thing (so you won&apos;t need to do it for any more patches you submit across all projects at the ASF), and is needed for non-trivial contributions, for provenance and pedigree reasons. Let us know once its sent in (so we can track to see when it gets recorded). Let us know if you have questions about this.&lt;/p&gt;</comment>
                            <comment id="12614670" author="ehoefig" created="Fri, 18 Jul 2008 09:01:46 +0000"  >&lt;p&gt;That&apos;s fine with us, I just sent the signed ICLA per fax.&lt;/p&gt;</comment>
                            <comment id="12615090" author="rahul@apache.org" created="Sun, 20 Jul 2008 13:49:53 +0000"  >&lt;p&gt;Thanks, I can confirm that your ICLA has been recorded by the ASF Secretary. I&apos;ll get back to this issue in the coming week.&lt;/p&gt;</comment>
                            <comment id="12617582" author="rahul@apache.org" created="Mon, 28 Jul 2008 22:07:06 +0000"  >&lt;p&gt;Thanks for the patch, it has been applied in r680521:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=680521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=680521&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I changed the tests to be in the invoke package (could have gone either way) and added the &quot;dummy&quot; invoker as a static nested class (I try to avoid more than one Java source file per test).&lt;/p&gt;

&lt;p&gt;Please try the latest code from SVN to verify the fix. Thanks again.&lt;/p&gt;</comment>
                            <comment id="12617767" author="ehoefig" created="Tue, 29 Jul 2008 11:14:15 +0000"  >&lt;p&gt;works fine for me&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12386334" name="commons-scxml_param-name-location_patch_ehoefig" size="12679" author="ehoefig" created="Thu, 17 Jul 2008 18:52:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172733</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208096</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-76] Serialization of expressions may produce invalid XML</title>
                <link>https://issues.apache.org/jira/browse/SCXML-76</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The SCXMLSerializer does not escape expression strings. With an EcmaScript evaluator the following may occur:&lt;/p&gt;

&lt;p&gt;original document:&lt;br/&gt;
&amp;lt;transition event=&quot;foo&quot; cond=&quot;i &amp;lt; 3&quot; target=&quot;bar&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;the serialized document will be:&lt;br/&gt;
&amp;lt;transition event=&quot;foo&quot; cond=&quot;i &amp;lt; 3&quot; target=&quot;bar&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;which is ill-formed XML. The serializer would need to escape the condition string. This applies to all places where expressions may occur.&lt;/p&gt;

&lt;p&gt;Apache commons-lang has a StringEscapeUtil.escapeXML(String data) function which would solve the problem (I don&apos;t know if it would help for all cases). &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/lang/trunk/src/java/org/apache/commons/lang/StringEscapeUtils.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/commons/proper/lang/trunk/src/java/org/apache/commons/lang/StringEscapeUtils.java?view=markup&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But using this would add another dependency to commons-scxml.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12400288">SCXML-76</key>
            <summary>Serialization of expressions may produce invalid XML</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Jul 2008 13:14:07 +0000</created>
                <updated>Wed, 30 Jul 2008 16:59:22 +0000</updated>
                            <resolved>Mon, 28 Jul 2008 21:47:34 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12614309" author="ingmar" created="Thu, 17 Jul 2008 12:25:08 +0000"  >&lt;p&gt;Here is a simple test case:&lt;/p&gt;

&lt;p&gt;    public void testSerializeTransition() &lt;/p&gt;
{
    	Transition t = new Transition();
    	
    	t.setCond(&quot;i &amp;lt; 3&quot;);
    	
    	String actualValue = &quot; &amp;lt;transition cond=\&quot;i &amp;lt; 3\&quot;&amp;gt;\n &amp;lt;/transition&amp;gt;\n&quot;;
    	
    	StringBuffer returnValue = new StringBuffer();
    	SCXMLSerializer.serializeTransition(returnValue, t, &quot; &quot;);
    	
    	assertEquals(actualValue, returnValue.toString());
    }</comment>
                            <comment id="12614310" author="ingmar" created="Thu, 17 Jul 2008 12:30:03 +0000"  >&lt;p&gt;Added link to StringEscapeUtil implementation.&lt;/p&gt;</comment>
                            <comment id="12614441" author="rahul@apache.org" created="Thu, 17 Jul 2008 17:03:21 +0000"  >&lt;p&gt;Yup, thanks, makes sense, I&apos;m marking fix version to next release (v0.9).&lt;/p&gt;

&lt;p&gt;I&apos;m traveling and won&apos;t be able to get to this for atleast another week. Since you have identified the changes, would you like to provide a patch as well? Here&apos;s more on that:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://commons.apache.org/patches.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/patches.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You are right that we don&apos;t want any more dependencies (especially required ones) so we&apos;ll want to copy over the guts of the escapeXML method from &lt;span class=&quot;error&quot;&gt;&amp;#91;lang&amp;#93;&lt;/span&gt; (or write an equivalent). The best place for this would be as a utility method in the org.apache.commons.scxml.SCXMLHelper class that can be used by the SCXMLSerializer (and other places as needed).&lt;/p&gt;
</comment>
                            <comment id="12617329" author="ingmar" created="Sun, 27 Jul 2008 19:36:09 +0000"  >&lt;p&gt;added escapeXML() helper function&lt;/p&gt;</comment>
                            <comment id="12617330" author="ingmar" created="Sun, 27 Jul 2008 19:37:15 +0000"  >&lt;p&gt;a test case&lt;/p&gt;</comment>
                            <comment id="12617331" author="ingmar" created="Sun, 27 Jul 2008 19:54:33 +0000"  >&lt;p&gt;Rahul,&lt;/p&gt;

&lt;p&gt;I tried to find a compact solution and added patches for 3 files.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ingmar.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;2008/7/17 Rahul Akolkar (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="12617570" author="rahul@apache.org" created="Mon, 28 Jul 2008 21:47:34 +0000"  >&lt;p&gt;Thanks a lot for the patch(es)!&lt;/p&gt;

&lt;p&gt;I&apos;ve committed a variant of the escapeXML() method, such that:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The floating point operation is avoided&lt;/li&gt;
	&lt;li&gt;A map isn&apos;t instantiated&lt;/li&gt;
	&lt;li&gt;Cosmetic changes (tab removal etc.)&lt;br/&gt;
I had some difficulty in trying to apply the patches using my SVN client. I&apos;d recommend providing one patch (for all files changed) rooted at trunk.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Resolving as fixed. It would be great if you could try a clean checkout from SVN to see if this works for you. Thanks again.&lt;/p&gt;</comment>
                            <comment id="12618270" author="ingmar" created="Wed, 30 Jul 2008 09:52:02 +0000"  >&lt;p&gt;It works fine for me.&lt;/p&gt;</comment>
                            <comment id="12618433" author="rahul@apache.org" created="Wed, 30 Jul 2008 16:59:22 +0000"  >&lt;p&gt;Thanks, closing issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12386992" name="SCXMLHelper.patch" size="2069" author="ingmar" created="Sun, 27 Jul 2008 19:36:09 +0000"/>
                            <attachment id="12386993" name="SCXMLSerializer.patch" size="4605" author="ingmar" created="Sun, 27 Jul 2008 19:36:49 +0000"/>
                            <attachment id="12386994" name="SCXMLSerializerTest.patch" size="1035" author="ingmar" created="Sun, 27 Jul 2008 19:37:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172732</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208030</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-74] &lt;data&gt; uses &quot;name&quot; attribute instead of &quot;ID&quot;</title>
                <link>https://issues.apache.org/jira/browse/SCXML-74</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;In the recent SCXML WD (WD-scxml-20080516), the &amp;lt;data&amp;gt; element is defined to use an &quot;ID&quot; attribute. Previously it had been &quot;name&quot; (WD-scxml-20070221). This change is not reflected in the source (see class org.apache.commons.scxml.model.Data) and leads to a NullPointerException when trying to use it.&lt;/p&gt;

&lt;p&gt;Example: &lt;/p&gt;

&lt;p&gt;This SCXML document...&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; version=&quot;1.0&quot; initialstate=&quot;InitialState&quot; &amp;gt;&lt;br/&gt;
	&amp;lt;datamodel&amp;gt;&lt;br/&gt;
		&amp;lt;data id=&quot;RequestForBerlin&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;GetWeather xmlns=&quot;http://www.webserviceX.NET&quot;&amp;gt;&lt;br/&gt;
			  &amp;lt;CityName&amp;gt;Berlin&amp;lt;/CityName&amp;gt;&lt;br/&gt;
			  &amp;lt;CountryName&amp;gt;Germany&amp;lt;/CountryName&amp;gt;&lt;br/&gt;
			&amp;lt;/GetWeather&amp;gt;				&lt;br/&gt;
		&amp;lt;/data&amp;gt;&lt;br/&gt;
	&amp;lt;/datamodel&amp;gt;&lt;br/&gt;
	&amp;lt;state id=&quot;InitialState&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;transition target=&quot;GetWeatherState&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;/state&amp;gt;&lt;br/&gt;
	&amp;lt;state id=&quot;GetWeatherState&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;invoke src=&quot;WeatherService#GetWeather&quot; targettype=&quot;x-soap&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;param name=&quot;RequestForBerlin&quot;/&amp;gt;&lt;br/&gt;
		&amp;lt;/invoke&amp;gt;&lt;br/&gt;
	&amp;lt;/state&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;... leads to ...&lt;/p&gt;

&lt;p&gt;...  java.lang.NullPointerException&lt;br/&gt;
	at org.apache.commons.scxml.env.SimpleContext.setLocal(SimpleContext.java:164)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLHelper.cloneDatamodel(SCXMLHelper.java:466)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLExecutor.reset(SCXMLExecutor.java:223)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLExecutor.go(SCXMLExecutor.java:351)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;... because the name field of a Data class instance is null.&lt;/p&gt;

&lt;p&gt;when changing the &amp;lt;data id=&quot;RequestForBerlin&quot;&amp;gt; line to &amp;lt;data name=&quot;RequestForBerlin&quot;&amp;gt; the problem dissapears.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12399628">SCXML-74</key>
            <summary>&lt;data&gt; uses &quot;name&quot; attribute instead of &quot;ID&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ehoefig">Edzard Hoefig</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Jul 2008 17:25:50 +0000</created>
                <updated>Thu, 17 Jul 2008 18:54:53 +0000</updated>
                            <resolved>Sat, 12 Jul 2008 03:19:18 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12610669" author="rahul@apache.org" created="Sat, 5 Jul 2008 00:01:35 +0000"  >&lt;p&gt;Thanks for pointing this out, I&apos;ve set the fix version to be v0.9 (the next anticipated release). We have not updated to the latest WD, but we will need to go through the changes with a fine-toothed comb at some point (volunteers welcome &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;I won&apos;t be able to get to this for another week, but the fix should be fairly straightforward if anyone wants to take a stab at it (given that you&apos;re correctly identified the source code that needs updating).&lt;/p&gt;</comment>
                            <comment id="12611955" author="ehoefig" created="Wed, 9 Jul 2008 09:29:52 +0000"  >&lt;p&gt;The issue seems to be fairly easily fixed (at least all junit tests stay green) by the following steps.&lt;br/&gt;
I could also commit these to the SVN, but am unsure about the process followed in this project. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;1) Class org.apache.commons.scxml.SCXMLHelper.java &lt;br/&gt;
Three changes in line 448, line 464, line 466 (in &quot;cloneDatamodel&quot;)&lt;/p&gt;

&lt;p&gt;Use &quot;datum.getId()&quot; instead of &quot;datum.getName()&quot;&lt;br/&gt;
(It is important to use the lowercase &quot;Id&quot; and not &quot;ID&quot;, which is not working &amp;#8211; confusing the Digester?)&lt;/p&gt;

&lt;p&gt;2) Class org.apache.commons.scxml.io.SCXMLSerializer.java&lt;br/&gt;
One change in else clause starting on line 363 (in &quot;serializeDatamodel&quot;) &lt;/p&gt;

&lt;p&gt;Use&lt;br/&gt;
b.append(indent).append(INDENT).append(&quot;&amp;lt;data id=\&quot;&quot;).&lt;br/&gt;
	append(datum.getId()).append(&quot;\&quot; expr=\&quot;&quot;).&lt;br/&gt;
	append(datum.getExpr()).append(&quot;\&quot; /&amp;gt;\n&quot;);&lt;br/&gt;
Instead of&lt;br/&gt;
b.append(indent).append(INDENT).append(&quot;&amp;lt;data name=\&quot;&quot;).&lt;br/&gt;
	append(datum.getName()).append(&quot;\&quot; expr=\&quot;&quot;).&lt;br/&gt;
	append(datum.getExpr()).append(&quot;\&quot; /&amp;gt;\n&quot;);&lt;/p&gt;

&lt;p&gt;3) Class org.apache.commons.scxml.model.Data.java&lt;br/&gt;
Re-factor &quot;name&quot; attribute to &quot;id&quot;, also change accessor methods:&lt;/p&gt;

&lt;p&gt;line 39 (the attribute name)&lt;br/&gt;
line 68 (initialization in ctor)&lt;br/&gt;
line 74ff: &lt;br/&gt;
rename accessor methods, e.g. use these&lt;/p&gt;

&lt;p&gt;/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Get the ID.&lt;br/&gt;
 *&lt;/li&gt;
	&lt;li&gt;@return String The identifier.&lt;br/&gt;
 */&lt;br/&gt;
public final String getId() {&lt;br/&gt;
	return id;&lt;br/&gt;
}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Set the ID.&lt;br/&gt;
 *&lt;/li&gt;
	&lt;li&gt;@param id The identifier.&lt;br/&gt;
 */&lt;br/&gt;
public final void setId(final String id) {&lt;br/&gt;
	this.id = id;&lt;br/&gt;
}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;4) Refactor the xml test data files&lt;br/&gt;
Use &quot;id&quot; instead of &quot;name&quot; as attribute in declaration of &amp;lt;data/&amp;gt; elements &lt;br/&gt;
This has to be done for following files:&lt;/p&gt;

&lt;p&gt;org.apache.commons.scxml.custom-hello-world-04-el.xml&lt;br/&gt;
org.apache.commons.scxml.custom-hello-world-04-jexl.xml&lt;br/&gt;
org.apache.commons.scxml.env.jexl.datamodel-01.xml&lt;br/&gt;
org.apache.commons.scxml.env.jexl.datamodel-02.xml&lt;br/&gt;
org.apache.commons.scxml.env.jexl.datamodel-03.xml&lt;br/&gt;
org.apache.commons.scxml.env.jexl.datamodel-04.xml&lt;br/&gt;
org.apache.commons.scxml.env.jexl.eventdata-03.xml&lt;br/&gt;
org.apache.commons.scxml.env.jsp.datamodel-01.xml&lt;br/&gt;
org.apache.commons.scxml.env.jsp.datamodel-02.xml&lt;br/&gt;
org.apache.commons.scxml.env.jsp.datamodel-03.xml&lt;br/&gt;
org.apache.commons.scxml.issues.issue64-01.xml&lt;br/&gt;
org.apache.commons.scxml.issues.issue64-02.xml&lt;br/&gt;
org.apache.commons.scxml.model.assign-test.xml&lt;/p&gt;
</comment>
                            <comment id="12612299" author="rahul@apache.org" created="Wed, 9 Jul 2008 21:54:29 +0000"  >&lt;p&gt;Thanks a lot for taking time to identify the changes. I should have pointed to the contributing patches page to make the process clearer:&lt;/p&gt;

&lt;p&gt;   &lt;a href=&quot;http://commons.apache.org/patches.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/patches.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I will take a look at committing the necessary changes (may be a week or two). We should retain the ability to use &quot;name&quot; (instead of &quot;id&quot;) for backwards compatibility.&lt;/p&gt;</comment>
                            <comment id="12612423" author="ehoefig" created="Thu, 10 Jul 2008 09:51:37 +0000"  >&lt;p&gt;Thanks for the pointer to the contribution process. Here is a patch for the identified changes. I left the &quot;name&quot; accessors in the Data class for backward compability; Both &quot;id&quot; and &quot;name&quot; accessors are referring to the same &quot;id&quot; attribute now.&lt;/p&gt;</comment>
                            <comment id="12613042" author="rahul@apache.org" created="Sat, 12 Jul 2008 03:19:18 +0000"  >&lt;p&gt;Great, thanks for the patch. I&apos;ve applied it in r676121 and added you as a contributor:&lt;/p&gt;

&lt;p&gt; &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=676121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=676121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I made two minor changes to your patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Deprecated the get/setName methods to indicate we recommend using id&lt;/li&gt;
	&lt;li&gt;The patch sporadically contained extra newlines at the end of some files, I removed those&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can now try the latest code in trunk to verify that the fix works for you. Resolving as fixed.&lt;/p&gt;</comment>
                            <comment id="12614490" author="ehoefig" created="Thu, 17 Jul 2008 18:54:53 +0000"  >&lt;p&gt;Thank you, works fine for me now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12385724" name="commons-scxml_data-id_patch_ehoefig" size="18965" author="ehoefig" created="Thu, 10 Jul 2008 09:51:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172730</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208094</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-71] Javascript expression evaluator cannot evaluate _eventdatamap[&apos;event.name&apos;]</title>
                <link>https://issues.apache.org/jira/browse/SCXML-71</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The _eventdatamap is implemented as a Java HashMap - and the Javascript engines (both JDK and JSR223) don&apos;t seem to be able to apply the [] operator to a Java Map object. &lt;/p&gt;

&lt;p&gt;An interim workaround when using the Javascript evaluator is to use _eventdatamap.get(&apos;event.name&apos;). &lt;/p&gt;

&lt;p&gt;For the longer term this anomalous behaviour can either just be documented or a patch that specifically handles _eventdatamap[] can be included in the eval functions&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 6&lt;/p&gt;</environment>
        <key id="12395060">SCXML-71</key>
            <summary>Javascript expression evaluator cannot evaluate _eventdatamap[&apos;event.name&apos;]</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tonys">Tony Seebregts</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Apr 2008 10:22:26 +0000</created>
                <updated>Thu, 17 Jul 2008 17:57:51 +0000</updated>
                            <resolved>Thu, 15 May 2008 17:47:58 +0000</resolved>
                                    <version>0.7</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12593382" author="rahul@apache.org" created="Wed, 30 Apr 2008 17:10:32 +0000"  >&lt;p&gt;I think patching the documentation to mention this is a good start.&lt;/p&gt;

&lt;p&gt;Two comments about this:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The fact that all derived events are processed in one microstep by the engine is subject to change. Pending some clarification from the WG, this may change such that each derived event is processed in its own cycle (at the cost of more cycles). If that happens in some subsequent major release, then the need for using _eventdatamap will disappear altogether.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I think we should avoid patches that specifically handle bits for any expression language used. There are going to be idiosyncrasies associated with the usage of each EL that users will have to be aware of and deal with appropriately. We tend to use ELs as-is.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12594589" author="tonys" created="Tue, 6 May 2008 13:47:41 +0000"  >&lt;p&gt;Ok, Rahul - that makes lots of sense to me too. I&apos;ll update the Javadoc comments and add an example.&lt;/p&gt;</comment>
                            <comment id="12594604" author="rahul@apache.org" created="Tue, 6 May 2008 15:34:33 +0000"  >&lt;p&gt;That&apos;d be great, thanks in advance.&lt;/p&gt;</comment>
                            <comment id="12595309" author="tonys" created="Thu, 8 May 2008 16:10:27 +0000"  >&lt;p&gt;I&apos;ve added a (fairly minimal) comment in the JSEvaluator.java javadoc comments and also added a sample to the end of the example-01.xml. &lt;/p&gt;

&lt;p&gt;The attached file has the all the relevant files I found in the J5 branch but the only ones that have changed are:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;JSEvaluator.java (added comment)&lt;/li&gt;
	&lt;li&gt;JSExampleTest.java (added MapTest inner class to support the _eventdatamap example)&lt;/li&gt;
	&lt;li&gt;example-01.xml (added the maptest example at the bottom)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Hope that all helps &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;
</comment>
                            <comment id="12595352" author="rahul@apache.org" created="Thu, 8 May 2008 18:10:56 +0000"  >&lt;p&gt;Thank you for your time, I&apos;ll take a look early next week.&lt;/p&gt;

&lt;p&gt;Please attach patches, its much easier to incorporate incremental changes that way (the directory structure seems slightly different between SVN and the attached zip). Details on patches:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://commons.apache.org/patches.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/patches.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also, the (now renamed) J6 branch, which would be the base for the patch, is here:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/repos/asf/commons/proper/scxml/branches/J6/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/commons/proper/scxml/branches/J6/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12597209" author="rahul@apache.org" created="Thu, 15 May 2008 17:47:58 +0000"  >&lt;p&gt;Fixed in the sense that the documentation and test improvments attached have been applied, thanks. There are no functional changes.&lt;/p&gt;

&lt;p&gt;Please submit any patches against the latest version of the J6 branch (or trunk, as the case may be).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12381693" name="js-src.zip" size="22199" author="tonys" created="Thu, 8 May 2008 16:11:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172727</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208123</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-67] &lt;state&gt; can&apos;t have &lt;parallel&gt; </title>
                <link>https://issues.apache.org/jira/browse/SCXML-67</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;According to the latest SCXML W/D the &amp;lt;state&amp;gt; can have &amp;lt;parallel&amp;gt; as its child.&lt;br/&gt;
But, Commons SCXML 0.7 doesn&apos;t  seems to support that. &lt;/p&gt;

&lt;p&gt;The  org.apache.commons.scxml.io.SCXMLParser can&apos;t parse this scxml doc. &lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; version=&quot;1.0&quot;&lt;br/&gt;
  initialstate=&quot;microwave&quot;&amp;gt; &lt;br/&gt;
  &amp;lt;state id=&quot;microwave&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;initial&amp;gt;&lt;br/&gt;
          &amp;lt;transition  target=&quot;parts&quot;/&amp;gt;	 &lt;br/&gt;
    &amp;lt;/initial&amp;gt;&lt;br/&gt;
    &amp;lt;parallel id=&quot;parts&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;state id=&quot;oven&quot;&amp;gt;&lt;br/&gt;
          &amp;lt;initial&amp;gt;&lt;br/&gt;
               &amp;lt;transition  target=&quot;oven2&quot;/&amp;gt;	 &lt;br/&gt;
          &amp;lt;/initial&amp;gt;&lt;br/&gt;
             &amp;lt;state id= &quot;oven2&quot;&amp;gt;&lt;br/&gt;
               &amp;lt;transition event=&quot;exit&quot;  target=&quot;dest&quot;/&amp;gt;&lt;br/&gt;
             &amp;lt;/state&amp;gt;&lt;br/&gt;
      &amp;lt;/state&amp;gt;&lt;br/&gt;
      &amp;lt;state id=&quot;door&quot;&amp;gt;&lt;br/&gt;
             &amp;lt;initial&amp;gt;&lt;br/&gt;
                   &amp;lt;transition  target=&quot;door2&quot;/&amp;gt;	 &lt;br/&gt;
             &amp;lt;/initial&amp;gt;&lt;br/&gt;
              &amp;lt;state id= &quot;door2&quot;&amp;gt;&lt;br/&gt;
	 &amp;lt;transition event=&quot;e&quot; target=&quot;dest&quot;/&amp;gt;&lt;br/&gt;
             &amp;lt;/state&amp;gt;&lt;br/&gt;
      &amp;lt;/state&amp;gt;&lt;br/&gt;
    &amp;lt;/parallel&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;br/&gt;
  &amp;lt;state id= &quot;dest&quot;  final =&quot;true&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;The SCXML  engine generates the following exception during parsing the scxml doc.&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.ClassCastException: org.apache.commons.scxml.model.Parallel&lt;br/&gt;
	at org.apache.commons.scxml.io.ModelUpdater.updateState(ModelUpdater.java:213)&lt;br/&gt;
	at org.apache.commons.scxml.io.ModelUpdater.updateSCXML(ModelUpdater.java:78)&lt;br/&gt;
	at org.apache.commons.scxml.io.SCXMLParser.parse(SCXMLParser.java:268)&lt;br/&gt;
	at org.apache.commons.scxml.io.SCXMLParser.parse(SCXMLParser.java:152)&lt;br/&gt;
	at org.apache.commons.scxml.test.StandaloneUtils.execute(StandaloneUtils.java:80)&lt;br/&gt;
	at org.apache.commons.scxml.test.StandaloneJexlExpressions.main(StandaloneJexlExpressions.java:60)&lt;/p&gt;

&lt;p&gt;So, I fixed  the &apos;updateState()&apos; in org.apache.commons.scxml.io.ModelUpdater class like this &lt;br/&gt;
(and also org.apache.commons.scxml.io.SCXMLSerializer.serializeState() )&lt;br/&gt;
        ..........&lt;br/&gt;
        } else {&lt;br/&gt;
            Iterator j = c.keySet().iterator();&lt;br/&gt;
            /* ---- your code  ----&lt;br/&gt;
            while (j.hasNext()) &lt;/p&gt;
{
                updateState((State) c.get(j.next()), targets);
            }
&lt;p&gt;             */&lt;br/&gt;
            /* -------   my fixed code ---------*/&lt;br/&gt;
            while (j.hasNext()) {&lt;br/&gt;
               TransitionTarget tt = (TransitionTarget) c.get(j.next());&lt;br/&gt;
                if (tt instanceof State) &lt;/p&gt;
{
                   updateState((State) tt, targets);
                }
&lt;p&gt; else &lt;/p&gt;
{
                   updateParallel((Parallel) tt, targets);
               }
&lt;p&gt;           }&lt;br/&gt;
          /*  ------------------------------------*/&lt;br/&gt;
        }&lt;br/&gt;
    } /* end of  &apos;updateState()&apos; */&lt;/p&gt;

&lt;p&gt;So, the engine works well. &lt;/p&gt;

&lt;p&gt;I think this is a critical bug. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12387856">SCXML-67</key>
            <summary>&lt;state&gt; can&apos;t have &lt;parallel&gt; </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="timecop">Seongsoo Park</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Feb 2008 07:28:38 +0000</created>
                <updated>Thu, 17 Jul 2008 17:57:51 +0000</updated>
                            <resolved>Mon, 5 May 2008 18:41:27 +0000</resolved>
                                    <version>0.7</version>
                                    <fixVersion>0.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12566037" author="rahul@apache.org" created="Wed, 6 Feb 2008 06:51:59 +0000"  >&lt;p&gt;Thanks for the test case and the proposed fix. Looks good, except that the else clause might need to be an else if. I am traveling till end of this month, and largely offline, but I will try to find time to get the fix in soon.&lt;/p&gt;</comment>
                            <comment id="12567404" author="rahul@apache.org" created="Sun, 10 Feb 2008 04:29:21 +0000"  >&lt;p&gt;Please try building from trunk, and if possible, let us know how things go (see changes in r620242: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=620242&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=620242&amp;amp;view=rev&lt;/a&gt; ). Leaving issue open for now.&lt;/p&gt;</comment>
                            <comment id="12567501" author="timecop" created="Mon, 11 Feb 2008 01:45:33 +0000"  >&lt;p&gt;Thanks for your fix. I will try to test for it. &lt;/p&gt;</comment>
                            <comment id="12576451" author="rahul@apache.org" created="Sat, 8 Mar 2008 00:00:04 +0000"  >&lt;p&gt;Ported to J5 branch and completed TODOs from r620242.&lt;/p&gt;</comment>
                            <comment id="12592545" author="rahul@apache.org" created="Sat, 26 Apr 2008 01:56:59 +0000"  >&lt;p&gt;I intend to close this issue as fixed in a week&apos;s time. Please post your comments if you&apos;re able to test by then.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172723</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208027</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-66] Build of latest code from SVN fails</title>
                <link>https://issues.apache.org/jira/browse/SCXML-66</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The build of latest SCXML fails.  The failure is located in SCXMLSerializerTest.testSerializeSCXMLNoStates method.  The assert fails because of a mismatch in the namespace.    &lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP&lt;/p&gt;</environment>
        <key id="12387389">SCXML-66</key>
            <summary>Build of latest code from SVN fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dvirgil">Donald Virgil</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Jan 2008 16:46:38 +0000</created>
                <updated>Tue, 29 Jan 2008 18:45:23 +0000</updated>
                            <resolved>Tue, 29 Jan 2008 18:40:50 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12563606" author="rahul@apache.org" created="Tue, 29 Jan 2008 18:35:41 +0000"  >&lt;p&gt;Could you please make sure you have a clean checkout? If that doesn&apos;t help, could you say a bit more about your environment (JDK, primarily, and anything else that may be relevant).&lt;/p&gt;

&lt;p&gt;I fixed this test (the test itself is a tad fragile, but thats a separate topic &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; in r608642, see:&lt;/p&gt;

&lt;p&gt; &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=608642&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=608642&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I tried on XP, and the build/tests pass for me on multiple JDKs (Sun 1.4.2, 1.5.0, 1.6.0 and IBM 1.4.2, 1.5.0). Our automated build is also passing at the moment. So we&apos;ll need more details to be able to reproduce the failure.&lt;/p&gt;</comment>
                            <comment id="12563610" author="dvirgil" created="Tue, 29 Jan 2008 18:40:50 +0000"  >&lt;p&gt;Thanks for the quick reply.  I did not have a clean check out.&lt;/p&gt;

&lt;p&gt;Don.&lt;/p&gt;</comment>
                            <comment id="12563616" author="rahul@apache.org" created="Tue, 29 Jan 2008 18:45:23 +0000"  >&lt;p&gt;No problem, thanks for confirming!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172722</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208059</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-65] NullPointer exceptions during triggerEvent</title>
                <link>https://issues.apache.org/jira/browse/SCXML-65</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;i&apos;m using SCXML state machines in a load generation tool. this tool simulates a client connected to a server.&lt;br/&gt;
the SCXML script used custom actions to send a request using a HTTP based protocol.&lt;br/&gt;
the HTTP response is transformed into a event and inserted into the SCXML script using triggerEvent().&lt;br/&gt;
each SCML executor has 1 dedicated http connection.  i&apos;m using around 2 to 10000 clients depending on the &lt;br/&gt;
test scenario&apos;s.&lt;/p&gt;

&lt;p&gt;During execution of the scripts a get sporatic nullpointer exceptions. this DOESN&apos;T happen all the time , it is hard to reproduce but when it happens ALL clients have the same problem. resetting the SCXML exector doesn&apos;t help&lt;/p&gt;

&lt;p&gt;2008-01-24 14:33:35,593|scxml-1-88|ERROR|SCXMLUser.triggerEvents(181)|9|Current events: events(TriggerEvent&lt;/p&gt;
{name=wv.status,type=3}
&lt;p&gt;,TriggerEvent&lt;/p&gt;
{name=wv.ok,type=3}
&lt;p&gt;)&lt;br/&gt;
2008-01-24 14:33:35,594|scxml-1-88|ERROR|SCXMLUser.triggerEvents(182)|9|error scxml event trigger: null&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.commons.scxml.semantics.SCXMLSemanticsImpl.seedTargetSet(SCXMLSemanticsImpl.java:493)&lt;br/&gt;
        at org.apache.commons.scxml.semantics.SCXMLSemanticsImpl.followTransitions(SCXMLSemanticsImpl.java:652)&lt;br/&gt;
        at org.apache.commons.scxml.SCXMLExecutor.triggerEvents(SCXMLExecutor.java:127)&lt;br/&gt;
        at com.nsn.loadtool.scxml.SCXMLUser.triggerEvents(SCXMLUser.java:164)&lt;br/&gt;
        at com.nsn.loadtool.scxml.SCXMLAsyncExecutor$SCXMLWorker.run(SCXMLAsyncExecutor.java:101)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:650)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:675)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:595)&lt;/p&gt;


&lt;p&gt;all event triggering is done in a way that only 1 thread can trigger a event.&lt;/p&gt;


</description>
                <environment>&lt;p&gt;Linux opensuse 10.2 &amp;amp; Sun Solaris 10 &lt;br/&gt;
1.5.x java&lt;/p&gt;</environment>
        <key id="12387227">SCXML-65</key>
            <summary>NullPointer exceptions during triggerEvent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="willems.luc@pandora.be">luc willems</reporter>
                        <labels>
                    </labels>
                <created>Sat, 26 Jan 2008 20:43:10 +0000</created>
                <updated>Sat, 26 Apr 2008 17:30:46 +0000</updated>
                            <resolved>Sat, 26 Apr 2008 17:30:46 +0000</resolved>
                                    <version>0.7</version>
                                    <fixVersion>0.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12562943" author="rahul@apache.org" created="Sun, 27 Jan 2008 01:27:33 +0000"  >&lt;p&gt;Please try one or more of the following things:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;From the stack trace, it looks like you are triggering events asynchronously through a custom action. Generally, custom actions work better with derived events instead (add the event based on the HTTP response to the &apos;derivedEvents&apos; collection).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Alternatively (as compared to above bullet which I&apos;d try first), you could try registering a &apos;x-http&apos; targettype invoker and using &amp;lt;invoke targettype=&quot;x-http&quot; ...&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Looking at the trace above (and v0.7 as you indicate to match line numbers), I&apos;ve made one minor &quot;first-hit&quot; performance improvement to the code in SVN trunk. It&apos;d be useful to know if that helps the cause here (if you are in a position to be able to try a jar built out of SVN).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;If none of the above works, try parsing a separate state machine instance (SCXML class instance) for each SCXMLExecutor instance. This shouldn&apos;t be necessary, but if it is here, then this may have uncovered a bug.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In the absence of a test case, it&apos;d be great if you could give us some feedback on the above suggestions. Thanks.&lt;/p&gt;</comment>
                            <comment id="12575816" author="willems.luc@pandora.be" created="Thu, 6 Mar 2008 18:07:10 +0000"  >&lt;p&gt;hello Rahul, sorry for the late reply but the project was put on hold and i could work on the issue anymore until this week.&lt;/p&gt;

&lt;p&gt;the events are basicly triggered y the TriggerEvent(events[]) call.&lt;br/&gt;
i have SCXMLuser class that looks like this :&lt;br/&gt;
public class SCXMLUser extends SCXMLExecutor implements ErrorReporter,SCXMLListener {&lt;br/&gt;
}&lt;br/&gt;
this class basicly wraps a single user which have network connections with a remote server.&lt;br/&gt;
the HTTP connection is used to send HTTP request to the application, HTTP responses are converted into&lt;br/&gt;
Events and send using the TriggerEvent method. We have a &quot;few&quot;  1000 of clients ,each with a connection running the state machine.&lt;/p&gt;

&lt;p&gt;if checked the code of SCXMLSemanticsImpl.java :&lt;br/&gt;
            List paths = t.getPaths();&lt;br/&gt;
            for (int j = 0; j &amp;lt; paths.size(); j++) {&lt;br/&gt;
                Path p = (Path) paths.get(j);&lt;br/&gt;
                if (p.isCrossRegion()) {              &amp;lt;--- null pointer&lt;/p&gt;

&lt;p&gt;the nullpointer exceptions suggesting that p == null so there is a null value for paths&lt;span class=&quot;error&quot;&gt;&amp;#91;j&amp;#93;&lt;/span&gt;&lt;br/&gt;
checking the t.getPaths() method i found that this was not thread save. &lt;/p&gt;

&lt;p&gt; public final List getPaths() {&lt;br/&gt;
        if (paths.size() == 0) {&lt;br/&gt;
            if (targets.size() &amp;gt; 0) {&lt;br/&gt;
                for (int i = 0; i &amp;lt; targets.size(); i++) &lt;/p&gt;
{
                    paths.add(i, new Path(getParent(),
                        (TransitionTarget) targets.get(i)));
                }
&lt;p&gt;            } else &lt;/p&gt;
{
                paths.add(new Path(getParent(), null));
            }
&lt;p&gt;        }&lt;br/&gt;
        return paths; &lt;br/&gt;
the test paths.size()==0 + the fill up of paths is not save in case  2 SCXMLExecutors are running a transition on the same time . I&apos;m running this on a 24 core solaris T1000 system so the possibility that is can happen is real.&lt;/p&gt;

&lt;p&gt;i replaced this code with a synchronized block so it will block the first time to correctly fillup the paths array&lt;br/&gt;
        if (paths.size() == 0) {&lt;br/&gt;
           synchronized(this) {&lt;br/&gt;
             if (paths.size == 0) {&lt;br/&gt;
                   if (targets.size() &amp;gt; 0) &lt;/p&gt;
{
                    .........
             }
&lt;p&gt;          }&lt;/p&gt;

&lt;p&gt;after this change , no nullpointers have occured anymore &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;so i suspect this is a thread savety issue with Transistion class.&lt;/p&gt;
</comment>
                            <comment id="12576441" author="rahul@apache.org" created="Fri, 7 Mar 2008 23:35:36 +0000"  >&lt;p&gt;Thanks for digging into this, no worries about the delay &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I agree with most of your analysis. In the meantime, I had made one change that should eliminate any issue here (the paths are now calculated at document parsing time, before any executor instances are created). That simple change is here (though its impact is perhaps subtle):&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=615543&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=615543&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Could you please try out the latest build from trunk (without your change, ofcourse) and see if that fixes the problem as well? Thanks in advance.&lt;/p&gt;</comment>
                            <comment id="12577091" author="willems.luc@pandora.be" created="Mon, 10 Mar 2008 17:44:56 +0000"  >&lt;p&gt;hello Rahul,&lt;/p&gt;

&lt;p&gt;i upgraded to current SVN source today , and all seems to be well now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
i&apos;ll be doing some more test on a sun T1000/solaris system this week.&lt;/p&gt;

&lt;p&gt;luc&lt;/p&gt;</comment>
                            <comment id="12577452" author="rahul@apache.org" created="Tue, 11 Mar 2008 14:08:17 +0000"  >&lt;p&gt;Thanks for trying the SVN trunk. Please let us know how the extended testing goes.&lt;/p&gt;</comment>
                            <comment id="12592544" author="rahul@apache.org" created="Sat, 26 Apr 2008 01:55:49 +0000"  >&lt;p&gt;I intend to close this issue as fixed in a week&apos;s time.&lt;/p&gt;</comment>
                            <comment id="12592588" author="willems.luc@pandora.be" created="Sat, 26 Apr 2008 17:30:46 +0000"  >&lt;p&gt;tested with my linux (opensuse 10.3) and Solaris 10.&lt;br/&gt;
fixed in upcoming 0.8 release&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172721</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208047</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-64] Better error reporting for ignored / misplaced elements by parser</title>
                <link>https://issues.apache.org/jira/browse/SCXML-64</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;    &amp;lt;transition event=&quot;my.event&quot; target=&quot;somewhere&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;datamodel&amp;gt;&lt;br/&gt;
	&amp;lt;data name=&quot;dummy&quot; expr=&quot;somedata&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/datamodel&amp;gt;&lt;br/&gt;
        &amp;lt;log expr=&quot;dummy&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;log expr=&quot;&apos;*****&apos; + dummy&quot; /&amp;gt;&lt;br/&gt;
      /transition&amp;gt;&lt;/p&gt;

&lt;p&gt;Given the above transition, the first log logs null, send log causes a nullpointerexception.  Acording to the SCXML spec datamodel is not allowed in a transition only globally and at the state level.&lt;/p&gt;</description>
                <environment>&lt;p&gt;win xp, java 1.5&lt;/p&gt;</environment>
        <key id="12385103">SCXML-64</key>
            <summary>Better error reporting for ignored / misplaced elements by parser</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ryakulis">Ross Yakulis</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Dec 2007 20:29:57 +0000</created>
                <updated>Thu, 17 Jul 2008 17:57:51 +0000</updated>
                            <resolved>Sun, 4 May 2008 02:47:44 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12554031" author="rahul@apache.org" created="Fri, 21 Dec 2007 20:53:16 +0000"  >&lt;p&gt;I don&apos;t think allowing &amp;lt;datamodel&amp;gt; within &amp;lt;transition&amp;gt;s is the issue here. The SCXML parser does not support this (however, there is no usable schema / DTD at this point, so the parser doesn&apos;t complain).&lt;/p&gt;

&lt;p&gt;If there is a NPE that should probably be fixed, but I&apos;d expect a callback to the ErrorReporter, not a NPE. Please reopen if you have a complete JUnit test case, to make it easier for others to reproduce this. Thanks.&lt;/p&gt;</comment>
                            <comment id="12554042" author="ryakulis" created="Fri, 21 Dec 2007 21:45:49 +0000"  >&lt;p&gt;I believe that the bug is allowing datamodel in the transition.  And the&lt;br/&gt;
SCXML schema agrees.  The problem is the way the digester is building&lt;br/&gt;
the rules it uses the same rules for transition and state.&lt;/p&gt;

&lt;p&gt;Ross Yakulis&lt;/p&gt;

&lt;p&gt;-------- FAILS&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
       version=&quot;1.0&quot;&lt;br/&gt;
       initialstate=&quot;tranbug&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;state id=&quot;tranbug&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;onentry&amp;gt;&lt;br/&gt;
            &amp;lt;log expr=&quot;&apos;Begin transition bug test ...&apos;&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/onentry&amp;gt;&lt;br/&gt;
        &amp;lt;transition event=&quot;show.bug&quot; target=&quot;end&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;datamodel&amp;gt;&lt;br/&gt;
 			&amp;lt;data name=&quot;dummy&quot; expr=&quot;&apos;somedata&apos;&quot;/&amp;gt;&lt;br/&gt;
         &amp;lt;/datamodel&amp;gt;&lt;br/&gt;
         &amp;lt;log expr=&quot;dummy&quot; /&amp;gt;&lt;br/&gt;
         &amp;lt;log expr=&quot;&apos;*****&apos; + dummy&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/transition&amp;gt;&lt;br/&gt;
    &amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;----WORKS&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
       version=&quot;1.0&quot;&lt;br/&gt;
       initialstate=&quot;tranbug&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;state id=&quot;tranbug&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;datamodel&amp;gt;&lt;br/&gt;
 			&amp;lt;data name=&quot;dummy&quot; expr=&quot;&apos;somedata&apos;&quot;/&amp;gt;&lt;br/&gt;
         &amp;lt;/datamodel&amp;gt;&lt;br/&gt;
        &amp;lt;onentry&amp;gt;&lt;br/&gt;
            &amp;lt;log expr=&quot;&apos;Begin transition bug test ...&apos;&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/onentry&amp;gt;&lt;br/&gt;
        &amp;lt;transition event=&quot;show.bug&quot; target=&quot;end&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;log expr=&quot;dummy&quot; /&amp;gt;&lt;br/&gt;
         &amp;lt;log expr=&quot;&apos;*****&apos; + dummy&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/transition&amp;gt;&lt;br/&gt;
    &amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/scxml&amp;gt; &lt;/p&gt;
</comment>
                            <comment id="12554044" author="ryakulis" created="Fri, 21 Dec 2007 21:48:36 +0000"  >&lt;p&gt;See attached files for a test case work.xml works and fails.xml fails&lt;/p&gt;</comment>
                            <comment id="12555692" author="rahul@apache.org" created="Thu, 3 Jan 2008 22:09:35 +0000"  >&lt;p&gt;Thanks for the tests. I&apos;ve added the tests you suggest in r608646 and added you as a contributor:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=608646&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=608646&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The behavior of the tests is as expected. I am not sure why you say the same rules are added for &amp;lt;state&amp;gt; and &amp;lt;transition&amp;gt; (that isn&apos;t true). The &amp;lt;datamodel&amp;gt; in fails.xml is simply ignored.&lt;/p&gt;

&lt;p&gt;As a broader statement, the SCXMLParser needs to be supplied a well-formed and correct SCXML document. If that assumption doesn&apos;t hold, the results are generally not defined. Moreover, the act of creating valid SCXML documents is beyond the scope of the runtime engine (though it should try its best to complain correctly).&lt;/p&gt;

&lt;p&gt;Resolving again as Invalid.&lt;/p&gt;</comment>
                            <comment id="12555722" author="ryakulis" created="Thu, 3 Jan 2008 23:48:39 +0000"  >&lt;p&gt;Sorry, you are correct about the rules.  Not sure what I saw but the&lt;br/&gt;
rules are right, probably&lt;br/&gt;
rushing to wrap things up before the holidays.&lt;/p&gt;

&lt;p&gt;But it seems to me that instead of ignoring the misplaced &amp;lt;datamodel&amp;gt; an&lt;/p&gt;

&lt;p&gt;error should be emitted in the digester as that is invalid.  There&lt;br/&gt;
should probably be &lt;br/&gt;
some schema validation on the scxml document, before (or as) it is&lt;br/&gt;
digested.&lt;/p&gt;

&lt;p&gt;Maybe this will fix things in a future release (from&lt;br/&gt;
SCXMLDIgester.java).&lt;/p&gt;

&lt;p&gt;        //Uncomment next line after SCXML DTD is available&lt;br/&gt;
        //digester.setValidating(true);&lt;/p&gt;

&lt;p&gt;My real complaint is that the out of place &amp;lt;datamodel&amp;gt; element should be&lt;br/&gt;
flagged as invalid when the document is being digested.&lt;/p&gt;

&lt;p&gt;Ross&lt;/p&gt;

</comment>
                            <comment id="12556021" author="rahul@apache.org" created="Fri, 4 Jan 2008 18:58:52 +0000"  >&lt;p&gt;Yes, as you point out in the comment in code, the plan has been to have a validating digester, but the W3C hasn&apos;t provided a useable DTD/schema yet. I do contend that the act of validating SCXML documents is better placed with XML editors / code generators / other authoring tools etc.&lt;/p&gt;</comment>
                            <comment id="12592547" author="rahul@apache.org" created="Sat, 26 Apr 2008 02:05:40 +0000"  >&lt;p&gt;Since it doesn&apos;t look like we will have a validating digester till atleast the next draft, it makes sense to try to improve the error reporting as indicated in the discussion on this issue. I intend to take a stab at that soon.&lt;/p&gt;
</comment>
                            <comment id="12592548" author="rahul@apache.org" created="Sat, 26 Apr 2008 02:07:13 +0000"  >&lt;p&gt;Changing to a more appropriate summary and setting fix version to v0.8.&lt;/p&gt;</comment>
                            <comment id="12594053" author="rahul@apache.org" created="Sun, 4 May 2008 02:47:44 +0000"  >&lt;p&gt;The SCXMLParser class will now produce warnings as it parses misplaced / ignored elements.&lt;/p&gt;

&lt;p&gt;Closing as fixed, to be part of v0.8.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12372110" name="TransitionBugTest.java" size="3049" author="ryakulis" created="Fri, 21 Dec 2007 21:46:55 +0000"/>
                            <attachment id="12372111" name="TransitionBugTestSuite.java" size="802" author="ryakulis" created="Fri, 21 Dec 2007 21:47:29 +0000"/>
                            <attachment id="12372108" name="fails.xml" size="559" author="ryakulis" created="Fri, 21 Dec 2007 21:46:55 +0000"/>
                            <attachment id="12372109" name="works.xml" size="553" author="ryakulis" created="Fri, 21 Dec 2007 21:46:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172720</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 27 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208108</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-63] sendid not getting filled in with a unique id.</title>
                <link>https://issues.apache.org/jira/browse/SCXML-63</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;			&amp;lt;datamodel&amp;gt;&lt;br/&gt;
				&amp;lt;data name=&quot;mysend&quot; expr=&quot;junk&quot;/&amp;gt;&lt;br/&gt;
			&amp;lt;/datamodel&amp;gt;&lt;/p&gt;

&lt;p&gt;			&amp;lt;log expr=&quot;_eventdata&quot; /&amp;gt;&lt;br/&gt;
			&amp;lt;log expr=&quot;&apos;WATCH.STOP run&apos;&quot; /&amp;gt;&lt;br/&gt;
			&amp;lt;send event=&quot;my.event&quot;  delay=&quot;2s&quot; sendid=&quot;mysend&quot;/&amp;gt;&lt;br/&gt;
			&amp;lt;log expr=&quot;mysend&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;The sendid you have a unique id generated and returned in the sendid variable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12384685">SCXML-63</key>
            <summary>sendid not getting filled in with a unique id.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ate">Ate Douma</assignee>
                                    <reporter username="ryakulis">Ross Yakulis</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Dec 2007 21:08:38 +0000</created>
                <updated>Sat, 3 Jan 2015 09:08:16 +0000</updated>
                            <resolved>Sat, 3 Jan 2015 09:08:16 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12551960" author="rahul@apache.org" created="Fri, 14 Dec 2007 22:14:16 +0000"  >&lt;p&gt;Setting fix version tentatively to v0.8. It would have been good if more details about the uniqueness were provided in the spec, and also the relevance of the fact that the sendid is an expression (in the context of generating the id).&lt;/p&gt;
</comment>
                            <comment id="14263204" author="adouma" created="Fri, 2 Jan 2015 20:08:25 +0000"  >&lt;p&gt;Fixed through &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-210&quot; title=&quot;Align &amp;lt;send&amp;gt; action attributes support with the latest SCXML specification&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-210&quot;&gt;&lt;del&gt;SCXML-210&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="12747223">SCXML-210</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172719</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a527:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267286</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-61] Infinite loop if an Invoker fires the done event in invoke method</title>
                <link>https://issues.apache.org/jira/browse/SCXML-61</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;With the following code&lt;/p&gt;

&lt;p&gt;public class HazInvoker implements Invoker&lt;br/&gt;
{&lt;br/&gt;
@Override public void invoke(String source, Map parameters) throws InvokerException&lt;br/&gt;
	{&lt;br/&gt;
		System.out.println(&quot;Invoker invoke source: &quot;&lt;ins&gt;source&lt;/ins&gt;&quot; params: &quot;+parameters);		&lt;br/&gt;
		SCXMLExecutor executor = scInstance.getExecutor();		&lt;br/&gt;
		TriggerEvent event=new TriggerEvent(parentStateId+&quot;.invoker.done&quot;, TriggerEvent.SIGNAL_EVENT); &lt;/p&gt;

&lt;p&gt;		//new AsyncTrigger(executor, event);&lt;br/&gt;
			try&lt;/p&gt;
			{
				executor.triggerEvent(event);
			}
&lt;p&gt;			catch (ModelException ex)&lt;/p&gt;
			{			
				ex.printStackTrace();
			}
&lt;p&gt;	}&lt;/p&gt;


&lt;p&gt;Exception in thread &quot;main&quot; java.lang.StackOverflowError&lt;br/&gt;
	at java.util.Vector.addElement(Vector.java:573)&lt;br/&gt;
	at java.util.Stack.push(Stack.java:50)&lt;br/&gt;
...&lt;br/&gt;
	at org.apache.commons.scxml.semantics.SCXMLSemanticsImpl.initiateInvokes(SCXMLSemanticsImpl.java:824)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLExecutor.triggerEvents(SCXMLExecutor.java:142)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLExecutor.triggerEvent(SCXMLExecutor.java:160)&lt;br/&gt;
	at com.hazlorealidad.fsm.HazInvoker.invoke(HazInvoker.java:37)&lt;br/&gt;
	at org.apache.commons.scxml.semantics.SCXMLSemanticsImpl.initiateInvokes(SCXMLSemanticsImpl.java:824)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLExecutor.triggerEvents(SCXMLExecutor.java:142)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLExecutor.triggerEvent(SCXMLExecutor.java:160)&lt;br/&gt;
	at com.hazlorealidad.fsm.HazInvoker.invoke(HazInvoker.java:37)&lt;/p&gt;

&lt;p&gt;The fix is to use the AsyncTrigger but the class is package private, I would be good to change it to public and document the way to write a synchronous invoker in the invoke method. &lt;/p&gt;

&lt;p&gt;Something like:&lt;br/&gt;
&quot;If the Invoker completes its invocation in the invoke method it should signal the completion of the task using an AsyncTrigger, in order to avoid a stack overflow&quot;&lt;/p&gt;

&lt;p&gt;Or maybe there is another solution which would allow the event to be fired in the invoke method.&lt;/p&gt;

&lt;p&gt;Also it would be good to avoid the creation of a thread just for that, maybe an invokeLater method in the executor, like the swing dispatch loop.&lt;/p&gt;</description>
                <environment>&lt;p&gt;all platforms&lt;/p&gt;</environment>
        <key id="12380800">SCXML-61</key>
            <summary>Infinite loop if an Invoker fires the done event in invoke method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hazlorealidad">Andy Bailey</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Oct 2007 18:36:35 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:54 +0000</updated>
                            <resolved>Tue, 4 Dec 2007 23:18:36 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12536689" author="rahul@apache.org" created="Mon, 22 Oct 2007 14:43:34 +0000"  >&lt;p&gt;This will be fixed in v0.7 only to the effect of adding explicit Javadoc enhancements as you suggest.&lt;/p&gt;

&lt;p&gt;Invoke has necessarily asynchronous semantics, and tends toward long(er) running interaction semantics. For synchronous interactions, custom actions (executable content) are more appropriate. AsyncTrigger was left out of the public API by design (as you indicate, it may not please everyone).&lt;/p&gt;</comment>
                            <comment id="12548461" author="rahul@apache.org" created="Tue, 4 Dec 2007 23:18:36 +0000"  >&lt;p&gt;Added Javadoc clarification per previous comment.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172717</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zztj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208105</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-60] Possible race condition in AsyncTrigger</title>
                <link>https://issues.apache.org/jira/browse/SCXML-60</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;In AsyncTrigger (used by SimpleSCXMLInvoker) a thread is started from inside the constuctor, because of the java memory model the fields arent guaranteed to be written until after the constructor ends, however the thread could start before this and so the values could be null.&lt;/p&gt;

&lt;p&gt;To be safe the class should have a start method that gets invoked after the constructor.&lt;/p&gt;

&lt;p&gt;  AsyncTrigger(final SCXMLExecutor executor, final TriggerEvent event) &lt;/p&gt;
{
        this.executor = executor;
        this.events = new TriggerEvent[1];
        this.events[0] = event;
        new Thread(this).start();
    }
&lt;p&gt; public void run() {&lt;br/&gt;
        try {&lt;br/&gt;
            synchronized (executor) &lt;/p&gt;
{
                executor.triggerEvents(events);
            }
&lt;p&gt;        } catch (ModelException me) &lt;/p&gt;
{
            log.error(me.getMessage(), me);
        }
&lt;p&gt;    }&lt;/p&gt;</description>
                <environment></environment>
        <key id="12380798">SCXML-60</key>
            <summary>Possible race condition in AsyncTrigger</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hazlorealidad">Andy Bailey</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Oct 2007 18:19:32 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:54 +0000</updated>
                            <resolved>Tue, 4 Dec 2007 04:01:09 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12536685" author="rahul@apache.org" created="Mon, 22 Oct 2007 14:36:17 +0000"  >&lt;p&gt;Setting fix version to v0.7 so it gets fixed in the next release.&lt;/p&gt;

&lt;p&gt;Out of curiosity, did you actually observe this problem, what JDK etc.?&lt;/p&gt;</comment>
                            <comment id="12539860" author="hazlorealidad" created="Sat, 3 Nov 2007 05:42:37 +0000"  >&lt;p&gt;I didnt actually observe the problem, I think you need a multiprocessor&lt;br/&gt;
machine for that to happen, but I thought it would be a good idea to fix&lt;br/&gt;
it as if it ever did happen it would be difficult to debug, and almost&lt;br/&gt;
impossible to reproduce.&lt;/p&gt;

</comment>
                            <comment id="12548110" author="rahul@apache.org" created="Tue, 4 Dec 2007 04:01:05 +0000"  >&lt;p&gt;Fixed in SVN, thanks for your input, I&apos;ve added your name to the project contributors section.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172716</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 49 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208083</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-58] SCXML not stateless because of State class</title>
                <link>https://issues.apache.org/jira/browse/SCXML-58</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The State class is not stateless because of the &quot;done&quot; property.  This can cause incorrect firing of the parallel state done transition when sharing an SCXML object between multiple SCXMLExecutors.&lt;/p&gt;</description>
                <environment>&lt;p&gt;nightly build 20070730&lt;/p&gt;</environment>
        <key id="12377312">SCXML-58</key>
            <summary>SCXML not stateless because of State class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mtillberg">Mike Tillberg</reporter>
                        <labels>
                    </labels>
                <created>Sun, 2 Sep 2007 01:04:18 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:54 +0000</updated>
                            <resolved>Tue, 4 Dec 2007 21:59:15 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12524316" author="mtillberg" created="Sun, 2 Sep 2007 01:05:57 +0000"  >&lt;p&gt;Patch to StatelessModelText and accompanying state model to test this problem.&lt;/p&gt;</comment>
                            <comment id="12524397" author="rahul@apache.org" created="Sun, 2 Sep 2007 20:07:04 +0000"  >&lt;p&gt;Indeed, and thanks for the test case (haven&apos;t run it yet, but the issue seems obvious). I intend to look at this in a week&apos;s time. If you want to take a stab at it, probably the best solution would be to hand off this book-keeping to the o.a.c.scxml.SCInstance class which manages the state for every executor instance.&lt;/p&gt;

&lt;p&gt;Setting fix version to next release (v0.7).&lt;/p&gt;

&lt;p&gt;Please note that the &quot;Affects Version/s&quot; field should generally be set to the latest release (in this case, v0.6 &amp;#8211; I&apos;ve changed that here).&lt;/p&gt;</comment>
                            <comment id="12548429" author="rahul@apache.org" created="Tue, 4 Dec 2007 21:59:15 +0000"  >&lt;p&gt;Fixed in SVN, thanks for the tests, they have been added to the test suite.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12364953" name="stateless-parallel01.xml" size="860" author="mtillberg" created="Sun, 2 Sep 2007 01:05:57 +0000"/>
                            <attachment id="12364952" name="statelessTest.patch" size="4402" author="mtillberg" created="Sun, 2 Sep 2007 01:05:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172714</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zz6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208003</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-57] Parallel exits to soon.</title>
                <link>https://issues.apache.org/jira/browse/SCXML-57</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;I am not sure if this is a bug or the intended behaviour, but it seems that the any one of the states in the parallel reaches a final substate, then all of parallel states are exited.  I confirmed this by expanding on the existing test case that uses the transitions-01.xml state chart to mark one of the three substates with the final=&quot;true&quot; attribute.  When this substate is reached all three of the parallel states are exited.&lt;/p&gt;

&lt;p&gt;However when reading the working draft specification it states:&lt;/p&gt;

&lt;p&gt;Parallel is a wrapper element that encapsulates a set of parallel states. The &amp;lt;parallel&amp;gt; element has &amp;lt;onentry&amp;gt; and &amp;lt;onexit&amp;gt; elements analogous to &amp;lt;state&amp;gt;. In addition, the &amp;lt;parallel&amp;gt; element holds a set of &amp;lt;state&amp;gt; elements that execute in parallel and join at the &amp;lt;onexit&amp;gt; handler of the &amp;lt;parallel&amp;gt; element. In particular, when all of the parallel substates reach final states, a completion event &quot;ID.done&quot; is generated, where &quot;ID&quot; is the &quot;id&quot; of the &amp;lt;parallel&amp;gt; element. Either the &amp;lt;parallel&amp;gt; element or one of its ancestors can trigger a transition off this event, at which time the &amp;lt;onexit&amp;gt; handler of the element will be executed.&lt;/p&gt;

&lt;p&gt;This leads me to believe that all states of the parallel have to reach a final state before the tranistion out occurs.  &lt;/p&gt;

&lt;p&gt;Feels like a bug to me.&lt;/p&gt;</description>
                <environment>&lt;p&gt;windows and linux &lt;/p&gt;</environment>
        <key id="12377282">SCXML-57</key>
            <summary>Parallel exits to soon.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cookiesj">Dennis Cook</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Aug 2007 22:56:19 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:53 +0000</updated>
                            <resolved>Sun, 2 Sep 2007 19:55:27 +0000</resolved>
                                    <version>0.6</version>
                    <version>0.7</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12524212" author="cookiesj" created="Fri, 31 Aug 2007 22:57:40 +0000"  >&lt;p&gt;JUnit test case.&lt;/p&gt;</comment>
                            <comment id="12524213" author="cookiesj" created="Fri, 31 Aug 2007 22:58:05 +0000"  >&lt;p&gt;state chart&lt;/p&gt;</comment>
                            <comment id="12524395" author="rahul@apache.org" created="Sun, 2 Sep 2007 19:55:27 +0000"  >&lt;p&gt;Your understanding of the semantics of &amp;lt;parallel&amp;gt; is correct. However, you have missed a detail in the test case.&lt;/p&gt;

&lt;p&gt;The state with ID &quot;thirty_one&quot; has the following transition:&lt;/p&gt;

&lt;p&gt;  &amp;lt;transition event=&quot;thirty_one.done&quot; target=&quot;forty&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;Reaching a final substate of this state causes the .done derived event above to be triggered, and the transition above to be followed (which requires us to exit the &amp;lt;parallel&amp;gt;).&lt;/p&gt;

&lt;p&gt;Please feel free to ask any further questions on the mailing list.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12364929" name="Transitions01Test.java" size="5337" author="cookiesj" created="Fri, 31 Aug 2007 22:57:40 +0000"/>
                            <attachment id="12364930" name="transitions-01.xml" size="5494" author="cookiesj" created="Fri, 31 Aug 2007 22:58:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172713</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 10 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1004v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208156</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-56] onentry and onexit child elements of parallel do not have parent</title>
                <link>https://issues.apache.org/jira/browse/SCXML-56</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Expanded the provide test case transitions-01.xml to include as childern of the element &amp;lt;parallel id=&quot;thirties_parallel&quot;&amp;gt;:&lt;/p&gt;

&lt;p&gt;&amp;lt;onentry&amp;gt;&lt;br/&gt;
	&amp;lt;log expr=&quot;&apos;Entering thirties_parallel&apos;&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/onentry&amp;gt;&lt;br/&gt;
&amp;lt;onexit&amp;gt;&lt;br/&gt;
	&amp;lt;log expr=&quot;&apos;Exiting thirties_parallel&apos;&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/onexit&amp;gt;&lt;/p&gt;

&lt;p&gt;Running the test case will now result in NPE when attempting the log action.&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.commons.scxml.model.Action.getParentState(Action.java:115)&lt;br/&gt;
	at org.apache.commons.scxml.model.Log.execute(Log.java:102)&lt;br/&gt;
	at org.apache.commons.scxml.semantics.SCXMLSemanticsImpl.executeActions(SCXMLSemanticsImpl.java:229)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLExecutor.triggerEvents(SCXMLExecutor.java:131)&lt;br/&gt;
	at org.apache.commons.scxml.SCXMLTestHelper.fireEvent(SCXMLTestHelper.java:197)&lt;br/&gt;
	at controller.Transitions01Test.testSCXMLExecutorTransitions01Sample(Transitions01Test.java:58)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at junit.framework.TestCase.runTest(TestCase.java:154)&lt;br/&gt;
	at junit.framework.TestCase.runBare(TestCase.java:127)&lt;br/&gt;
	at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
	at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
	at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
	at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
	at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
	at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:128)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)&lt;/p&gt;

&lt;p&gt;because the parent of on OnEntry and OnExit objects is null.&lt;/p&gt;

</description>
                <environment>&lt;p&gt;Windows and linux&lt;/p&gt;</environment>
        <key id="12377273">SCXML-56</key>
            <summary>onentry and onexit child elements of parallel do not have parent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cookiesj">Dennis Cook</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Aug 2007 20:58:09 +0000</created>
                <updated>Fri, 31 Aug 2007 22:51:32 +0000</updated>
                            <resolved>Fri, 31 Aug 2007 22:51:32 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12524210" author="cookiesj" created="Fri, 31 Aug 2007 22:51:31 +0000"  >&lt;p&gt;Tested with latest code base from svn and problem has already been fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172712</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208049</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-54] Events from custom actions missing payload</title>
                <link>https://issues.apache.org/jira/browse/SCXML-54</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;   I&apos;m trying to generate events from custom events by adding &lt;br/&gt;
TriggerEvent objects into the derivedEvents argument.  This is working &lt;br/&gt;
in terms of triggering transitions, however I&apos;m unable to properly &lt;br/&gt;
access the payload from these generated events, depending on the &lt;br/&gt;
evaluator being used.  With the EL evaluator, _eventdata and &lt;br/&gt;
_eventdatamap seem to be empty when the transition fires.  With JEXL, &lt;br/&gt;
the payload is available, however the assignments seem to be in a local &lt;br/&gt;
context, even though the variable I&apos;m assigning should only exist in the &lt;br/&gt;
root context.&lt;/p&gt;</description>
                <environment>&lt;p&gt;20070730 nightly build&lt;/p&gt;</environment>
        <key id="12376876">SCXML-54</key>
            <summary>Events from custom actions missing payload</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mtillberg">Mike Tillberg</reporter>
                        <labels>
                    </labels>
                <created>Sat, 25 Aug 2007 16:45:19 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:53 +0000</updated>
                            <resolved>Tue, 4 Dec 2007 03:36:34 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12522767" author="mtillberg" created="Sat, 25 Aug 2007 16:47:54 +0000"  >&lt;p&gt;EL and JEXL versions of a simple state machine for testing custom action event generation.  The HelloEvent class is a modified version of the existing Hello.java that generates an event and places it into the derivedEvents collection.&lt;/p&gt;</comment>
                            <comment id="12522768" author="mtillberg" created="Sat, 25 Aug 2007 16:48:41 +0000"  >&lt;p&gt;Modified CustomActionTest class for running the additional test cases.&lt;/p&gt;</comment>
                            <comment id="12522769" author="mtillberg" created="Sat, 25 Aug 2007 17:13:10 +0000"  >&lt;p&gt;This fixes a small, potential issue I found while examining this problem.  The SCXMLTestHelper generates JexlContexts directly, rather than calling evaluator.newContext(null).  This doesn&apos;t have any effect on the tests, including the EL one I attached, but this would seem to be the safer way to create contexts.&lt;/p&gt;
</comment>
                            <comment id="12523633" author="rahul@apache.org" created="Wed, 29 Aug 2007 17:32:11 +0000"  >&lt;p&gt;Thanks for the patch(es) Mike. I am traveling this till Sep 5th, I intend to look at this when am back.&lt;/p&gt;

&lt;p&gt;In the meantime, could you also fill out an Individual Contributor License Agreement (ICLA)? That is here (the fax number is on the form itself, you can mail it in too if you want):&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://www.apache.org/licenses/icla.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/icla.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This a one-time thing, and is needed for contributions such as this one which may contain new source files, for provenance and pedigree reasons. Let us know if you have any questions about the ICLA. Do ping this issue when you send it in and we can track its receipt. Thanks.&lt;/p&gt;</comment>
                            <comment id="12524281" author="mtillberg" created="Sat, 1 Sep 2007 13:42:42 +0000"  >&lt;p&gt;ICLA signed and submitted via fax.&lt;/p&gt;</comment>
                            <comment id="12524398" author="rahul@apache.org" created="Sun, 2 Sep 2007 20:09:02 +0000"  >&lt;p&gt;Great, I&apos;ll track its receipt (usually, a few days to being recorded).&lt;/p&gt;</comment>
                            <comment id="12548108" author="rahul@apache.org" created="Tue, 4 Dec 2007 03:36:34 +0000"  >&lt;p&gt;Fixed in SVN, thanks for the test cases. I&apos;ve added your name to the project contributors section.&lt;/p&gt;

&lt;p&gt;One caveat &amp;#8211; for derived events, Commons SCXML introduces _eventdatamap (since there are usually more than one derived events). Therefore, _eventdata in the test cases attached here needs to change to _eventdatamap.helloevent or _eventdatamap&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;helloevent&amp;#39;&amp;#93;&lt;/span&gt; (alternative syntax for event names that have the dot character in them).&lt;/p&gt;

&lt;p&gt;See this modified test case as an example (long, possibly fragmented URL below):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/scxml/trunk/src/test/java/org/apache/commons/scxml/custom-hello-world-04-jexl.xml?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/commons/proper/scxml/trunk/src/test/java/org/apache/commons/scxml/custom-hello-world-04-jexl.xml?view=markup&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12364563" name="CustomActionTest.java" size="10911" author="mtillberg" created="Sat, 25 Aug 2007 16:48:40 +0000"/>
                            <attachment id="12364562" name="HelloEvent.java" size="2511" author="mtillberg" created="Sat, 25 Aug 2007 16:47:54 +0000"/>
                            <attachment id="12364564" name="SCXMLTestHelper.patch" size="1162" author="mtillberg" created="Sat, 25 Aug 2007 17:13:09 +0000"/>
                            <attachment id="12364560" name="custom-hello-world-04-el.xml" size="1529" author="mtillberg" created="Sat, 25 Aug 2007 16:47:54 +0000"/>
                            <attachment id="12364561" name="custom-hello-world-04-jexl.xml" size="1521" author="mtillberg" created="Sat, 25 Aug 2007 16:47:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172710</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 49 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zznr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208079</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-53] Wild card event name handling on transitions is not in line with W3C WD</title>
                <link>https://issues.apache.org/jira/browse/SCXML-53</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The current W3C SCXML WD &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; states for wild card event names on transitions:&lt;/p&gt;

&lt;p&gt;&quot;Events have names which are matched against the &quot;event&quot; attribute of transitions. These names are strings consisting of alphanumeric characters plus the character &apos;.&apos; which is used to segment names into tokens. The &quot;event&quot; attribute of a transition may end with the wildcard &apos;.&lt;b&gt;&apos;, which will match zero or more tokens at the end of the processed event&apos;s name. Thus a transition with an &quot;event&quot; attribute of &apos;error.&lt;/b&gt;&apos; will match &apos;error&apos;, &apos;error.send&apos;, &apos;error.send.failed&apos;, etc. Furthermore, a transition with an &quot;event&quot; attribute consisting solely of &apos;*&apos; will match any event.&quot;&lt;/p&gt;

&lt;p&gt;From my understanding therefore the following example should work:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml&lt;br/&gt;
  xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
  version=&quot;1.0&quot; &lt;br/&gt;
  initialstate=&quot;s1&quot;&lt;br/&gt;
  id=&quot;demo&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;state id=&quot;s1&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;onentry&amp;gt;&lt;br/&gt;
		    &amp;lt;send event=&quot;success.start&quot;/&amp;gt;&lt;br/&gt;
		&amp;lt;/onentry&amp;gt;&lt;br/&gt;
		&amp;lt;transition event=&quot;success.*&quot; target=&quot;s2&quot;/&amp;gt;&lt;br/&gt;
	&amp;lt;/state&amp;gt;&lt;br/&gt;
	&amp;lt;state id=&quot;s2&quot;&amp;gt;&lt;br/&gt;
	&amp;lt;/state&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;But this transition does not match for the current commons-SCXML implementation (SNAPSHOT-0.7). Commons-SCXML does not expect the &quot;.*&quot;, instead the following works: &amp;lt;transition event=&quot;succcess&quot; .../&amp;gt;. &lt;/p&gt;

&lt;p&gt;Also the &amp;lt;transition event=&quot;*&quot;/&amp;gt; does not work, even though I don&apos;t know if this is really useful because it would match &quot;every&quot; internal .entry and .exit event. &lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Ingmar&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/TR/2007/WD-scxml-20070221/#events&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/2007/WD-scxml-20070221/#events&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12375800">SCXML-53</key>
            <summary>Wild card event name handling on transitions is not in line with W3C WD</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Aug 2007 21:58:33 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:53 +0000</updated>
                            <resolved>Thu, 6 Dec 2007 07:43:54 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12519237" author="rahul@apache.org" created="Sat, 11 Aug 2007 14:52:54 +0000"  >&lt;p&gt;Makes sense, there is a mismatch. The fix will cause a behavior change (in case anyone is relying on the earlier behavior, which has been in place since the first release), but I think we can / should address this in v0.7 with a clear mention in the release notes.&lt;/p&gt;</comment>
                            <comment id="12548111" author="rahul@apache.org" created="Tue, 4 Dec 2007 04:06:32 +0000"  >&lt;p&gt;As we get close to v0.7, I now have mixed feelings about making this change in a minor release.&lt;/p&gt;</comment>
                            <comment id="12548953" author="rahul@apache.org" created="Thu, 6 Dec 2007 07:43:53 +0000"  >&lt;p&gt;Since the wildcard part of the WD is highly unlikely to change, I&apos;ve gone ahead with this, a fix is in SVN. I&apos;ve also added the test case above, thanks for that.&lt;/p&gt;

&lt;p&gt;The other (somewhat open) question is with CHANGE_EVENTs generated by the engine (such as .entry, .exit, .done etc.). As you point out, these would considerably undermine the usability of event=&quot;&lt;b&gt;&quot; and hence those are currently discounted from the event=&quot;&lt;/b&gt;&quot; wildcard matching.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172709</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208056</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-52] Error on resolving conflicting transitions for compound states</title>
                <link>https://issues.apache.org/jira/browse/SCXML-52</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;There seems to be a problem on the resolution of conflicting transitions for compound states. See the following scxml document:&lt;/p&gt;

&lt;p&gt;&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; version=&quot;1.0&quot; initialstate=&quot;s1&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;datamodel&amp;gt;&lt;br/&gt;
        &amp;lt;data name=&quot;x&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/datamodel&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;state id=&quot;s1&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;initial&amp;gt;&lt;br/&gt;
            &amp;lt;transition target=&quot;s11&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/initial&amp;gt;&lt;/p&gt;

&lt;p&gt;        &amp;lt;transition event=&quot;event_1&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;assign name=&quot;x&quot;  expr=&quot;&apos;s1&apos;&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/transition&amp;gt;&lt;/p&gt;

&lt;p&gt;       &amp;lt;transition event=&quot;event_2&quot; target=&quot;s1&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;assign name=&quot;x&quot;  expr=&quot;&apos;s1&apos;&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/transition&amp;gt;&lt;/p&gt;

&lt;p&gt;        &amp;lt;state id=&quot;s11&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;transition event=&quot;event_1&quot;&amp;gt;&lt;br/&gt;
                       &amp;lt;assign name=&quot;x&quot;  expr=&quot;&apos;s11&apos;&quot;/&amp;gt;&lt;br/&gt;
            &amp;lt;/transition&amp;gt;&lt;br/&gt;
           &amp;lt;transition event=&quot;event_2&quot; target=&quot;s11&quot;&amp;gt;&lt;br/&gt;
                       &amp;lt;assign name=&quot;x&quot;  expr=&quot;&apos;s11&apos;&quot;/&amp;gt;&lt;br/&gt;
            &amp;lt;/transition&amp;gt;&lt;br/&gt;
        &amp;lt;/state&amp;gt;&lt;br/&gt;
    &amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;state id=&quot;s2&quot; final=&quot;true&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;The state machine enters a compound state s1 which contains another state s11 as its intitial state. Both states have transitions on event_1 and event_2. Note that event_1 has no target, whereas event_2 has a target towards the same state.&lt;/p&gt;

&lt;p&gt;For event_2 everything works as expected, i.e. only the transition on state s11 is executed and therefor s11 is reentered (I have a listener in my environment and can monitor this). &lt;/p&gt;

&lt;p&gt;The error occurs at event_1. On event_1 both transitions of s1 &lt;em&gt;and&lt;/em&gt; s11 are executed - but only once. After this, the state machine gets stuck (in particular the currentStates-List is empty). Any subsequent event will not cause any further action.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12374864">SCXML-52</key>
            <summary>Error on resolving conflicting transitions for compound states</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Jul 2007 21:24:00 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:53 +0000</updated>
                            <resolved>Fri, 30 Nov 2007 23:48:25 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12516103" author="ingmar" created="Fri, 27 Jul 2007 21:26:20 +0000"  >&lt;p&gt;Here is a short test case:&lt;/p&gt;

&lt;p&gt;// Uses SCXMLParser (latest WD)&lt;br/&gt;
public void testSCXMLExecutorTransitions05Sample() {&lt;br/&gt;
        SCXML scxml = SCXMLTestHelper.parse(transitions05);&lt;br/&gt;
        assertNotNull(scxml);&lt;br/&gt;
        exec = SCXMLTestHelper.getExecutor(scxml);&lt;br/&gt;
        assertNotNull(exec);&lt;br/&gt;
        try &lt;/p&gt;
{
            Set currentStates = SCXMLTestHelper.fireEvent(exec, &quot;event_2&quot;);
            assertEquals(1, currentStates.size());

            currentStates = SCXMLTestHelper.fireEvent(exec, &quot;event_1&quot;);
            assertEquals(1, currentStates.size());

        }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
            fail(e.getMessage());
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;Don&apos;t know if this is the right way to test it, but at least it shows that for event_1 the state machine is not in one state anymore (the list is empty).&lt;/p&gt;</comment>
                            <comment id="12516105" author="rahul@apache.org" created="Fri, 27 Jul 2007 21:45:20 +0000"  >&lt;p&gt;Thanks for the test case. I won&apos;t have any dev time this weekend, but will try to look at this next week.&lt;/p&gt;</comment>
                            <comment id="12517127" author="rahul@apache.org" created="Thu, 2 Aug 2007 02:37:13 +0000"  >&lt;p&gt;Fixed in trunk: &lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;rev=561998&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;rev=561998&lt;/a&gt; (also added a simplified version of your test case to the test suite).&lt;/p&gt;</comment>
                            <comment id="12519985" author="ingmar" created="Wed, 15 Aug 2007 14:51:04 +0000"  >&lt;p&gt;Unfortunately this fix introduced another bug. Now transitions in different regions of a parallel state machine are also discarded. Here is an example:&lt;/p&gt;

&lt;p&gt;&amp;lt;scxml version=&quot;1.0&quot; xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; initialstate=&quot;main&quot; id=&quot;test&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;state id = &quot;main&quot;&amp;gt;&lt;br/&gt;
	&amp;lt;parallel id =&quot;para&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;state id=&quot;s1&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;initial&amp;gt;&lt;br/&gt;
				&amp;lt;transition target=&quot;s11&quot;/&amp;gt;&lt;br/&gt;
			&amp;lt;/initial&amp;gt;&lt;br/&gt;
			&amp;lt;state id=&quot;s11&quot;&amp;gt;&lt;br/&gt;
				&amp;lt;transition event=&quot;event1&quot; target=&quot;s12&quot;/&amp;gt;&lt;br/&gt;
			&amp;lt;/state&amp;gt;&lt;br/&gt;
			&amp;lt;state id=&quot;s12&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;/state&amp;gt;&lt;br/&gt;
		&amp;lt;/state&amp;gt;&lt;br/&gt;
		&amp;lt;state id=&quot;s2&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;initial&amp;gt;&lt;br/&gt;
				&amp;lt;transition target=&quot;s21&quot;/&amp;gt;&lt;br/&gt;
			&amp;lt;/initial&amp;gt;&lt;br/&gt;
			&amp;lt;state id=&quot;s21&quot;&amp;gt;&lt;br/&gt;
				&amp;lt;transition event=&quot;event1&quot; target=&quot;s22&quot;/&amp;gt;&lt;br/&gt;
			&amp;lt;/state&amp;gt;&lt;br/&gt;
			&amp;lt;state id=&quot;s22&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;/state&amp;gt;&lt;br/&gt;
		&amp;lt;/state&amp;gt;&lt;br/&gt;
	&amp;lt;/parallel&amp;gt;&lt;br/&gt;
&amp;lt;/state&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;On triggering event &quot;event1&quot; one would expect that two transistions are executed. But only one will be taken.&lt;/p&gt;

&lt;p&gt;Here is a test case:&lt;/p&gt;

&lt;p&gt;    public void testTieBreaker05() {&lt;br/&gt;
        exec = SCXMLTestHelper.getExecutor(tiebreaker05);&lt;br/&gt;
        assertNotNull(exec);&lt;/p&gt;

&lt;p&gt;        Set currentStates = exec.getCurrentStatus().getStates();&lt;br/&gt;
        assertEquals(2, currentStates.size());&lt;br/&gt;
        String id = ((State)currentStates.iterator().next()).getId();&lt;br/&gt;
        Iterator iter = currentStates.iterator();&lt;/p&gt;

&lt;p&gt;        while (iter.hasNext()) &lt;/p&gt;
{
        	id = ((State)iter.next()).getId();
        	assertTrue(id.equals(&quot;s11&quot;) || id.equals(&quot;s21&quot;));
        }

&lt;p&gt;        currentStates = SCXMLTestHelper.fireEvent(exec, &quot;event1&quot;);&lt;br/&gt;
        assertEquals(2, currentStates.size());&lt;br/&gt;
        id = ((State)currentStates.iterator().next()).getId();&lt;br/&gt;
        iter = currentStates.iterator();&lt;/p&gt;

&lt;p&gt;        while (iter.hasNext()) &lt;/p&gt;
{
        	id = ((State)iter.next()).getId();
        	assertTrue(id.equals(&quot;s12&quot;) || id.equals(&quot;s22&quot;));
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;It shows that the the sub state machine remains in state s21 (i.e. only the transition s11 --&amp;gt; s12 is taken)&lt;/p&gt;

</comment>
                            <comment id="12520107" author="rahul@apache.org" created="Wed, 15 Aug 2007 21:49:02 +0000"  >&lt;p&gt;I remember thinking about this and intended to get clarification from the WG. I will post back once I do (probably a week, give and take).&lt;/p&gt;</comment>
                            <comment id="12521205" author="rahul@apache.org" created="Mon, 20 Aug 2007 19:22:25 +0000"  >&lt;p&gt;This has been fixed in trunk, and a test case added. If you are in a position to try a latest build, please do so, thanks.&lt;/p&gt;</comment>
                            <comment id="12521367" author="ingmar" created="Tue, 21 Aug 2007 09:09:33 +0000"  >&lt;p&gt;Hi Rahul,&lt;/p&gt;

&lt;p&gt;there is still an issue on a more complex use case with your fixed version.&lt;br/&gt;
Do you want me to send the test case to JIRA or shall I send it to you&lt;br/&gt;
directly?&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ingmar.&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="12521370" author="ingmar" created="Tue, 21 Aug 2007 09:21:31 +0000"  >&lt;p&gt;Here is a use case which still not works:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml version=&quot;1.0&quot; xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
initialstate=&quot;main&quot; id=&quot;test&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt; &amp;lt;datemodel&amp;gt;&lt;br/&gt;
  &amp;lt;data id=&quot;foo&quot; expr=&quot;&apos;1&apos;&quot;/&amp;gt;&lt;br/&gt;
  &amp;lt;data id=&quot;bar&quot; expr=&quot;&apos;1&apos;&quot;/&amp;gt;&lt;br/&gt;
 &amp;lt;/datemodel&amp;gt;&lt;br/&gt;
 &amp;lt;state id = &quot;main&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;parallel id =&quot;parallel&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;state id=&quot;s1&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;initial&amp;gt;&lt;br/&gt;
     &amp;lt;transition target=&quot;s11&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/initial&amp;gt;&lt;br/&gt;
    &amp;lt;state id=&quot;s11&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;transition event=&quot;event1&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;send event=&quot;interal_event1&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;send event=&quot;interal_event2&quot;/&amp;gt;&lt;br/&gt;
     &amp;lt;/transition&amp;gt;&lt;br/&gt;
     &amp;lt;transition event=&quot;event2&quot; cond=&quot;foo == 2 and bar == 2&quot; target=&quot;s12&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/state&amp;gt;&lt;br/&gt;
    &amp;lt;state id=&quot;s12&quot;/&amp;gt;&lt;br/&gt;
   &amp;lt;/state&amp;gt;&lt;br/&gt;
   &amp;lt;state id=&quot;s2&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;transition event=&quot;interal_event1&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;assign name=&quot;foo&quot; expr=&quot;&apos;2&apos;&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/transition&amp;gt;&lt;br/&gt;
    &amp;lt;transition event=&quot;interal_event2&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;assign name=&quot;bar&quot; expr=&quot;&apos;2&apos;&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/transition&amp;gt;&lt;br/&gt;
   &amp;lt;/state&amp;gt;&lt;br/&gt;
  &amp;lt;/parallel&amp;gt;&lt;br/&gt;
 &amp;lt;/state&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;On event1 the state machine generates two internal events. While executing&lt;br/&gt;
the two internal events, the second transition on &quot;internal_event2&quot; gets&lt;br/&gt;
removed - which is not correct.&lt;/p&gt;
</comment>
                            <comment id="12521861" author="rahul@apache.org" created="Wed, 22 Aug 2007 17:21:35 +0000"  >&lt;p&gt;This is a combination of two things:&lt;/p&gt;

&lt;p&gt;1) Document order priority &amp;#8211; so on entering s1 below, T1 wins:&lt;/p&gt;

&lt;p&gt;  &amp;lt;state id=&quot;s1&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;onentry&amp;gt;&lt;br/&gt;
      &amp;lt;send event=&quot;interal_event1&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/onentry&amp;gt;&lt;br/&gt;
    &amp;lt;transition event=&quot;interal_event1&quot;/&amp;gt; &amp;lt;!-- T1 --&amp;gt;&lt;br/&gt;
    &amp;lt;transition event=&quot;interal_event1&quot;/&amp;gt; &amp;lt;!-- T2 --&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;2) Commons SCXML processes all &quot;generated&quot; events (includes implicit events and &amp;lt;send&amp;gt; usages such as above etc.) in the same subsequent microstep. Therefore, both transitions in your example become candidate transitions and the first in document order wins.&lt;/p&gt;

&lt;p&gt;Behavior in (2) is open to interpretation of the spec ATM, but interim, you may be able to &quot;chain&quot; your transitions to tease apart the two internal_events into their own microsteps, i.e.&lt;/p&gt;

&lt;p&gt;  &amp;lt;state id=&quot;s1&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;onentry&amp;gt;&lt;br/&gt;
      &amp;lt;send event=&quot;interal_event1&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/onentry&amp;gt;&lt;br/&gt;
    &amp;lt;transition event=&quot;interal_event1&quot;&amp;gt; &amp;lt;!-- T1 --&amp;gt;&lt;br/&gt;
      &amp;lt;send event=&quot;internal_event2&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/transition&amp;gt;&lt;br/&gt;
    &amp;lt;transition event=&quot;interal_event2&quot;/&amp;gt; &amp;lt;!-- T2 --&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;I understand such chaining may not be possible across the board.&lt;/p&gt;</comment>
                            <comment id="12547340" author="rahul@apache.org" created="Fri, 30 Nov 2007 23:48:25 +0000"  >&lt;p&gt;Resolving since the initial issue recorded here has been fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172708</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zz67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208000</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-51] &lt;assign&gt; with location and expr both containing datamodel expressions concatenates old and new values</title>
                <link>https://issues.apache.org/jira/browse/SCXML-51</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;If you have the following datamodel:     &lt;/p&gt;

&lt;p&gt;    &amp;lt;datamodel&amp;gt;&lt;br/&gt;
        &amp;lt;data name=&quot;RAD&quot;&amp;gt;&lt;br/&gt;
               &amp;lt;rad:timeout&amp;gt;10&amp;lt;/rad:timeout&amp;gt;&lt;br/&gt;
        &amp;lt;/data&amp;gt;&lt;br/&gt;
        &amp;lt;data name=&quot;CONFIG&quot;&amp;gt;&lt;br/&gt;
               &amp;lt;rad:short&amp;gt;20&amp;lt;/rad:short&amp;gt;&lt;br/&gt;
        &amp;lt;/data&amp;gt;&lt;br/&gt;
    &amp;lt;/datamodel&amp;gt;&lt;/p&gt;

&lt;p&gt;and execute this assign:&lt;/p&gt;

&lt;p&gt;            &amp;lt;assign location=&quot;Data(RAD, &apos;rad:timeout&apos;)&quot; expr=&quot;Data(CONFIG, &apos;rad:short&apos;)&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;you end up with the data value of &quot;2010&quot; stored in rad:timeout.  The correct data value should be &quot;20&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12374662">SCXML-51</key>
            <summary>&lt;assign&gt; with location and expr both containing datamodel expressions concatenates old and new values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rahul@apache.org">Rahul Akolkar</assignee>
                                    <reporter username="crisnack">Chris Nack</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Jul 2007 14:25:56 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:52 +0000</updated>
                            <resolved>Fri, 27 Jul 2007 21:00:58 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12516092" author="rahul@apache.org" created="Fri, 27 Jul 2007 20:13:01 +0000"  >&lt;p&gt;This has to do with the fact that we do not remove existing child nodes before adding new ones in the above usage scenario. I tend to agree that this doesn&apos;t match the semantics of assignment, and furthermore, in situations like the above (where the only children are text nodes) this definitely leads to unexpected results. I&apos;ll look into this, setting fix version to next release (v0.7).&lt;/p&gt;

&lt;p&gt;Thanks for illustrating how to reproduce the issue. Since you have most of what is needed, it&apos;d be great if you could submit JUnit testcase(s) with the report (for example, see tests in Commons SCXML codebase) &amp;#8211; that&apos;d save a bit of time in having to reconstruct these, so would be very helpful.&lt;/p&gt;</comment>
                            <comment id="12516100" author="rahul@apache.org" created="Fri, 27 Jul 2007 21:00:58 +0000"  >&lt;p&gt;Should be fixed in trunk, added a similar test to the test suite.&lt;/p&gt;</comment>
                            <comment id="12519020" author="crisnack" created="Fri, 10 Aug 2007 14:05:44 +0000"  >&lt;p&gt;Thanks for fixing this Rahul,&lt;br/&gt;
Do you still need a junit testcase?&lt;/p&gt;


&lt;p&gt;Thanks,&lt;br/&gt;
Chris&lt;/p&gt;
</comment>
                            <comment id="12519234" author="rahul@apache.org" created="Sat, 11 Aug 2007 14:47:47 +0000"  >&lt;p&gt;We have a testcase now, based on your example (see state with id &quot;assign2&quot; in the document below):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/commons/proper/scxml/trunk/src/test/java/org/apache/commons/scxml/model/assign-test.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/commons/proper/scxml/trunk/src/test/java/org/apache/commons/scxml/model/assign-test.xml&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So while more testcases are always welcome, there isn&apos;t a pressing need anymore in terms of coverage for this issue. Thanks for asking.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172707</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 13 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zz5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207996</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-49] SimpleSCXMLInvoker may miss transition to final state</title>
                <link>https://issues.apache.org/jira/browse/SCXML-49</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The current implementation of SimpleSCXMLInvoker assumes that only external events, handled by parentEvents(), may cause the child state machine to go move a final state. But in case where the invoked state machine moves to a final state directly (while executing the initial state, see example) the parent never receives an &quot;invoke.done&quot;. &lt;/p&gt;

&lt;p&gt;&amp;lt;scxml xmlns=&lt;a href=&quot;http://www.w3.org/2005/07/scxml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/2005/07/scxml&lt;/a&gt; version=&quot;1.0&quot; initialstate=&quot;state1&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;state id=&quot;state1&quot;&amp;gt;&lt;br/&gt;
          &amp;lt;onentry&amp;gt; &lt;br/&gt;
               &amp;lt;send event=&quot;foo&quot;/&amp;gt;&lt;br/&gt;
          &amp;lt;/onentry&amp;gt;&lt;/p&gt;

&lt;p&gt;          &amp;lt;transition event=&quot;foo&quot; target=&quot;state2&quot; /&amp;gt;&lt;br/&gt;
     &amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;     &amp;lt;state id=&quot;state2&quot; final=&quot;true&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12373285">SCXML-49</key>
            <summary>SimpleSCXMLInvoker may miss transition to final state</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rahul@apache.org">Rahul Akolkar</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Jul 2007 09:08:45 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:52 +0000</updated>
                            <resolved>Mon, 6 Aug 2007 21:38:38 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12511159" author="rahul@apache.org" created="Mon, 9 Jul 2007 15:32:45 +0000"  >&lt;p&gt;Setting fix version to next release.&lt;/p&gt;</comment>
                            <comment id="12518027" author="rahul@apache.org" created="Mon, 6 Aug 2007 21:38:38 +0000"  >&lt;p&gt;Fixed in trunk. Thanks for the test case.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172705</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zz4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207993</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-48] Cannot create more than one subclass of AbstractStateMachine</title>
                <link>https://issues.apache.org/jira/browse/SCXML-48</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Similar to the issue described in &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-47&quot; title=&quot;Provide a state machine support class to allow for delegation.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-47&quot;&gt;&lt;del&gt;SCXML-47&lt;/del&gt;&lt;/a&gt;, the following test case will fail:&lt;/p&gt;

&lt;p&gt;    public void testMoreThanOneScxmlDocument() throws Exception &lt;/p&gt;
{
        URL fooScxmlDocument = getClass().getResource(&quot;foo.xml&quot;);
        URL barScxmlDocument = getClass().getResource(&quot;bar.xml&quot;);

        Foo foo = new Foo(fooScxmlDocument);
        Bar bar = new Bar(barScxmlDocument);

        assertTrue(fooCalled);
        // bar&apos;s initialstate &quot;bar&quot; never called, since bar&apos;s AbstractStateMachine has
        // static reference to stateMachine for foo.xml
        assertTrue(barCalled);
    }

&lt;p&gt;    private class Foo extends AbstractStateMachine {&lt;/p&gt;

&lt;p&gt;        public Foo(final URL scxmlDocument) &lt;/p&gt;
{
            super(scxmlDocument);
        }&lt;br/&gt;
&lt;br/&gt;
        public void foo() {
            fooCalled = true;
        }&lt;br/&gt;
    }&lt;br/&gt;
&lt;br/&gt;
    private class Bar extends AbstractStateMachine {&lt;br/&gt;
&lt;br/&gt;
        public Bar(final URL scxmlDocument) {            super(scxmlDocument);        }

&lt;p&gt;        public void bar() &lt;/p&gt;
{
            barCalled = true;
        }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;with simple SCXML files&lt;/p&gt;

&lt;p&gt;foo.xml:&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; version=&quot;1.0&quot; initialstate=&quot;foo&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;foo&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;

&lt;p&gt;bar.xml:&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/scxml&quot; version=&quot;1.0&quot; initialstate=&quot;bar&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;bar&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;


&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.commons.scxml.env.EnvTestSuite&lt;br/&gt;
org.apache.commons.scxml.env.AbstractStateMachineTest$Bar.foo()&lt;br/&gt;
java.lang.NoSuchMethodException: org.apache.commons.scxml.env.AbstractStateMachineTest$Bar.foo()&lt;br/&gt;
        at java.lang.Class.getDeclaredMethod(Class.java:1937)&lt;br/&gt;
        at org.apache.commons.scxml.env.AbstractStateMachine.invoke(AbstractStateMachine.java:212)&lt;br/&gt;
        at org.apache.commons.scxml.env.AbstractStateMachine$EntryListener.onEntry(AbstractStateMachine.java:269)&lt;/p&gt;


&lt;p&gt;Testsuite: org.apache.commons.scxml.env.EnvTestSuite&lt;br/&gt;
Tests run: 21, Failures: 2, Errors: 0, Time elapsed: 0.391 sec&lt;/p&gt;

&lt;p&gt;Testcase: testMoreThanOneScxmlDocument(org.apache.commons.scxml.env.AbstractStateMachineTest):  FAILED&lt;br/&gt;
junit.framework.AssertionFailedError&lt;br/&gt;
        at org.apache.commons.scxml.env.AbstractStateMachineTest.testMoreThanOneScxmlDocument(AbstractStateMachineTest.java:60)&lt;/p&gt;

&lt;p&gt;Testcase: testStopWatch(org.apache.commons.scxml.env.StopWatchTest):    FAILED&lt;br/&gt;
expected:&amp;lt;reset&amp;gt; but was:&amp;lt;foo&amp;gt;&lt;br/&gt;
junit.framework.ComparisonFailure: expected:&amp;lt;reset&amp;gt; but was:&amp;lt;foo&amp;gt;&lt;br/&gt;
        at org.apache.commons.scxml.env.StopWatchTest.testStopWatch(StopWatchTest.java:56)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12372451">SCXML-48</key>
            <summary>Cannot create more than one subclass of AbstractStateMachine</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="heuermh@acm.org">Michael Heuer</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jun 2007 16:40:44 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:52 +0000</updated>
                            <resolved>Tue, 26 Jun 2007 21:01:27 +0000</resolved>
                                                    <fixVersion>0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12508231" author="heuermh@acm.org" created="Tue, 26 Jun 2007 16:41:19 +0000"  >&lt;p&gt;unit test for AbstractStateMachine as described&lt;/p&gt;</comment>
                            <comment id="12508324" author="rahul@apache.org" created="Tue, 26 Jun 2007 21:01:27 +0000"  >&lt;p&gt;Thanks for the tests. They&apos;ve been added to the test suite and a fix has been applied. Should be available in tomorrow&apos;s nightly (or immediately via trunk).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12360599" name="abstract-state-machine-test-src.tar.gz" size="1478" author="heuermh@acm.org" created="Tue, 26 Jun 2007 16:41:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172704</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zz47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207991</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-45] Payload of events sent to current scxml session using &lt;send&gt; tag not injected into engine</title>
                <link>https://issues.apache.org/jira/browse/SCXML-45</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Events which are sent to the current scxml session using the &amp;lt;send&amp;gt; tag (i.e. target = empty) may contain payload specified by the namelist attribute. This payload is currently not fed back into engine when the event is created.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12370426">SCXML-45</key>
            <summary>Payload of events sent to current scxml session using &lt;send&gt; tag not injected into engine</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rahul@apache.org">Rahul Akolkar</assignee>
                                    <reporter username="ingmar">Ingmar Kliche</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 May 2007 06:42:13 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:52 +0000</updated>
                            <resolved>Tue, 29 May 2007 16:37:14 +0000</resolved>
                                    <version>0.6</version>
                                    <fixVersion>0.7</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12499839" author="rahul@apache.org" created="Tue, 29 May 2007 16:37:14 +0000"  >&lt;p&gt;Copying the commit message from r542582:&lt;/p&gt;

&lt;p&gt;This has been implemented (with a test case), however note the following caveat &amp;#8211;&lt;/p&gt;

&lt;p&gt;The spec doesn&apos;t clarify how multiple &amp;lt;send&amp;gt; elements that create derived events should be handled, so for example:&lt;/p&gt;

&lt;p&gt;&amp;lt;onentry&amp;gt;&lt;br/&gt;
 &amp;lt;send event=&quot;ev.foo&quot; namelist=&quot;alpha beta&quot;/&amp;gt;&lt;br/&gt;
 &amp;lt;send event=&quot;ev.bar&quot; namelist=&quot;gamma delta&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/onentry&amp;gt;&lt;/p&gt;

&lt;p&gt;I think they should be processed together (this makes sense to leverage parallel regions for example), and due to that &apos;_eventdata&apos; becomes ambiguous in this scenario. The Commons SCXML implementation introduces an implicit variable &apos;_eventdatamap&apos; for such scenarios wherein the event datas are stored keyed by event name.&lt;/p&gt;

&lt;p&gt;So, the two &amp;lt;send&amp;gt; events above could be processed by two regions like so:&lt;/p&gt;

&lt;p&gt;&amp;lt;parallel&amp;gt;&lt;/p&gt;

&lt;p&gt; &amp;lt;state id=&quot;region1&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;transition event=&quot;ev.foo&quot; cond=&quot;_eventdatamap&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;ev.foo&amp;#39;&amp;#93;&lt;/span&gt;.alpha eq &apos;somevalue&apos;&quot;&lt;br/&gt;
                target=&quot;...&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;!-- ... --&amp;gt;&lt;/p&gt;

&lt;p&gt; &amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt; &amp;lt;state id=&quot;region2&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;transition event=&quot;ev.bar&quot; cond=&quot;_eventdatamap&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;#39;ev.bar&amp;#39;&amp;#93;&lt;/span&gt;.delta eq &apos;othervalue&apos;&quot;&lt;br/&gt;
                target=&quot;...&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;!-- ... --&amp;gt;&lt;/p&gt;

&lt;p&gt; &amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt; &amp;lt;!-- ... --&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/parallel&amp;gt;&lt;/p&gt;

&lt;p&gt;To summarize, the _eventdatamap variable needs to be used in association with &quot;derived&quot; (such as &amp;lt;send&amp;gt; being discussed here) events. Also note that this behavior may change if there is clarity in the specification at some point.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172701</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 24 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208076</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-42] SCXML exception </title>
                <link>https://issues.apache.org/jira/browse/SCXML-42</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Hi there,&lt;br/&gt;
While implementing the parallelism in SCXML we are encountering an exception which I am attaching herewith. Is there any work around for this.&lt;br/&gt;
2007-04-12 11:52:44,922 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;scxml.app.log&amp;#93;&lt;/span&gt; null: Slot Init State&lt;br/&gt;
2007-04-12 11:52:44,922 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;scxml.app.log&amp;#93;&lt;/span&gt; null: Task Init State&lt;br/&gt;
2007-04-12 11:52:44,954 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;mdb&amp;#93;&lt;/span&gt; SQL Query - select T_Schedule.SCH_ID,SCH_TYPE,SCH_KIND,SCH_USER,&lt;br/&gt;
SCH_PRIORITY,SCH_NAME,SCH_CRON,SCH_DISABLE,SCH_RELID,SCH_PARENTID,SCH_AB&lt;br/&gt;
ORT_INFO,SCH_TIME_POLICY,SCH_KIND,SCH_SUB_TYPE,SLOT_ID,RESID&lt;br/&gt;
,RESTYPE,SLOT_FROM_TIME , SLOT_TO_TIME,SLOT_CAPACITY , SLOT_STATE,aTask.TASK_ID ,aTask.IRESID,aTask.LRESID ,aTask.TASK_OPKID , aTask.TASK_OPKTYPE , aTask.TASK_JOBCMDSTR ,aTask.TASK_DELTA ,aTask.TASK_STATE , bTask.TASK_ID ,bTask.IRESID,bTask.LRESID ,bTask.TASK_OPKID , bTask.TASK_OPKTYPE , bTask.TASK_JOBCMDSTR ,bTask.TASK_DELTA ,bTask.TASK_STATE,aTask.TASK_TIME,bTask.TASK_TIME from T_schedule,T_SLOT,T_TASK aTask,T_TASK bTASK where T_Schedule.SCH_ID=?&lt;br/&gt;
and T_Schedule.SCH_ID=T_SLOT.SCH_ID and T_SCHEDULE.SCH_ID=aTASK.SCH_ID and T_SCHEDULE.SCH_ID=bTASK.SCH_ID and aTASK.TASK_ID != bTASK.TASK_ID group by t_schedule.sch_id&lt;br/&gt;
2007-04-12 11:52:44,954 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;STDOUT&amp;#93;&lt;/span&gt; MSlotTaskFSM :AQUIRE inside MSlotTaskFSM of aTask:&lt;br/&gt;
2007-04-12 11:52:44,954 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;STDOUT&amp;#93;&lt;/span&gt; MSlotTaskFSM :RELEASE inside MSlotTaskFSM of bTask:&lt;br/&gt;
2007-04-12 11:52:44,954 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;STDOUT&amp;#93;&lt;/span&gt; Inside ProcessEvent :Schedule Id is :11:506&lt;br/&gt;
2007-04-12 11:52:45,109 WARN&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.commons.scxml.env.SimpleErrorReporter&amp;#93;&lt;/span&gt; NON_DETERMINISTIC (Multiple conflicting transitions enabled.):  &lt;span class=&quot;error&quot;&gt;&amp;#91;transition (event = CreateATaskEvent, cond = _eventdata.slotAvailable=true, from = /testMain/null/slotState/MSlotInitState, to = /testMain/null/slotState/MSlotHeldState.aquireSlot), transition (event = CreateATaskEvent, cond = !_eventdata.slotAvailable, from = /testMain/null/slotState/MSlotInitState, to = /testMain/null/slotState/MSlotQueuedState.queueSlot), transition (event = CreateATaskEvent, cond = _eventdata.slotavailable=true, from = /testMain/null/slotState/MSlotInitState, to = /testMain/null/slotState/MSlotLockedState.lockSlot)&amp;#93;&lt;/span&gt;&lt;br/&gt;
2007-04-12 11:52:45,109 WARN&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.commons.scxml.env.SimpleErrorReporter&amp;#93;&lt;/span&gt; ILLEGAL_CONFIG (Multiple OR states active for state slotState):&lt;br/&gt;
/testMain/null/slotState :&lt;br/&gt;
[/testMain/null/slotState/MSlotHeldState.aquireSlot,&lt;br/&gt;
/testMain/null/slotState/MSlotQueuedState.queueSlot,&lt;br/&gt;
/testMain/null/slotState/MSlotLockedState.lockSlot]&lt;br/&gt;
2007-04-12 11:52:45,109 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;com.hp.m.msched.core.MSlotTaskFSM&amp;#93;&lt;/span&gt;&lt;br/&gt;
Illegal state machine configuration!&lt;br/&gt;
org.apache.commons.scxml.model.ModelException: Illegal state machine configuration!&lt;br/&gt;
	at&lt;br/&gt;
org.apache.commons.scxml.semantics.SCXMLSemanticsImpl.followTransitions(&lt;br/&gt;
SCXMLSemanticsImpl.java:695)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.commons.scxml.SCXMLExecutor.triggerEvents(SCXMLExecutor.java:&lt;br/&gt;
127)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.commons.scxml.SCXMLExecutor.triggerEvent(SCXMLExecutor.java:1&lt;br/&gt;
60)&lt;br/&gt;
	at&lt;br/&gt;
com.hp.m.msched.core.MSlotTaskFSM.fireEvent(MSlotTaskFSM.java:151)&lt;br/&gt;
	at&lt;br/&gt;
com.hp.m.msched.core.MScheduleController.processEvent(MScheduleControlle&lt;br/&gt;
r.java:71)&lt;br/&gt;
	at&lt;br/&gt;
com.hp.m.msched.core.MScheduleResourceController.processMessage(MSchedul&lt;br/&gt;
eResourceController.java:171)&lt;br/&gt;
	at&lt;br/&gt;
com.hp.m.msched.mmsg.MSchedSCNMessageHandler.processMessage(MSchedSCNMes&lt;br/&gt;
sageHandler.java:38)&lt;br/&gt;
	at com.hp.m.mmsg.jms.mdb.MDB.onMessage(MDB.java:49)&lt;br/&gt;
	at com.hp.m.mmsg.jms.mdb.MSchedMDB.onMessage(MSchedMDB.java:9)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at&lt;br/&gt;
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.jav&lt;br/&gt;
a:39)&lt;br/&gt;
	at&lt;br/&gt;
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessor&lt;br/&gt;
Impl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:324)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.invocation.Invocation.performCall(Invocation.java:359)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.ejb.MessageDrivenContainer$ContainerInterceptor.invoke(Message&lt;br/&gt;
DrivenContainer.java:495)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.resource.connectionmanager.CachedConnectionInterceptor.invoke(&lt;br/&gt;
CachedConnectionInterceptor.java:158)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.ejb.plugins.CallValidationInterceptor.invoke(CallValidationInt&lt;br/&gt;
erceptor.java:63)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.ejb.plugins.AbstractTxInterceptor.invokeNext(AbstractTxInterce&lt;br/&gt;
ptor.java:121)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.ejb.plugins.AbstractTxInterceptorBMT.invokeNext(AbstractTxInte&lt;br/&gt;
rceptorBMT.java:173)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.ejb.plugins.MessageDrivenTxInterceptorBMT.invoke(MessageDriven&lt;br/&gt;
TxInterceptorBMT.java:47)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.ejb.plugins.MessageDrivenInstanceInterceptor.invoke(MessageDri&lt;br/&gt;
venInstanceInterceptor.java:116)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.ejb.plugins.RunAsSecurityInterceptor.invoke(RunAsSecurityInter&lt;br/&gt;
ceptor.java:109)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:205)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.ejb.plugins.ProxyFactoryFinderInterceptor.invoke(ProxyFactoryF&lt;br/&gt;
inderInterceptor.java:136)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.ejb.MessageDrivenContainer.internalInvoke(MessageDrivenContain&lt;br/&gt;
er.java:402)&lt;br/&gt;
	at org.jboss.ejb.Container.invoke(Container.java:954)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.ejb.plugins.jms.JMSContainerInvoker.invoke(JMSContainerInvoker&lt;br/&gt;
.java:987)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.ejb.plugins.jms.JMSContainerInvoker$MessageListenerImpl.onMess&lt;br/&gt;
age(JMSContainerInvoker.java:1287)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.jms.asf.StdServerSession.onMessage(StdServerSession.java:266)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.mq.SpyMessageConsumer.sessionConsumerProcessMessage(SpyMessage&lt;br/&gt;
Consumer.java:902)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.mq.SpyMessageConsumer.addMessage(SpyMessageConsumer.java:170)&lt;br/&gt;
	at org.jboss.mq.SpySession.run(SpySession.java:323)&lt;br/&gt;
	at&lt;br/&gt;
org.jboss.jms.asf.StdServerSession.run(StdServerSession.java:194)&lt;br/&gt;
	at&lt;br/&gt;
EDU.oswego.cs.dl.util.concurrent.PooledExecutor$Worker.run(PooledExecuto&lt;br/&gt;
r.java:743)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:534)&lt;br/&gt;
2007-04-12 11:52:45,234 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;STDOUT&amp;#93;&lt;/span&gt; After process Event : inside processMessage&lt;br/&gt;
2007-04-12 11:52:45,234 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;STDOUT&amp;#93;&lt;/span&gt; Inside the&lt;br/&gt;
checkForEventsInEventQueue: resId:0:1&lt;br/&gt;
2007-04-12 11:52:45,234 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;STDOUT&amp;#93;&lt;/span&gt; Before if - Resource Id in getEventQueue is :0:1&lt;br/&gt;
2007-04-12 11:52:45,249 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;STDOUT&amp;#93;&lt;/span&gt; Inside if - Resource Id in getEventQueue is :0:1&lt;br/&gt;
2007-04-12 11:52:45,249 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;STDOUT&amp;#93;&lt;/span&gt; eventQueue.size():0&lt;br/&gt;
2007-04-12 11:52:45,249 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;STDOUT&amp;#93;&lt;/span&gt; After  checkForEventsInEventQueue&lt;br/&gt;
2007-04-12 11:52:45,265 DEBUG&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;com.hp.m.msched.mmsg.MSchedSCNMessageHandler&amp;#93;&lt;/span&gt; Finished SCN message processing&lt;br/&gt;
2007-04-12 11:52:45,265 DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;com.hp.m.mmsg.jms.mdb.MDB&amp;#93;&lt;/span&gt; Finished processing the message&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------&lt;br/&gt;
To unsubscribe, e-mail: commons-user-unsubscribe@jakarta.apache.org&lt;br/&gt;
For additional commands, e-mail: commons-user-help@jakarta.apache.org&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Windows&lt;/p&gt;</environment>
        <key id="12367038">SCXML-42</key>
            <summary>SCXML exception </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="johnpremi">Premi John</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Apr 2007 08:23:33 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:51 +0000</updated>
                            <resolved>Thu, 12 Apr 2007 17:43:57 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12488436" author="rahul@apache.org" created="Thu, 12 Apr 2007 17:43:57 +0000"  >&lt;p&gt;Please post questions to the user list first. Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172698</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1003j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208150</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-38] spec and semantics of initialstate attribute not clear for external state</title>
                <link>https://issues.apache.org/jira/browse/SCXML-38</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The WD-SCXML is not fully consistent if the initialstate attribute is required for an external state, that is a state that has a src attribute pointing to a file containing its content.&lt;/p&gt;

&lt;p&gt;The attribute details (WD 3.1.1) define the initialstate attribute as required, without any exception for external states.&lt;br/&gt;
The example Test2Sub1.scxml (WD F.1) does not have a initialstate attribute.&lt;/p&gt;

&lt;p&gt;If this is only a minor omission in the example, the real issue is: how does an initialstate attribute affect the behavior of the state chart?&lt;/p&gt;

&lt;p&gt;So far this would be only an issue with the WD.&lt;br/&gt;
The commons SCXML implementation decided to treat the initialstate attribute as required.&lt;br/&gt;
Demonstration code follows.&lt;/p&gt;

&lt;p&gt;The issue with the commons implementation is:&lt;br/&gt;
It is not clear which (state) id can be given in the initialstate attribute of an external state SCXML file and what this means.&lt;/p&gt;

&lt;p&gt;The id of the external state itself is not accepted. See second demonstration code.&lt;/p&gt;


&lt;p&gt;Demo - initialstate required:&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;	@Test&lt;br/&gt;
	public void externalStateWithoutInitialstate() throws FileNotFoundException,&lt;br/&gt;
			IOException, SAXException, ModelException {&lt;br/&gt;
		final URL definition = getClass().getClassLoader().getResource(&lt;br/&gt;
				&quot;externalStateWithoutInitialstate-main.scxml&quot;);&lt;br/&gt;
		try &lt;/p&gt;
{
			SCXMLDigester.digest(definition, new SimpleErrorHandler());
			fail();
		} catch (ModelException e) {
			assertEquals(
					&quot;Initial state null or not a descendant of state with ID \&quot;start\&quot;&quot;,
					e.getMessage());
		}&lt;br/&gt;
	}&lt;br/&gt;
----&lt;br/&gt;
&lt;br/&gt;
main scxml&lt;br/&gt;
----&lt;br/&gt;
&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml&lt;br/&gt;
  xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
  version=&quot;1.0&quot;&lt;br/&gt;
  initialstate=&quot;start&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;start&quot; src=&quot;externalStateWithoutInitialstate-external.scxml&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;br/&gt;
----&lt;br/&gt;
&lt;br/&gt;
included scxml &lt;br/&gt;
note: no initalstate&lt;br/&gt;
----&lt;br/&gt;
&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml&lt;br/&gt;
  xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
  version=&quot;1.0&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;start&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Demo - with initialstate pointing to external state&lt;br/&gt;
-----&lt;br/&gt;
	@Test&lt;br/&gt;
	public void externalStateWithInitialstate() throws FileNotFoundException,&lt;br/&gt;
			IOException, SAXException, ModelException {&lt;br/&gt;
		final URL definition = getClass().getClassLoader().getResource(&lt;br/&gt;
				&quot;externalStateWithInitialstate-main.scxml&quot;);&lt;br/&gt;
		try {			SCXMLDigester.digest(definition, new SimpleErrorHandler());			fail();		}
&lt;p&gt; catch (ModelException e) &lt;/p&gt;
{
			assertEquals(
					&quot;Initial state null or not a descendant of state with ID \&quot;start\&quot;&quot;,
					e.getMessage());
		}
&lt;p&gt;	}&lt;/p&gt;
&lt;hr /&gt;


&lt;p&gt;main scxml&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml&lt;br/&gt;
  xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
  version=&quot;1.0&quot;&lt;br/&gt;
  initialstate=&quot;start&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;start&quot; src=&quot;externalStateWithInitialstate-external.scxml&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;
&lt;hr /&gt;


&lt;p&gt;included scxml&lt;br/&gt;
note: with initialstate&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml&lt;br/&gt;
  xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
  version=&quot;1.0&quot;&lt;br/&gt;
  initialstate=&quot;start&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;start&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;onentry&amp;gt;&lt;br/&gt;
      &amp;lt;log expr=&quot;&apos;now in state start&apos;&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;/onentry&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;
&lt;hr /&gt;</description>
                <environment>&lt;p&gt;Win XP, Java 5, Eclipse 3.2, JUnit 4&lt;/p&gt;</environment>
        <key id="12362603">SCXML-38</key>
            <summary>spec and semantics of initialstate attribute not clear for external state</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wfrech">Wolfgang Frech</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Feb 2007 16:51:35 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:51 +0000</updated>
                            <resolved>Mon, 12 Feb 2007 19:42:11 +0000</resolved>
                                    <version>0.6</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12472340" author="wfrech" created="Mon, 12 Feb 2007 17:00:54 +0000"  >&lt;p&gt;continued...&lt;/p&gt;

&lt;p&gt;In a external state with a substate, the initialstate attribute does not replace the initial child.&lt;/p&gt;


&lt;p&gt;Demo&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;	@Test&lt;br/&gt;
	public void externalStateWithInitialSubstate() throws FileNotFoundException,&lt;br/&gt;
			IOException, SAXException, ModelException {&lt;br/&gt;
		final URL definition = getClass().getClassLoader().getResource(&lt;br/&gt;
				&quot;externalStateWithInitialSubstate-external.scxml&quot;);&lt;br/&gt;
		try &lt;/p&gt;
{
			SCXMLDigester.digest(definition, new SimpleErrorHandler());
			fail();
		}
&lt;p&gt; catch (ModelException e) &lt;/p&gt;
{
			assertEquals(
					&quot;No initial element available for state with ID \&quot;start\&quot;&quot;,
					e.getMessage());
		}
&lt;p&gt;	}&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml&lt;br/&gt;
  xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
  version=&quot;1.0&quot;&lt;br/&gt;
  initialstate=&quot;start&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;start&quot; src=&quot;externalStateWithInitialstate-external.scxml&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml&lt;br/&gt;
  xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
  version=&quot;1.0&quot;&lt;br/&gt;
  initialstate=&quot;start&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;start&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;onentry&amp;gt;&lt;br/&gt;
      &amp;lt;log expr=&quot;&apos;now in state start&apos;&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;/onentry&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;
&lt;hr /&gt;
</comment>
                            <comment id="12472343" author="wfrech" created="Mon, 12 Feb 2007 17:08:29 +0000"  >&lt;p&gt;continued ....&lt;/p&gt;

&lt;p&gt;finally, this is accepted:&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml&lt;br/&gt;
  xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
  version=&quot;1.0&quot;&lt;br/&gt;
  initialstate=&quot;one&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;start&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;initial&amp;gt;&lt;br/&gt;
      &amp;lt;transition target=&quot;one&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;/initial&amp;gt;&lt;br/&gt;
    &amp;lt;state id=&quot;one&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;onentry&amp;gt;&lt;br/&gt;
        &amp;lt;log expr=&quot;&apos;now in state one&apos;&quot; /&amp;gt;&lt;br/&gt;
      &amp;lt;/onentry&amp;gt;&lt;br/&gt;
    &amp;lt;/state&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;
&lt;hr /&gt;


&lt;p&gt;By the way, an empty initial element, that is without a transition, leads to a NullPointerException in the ModelUpdater.&lt;/p&gt;

&lt;p&gt;So we finally came up with a file in which we have two ways to specify the initial state at once.&lt;br/&gt;
What if they contradict.  Lets see...&lt;/p&gt;
</comment>
                            <comment id="12472350" author="wfrech" created="Mon, 12 Feb 2007 17:23:18 +0000"  >&lt;p&gt;continued....&lt;/p&gt;

&lt;p&gt;The actual behavior is: When the external state is entered (that is the parent state), the initialstate attribute takes precedence over the target of the transition in the initial attribute.&lt;/p&gt;

&lt;p&gt;This can be explained like this: As the initialstate attribute is honored, the state chart goes directly into the specified substate. It does not enter the parent state per se, so it does not enter the initial element of the parent state, and does not execute the unconditional transition in it either.&lt;/p&gt;


&lt;p&gt;Demo code&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;	@Test&lt;br/&gt;
	public void externalStateWithConflictingInitialstate()&lt;br/&gt;
			throws FileNotFoundException, IOException, SAXException, ModelException &lt;/p&gt;
{
		final URL definition = getClass().getClassLoader().getResource(
				&quot;externalStateWithConflictingInitialstate-external.scxml&quot;);
		SCXML model = SCXMLDigester.digest(definition, new SimpleErrorHandler());
		SCXMLExecutor executor = new SCXMLExecutor();
		executor.setStateMachine(model);
		executor.setRootContext(new SimpleContext());
		executor.setEvaluator(new ELEvaluator());
		executor.setErrorReporter(new SimpleErrorReporter());
		executor.go();
		State state = (State) (executor.getCurrentStatus().getStates().iterator()
				.next());
		assertEquals(&quot;one&quot;, state.getId());
	}
&lt;p&gt;	&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml&lt;br/&gt;
  xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
  version=&quot;1.0&quot;&lt;br/&gt;
  initialstate=&quot;start&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state&lt;br/&gt;
    id=&quot;start&quot;&lt;br/&gt;
    src=&quot;externalStateWithConflictingInitialstate-external.scxml&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml&lt;br/&gt;
  xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
  version=&quot;1.0&quot;&lt;br/&gt;
  initialstate=&quot;one&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;start&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;initial&amp;gt;&lt;br/&gt;
      &amp;lt;onentry&amp;gt;&lt;br/&gt;
        &amp;lt;log expr=&quot;&apos;entering intial&apos;&quot; /&amp;gt;&lt;br/&gt;
      &amp;lt;/onentry&amp;gt;&lt;br/&gt;
      &amp;lt;transition target=&quot;other&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;/initial&amp;gt;&lt;br/&gt;
    &amp;lt;state id=&quot;one&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;state id=&quot;other&quot; /&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;</comment>
                            <comment id="12472396" author="rahul@apache.org" created="Mon, 12 Feb 2007 19:42:11 +0000"  >&lt;p&gt;Two components to this as the title suggests:&lt;/p&gt;

&lt;p&gt;a) Any inconsistencies found in the spec document - While we don&apos;t deal with those here, it&apos;ll be great if you can report them to the W3C WG.&lt;/p&gt;

&lt;p&gt;b) The test case you have posted &amp;#8211; I suspect the majority of problems you are running into with this test case have to do with the fact that once the external SCXML document is pulled in, the state IDs are no longer unique (&quot;start&quot; is present in both). Ofcourse, there are scenarios where you may want to pull in the same document couple of times in the state machine whereby you have to employ some state templating techniques (the src attribute can point to a URI generating dynamic content). I seem to remember someone writing up a wiki page on the Commons SCXML wiki for this. Please check it out or look into the mailing list archives for discussions on this. Also, please feel free to ask on the user list.&lt;/p&gt;</comment>
                            <comment id="12472556" author="wfrech" created="Tue, 13 Feb 2007 07:58:59 +0000"  >&lt;p&gt;ad a) I posted the issue to the W3C voice mailing list.&lt;br/&gt;
The question to the SCXML commons team remains: what did you implement?  &lt;/p&gt;

&lt;p&gt;Quoting from the message to the mailing list:&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
So the real question is: what exactly is the format of the external file referenced by a src attribute?&lt;/p&gt;

&lt;p&gt;It could be one of the following&lt;/p&gt;

&lt;p&gt;a) a complete SCXML document, with scxml element as root, and exactly one state element, that is identical to the state element in the main SCXML document, and without initialstate attribute.&lt;br/&gt;
This would follow the example.&lt;/p&gt;

&lt;p&gt;b) as a), but with an initialstate attribute pointing to its one and only state.&lt;br/&gt;
This would meet the definition of the scxml element&lt;/p&gt;

&lt;p&gt;c) an fragment of a SCXML document, without scxml  root element, but with exactly one state element as root.&lt;br/&gt;
This would avoid the question if initialstate is required.&lt;/p&gt;

&lt;p&gt;d) a fragement with the content of the state element, that is an XML fragment with a list of elements, not with a single root.&lt;br/&gt;
This would &lt;em&gt;not&lt;/em&gt;: follow the example, and it would be hard to edit with an XML editor.&lt;br/&gt;
&amp;#8212;&lt;/p&gt;</comment>
                            <comment id="12472560" author="wfrech" created="Tue, 13 Feb 2007 08:08:06 +0000"  >&lt;p&gt;ad b) non-unique state ids&lt;br/&gt;
My test cases use the same ID intentionally.&lt;br/&gt;
I read the WD that the state element is present in both the including and the included external file, with the same ID.&lt;br/&gt;
This follows the example in the Working Draft, section F.1 Language Overview&lt;/p&gt;

&lt;p&gt;In the main SCXML document, the state &quot;Test2Sub1&quot; is externalized like that:&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;...&lt;br/&gt;
      &amp;lt;!-- This time we reference a state &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;defined in an external file --&amp;gt;&lt;br/&gt;
      &amp;lt;state id=&quot;Test2Sub1&quot; src=&quot;Test2Sub1.scxml&quot;/&amp;gt;&lt;br/&gt;
...
&lt;hr /&gt;
&lt;p&gt;and defined in the external file like that.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;...&lt;br/&gt;
&amp;lt;scxml version=&quot;1.0&quot; xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&amp;gt; &lt;br/&gt;
...&lt;br/&gt;
 &amp;lt;state id=&quot;Test2Sub1&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;onentry&amp;gt;&lt;br/&gt;
      &amp;lt;log expr=&quot;&apos;Inside Test2Sub1&apos;&quot;/&amp;gt;&lt;br/&gt;
     &amp;lt;/onentry&amp;gt;&lt;br/&gt;
    &amp;lt;transition event=&quot;Event2&quot; target=&quot;Test2Sub2&quot;/&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;
&lt;hr /&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172694</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i10027:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208144</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-37] state with src attribute must not have children</title>
                <link>https://issues.apache.org/jira/browse/SCXML-37</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The Digester accepts an SCXML model with a state that has both a src attribute (and its contents defined in an external file), and an additional onentry child.&lt;br/&gt;
According to the WD-SCXML section 3.2.1, &quot;If &lt;span class=&quot;error&quot;&gt;&amp;#91;the src attribute&amp;#93;&lt;/span&gt; is present, no children are allowed.&quot;&lt;/p&gt;

&lt;p&gt;Test case to demonstrate the actual behavior follows&lt;/p&gt;

&lt;p&gt;JUnit test method&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;	@Test&lt;br/&gt;
	public void externalStateWithChildren() throws FileNotFoundException,&lt;br/&gt;
			IOException, SAXException, ModelException &lt;/p&gt;
{
		final URL definition = getClass().getClassLoader().getResource(
				&quot;externalStateWithChild-main.scxml&quot;);
		SCXML scxml = SCXMLDigester.digest(definition, new SimpleErrorHandler());
		// expected/correct: digesting should throw exception
		// according to WD-SCXML 3.2.1 &quot;If [the src attribute] is present, no
		// children are allowed.&quot;
		// actual/incorrect
		assertNotNull(scxml);
	}
&lt;hr /&gt;

&lt;p&gt;main scxml&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml&lt;br/&gt;
  xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
  version=&quot;1.0&quot;&lt;br/&gt;
  initialstate=&quot;external&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state&lt;br/&gt;
    id=&quot;external&quot;&lt;br/&gt;
    src=&quot;externalStateWithChild-external.scxml&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;onentry&amp;gt;&lt;br/&gt;
      &amp;lt;log&lt;br/&gt;
        expr=&quot;&apos;This onentry child should not be accepted according to WD-SCXML 3.2.1 Description&apos;&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;/onentry&amp;gt;&lt;br/&gt;
  &amp;lt;/state&amp;gt;&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;external scxml&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml&lt;br/&gt;
  xmlns=&quot;http://www.w3.org/2005/07/scxml&quot;&lt;br/&gt;
  version=&quot;1.0&quot;&lt;br/&gt;
  initialstate=&quot;start&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;state id=&quot;start&quot; /&amp;gt; &lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Win XP, JDK 1.5  Eclipse 3.2, JUnit 4, details on request&lt;/p&gt;</environment>
        <key id="12362586">SCXML-37</key>
            <summary>state with src attribute must not have children</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wfrech">Wolfgang Frech</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Feb 2007 14:55:19 +0000</created>
                <updated>Sat, 15 Feb 2014 23:21:24 +0000</updated>
                            <resolved>Sat, 15 Feb 2014 23:21:23 +0000</resolved>
                                    <version>0.6</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12472393" author="rahul@apache.org" created="Mon, 12 Feb 2007 19:34:57 +0000"  >&lt;p&gt;That correct, though a couple of comments:&lt;/p&gt;

&lt;p&gt;1) Its hard to express this constraint via a DTD (or even a schema).&lt;/p&gt;

&lt;p&gt;2) I believe specific elements should be allowed for better reuse and expressivity (&amp;lt;onentry&amp;gt;, &amp;lt;onexit&amp;gt; and &amp;lt;transition&amp;gt;s come quickly to mind). But that is something I need to bring up with the Working Group.&lt;/p&gt;

&lt;p&gt;Setting for a fix version of 1.0.&lt;/p&gt;</comment>
                            <comment id="13902574" author="adouma" created="Sat, 15 Feb 2014 23:21:24 +0000"  >&lt;p&gt;This no longer is a &apos;problem&apos; in the sense that the specification no longer even defines/allows the state (or parallel) src attribute.&lt;/p&gt;

&lt;p&gt;As such, this Commons SCXML feature no longer is &apos;standard&apos; and this neither can be a violation of the specification.&lt;br/&gt;
Maybe we can/should revisit the usefulness of allowing both external source and children sometime later, but formally there is no (longer) reason to disallow it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172693</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a507:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267277</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-36] Invoke cancel method called despite special done event triggered</title>
                <link>https://issues.apache.org/jira/browse/SCXML-36</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Creating an invoker class by implementing the Invoker interface requires you to implement the invoke, parentEvents, and cancel methods. The invoke method is expected to perform the invoker&apos;s task and the user must trigger a special done event within it to signify the invoker is complete. The cancel method is expected to be called from the outside to cancel the invoke process, especially if the invoke process were being handled in a separate thread and the thread has become a zombie. It would be called if an event were triggered while the state engine was within the state containing the invoke, since that event would be expected to interrupt the invoke. The issue, however, is that the cancel method is called even if the triggered event is the special done event signifying the end of the invoke, causing the cancel method to always be called regardless of whether the invoke was indeed a zombie or not.&lt;/p&gt;

&lt;p&gt;The system should work so that the special done event triggered while in an invoke should not cause the cancel method on the invoker class to be called. An investigation should take place to determine if this should apply to any event triggered by the invoker itself (though I am not sure how you are able to make that determination if the invoker spawns off separate threads that could trigger the events) should cause the cancel method to be called.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12362110">SCXML-36</key>
            <summary>Invoke cancel method called despite special done event triggered</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="elamtb">Elam Birnbaum</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Feb 2007 16:14:03 +0000</created>
                <updated>Sun, 10 Dec 2017 21:49:37 +0000</updated>
                            <resolved>Sun, 10 Dec 2017 21:49:37 +0000</resolved>
                                    <version>0.6</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12470727" author="rahul@apache.org" created="Tue, 6 Feb 2007 20:16:34 +0000"  >&lt;p&gt;Lets see if the next draft sheds some light on this, setting fix version to next release (0.7) for now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172692</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a50f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267278</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-25] Deprecate static fields in ErrorReporter</title>
                <link>https://issues.apache.org/jira/browse/SCXML-25</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Leaky abstraction, function of particular SCXMLSemantics impl. As a preferred alternative, provide ErrorConstants (or some such name) for default impl.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12352153">SCXML-25</key>
            <summary>Deprecate static fields in ErrorReporter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rahul@apache.org">Rahul Akolkar</reporter>
                        <labels>
                    </labels>
                <created>Sun, 1 Oct 2006 15:58:19 +0000</created>
                <updated>Fri, 18 Oct 2013 08:46:28 +0000</updated>
                            <resolved>Fri, 18 Oct 2013 08:46:23 +0000</resolved>
                                    <version>0.5</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12439222" author="rahul@apache.org" created="Mon, 2 Oct 2006 16:55:39 +0000"  >&lt;p&gt;Deprecated in r452118 while at 0.6-SNAPSHOT.&lt;/p&gt;</comment>
                            <comment id="13798917" author="adouma" created="Fri, 18 Oct 2013 08:46:23 +0000"  >&lt;p&gt;Deprecated fields were dropped for by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sebb%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;sebb@apache.org&quot;&gt;sebb@apache.org&lt;/a&gt;: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=730830&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=730830&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172682</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a4zj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267274</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-23] Deprecate digester rules</title>
                <link>https://issues.apache.org/jira/browse/SCXML-23</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;For no reason (well, other than oversight) digester rules are public. Its unlikely anyone uses those since they&apos;re the internal guts, but need to start the deprecation cycle nevertheless and downgrade visibility in 1.0.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12352082">SCXML-23</key>
            <summary>Deprecate digester rules</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rahul@apache.org">Rahul Akolkar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Sep 2006 17:42:42 +0000</created>
                <updated>Fri, 18 Oct 2013 08:48:31 +0000</updated>
                            <resolved>Fri, 18 Oct 2013 08:48:20 +0000</resolved>
                                    <version>0.5</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12438766" author="rahul@apache.org" created="Fri, 29 Sep 2006 17:55:54 +0000"  >&lt;p&gt;Marked deprecated in r451364 while at 0.6-SNAPSHOT.&lt;/p&gt;</comment>
                            <comment id="13798920" author="adouma" created="Fri, 18 Oct 2013 08:48:20 +0000"  >&lt;p&gt;SCXMLDigester was removed for version 2.0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172680</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1a4zr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>267275</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-21] Send an event by delay attribute, with the targettype attribute is absent</title>
                <link>https://issues.apache.org/jira/browse/SCXML-21</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;There is a bug, when one try to run the code below:&lt;/p&gt;

&lt;p&gt;Scenario: In state &quot;Off&quot;, by trigger of the event &amp;lt;ev1&amp;gt;, i need to wait 10s in state &quot;On&quot;; after this time, i should return to state &quot;Off&quot;. The attribute &amp;lt;delay&amp;gt; doesn&apos;t work well (seemingly).&lt;/p&gt;

&lt;p&gt; &amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
 &amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/SCXML&quot; version=&quot;1.0&quot; &lt;br/&gt;
  initialstate=&quot;Off&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;        &amp;lt;state id=&quot;Off&quot;&amp;gt;&lt;br/&gt;
             &amp;lt;transition event=&quot;ev1&quot; target=&quot;On&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/state&amp;gt;&lt;br/&gt;
        &amp;lt;state id=&quot;On&quot;&amp;gt;&lt;br/&gt;
              &amp;lt;onentry&amp;gt;&lt;br/&gt;
                  &amp;lt;log expr=&quot;&apos;Inside On...&apos;&quot;/&amp;gt;&lt;br/&gt;
                  &amp;lt;send event=&quot;Timer&quot; delay=&quot;10s&quot;/&amp;gt;&lt;br/&gt;
              &amp;lt;/onentry&amp;gt;&lt;br/&gt;
              &amp;lt;transition event=&quot;Timer&quot; target=&quot;Off&quot;/&amp;gt;&lt;br/&gt;
              &amp;lt;onexit&amp;gt;&lt;br/&gt;
                  &amp;lt;log expr=&quot;&apos;Leaving On...&apos;&quot;/&amp;gt;&lt;br/&gt;
              &amp;lt;/onexit&amp;gt;&lt;br/&gt;
       &amp;lt;/state&amp;gt;&lt;br/&gt;
 &amp;lt;/scxml&amp;gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP Professional (Service Pack 2) - Version: Portuguese&lt;br/&gt;
CPU: Pentium 4; 2,80 GHz; 512 MB&lt;/p&gt;</environment>
        <key id="12349874">SCXML-21</key>
            <summary>Send an event by delay attribute, with the targettype attribute is absent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rahul@apache.org">Rahul Akolkar</assignee>
                                    <reporter username="raimoura@gmail.com">Raimundo Santos Moura</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Sep 2006 23:06:12 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:49 +0000</updated>
                            <resolved>Tue, 17 Oct 2006 17:09:07 +0000</resolved>
                                    <version>0.5</version>
                                    <fixVersion>0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12442984" author="rahul@apache.org" created="Tue, 17 Oct 2006 17:09:07 +0000"  >&lt;p&gt;A new EventDispatcher implementation (SimpleScheduler) that provides the ability to deal with delayed events of the &quot;scxml&quot; &amp;lt;send&amp;gt; targettype has been added. Delay will be processed as expected in the comment above if this (extensible) EventDispatcher implementation is used.&lt;/p&gt;

&lt;p&gt;The delay attribute now supports the following suffixes (ms-milliseconds, s-seconds, m-minutes; the default being milliseconds).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172678</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zytr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207944</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-16] The &apos;target&apos; of a &lt;send&gt; cannot be a data element name</title>
                <link>https://issues.apache.org/jira/browse/SCXML-16</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Based on the SCXML specification, the &apos;target&apos; attribute of a &amp;lt;send&amp;gt; element can be &quot;expression returning a unique identifier of the event target&quot;.&lt;br/&gt;
The specification also shows an example that reads the target from a data element within &amp;lt;datamodel&amp;gt;.&lt;br/&gt;
The current SCXML runtime treats target as a literal string and does not &quot;evaluate&quot; it.&lt;/p&gt;

&lt;p&gt;The attached patch file shows a way to &quot;evalulate&quot; the target before calling the EventDispatcher#send method, and support specifying the target by a data element. Enclosing target within single-quote will prevent evaluation.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows, JDK 1.4.2&lt;/p&gt;</environment>
        <key id="12347478">SCXML-16</key>
            <summary>The &apos;target&apos; of a &lt;send&gt; cannot be a data element name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rahul@apache.org">Rahul Akolkar</assignee>
                                    <reporter username="sitthichai_rernglertpricha@yahoo.com">Sitthichai Rernglertpricha</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Aug 2006 03:36:00 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:49 +0000</updated>
                            <resolved>Wed, 13 Dec 2006 21:51:55 +0000</resolved>
                                                    <fixVersion>0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12426702" author="rahul@apache.org" created="Tue, 8 Aug 2006 20:20:11 +0000"  >&lt;p&gt;Correct. Also, targettype and sendid should be evaluated as well, in line with the latest Working Draft. If you want, you can update your patch to include those as well. I&apos;ll get to this in a couple of days.&lt;/p&gt;</comment>
                            <comment id="12456632" author="rahul@apache.org" created="Thu, 7 Dec 2006 23:08:22 +0000"  >&lt;p&gt;Probably needs spec clarification, I&apos;ll look into that.&lt;/p&gt;
</comment>
                            <comment id="12458275" author="rahul@apache.org" created="Wed, 13 Dec 2006 21:51:55 +0000"  >&lt;p&gt;Thanks for the patch, I&apos;ve clarified that target and targettype should be expressions. Fixed in trunk.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12338336" name="ASF.LICENSE.NOT.GRANTED--patch-send.txt" size="1123" author="sitthichai_rernglertpricha@yahoo.com" created="Tue, 8 Aug 2006 03:36:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172673</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208072</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-14] Allowing the target of a transition to be omitted</title>
                <link>https://issues.apache.org/jira/browse/SCXML-14</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Currently, the runtime throws a ModelException if the target of a transition is not specified.&lt;br/&gt;
E.g. the following throws a ModelException since the &amp;lt;target next=&quot;...&quot;/&amp;gt; is omitted within the &amp;lt;transition&amp;gt; element.&lt;/p&gt;

&lt;p&gt;&amp;lt;state id=&apos;s&apos;&amp;gt;&lt;br/&gt;
&amp;lt;transitionfiltered=&quot;xxx&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;assign name=&quot;data&quot; expr=&quot;value&quot;&amp;gt;&lt;br/&gt;
&amp;lt;/transition&amp;gt;&lt;br/&gt;
&amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;However, based on the scxml specification at &lt;a href=&quot;http://www.w3.org/TR/scxml/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/scxml/&lt;/a&gt; at section 3.3, quote - &quot;If the &quot;target&quot; on a &amp;lt;transition&amp;gt; is omitted, then taking the transition has the effect of leaving the machine in the same state after invoking any executable content that is included in the transition. &quot;&lt;/p&gt;

&lt;p&gt;The attached patch can be applied to the ModelUpdater.java to fix the above problem.&lt;br/&gt;
Basically, the change is in the updateTransition() method. If next variable is null, return immediately from the method.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Windows, JDK 1.4.2&lt;/p&gt;</environment>
        <key id="12347418">SCXML-14</key>
            <summary>Allowing the target of a transition to be omitted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rahul@apache.org">Rahul Akolkar</assignee>
                                    <reporter username="sitthichai_rernglertpricha@yahoo.com">Sitthichai Rernglertpricha</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Aug 2006 10:20:49 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:48 +0000</updated>
                            <resolved>Mon, 7 Aug 2006 23:54:45 +0000</resolved>
                                                    <fixVersion>0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12426371" author="rahul@apache.org" created="Mon, 7 Aug 2006 23:54:45 +0000"  >&lt;p&gt;Thanks, fixed in r429516:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=429516&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=429516&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and should be available from the 08072006 nightlies:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://people.apache.org/builds/jakarta-commons/nightly/commons-scxml/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://people.apache.org/builds/jakarta-commons/nightly/commons-scxml/&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12338268" name="ASF.LICENSE.NOT.GRANTED--patchfile" size="728" author="sitthichai_rernglertpricha@yahoo.com" created="Mon, 7 Aug 2006 10:20:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172671</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzlb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208068</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-13] SCXML doesn&apos;t compile using JDK 1.5</title>
                <link>https://issues.apache.org/jira/browse/SCXML-13</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;SCXML&apos;s BuiltIn class uses  org.apache.xpath.XPathAPI  (from xalan) - which was shipped with JDK 1.4 (in rt.jar). JDK 1.5 no longer has this class (looks like they have re-packaged their own version com.sun.org.apache.xpath.internal.XPathAPI).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.mail-archive.com/commons-user%40jakarta.apache.org/msg16114.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/commons-user%40jakarta.apache.org/msg16114.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK 1.5.0_07, Windows XP&lt;/p&gt;</environment>
        <key id="12345610">SCXML-13</key>
            <summary>SCXML doesn&apos;t compile using JDK 1.5</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rahul@apache.org">Rahul Akolkar</assignee>
                                    <reporter username="niallp">Niall Pemberton</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Jul 2006 17:27:06 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:48 +0000</updated>
                            <resolved>Wed, 19 Jul 2006 14:57:29 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12421021" author="rahul@apache.org" created="Fri, 14 Jul 2006 12:58:06 +0000"  >&lt;p&gt;Ugh. Thanks for filing this Niall.&lt;/p&gt;</comment>
                            <comment id="12422160" author="rahul@apache.org" created="Wed, 19 Jul 2006 14:57:29 +0000"  >&lt;p&gt;Xalan Interpretive is no longer available in (Sun) JDK 1.5.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/guide/xml/jaxp/JAXP-Compatibility_150.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.sun.com/j2se/1.5.0/docs/guide/xml/jaxp/JAXP-Compatibility_150.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Fixed in r423480.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172670</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zyyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207966</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-12] [scxml] if statement fails within another one</title>
                <link>https://issues.apache.org/jira/browse/SCXML-12</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;if statement fails within another one.&lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12345290">SCXML-12</key>
            <summary>[scxml] if statement fails within another one</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="rahul@apache.org">Rahul Akolkar</assignee>
                                    <reporter username="nestoru">Nestor Urquiza</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Jul 2006 22:12:47 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:48 +0000</updated>
                            <resolved>Fri, 14 Jul 2006 12:56:16 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12421020" author="rahul@apache.org" created="Fri, 14 Jul 2006 12:56:16 +0000"  >&lt;p&gt;Sorry, my reply to your initial post &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; was incorrect. &amp;lt;elseif ... /&amp;gt; and &amp;lt;else/&amp;gt; are partitions, not containers (note the bodyless tags), see the section on &amp;lt;if&amp;gt; from the latest WD &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;The current processing is therefore in accordance with the WD, please re-open with a test case if you still think there is something to be addressed in this regard.&lt;/p&gt;

&lt;p&gt;(long URLs, may get fragmented; second one may become obsolete over time)&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://marc.theaimsgroup.com/?l=jakarta-commons-user&amp;amp;m=115148557002292&amp;amp;w=2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://marc.theaimsgroup.com/?l=jakarta-commons-user&amp;amp;m=115148557002292&amp;amp;w=2&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://www.w3.org/TR/scxml/#N109D0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/scxml/#N109D0&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172669</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1005j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208159</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-10] [scxml] please add datamodel explanation and examples to user guide</title>
                <link>https://issues.apache.org/jira/browse/SCXML-10</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;As you requested here is a reminder for this important topic to be&lt;br/&gt;
inserted/updated in the user guide ... thanks&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12343058">SCXML-10</key>
            <summary>[scxml] please add datamodel explanation and examples to user guide</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nestoru@yahoo.com">Nestor Urquiza</reporter>
                        <labels>
                    </labels>
                <created>Sun, 30 Apr 2006 07:40:53 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:48 +0000</updated>
                            <resolved>Thu, 3 Jan 2008 19:46:48 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12411835" author="rahul@apache.org" created="Fri, 5 May 2006 00:43:50 +0000"  >&lt;p&gt;Thanks, I&apos;ve added the related section here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://jakarta.apache.org/commons/scxml/guide/datamodel.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jakarta.apache.org/commons/scxml/guide/datamodel.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It&apos;d be great if you could proof read it.&lt;/p&gt;</comment>
                            <comment id="12411836" author="nestoru@yahoo.com" created="Fri, 5 May 2006 10:15:32 +0000"  >&lt;p&gt;Many thanks to you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39450</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172667</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zyqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207929</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-9] [scxml] More Explicit Instructions on core-digester.html</title>
                <link>https://issues.apache.org/jira/browse/SCXML-9</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The page that contains notes about running the SCXMLDigester contains:&lt;/p&gt;

&lt;p&gt;scxml = SCXMLDigester.digest(&amp;lt;URL&amp;gt;, &amp;lt;ErroHandler&amp;gt;,&lt;br/&gt;
                                    &amp;lt;Context&amp;gt;, &amp;lt;Evaluator&amp;gt;);&lt;/p&gt;

&lt;p&gt;This page could use a few more details.  Specifically the following dedicated&lt;br/&gt;
sections need to be added:&lt;/p&gt;

&lt;p&gt;1. Creating a Context for SCXMLDigester&lt;br/&gt;
2. Creating an Evaluator for SCXMLDigester&lt;/p&gt;

&lt;p&gt;Additionally, the code sample should be more detailed showing all the necessary&lt;br/&gt;
code one needs to write to read in an SCXML document.  We can safely assume that&lt;br/&gt;
end-users know how to get a URL and ErrorHandler object, but this is the page&lt;br/&gt;
that people are going to go to for a step-by-step guide/reference about&lt;br/&gt;
consuming SCXML documents with c-scxml.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12342856">SCXML-9</key>
            <summary>[scxml] More Explicit Instructions on core-digester.html</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tobrien@discursive.com">Tim O&apos;Brien</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 Jan 2006 01:06:55 +0000</created>
                <updated>Thu, 2 May 2013 02:28:36 +0000</updated>
                            <resolved>Thu, 3 Jan 2008 19:46:48 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12411257" author="rahul@apache.org" created="Sat, 4 Feb 2006 04:09:48 +0000"  >&lt;p&gt;It seems 38311 will affect the SCXMLDigester API (to be renamed SCXMLReader &lt;br/&gt;
over the few next week or two), so need to wait for that to be resolved.&lt;/p&gt;</comment>
                            <comment id="12411258" author="rahul@apache.org" created="Fri, 21 Apr 2006 04:45:14 +0000"  >&lt;p&gt;Re-assigning from Sandbox to SCXML.&lt;/p&gt;</comment>
                            <comment id="12411259" author="rahul@apache.org" created="Fri, 5 May 2006 00:49:11 +0000"  >&lt;p&gt;There is a separate section now for contexts and evaluators in the Commons &lt;br/&gt;
SCXML user guide, and I believe most of the comments in this bug report have &lt;br/&gt;
been addressed. Feel free to reopen if you have further suggestions.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12342864">SCXML-6</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38275</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172666</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zyxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207963</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-8] [scxml] External Digester does not addCustomActions</title>
                <link>https://issues.apache.org/jira/browse/SCXML-8</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;I was not sure where to put my test-case. So attaching it here.&lt;/p&gt;

&lt;p&gt;/*&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Copyright 2006 The Apache Software Foundation.&lt;br/&gt;
 *&lt;/li&gt;
	&lt;li&gt;Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);&lt;/li&gt;
	&lt;li&gt;you may not use this file except in compliance with the License.&lt;/li&gt;
	&lt;li&gt;You may obtain a copy of the License at&lt;br/&gt;
 *&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
 *&lt;/li&gt;
	&lt;li&gt;Unless required by applicable law or agreed to in writing, software&lt;/li&gt;
	&lt;li&gt;distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;/li&gt;
	&lt;li&gt;WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;/li&gt;
	&lt;li&gt;See the License for the specific language governing permissions and&lt;/li&gt;
	&lt;li&gt;limitations under the License.&lt;br/&gt;
 */&lt;br/&gt;
package org.apache.commons.scxml.model;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;import java.net.URL;&lt;/p&gt;

&lt;p&gt;import junit.framework.Test;&lt;br/&gt;
import junit.framework.TestCase;&lt;br/&gt;
import junit.framework.TestSuite;&lt;/p&gt;

&lt;p&gt;import org.apache.commons.digester.Digester;&lt;br/&gt;
import org.apache.commons.scxml.Context;&lt;br/&gt;
import org.apache.commons.scxml.Evaluator;&lt;br/&gt;
import org.apache.commons.scxml.SCXMLExecutor;&lt;br/&gt;
import org.apache.commons.scxml.SCXMLTestHelper;&lt;br/&gt;
import org.apache.commons.scxml.env.jexl.JexlContext;&lt;br/&gt;
import org.apache.commons.scxml.env.jexl.JexlEvaluator;&lt;br/&gt;
import org.apache.commons.scxml.io.SCXMLDigester;&lt;br/&gt;
import org.apache.commons.scxml.model.SCXML;&lt;br/&gt;
import org.apache.commons.scxml.model.State;&lt;/p&gt;

&lt;p&gt;public class ExternalCustomActionTest extends TestCase {&lt;/p&gt;

&lt;p&gt;    public ExternalCustomActionTest(String testName) &lt;/p&gt;
{
        super(testName);
    }

&lt;p&gt;    public static Test suite() &lt;/p&gt;
{
        return new TestSuite(ExternalCustomActionTest.class);
    }

&lt;p&gt;    public static void main(String args[]) {&lt;br/&gt;
        String[] testCaseName = &lt;/p&gt;
{ ExternalCustomActionTest.class.getName()}
&lt;p&gt;;&lt;br/&gt;
        junit.textui.TestRunner.main(testCaseName);&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;    private URL externalhello01, custom01;&lt;br/&gt;
    private Digester digester;&lt;br/&gt;
    private SCXMLExecutor exec;&lt;/p&gt;

&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Set up instance variables required by this test case.&lt;br/&gt;
     */&lt;br/&gt;
    public void setUp() 
{
        externalhello01 = this.getClass().getClassLoader().
            getResource(&quot;org/apache/commons/scxml/external-hello-world.xml&quot;);
        custom01 = this.getClass().getClassLoader().
            getResource(&quot;org/apache/commons/scxml/custom-hello-world.xml&quot;);
    }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Tear down instance variables required by this test case.&lt;br/&gt;
     */&lt;br/&gt;
    public void tearDown() 
{
    	externalhello01 = custom01 = null;
        digester = null;
        exec = null;
    }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    // Hello World example using the SCXML &amp;lt;log&amp;gt; action&lt;br/&gt;
    public void testHelloWorld() {&lt;br/&gt;
        // (1) Get Digester with &quot;default&quot; rules for parsing SCXML documents&lt;br/&gt;
        digester = SCXMLDigester.newInstance(null, null);&lt;br/&gt;
        // (2) Register the &quot;custom&quot; action(s)&lt;br/&gt;
        SCXMLDigester.addCustomAction(digester,&lt;br/&gt;
            &quot;http://my.custom-actions.domain/CUSTOM&quot;, &quot;hello&quot;, Hello.class);&lt;br/&gt;
        // (3) Parse the SCXML document containing the custom action(s)&lt;br/&gt;
        SCXML scxml = null;&lt;br/&gt;
        try &lt;/p&gt;
{
            scxml = (SCXML) digester.parse(externalhello01.toString());
        }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
        	e.printStackTrace();
            fail(e.getMessage());
        }&lt;br/&gt;
        // (4) Wire up the object model for the SCXMLExecutor&lt;br/&gt;
        SCXMLDigester.updateSCXML(scxml);&lt;br/&gt;
        // (5) Get a SCXMLExecutor&lt;br/&gt;
        Context context = new JexlContext();&lt;br/&gt;
        Evaluator evaluator = new JexlEvaluator();&lt;br/&gt;
        exec = SCXMLTestHelper.getExecutor(scxml, context, evaluator);&lt;br/&gt;
        // (6) Single, final state&lt;br/&gt;
        assertEquals(&quot;external-hello&quot;, ((State) exec.getCurrentStatus().getStates().&lt;br/&gt;
                iterator().next()).getId());&lt;br/&gt;
        assertEquals (&quot;external world&quot;, context.get(&quot;custom&quot;));&lt;br/&gt;
    }&lt;br/&gt;
&lt;br/&gt;
    // Hello World example using a custom &amp;lt;hello&amp;gt; action&lt;br/&gt;
    public void testCustomActionHelloWorld() {&lt;br/&gt;
        // (1) Get Digester with &quot;default&quot; rules for parsing SCXML documents&lt;br/&gt;
        digester = SCXMLDigester.newInstance(null, null);&lt;br/&gt;
        // (2) Register the &quot;custom&quot; action(s)&lt;br/&gt;
        SCXMLDigester.addCustomAction(digester,&lt;br/&gt;
            &quot;http://my.custom-actions.domain/CUSTOM&quot;, &quot;hello&quot;, Hello.class);&lt;br/&gt;
        // (3) Parse the SCXML document containing the custom action(s)&lt;br/&gt;
        SCXML scxml = null;&lt;br/&gt;
        try {
            scxml = (SCXML) digester.parse(custom01.toString());
        } catch (Exception e) {        	e.printStackTrace();            fail(e.getMessage());        }
&lt;p&gt;        // (4) Wire up the object model for the SCXMLExecutor&lt;br/&gt;
        SCXMLDigester.updateSCXML(scxml);&lt;br/&gt;
        // (5) Get a SCXMLExecutor&lt;br/&gt;
        Context context = new JexlContext();&lt;br/&gt;
        Evaluator evaluator = new JexlEvaluator();&lt;br/&gt;
        exec = SCXMLTestHelper.getExecutor(scxml, context, evaluator);&lt;br/&gt;
        // (6) Fire events, proceed as usual&lt;br/&gt;
        assertEquals(&quot;external-hello&quot;, ((State) exec.getCurrentStatus().getStates().&lt;br/&gt;
                iterator().next()).getId());&lt;br/&gt;
        assertEquals (&quot;external world&quot;, context.get(&quot;custom&quot;));&lt;br/&gt;
    }&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/SCXML&quot;&lt;br/&gt;
       xmlns:my=&quot;http://my.custom-actions.domain/CUSTOM&quot;&lt;br/&gt;
       version=&quot;1.0&quot;&lt;br/&gt;
       initialstate=&quot;external-hello&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;state id=&quot;external-hello&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;onentry&amp;gt;&lt;br/&gt;
            &amp;lt;my:hello name=&quot;external world&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/onentry&amp;gt;&lt;br/&gt;
    &amp;lt;/state&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/scxml&amp;gt;&lt;/p&gt;



&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;scxml xmlns=&quot;http://www.w3.org/2005/07/SCXML&quot;&lt;br/&gt;
       xmlns:my=&quot;http://my.custom-actions.domain/CUSTOM&quot;&lt;br/&gt;
       version=&quot;1.0&quot;&lt;br/&gt;
       initialstate=&quot;custom&quot;&amp;gt;&lt;br/&gt;
	&amp;lt;datamodel/&amp;gt;&lt;br/&gt;
    &amp;lt;state id=&quot;custom&quot; final=&quot;true&quot;&lt;br/&gt;
src=&quot;test/org/apache/commons/scxml/external-hello-world.xml&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/scxml&amp;gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12343071">SCXML-8</key>
            <summary>[scxml] External Digester does not addCustomActions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fasihullah.askiri@gmail.com">Fasihullah</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 May 2006 00:33:38 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:48 +0000</updated>
                            <resolved>Thu, 18 May 2006 09:22:40 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12411863" author="rahul@apache.org" created="Wed, 10 May 2006 04:53:48 +0000"  >&lt;p&gt;Indeed, the approach to adding custom actions after calling newInstance() on &lt;br/&gt;
the digester does not address the case where the external documents pulled in &lt;br/&gt;
contain custom actions. It seems best to take this opportunity to refactor a &lt;br/&gt;
couple of related bits in the SCXMLDigester related to custom action parsing.&lt;/p&gt;

&lt;p&gt;Thanks for reporting this, I&apos;ll take a look later tonight.&lt;/p&gt;
</comment>
                            <comment id="12411864" author="fasihullah.askiri@gmail.com" created="Wed, 10 May 2006 05:50:29 +0000"  >&lt;p&gt;I think that this approach is &quot;weird&quot; if nothing else &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I guess a cleaner approach would be to go the Xalan way, either have an entity&lt;br/&gt;
resolver to find out the mapping or support java: namespace,&lt;br/&gt;
the second would be a lot more easier/intuitive to use.&lt;br/&gt;
in my example I would have used&lt;br/&gt;
xmlns:hello=&quot;java://com.mycompany.customactions.Hello&quot;&lt;br/&gt;
instead of the &lt;br/&gt;
xmlns:hello=&quot;http://some.bakar.com/HELLO&quot;&lt;br/&gt;
Which does not serve any purpose at all!!&lt;br/&gt;
hello:sayhi would call Hello.sayhi&lt;/p&gt;

&lt;p&gt;However, doing this would mean a lot of change, also, it will mean that the old&lt;br/&gt;
code where ppl implemented SayHi.class to say a hi will be deprecated (Though&lt;br/&gt;
not broken, they should still be able to do what they do, only the java:&lt;br/&gt;
namespace can have this semantic)&lt;/p&gt;

&lt;p&gt;Anyways, this was just my thought. &lt;br/&gt;
(In reply to comment #1)&lt;br/&gt;
&amp;gt; Indeed, the approach to adding custom actions after calling newInstance() on &lt;br/&gt;
&amp;gt; the digester does not address the case where the external documents pulled in &lt;br/&gt;
&amp;gt; contain custom actions. It seems best to take this opportunity to refactor a &lt;br/&gt;
&amp;gt; couple of related bits in the SCXMLDigester related to custom action parsing.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Thanks for reporting this, I&apos;ll take a look later tonight.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; &lt;/p&gt;
</comment>
                            <comment id="12411865" author="rahul@apache.org" created="Thu, 11 May 2006 03:04:34 +0000"  >&lt;p&gt;That will definitely be a larger change for the users, but also conceptually, &lt;br/&gt;
since the custom actions are meant to be in other XML namespaces, the approach &lt;br/&gt;
used is similar to how Mozilla does XTF for its plugins (you define a backing &lt;br/&gt;
bean for each element in the namespace). If we take the POJO approach, then it &lt;br/&gt;
does imply higher reflection overheads (at runtime, reflection is our bread-n-&lt;br/&gt;
butter at parsing time) and is probably strange as an XML namespace. After &lt;br/&gt;
all, the actions are called custom actions since their utility and &lt;br/&gt;
implementation preferences are subjective.&lt;/p&gt;

&lt;p&gt;As a library, Commons SCXML provides opportunities to customize most of its &lt;br/&gt;
internals, be it parsing, custom actions or engine semantics. Together, these &lt;br/&gt;
should allow users to build atop with their ideas (and the useful ones can &lt;br/&gt;
hopefully come back in to Commons SCXML). There is only so much that will come &lt;br/&gt;
out of the box, especially for the first release. I have some cleanup done &lt;br/&gt;
that fixes this issue about not parsing custom actions in &quot;src&apos;ed in&quot; &lt;br/&gt;
documents, but the repository seems down ATM.&lt;/p&gt;</comment>
                            <comment id="12412281" author="rahul@apache.org" created="Thu, 18 May 2006 09:22:40 +0000"  >&lt;p&gt;Fixed in r407424, should appear in 05182006 nightlies.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39534</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172665</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zyvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207954</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-7] [scxml] Write Use Case for Stand-alone Application Modelling a Stop Watch</title>
                <link>https://issues.apache.org/jira/browse/SCXML-7</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;SCXML has two good use case documents, one is about RDC and one about Shale&lt;br/&gt;
dialogs.  There are a good start, but it would be helpful if SCXML had another&lt;br/&gt;
usecase that wasn&apos;t tied to either a voice application or a web MVC framework. &lt;br/&gt;
Something at a conceptual level that people looking to use SCXML for a general&lt;br/&gt;
finite state machine can relate to without having to be familiar with another&lt;br/&gt;
framework.&lt;/p&gt;

&lt;p&gt;The question is, what should this example be?  We could use the Microwave&lt;br/&gt;
example from the working draft, but that might be too much for a quick&lt;br/&gt;
introduction.  Instead it might be better to choose something that doesn&apos;t have&lt;br/&gt;
parallel states, maybe the status of a document in a content management system&lt;br/&gt;
with four/five simple states and simple transitions that just shows off the&lt;br/&gt;
basic usecases of the state machine execution environment in a standalone&lt;br/&gt;
environment.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12342855">SCXML-7</key>
            <summary>[scxml] Write Use Case for Stand-alone Application Modelling a Stop Watch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tobrien@discursive.com">Tim O&apos;Brien</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 Jan 2006 00:47:07 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:47 +0000</updated>
                            <resolved>Thu, 3 Jan 2008 19:46:47 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12411252" author="scolebourne@joda.org" created="Sun, 15 Jan 2006 01:43:27 +0000"  >&lt;p&gt;I had to use a stopwatch state machine (ready/running/paused/stopped) to&lt;br/&gt;
actually understand SCXML for Javapolis. This may be a simple four state machine&lt;br/&gt;
that could be used here.&lt;/p&gt;</comment>
                            <comment id="12411253" author="rahul@apache.org" created="Wed, 18 Jan 2006 14:12:21 +0000"  >&lt;p&gt;Definitely, simpler usecases might go a long way in getting the concept of the &lt;br/&gt;
component across to our development community. Potential suggestions we&apos;ve &lt;br/&gt;
seen so far:&lt;/p&gt;

&lt;p&gt;1) Microwave example from spec (version without parallel states)&lt;br/&gt;
2) Stephen&apos;s stopwatch example from his Javapolis talk&lt;br/&gt;
3) Tim&apos;s suggestion about the document lifecycle in a CMS&lt;/p&gt;

&lt;p&gt;We have (1) in the src/test subtree. If you guys have SCXML documents for (2) &lt;br/&gt;
and (3), feel free to add them under the obvious places (xdocs/ as a usecase &lt;br/&gt;
for the website, under src/test or even to this ticket, however you see fit).&lt;/p&gt;

&lt;p&gt;I don&apos;t mean to be shy towards doing the work, just making sure I wasn&apos;t &lt;br/&gt;
coming off as gate-keeping SCXML in any way &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12411254" author="tobrien@discursive.com" created="Thu, 19 Jan 2006 00:16:19 +0000"  >&lt;p&gt;Alright, good discussion.  I think we should write quick use case revolving&lt;br/&gt;
around a stop watch example.  &lt;/p&gt;

&lt;p&gt;The microwave example from the spec is interesting in that it shows off parallel&lt;br/&gt;
states and a bunch of more complex requirements, but I think that we should have&lt;br/&gt;
one example that is dead simple for new users.  &lt;/p&gt;

&lt;p&gt;From Stephen&apos;s post: (ready/running/paused/stopped) - I&apos;ll take the state&lt;br/&gt;
diagram from his Javapolis presentation here&lt;br/&gt;
(&lt;a href=&quot;http://wiki.javapolis.com/confluence/display/JP05/New+and+Upcoming+in+Jakarta+Commons&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.javapolis.com/confluence/display/JP05/New+and+Upcoming+in+Jakarta+Commons&lt;/a&gt;)&lt;br/&gt;
 BTW, we should be linking to this from the commons website or the wiki at least.&lt;/p&gt;</comment>
                            <comment id="12411255" author="rahul@apache.org" created="Thu, 2 Mar 2006 03:01:15 +0000"  >&lt;p&gt;See (long URL, may get fragmented):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://jakarta.apache.org/commons/sandbox/scxml/usecases/scxml-stopwatch.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jakarta.apache.org/commons/sandbox/scxml/usecases/scxml-stopwatch.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As you point out, usecases are vital &amp;#8211; critiques and suggestions for &lt;br/&gt;
improvement are most welcome.&lt;/p&gt;</comment>
                            <comment id="12411256" author="rahul@apache.org" created="Fri, 21 Apr 2006 04:44:22 +0000"  >&lt;p&gt;Re-assigning from Sandbox to SCXML.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38274</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172664</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zzfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208044</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-6] [scxml] explore strategies for decoupling execution context from representation</title>
                <link>https://issues.apache.org/jira/browse/SCXML-6</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The current model of a state machine contains references to the context and the&lt;br/&gt;
notification registry.  We need to figure out a strategy for decoupling state&lt;br/&gt;
machine representation from the executor so that we can have multiple instances&lt;br/&gt;
of a state machine that use the same model.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12342864">SCXML-6</key>
            <summary>[scxml] explore strategies for decoupling execution context from representation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tobrien@discursive.com">Tim O&apos;Brien</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jan 2006 01:22:05 +0000</created>
                <updated>Thu, 2 May 2013 02:28:36 +0000</updated>
                            <resolved>Thu, 18 May 2006 09:21:04 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12411291" author="rahul@apache.org" created="Mon, 30 Jan 2006 03:48:51 +0000"  >&lt;p&gt;Thanks for highlighting the issue. A proposed solution is available in the &lt;br/&gt;
STATELESS_MODEL branch. Comments welcome. If there are no comments in a few &lt;br/&gt;
days, I intend to merge changes to trunk.&lt;/p&gt;
</comment>
                            <comment id="12411292" author="tobrien@discursive.com" created="Fri, 3 Feb 2006 18:49:39 +0000"  >&lt;p&gt;You&apos;ve removed the Context from State and now SCXMLSemanticImpl grabs the&lt;br/&gt;
context from the notification registry.  The only quesion issue I&apos;ve got is that&lt;br/&gt;
Registry is awfully close to NotificationRegistry and might the two become&lt;br/&gt;
confused.  Is there a better name for the Registry class, maybe something like&lt;br/&gt;
&quot;Execution&quot; or &quot;ExecutionEnvironment&quot;, or &quot;ExecuteContext&quot;&lt;/p&gt;

&lt;p&gt;....or &quot;SuperFancyStateMachineExecutionUtil&quot;&lt;/p&gt;

&lt;p&gt;And, I know this is nit picky, so feel free to object strenuously.&lt;/p&gt;</comment>
                            <comment id="12411293" author="rahul@apache.org" created="Sat, 4 Feb 2006 03:46:12 +0000"  >&lt;p&gt;(In reply to comment #2)&lt;br/&gt;
&amp;gt; You&apos;ve removed the Context from State and now SCXMLSemanticImpl grabs the&lt;br/&gt;
&amp;gt; context from the notification registry.  The only quesion issue I&apos;ve got is &lt;br/&gt;
that&lt;br/&gt;
&amp;gt; Registry is awfully close to NotificationRegistry and might the two become&lt;br/&gt;
&amp;gt; confused.&lt;br/&gt;
&amp;lt;snip/&amp;gt;&lt;/p&gt;

&lt;p&gt;Possibly, just as it got confused above, or maybe it was a typo. The Contexts &lt;br/&gt;
are obtained from the Registry (not the NotificationRegistry). The Registry &lt;br/&gt;
keeps the books for a particular state machine execution instance, and &lt;br/&gt;
maintaining notification listeners is but one aspect of that function.&lt;/p&gt;

&lt;p&gt;In totality, the current &quot;registry&quot; keeps record of:&lt;/p&gt;

&lt;p&gt;1) The contexts created, and the states they were assigned to&lt;br/&gt;
2) The last known configurations for the histories&lt;br/&gt;
3) The root context and the expression evaluator&lt;br/&gt;
4) The SCXMLListeners attached to the interesting nodes in the SCXML object &lt;br/&gt;
model (via the NotificationRegistry)&lt;/p&gt;

&lt;p&gt;The NotificationRegistry is a convenience class for (4) at this time, rather &lt;br/&gt;
than inlining all its methods in the Registry class &amp;#8211; but the separation of &lt;br/&gt;
concerns is useful and also improves source readability, IMO. Also, as the &lt;br/&gt;
specification matures, it is quite possible that there will be more things &lt;br/&gt;
to &quot;track&quot;.&lt;/p&gt;

&lt;p&gt;And maybe your comment above had a typo, which makes this explanation &lt;br/&gt;
unnecessary.&lt;/p&gt;


&lt;p&gt;&amp;gt;  Is there a better name for the Registry class, maybe something like&lt;br/&gt;
&amp;gt; &quot;Execution&quot; or &quot;ExecutionEnvironment&quot;, or &quot;ExecuteContext&quot;&lt;br/&gt;
&amp;gt; ....or &quot;SuperFancyStateMachineExecutionUtil&quot;&lt;br/&gt;
&amp;gt; And, I know this is nit picky, so feel free to object strenuously.&lt;/p&gt;

&lt;p&gt;Since Execution is somewhat vague and Context is already an SCXML interface, &lt;br/&gt;
probably the only suggestion worth considering from the list above is &lt;br/&gt;
ExecutionEnvironment. But even so, I tend to favor Registry because IMO it is &lt;br/&gt;
closest to summarizing what the class is actually doing (I think of the &lt;br/&gt;
execution environment as the system the state machine is controlling). I&apos;ll be &lt;br/&gt;
merging the STATELESS_MODEL branch to trunk over the weekend, but we can &lt;br/&gt;
always change the name even after the merge, if it remains a concern.&lt;/p&gt;
</comment>
                            <comment id="12411294" author="tobrien@discursive.com" created="Sat, 4 Feb 2006 04:30:18 +0000"  >&lt;p&gt;Here&apos;s where I find the naming confusing.  Imagine the documentation for this:&lt;/p&gt;

&lt;p&gt;&quot;A state machine is modeled by an instance of SCXML which contains all the&lt;br/&gt;
states and transitions that describe the structure and features of a state&lt;br/&gt;
machine.  When an application needs to execute such a state machine, it will&lt;br/&gt;
need to provide a Registry.  The Registry contains contexts, historical state,&lt;br/&gt;
and listeners that are notified when certain events occur during the execution&lt;br/&gt;
(or interpretation) of a state machine.  This Registry also contains an object&lt;br/&gt;
named NotificationRegistry which is a registry of the aforementioned listeners.&quot;&lt;/p&gt;

&lt;p&gt;So the thing I&apos;m seeing is that the concept of the NotificationRegistry being a&lt;br/&gt;
registry of listeners within a larger registry (which is more of an&lt;br/&gt;
ExecutionEnvironment) seems confusing.&lt;/p&gt;

&lt;p&gt;It also stems from the fact that a &quot;Registry&quot; is usually an object than contains&lt;br/&gt;
a collection of similar elements.  So, a PersonRegistry contains people, a&lt;br/&gt;
ListenerRegistry contains listeners, etc.  Calling the execution environment a&lt;br/&gt;
registry just strikes me as a misnomer because it holds a collection of&lt;br/&gt;
different elements all important to execution.&lt;/p&gt;

&lt;p&gt;Anyway, I know I&apos;m being a stickler for the details, but I think of language and&lt;br/&gt;
terminology as something that needs to be addresses up front.  I can understand&lt;br/&gt;
that a larger &quot;ExecutionContext&quot; contains a number of objects necessary for&lt;br/&gt;
execution including a sub-contexts that store information particular to each&lt;br/&gt;
state.  I feel less comfortable explaining that the &quot;Registry&quot; contains a series&lt;br/&gt;
of objects necessary for execution including a NotificationRegistry and a series&lt;br/&gt;
of a Content objects and histories.&lt;/p&gt;

&lt;p&gt;In addition, having a class named &quot;Registry&quot; and a class named&lt;br/&gt;
&quot;NotificationRegistry&quot; implies an extension or implementation relationship.&lt;/p&gt;</comment>
                            <comment id="12411295" author="rahul@apache.org" created="Sat, 4 Feb 2006 05:45:49 +0000"  >&lt;p&gt;Earlier post re-arranged in response:&lt;/p&gt;

&lt;p&gt;(In reply to comment #4)&lt;/p&gt;

&lt;p&gt;&amp;gt; In addition, having a class named &quot;Registry&quot; and a class named&lt;br/&gt;
&amp;gt; &quot;NotificationRegistry&quot; implies an extension or implementation relationship.&lt;/p&gt;

&lt;p&gt;I think this implied relationship based on the names is a convincing argument &lt;br/&gt;
for changing the name (it is a HAS-A rather than IS-A relationship, so the &lt;br/&gt;
current names are ill-suited).&lt;/p&gt;


&lt;p&gt;&amp;gt; Here&apos;s where I find the naming confusing.  Imagine the documentation for &lt;br/&gt;
this:&lt;br/&gt;
&amp;gt; &quot;A state machine is modeled by an instance of SCXML which contains all the&lt;br/&gt;
&amp;gt; states and transitions that describe the structure and features of a state&lt;br/&gt;
&amp;gt; machine.  When an application needs to execute such a state machine, it will&lt;br/&gt;
&amp;gt; need to provide a Registry.  The Registry contains contexts, historical &lt;br/&gt;
state,&lt;br/&gt;
&amp;gt; and listeners that are notified when certain events occur during the &lt;br/&gt;
execution&lt;br/&gt;
&amp;gt; (or interpretation) of a state machine.  This Registry also contains an &lt;br/&gt;
object&lt;br/&gt;
&amp;gt; named NotificationRegistry which is a registry of the aforementioned &lt;br/&gt;
listeners.&quot;&lt;/p&gt;

&lt;p&gt;Even leaving aside the confusion implied by the naming, the above &lt;br/&gt;
documentation would simply be incorrect. The &quot;Registry&quot; (or whatever the new &lt;br/&gt;
name is, for the sake of this note I&apos;ll continue to call it that) is an &lt;br/&gt;
internal structure to the SCXMLExecutor, and the developer/application does &lt;br/&gt;
not need to &quot;provide a Registry&quot; (just a limited number of its parts directly &lt;br/&gt;
via the SCXMLExecutor class API).&lt;/p&gt;

&lt;p&gt;See the, albeit incomplete, documentation here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://people.apache.org/~rahul/sites/scxml-stateless-model/api-notes/core-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://people.apache.org/~rahul/sites/scxml-stateless-model/api-notes/core-&lt;/a&gt;&lt;br/&gt;
engine.html&lt;/p&gt;

&lt;p&gt;The developer provides only the root context, expression evaluator and any &lt;br/&gt;
listeners. The developer does not need to instantiate a Registry and does not &lt;br/&gt;
need to deal with (or be concerned about) the contexts per state or the &lt;br/&gt;
histories (they get assigned and populated by the Registry).&lt;/p&gt;


&lt;p&gt;&amp;gt; Anyway, I know I&apos;m being a stickler for the details, but I think of language &lt;br/&gt;
and&lt;br/&gt;
&amp;gt; terminology as something that needs to be addresses up front.&lt;/p&gt;

&lt;p&gt;This is good for the Commons SCXML component, do continue to be a stickler.&lt;/p&gt;


&lt;p&gt;&amp;gt;  I can understand&lt;br/&gt;
&amp;gt; that a larger &quot;ExecutionContext&quot; contains a number of objects necessary for&lt;br/&gt;
&amp;gt; execution including a sub-contexts that store information particular to each&lt;br/&gt;
&amp;gt; state.  I feel less comfortable explaining that the &quot;Registry&quot; contains a &lt;br/&gt;
series&lt;br/&gt;
&amp;gt; of objects necessary for execution including a NotificationRegistry and a &lt;br/&gt;
series&lt;br/&gt;
&amp;gt; of a Content objects and histories.&lt;/p&gt;

&lt;p&gt;But does ExecutionContext have potential for the same confusion w.r.t the &lt;br/&gt;
Context interface, as NotificationRegistry had with Registry? That was my &lt;br/&gt;
brief reference in comment #3.&lt;/p&gt;

&lt;p&gt;Suggestions for name:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;ExecutionContext (pending question above)&lt;/li&gt;
	&lt;li&gt;ExecutionEnvironment (suggestion from comment #2)&lt;/li&gt;
	&lt;li&gt;ExecutionData&lt;/li&gt;
	&lt;li&gt;ExecutionInstance&lt;/li&gt;
	&lt;li&gt;-&lt;del&gt;something else&lt;/del&gt;-&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;WDYT?&lt;/p&gt;
</comment>
                            <comment id="12411296" author="tobrien@discursive.com" created="Sat, 4 Feb 2006 07:03:34 +0000"  >&lt;p&gt;(In reply to comment #5)&lt;br/&gt;
&amp;gt; Even leaving aside the confusion implied by the naming, the above &lt;br/&gt;
&amp;gt; documentation would simply be incorrect. The &quot;Registry&quot; (or whatever the new &lt;br/&gt;
&amp;gt; name is, for the sake of this note I&apos;ll continue to call it that) is an &lt;br/&gt;
&amp;gt; internal structure to the SCXMLExecutor, and the developer/application does &lt;br/&gt;
&amp;gt; not need to &quot;provide a Registry&quot; (just a limited number of its parts directly &lt;br/&gt;
&amp;gt; via the SCXMLExecutor class API).&lt;br/&gt;
&amp;gt; &lt;/p&gt;

&lt;p&gt;OK, then ignore the interpretation.  Apologies for the misread.&lt;/p&gt;

&lt;p&gt;&amp;gt; But does ExecutionContext have potential for the same confusion w.r.t the &lt;br/&gt;
&amp;gt; Context interface, as NotificationRegistry had with Registry? That was my &lt;br/&gt;
&amp;gt; brief reference in comment #3.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Suggestions for name:&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; * ExecutionContext (pending question above)&lt;br/&gt;
&amp;gt; * ExecutionEnvironment (suggestion from comment #2)&lt;br/&gt;
&amp;gt; * ExecutionData&lt;br/&gt;
&amp;gt; * ExecutionInstance&lt;br/&gt;
&amp;gt; * -&lt;del&gt;something else&lt;/del&gt;-&lt;/p&gt;

&lt;p&gt;+1 for anything *Instance.  ExecutionData seems overly vauge.  Evnironment as&lt;br/&gt;
well, but instance seems like a valid concept.  &lt;/p&gt;

&lt;p&gt;So, in some Voice response system that might use SCXML to handle multiple&lt;br/&gt;
conversations at once, one could say that there is one SCXML object that models&lt;br/&gt;
states, etc. and multiple &lt;span class=&quot;error&quot;&gt;&amp;#91;ExecInstance|SCInstance|MachineInstance&amp;#93;&lt;/span&gt; whatever&lt;/p&gt;

&lt;p&gt;I&apos;m also convinced that the value was this conversation, and that if you decided&lt;br/&gt;
to call is &quot;SuperMagicStateObject&quot;, we&apos;d at least be able to refer someone to&lt;br/&gt;
this Bugzilla thread to get context.  So, consider views aired, but don&apos;t hold&lt;br/&gt;
off on merging or committing.&lt;/p&gt;


&lt;p&gt;&amp;gt; &lt;br/&gt;
&amp;gt; WDYT?&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; &lt;/p&gt;</comment>
                            <comment id="12411297" author="rahul@apache.org" created="Sat, 4 Feb 2006 07:24:16 +0000"  >&lt;p&gt;(In reply to comment #6)&lt;br/&gt;
&amp;gt; +1 for anything *Instance.  ExecutionData seems overly vauge.  Evnironment as&lt;br/&gt;
&amp;gt; well, but instance seems like a valid concept.&lt;br/&gt;
&amp;gt;  &lt;br/&gt;
&amp;gt; So, in some Voice response system that might use SCXML to handle multiple&lt;br/&gt;
&amp;gt; conversations at once, one could say that there is one SCXML object that &lt;br/&gt;
models&lt;br/&gt;
&amp;gt; states, etc. and multiple &lt;span class=&quot;error&quot;&gt;&amp;#91;ExecInstance|SCInstance|MachineInstance&amp;#93;&lt;/span&gt; whatever&lt;br/&gt;
&amp;gt;&lt;/p&gt;

&lt;p&gt;Yes, that is how I see it as well.&lt;/p&gt;


&lt;p&gt;&amp;gt; I&apos;m also convinced that the value was this conversation, and that if you &lt;br/&gt;
decided&lt;br/&gt;
&amp;gt; to call is &quot;SuperMagicStateObject&quot;, we&apos;d at least be able to refer someone to&lt;br/&gt;
&amp;gt; this Bugzilla thread to get context.&lt;/p&gt;

&lt;p&gt;Indeed, this has been very useful, thanks for your comments. I&apos;ll follow up in &lt;br/&gt;
code over the next day or two.&lt;/p&gt;
</comment>
                            <comment id="12411298" author="rahul@apache.org" created="Mon, 6 Feb 2006 01:55:26 +0000"  >&lt;p&gt;I have renamed the Registry class to SCInstance, and the STATELESS_MODEL &lt;br/&gt;
branch has been merged with trunk in r375053. The changes discussed here are &lt;br/&gt;
now in trunk and therefore, I am closing this as FIXED.&lt;/p&gt;

&lt;p&gt;The documentation (Javadocs and xdocs/) has been minimally updated, further &lt;br/&gt;
improvements are necessary. However, those improvements have been assigned to &lt;br/&gt;
separate issues in Bugzilla (see the list of bugs blocked by this one).&lt;/p&gt;</comment>
                            <comment id="12411299" author="rahul@apache.org" created="Fri, 21 Apr 2006 04:45:45 +0000"  >&lt;p&gt;Re-assigning from Sandbox to SCXML.&lt;/p&gt;</comment>
                            <comment id="12412279" author="rahul@apache.org" created="Thu, 18 May 2006 09:20:02 +0000"  >&lt;p&gt;Reopening to resolve correctly (Bugzilla to JIRA migration oddity).&lt;/p&gt;</comment>
                            <comment id="12412280" author="rahul@apache.org" created="Thu, 18 May 2006 09:21:04 +0000"  >&lt;p&gt;Resolving correctly.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12342857">SCXML-4</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12342856">SCXML-9</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38311</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172663</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zyxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207960</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-5] [scxml] src attribute throws up a null pointer exception!</title>
                <link>https://issues.apache.org/jira/browse/SCXML-5</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;The @src attribute throws up NPE&lt;br/&gt;
&amp;lt;state id=&quot;inner&quot; src=&quot;inner.scxml&quot;&amp;gt;&lt;br/&gt;
 &amp;lt;transition event=&quot;application.error&quot; target=&quot;error&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/state&amp;gt;&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at&lt;br/&gt;
org.apache.commons.scxml.io.SCXMLDigester$DigestSrcAttributeRule.begin(SCXMLDigester.java:1302)&lt;br/&gt;
	at org.apache.commons.digester.Digester.startElement(Digester.java:1361)&lt;br/&gt;
	at org.apache.xerces.parsers.SAXParser.startElement(SAXParser.java:1376)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.xerces.validators.common.XMLValidator.callStartElement(XMLValidator.java:1284)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.xerces.framework.XMLDocumentScanner.scanElement(XMLDocumentScanner.java:1806)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.xerces.framework.XMLDocumentScanner$ContentDispatcher.dispatch(XMLDocumentScanner.java:1182)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.xerces.framework.XMLDocumentScanner.parseSome(XMLDocumentScanner.java:381)&lt;br/&gt;
	at org.apache.xerces.framework.XMLParser.parse(XMLParser.java:1098)&lt;br/&gt;
	at org.apache.commons.digester.Digester.parse(Digester.java:1666)&lt;br/&gt;
	at com.baypackets.simulator.Scenario.&amp;lt;init&amp;gt;(Scenario.java:63)&lt;br/&gt;
	at&lt;br/&gt;
com.baypackets.simulator.StateEngineManager$1.createObject(StateEngineManager.java:46)&lt;br/&gt;
	at org.apache.commons.digester.FactoryCreateRule.begin(FactoryCreateRule.java:389)&lt;br/&gt;
	at org.apache.commons.digester.Digester.startElement(Digester.java:1361)&lt;br/&gt;
	at org.apache.xerces.parsers.SAXParser.startElement(SAXParser.java:1376)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.xerces.validators.common.XMLValidator.callStartElement(XMLValidator.java:1284)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.xerces.framework.XMLDocumentScanner.scanElement(XMLDocumentScanner.java:1806)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.xerces.framework.XMLDocumentScanner$ContentDispatcher.dispatch(XMLDocumentScanner.java:1182)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.xerces.framework.XMLDocumentScanner.parseSome(XMLDocumentScanner.java:381)&lt;br/&gt;
	at org.apache.xerces.framework.XMLParser.parse(XMLParser.java:1098)&lt;br/&gt;
	at org.apache.commons.digester.Digester.parse(Digester.java:1666)&lt;br/&gt;
	at com.baypackets.simulator.StateEngineManager.&amp;lt;init&amp;gt;(StateEngineManager.java:64)&lt;br/&gt;
	at com.baypackets.simulator.StateEngineManager.&amp;lt;clinit&amp;gt;(StateEngineManager.java:21)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: All&lt;br/&gt;
Platform: All&lt;/p&gt;</environment>
        <key id="12343053">SCXML-5</key>
            <summary>[scxml] src attribute throws up a null pointer exception!</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fasihullah.askiri@gmail.com">Fasihullah</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Apr 2006 00:33:15 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:47 +0000</updated>
                            <resolved>Thu, 3 Jan 2008 19:46:47 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12411825" author="rahul@apache.org" created="Thu, 27 Apr 2006 00:38:39 +0000"  >&lt;p&gt;The error message needs to improve. I presume you have &quot;inner.scxml&quot; &lt;br/&gt;
available, and it is a valid SCXML document?&lt;/p&gt;</comment>
                            <comment id="12411826" author="rahul@apache.org" created="Thu, 27 Apr 2006 05:48:33 +0000"  >&lt;p&gt;Fixed in r397325, added null PathResolver checks. Thanks for reporting this.&lt;/p&gt;

&lt;p&gt;The recommended best practice, however, is to provide a PathResolver, for &lt;br/&gt;
portability reasons.&lt;/p&gt;</comment>
                            <comment id="12442174" author="fasihullah.askiri@gmail.com" created="Sat, 14 Oct 2006 02:45:49 +0000"  >
&lt;p&gt;   [[ Old comment, sent by email on Mon, 17 Jul 2006 12:00:02 -0700 ]]&lt;/p&gt;

&lt;p&gt;Please ignore if you get this again.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39415</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172662</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 4 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zyvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207952</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-4] [scxml] More Explicit Instructions on core-engine.html</title>
                <link>https://issues.apache.org/jira/browse/SCXML-4</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Similar issue on core-engine.html as core-digester.html.  While we show the&lt;br/&gt;
end-user a clear path towards getting the Executor to work, we use placeholders&lt;br/&gt;
for the Evaluator, EventDispatcher, and ErrorReporter.  &lt;/p&gt;

&lt;p&gt;The document needs sections on all three objects, how to create them, what they&lt;br/&gt;
do.  The document could also use a more general discussion of the components&lt;br/&gt;
that are involved in the execution.  &lt;/p&gt;

&lt;p&gt;&quot;An engine, once initialized, should be cached till the state machine reaches a&lt;br/&gt;
terminal or &quot;final&quot; state, and no more.&quot; - That sentence especially needs a&lt;br/&gt;
little more definition.  &lt;/p&gt;

&lt;p&gt;Page needs to explain all of the methods on the Executor, for example, while the&lt;br/&gt;
code uses SuperStep, it doesn&apos;t explain what that particular call accomplishes.&lt;br/&gt;
  Also, the documentation should be clear about when the Executor starts to&lt;br/&gt;
dispatch events.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12342857">SCXML-4</key>
            <summary>[scxml] More Explicit Instructions on core-engine.html</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tobrien@discursive.com">Tim O&apos;Brien</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 Jan 2006 01:19:03 +0000</created>
                <updated>Thu, 2 May 2013 02:28:36 +0000</updated>
                            <resolved>Thu, 3 Jan 2008 19:46:47 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12411260" author="rahul@apache.org" created="Sat, 4 Feb 2006 04:15:26 +0000"  >&lt;p&gt;Similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-9&quot; title=&quot;[scxml] More Explicit Instructions on core-digester.html&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-9&quot;&gt;&lt;del&gt;COM-2704&lt;/del&gt;&lt;/a&gt;, need to bring in the refactoring discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SCXML-6&quot; title=&quot;[scxml] explore strategies for decoupling execution context from representation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SCXML-6&quot;&gt;&lt;del&gt;COM-2712&lt;/del&gt;&lt;/a&gt; &lt;br/&gt;
into trunk before addressing this.&lt;/p&gt;</comment>
                            <comment id="12411261" author="rahul@apache.org" created="Fri, 21 Apr 2006 04:45:34 +0000"  >&lt;p&gt;Re-assigning from Sandbox to SCXML.&lt;/p&gt;</comment>
                            <comment id="12411262" author="rahul@apache.org" created="Fri, 5 May 2006 01:45:14 +0000"  >&lt;p&gt;The various sections of the revamped user guide probably come together to &lt;br/&gt;
address the comments here.&lt;/p&gt;

&lt;p&gt;Many thanks for your attention to detail. Reopen if you have further comments &lt;br/&gt;
or suggestions.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12342864">SCXML-6</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38276</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172661</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zywn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207957</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-3] [scxml] atribute @src to be parsed for &lt;assign&gt; tag</title>
                <link>https://issues.apache.org/jira/browse/SCXML-3</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;It is assumed that the url included in the @src attribute will be requested &lt;br/&gt;
and the result will be accessible via Data() function while using it in jexl &lt;br/&gt;
expressions.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
        <key id="12343052">SCXML-3</key>
            <summary>[scxml] atribute @src to be parsed for &lt;assign&gt; tag</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nestoru@yahoo.com">Nestor Urquiza</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Apr 2006 23:26:24 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:46 +0000</updated>
                            <resolved>Wed, 19 Jul 2006 14:49:11 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12411824" author="rahul@apache.org" created="Thu, 27 Apr 2006 00:40:59 +0000"  >&lt;p&gt;Thanks for making sure we don&apos;t forget this. Might be a few days before I get &lt;br/&gt;
to this one.&lt;/p&gt;</comment>
                            <comment id="12422158" author="rahul@apache.org" created="Wed, 19 Jul 2006 14:49:11 +0000"  >&lt;p&gt;Added in r423479.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39413</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172660</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zyun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207948</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-2] [scxml] Thread-safety in Executor</title>
                <link>https://issues.apache.org/jira/browse/SCXML-2</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Hi&lt;br/&gt;
I am trying to send an event &quot;connection.connected&quot; to the state-machine which&lt;br/&gt;
is in a parallel state. Look at the logs (Removed unnecessary statements), note&lt;br/&gt;
the thread name at the beginning and the final transitions.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;CALLBACK.4&amp;#93;&lt;/span&gt; Current States: &lt;span class=&quot;error&quot;&gt;&amp;#91;wait-for-orig-connect, wait-for-ivr-connect&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;CALLBACK.4&amp;#93;&lt;/span&gt; Firing&lt;/p&gt;
{name=connection.connected,type=3,payload=com.baypackets.simulator.sipconnector.SIPEndPoint:
orig-line[100]}
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;CALLBACK.5&amp;#93;&lt;/span&gt; Firing&lt;/p&gt;
{name=connection.connected,type=3,payload=com.baypackets.simulator.sipconnector.IVREndPoint:
ivr-line[msml]}
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;CALLBACK.4&amp;#93;&lt;/span&gt; transition (event = connection.connected, cond = _eventdata.ID eq&lt;br/&gt;
&apos;ivr-line&apos;, from =&lt;br/&gt;
/setup-call/create-call/ivr-interaction/ivr-leg/wait-for-ivr-connect, to =&lt;br/&gt;
/setup-call/create-call/ivr-interaction/ivr-leg/ivr-connected)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;CALLBACK.4&amp;#93;&lt;/span&gt; Current States: &lt;span class=&quot;error&quot;&gt;&amp;#91;wait-for-orig-connect, ivr-connected&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;CALLBACK.5&amp;#93;&lt;/span&gt; Current States: &lt;span class=&quot;error&quot;&gt;&amp;#91;wait-for-orig-connect, wait-for-ivr-connect&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;DATAI.0&amp;#93;&lt;/span&gt; Current States: &lt;span class=&quot;error&quot;&gt;&amp;#91;wait-for-orig-connect, wait-for-ivr-connect&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;Three problems:&lt;br/&gt;
1. The last three lines above: the change that CALLBACK.4 did is overridden by&lt;br/&gt;
CALLBACK.5.&lt;br/&gt;
2. Callback 4 has a payload of type:orig-line, &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;CALLBACK.4&amp;#93;&lt;/span&gt; Firing&lt;/p&gt;
{name=connection.connected,type=3,payload=com.baypackets.simulator.sipconnector.SIPEndPoint:
orig-line[100]}
&lt;p&gt;But&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;CALLBACK.4&amp;#93;&lt;/span&gt; transition (event = connection.connected, cond = _eventdata.ID eq&lt;br/&gt;
&apos;ivr-line&apos;, from =&lt;br/&gt;
/setup-call/create-call/ivr-interaction/ivr-leg/wait-for-ivr-connect, to =&lt;br/&gt;
/setup-call/create-call/ivr-interaction/ivr-leg/ivr-connected)&lt;br/&gt;
it thinks that it has an &apos;ivr-line&apos;???&lt;br/&gt;
3. Where did the orig line disappear??&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: All&lt;br/&gt;
Platform: All&lt;/p&gt;</environment>
        <key id="12343056">SCXML-2</key>
            <summary>[scxml] Thread-safety in Executor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fasihullah.askiri@gmail.com">Fasihullah</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Apr 2006 02:00:02 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:46 +0000</updated>
                            <resolved>Thu, 3 Jan 2008 19:46:46 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12411830" author="rahul@apache.org" created="Fri, 28 Apr 2006 04:28:21 +0000"  >&lt;p&gt;This is documented in the FAQ, and is currently not high priority (on my &lt;br/&gt;
list), since there are one or two methods that do most of the work for the &lt;br/&gt;
executor and they can be synchronized externally without much effort.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://jakarta.apache.org/commons/scxml/faq.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jakarta.apache.org/commons/scxml/faq.html&lt;/a&gt; (see in SCXMLExecutor section)&lt;/p&gt;

&lt;p&gt;However, it is an authoring convenience so this will likely be looked into &lt;br/&gt;
after the first release, hence marking as LATER. If you want, feel free to &lt;br/&gt;
attach a test case that we can work with when we look at this, since you &lt;br/&gt;
probably have one already. Thanks.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>39434</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172659</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1000v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>208138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SCXML-1] [scxml] JUnit tests for SCXML</title>
                <link>https://issues.apache.org/jira/browse/SCXML-1</link>
                <project id="12310492" key="SCXML">Commons SCXML</project>
                    <description>&lt;p&gt;Unit tests need to be written for SCXML and this is a place holder&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: All&lt;/p&gt;</environment>
        <key id="12342878">SCXML-1</key>
            <summary>[scxml] JUnit tests for SCXML</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pcosta02@yahoo.com">Peter Costa</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Jan 2006 12:11:46 +0000</created>
                <updated>Thu, 3 Jan 2008 19:46:46 +0000</updated>
                            <resolved>Mon, 17 Jul 2006 20:40:56 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12411336" author="pcosta02@yahoo.com" created="Tue, 31 Jan 2006 12:19:20 +0000"  >&lt;p&gt;Created an attachment (id=17546)&lt;br/&gt;
This is an initial set of tests for Builtin, SCXMLHelper, and SimpleContext&lt;/p&gt;</comment>
                            <comment id="12411337" author="rahul@apache.org" created="Tue, 31 Jan 2006 12:52:38 +0000"  >&lt;p&gt;Thanks for the tests. Couple of suggestions:&lt;/p&gt;

&lt;p&gt;1) Its best to have the patch not rooted with a machine specific path, do a:&lt;/p&gt;

&lt;p&gt;&quot;svn diff &amp;gt; patch_filename.patch&quot;&lt;/p&gt;

&lt;p&gt;in the trunk directory. Oh, since you&apos;re on Windows, I think in TortoiseSVN &lt;br/&gt;
you can right click on any SVN folder and select the create patch (or &lt;br/&gt;
similarly named) option.&lt;/p&gt;

&lt;p&gt;2) Can you please add the Apache v2.0 license at the top of every new file? &lt;br/&gt;
You can grab it from any of the existing files.&lt;/p&gt;
</comment>
                            <comment id="12411338" author="pcosta02@yahoo.com" created="Wed, 1 Feb 2006 12:36:19 +0000"  >&lt;p&gt;Created an attachment (id=17551)&lt;br/&gt;
Correct svn diff for new tests&lt;/p&gt;

&lt;p&gt;There is an issue with testing SCXMLHelper.isLegalConfig because you are not&lt;br/&gt;
able to test the error reporter that comes back.  Everything is just written&lt;br/&gt;
out to a log file.  &lt;/p&gt;</comment>
                            <comment id="12411339" author="rahul@apache.org" created="Wed, 1 Feb 2006 13:20:28 +0000"  >&lt;p&gt;Thanks Peter, I&apos;ve applied your patch, as a result you&apos;ll be listed on the &lt;br/&gt;
project team page the next time the website is refreshed.&lt;/p&gt;

&lt;p&gt;You make an interesting comment about the ErrorReporter, the fact that it logs &lt;br/&gt;
the error is purely a side-effect of choosing the SimpleErrorReporter &lt;br/&gt;
implementation (which does nothing but log the error). Indeed, if someone were &lt;br/&gt;
to write it, it would make sense to have a NoOpErrorReporter that did nothing, &lt;br/&gt;
just as it would make sense to have an implementation that did something &lt;br/&gt;
fancier. Same goes for EventDispatcher, ErrorHandler etc.&lt;/p&gt;

&lt;p&gt;I&apos;m inclined to leave this bug unresolved for a while even though this &lt;br/&gt;
particular patch has been applied; in case any of us ends up writing more &lt;br/&gt;
tests we can attach them here in the &quot;placeholder&quot; spirit that you opened the &lt;br/&gt;
bug report in.&lt;/p&gt;
</comment>
                            <comment id="12411340" author="pcosta02@yahoo.com" created="Fri, 3 Feb 2006 12:20:44 +0000"  >&lt;p&gt;Created an attachment (id=17575)&lt;br/&gt;
Tests for Status and SCXMLHelper&lt;/p&gt;

&lt;p&gt;Created MockErrorReporter for testing.	Not sure if that is where you want the&lt;br/&gt;
Mock Object to live, but move it if you like.&lt;/p&gt;</comment>
                            <comment id="12411341" author="rahul@apache.org" created="Fri, 3 Feb 2006 12:41:28 +0000"  >&lt;p&gt;Thanks again Peter, I&apos;ve applied your patch. I believe the MockErrorReporter &lt;br/&gt;
is in the correct place.&lt;/p&gt;</comment>
                            <comment id="12411342" author="pcosta02@yahoo.com" created="Sat, 4 Feb 2006 13:13:41 +0000"  >&lt;p&gt;Created an attachment (id=17583)&lt;br/&gt;
Tests for Action, LogUtils, and SCXMLSerializer&lt;/p&gt;

&lt;p&gt;Haven&apos;t finished testing SCXMLSerializer but will over the weekend.  Is there a&lt;br/&gt;
tool to test test coverage.  I want to make sure I am testing everything that&lt;br/&gt;
needs to be tested.&lt;/p&gt;</comment>
                            <comment id="12411343" author="rahul@apache.org" created="Sat, 4 Feb 2006 14:22:07 +0000"  >&lt;p&gt;Thanks Peter, your patch in comment #7 has been applied, these contributions &lt;br/&gt;
are very helpful.&lt;/p&gt;

&lt;p&gt;Couple of comments:&lt;/p&gt;

&lt;p&gt;1) Please do not spend any more time on the SCXMLSerializer tests. In the &lt;br/&gt;
BETWIXT_IO branch in the repository, which I&apos;m hoping to start work on soon, &lt;br/&gt;
we&apos;re hoping to set up betwixt based IO for Commons SCXML, which if successful &lt;br/&gt;
may supercede the SCXMLSerializer class. If you&apos;ve used betwixt before, you&apos;re &lt;br/&gt;
welcome to join in the fun in that branch.&lt;/p&gt;

&lt;p&gt;2) For code coverage stats, I would recommend using a suitable maven plugin. &lt;br/&gt;
I&apos;ve enabled the cobertura [ &lt;a href=&quot;http://cobertura.sourceforge.net/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cobertura.sourceforge.net/&lt;/a&gt; ] plugin in the &lt;br/&gt;
Commons SCXML project.xml, you can use &quot;maven plugin:download&quot; to get it and &lt;br/&gt;
then &quot;maven site&quot; to create the site with the cobertura coverage report. The &lt;br/&gt;
report will also be available on the Commons SCXML site in the project reports &lt;br/&gt;
section the next time the website is refreshed. It offers fairly detailed line &lt;br/&gt;
and branch coverage stats.&lt;/p&gt;

&lt;p&gt;3) In addition to what the report in (2) says, I think the next set of useful &lt;br/&gt;
tests will be the ones that ensure the changes we will incorporate from the &lt;br/&gt;
STATELESS_MODEL branch are working as desired. I will merge that branch to the &lt;br/&gt;
trunk by end of day tomorrow. The tests will essentially parse the SCXML &lt;br/&gt;
document once and use the (same) SCXML object in multiple SCXMLExecutor &lt;br/&gt;
instances concurrently (or otherwise), and make sure their executions don&apos;t &lt;br/&gt;
step on each others&apos; toes.&lt;/p&gt;</comment>
                            <comment id="12411344" author="pcosta02@yahoo.com" created="Tue, 7 Feb 2006 11:03:18 +0000"  >&lt;p&gt;Created an attachment (id=17614)&lt;br/&gt;
Tests for Path and TransitionTargetComparator&lt;/p&gt;</comment>
                            <comment id="12411345" author="rahul@apache.org" created="Tue, 7 Feb 2006 12:43:20 +0000"  >&lt;p&gt;Thanks again Peter, your patch in comment #9 has been applied (with the &lt;br/&gt;
exception of one file in which the only change was the addition of extra &lt;br/&gt;
import statements). Also, following up on comment #8, the STATELESS_MODEL &lt;br/&gt;
branch is now merged with trunk and we&apos;ve started publishing the cobertura &lt;br/&gt;
report for the test coverages here (URL may get fragmented): &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://jakarta.apache.org/commons/sandbox/scxml/cobertura/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jakarta.apache.org/commons/sandbox/scxml/cobertura/index.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;(the patch I just applied is not reflected in the report yet).&lt;/p&gt;</comment>
                            <comment id="12411346" author="pcosta02@yahoo.com" created="Thu, 9 Feb 2006 12:09:48 +0000"  >&lt;p&gt;Created an attachment (id=17623)&lt;br/&gt;
Tests for History, State, Transition, and SCInstance&lt;/p&gt;</comment>
                            <comment id="12411347" author="rahul@apache.org" created="Sat, 11 Feb 2006 23:41:57 +0000"  >&lt;p&gt;The patch in comment #11 was applied a couple of days ago in r376338 &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, but &lt;br/&gt;
bugzilla was down at that time so this comment was delayed.&lt;/p&gt;

&lt;p&gt;As an aside, we&apos;ve decided to go with the *Test.java convention for test &lt;br/&gt;
classes since the directory listings better match the non-test counterparts. I &lt;br/&gt;
did some renaming accordingly, please update your working copy. Details are in &lt;br/&gt;
r376384 &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;. Thanks Peter.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://svn.apache.org/viewcvs?rev=376338&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs?rev=376338&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://svn.apache.org/viewcvs?rev=376384&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs?rev=376384&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12411348" author="pcosta02@yahoo.com" created="Mon, 13 Feb 2006 04:04:15 +0000"  >&lt;p&gt;Rahul,&lt;/p&gt;

&lt;p&gt;What else needs to be tested, or what is the priority of testing you would like&lt;br/&gt;
done on this?  I was going to continue testing SCXMLSerializer, but if I&lt;br/&gt;
remember correctly, you said that was going away or was being replaced by&lt;br/&gt;
Digester.  Aside from testing, what are other features you would like people to&lt;br/&gt;
work on?  &lt;/p&gt;

&lt;p&gt;Peter&lt;/p&gt;</comment>
                            <comment id="12411349" author="rahul@apache.org" created="Tue, 14 Feb 2006 07:30:17 +0000"  >&lt;p&gt;Peter - Due to the larger scope of your comment #13, I&apos;ve responded via the &lt;br/&gt;
dev mailing list. You can find the post here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://marc.theaimsgroup.com/?l=jakarta-commons-dev&amp;amp;m=113986940520399&amp;amp;w=2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://marc.theaimsgroup.com/?l=jakarta-commons-dev&amp;amp;m=113986940520399&amp;amp;w=2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think you&apos;re subscribed to the dev list (if not, please do, to catch such &lt;br/&gt;
broader discussions).&lt;/p&gt;</comment>
                            <comment id="12411350" author="rahul@apache.org" created="Fri, 21 Apr 2006 04:46:01 +0000"  >&lt;p&gt;Re-assigning from Sandbox to SCXML.&lt;/p&gt;</comment>
                            <comment id="12421715" author="rahul@apache.org" created="Mon, 17 Jul 2006 20:40:56 +0000"  >&lt;p&gt;This may be re-opened at any time if there are more tests to contribute.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12334009" name="ASF.LICENSE.NOT.GRANTED--SCXML.txt" size="11500" author="pcosta02@yahoo.com" created="Tue, 31 Jan 2006 12:19:20 +0000"/>
                            <attachment id="12334014" name="ASF.LICENSE.NOT.GRANTED--tests.patch" size="18447" author="pcosta02@yahoo.com" created="Thu, 9 Feb 2006 12:09:48 +0000"/>
                            <attachment id="12334013" name="ASF.LICENSE.NOT.GRANTED--tests.patch" size="15984" author="pcosta02@yahoo.com" created="Tue, 7 Feb 2006 11:03:18 +0000"/>
                            <attachment id="12334012" name="ASF.LICENSE.NOT.GRANTED--tests.patch" size="18846" author="pcosta02@yahoo.com" created="Sat, 4 Feb 2006 13:13:41 +0000"/>
                            <attachment id="12334011" name="ASF.LICENSE.NOT.GRANTED--tests.patch" size="9328" author="pcosta02@yahoo.com" created="Fri, 3 Feb 2006 12:20:44 +0000"/>
                            <attachment id="12334010" name="ASF.LICENSE.NOT.GRANTED--tests.patch" size="14968" author="pcosta02@yahoo.com" created="Wed, 1 Feb 2006 12:36:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>172658</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 17 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0zysv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>207940</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>