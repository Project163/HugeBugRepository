<!--
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Thu Oct 23 09:38:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+%22SLING%22+AND+issuetype+%3D+Bug+ORDER+BY+key+DESC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="2400" end="2600" total="4707"/>
                <build-info>
            <version>8.20.10</version>
            <build-number>820010</build-number>
            <build-date>22-06-2022</build-date>
        </build-info>

<item>
            <title>[SLING-5257] [TESTING][JCR MOCK] MockProperty getType generates java.lang.ArrayIndexOutOfBoundsException when the underlying array value is empty</title>
                <link>https://issues.apache.org/jira/browse/SLING-5257</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;When the underlying property value is an empty array, calling &lt;tt&gt;MockProperty.getType&lt;/tt&gt; generates an &lt;tt&gt;java.lang.ArrayIndexOutOfBoundsException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Here a small test case exhibiting this behavior (to put in &lt;tt&gt;org.apache.sling.testing.mock.jcr.MockPropertyTest&lt;/tt&gt;) :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testEmptyArrayGetType() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; RepositoryException {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.node1.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;prop1&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Value[] {});
        Property prop1 = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.node1.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;prop1&quot;&lt;/span&gt;);
        assertTrue(prop1.isMultiple());
        assertEquals(PropertyType.UNDEFINED, prop1.getType());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A fix could be to return &lt;tt&gt;PropertyType.UNDEFINED&lt;/tt&gt; when the underlying array value is empty :&lt;/p&gt;
 &lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; getType() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; RepositoryException {
    	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.itemData.getValues().length&amp;gt;0)
    	{
    		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.itemData.getValues()[0].getType();
    	}
    	&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
    	{
    		&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; PropertyType.UNDEFINED;
    	}
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12910303">SLING-5257</key>
            <summary>[TESTING][JCR MOCK] MockProperty getType generates java.lang.ArrayIndexOutOfBoundsException when the underlying array value is empty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="gdouillet">Guillaume Douillet</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Nov 2015 10:05:21 +0000</created>
                <updated>Mon, 8 Feb 2016 22:59:30 +0000</updated>
                            <resolved>Wed, 4 Nov 2015 21:11:09 +0000</resolved>
                                    <version>Testing JCR Mock 1.1.10</version>
                                    <fixVersion>Testing JCR Mock 1.1.12</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14990428" author="sseifert@pro-vision.de" created="Wed, 4 Nov 2015 21:11:10 +0000"  >&lt;p&gt;Completed: At revision: 1712652  &lt;/p&gt;

&lt;p&gt;i&apos;m not fully sure if returning UNDEFINED is the correct behavior in this case, but in any case it makes more sense than running into the ArrayIndexOutOfBoundsException.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nxkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5256] change in localClusterSyncTokenId should always trigger a TOPOLOGY_CHANGED</title>
                <link>https://issues.apache.org/jira/browse/SLING-5256</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Normally when a topology changes this is either because an instance joined or left (or because properties change, but that&apos;s another topic). And whenever an instance joins or leaves this is triggering a TOPOLOGY_CHANGED as expected.&lt;/p&gt;

&lt;p&gt;However there could be the unlikely scenario that from a state (a) an instance joins creating state (b), then leaves relatively quickly again resulting in state (c) - and one other instance in the cluster happens to be so busy that it &apos;misses&apos; the intermediate state (b) - which means it will compare state (a) with state (c) which it could see as being equal since, well, that it almost is. &lt;/p&gt;

&lt;p&gt;But to be correct, the above comparison between (a) and (c) should still trigger a TOPOLOGY_CHANGED event. And that is already possible since (a) and (c) have a differing &lt;tt&gt;localClusterSyncTokenId&lt;/tt&gt; (by definition).&lt;/p&gt;

&lt;p&gt;Long story short: the code should treat two TopologyViews with differing &lt;tt&gt;localClusterSyncTokenId&lt;/tt&gt; as different (thus automatically causing a TOPOLOGY_CHANGED as a result)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12910282">SLING-5256</key>
            <summary>change in localClusterSyncTokenId should always trigger a TOPOLOGY_CHANGED</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Nov 2015 09:11:52 +0000</created>
                <updated>Mon, 16 Nov 2015 15:00:12 +0000</updated>
                            <resolved>Wed, 4 Nov 2015 10:38:53 +0000</resolved>
                                    <version>Discovery Commons 1.0.2</version>
                    <version>Discovery Base 1.0.2</version>
                    <version>Discovery Oak 1.0.2</version>
                                    <fixVersion>Discovery Commons 1.0.4</fixVersion>
                    <fixVersion>Discovery Base 1.1.0</fixVersion>
                    <fixVersion>Discovery Oak 1.1.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14989294" author="egli" created="Wed, 4 Nov 2015 10:38:53 +0000"  >&lt;p&gt;Fixed in rev 1712527:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;change in localClusterSyncTokenId should always trigger a TOPOLOGY_CHANGED - ensured by adjusting ViewStateManager.onlyDiffersInProperties and DefaultTopologyView.compareTopology accordingly including new tests for both - plus added OakDiscoveryServiceTest.testDescriptorSeqNumChange to verify that discovery.oak now properly detects otherwise-equal topologies when their sequence_number==localClusterSyncTokenId differs&lt;/p&gt;&lt;/blockquote&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12910318">SLING-5258</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nxfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5250] [TESTING][JCR MOCK] MockProperty getValues does not comply with JCR 2.0 API</title>
                <link>https://issues.apache.org/jira/browse/SLING-5250</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;According to JCR 2.0 API, &lt;tt&gt;javax.jcr.Property.getValues()&lt;/tt&gt; should throw &lt;tt&gt;ValueFormatException&lt;/tt&gt; when the underlying property is single-valued :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; /**
     * Returns an array of all the values of &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; property. Used to access
     * multi-value properties. The array returned is a copy of the stored
     * values, so changes to it are not reflected in internal storage.
     *
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; a &amp;lt;code&amp;gt;Value&amp;lt;/code&amp;gt; array.
     * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ValueFormatException &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the property is single-valued.
     * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; RepositoryException  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; another error occurs.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Value[] getValues() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ValueFormatException, RepositoryException;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, &lt;tt&gt;org.apache.sling.testing.mock.jcr.MockProperty&lt;/tt&gt; implements a different behavior. &lt;tt&gt;ValueFormatException&lt;/tt&gt; is not thrown but an array containing a single value is returned instead.&lt;/p&gt;

&lt;p&gt;Here a small test case exhibiting this behavior (to put in &lt;tt&gt;org.apache.sling.testing.mock.jcr.MockPropertyTest&lt;/tt&gt;) :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test(expected=ValueFormatException.class)
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSingleValueAsValueArray() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; RepositoryException {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.node1.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;prop1&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.session.getValueFactory().createValue(&lt;span class=&quot;code-quote&quot;&gt;&quot;value1&quot;&lt;/span&gt;));
        Property prop1 = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.node1.getProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;prop1&quot;&lt;/span&gt;);
        assertFalse(prop1.isMultiple());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;value1&quot;&lt;/span&gt;, prop1.getValues()[0].getString());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12910011">SLING-5250</key>
            <summary>[TESTING][JCR MOCK] MockProperty getValues does not comply with JCR 2.0 API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="gdouillet">Guillaume Douillet</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Nov 2015 15:02:41 +0000</created>
                <updated>Mon, 8 Feb 2016 22:59:30 +0000</updated>
                            <resolved>Wed, 4 Nov 2015 21:17:31 +0000</resolved>
                                    <version>Testing JCR Mock 1.1.10</version>
                                    <fixVersion>Testing JCR Mock 1.1.12</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14990438" author="sseifert@pro-vision.de" created="Wed, 4 Nov 2015 21:17:32 +0000"  >&lt;p&gt;Completed: At revision: 1712653  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nvrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5246] discovery.impl.cluster.SingleInstanceTest.testTopologyEventListeners failed on jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-5246</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1919/testReport/junit/org.apache.sling.discovery.impl.cluster/SingleInstanceTest/testTopologyEventListeners/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1919/testReport/junit/org.apache.sling.discovery.impl.cluster/SingleInstanceTest/testTopologyEventListeners/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error Message

expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;

Stacktrace

java.lang.AssertionError: expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:555)
	at org.junit.Assert.assertEquals(Assert.java:542)
	at org.apache.sling.discovery.base.its.AbstractSingleInstanceTest.testTopologyEventListeners(AbstractSingleInstanceTest.java:206)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:483)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12909724">SLING-5246</key>
            <summary>discovery.impl.cluster.SingleInstanceTest.testTopologyEventListeners failed on jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Nov 2015 17:08:29 +0000</created>
                <updated>Mon, 16 Nov 2015 15:00:13 +0000</updated>
                            <resolved>Tue, 3 Nov 2015 13:45:42 +0000</resolved>
                                    <version>Discovery Impl 1.2.0</version>
                                    <fixVersion>Discovery Impl 1.2.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14985548" author="egli" created="Mon, 2 Nov 2015 17:09:45 +0000"  >&lt;p&gt;Attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12770121/12770121_SingleInstanceTest.testTopologyEventListeners.failure1919.txt&quot; title=&quot;SingleInstanceTest.testTopologyEventListeners.failure1919.txt attached to SLING-5246&quot;&gt;SingleInstanceTest.testTopologyEventListeners.failure1919.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14987291" author="egli" created="Tue, 3 Nov 2015 13:45:05 +0000"  >&lt;p&gt;Attached full &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12770322/12770322_SingleInstanceTest.testTopologyEventListeners.failure1919.full.txt&quot; title=&quot;SingleInstanceTest.testTopologyEventListeners.failure1919.full.txt attached to SLING-5246&quot;&gt;SingleInstanceTest.testTopologyEventListeners.failure1919.full.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; which shows that this is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5243&quot; title=&quot;discovery.impl.cluster.SingleInstanceTest.testBootstrap failed on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5243&quot;&gt;&lt;del&gt;SLING-5243&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;02.11.2015 16:57:31.410 *INFO * [VotingEventListener-standaloneInstance] e3caa2a9-d7fb-40d2-896b-f8846175f45f: analyzeVotings: vote doesnt match my live view, voting no. comparison result: no mem
bers resource found, vote: a VotingView[viewId=8e2551a6-c6af-40c0-81e4-fadc8f381c28, id=8e2551a6-c6af-40c0-81e4-fadc8f381c28, initiator=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, members=]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12909712">SLING-5243</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12770322" name="SingleInstanceTest.testTopologyEventListeners.failure1919.full.txt" size="220451" author="stefanegli" created="Tue, 3 Nov 2015 13:45:05 +0000"/>
                            <attachment id="12770121" name="SingleInstanceTest.testTopologyEventListeners.failure1919.txt" size="100032" author="stefanegli" created="Mon, 2 Nov 2015 17:09:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ntzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5245] discovery.impl.cluster.SingleInstanceTest.testPropertyProviders failed on jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-5245</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1919/testReport/junit/org.apache.sling.discovery.impl.cluster/SingleInstanceTest/testPropertyProviders/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1919/testReport/junit/org.apache.sling.discovery.impl.cluster/SingleInstanceTest/testPropertyProviders/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error Message

no established view at the moment

Stacktrace

org.apache.sling.discovery.base.commons.UndefinedClusterViewException: no established view at the moment
	at org.apache.sling.discovery.impl.cluster.ClusterViewServiceImpl.getLocalClusterView(ClusterViewServiceImpl.java:102)
	at org.apache.sling.discovery.base.its.AbstractSingleInstanceTest.testPropertyProviders(AbstractSingleInstanceTest.java:143)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:483)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12909723">SLING-5245</key>
            <summary>discovery.impl.cluster.SingleInstanceTest.testPropertyProviders failed on jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Nov 2015 17:06:50 +0000</created>
                <updated>Mon, 16 Nov 2015 15:00:14 +0000</updated>
                            <resolved>Tue, 3 Nov 2015 13:49:00 +0000</resolved>
                                    <version>Discovery Impl 1.2.0</version>
                                    <fixVersion>Discovery Impl 1.2.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14985545" author="egli" created="Mon, 2 Nov 2015 17:07:32 +0000"  >&lt;p&gt;Attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12770118/12770118_SingleInstanceTest.testPropertyProviders.failure1919.txt&quot; title=&quot;SingleInstanceTest.testPropertyProviders.failure1919.txt attached to SLING-5245&quot;&gt;SingleInstanceTest.testPropertyProviders.failure1919.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14987300" author="egli" created="Tue, 3 Nov 2015 13:48:25 +0000"  >&lt;p&gt;Attached full &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12770323/12770323_SingleInstanceTest.testPropertyProviders.failure1919.full.txt&quot; title=&quot;SingleInstanceTest.testPropertyProviders.failure1919.full.txt attached to SLING-5245&quot;&gt;SingleInstanceTest.testPropertyProviders.failure1919.full.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; which shows that this is also a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5243&quot; title=&quot;discovery.impl.cluster.SingleInstanceTest.testBootstrap failed on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5243&quot;&gt;&lt;del&gt;SLING-5243&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;02.11.2015 16:57:36.160 *INFO * [VotingEventListener-standaloneInstance] 7d336f55-5204-4015-9205-1a1f76f3d42b: analyzeVotings: vote doesnt match my live view, voting no. comparison result: no mem
bers resource found, vote: a VotingView[viewId=ae2873bc-acdf-4fdf-bad7-eef234df4a68, id=ae2873bc-acdf-4fdf-bad7-eef234df4a68, initiator=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, members=]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14987301" author="egli" created="Tue, 3 Nov 2015 13:49:00 +0000"  >&lt;p&gt;Same as &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5246&quot; title=&quot;discovery.impl.cluster.SingleInstanceTest.testTopologyEventListeners failed on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5246&quot;&gt;&lt;del&gt;SLING-5246&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5245&quot; title=&quot;discovery.impl.cluster.SingleInstanceTest.testPropertyProviders failed on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5245&quot;&gt;&lt;del&gt;SLING-5245&lt;/del&gt;&lt;/a&gt; is also a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5243&quot; title=&quot;discovery.impl.cluster.SingleInstanceTest.testBootstrap failed on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5243&quot;&gt;&lt;del&gt;SLING-5243&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12909712">SLING-5243</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12770323" name="SingleInstanceTest.testPropertyProviders.failure1919.full.txt" size="190507" author="stefanegli" created="Tue, 3 Nov 2015 13:48:25 +0000"/>
                            <attachment id="12770118" name="SingleInstanceTest.testPropertyProviders.failure1919.txt" size="100031" author="stefanegli" created="Mon, 2 Nov 2015 17:07:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ntzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5244] discovery.impl.cluster.voting.VotingHandlerTest.testConcurrentVotesTwoNodes failed on jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-5244</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1918/testReport/junit/org.apache.sling.discovery.impl.cluster.voting/VotingHandlerTest/testConcurrentVotesTwoNodes/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1918/testReport/junit/org.apache.sling.discovery.impl.cluster.voting/VotingHandlerTest/testConcurrentVotesTwoNodes/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error Message

expected:&amp;lt;456&amp;gt; but was:&amp;lt;455&amp;gt;

Stacktrace

java.lang.AssertionError: expected:&amp;lt;456&amp;gt; but was:&amp;lt;455&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:555)
	at org.junit.Assert.assertEquals(Assert.java:542)
	at org.apache.sling.discovery.impl.cluster.voting.VotingHandlerTest.doTestConcurrentVotes(VotingHandlerTest.java:466)
	at org.apache.sling.discovery.impl.cluster.voting.VotingHandlerTest.testConcurrentVotesTwoNodes(VotingHandlerTest.java:322)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12909714">SLING-5244</key>
            <summary>discovery.impl.cluster.voting.VotingHandlerTest.testConcurrentVotesTwoNodes failed on jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Nov 2015 16:46:25 +0000</created>
                <updated>Mon, 16 Nov 2015 15:00:14 +0000</updated>
                            <resolved>Wed, 4 Nov 2015 17:51:39 +0000</resolved>
                                    <version>Discovery Impl 1.1.8</version>
                                    <fixVersion>Discovery Impl 1.2.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14987088" author="egli" created="Tue, 3 Nov 2015 11:03:19 +0000"  >&lt;p&gt;Attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12770300/12770300_VotingHandlerTest.testConcurrentVotesTwoNodes.failure1918.txt&quot; title=&quot;VotingHandlerTest.testConcurrentVotesTwoNodes.failure1918.txt attached to SLING-5244&quot;&gt;VotingHandlerTest.testConcurrentVotesTwoNodes.failure1918.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14987304" author="egli" created="Tue, 3 Nov 2015 13:54:33 +0000"  >&lt;p&gt;Attached full &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12770324/12770324_VotingHandlerTest.testConcurrentVotesTwoNodes.failure1918.full.txt.gz&quot; title=&quot;VotingHandlerTest.testConcurrentVotesTwoNodes.failure1918.full.txt.gz attached to SLING-5244&quot;&gt;VotingHandlerTest.testConcurrentVotesTwoNodes.failure1918.full.txt.gz&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14987364" author="egli" created="Tue, 3 Nov 2015 14:33:43 +0000"  >&lt;p&gt;Attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12770330/12770330_loop-i-3.txt&quot; title=&quot;loop-i-3.txt attached to SLING-5244&quot;&gt;loop-i-3.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; which is an extraction of the full.txt just showing the loop with &lt;tt&gt;i=3&lt;/tt&gt;. The findings:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;unlike &lt;b&gt;all&lt;/b&gt; other votings, this one concludes in just one &apos;j-loop&apos; - that is, it requires just once doing &lt;tt&gt;analyzeVotings&lt;/tt&gt; by both instances&lt;/li&gt;
	&lt;li&gt;this is possible when the slingId1 created voting1, slingId2 creates voting2, then slingId2 votes first, votes yes for voting1 cos that&apos;s the lower order (alphabetic order), then slingId1 comes to analyze and sees that its voting already won. Actually not really an unrealistic scenario, but seems it happens rarely and usually 2 rounds of analyzeVotings are necessary (probably cos they don&apos;t &lt;b&gt;see&lt;/b&gt; the peers vote yet cos they are really voting concurrently)&lt;/li&gt;
	&lt;li&gt;when there&apos;s only 1 &apos;j-loop&apos;, then there&apos;s only 1 no-vote - which is exactly the missing one in the end&lt;/li&gt;
	&lt;li&gt;the &apos;i-loop&apos; checks for at least getting one no-vote less than number of votees, and that assumption should always hold - however we cannot make any assertions in the end anymore easily&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14987378" author="egli" created="Tue, 3 Nov 2015 14:38:53 +0000"  >&lt;p&gt;fixed the test in rev 1712302:&lt;br/&gt;
when the concurrent voting results in one votingHandler to finish analyzeVotings before the other starts, there is no NO vote by the initiator of the voting - so the failing assertion was indeed wrong&lt;/p&gt;</comment>
                            <comment id="14989335" author="egli" created="Wed, 4 Nov 2015 11:00:00 +0000"  >&lt;p&gt;Reopening, VotingHandlerTest still failing on jenkins, eg:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1931/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1931/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2647/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2647/testReport/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2650/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2650/testReport/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The pattern for all being as in the following example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;03.11.2015 21:36:25.900 *INFO * [pool-5-thread-2] VotingHandlerTest: asyncVote[k=1] analyzeVotings...
03.11.2015 21:36:25.905 *INFO * [pool-5-thread-1] VotingHandlerTest: asyncVote[k=0] done, asserting results...
03.11.2015 21:36:25.905 *INFO * [pool-5-thread-1] VotingHandlerTest: asyncVote[k=0] marking done.
03.11.2015 21:38:25.903 *INFO * [main] DefaultThreadPool: Shutting down thread pool [testing] ...
03.11.2015 21:38:25.904 *INFO * [main] DefaultThreadPool: &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; pool [testing] is shut down.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
	&lt;li&gt;one thread wants to do an &lt;tt&gt;analyzeVotings&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;but the log output just finishes there and doesn&apos;t show any progress&lt;/li&gt;
	&lt;li&gt;likely the thread ran into some exception - but that&apos;s not showing in the log file - or it is blocked in synchronized ..&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;only the following failure had a different pattern:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2648/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2648/testReport/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14989543" author="egli" created="Wed, 4 Nov 2015 13:44:34 +0000"  >&lt;p&gt;Added more log output in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1712530&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1712530&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Waiting for test to fail again on jenkins...&lt;/p&gt;</comment>
                            <comment id="14990022" author="egli" created="Wed, 4 Nov 2015 17:46:20 +0000"  >&lt;p&gt;The additional log output unveiled the following exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;04.11.2015 15:49:25.938 *INFO * [pool-1-thread-56] VotingHandlerTest: asyncVote[k=3] RuntimeException: java.lang.RuntimeException: RepositoryException: javax.jcr.ItemNotFoundException: failed to build path of ea40b225-e718-4d72-9ad7-a6b1e34e4203: e500379a-fa4d-45d9-ba91-eb972dfde417 has no child entry &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ea40b225-e718-4d72-9ad7-a6b1e34e4203
java.lang.RuntimeException: RepositoryException: javax.jcr.ItemNotFoundException: failed to build path of ea40b225-e718-4d72-9ad7-a6b1e34e4203: e500379a-fa4d-45d9-ba91-eb972dfde417 has no child entry &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ea40b225-e718-4d72-9ad7-a6b1e34e4203
	at org.apache.sling.discovery.base.its.setup.mock.MockedResourceResolver$1.next(MockedResourceResolver.java:187)
	at org.apache.sling.discovery.base.its.setup.mock.MockedResourceResolver$1.next(MockedResourceResolver.java:175)
	at org.apache.sling.discovery.impl.cluster.voting.VotingHelper.getWinningVoting(VotingHelper.java:174)
	at org.apache.sling.discovery.impl.cluster.voting.VotingHandler.analyzeVotings(VotingHandler.java:238)
	at org.apache.sling.discovery.impl.cluster.voting.VotingHandlerTest$1.run(VotingHandlerTest.java:300)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: javax.jcr.ItemNotFoundException: failed to build path of ea40b225-e718-4d72-9ad7-a6b1e34e4203: e500379a-fa4d-45d9-ba91-eb972dfde417 has no child entry &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ea40b225-e718-4d72-9ad7-a6b1e34e4203
	at org.apache.jackrabbit.core.HierarchyManagerImpl.buildPath(HierarchyManagerImpl.java:291)
	at org.apache.jackrabbit.core.CachingHierarchyManager.buildPath(CachingHierarchyManager.java:199)
	at org.apache.jackrabbit.core.HierarchyManagerImpl.getPath(HierarchyManagerImpl.java:395)
	at org.apache.jackrabbit.core.CachingHierarchyManager.getPath(CachingHierarchyManager.java:233)
	at org.apache.jackrabbit.core.ItemImpl.getPrimaryPath(ItemImpl.java:188)
	at org.apache.jackrabbit.core.NodeImpl.getPrimaryPath(NodeImpl.java:2745)
	at org.apache.jackrabbit.core.ItemImpl$2.perform(ItemImpl.java:379)
	at org.apache.jackrabbit.core.ItemImpl$2.perform(ItemImpl.java:376)
	at org.apache.jackrabbit.core.session.SessionState.perform(SessionState.java:200)
	at org.apache.jackrabbit.core.ItemImpl.perform(ItemImpl.java:91)
	at org.apache.jackrabbit.core.ItemImpl.getPath(ItemImpl.java:376)
	at org.apache.sling.discovery.base.its.setup.mock.MockedResourceResolver$1.next(MockedResourceResolver.java:185)
	... 7 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14990030" author="egli" created="Wed, 4 Nov 2015 17:51:39 +0000"  >&lt;p&gt;added a retry-loop to catch the mentioned exception and retry (5x max - just in the test) in rev 1712599&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12770324" name="VotingHandlerTest.testConcurrentVotesTwoNodes.failure1918.full.txt.gz" size="446805" author="stefanegli" created="Tue, 3 Nov 2015 13:54:33 +0000"/>
                            <attachment id="12770300" name="VotingHandlerTest.testConcurrentVotesTwoNodes.failure1918.txt" size="100033" author="stefanegli" created="Tue, 3 Nov 2015 11:03:19 +0000"/>
                            <attachment id="12770330" name="loop-i-3.txt" size="13734" author="stefanegli" created="Tue, 3 Nov 2015 14:33:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ntxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5243] discovery.impl.cluster.SingleInstanceTest.testBootstrap failed on jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-5243</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the following test failed: &lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1918/testReport/junit/org.apache.sling.discovery.impl.cluster/SingleInstanceTest/testBootstrap/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1918/testReport/junit/org.apache.sling.discovery.impl.cluster/SingleInstanceTest/testBootstrap/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error Message

expected:&amp;lt;1&amp;gt; but was:&amp;lt;0&amp;gt;

Stacktrace

java.lang.AssertionError: expected:&amp;lt;1&amp;gt; but was:&amp;lt;0&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:555)
	at org.junit.Assert.assertEquals(Assert.java:542)
	at org.apache.sling.discovery.base.its.AbstractSingleInstanceTest.testBootstrap(AbstractSingleInstanceTest.java:284)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:483)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12909712">SLING-5243</key>
            <summary>discovery.impl.cluster.SingleInstanceTest.testBootstrap failed on jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Nov 2015 16:43:36 +0000</created>
                <updated>Mon, 16 Nov 2015 15:00:13 +0000</updated>
                            <resolved>Tue, 3 Nov 2015 13:16:01 +0000</resolved>
                                    <version>Discovery Impl 1.1.8</version>
                                    <fixVersion>Discovery Impl 1.2.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14985509" author="egli" created="Mon, 2 Nov 2015 16:44:26 +0000"  >&lt;p&gt;Attached &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12770114/12770114_SingleInstanceTest.testBootstrap.failure1918.txt&quot; title=&quot;SingleInstanceTest.testBootstrap.failure1918.txt attached to SLING-5243&quot;&gt;SingleInstanceTest.testBootstrap.failure1918.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14987205" author="egli" created="Tue, 3 Nov 2015 12:47:10 +0000"  >&lt;p&gt;Attaching non-truncated full &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12770317/12770317_SingleInstanceTest.testBootstrap.failure1918.full.txt&quot; title=&quot;SingleInstanceTest.testBootstrap.failure1918.full.txt attached to SLING-5243&quot;&gt;SingleInstanceTest.testBootstrap.failure1918.full.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14987220" author="egli" created="Tue, 3 Nov 2015 12:57:27 +0000"  >&lt;p&gt;the problem in this case is that during an &lt;tt&gt;analyzeVotings&lt;/tt&gt; the test is reading an &lt;tt&gt;/ongoingVotings&lt;/tt&gt; resource in a non-consistent (transactionally impossible) state: it looks like during creation of a new vote, the voting handler is already seeing the changes - but only partially. That results in &lt;tt&gt;voting.matchesLiveView&lt;/tt&gt; to return false even though the voting hasn&apos;t been fully created yet - which is then interpreted as: ok, I have to vote no. That is wrong at that point, cos you shouldn&apos;t vote on a voting-in-creation. However, that is never possible in real-life, it must be due to the way the testing is setup.&lt;br/&gt;
The relevant part in the log file:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;02.11.2015 15:25:00.689 *DEBUG* [main] HeartbeatHandler: doCheckViewWith: no pending nor winning votes. But: view does not match established or no established yet. Initiating a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; voting
02.11.2015 15:25:00.689 *DEBUG* [main] HeartbeatHandler: doCheckViewWith: one of the live instances is: 3e5791c1-31c7-4831-af73-843e5e15e478
02.11.2015 15:25:00.689 *INFO * [main] MockedResourceResolver: create: creating of ongoingVotings under MockedResource, type=nt:unstructured, path=/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/discovery/impl was successful=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
02.11.2015 15:25:00.696 *INFO * [main] MockedResourceResolver: create: creating of d7ac3d95-6dda-448c-8759-888284717588 under MockedResource, type=nt:unstructured, path=/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/discovery/impl/ongoin
gVotings was successful=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
[...]
02.11.2015 15:25:00.705 *DEBUG* [VotingEventListener-standaloneInstance] VotingHelper: listVotings: votings found: 1
02.11.2015 15:25:00.705 *DEBUG* [VotingEventListener-standaloneInstance] VotingView: getVotingStartTime: got a voting without votingStart. Likely in creation: MockedResource, type=nt:unstructured
, path=/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/discovery/impl/ongoingVotings/d7ac3d95-6dda-448c-8759-888284717588
02.11.2015 15:25:00.705 *INFO * [VotingEventListener-standaloneInstance] 3e5791c1-31c7-4831-af73-843e5e15e478: analyzeVotings: vote doesnt match my live view, voting no. comparison result: no mem
bers resource found, vote: a VotingView[viewId=d7ac3d95-6dda-448c-8759-888284717588, id=d7ac3d95-6dda-448c-8759-888284717588, initiator=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, members=]
[...]
02.11.2015 15:25:00.706 *INFO * [main] MockedResourceResolver: create: creating of 3e5791c1-31c7-4831-af73-843e5e15e478 under MockedResource, type=nt:unstructured, path=/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/discovery/impl/ongoingVotings/d7ac3d95-6dda-448c-8759-888284717588/members was successful=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
[...]
02.11.2015 15:25:00.713 *WARN * [main] ItemStateReferenceCache: overwriting cached entry 6eab5bf1-34f9-4081-b03a-2ba0fc6ffc37/{}clusterIdDefinedAt
[...]
02.11.2015 15:25:00.715 *INFO * [main] VotingView: newVoting: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; voting started: newViewId=d7ac3d95-6dda-448c-8759-888284717588, resource=MockedResource, type=nt:unstructured, path=/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/discovery/impl/ongoingVotings/d7ac3d95-6dda-448c-8759-888284717588, #members: 1, members: [3e5791c1-31c7-4831-af73-843e5e15e478]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14987231" author="egli" created="Tue, 3 Nov 2015 13:06:18 +0000"  >&lt;p&gt;The fix consists of two parts:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;View.matches&lt;/tt&gt; and &lt;tt&gt;View.matchesLiveView&lt;/tt&gt; should throw an Exception when what they read is not consistent - instead of swallowing that and returning false&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;analyzeVotings&lt;/tt&gt; should first do &lt;tt&gt;isOngoingVoting&lt;/tt&gt; before comparing the live view - as that would also have avoided the false-no-vote this time and is anyway the more resilient way&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14987234" author="egli" created="Tue, 3 Nov 2015 13:09:55 +0000"  >&lt;p&gt;Even though the test uses jackrabbit-core 2.2.9 (via sling.commons.testing 2.0.16) it looks like the WARN described in &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2813&quot; title=&quot;&amp;quot;overwriting cached entry&amp;quot; warnings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCR-2813&quot;&gt;&lt;del&gt;JCR-2813&lt;/del&gt;&lt;/a&gt; is re-occurring in this test.&lt;/p&gt;</comment>
                            <comment id="14987245" author="egli" created="Tue, 3 Nov 2015 13:16:01 +0000"  >&lt;p&gt;fixed in rev 1712291&lt;/p&gt;</comment>
                            <comment id="14989839" author="egli" created="Wed, 4 Nov 2015 16:30:12 +0000"  >&lt;p&gt;added another fix ontop of the one from yesterday in rev 1712584 :&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;adding a retry-loop for the newly-introduced exception handling around establishedView.matches. Reason for this: looks like during testing you can run into a race-condition where the establishedView is just being created and only half visible - in that case this matches() throws an Exceptio&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14990425" author="egli" created="Wed, 4 Nov 2015 21:08:54 +0000"  >&lt;p&gt;Reverting the previous commit (rev 1712584) - plus the one from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5195&quot; title=&quot;HeartbeatHandler should check for topology changes independently of long-during session.saves&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5195&quot;&gt;&lt;del&gt;SLING-5195&lt;/del&gt;&lt;/a&gt; which actually introduced a regression. &lt;/p&gt;

&lt;p&gt;Done in rev 1712651&lt;/p&gt;

&lt;p&gt;The rather subtle race-condition happening:&lt;/p&gt;

&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5195&quot; title=&quot;HeartbeatHandler should check for topology changes independently of long-during session.saves&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5195&quot;&gt;&lt;del&gt;SLING-5195&lt;/del&gt;&lt;/a&gt; the establishedView is retrieved earlier in doCheckView than previously. Namely, it is retrieved &lt;b&gt;before&lt;/b&gt; the check for any ongoing or pending votings is done. This has the effect that you could read an establishedView (a), then a separate thread/instance simultaneously finishes a voting it started and promotes a new establishedView (b), while then the original doCheckView continues and sees: ah, no ongoing votings, fine, so it continues to see if the establishedView (which is (a) for that thread) matches the live one. At that point it cannot find (a) anymore an the &lt;tt&gt;matches()&lt;/tt&gt; method throws an Exception (used to return false, but that&apos;s the same) - and as a result a new voting will be started.&lt;/p&gt;

&lt;p&gt;Now that&apos;s all not dramatic cos a new voting should result in the same outcome - all that would happen is an &apos;unnecessary&apos; TOPOLOGY_CHANGING quickly followed by TOPOLOGY_CHANGED. But that&apos;s nevertheless a bug and requires fixing.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12909723">SLING-5245</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12909724">SLING-5246</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12907902">SLING-5195</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12480229">JCR-2813</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12770317" name="SingleInstanceTest.testBootstrap.failure1918.full.txt" size="200783" author="stefanegli" created="Tue, 3 Nov 2015 12:47:10 +0000"/>
                            <attachment id="12770114" name="SingleInstanceTest.testBootstrap.failure1918.txt" size="100032" author="stefanegli" created="Mon, 2 Nov 2015 16:44:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ntxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5241] discovery.impl.SingleInstanceTest.testTopologyEventListeners failed on jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-5241</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;discovery.impl.SingleInstanceTest.testTopologyEventListeners failed on jenkins:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1915/testReport/junit/org.apache.sling.discovery.impl.cluster/SingleInstanceTest/testTopologyEventListeners/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1915/testReport/junit/org.apache.sling.discovery.impl.cluster/SingleInstanceTest/testTopologyEventListeners/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error Message

expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;

Stacktrace

java.lang.AssertionError: expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:555)
	at org.junit.Assert.assertEquals(Assert.java:542)
	at org.apache.sling.discovery.base.its.AbstractSingleInstanceTest.testTopologyEventListeners(AbstractSingleInstanceTest.java:206)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:483)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12909687">SLING-5241</key>
            <summary>discovery.impl.SingleInstanceTest.testTopologyEventListeners failed on jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Nov 2015 14:46:00 +0000</created>
                <updated>Thu, 12 Nov 2015 11:20:38 +0000</updated>
                            <resolved>Mon, 2 Nov 2015 14:49:44 +0000</resolved>
                                    <version>Discovery Impl 1.1.8</version>
                                    <fixVersion>Discovery Impl 1.2.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14985323" author="egli" created="Mon, 2 Nov 2015 14:49:44 +0000"  >&lt;p&gt;increasing wait time for receiving an event from 0.5s to 1.0s&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1712022&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1712022&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ntpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5225] TestOakSyncTokenService.testTwoNodesOneLeaving failed on jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-5225</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;TestOakSyncTokenService.testTwoNodesOneLeaving failed on jenkins:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.commons/1914/testReport/junit/org.apache.sling.discovery.commons.providers.spi.base/TestOakSyncTokenService/testTwoNodesOneLeaving/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.commons/1914/testReport/junit/org.apache.sling.discovery.commons.providers.spi.base/TestOakSyncTokenService/testTwoNodesOneLeaving/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Stacktrace

java.lang.AssertionError: 
	at org.junit.Assert.fail(Assert.java:74)
	at org.junit.Assert.assertTrue(Assert.java:37)
	at org.junit.Assert.assertTrue(Assert.java:46)
	at org.apache.sling.discovery.commons.providers.spi.base.TestOakSyncTokenService.testTwoNodesOneLeaving(TestOakSyncTokenService.java:178)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12909600">SLING-5225</key>
            <summary>TestOakSyncTokenService.testTwoNodesOneLeaving failed on jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Nov 2015 09:09:23 +0000</created>
                <updated>Thu, 12 Nov 2015 11:22:09 +0000</updated>
                            <resolved>Mon, 2 Nov 2015 09:11:37 +0000</resolved>
                                    <version>Discovery Commons 1.0.0</version>
                                    <fixVersion>Discovery Commons 1.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14984920" author="egli" created="Mon, 2 Nov 2015 09:11:37 +0000"  >&lt;p&gt;Increased wait times in rev 1711917&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nt6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5224] discovery.impl.SingleInstanceTest.testPropertyProviders failed on jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-5224</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;On jenkins discovery.impl&apos;s SingleInstanceTest.testPropertyProviders failed: &lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1907/testReport/junit/org.apache.sling.discovery.impl.cluster/SingleInstanceTest/testPropertyProviders/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1907/testReport/junit/org.apache.sling.discovery.impl.cluster/SingleInstanceTest/testPropertyProviders/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error Message

no established view at the moment

Stacktrace

org.apache.sling.discovery.base.commons.UndefinedClusterViewException: no established view at the moment
	at org.apache.sling.discovery.impl.cluster.ClusterViewServiceImpl.getLocalClusterView(ClusterViewServiceImpl.java:102)
	at org.apache.sling.discovery.base.its.AbstractSingleInstanceTest.testPropertyProviders(AbstractSingleInstanceTest.java:143)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:483)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12909598">SLING-5224</key>
            <summary>discovery.impl.SingleInstanceTest.testPropertyProviders failed on jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Nov 2015 09:04:41 +0000</created>
                <updated>Thu, 12 Nov 2015 11:20:37 +0000</updated>
                            <resolved>Mon, 2 Nov 2015 09:05:46 +0000</resolved>
                                    <version>Discovery Impl 1.1.8</version>
                                    <fixVersion>Discovery Impl 1.2.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14984908" author="egli" created="Mon, 2 Nov 2015 09:05:46 +0000"  >&lt;p&gt;Increased wait time from 100ms to 1000ms in rev 1711913&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nt5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5219] Mounting a ResourceProvider makes it impossible to create child resources under it</title>
                <link>https://issues.apache.org/jira/browse/SLING-5219</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;(I am not sure where the problem is exactly, but setting it under Servlets POST for now ).&lt;/p&gt;

&lt;p&gt;Consider the following scenario:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;JCR provider mounted at &lt;tt&gt;/&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;FS provider mounted at &lt;tt&gt;/content/blog/images&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;No resources in the JCR repo for &lt;tt&gt;/content&lt;/tt&gt; or &lt;tt&gt;/content/blog&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;A POST call to create &lt;tt&gt;/content&lt;/tt&gt; or &lt;tt&gt;/content/blog&lt;/tt&gt; ( I have used &lt;a href=&quot;https://github.com/jkbrzt/httpie&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;httpie&lt;/a&gt; )  fails &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;http --auth=admin:admin -f POST http://localhost:8080 /content &apos;sling\:target=/content/blog/posts&apos;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I remove the FS provider then the call succeeds.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12908948">SLING-5219</key>
            <summary>Mounting a ResourceProvider makes it impossible to create child resources under it</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Oct 2015 16:28:01 +0000</created>
                <updated>Sun, 10 Apr 2016 12:13:51 +0000</updated>
                            <resolved>Tue, 24 Nov 2015 14:48:31 +0000</resolved>
                                    <version>Servlets Post 2.3.6</version>
                                    <fixVersion>Servlets Post 2.3.10</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14982774" author="rombert" created="Fri, 30 Oct 2015 16:12:53 +0000"  >&lt;p&gt;Still happens with the current launchpad - which includes the updated api/resource resolver implementation.&lt;/p&gt;</comment>
                            <comment id="14982798" author="rombert" created="Fri, 30 Oct 2015 16:23:46 +0000"  >&lt;p&gt;As far as I can tell this happens due to the following block of code in CombinedResourceProvider.java:170 ( as of rev 1711502 )&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-comment&quot;&gt;// query: /libs/sling/servlet/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// resource Provider: libs/sling/servlet/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/GET.servlet
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// list will match libs, sling, servlet, &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// and there will be no resource provider at the end
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// SLING-3482 : &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is only done &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getResource but not resolve
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;//              as it is important e.g. &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; servlet resolution
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;//              to get the parent resource &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; resource traversal.
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isResolve &amp;amp;&amp;amp; isIntermediatePath(path)) {
            logger.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Resolved Synthetic {}&quot;&lt;/span&gt;, path);
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SyntheticResource(resolver, path, ResourceProvider.RESOURCE_TYPE_SYNTHETIC);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14982823" author="cziegeler" created="Fri, 30 Oct 2015 16:33:09 +0000"  >&lt;p&gt;I think we need to update the post servlet to deal with this: treating a synthetic resource as a non existing resource (null), looks like AbstractCreateOperation#processCreate line 106, is the place to start&lt;/p&gt;</comment>
                            <comment id="15004106" author="mikolaj.manski@cognifide.com" created="Fri, 13 Nov 2015 15:22:12 +0000"  >&lt;p&gt;I think this issue is slightly more complicated. We cannot create new resources under existing FsResource as it&apos;s provider is not modifiable (FsResourceProvider doesn&apos;t implement ModifyingResourceProvider). Decision should be made on whether we should support creating child resources under FsResource at all, and if yes - which way is the best. As it lies under concrete file system path and handles files/directories only, should we create file/directory under FS provider?&lt;/p&gt;</comment>
                            <comment id="15004151" author="rombert" created="Fri, 13 Nov 2015 15:49:46 +0000"  >&lt;p&gt;Actually the path that can&apos;t be created is handled by the JCR provider. I tried to create a resource at /content, while the FS provider is mounted at /content/blog/images.&lt;/p&gt;</comment>
                            <comment id="15008460" author="mikolaj.manski@cognifide.com" created="Tue, 17 Nov 2015 10:42:53 +0000"  >&lt;p&gt;Fixed, PR: &lt;a href=&quot;https://github.com/apache/sling/pull/112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/112&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15022038" author="cziegeler" created="Mon, 23 Nov 2015 12:41:49 +0000"  >&lt;p&gt;Thanks for your patch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mikolaj.manski%40cognifide.com&quot; class=&quot;user-hover&quot; rel=&quot;mikolaj.manski@cognifide.com&quot;&gt;mikolaj.manski@cognifide.com&lt;/a&gt;. I&apos;ve applied a slightly modified version in rev 1715792 which uses getResource instead of resolve all over the place. Please verify if it still works for you.&lt;/p&gt;</comment>
                            <comment id="15024579" author="rombert" created="Tue, 24 Nov 2015 14:19:32 +0000"  >&lt;p&gt;For the record, this solves the problem I initially reported.&lt;/p&gt;</comment>
                            <comment id="15024618" author="cziegeler" created="Tue, 24 Nov 2015 14:48:31 +0000"  >&lt;p&gt;Thanks Robert, I think we can close this issue&lt;/p&gt;</comment>
                            <comment id="15030919" author="githubbot" created="Sun, 29 Nov 2015 12:38:36 +0000"  >&lt;p&gt;Github user mmanski closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/112&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/112&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12773829" name="SLING-5219.patch" size="11328" author="mikolaj.manski@cognifide.com" created="Mon, 23 Nov 2015 12:09:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2np5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5216] Concurrent creation of voting can lead to continuous re-voting</title>
                <link>https://issues.apache.org/jira/browse/SLING-5216</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;This is a regression of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3195&quot; title=&quot;Provide a property to uniquely identify a Cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3195&quot;&gt;&lt;del&gt;SLING-3195&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3195&quot; title=&quot;Provide a property to uniquely identify a Cluster&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3195&quot;&gt;&lt;del&gt;SLING-3195&lt;/del&gt;&lt;/a&gt; the cluster view id was redefined from being a unique per-voting/per view-incarnation id to being a stable, persisted, permanent cluster Id (see &lt;a href=&quot;https://github.com/apache/sling/blob/bac2a2bf4c3ccdf6fa13866ffe6930c20b0230d6/bundles/extensions/discovery/impl/src/main/java/org/apache/sling/discovery/impl/common/View.java#L96&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;in View.java&lt;/a&gt;). This was achieving the goal of exposing a stable view id for users of the discovery API. &lt;/p&gt;

&lt;p&gt;However, it introduced a regression in that this same &lt;tt&gt;getViewId()&lt;/tt&gt; was also used during voting when multiple votings happened simultaneously, to agree on the lowest such &apos;view incarnation id&apos;. With the change to making this viewId the stable one though, and not adjusting its usage in this multiple-votings-sorting, this sorting became broken. Basically now when multiple votings happen simultaneously, then it can be that the participating instances sort differently and don&apos;t agree on one vote. Resulting in the &lt;tt&gt;HeartbeatHandler&lt;/tt&gt; to come to the conclusion that there is no winner (as there should only be 1), and start a fresh vote. Resulting in repeated new votings being created.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12908890">SLING-5216</key>
            <summary>Concurrent creation of voting can lead to continuous re-voting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Oct 2015 13:30:35 +0000</created>
                <updated>Thu, 12 Nov 2015 11:20:37 +0000</updated>
                            <resolved>Mon, 2 Nov 2015 14:49:11 +0000</resolved>
                                    <version>Discovery Impl 1.0.2</version>
                                    <fixVersion>Discovery Impl 1.2.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14980462" author="egli" created="Thu, 29 Oct 2015 14:01:56 +0000"  >&lt;p&gt;As part of this fix, avoid the current practice of treating the &lt;tt&gt;initiator&lt;/tt&gt; of a voting as automatically voting &apos;yes&apos;. That makes it impossible for the initiator to withdraw the vote if it finds more than one vote and its own is the loosing/higher one.&lt;/p&gt;</comment>
                            <comment id="14980482" author="egli" created="Thu, 29 Oct 2015 14:12:22 +0000"  >&lt;p&gt;main changes done in rev 1711262 and 1711265&lt;/p&gt;</comment>
                            <comment id="14981079" author="egli" created="Thu, 29 Oct 2015 19:11:20 +0000"  >&lt;p&gt;more testing added in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1711331&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1711331&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14985314" author="egli" created="Mon, 2 Nov 2015 14:48:22 +0000"  >&lt;p&gt;added another specific test case for concurrent voting in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1712016&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1712016&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14985321" author="egli" created="Mon, 2 Nov 2015 14:49:11 +0000"  >&lt;p&gt;considering done as more testing didn&apos;t unveil a bug at this stage.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12907902">SLING-5195</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nosn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5215] getTopology returns wrong topology when not current</title>
                <link>https://issues.apache.org/jira/browse/SLING-5215</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With the change to discovery.base, the BaseDiscoveryService is now in charge of providing a topology even in the case the view is undefined (not current). In that case it returns the &lt;tt&gt;oldView&lt;/tt&gt;. That &lt;tt&gt;oldView&lt;/tt&gt; however is only set at activation time and never updated later. While &lt;tt&gt;TopologyEventListeners&lt;/tt&gt; are not affected, those who directly call &lt;tt&gt;getTopology&lt;/tt&gt; will in such a moment get a &lt;tt&gt;TopologyView&lt;/tt&gt; which is correctly marked as &apos;not current&apos; - in which case they should anyway not make any assumptions nor use the view - but the view that is returned is actually a very old one - namely from activation including only itself.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12908880">SLING-5215</key>
            <summary>getTopology returns wrong topology when not current</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Oct 2015 12:43:58 +0000</created>
                <updated>Thu, 12 Nov 2015 11:20:37 +0000</updated>
                            <resolved>Thu, 29 Oct 2015 14:44:40 +0000</resolved>
                                    <version>Discovery Oak 1.0.0</version>
                                    <fixVersion>Discovery Impl 1.2.0</fixVersion>
                    <fixVersion>Discovery Oak 1.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14980362" author="egli" created="Thu, 29 Oct 2015 12:46:43 +0000"  >&lt;p&gt;discovery.oak fix incl test-case done in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1711239&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1711239&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
discovery.impl fix done in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1711240&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1711240&amp;amp;view=rev&lt;/a&gt;, test added in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1711285&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1711285&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2noqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5209] Have all package data under /var/sling/distribution/packages</title>
                <link>https://issues.apache.org/jira/browse/SLING-5209</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently package data is scattered across the repo and that makes it hard to view it and manage it.&lt;/p&gt;

&lt;p&gt;We should have the following package data hierarchy:&lt;/p&gt;

&lt;p&gt;/var/sling/distribution/packages/&lt;/p&gt;
{builderName}/shared - for the shared packages references&lt;br/&gt;
/var/sling/distribution/packages/{builderName}
&lt;p&gt;/data - for the actual binary packages&lt;/p&gt;</description>
                <environment></environment>
        <key id="12908597">SLING-5209</key>
            <summary>Have all package data under /var/sling/distribution/packages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Oct 2015 15:16:39 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:37 +0000</updated>
                            <resolved>Wed, 11 Nov 2015 12:46:50 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.1.10</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nmzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5207] ResourceResolver.isResourceType leads to endless loop when resourceSuperType hierarchy is cyclic</title>
                <link>https://issues.apache.org/jira/browse/SLING-5207</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;although illegal it is technically possible to create two resources which superResourceType hierarchy creates cycles pointing to each other directly or indirectly.&lt;/p&gt;

&lt;p&gt;with the current implementation of ResourceResolver.isResourceType this leads to an endless loop. the implementation should detect such and error and throw an exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12908482">SLING-5207</key>
            <summary>ResourceResolver.isResourceType leads to endless loop when resourceSuperType hierarchy is cyclic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Oct 2015 08:05:27 +0000</created>
                <updated>Mon, 8 Feb 2016 22:12:13 +0000</updated>
                            <resolved>Wed, 28 Oct 2015 13:32:09 +0000</resolved>
                                    <version>Resource Resolver 1.2.4</version>
                                    <fixVersion>Resource Resolver 1.4.0</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14978418" author="sseifert@pro-vision.de" created="Wed, 28 Oct 2015 13:32:09 +0000"  >&lt;p&gt;Completed: At revision: 1711007  &lt;/p&gt;

&lt;p&gt;a SlingException runtime exception is thrown when such a cyclic resource super type hierarchy is detected&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nm9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5197] sling-mock: Do not override ResourceResolverFactoryActivator&apos;s default values</title>
                <link>https://issues.apache.org/jira/browse/SLING-5197</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;currently ResourceResolverFactoryInitializer overrides some default values of ResourceResolverFactoryActivator. it overrides them with the same values as the (current) default values - this should be removed and is no longer needed since &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5088&quot; title=&quot;sling-mock: Threads created by resource resolver/JCR are not terminated properly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5088&quot;&gt;&lt;del&gt;SLING-5088&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12907953">SLING-5197</key>
            <summary>sling-mock: Do not override ResourceResolverFactoryActivator&apos;s default values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Mon, 26 Oct 2015 16:00:26 +0000</created>
                <updated>Mon, 8 Feb 2016 22:59:57 +0000</updated>
                            <resolved>Mon, 26 Oct 2015 16:02:03 +0000</resolved>
                                    <version>Testing Sling Mock 1.6.0</version>
                                    <fixVersion>Testing Sling Mock 1.6.2</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14974456" author="sseifert@pro-vision.de" created="Mon, 26 Oct 2015 16:02:03 +0000"  >&lt;p&gt;Completed: At revision: 1710640  &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12902155">SLING-5088</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 week, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nj2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5196] missing dependency when using maven-bundle-plugin 3.0.0 in discovery.base and discovery.impl</title>
                <link>https://issues.apache.org/jira/browse/SLING-5196</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using the default maven-bundle-plugin version inherited from parent (25 atm), which is 3.0.0, then the following dependencies cannot be resolved in AEM 5.6.1:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;javax.servlet,version=[2.6,3) -- Cannot be resolved
javax.servlet.http,version=[2.6,3) -- Cannot be resolved
org.apache.commons.codec.binary,version=[1.6,2) -- Cannot be resolved
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;thus switching back to 2.5.3 for discovery.base to remain backwards-compatibility&lt;/p&gt;</description>
                <environment></environment>
        <key id="12907910">SLING-5196</key>
            <summary>missing dependency when using maven-bundle-plugin 3.0.0 in discovery.base and discovery.impl</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Oct 2015 13:38:40 +0000</created>
                <updated>Mon, 2 Nov 2015 16:49:36 +0000</updated>
                            <resolved>Mon, 26 Oct 2015 15:32:53 +0000</resolved>
                                                    <fixVersion>Discovery Impl 1.2.0</fixVersion>
                    <fixVersion>Discovery Base 1.0.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14974209" author="cziegeler" created="Mon, 26 Oct 2015 13:42:30 +0000"  >&lt;p&gt;What does 2.5.3 generate?&lt;/p&gt;</comment>
                            <comment id="14974245" author="egli" created="Mon, 26 Oct 2015 14:13:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, using 3.0.0 it explicitly puts the &lt;tt&gt;[2.6,3)&lt;/tt&gt; dependency:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Import-Package: javax.crypto,javax.crypto.spec,javax.servlet;version=&quot;[2
 .6,3)&lt;span class=&quot;code-quote&quot;&gt;&quot;,javax.servlet.http;version=&quot;&lt;/span&gt;[2.6,3)&quot;,org.apache.commons.codec.bi
 nary;version=&lt;span class=&quot;code-quote&quot;&gt;&quot;[1.6,2)&quot;&lt;/span&gt; .....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;while using 2.5.3 it leaves out the version criteria:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Import-Package: javax.crypto,javax.crypto.spec,javax.servlet,javax.servl
 et.http,org.apache.commons.codec.binary
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14974309" author="jsedding" created="Mon, 26 Oct 2015 14:43:48 +0000"  >&lt;p&gt;I think this issue is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5062&quot; title=&quot;maven-bundle-plugin includes tests dependencies in package analysis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5062&quot;&gt;&lt;del&gt;FELIX-5062&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14974327" author="egli" created="Mon, 26 Oct 2015 14:53:27 +0000"  >&lt;p&gt;Can we live with using maven-bundle-plugin 2.5.3 for now, or is there an urgent need to have 3.0.0? or in other words: can this ticket be closed leaving it at 2.5.3?&lt;/p&gt;</comment>
                            <comment id="14974393" author="egli" created="Mon, 26 Oct 2015 15:32:53 +0000"  >&lt;p&gt;Marking resolved - can always be reopend on disagreement..&lt;/p&gt;</comment>
                            <comment id="14976043" author="rombert" created="Tue, 27 Oct 2015 08:55:56 +0000"  >&lt;p&gt;I think we can&apos;t use the maven-bundle-plugin 3.0.0 as is, so I filed &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5199&quot; title=&quot;Remove the maven-bundle-plugin override once version 3.0.2 is available&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5199&quot;&gt;SLING-5199&lt;/a&gt; so that we remember to remove the override when a fix is available.&lt;/p&gt;</comment>
                            <comment id="14976064" author="egli" created="Tue, 27 Oct 2015 09:19:57 +0000"  >&lt;p&gt;thx!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12902384">FELIX-5062</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 week, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nisv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5195] HeartbeatHandler should check for topology changes independently of long-during session.saves</title>
                <link>https://issues.apache.org/jira/browse/SLING-5195</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When running discovery.impl in a DocumentNodeStore cluster that is under heavy load and thus produces large delays, the HeartbeatHandler can sometimes be blocked in session.save for non-trivial amounts of time - longer than the heartbeat timeout for example. This has the effect that both the &lt;tt&gt;lastHeartbeat&lt;/tt&gt; property is no longer updated but also that the topology is not checked and updated towards the listeners. These two facts should be separated within the HeartbeatHandler though.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12907902">SLING-5195</key>
            <summary>HeartbeatHandler should check for topology changes independently of long-during session.saves</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Oct 2015 12:50:07 +0000</created>
                <updated>Thu, 12 Nov 2015 11:20:36 +0000</updated>
                            <resolved>Mon, 2 Nov 2015 14:47:29 +0000</resolved>
                                    <version>Discovery Impl 1.1.8</version>
                                    <fixVersion>Discovery Impl 1.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14980474" author="egli" created="Thu, 29 Oct 2015 14:05:41 +0000"  >&lt;p&gt;As part of this, when the HeartbeatHandler detects that its own heartbeat was last written longer than the configured heartbeat timeout ago, then it should mark the establishedView as invalid and cause a TOPOLOGY_CHANGING to be sent.&lt;/p&gt;</comment>
                            <comment id="14980476" author="egli" created="Thu, 29 Oct 2015 14:06:32 +0000"  >&lt;p&gt;main part done in rev 1711257&lt;/p&gt;</comment>
                            <comment id="14980550" author="egli" created="Thu, 29 Oct 2015 14:49:04 +0000"  >&lt;p&gt;As part of this, encountered voting problem since voting is now more exposed - handled separately in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5216&quot; title=&quot;Concurrent creation of voting can lead to continuous re-voting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5216&quot;&gt;&lt;del&gt;SLING-5216&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14981078" author="egli" created="Thu, 29 Oct 2015 19:11:13 +0000"  >&lt;p&gt;more testing added in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1711331&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1711331&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14985312" author="egli" created="Mon, 2 Nov 2015 14:47:29 +0000"  >&lt;p&gt;considering done as more testing didn&apos;t unveil a bug at this stage.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12908164">SLING-5200</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12908890">SLING-5216</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12822308">SLING-4640</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12909712">SLING-5243</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nir3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5193] Installing the Sling IDE Tooling causes &apos;Open With...&apos; to disappear</title>
                <link>https://issues.apache.org/jira/browse/SLING-5193</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After installing the Sling IDE Tooling the &apos;Open&apos; and &apos;Open With...&apos; commands are gone from the context menu which appears in the Project Explorer.&lt;/p&gt;

&lt;p&gt;The root cause is the eclipse-ui/plugin.xml which contributes&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;		   &amp;lt;actionProvider
		         class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.ide.eclipse.ui.nav.PackageExplorerOpenActionProvider&quot;&lt;/span&gt;
		         id=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.ide.eclipse.ui.nav.actions.OpenActions&quot;&lt;/span&gt;
		         overrides=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.eclipse.jdt.ui.navigator.actions.OpenActions&quot;&lt;/span&gt;&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12907431">SLING-5193</key>
            <summary>Installing the Sling IDE Tooling causes &apos;Open With...&apos; to disappear</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Oct 2015 15:05:18 +0000</created>
                <updated>Wed, 20 Sep 2017 13:12:16 +0000</updated>
                            <resolved>Fri, 23 Oct 2015 15:30:15 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.0.0</version>
                                    <fixVersion>Sling Eclipse IDE 1.0.10</fixVersion>
                    <fixVersion>Sling Eclipse IDE 1.1.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14971162" author="rombert" created="Fri, 23 Oct 2015 15:30:09 +0000"  >&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://svn.apache.org/r1710237&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1710237&lt;/a&gt; - restricted the actionProvider to JcrNode only&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://svn.apache.org/r1710238&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1710238&lt;/a&gt; - cleanups in plugin.xml markup&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14989430" author="kwin" created="Wed, 4 Nov 2015 12:03:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; For me this is a pretty severe issue. Do you think you could create a version 1.0.10 with only that bugfix?&lt;/p&gt;</comment>
                            <comment id="14989454" author="rombert" created="Wed, 4 Nov 2015 12:16:57 +0000"  >&lt;p&gt;We probably should :| but since we already have some major stuff in trunk ( Java 7, Sightly ) I need to create a maintenance branch for it which I pretty much wanted to avoid.&lt;/p&gt;</comment>
                            <comment id="14989455" author="kwin" created="Wed, 4 Nov 2015 12:18:52 +0000"  >&lt;p&gt;I would be willing to create a branch from tag 1.0.8 and commit this fix to the branch. Would you afterwards do the release?&lt;/p&gt;</comment>
                            <comment id="14989477" author="rombert" created="Wed, 4 Nov 2015 12:35:10 +0000"  >&lt;p&gt;Sure, and please do a little smoke test &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Note that the &apos;affects version&apos; is incorrect - it&apos;s been there since the first public release.&lt;/p&gt;</comment>
                            <comment id="14991281" author="kwin" created="Thu, 5 Nov 2015 07:49:46 +0000"  >&lt;p&gt;I created a branch in &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/branches/sling-ide-tooling-1.0.9-SNAPSHOT&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/branches/sling-ide-tooling-1.0.9-SNAPSHOT&lt;/a&gt; (from the 1.0.8 tag) and backported this fix in r1712719.&lt;br/&gt;
I would recommend to modify the version to 1.1.0-SNAPSHOT in the trunk (to differ from the 1.0.9-SNAPSHOT in the branch) and create a 1.0.10 release out of the branch.&lt;br/&gt;
I did some smoke testing and it looks fine now.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Could you check and then trigger the release process or do you think there is another important bugfix we should include in 1.0.10?&lt;/p&gt;</comment>
                            <comment id="14991576" author="rombert" created="Thu, 5 Nov 2015 11:56:58 +0000"  >&lt;p&gt;I renamed the branch to sling-ide-tooling-1.0.x ( as suggested on dev@sling ).  I have also changed the version in trunk, as you have suggested. To stay in line with the odd/even release pattern I have set the version to 1.0.99.&lt;/p&gt;

&lt;p&gt;I will start a release vote later today.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12768310" name="sling-ide-tooling-missing-open-with.png" size="59503" author="rombert" created="Fri, 23 Oct 2015 15:06:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nfuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5185] Version comparision is wrong in case of qualifiers</title>
                <link>https://issues.apache.org/jira/browse/SLING-5185</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a version contains a qualifier the comparison is not correct. This is how it should be:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;qualifier SNAPSHOT has special handling, it&apos;s always lower than other qualifiers and even lower than the version without the qualifier.&lt;/li&gt;
	&lt;li&gt;version with qualifier is higher than version without qualifier&lt;/li&gt;
	&lt;li&gt;qualifiers are compared lexically&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12907056">SLING-5185</key>
            <summary>Version comparision is wrong in case of qualifiers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Oct 2015 11:55:59 +0000</created>
                <updated>Mon, 28 Dec 2015 13:04:56 +0000</updated>
                            <resolved>Thu, 22 Oct 2015 12:06:54 +0000</resolved>
                                    <version>Sling Provisioning Model 1.4.0</version>
                                    <fixVersion>Sling Provisioning Model 1.4.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14969012" author="cziegeler" created="Thu, 22 Oct 2015 12:06:54 +0000"  >&lt;p&gt;Fixed in rev 1709998&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ndjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5182] Update to Apache Felix Framework 5.4.0</title>
                <link>https://issues.apache.org/jira/browse/SLING-5182</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12906971">SLING-5182</key>
            <summary>Update to Apache Felix Framework 5.4.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Oct 2015 05:41:47 +0000</created>
                <updated>Mon, 26 Oct 2015 09:38:07 +0000</updated>
                            <resolved>Thu, 22 Oct 2015 12:07:38 +0000</resolved>
                                                    <fixVersion>Launchpad Base 2.6.6</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14969016" author="cziegeler" created="Thu, 22 Oct 2015 12:07:38 +0000"  >&lt;p&gt;Done in rev 1710000&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nd13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5177] Launchpad plugin breaks after release of Sling 8</title>
                <link>https://issues.apache.org/jira/browse/SLING-5177</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The plugin unconditionally references launchpad partifacts at the &apos;RELEASE&apos; version. Since starting with version 8 the artifact types have changed, this breaks builds for for the Maven-Launchpad plugin.&lt;/p&gt;

&lt;p&gt;Reported on &lt;a href=&quot;http://markmail.org/message/vj64s5ia4eicxdw4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dev@sling: Fwd: Sling 8 release breaks Stanbol Builds (was Build failed in Jenkins: stanbol-0.12 #92)&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12906504">SLING-5177</key>
            <summary>Launchpad plugin breaks after release of Sling 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Oct 2015 11:31:10 +0000</created>
                <updated>Mon, 26 Oct 2015 09:45:50 +0000</updated>
                            <resolved>Wed, 21 Oct 2015 11:38:53 +0000</resolved>
                                    <version>Maven Launchpad Plugin 2.3.2</version>
                                    <fixVersion>Maven Launchpad Plugin 2.3.4</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14966676" author="rombert" created="Wed, 21 Oct 2015 11:38:58 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1709800&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1709800&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2na6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5176] Outdated instructions for samples/accessmanager-ui</title>
                <link>https://issues.apache.org/jira/browse/SLING-5176</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The README file references &lt;a href=&quot;http://localhost:8080/slingshot/albums.acl.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/slingshot/albums.acl.html&lt;/a&gt; , but that path is no longer available in the current slingshot sample.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12906502">SLING-5176</key>
            <summary>Outdated instructions for samples/accessmanager-ui</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Oct 2015 11:21:03 +0000</created>
                <updated>Wed, 21 Oct 2015 11:21:03 +0000</updated>
                                                                            <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2na5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5175] The current set up of the ImporterTopLevel in the RhinoJavaScriptEngine incurs performance penalties</title>
                <link>https://issues.apache.org/jira/browse/SLING-5175</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5022&quot; title=&quot;ImporterTopLevel is not set up correctly for the RhinoJavaScriptEngine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5022&quot;&gt;&lt;del&gt;SLING-5022&lt;/del&gt;&lt;/a&gt;, although allowed the &lt;tt&gt;importClass&lt;/tt&gt; and &lt;tt&gt;importPackage&lt;/tt&gt; Rhino functions to be used in JavaScript scripts, incurred performance penalties for script execution.&lt;/p&gt;

&lt;p&gt;The importer top level should actually be set for the &lt;tt&gt;rootScope&lt;/tt&gt; provided by the &lt;tt&gt;RhinoJavaScriptEngineFactory&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12906482">SLING-5175</key>
            <summary>The current set up of the ImporterTopLevel in the RhinoJavaScriptEngine incurs performance penalties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Oct 2015 09:49:29 +0000</created>
                <updated>Fri, 8 Jan 2016 05:22:13 +0000</updated>
                            <resolved>Wed, 21 Oct 2015 09:52:52 +0000</resolved>
                                    <version>Scripting JavaScript 2.0.26</version>
                                    <fixVersion>Scripting JavaScript 2.0.28</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14966568" author="radu.cotescu" created="Wed, 21 Oct 2015 09:52:52 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=r1709781&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1709781&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2na1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5153] MockProperty.isMultiple returns always false</title>
                <link>https://issues.apache.org/jira/browse/SLING-5153</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;property.isMultiple() should return the same as property.getDefinition().isMultiple().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12905194">SLING-5153</key>
            <summary>MockProperty.isMultiple returns always false</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="joelrich">Joel Richard</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Oct 2015 13:26:09 +0000</created>
                <updated>Thu, 12 Nov 2015 17:29:03 +0000</updated>
                            <resolved>Fri, 16 Oct 2015 09:15:24 +0000</resolved>
                                    <version>Commons Testing 2.0.18</version>
                                    <fixVersion>Commons Testing 2.0.22</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14958912" author="githubbot" created="Thu, 15 Oct 2015 13:36:55 +0000"  >&lt;p&gt;GitHub user joelrich opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/107&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5153&quot; title=&quot;MockProperty.isMultiple returns always false&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5153&quot;&gt;&lt;del&gt;SLING-5153&lt;/del&gt;&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5152&quot; title=&quot;JsonJcrNode and JsonItemWriter should use prop.isMultiple() instead of def.isMultiple()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5152&quot;&gt;&lt;del&gt;SLING-5152&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/joelrich/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/joelrich/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5152&quot; title=&quot;JsonJcrNode and JsonItemWriter should use prop.isMultiple() instead of def.isMultiple()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5152&quot;&gt;&lt;del&gt;SLING-5152&lt;/del&gt;&lt;/a&gt;_&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5153&quot; title=&quot;MockProperty.isMultiple returns always false&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5153&quot;&gt;&lt;del&gt;SLING-5153&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/107.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/107.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #107&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d1895318720310d385454d932c37ae66aa5cea9e&lt;br/&gt;
Author: Joel Richard &amp;lt;joelrich@adobe.com&amp;gt;&lt;br/&gt;
Date:   2015-10-15T13:32:18Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5153&quot; title=&quot;MockProperty.isMultiple returns always false&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5153&quot;&gt;&lt;del&gt;SLING-5153&lt;/del&gt;&lt;/a&gt; - MockProperty.isMultiple returns always false&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Return the same for prop.getDefinition().isMultiple() and prop.isMultiple()&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;commit 3c9aaf14feca54cfa82251db893d1cb83d355856&lt;br/&gt;
Author: Joel Richard &amp;lt;joelrich@adobe.com&amp;gt;&lt;br/&gt;
Date:   2015-10-15T13:33:30Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5152&quot; title=&quot;JsonJcrNode and JsonItemWriter should use prop.isMultiple() instead of def.isMultiple()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5152&quot;&gt;&lt;del&gt;SLING-5152&lt;/del&gt;&lt;/a&gt; - JsonJcrNode and JsonItemWriter should use prop.isMultiple() instead of def.isMultiple()&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Use prop.isMultiple() which is much faster than prop.getDefinition().isMultiple() in Oak&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="14960409" author="githubbot" created="Fri, 16 Oct 2015 09:14:19 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/107&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14960412" author="rombert" created="Fri, 16 Oct 2015 09:15:24 +0000"  >&lt;p&gt;Applied in &lt;a href=&quot;https://svn.apache.org/r1708927&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1708927&lt;/a&gt;, thanks for the contribution.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12905193">SLING-5152</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2n27r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5145] DiscoveryServiceImpl imports private class from discovery-commons</title>
                <link>https://issues.apache.org/jira/browse/SLING-5145</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;src/main/java/org/apache/sling/discovery/impl/DiscoveryServiceImpl.java:&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.sling.discovery.commons.providers.impl.ViewStateManagerFactory&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This prevents the latest version of the discovery.impl from being deployed in the Launchpad, even with the discovery.commons bundle alongside it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12904895">SLING-5145</key>
            <summary>DiscoveryServiceImpl imports private class from discovery-commons</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Oct 2015 14:49:20 +0000</created>
                <updated>Thu, 26 Sep 2019 12:38:52 +0000</updated>
                            <resolved>Mon, 26 Oct 2015 14:20:01 +0000</resolved>
                                    <version>Discovery Impl 1.1.8</version>
                                    <fixVersion>Discovery Impl 1.2.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14957035" author="rombert" created="Wed, 14 Oct 2015 14:49:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; - is this something that should be fixed?&lt;/p&gt;</comment>
                            <comment id="14957039" author="egli" created="Wed, 14 Oct 2015 14:54:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, thanks for noticing. I&apos;ll have a look. &apos;discovery.impl trunk&apos; is anyway currently under construction, so you&apos;d have to switch back to 1.1.8, that one should work fine though.&lt;/p&gt;</comment>
                            <comment id="14957046" author="rombert" created="Wed, 14 Oct 2015 14:59:33 +0000"  >&lt;p&gt;Yup, I switched back to 1.1.8. I was just looking to see which projects have changes since the last release to add them to the launchpad, as it&apos;s better IMO to have them tested as part of the launchpad before the release and not after&lt;/p&gt;</comment>
                            <comment id="14974261" author="egli" created="Mon, 26 Oct 2015 14:20:01 +0000"  >&lt;p&gt;Fixed by introducing an explicit package-info.java (rev 1709601) and renaming provider.impl to provider.base (rev 1709751) (since .impl is not really a good name for a package that is intended for use by other friendly packages)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 1 week, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2n0db:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5143] osgi-mock: MockBundleContext is not thread-safe when using iterators</title>
                <link>https://issues.apache.org/jira/browse/SLING-5143</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4845&quot; title=&quot;MockBundleContext is not thread-safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4845&quot;&gt;&lt;del&gt;SLING-4845&lt;/del&gt;&lt;/a&gt; introduced synchronized wrappers for the sets, maps and a list used internally by MockBundleContext to make it thread-safe.&lt;/p&gt;

&lt;p&gt;this does not cover all cases e.g. when iterating over the set oder map, sometimes errors like this still occur:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[Apache Sling JCR Resource Event Queue Processor for path &apos;/&apos;] WARN org.apache.sling.jcr.resource.internal.JcrResourceListener - processOsgiEventQueue: Unexpected problem processing event {event.topics=org/apache/sling/api/resource/Resource/ADDED, userid=admin, resourceAddedAttributes=[Ljava.lang.String;@68fbe319, path=/content}
java.util.ConcurrentModificationException
	at java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1207)
	at java.util.TreeMap$KeyIterator.next(TreeMap.java:1261)
	at org.apache.sling.testing.mock.osgi.MockBundleContext.getServiceReferences(MockBundleContext.java:188)
	at org.apache.sling.testing.mock.osgi.MockBundleContext.getServiceReference(MockBundleContext.java:169)
	at org.apache.sling.jcr.resource.internal.JcrResourceListener.getResourceResolver(JcrResourceListener.java:353)
	at org.apache.sling.jcr.resource.internal.JcrResourceListener.processOsgiEventQueue(JcrResourceListener.java:392)
	at org.apache.sling.jcr.resource.internal.JcrResourceListener$1.run(JcrResourceListener.java:131)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12904780">SLING-5143</key>
            <summary>osgi-mock: MockBundleContext is not thread-safe when using iterators</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Wed, 14 Oct 2015 08:08:25 +0000</created>
                <updated>Mon, 9 Nov 2015 11:22:45 +0000</updated>
                            <resolved>Wed, 14 Oct 2015 08:10:17 +0000</resolved>
                                    <version>Testing OSGi Mock 1.6.0</version>
                                    <fixVersion>Testing OSGi Mock 1.7.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14956468" author="sseifert@pro-vision.de" created="Wed, 14 Oct 2015 08:10:17 +0000"  >&lt;p&gt;Completed: At revision: 1708556  &lt;/p&gt;

&lt;p&gt;switched to ConcurrentSkipListSet, ConcurrentHashMap, ConcurrentLinkedQueue&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12841407">SLING-4845</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mznr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5138] When using i18n option in data-sly-text translation is called twice</title>
                <link>https://issues.apache.org/jira/browse/SLING-5138</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using the i18n option in the data-sly-text attribute the I18nRuntimeExtension is called twice. &lt;br/&gt;
To reproduce use following snippet in a sightly template: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;div data-sly-text=&lt;span class=&quot;code-quote&quot;&gt;&quot;${&lt;span class=&quot;code-quote&quot;&gt;&apos;test.key&apos;&lt;/span&gt; @ i18n}&quot;&lt;/span&gt;&amp;gt;test&amp;lt;/div&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Generated java source shows: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; var_textcontent4 = renderContext.call(&lt;span class=&quot;code-quote&quot;&gt;&quot;xss&quot;&lt;/span&gt;, renderContext.call(&lt;span class=&quot;code-quote&quot;&gt;&quot;i18nTranslation&quot;&lt;/span&gt;, renderContext.call(&lt;span class=&quot;code-quote&quot;&gt;&quot;i18nTranslation&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;test.key&quot;&lt;/span&gt;, obj().with(&lt;span class=&quot;code-quote&quot;&gt;&quot;i18n&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)), obj().with(&lt;span class=&quot;code-quote&quot;&gt;&quot;context&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;text&quot;&lt;/span&gt;).with(&lt;span class=&quot;code-quote&quot;&gt;&quot;i18n&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)), &lt;span class=&quot;code-quote&quot;&gt;&quot;text&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12904505">SLING-5138</key>
            <summary>When using i18n option in data-sly-text translation is called twice</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="michael.kreis">Michael Kreis</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Oct 2015 11:09:18 +0000</created>
                <updated>Sat, 5 Mar 2016 10:56:48 +0000</updated>
                            <resolved>Mon, 29 Feb 2016 09:40:13 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.2</version>
                                    <fixVersion>Scripting Sightly Engine 1.0.16</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15108453" author="michael.kreis" created="Wed, 20 Jan 2016 12:21:51 +0000"  >&lt;p&gt;Also occurs when using i18n directly in an attribute, e.g.:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;input name=&lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt; placeholder=&lt;span class=&quot;code-quote&quot;&gt;&quot;${&lt;span class=&quot;code-quote&quot;&gt;&apos;test.key&apos;&lt;/span&gt; @ i18n}&quot;&lt;/span&gt; &amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;: Is someone looking at this issues?&lt;/p&gt;</comment>
                            <comment id="15151403" author="radu.cotescu" created="Wed, 17 Feb 2016 23:23:44 +0000"  >&lt;p&gt;Can you please tell me what version of the &lt;tt&gt;org.apache.sling.scripting.sightly&lt;/tt&gt; bundle you&apos;re using and on what environment?&lt;/p&gt;</comment>
                            <comment id="15151784" author="michael.kreis" created="Thu, 18 Feb 2016 06:13:57 +0000"  >&lt;p&gt;I&apos;m using the version 1.0.2 in AEM 6.1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12945297">SLING-5568</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mxyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5137] Locale in Sightly I18N RuntimeExtension is not used correctly</title>
                <link>https://issues.apache.org/jira/browse/SLING-5137</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When using a locale option with country in an i18n sightly expression, e.g.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;${&apos;label.key&apos; @ i18n, locale=&apos;de_CH&apos;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the locale is not created correctly. See following line:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/scripting/sightly/engine/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/I18nRuntimeExtension.java#L84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/scripting/sightly/engine/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/I18nRuntimeExtension.java#L84&lt;/a&gt;&lt;br/&gt;
&lt;tt&gt;new Locale(locale)&lt;/tt&gt; only sets the language but never a country.&lt;br/&gt;
Should use something like Apache Commons &lt;tt&gt;&lt;a href=&quot;https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/LocaleUtils.html#toLocale(java.lang.String)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;LocaleUtils.toLocale()&lt;/a&gt;&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12904501">SLING-5137</key>
            <summary>Locale in Sightly I18N RuntimeExtension is not used correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="michael.kreis">Michael Kreis</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Oct 2015 11:01:01 +0000</created>
                <updated>Sat, 5 Mar 2016 10:56:47 +0000</updated>
                            <resolved>Mon, 29 Feb 2016 16:21:50 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.0</version>
                                    <fixVersion>Scripting Sightly Engine 1.0.16</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15172081" author="radu.cotescu" created="Mon, 29 Feb 2016 16:21:50 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1732914&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1732914&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15172179" author="kwin" created="Mon, 29 Feb 2016 17:21:01 +0000"  >&lt;p&gt;I just had a look at the fix and to me it would be better to explicitly throw an exception in case of invalid locales, instead of just logging the issue and silently return the untranslated key. This is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4442&quot; title=&quot;Invalid parametrisation of Sightly statements should lead to exceptions instead of errors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4442&quot;&gt;&lt;del&gt;SLING-4442&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15172601" author="radu.cotescu" created="Mon, 29 Feb 2016 20:59:16 +0000"  >&lt;p&gt;Throwing an exception in this case would be a change of behaviour which I find more problematic than for the &lt;tt&gt;data-sly-*&lt;/tt&gt; block elements. Check the previous version of the code: &lt;a href=&quot;https://github.com/apache/sling/blob/d7e96b89542bd85bbd7bd69adc33e367a8e69510/bundles/scripting/sightly/engine/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/I18nRuntimeExtension.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/d7e96b89542bd85bbd7bd69adc33e367a8e69510/bundles/scripting/sightly/engine/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/I18nRuntimeExtension.java&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mxxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5135] Whitelist legit usages of loginAdministrative and administrative ResourceResolver</title>
                <link>https://issues.apache.org/jira/browse/SLING-5135</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;AbstractSlingRepositoryManager&lt;/tt&gt; contains a method that disable loginAdministrative support&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * Returns whether to disable the
     * {@code SlingRepository.loginAdministrative} method or not.
     *
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; {@code &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;} &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; {@code SlingRepository.loginAdministrative} is
     *         disabled.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isDisableLoginAdministrative() 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is a global configuration. It would be nice to have an extension of such mechanism that contains a white list of (few) legit usage of &lt;tt&gt;loginAdministrative&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12904105">SLING-5135</key>
            <summary>Whitelist legit usages of loginAdministrative and administrative ResourceResolver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Oct 2015 07:57:03 +0000</created>
                <updated>Fri, 16 Nov 2018 10:19:20 +0000</updated>
                            <resolved>Thu, 10 Nov 2016 16:17:55 +0000</resolved>
                                                    <fixVersion>JCR Base 2.4.2</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="14952780" author="bdelacretaz" created="Mon, 12 Oct 2015 08:07:07 +0000"  >&lt;p&gt;How would you specify the legit usages? Based on which bundle is using the service? On the calling stack trace?&lt;/p&gt;</comment>
                            <comment id="14952789" author="asanso" created="Mon, 12 Oct 2015 08:16:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; those are good questions indeed. At the moment I opened this issue only to track the improvement and would not know the answers &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14952800" author="bdelacretaz" created="Mon, 12 Oct 2015 08:23:19 +0000"  >&lt;p&gt;Ok, it&apos;s good to know that you are aware of the issue &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15073669" author="bdelacretaz" created="Tue, 29 Dec 2015 08:57:30 +0000"  >&lt;p&gt;Note that we&apos;ll need a similar mechanism for &lt;tt&gt;ResourceResolverFactory.getAdministrativeResourceResolver()&lt;/tt&gt;. I have suggested a mechanism on the Sling dev list in the &lt;em&gt;How to whitelist legit usages of loginAdministrative?&lt;/em&gt; thread ( &lt;a href=&quot;http://sling.markmail.org/thread/oszfbjkswnctkynv&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.markmail.org/thread/oszfbjkswnctkynv&lt;/a&gt; )&lt;/p&gt;</comment>
                            <comment id="15085551" author="bdelacretaz" created="Wed, 6 Jan 2016 13:52:43 +0000"  >&lt;p&gt;The emerging idea from the dev list thread is to use a whitelist of bundle symbolic names, to indicate which bundles are still allowed to use loginAdmin once that&apos;s disabled.&lt;/p&gt;

&lt;p&gt;Once that&apos;s clarified, we might remove or at least clarify the deprecation notice on the SlingRepository.loginAdministrative method, and corresponding ResourceResolver methods.&lt;/p&gt;</comment>
                            <comment id="15117283" author="bdelacretaz" created="Tue, 26 Jan 2016 14:31:50 +0000"  >&lt;p&gt;Unassigning as I won&apos;t be able to work on this in the next few days&lt;/p&gt;</comment>
                            <comment id="15389511" author="bdelacretaz" created="Fri, 22 Jul 2016 13:41:07 +0000"  >&lt;p&gt;The attached &lt;tt&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5135&quot; title=&quot;Whitelist legit usages of loginAdministrative and administrative ResourceResolver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5135&quot;&gt;&lt;del&gt;SLING-5135&lt;/del&gt;&lt;/a&gt;.patch&lt;/tt&gt; implements a whitelist based on bundle symbolic names - a bundle can only use SlingRepository.loginAdministrative() if its symbolic name is included in the list configured for the &lt;tt&gt;org.apache.sling.jcr.base.internal.LoginAdminWhitelistImpl&lt;/tt&gt; component.&lt;/p&gt;

&lt;p&gt;For backwards compatibility reasons the whitelist can also be disabled by configuration, which is not recommended and logged as a warning.&lt;/p&gt;

&lt;p&gt;The whitelist starts empty, so configuration is required with the current Sling code, see sling.txt in the patch for an example.&lt;/p&gt;

&lt;p&gt;A few Launchpad integration tests fail with this patch but before going further I&apos;d like get feedback. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asanso&quot; class=&quot;user-hover&quot; rel=&quot;asanso&quot;&gt;asanso&lt;/a&gt; could you review it? I&apos;ll also ask on our dev list.&lt;/p&gt;</comment>
                            <comment id="15464993" author="bdelacretaz" created="Mon, 5 Sep 2016 13:26:09 +0000"  >&lt;p&gt;I have attached a new &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5135&quot; title=&quot;Whitelist legit usages of loginAdministrative and administrative ResourceResolver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5135&quot;&gt;&lt;del&gt;SLING-5135&lt;/del&gt;&lt;/a&gt;.patch including a default configuration that whitelists bundles that currently require loginAdmin and are included in in the Sling Launchpad . As discussed on our dev list at &lt;a href=&quot;https://lists.apache.org/thread.html/5e47be07292b1d2eee8625ed2d27103c588a4b2b82ce5a3031cd0723@%3Cdev.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/5e47be07292b1d2eee8625ed2d27103c588a4b2b82ce5a3031cd0723@%3Cdev.sling.apache.org%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also introduced a whitelist regexp configuration parameter, that&apos;s needed when running tests with Pax Exam for example which generates bundles with semi-random bundle symbolic names using a common prefix. That parameter is meant for testing and logs the following warning:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;*WARN* [OsgiInstallerImpl] org.apache.sling.jcr.base.internal.LoginAdminWhitelistImpl A whitelist.regexp 
is configured, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is NOT RECOMMENDED &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; production: &amp;lt;configured regexp here&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;All tests pass with this patch applied to the current trunk.&lt;/p&gt;

&lt;p&gt;@asanso, could you have a look before I commit this?&lt;/p&gt;</comment>
                            <comment id="15466512" author="asanso" created="Tue, 6 Sep 2016 05:52:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; LGTM.&lt;br/&gt;
One little thing. I suspect that if we enable this as is it might break some stuff.&lt;br/&gt;
E.g. &lt;tt&gt;org.apache.sling.resourceresolver&lt;/tt&gt; has &lt;tt&gt;loginAdministrative&lt;/tt&gt; calls but is not on the white list.&lt;/p&gt;

&lt;p&gt;Do we want an extra boolean config thats says &lt;tt&gt;enableWhiteList&lt;/tt&gt;  or is over killing ?&lt;/p&gt;

&lt;p&gt;On the other point is : do we want to have the same mechanism be applied for administrative ResourceResolver?&lt;/p&gt;</comment>
                            <comment id="15466994" author="bdelacretaz" created="Tue, 6 Sep 2016 09:48:02 +0000"  >&lt;p&gt;You&apos;re right that this might break some things in &lt;tt&gt;org.apache.sling.resourceresolver&lt;/tt&gt;, at least the &lt;tt&gt;ResourceResolverWebConsolePlugin&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;Apart from that I suppose calls to &lt;tt&gt;ResourceResolverFactory.getAdministrativeResourceResolver&lt;/tt&gt; ultimately end up in a call to &lt;tt&gt;loginAdministrative&lt;/tt&gt; which is subject to the whitelist? I&apos;d need to dig deeper to confirm.&lt;/p&gt;

&lt;p&gt;At this point we might commit this, adding &lt;tt&gt;org.apache.sling.resourceresolver&lt;/tt&gt; to the default whitelist, and create a distinct ticket for implementing a similar mechanism for &lt;tt&gt;ResourceResolverFactory.getAdministrativeResourceResolver&lt;/tt&gt;. But I won&apos;t have time to work on the latter in the next few weeks, so I&apos;m not sure if it&apos;s a good idea to leave this half-finished in this way, unless someone can pick that up.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do we want an extra boolean config thats says &lt;tt&gt;enableWhiteList&lt;/tt&gt; ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;tt&gt;LoginAdminWhitelistImpl&lt;/tt&gt; has a &lt;tt&gt;whitelist.bypass&lt;/tt&gt; configuration parameter that completely bypasses the whitelist, I suppose that&apos;s what you mean?&lt;/p&gt;</comment>
                            <comment id="15467001" author="asanso" created="Tue, 6 Sep 2016 09:52:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;LoginAdminWhitelistImpl has a whitelist.bypass configuration parameter that completely bypasses the whitelist, I suppose that&apos;s what you mean?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;yes thanks!! &lt;/p&gt;</comment>
                            <comment id="15470056" author="bdelacretaz" created="Wed, 7 Sep 2016 08:54:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;...I suppose calls to ResourceResolverFactory.getAdministrativeResourceResolver ultimately end up in a call to loginAdministrative which is subject to the whitelist?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The whitelist is indeed called but with the wrong client bundle reference. &lt;/p&gt;

&lt;p&gt;Calls to &lt;tt&gt;getAdministrativeResourceResolver()&lt;/tt&gt; end up calling &lt;tt&gt;repository.loginAdministrative(null)&lt;/tt&gt; in &lt;tt&gt;JcrProviderStateFactory&lt;/tt&gt; which uses a &lt;tt&gt;SlingRepository&lt;/tt&gt; service acquired by the &lt;tt&gt;JcrResourceProvider&lt;/tt&gt; service. The reference client bundle for the whitelist is then the &lt;tt&gt;o.a.s.jcr.resource&lt;/tt&gt; bundle even if it&apos;s another bundle which called &lt;tt&gt;getAdministrativeResourceResolver()&lt;/tt&gt;, hiding the actual client bundle from the whitelist.&lt;/p&gt;

&lt;p&gt;To fix this and take the whitelist into account for &lt;tt&gt;getAdministrativeResourceResolver()&lt;/tt&gt; calls which end up hitting the &lt;tt&gt;JcrResourceProvider&lt;/tt&gt; we need to modify that service so that it&apos;s registered with a custom &lt;tt&gt;ServiceFactory&lt;/tt&gt; which stores a reference to the client bundle that&apos;s using the &lt;tt&gt;JcrResourceProvider&lt;/tt&gt; service, as is done in &lt;tt&gt;AbstractSlingRepositoryManager.registerService()&lt;/tt&gt;. That client bundle reference can then be passed to &lt;tt&gt;JcrProviderStateFactory&lt;/tt&gt; so that the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; can be used there, evaluated against the correct client bundle.&lt;/p&gt;

&lt;p&gt;That&apos;s a somewhat complicated explanation - as I said I probably won&apos;t have time to work on this right now, so saving this knowledge for later &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15562559" author="bdelacretaz" created="Mon, 10 Oct 2016 15:19:45 +0000"  >&lt;p&gt;I now have an implementation at &lt;a href=&quot;https://github.com/bdelacretaz/sling/tree/issue/SLING-5135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/bdelacretaz/sling/tree/issue/SLING-5135&lt;/a&gt; where &lt;tt&gt;getAdministrativeResourceResolver()&lt;/tt&gt; also passes through the login admin whitelist.&lt;/p&gt;

&lt;p&gt;It&apos;s simpler than envisioned in my last comment, as the calling bundle can be extracted from the authentication info Map that&apos;s passed to &lt;tt&gt;JcrProviderStateFactory.createProviderState&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Some integration tests (MappingEventsProxyTest, ResourceResolverProxyTest, VanityPathTest) are failing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, it looks like &lt;tt&gt;MapEntries&lt;/tt&gt; calling &lt;tt&gt;getAdministrativeResourceResolver(null)&lt;/tt&gt; might be the cause of that.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; All with failures like &quot;timeout waiting for org/apache/sling/api/resource/ResourceResolverMapping/CHANGED event&quot;&lt;/p&gt;</comment>
                            <comment id="15565525" author="bdelacretaz" created="Tue, 11 Oct 2016 14:15:50 +0000"  >&lt;p&gt;The failing integration tests are caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6131&quot; title=&quot;MapEntries: Invalid logic around added/changed/removed property names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6131&quot;&gt;&lt;del&gt;SLING-6131&lt;/del&gt;&lt;/a&gt; in addition to MapEntries not providing the calling bundle.&lt;/p&gt;</comment>
                            <comment id="15565872" author="bdelacretaz" created="Tue, 11 Oct 2016 16:14:52 +0000"  >&lt;p&gt;I have committed the bundles/ changes in revision 1764281, still working on integration in the launchpad modules and tests.&lt;/p&gt;</comment>
                            <comment id="15568721" author="bdelacretaz" created="Wed, 12 Oct 2016 13:33:51 +0000"  >&lt;p&gt;I have committed the launchpad changes in revision 1764464 to verify that this feature does not break our integration tests. I had to disable two tests for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6139&quot; title=&quot;Updates to sling:alias property breaks aliases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6139&quot;&gt;&lt;del&gt;SLING-6139&lt;/del&gt;&lt;/a&gt; but that&apos;s unrelated.&lt;/p&gt;

&lt;p&gt;So from the code point of view this should be ready, leaving this ticket open as I need to document the whitelist.&lt;/p&gt;</comment>
                            <comment id="15586647" author="rombert" created="Tue, 18 Oct 2016 21:00:38 +0000"  >&lt;p&gt;I think it would be useful to have a configuration option which instead of replacing the default bundle list adds to it.&lt;/p&gt;

&lt;p&gt;My reasoning is that when configuring the whitelist on a custom setup you need to &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;look at the code (and you need to know where the default whitelisted bundles are defined)&lt;/li&gt;
	&lt;li&gt;transform the default bundle list into the provisioning model format&lt;/li&gt;
	&lt;li&gt;append the new bundle to the config&lt;/li&gt;
	&lt;li&gt;create a new config for the &lt;tt&gt;org.apache.sling.jcr.base.internal.LoginAdminWhitelistImpl&lt;/tt&gt; component&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;With the &apos;append&apos; property exposed a user can only do steps 3 and 4, which is a definite improvement. I fear that if it&apos;s too complicated users will simply re-enable login administrative or use an unsafe regular expression.&lt;/p&gt;</comment>
                            <comment id="15588070" author="bdelacretaz" created="Wed, 19 Oct 2016 08:42:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;it would be useful to have a configuration option which instead of replacing the default bundle list adds to it.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good point, how about using two multi-value configuration parameters?&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;default.whitelisted.bundle.symbolic.names&lt;/tt&gt; for the ones that we currently have&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;additional.whitelisted.bundle.symbolic.names&lt;/tt&gt;  for the &quot;user&quot; ones, empty by default&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think this should be sufficient while giving more flexibility, WDYT?&lt;/p&gt;

&lt;p&gt;This hasn&apos;t been released yet so we can freely change the existing config parameter name.&lt;/p&gt;</comment>
                            <comment id="15588073" author="rombert" created="Wed, 19 Oct 2016 08:43:38 +0000"  >&lt;p&gt;That sounds good to me.&lt;/p&gt;</comment>
                            <comment id="15594738" author="bdelacretaz" created="Fri, 21 Oct 2016 10:29:54 +0000"  >&lt;p&gt;I have modified the whitelisted BSNs config to use the &quot;default&quot; and &quot;additional&quot; properties mentioned in my last comment here, in &lt;a href=&quot;http://svn.apache.org/r1765984&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1765984&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15604510" author="olli" created="Tue, 25 Oct 2016 07:36:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;: can we align the property names making them consistent? Maybe just&lt;br/&gt;
&lt;tt&gt;whitelist.bypass&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;whitelist.bundles.regex&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;whitelist.bundles.default&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;whitelist.bundles.additional&lt;/tt&gt;&lt;br/&gt;
as all lists use BSNs anyway.&lt;/p&gt;

&lt;p&gt;edit: &lt;tt&gt;bundles&lt;/tt&gt; added to distinguish from &lt;tt&gt;bypass&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15647842" author="jsedding" created="Tue, 8 Nov 2016 15:24:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; I will try to wrap this issue up, but I will probably need your inputs.&lt;/p&gt;

&lt;p&gt;Can you please confirm that what&apos;s left to do are the following:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;rename the configuration properties as suggested by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;add documentation&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Furthermore, I have two questions regarding the current state of the implementation:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;What&apos;s the rationale for implementing the check for &lt;tt&gt;ResourceResolverFactory#getAdministrativeResourceResolver&lt;/tt&gt; in &lt;tt&gt;JcrProviderStateFactory#requireCallingBundle&lt;/tt&gt; rather than in &lt;tt&gt;CommonResourceResolverFactoryImpl#getAdministrativeResourceResolver&lt;/tt&gt;? The latter would seem more intuitive and straight forward IMHO.&lt;/li&gt;
	&lt;li&gt;Why is &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; in the package &lt;tt&gt;org.apache.sling.jcr.base&lt;/tt&gt; rather than in an API package? While in practice it&apos;s most likely to be a JCR concern, conceptually it&apos;s a concern of the &lt;tt&gt;ResourceResolverFactory&lt;/tt&gt; (package &lt;tt&gt;o.a.s.api.resource&lt;/tt&gt;) and the &lt;tt&gt;SlingRepository&lt;/tt&gt; (package &lt;tt&gt;o.a.s.jcr.api&lt;/tt&gt;), so &lt;tt&gt;o.a.s.api&lt;/tt&gt; would seem like a natural option.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Or was the intention to apply the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; exclusively on &lt;tt&gt;SlingRepository#loginAdministrative&lt;/tt&gt; while handing down the &lt;tt&gt;usingBundle&lt;/tt&gt; for calls &lt;tt&gt;ResourceResolverFactory#getAdministrativeResourceResolver&lt;/tt&gt; implementations?&lt;/p&gt;

&lt;p&gt;Thanks in advance for any insights!&lt;/p&gt;</comment>
                            <comment id="15648163" author="bdelacretaz" created="Tue, 8 Nov 2016 17:19:55 +0000"  >&lt;p&gt;You are correct about what&apos;s left to do.&lt;/p&gt;

&lt;p&gt;I implemented the check in &lt;tt&gt;JcrProviderStateFactory.createProviderState(...)&lt;/tt&gt; as that&apos;s where the loginAdministrative call happens, so it feels natural to me to have the check right next to it. But if you find a better way that doesn&apos;t break the tests I have no problem with that.&lt;/p&gt;

&lt;p&gt;Moving the &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; interface to &lt;tt&gt;o.a.s.jcr.api&lt;/tt&gt; sounds like a good idea. We try to touch the &lt;tt&gt;o.a.s.api&lt;/tt&gt; as little as possible.&lt;/p&gt;</comment>
                            <comment id="15651212" author="cziegeler" created="Wed, 9 Nov 2016 15:20:17 +0000"  >&lt;p&gt;We should also check whether the default whitelist is still correct, currently it is&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.discovery.commons&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.discovery.base&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.discovery.oak&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.extensions.webconsolesecurityprovider&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.i18n&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.installer.provider.jcr&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.base&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.contentloader&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.davex&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.jackrabbit.usermanager&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.oak.server&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.resource&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.webconsole&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.webdav&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.junit.core&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.resourceresolver&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.scripting.core&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.scripting.sightly&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.servlets.post&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.servlets.resolver&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.xss&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think some of the above modules don&apos;t use login admin anymore&lt;/p&gt;</comment>
                            <comment id="15652007" author="jsedding" created="Wed, 9 Nov 2016 20:52:23 +0000"  >&lt;p&gt;I think the &lt;tt&gt;DefaultWhitelist&lt;/tt&gt; can be reduced to the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.discovery.commons&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.discovery.base&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.discovery.oak&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.extensions.webconsolesecurityprovider&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.i18n&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.installer.provider.jcr&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.base&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.contentloader&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.davex&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.jackrabbit.usermanager&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.oak.server&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.repoinit&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.resource&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.jcr.webconsole&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.resourceresolver&quot;&lt;/span&gt;,
            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.servlets.post&quot;&lt;/span&gt;, &lt;span class=&quot;code-comment&quot;&gt;// remove when 2.3.16 is released
&lt;/span&gt;            &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.servlets.resolver&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll run a full build to confirm that this works.&lt;/p&gt;</comment>
                            <comment id="15653325" author="githubbot" created="Thu, 10 Nov 2016 07:42:39 +0000"  >&lt;p&gt;Github user code-distillery closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/185&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/185&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15653334" author="githubbot" created="Thu, 10 Nov 2016 07:45:52 +0000"  >&lt;p&gt;GitHub user code-distillery reopened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/185&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/185&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5135&quot; title=&quot;Whitelist legit usages of loginAdministrative and administrative ResourceResolver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5135&quot;&gt;&lt;del&gt;SLING-5135&lt;/del&gt;&lt;/a&gt; - Whitelist legit usages of loginAdministrative and administrative ResourceResolver&lt;/p&gt;

&lt;p&gt;    This pull request includes the following refactorings:&lt;/p&gt;

&lt;p&gt;    1. Replace `AbstractSlingRepositoryManager#getLoginAdminWhitelist()` with `AbstractSlingRepositoryManager#allowLoginAdministrativeForBundle(Bundle)`. This allows implementations of `AbstractSlingRepositoryManager` to implement this method as they see fit. This decouples the `LoginAdminWhitelist` service fro `AbstractSlingRepositoryManager`, in fact only `OakSlingRepositoryManager` needs this dependency, as it uses it in its implementation.&lt;/p&gt;

&lt;p&gt;    2. Refactor `JcrProviderStateFactory` to use an `AbstractSlingRepository` instance injected with the &quot;usingBundle&quot; (by means of a `ServiceFactory`) not only for `loginService` but also for `loginAdministrative`. This allows removing any reference to `LoginAdminWhitelist` and thus also the dependency from `o.a.s.jcr.resource` to `o.a.s.jcr.base`.&lt;/p&gt;

&lt;p&gt;    3. Rename `LoginAdminWhitelist` configuration properties as suggested by Oliver in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5135&quot; title=&quot;Whitelist legit usages of loginAdministrative and administrative ResourceResolver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5135&quot;&gt;&lt;del&gt;SLING-5135&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/code-distillery/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/code-distillery/sling&lt;/a&gt; feature/&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5135&quot; title=&quot;Whitelist legit usages of loginAdministrative and administrative ResourceResolver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5135&quot;&gt;&lt;del&gt;SLING-5135&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/185.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/185.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #185&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f21f053fa07f59866cbcc7155720653648c67296&lt;br/&gt;
Author: Julian Sedding &amp;lt;jsedding@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-09T15:14:59Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5135&quot; title=&quot;Whitelist legit usages of loginAdministrative and administrative ResourceResolver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5135&quot;&gt;&lt;del&gt;SLING-5135&lt;/del&gt;&lt;/a&gt; - Whitelist legit usages of loginAdministrative and administrative ResourceResolver&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;refactor for minimal dependencies to LoginAdminWhitelist support&lt;/li&gt;
	&lt;li&gt;cleanup imports and related tests&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;commit 20c65f90a7b9babffe20473ec3052d9810495b0a&lt;br/&gt;
Author: Julian Sedding &amp;lt;jsedding@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-09T19:51:00Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5135&quot; title=&quot;Whitelist legit usages of loginAdministrative and administrative ResourceResolver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5135&quot;&gt;&lt;del&gt;SLING-5135&lt;/del&gt;&lt;/a&gt; - Whitelist legit usages of loginAdministrative and administrative ResourceResolver&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;avoid explicit check for LoginAdminWhitelist by using the same&lt;br/&gt;
      mechanism for loginAdministrative and loginService to pass&lt;br/&gt;
      the &quot;usingBundle&quot; to the AbstractSlingRepository2 instance&lt;/li&gt;
	&lt;li&gt;the above allows to remove the dependency to o.a.s.jcr.base&lt;br/&gt;
      from o.a.s.jcr.resource&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;commit ecb3ce1d68d40356eae0a928584b7bb6c7545d6c&lt;br/&gt;
Author: Julian Sedding &amp;lt;jsedding@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-11-09T20:13:58Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5135&quot; title=&quot;Whitelist legit usages of loginAdministrative and administrative ResourceResolver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5135&quot;&gt;&lt;del&gt;SLING-5135&lt;/del&gt;&lt;/a&gt; - Whitelist legit usages of loginAdministrative and administrative ResourceResolver&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;rename configuration properties&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15653349" author="jsedding" created="Thu, 10 Nov 2016 07:52:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Could you take a look at the pull request please? I have structured it into three commits and explain the rationale in the PR&apos;s comments.&lt;/p&gt;

&lt;p&gt;Note: while there will be more changes, the PR should cover the biggest chunk (and possibly most controversial bits) Currently I&apos;m working on the default whitelist.&lt;/p&gt;</comment>
                            <comment id="15653406" author="jsedding" created="Thu, 10 Nov 2016 08:18:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5355&quot; title=&quot;Create service users and ACLs from the provisioning model&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5355&quot;&gt;&lt;del&gt;SLING-5355&lt;/del&gt;&lt;/a&gt; is useful for cutting down the &lt;tt&gt;DefaultWhitelist&lt;/tt&gt;, as it links to a list of issues that intend to remove &lt;tt&gt;loginAdministrative&lt;/tt&gt; and &lt;tt&gt;getAdministrativeResourceResolver&lt;/tt&gt; usages.&lt;/p&gt;</comment>
                            <comment id="15653438" author="cziegeler" created="Thu, 10 Nov 2016 08:37:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt; Thanks for taking this up, it looks good to me, especially removing the dependency to jcr.base from jcr.resource is a very good thing&lt;/p&gt;</comment>
                            <comment id="15653464" author="jsedding" created="Thu, 10 Nov 2016 08:48:30 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; for your review.&lt;/p&gt;

&lt;p&gt;I was wondering whether we should move &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; to the &lt;tt&gt;oak-server&lt;/tt&gt; module. With my current changes &lt;tt&gt;o.a.s.jcr.base&lt;/tt&gt; provides the interface and service implementation. However, IIUC we could register the implementation under its own name, without exposing any interface provided we move it into &lt;tt&gt;oak-server&lt;/tt&gt;. Thus it would be a private implementation detail of &lt;tt&gt;o.a.s.jcr.oak-server&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;WDYT?&lt;/p&gt;</comment>
                            <comment id="15653487" author="cziegeler" created="Thu, 10 Nov 2016 08:56:30 +0000"  >&lt;p&gt;Sounds good to me, +1 for moving. The less api the better &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15653778" author="bdelacretaz" created="Thu, 10 Nov 2016 11:08:36 +0000"  >&lt;p&gt;Works for me, thanks!&lt;/p&gt;</comment>
                            <comment id="15653962" author="jsedding" created="Thu, 10 Nov 2016 12:45:17 +0000"  >&lt;p&gt;Fixed in revisions &lt;a href=&quot;https://svn.apache.org/r1769101&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1769101&lt;/a&gt;, &lt;a href=&quot;https://svn.apache.org/r1769102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1769102&lt;/a&gt;, &lt;a href=&quot;https://svn.apache.org/r1769103&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1769103&lt;/a&gt;, &lt;a href=&quot;https://svn.apache.org/r1769104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1769104&lt;/a&gt; and &lt;a href=&quot;https://svn.apache.org/r1769105&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1769105&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Left to do is documentation.&lt;/p&gt;</comment>
                            <comment id="15654136" author="githubbot" created="Thu, 10 Nov 2016 14:12:40 +0000"  >&lt;p&gt;Github user code-distillery closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/185&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/185&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13010449">SLING-6113</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13011026">SLING-6124</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12919688">SLING-5355</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13020052">SLING-6273</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13198860">JCRVLT-325</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12827071" name="SLING-5135.patch" size="33011" author="bdelacretaz" created="Mon, 5 Sep 2016 13:26:09 +0000"/>
                            <attachment id="12819623" name="SLING-5135.patch" size="16727" author="bdelacretaz" created="Fri, 22 Jul 2016 13:41:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mvi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5116] Communicate Password Change Failure Reason During Password Expiry</title>
                <link>https://issues.apache.org/jira/browse/SLING-5116</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;if the repository&apos;s password expiry feature is enabled, the password may be changed during the login call. any failure of this pw change - e.g. due to the pw having been found in the pw history - must be communicated via the SlingAuthenticator#handleLoginFailure for UIs to react accordingly.&lt;/p&gt;

&lt;p&gt;see &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3463&quot; title=&quot;Communicate Password Change Failure Reason During Expiry + Pw History&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3463&quot;&gt;&lt;del&gt;OAK-3463&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12902997">SLING-5116</key>
            <summary>Communicate Password Change Failure Reason During Password Expiry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="dominique.jaeggi">Dominique J&#228;ggi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Oct 2015 13:49:41 +0000</created>
                <updated>Sun, 18 Oct 2015 14:55:38 +0000</updated>
                            <resolved>Wed, 7 Oct 2015 14:11:32 +0000</resolved>
                                                    <fixVersion>Auth Core 1.3.12</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14946877" author="dominique.jaeggi" created="Wed, 7 Oct 2015 13:52:29 +0000"  >&lt;p&gt;attaching patch&lt;/p&gt;</comment>
                            <comment id="14946902" author="asanso" created="Wed, 7 Oct 2015 14:11:32 +0000"  >&lt;p&gt;fixed in rev. r1707311&lt;/p&gt;</comment>
                            <comment id="14946905" author="asanso" created="Wed, 7 Oct 2015 14:11:55 +0000"  >&lt;p&gt;applied patch from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djaeggi&quot; class=&quot;user-hover&quot; rel=&quot;djaeggi&quot;&gt;djaeggi&lt;/a&gt; thanks!&lt;/p&gt;</comment>
                            <comment id="14946936" author="rombert" created="Wed, 7 Oct 2015 14:30:19 +0000"  >&lt;p&gt;I think you also need to adjust the exported package versions&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Waiting for Jenkins to finish collecting data
[ERROR] Failed to execute goal org.apache.felix:maven-bundle-plugin:3.0.0:baseline (baseline) on project org.apache.sling.auth.core: Baseline failed, see generated report -&amp;gt; [Help 1&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14946959" author="asanso" created="Wed, 7 Oct 2015 14:43:21 +0000"  >&lt;p&gt;ops :S&lt;/p&gt;

&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; fixed now :S&lt;/p&gt;</comment>
                            <comment id="14946977" author="rombert" created="Wed, 7 Oct 2015 14:55:24 +0000"  >&lt;p&gt;Great, thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12901545">OAK-3463</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12745429">SLING-3991</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12765390" name="SLING-5116__Communicate_Password_Change_Failure_Reason_During_Password_Expiry.patch" size="4625" author="dominique.jaeggi" created="Wed, 7 Oct 2015 13:52:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2moun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5105] Do not export org.apache.sling.oak.server</title>
                <link>https://issues.apache.org/jira/browse/SLING-5105</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The `org.apache.sling.oak.server` package is exported but it should not be. Also there&apos;s a comment in the pom file which alludes to that&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;                        &amp;lt;Private-Package&amp;gt;
                            org.apache.sling.oak.server.*
                        &amp;lt;/Private-Package&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12902816">SLING-5105</key>
            <summary>Do not export org.apache.sling.oak.server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Oct 2015 20:40:51 +0000</created>
                <updated>Mon, 12 Oct 2015 09:38:54 +0000</updated>
                            <resolved>Tue, 6 Oct 2015 20:49:23 +0000</resolved>
                                                    <fixVersion>JCR Oak Server 1.0.0</fixVersion>
                                    <component>Oak</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14945757" author="rombert" created="Tue, 6 Oct 2015 20:49:27 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1707138&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1707138&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mnqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5091] JCR Content Loader Unit Tests do not run with latest sling-mock-oak</title>
                <link>https://issues.apache.org/jira/browse/SLING-5091</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5088?focusedCommentId=14943286#comment-14943286&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-5088?focusedCommentId=14943286#comment-14943286&lt;/a&gt;&lt;br/&gt;
and &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5088?focusedCommentId=14943292#comment-14943292&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-5088?focusedCommentId=14943292#comment-14943292&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12902414">SLING-5091</key>
            <summary>JCR Content Loader Unit Tests do not run with latest sling-mock-oak</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Oct 2015 12:45:25 +0000</created>
                <updated>Mon, 8 May 2017 07:56:18 +0000</updated>
                            <resolved>Mon, 5 Oct 2015 13:01:43 +0000</resolved>
                                    <version>JCR ContentLoader 2.2.0</version>
                                    <fixVersion>JCR ContentLoader 2.2.0</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14943333" author="sseifert@pro-vision.de" created="Mon, 5 Oct 2015 13:01:43 +0000"  >&lt;p&gt;Completed: At revision: 1706831  &lt;/p&gt;

&lt;p&gt;changes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;update to latest mock dependencies&lt;/li&gt;
	&lt;li&gt;update commons-io dependency to 2.4&lt;/li&gt;
	&lt;li&gt;fixed startup/teardown behavior in two unit test classes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;let&apos;s see if this catched all problems - locally i had a successful test run.&lt;/p&gt;</comment>
                            <comment id="14943359" author="rombert" created="Mon, 5 Oct 2015 13:27:04 +0000"  >&lt;p&gt;Ah, so this was unrelated to the mocks changes. Sorry for the noise and thanks for fixing it!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12902155">SLING-5088</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ml9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5088] sling-mock: Threads created by resource resolver/JCR are not terminated properly</title>
                <link>https://issues.apache.org/jira/browse/SLING-5088</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;as detected in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5067&quot; title=&quot;sling-mock: &amp;quot;uniqueRoot()&amp;quot; to simplify creation and cleanup of unique root paths in repository&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5067&quot;&gt;&lt;del&gt;SLING-5067&lt;/del&gt;&lt;/a&gt; threads that are opened during unit test run when setting up resource resolver with JCR mapping for the mocks are not terminated properly and may lead to problems if the number of unit tests increases.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12902155">SLING-5088</key>
            <summary>sling-mock: Threads created by resource resolver/JCR are not terminated properly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Fri, 2 Oct 2015 16:29:44 +0000</created>
                <updated>Mon, 26 Oct 2015 16:00:42 +0000</updated>
                            <resolved>Fri, 2 Oct 2015 22:44:43 +0000</resolved>
                                    <version>Testing Sling Mock Jackrabbit 0.1.2</version>
                    <version>Testing Sling Mock 1.5.0</version>
                                    <fixVersion>Testing Sling Mock Jackrabbit 1.0.0</fixVersion>
                    <fixVersion>Testing Sling Mock 1.6.0</fixVersion>
                    <fixVersion>Testing Sling Mock Oak 1.0.0</fixVersion>
                    <fixVersion>Testing OSGi Mock 1.6.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14941352" author="sseifert@pro-vision.de" created="Fri, 2 Oct 2015 16:33:51 +0000"  >&lt;p&gt;examples for threads that pile up after surefire run of sling-mock:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  Thread &quot;Apache Sling JCR Resource Event Queue Processor for path &apos;/&apos;&quot;:
    at sun.misc.Unsafe.park(boolean, long)
    at java.util.concurrent.locks.LockSupport.park(java.lang.Object)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await()
    at java.util.concurrent.LinkedBlockingQueue.take()
    at org.apache.sling.jcr.resource.internal.JcrResourceListener.processOsgiEventQueue()
    at org.apache.sling.jcr.resource.internal.JcrResourceListener$1.run()
    at java.lang.Thread.run()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  Thread &quot;MapEntries Update&quot;:
    at sun.misc.Unsafe.park(boolean, long)
    at java.util.concurrent.locks.LockSupport.park(java.lang.Object)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt()
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(int)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(int)
    at java.util.concurrent.Semaphore.acquire()
    at org.apache.sling.resourceresolver.impl.mapping.MapEntries.init()
    at org.apache.sling.resourceresolver.impl.mapping.MapEntries.access$000(org.apache.sling.resourceresolver.impl.mapping.MapEntries)
    at org.apache.sling.resourceresolver.impl.mapping.MapEntries$1.run()
    at java.lang.Thread.run()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  Thread &quot;pool-12-thread-1&quot;:
    at sun.misc.Unsafe.park(boolean, long)
    at java.util.concurrent.locks.LockSupport.parkNanos(java.lang.Object, long)
    at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(java.util.concurrent.SynchronousQueue$TransferStack$SNode, boolean, long)
    at java.util.concurrent.SynchronousQueue$TransferStack.transfer(java.lang.Object, boolean, long)
    at java.util.concurrent.SynchronousQueue.poll(long, java.util.concurrent.TimeUnit)
    at java.util.concurrent.ThreadPoolExecutor.getTask()
    at java.util.concurrent.ThreadPoolExecutor.runWorker(java.util.concurrent.ThreadPoolExecutor$Worker)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run()
    at java.lang.Thread.run()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14941400" author="sseifert@pro-vision.de" created="Fri, 2 Oct 2015 17:03:45 +0000"  >&lt;p&gt;Completed: At revision: 1706448  &lt;/p&gt;

&lt;p&gt;updated sling-mock to latest osgi-mock version for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5089&quot; title=&quot;mock-osgi: Deactivate all services on shutdown&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5089&quot;&gt;&lt;del&gt;SLING-5089&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;does not solve the problem yet, further work is needed.&lt;/p&gt;</comment>
                            <comment id="14941912" author="sseifert@pro-vision.de" created="Fri, 2 Oct 2015 22:44:43 +0000"  >&lt;p&gt;rev. 1706500&lt;/p&gt;

&lt;p&gt;should be fixed for sling-mock. no threads kept open exception some JDK-internal ThreadPoolExecutor pool items. the code for setting up ResourceResolverFactoryActivator is much cleaner now and more correct than before.&lt;/p&gt;

&lt;p&gt;will have to look separately at sling-mock-oak.&lt;/p&gt;</comment>
                            <comment id="14941973" author="sseifert@pro-vision.de" created="Fri, 2 Oct 2015 23:55:04 +0000"  >&lt;p&gt;rev. 1706506&lt;/p&gt;

&lt;p&gt;there where misc. executor services left in oak and osgi-mock that were not closed properly. fixed no. thead list in sling-mock is not completely clean after all unit tests completed. marked some methods in MockSling and MockOsgi as deprecated which usage may lead to memory leaks because bundle context cannot be shut down properly.&lt;/p&gt;</comment>
                            <comment id="14942024" author="sseifert@pro-vision.de" created="Sat, 3 Oct 2015 01:00:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;: if you find the time please validate that the memory leak problem on your machine is solved as well.&lt;/p&gt;

&lt;p&gt;i want to make new releases early next week, because this is a rather serious issue, and because of the new features and 1.0.0 releases of sling-mock-oak and sling-mock-jackrabbit with automatic node type registration.&lt;/p&gt;</comment>
                            <comment id="14943092" author="rombert" created="Mon, 5 Oct 2015 08:57:55 +0000"  >&lt;p&gt;Looks good to me now, thank you!&lt;/p&gt;</comment>
                            <comment id="14943286" author="rombert" created="Mon, 5 Oct 2015 12:13:03 +0000"  >&lt;p&gt;This might&apos;ve caused test errors in the &lt;tt&gt;bundles/jcr/contentloader&lt;/tt&gt; module. The shared stack trace seems to be&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.RuntimeException: Unable to invoke method &apos;activate&apos; for class org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProviderFactory
	at org.apache.sling.testing.mock.sling.oak.OakMockSlingRepository.login(OakMockSlingRepository.java:105)
	at org.apache.sling.testing.mock.sling.oak.OakMockSlingRepository.loginAdministrative(OakMockSlingRepository.java:121)
	at org.apache.sling.jcr.resource.internal.JcrResourceListener.&amp;lt;init&amp;gt;(JcrResourceListener.java:118)
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProviderFactory.activate(JcrResourceProviderFactory.java:107)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:483)
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.invokeMethod(OsgiServiceUtil.java:253)
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.activateDeactivate(OsgiServiceUtil.java:86)
	at org.apache.sling.testing.mock.osgi.MockOsgi.activate(MockOsgi.java:162)
	at org.apache.sling.testing.mock.osgi.MockOsgi.activate(MockOsgi.java:173)
	at org.apache.sling.testing.mock.sling.MockJcrResourceResolverFactory.getResourceResolverInternal(MockJcrResourceResolverFactory.java:67)
	at org.apache.sling.testing.mock.sling.AbstractMockResourceResolverFactory.getAdministrativeResourceResolver(AbstractMockResourceResolverFactory.java:106)
	at org.apache.sling.testing.mock.sling.context.SlingContextImpl.resourceResolver(SlingContextImpl.java:179)
	at org.apache.sling.jcr.contentloader.internal.ContentLoaderServiceTest.setup(ContentLoaderServiceTest.java:61)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14943292" author="rombert" created="Mon, 5 Oct 2015 12:16:05 +0000"  >&lt;p&gt;And also&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NullPointerException: null
	at org.apache.sling.testing.mock.osgi.MapUtil.propertiesMergeWithOsgiMetadata(MapUtil.java:57)
	at org.apache.sling.testing.mock.osgi.MockOsgi.deactivate(MockOsgi.java:192)
	at org.apache.sling.testing.mock.osgi.MockOsgi.deactivate(MockOsgi.java:182)
	at org.apache.sling.jcr.contentloader.internal.ContentLoaderServiceTest.cleanup(ContentLoaderServiceTest.java:78)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14943321" author="sseifert@pro-vision.de" created="Mon, 5 Oct 2015 12:46:04 +0000"  >&lt;p&gt;jcr-contentloader uses a mixture of old (long releases) sling-mock and osgi-mock snapshots and the latest sling-mock-oak.&lt;br/&gt;
i&apos;ll take care of it in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5091&quot; title=&quot;JCR Content Loader Unit Tests do not run with latest sling-mock-oak&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5091&quot;&gt;&lt;del&gt;SLING-5091&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12896649">SLING-5067</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12902162">SLING-5089</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12902414">SLING-5091</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12907953">SLING-5197</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12902214">SLING-5090</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mjnj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5083] osgi-mock: Eliminate compile dependency to org.apache.felix.scr.annotations</title>
                <link>https://issues.apache.org/jira/browse/SLING-5083</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;osgi-mock 1.5.0 depends on &lt;tt&gt;org.apache.felix.scr.annotations&lt;/tt&gt; with a compile time dependency. this is not required and pollutes the transient dependencies for other bundles. and a provided dependency to it is already inherited from the parent pom.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12901936">SLING-5083</key>
            <summary>osgi-mock: Eliminate compile dependency to org.apache.felix.scr.annotations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Thu, 1 Oct 2015 16:37:57 +0000</created>
                <updated>Thu, 1 Oct 2015 16:38:30 +0000</updated>
                            <resolved>Thu, 1 Oct 2015 16:38:30 +0000</resolved>
                                    <version>Testing OSGi Mock 1.5.0</version>
                                    <fixVersion>Testing OSGi Mock 1.6.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14940049" author="sseifert@pro-vision.de" created="Thu, 1 Oct 2015 16:38:30 +0000"  >&lt;p&gt;Completed: At revision: 1706287  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mib3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5081] Unable to advance in the project creation wizard if the server is pre-selected</title>
                <link>https://issues.apache.org/jira/browse/SLING-5081</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12901668">SLING-5081</key>
            <summary>Unable to advance in the project creation wizard if the server is pre-selected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Sep 2015 19:19:48 +0000</created>
                <updated>Thu, 8 Oct 2015 13:10:38 +0000</updated>
                            <resolved>Wed, 30 Sep 2015 19:22:08 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.0.6</version>
                                    <fixVersion>Sling Eclipse IDE 1.0.8</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14938324" author="rombert" created="Wed, 30 Sep 2015 19:22:12 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1706137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1706137&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mgw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5080] org.apache.sling.scripting.javascript fails baseline check with maven-bundle-plugin 3.0.0</title>
                <link>https://issues.apache.org/jira/browse/SLING-5080</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After updating the maven-bundle-plugin to 3.0.0 the mentioned module fails to build due to a baseline check. When compared to the 2.5.3 build output, I can see that &lt;/p&gt;

&lt;p&gt;1. it complains about multiple &lt;tt&gt;org.mozilla.javascript....&lt;/tt&gt; split packages, e..g.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[WARNING] Bundle org.apache.sling:org.apache.sling.scripting.javascript:bundle:2.0.25-SNAPSHOT : Split package, multiple jars provide the same package:org/mozilla/javascript/serialize
Use Import/Export Package directive -split-package:=(merge-first|merge-last|error|first) to get rid of this warning
Package found in   [Jar:rhino, Jar:js]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2. It thinks that org.mozilla.javascript should be exported with the 1.1.0 version instead of 1.0.0, due to multiple classes being added: ScriptOrFnNode, PropertyException, NotAFunctionException, Node$Jump, FunctionNode, ClassDefinitionException .&lt;/p&gt;

&lt;p&gt;The first note might hold the key to understanding why the second one happens ; bnd might have changed the way it embeds/reexports classes and therefore triggers this problem&lt;/p&gt;</description>
                <environment></environment>
        <key id="12901589">SLING-5080</key>
            <summary>org.apache.sling.scripting.javascript fails baseline check with maven-bundle-plugin 3.0.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Sep 2015 13:08:31 +0000</created>
                <updated>Mon, 12 Oct 2015 13:28:12 +0000</updated>
                            <resolved>Mon, 5 Oct 2015 09:11:12 +0000</resolved>
                                    <version>Scripting JavaScript 2.0.24</version>
                                    <fixVersion>Scripting JavaScript 2.0.26</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14936814" author="rombert" created="Wed, 30 Sep 2015 13:09:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; - any ideas on this? You&apos;re the one doing most of the work related to this bundle recently&lt;/p&gt;</comment>
                            <comment id="14941339" author="rombert" created="Fri, 2 Oct 2015 16:26:44 +0000"  >&lt;p&gt;See also &lt;a href=&quot;http://felix.markmail.org/thread/5pfl53ym7d4c7jxt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dev@felix: Split-package warnings from embedded jars &lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14943105" author="radu.cotescu" created="Mon, 5 Oct 2015 09:10:51 +0000"  >&lt;p&gt;Fixed the baseline error in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1706767&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1706767&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Reported a bug (&lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5062&quot; title=&quot;maven-bundle-plugin includes tests dependencies in package analysis&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5062&quot;&gt;&lt;del&gt;FELIX-5062&lt;/del&gt;&lt;/a&gt;) for the warning messages.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12902384">FELIX-5062</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12901579">SLING-5079</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mgen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5077] NoSQL Couchbase Resource Provider: Make index creation compatible with Couchbase 4.0 RC0</title>
                <link>https://issues.apache.org/jira/browse/SLING-5077</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the NoSQL couchbase resource provider fails to create the primary and parentPath index on couchbase 4.0 RC0.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12901442">SLING-5077</key>
            <summary>NoSQL Couchbase Resource Provider: Make index creation compatible with Couchbase 4.0 RC0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Sep 2015 21:53:30 +0000</created>
                <updated>Sat, 27 Feb 2016 13:33:26 +0000</updated>
                            <resolved>Tue, 29 Sep 2015 21:55:20 +0000</resolved>
                                    <version>NoSQL Couchbase Resource Provider 1.0.0</version>
                                    <fixVersion>NoSQL Couchbase Resource Provider 1.1.0</fixVersion>
                                    <component>NoSQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14935972" author="sseifert@pro-vision.de" created="Tue, 29 Sep 2015 21:55:20 +0000"  >&lt;p&gt;Completed: At revision: 1705931  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mfif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5074] Provide a way to configure the priority of the Sling Models Use Provider</title>
                <link>https://issues.apache.org/jira/browse/SLING-5074</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;SlingModelsUseProvider&lt;/tt&gt; doesn&apos;t provide a way to configure its priority (&lt;tt&gt;service.ranking&lt;/tt&gt; value) like the other Use providers.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12901270">SLING-5074</key>
            <summary>Provide a way to configure the priority of the Sling Models Use Provider</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Sep 2015 09:57:43 +0000</created>
                <updated>Mon, 12 Oct 2015 13:26:08 +0000</updated>
                            <resolved>Tue, 29 Sep 2015 10:07:04 +0000</resolved>
                                    <version>Scripting Sightly Models Use Provider 1.0.0</version>
                                    <fixVersion>Scripting Sightly Models Use Provider 1.0.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14934953" author="radu.cotescu" created="Tue, 29 Sep 2015 10:07:04 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1705827&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1705827&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2medr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5073] Guard against configuration of null passiveQueues</title>
                <link>https://issues.apache.org/jira/browse/SLING-5073</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Guard against configuration of null passiveQueues&lt;/p&gt;</description>
                <environment></environment>
        <key id="12901261">SLING-5073</key>
            <summary>Guard against configuration of null passiveQueues</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Sep 2015 09:08:33 +0000</created>
                <updated>Tue, 29 Sep 2015 10:20:13 +0000</updated>
                            <resolved>Tue, 29 Sep 2015 10:19:58 +0000</resolved>
                                    <version>Content Distribution Core 0.1.6</version>
                                    <fixVersion>Content Distribution Core 0.1.8</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14934963" author="mpetria" created="Tue, 29 Sep 2015 10:19:58 +0000"  >&lt;p&gt;Committed revision 1705832.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mebr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5072] Adjust filter order for RewriterFilter to accomodate changes from SLING-2920</title>
                <link>https://issues.apache.org/jira/browse/SLING-5072</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Based on the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2920&quot; title=&quot;Wrong handling of Sling Filter ordering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2920&quot;&gt;&lt;del&gt;SLING-2920&lt;/del&gt;&lt;/a&gt;, the order of the RewriterFilter needs to be adjusted as it is now significantly later in the filter stack.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12901066">SLING-5072</key>
            <summary>Adjust filter order for RewriterFilter to accomodate changes from SLING-2920</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Sep 2015 16:52:12 +0000</created>
                <updated>Thu, 18 Feb 2016 09:32:02 +0000</updated>
                            <resolved>Mon, 28 Sep 2015 16:53:39 +0000</resolved>
                                                    <fixVersion>Rewriter 1.1.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14933563" author="justinedelson" created="Mon, 28 Sep 2015 16:53:39 +0000"  >&lt;p&gt;Fixed in r1705723&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12901063">SLING-5071</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2md4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5071] Adjust filter order for I18NFilter to accomodate changes from SLING-2920</title>
                <link>https://issues.apache.org/jira/browse/SLING-5071</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Based on the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2920&quot; title=&quot;Wrong handling of Sling Filter ordering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2920&quot;&gt;&lt;del&gt;SLING-2920&lt;/del&gt;&lt;/a&gt;, the order of the I18NFilter needs to be adjusted as it is now significantly later in the filter stack.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12901063">SLING-5071</key>
            <summary>Adjust filter order for I18NFilter to accomodate changes from SLING-2920</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Sep 2015 16:47:26 +0000</created>
                <updated>Mon, 22 Feb 2016 10:09:34 +0000</updated>
                            <resolved>Mon, 28 Sep 2015 16:48:52 +0000</resolved>
                                                    <fixVersion>i18n 2.4.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14933553" author="justinedelson" created="Mon, 28 Sep 2015 16:48:52 +0000"  >&lt;p&gt;fixed in r1705720&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12901066">SLING-5072</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2md3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5070] ServletResolverCacheMBeanImpl throws NPE when cache is disabled</title>
                <link>https://issues.apache.org/jira/browse/SLING-5070</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When setting the cache size configuration of SlingServletResolver to a value &amp;lt; 5 the cache will be disabled and therefor the member will be null. This causes a NPE in the MBean. So either the MBean is able to handle this or it will not be registered in that case.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        at org.apache.sling.servlets.resolver.internal.SlingServletResolver$ServletResolverCacheMBeanImpl.getCacheSize(SlingServletResolver.java:1383)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:497)
        at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:71)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:497)
        at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:275)
        at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:112)
        at com.sun.jmx.mbeanserver.StandardMBeanIntrospector.invokeM2(StandardMBeanIntrospector.java:46)
        at com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:237)
        at com.sun.jmx.mbeanserver.PerInterface.getAttribute(PerInterface.java:83)
        at com.sun.jmx.mbeanserver.MBeanSupport.getAttribute(MBeanSupport.java:206)
        at javax.management.StandardMBean.getAttribute(StandardMBean.java:372)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:647)
        ... 67 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12901033">SLING-5070</key>
            <summary>ServletResolverCacheMBeanImpl throws NPE when cache is disabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Sep 2015 14:39:45 +0000</created>
                <updated>Mon, 5 Oct 2015 10:42:02 +0000</updated>
                            <resolved>Mon, 28 Sep 2015 15:39:02 +0000</resolved>
                                    <version>Servlets Resolver 2.3.6</version>
                                    <fixVersion>Servlets Resolver 2.3.8</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14933444" author="githubbot" created="Mon, 28 Sep 2015 15:29:33 +0000"  >&lt;p&gt;GitHub user Buuhuu opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/102&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5070&quot; title=&quot;ServletResolverCacheMBeanImpl throws NPE when cache is disabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5070&quot;&gt;&lt;del&gt;SLING-5070&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    As workaround for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5068&quot; title=&quot;perThreadScriptResolver is shared between multiple Threads causing ISE in ResourceResolverImpl&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5068&quot;&gt;&lt;del&gt;SLING-5068&lt;/del&gt;&lt;/a&gt; we set the cache size of SlingServletResolver to 0 to prevent it from caching servlets. We mentioned that there is a NPE thrown by the MBean implementation because the cache member field is null. This fixes the problem by not registering the MBean when the cache size is 0.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/Buuhuu/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Buuhuu/sling&lt;/a&gt; trunk&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/102.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/102.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #102&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit aee84f800124fda2b3de374070ba92ccbf905294&lt;br/&gt;
Author: Dirk Rudolph &amp;lt;diru91@googlemail.com&amp;gt;&lt;br/&gt;
Date:   2015-09-04T15:03:03Z&lt;/p&gt;

&lt;p&gt;    Merge pull request #1 from apache/trunk&lt;/p&gt;

&lt;p&gt;    Sync Fork&lt;/p&gt;

&lt;p&gt;commit f7825f1481b1fbdad6d2863617f9679e8595c844&lt;br/&gt;
Author: Dirk Rudolph &amp;lt;dirk.rudolph@netcentric.biz&amp;gt;&lt;br/&gt;
Date:   2015-09-28T15:23:07Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5070&quot; title=&quot;ServletResolverCacheMBeanImpl throws NPE when cache is disabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5070&quot;&gt;&lt;del&gt;SLING-5070&lt;/del&gt;&lt;/a&gt;: check the cacheSize before registering the SlingServletResolverMBean and register it only when there is a cache present.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14933457" author="cziegeler" created="Mon, 28 Sep 2015 15:39:02 +0000"  >&lt;p&gt;Thanks for your patch, it&apos;s applied&lt;br/&gt;
I&apos;ve also made sure that the mbean would not throw an NPE if registered&lt;/p&gt;</comment>
                            <comment id="14933503" author="githubbot" created="Mon, 28 Sep 2015 16:11:49 +0000"  >&lt;p&gt;Github user Buuhuu closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/102&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/102&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mcxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5069] Huge delta reported between sling request log and the SlingMainServlet</title>
                <link>https://issues.apache.org/jira/browse/SLING-5069</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Intermittently during load we see a huge delta between the time reported when the request was received in request log and the thread name which is setup in SlingMainServlet service method:&lt;/p&gt;

&lt;p&gt;// set the thread name according to the request&lt;br/&gt;
String threadName = setThreadName(request);&lt;/p&gt;

&lt;p&gt;I am not sure what is holding the thread or any syncronization issues before request reaches the SlingMainServlet.&lt;/p&gt;

&lt;p&gt;Ex:&lt;br/&gt;
Request.log: The request is received at 08:59:07&lt;/p&gt;

&lt;p&gt;28/Sep/2015:08:59:07 &lt;del&gt;0400 &lt;span class=&quot;error&quot;&gt;&amp;#91;e6bd04c5-733b-49f6-a188-2abad60ded2a&amp;#93;&lt;/span&gt; GET /content/audit/us/en/member/research/study/15/2016-audit-plan-hot-spots.html?referrerTitle=Home%20&lt;/del&gt;%20Member%20-%20CEB%20Audit%20Leadership%20Council&amp;amp;utm_campaign=ADR-amkaur-2015.09.28-GLOBAL-M-B-Daily-NL-Team-70134000001PwnpAAC&amp;amp;utm_medium=email&amp;amp;utm_source=Eloqua HTTP/1.1 smpascar@sanitas.es 200 text/html; charset=utf-8 13416ms &lt;/p&gt;

&lt;p&gt;Other log files:&lt;br/&gt;
The thread name longtime is 1443445160351: 08:59:20 . There is a 13sec delta&lt;br/&gt;
28.09.2015 08:59:20.850 &lt;b&gt;DEBUG&lt;/b&gt; [10.111.2.67 &lt;span class=&quot;error&quot;&gt;&amp;#91;1443445160351&amp;#93;&lt;/span&gt; GET /content/audit/us/en/member/research/study/15/2016-audit-plan-hot-spots.html HTTP/1.1] com.ceb.webcq.services.integrations.sbws.session.impl.CebLoggingInInterceptor org.perf4j.TimingLogger e6bd04c5-733b-49f6-a188-2abad60ded2a start&lt;span class=&quot;error&quot;&gt;&amp;#91;1443445160694&amp;#93;&lt;/span&gt; time&lt;span class=&quot;error&quot;&gt;&amp;#91;156&amp;#93;&lt;/span&gt; tag&lt;span class=&quot;error&quot;&gt;&amp;#91;IUserProfileWebService:GetNotifications&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;This happens several times may be around one in 1000 request or so.&lt;/p&gt;</description>
                <environment>Windows 2012 </environment>
        <key id="12901023">SLING-5069</key>
            <summary>Huge delta reported between sling request log and the SlingMainServlet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bakshinder">Bakshinder Singh</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Sep 2015 13:50:31 +0000</created>
                <updated>Tue, 15 Mar 2022 12:05:22 +0000</updated>
                            <resolved>Tue, 15 Mar 2022 12:05:22 +0000</resolved>
                                    <version>Engine 2.4.2</version>
                                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mcv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5068] perThreadScriptResolver is shared between multiple Threads causing ISE in ResourceResolverImpl</title>
                <link>https://issues.apache.org/jira/browse/SLING-5068</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We are building a single page application that loads small markup pieces in several subsequent requests. For each request the same rendering applies and so the same script is used.&lt;/p&gt;

&lt;p&gt;When cleaning the ServletResolvers internal cache we get a lot of ISE (&quot;Resource resolver is already closed&quot;) which seems to be because the ResourceResolver is used in multiple Threads. &lt;/p&gt;

&lt;p&gt;The problem seems to be that the first request creates an entry in the servlet resolvers cache with a servlet that sets the perThreadScriptResolver of this request/thread to the context. This entry is reused in another thread. When now the first one finishes the processing the perThreadScriptResolver gets closed in the onEvent method of ServletResolver but is still used in the ScriptContext of another Thread. &lt;/p&gt;

&lt;p&gt;See the attached Exceptions we got by adding some trace logging to the ResourceResolverImpl (1.2.4). It proves that it is the perThreadScriptResolver and not the shared one that causes the problem.&lt;/p&gt;</description>
                <environment>We are facing the following issue with AEM 6.1 build on top of Servlet Resolver 2.3.6.</environment>
        <key id="12901020">SLING-5068</key>
            <summary>perThreadScriptResolver is shared between multiple Threads causing ISE in ResourceResolverImpl</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Sep 2015 13:33:46 +0000</created>
                <updated>Mon, 5 Oct 2015 10:41:04 +0000</updated>
                            <resolved>Tue, 29 Sep 2015 10:27:10 +0000</resolved>
                                    <version>Servlets Resolver 2.3.6</version>
                                    <fixVersion>Servlets Resolver 2.3.8</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14933304" author="cziegeler" created="Mon, 28 Sep 2015 13:45:33 +0000"  >&lt;p&gt;Looking at the code, I currently fail where this could happen within the resolving. Would it be possible to attach a test?&lt;/p&gt;</comment>
                            <comment id="14933314" author="diru" created="Mon, 28 Sep 2015 13:55:02 +0000"  >&lt;p&gt;I will have a look how to implement an integration test for that. Unfortunately I think it will not be possible to reproduce this with an Unit test.&lt;/p&gt;

&lt;p&gt;Think about the following timeline:&lt;/p&gt;

&lt;p&gt;1) Request A calls resolution of Servlet A with ScriptResource using ResourceResolver (clone of shared RR) of Request A&lt;br/&gt;
2) Request B calls resolution of Servlet A and gets the cached one from 1) because Request A is still processed&lt;br/&gt;
3) Request B sets ATTR_SCRIPT_RESOURCE_RESOLVER of ScriptContext to ResourceResolver of scriptResource which is the ResourceResolver of Request A&lt;br/&gt;
4) Request A finishes and RR cloned from shared RR gets closed&lt;br/&gt;
5) Request B accesses ATTR_SCRIPT_RESOURCE_RESOLVER stored in ScriptContext =&amp;gt; Exception&lt;/p&gt;
</comment>
                            <comment id="14933320" author="cziegeler" created="Mon, 28 Sep 2015 13:59:20 +0000"  >&lt;p&gt;Yes, thanks  - I was just further looking into the code and stumbled across ATTR_SCRIPT_RESOURCE_RESOLVER which seems really to be the problematic part. Not sure yet how we can solve this&lt;/p&gt;</comment>
                            <comment id="14933325" author="diru" created="Mon, 28 Sep 2015 14:01:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;: What about implementing a special case for getAttribute() for this attribute which then consumes a WeakReference instead of hard reference? When the reference disappears we can easily get the shared RR from the script resource by calling getResourceResolver again?&lt;/p&gt;</comment>
                            <comment id="14933328" author="cziegeler" created="Mon, 28 Sep 2015 14:05:45 +0000"  >&lt;p&gt;We somehow have to make sure that ATTR_SCRIPT_RESOURCE_RESOLVER  is set to the per thread resource resolver&lt;/p&gt;</comment>
                            <comment id="14933334" author="diru" created="Mon, 28 Sep 2015 14:08:27 +0000"  >&lt;p&gt;Did you mean &quot;not set to the per thread resource resolver&quot;? Because currently, as far as I understood this, its set the the per thread resource resolver which is then closed by another thread. So it should be the shared one in each case?&lt;/p&gt;</comment>
                            <comment id="14933338" author="cziegeler" created="Mon, 28 Sep 2015 14:11:16 +0000"  >&lt;p&gt;The DefaultSlingScript has no access to the per thread RR - as far as I know. I think we could maybe solve this by setting the request attribute directly when the servlet gets resolved for a request and let it stay there instead of setting it in DefaultSlingScript&lt;/p&gt;</comment>
                            <comment id="14933363" author="cziegeler" created="Mon, 28 Sep 2015 14:30:35 +0000"  >&lt;p&gt;If I see it correctly, this is what happens:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;first request for servlet A comes in, servlet A gets instanciated with the per thread RR of that thread&lt;/li&gt;
	&lt;li&gt;for that request ATTR_SCRIPT_RESOURCE_RESOLVER is set to the per threat RR&lt;/li&gt;
	&lt;li&gt;for every other request, ATTR_SCRIPT_RESOURCE_RESOLVER is set to exactly that per threat RR as well&lt;br/&gt;
If we move setting ATTR_SCRIPT_RESOURCE_RESOLVER out of the DefaultSlingScript (which is shared singleton) we can set it to the correct per thread RR on each request. I hope I did not overlook the something&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14933367" author="diru" created="Mon, 28 Sep 2015 14:33:36 +0000"  >&lt;p&gt;I agree. But do we have access to ScriptContext/Bindings somewhere else? From architectural point of view it makes sense to set &quot;servlet resolution specific&quot; bindings after servlet resolution.&lt;/p&gt;</comment>
                            <comment id="14933381" author="diru" created="Mon, 28 Sep 2015 14:42:47 +0000"  >&lt;p&gt;A simple workaround is setting the SlingServletResolver cache size to 0. But keep in mind that there will be noticeable performance decrease.&lt;/p&gt;</comment>
                            <comment id="14933394" author="cziegeler" created="Mon, 28 Sep 2015 14:48:47 +0000"  >&lt;p&gt;Ah right, it&apos;s a context attribute not a request attribute. So it might get tricky.&lt;br/&gt;
The first idea which comes to my mind is:&lt;br/&gt;
When a servlet resource is resolved, we wrap the resource before it gets adapted to a servlet, this way we can control what is returned as getResourceResolver from that resource. &lt;/p&gt;</comment>
                            <comment id="14933401" author="diru" created="Mon, 28 Sep 2015 14:50:31 +0000"  >&lt;p&gt;This is already done with the ScriptResource in SlingServletResolver#getServlet(). But the returned Servlet is shared between threads.&lt;/p&gt;</comment>
                            <comment id="14933414" author="cziegeler" created="Mon, 28 Sep 2015 15:00:45 +0000"  >&lt;p&gt;Ah, right - I start to remember this stuff &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
The problem is that this resource - while using a thread local - is not using the same thread local as SlingServletResolver, therefore as soon as another thread is using this resource, the thread local will return null and it switches to the shared resource resolver&lt;/p&gt;</comment>
                            <comment id="14933420" author="diru" created="Mon, 28 Sep 2015 15:03:24 +0000"  >&lt;p&gt;Yes. In case the perThreadScriptResolver is null (WeakReference disappeared) or not alive anymore the shared one is returned by getResourceResolver(). Thats why I suggested to use the same approach for the attribute in the ScriptContext itself. &lt;/p&gt;

&lt;p&gt;Just tested this ... not working as expected &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14933434" author="cziegeler" created="Mon, 28 Sep 2015 15:19:42 +0000"  >&lt;p&gt;Lets assume, the servlet was created in Thread A, then the thread local in the ScriptResource contains a value for Thread A.&lt;br/&gt;
Therefore if now thread B hits that servlet, the thread local returns null and it switches to the shared one.&lt;br/&gt;
A simple test would be to pass in the perThreadScriptResolver thread local from the SlingServletResolver to the ScriptResource and use that one &lt;/p&gt;</comment>
                            <comment id="14933447" author="diru" created="Mon, 28 Sep 2015 15:32:34 +0000"  >&lt;p&gt;Currently there is no ThreadLocal in ScriptResource. &lt;/p&gt;

&lt;p&gt;So you suggest to instead of using a WeakReference we use a ThreadLoacel to refer to the perThreadScriptResolver and in case it is not set we return the shared one. Sounds good, will give it a try. &lt;/p&gt;

&lt;p&gt;Or even better: we make the resource it self ThreadLocal. If not set we set it using path and shared RR.&lt;/p&gt;</comment>
                            <comment id="14933476" author="cziegeler" created="Mon, 28 Sep 2015 15:50:06 +0000"  >&lt;p&gt;Sounds like a solution&lt;/p&gt;</comment>
                            <comment id="14933480" author="diru" created="Mon, 28 Sep 2015 15:54:04 +0000"  >&lt;p&gt;Works with a small modification. Because of thread reuse (I guess) there has been a resource in the ThreadLocal which had the perThreadScriptResolver which was closed by a already finished request (some minutes ago). So I checked both existence and state of the ResourceResolver.&lt;/p&gt;</comment>
                            <comment id="14933514" author="diru" created="Mon, 28 Sep 2015 16:19:00 +0000"  >&lt;p&gt;The attached patch uses a ThreadLocal for the Resource.&lt;/p&gt;

&lt;p&gt;In case the ScriptResource is accessed from another thread the ThreadLocal is unset and gets set to a Resource returned by the shared Resource Resolver&lt;/p&gt;

&lt;p&gt;In case the ScriptResource is accessed from the thread that created it the Resource gets verified to ensure the ResourceResolver is still alive. If not the shared ResourceResolver will be used to fetch the resource again.&lt;/p&gt;</comment>
                            <comment id="14933565" author="cziegeler" created="Mon, 28 Sep 2015 16:56:32 +0000"  >&lt;p&gt;Thanks for the patch, I think it does the trick.&lt;br/&gt;
But &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I&apos;m wondering if we could change this a little bit: right now the shared RR is used for every thread which is not the original thread - which means in most of the cases. I think if we pass in the thread local from the script resolver, we can in almost all cases use the per thread resolver, reducing the contention on the shared one. WDYT?&lt;/p&gt;</comment>
                            <comment id="14933635" author="diru" created="Mon, 28 Sep 2015 17:31:28 +0000"  >&lt;p&gt;The problem I see is, that the Servlet is cached globally and therefor the ScriptResource as well. So we have to change the cache to only cache the Path of the Resource and get the Resource from the perThreadScriptResolver each time. I have no idea how much this will impact the resolution performance. &lt;/p&gt;

&lt;p&gt;Additionally its not ThreadLocal but &quot;RequestLocal&quot; cause of potential Thread reuse depending on the (configuration of) the servlet container used. &lt;/p&gt;

&lt;p&gt;WDYT, would it make sense to cache the Servlet resource path only and adapt the Resource returned from preThreadScriptResolver to Servlet each time?&lt;/p&gt;</comment>
                            <comment id="14933822" author="cziegeler" created="Mon, 28 Sep 2015 19:10:49 +0000"  >&lt;p&gt;I&apos;ve attached an alternative patch - not sure if it is the best solution though&lt;/p&gt;</comment>
                            <comment id="14933875" author="diru" created="Mon, 28 Sep 2015 19:49:19 +0000"  >&lt;p&gt;Makes sense. It reduces the overhead of having a per thread copy of the Resource in Heap for each of the ScriptResource objects.&lt;/p&gt;</comment>
                            <comment id="14934662" author="cziegeler" created="Tue, 29 Sep 2015 05:42:04 +0000"  >&lt;p&gt;Ok, I&apos;ve committed this version. I&apos;ll keep this issue open a little bit to gather potential additional feedback&lt;/p&gt;</comment>
                            <comment id="14934787" author="diru" created="Tue, 29 Sep 2015 07:25:37 +0000"  >&lt;p&gt;I can confirm that the solution is working for my use case. Many thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14934973" author="cziegeler" created="Tue, 29 Sep 2015 10:27:27 +0000"  >&lt;p&gt;Thanks, so I&apos;ll set this to resolved now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12770093">SLING-4352</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12764018" name="error-stacktrace.txt" size="3854" author="diru" created="Mon, 28 Sep 2015 13:41:03 +0000"/>
                            <attachment id="12764019" name="opened-and-closed-trace.txt" size="12887" author="diru" created="Mon, 28 Sep 2015 13:42:06 +0000"/>
                            <attachment id="12764072" name="sling-5068-2.patch" size="5451" author="cziegeler" created="Mon, 28 Sep 2015 19:10:23 +0000"/>
                            <attachment id="12764040" name="sling-5068.patch" size="2434" author="diru" created="Mon, 28 Sep 2015 16:19:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mcuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5066] sling-mock: Close ResourceResolver on JUnit test tearDown</title>
                <link>https://issues.apache.org/jira/browse/SLING-5066</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the resource resolver instance that is opened automatically by the SlingContext JUnit rule has to be closed when the rule run was completed.&lt;br/&gt;
this is important if one of the &quot;real&quot; repos JCR_JACKRABBIT or JCR_OAK are used.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12896643">SLING-5066</key>
            <summary>sling-mock: Close ResourceResolver on JUnit test tearDown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Sun, 27 Sep 2015 07:13:41 +0000</created>
                <updated>Sun, 27 Sep 2015 07:16:21 +0000</updated>
                            <resolved>Sun, 27 Sep 2015 07:16:21 +0000</resolved>
                                    <version>Testing Sling Mock 1.5.0</version>
                                    <fixVersion>Testing Sling Mock 1.6.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14909642" author="sseifert@pro-vision.de" created="Sun, 27 Sep 2015 07:16:21 +0000"  >&lt;p&gt;Completed: At revision: 1705510  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lltr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5065] ResourceResolver not resolving any resources</title>
                <link>https://issues.apache.org/jira/browse/SLING-5065</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I use following code to get a resource on a vanilla sling launchpad, but the resource returned is null. When using the getAdmininistrativeResourceResolver(null), everything works fine, but I would like a resource resolver bound to the rights of a user.&lt;/p&gt;

&lt;p&gt;Code: &lt;/p&gt;

&lt;p&gt;final Credentials creds = new SimpleCredentials(&quot;admin&quot;,&quot;admin&quot;.toCharArray());&lt;br/&gt;
Session session = session = slingRepository.login(creds); &lt;br/&gt;
Map&amp;lt;String, Object&amp;gt; authenticationInfo = new HashMap&amp;lt;String, Object&amp;gt;();&lt;br/&gt;
 authenticationInfo.put(JcrResourceConstants.AUTHENTICATION_INFO_SESSION, session);&lt;br/&gt;
ResourceResolver resourceResolver = resourceResolverFactory.getResourceResolver(authenticationInfo);&lt;br/&gt;
Resource resource = resourceResolver.getResource(&quot;/&quot;);&lt;/p&gt;</description>
                <environment></environment>
        <key id="12896604">SLING-5065</key>
            <summary>ResourceResolver not resolving any resources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="royteeuwen">Roy Teeuwen</reporter>
                        <labels>
                    </labels>
                <created>Sat, 26 Sep 2015 16:26:29 +0000</created>
                <updated>Fri, 14 Apr 2023 13:29:31 +0000</updated>
                            <resolved>Fri, 14 Apr 2023 13:29:31 +0000</resolved>
                                    <version>API 2.9.0</version>
                                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lll3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5062] Apache Sling Distribution Core bundle installation is not successful.</title>
                <link>https://issues.apache.org/jira/browse/SLING-5062</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After I install from sling/contrib/extensions/distribution/core (downloaded from &lt;a href=&quot;https://github.com/apache/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling&lt;/a&gt; ) , by running the command, &lt;br/&gt;
mvn -PautoInstallBundle clean install -Dsling.url=&lt;a href=&quot;http://localhost:8080/system/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;the build is successful. However, when I go to &lt;a href=&quot;http://localhost:8080/system/console/bundles&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/bundles&lt;/a&gt; for org.apache.sling.distribution.core, the error is shown below. &lt;/p&gt;

&lt;p&gt;What do I need to resolve these issues? &lt;/p&gt;

&lt;p&gt;Thx, &lt;/p&gt;

&lt;p&gt;org.apache.jackrabbit.vault.fs.api,version=[2.4,3) &amp;#8211; Cannot be resolved&lt;br/&gt;
org.apache.jackrabbit.vault.fs.config,version=[2.4,3) &amp;#8211; Cannot be resolved&lt;br/&gt;
org.apache.jackrabbit.vault.fs.filter,version=[2.4,3) &amp;#8211; Cannot be resolved&lt;br/&gt;
org.apache.jackrabbit.vault.fs.io,version=[2.4,3) &amp;#8211; Cannot be resolved&lt;br/&gt;
org.apache.jackrabbit.vault.packaging,version=[2.4,3) &amp;#8211; Cannot be resolved&lt;br/&gt;
...&lt;br/&gt;
org.apache.sling.hc.api,version=[1.0,2) &amp;#8211; Cannot be resolved&lt;br/&gt;
org.apache.sling.hc.util,version=[1.0,2) &amp;#8211; Cannot be resolved&lt;/p&gt;</description>
                <environment></environment>
        <key id="12896277">SLING-5062</key>
            <summary>Apache Sling Distribution Core bundle installation is not successful.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vganesh">Venkat Ganesh</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Sep 2015 00:02:59 +0000</created>
                <updated>Fri, 25 Sep 2015 07:23:11 +0000</updated>
                            <resolved>Fri, 25 Sep 2015 06:41:39 +0000</resolved>
                                                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14907274" author="vganesh" created="Fri, 25 Sep 2015 00:05:46 +0000"  >&lt;p&gt;Screen shots with the errors in console bundle window. &lt;/p&gt;</comment>
                            <comment id="14907298" author="vganesh" created="Fri, 25 Sep 2015 00:31:20 +0000"  >&lt;p&gt;I saw this error in the console: &lt;/p&gt;

&lt;p&gt;Attempting to load validation.properties via the classpath.&lt;br/&gt;
SUCCESSFULLY LOADED validation.properties via the CLASSPATH from &apos;/ (root)&apos; using class loader for DefaultSecurityConfiguration class!&lt;br/&gt;
24.09.2015 16:48:39.886 &lt;b&gt;ERROR&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;FelixStartLevel&amp;#93;&lt;/span&gt; ERROR: Error starting/stopping bundle. (org.osgi.framework.BundleException: Unable to resolve org.apache.sling.distribution.core &lt;span class=&quot;error&quot;&gt;&amp;#91;118&amp;#93;&lt;/span&gt;(R 118.0): missing requirement [org.apache.sling.distribution.core &lt;span class=&quot;error&quot;&gt;&amp;#91;118&amp;#93;&lt;/span&gt;(R 118.0)] osgi.wiring.package; (&amp;amp;(osgi.wiring.package=org.apache.jackrabbit.vault.fs.api)(version&amp;gt;=2.4.0)(!(version&amp;gt;=3.0.0))) Unresolved requirements: [[org.apache.sling.distribution.core [118](R 118.0)] osgi.wiring.package; (&amp;amp;(osgi.wiring.package=org.apache.jackrabbit.vault.fs.api)(version&amp;gt;=2.4.0)(!(version&amp;gt;=3.0.0)))])&lt;br/&gt;
org.osgi.framework.BundleException: Unable to resolve org.apache.sling.distribution.core &lt;span class=&quot;error&quot;&gt;&amp;#91;118&amp;#93;&lt;/span&gt;(R 118.0): missing requirement [org.apache.sling.distribution.core &lt;span class=&quot;error&quot;&gt;&amp;#91;118&amp;#93;&lt;/span&gt;(R 118.0)] osgi.wiring.package; (&amp;amp;(osgi.wiring.package=org.apache.jackrabbit.vault.fs.api)(version&amp;gt;=2.4.0)(!(version&amp;gt;=3.0.0))) Unresolved requirements: [[org.apache.sling.distribution.core [118](R 118.0)] osgi.wiring.package; (&amp;amp;(osgi.wiring.package=org.apache.jackrabbit.vault.fs.api)(version&amp;gt;=2.4.0)(!(version&amp;gt;=3.0.0)))]&lt;br/&gt;
	at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:4114)&lt;br/&gt;
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2111)&lt;br/&gt;
	at org.apache.felix.framework.Felix.setBundleStartLevel(Felix.java:1557)&lt;br/&gt;
	at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:338)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:745)&lt;/p&gt;

&lt;p&gt;vault.version is 3.0.0: &lt;/p&gt;

&lt;p&gt;/Users/vganesh/git/slingClone/sling/contrib/extensions/distribution/core&lt;br/&gt;
$ find ~/git/slingClone/ -name pom.xml -exec grep vault.version {} \; 2&amp;gt;/dev/null &lt;br/&gt;
                            &amp;lt;version&amp;gt;${vault.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
                            &amp;lt;version&amp;gt;${vault.version}&amp;lt;/version&amp;gt;&lt;br/&gt;
        &amp;lt;vault.version&amp;gt;3.0.0&amp;lt;/vault.version&amp;gt;&lt;br/&gt;
/Users/vganesh/git/slingClone/sling/contrib/extensions/distribution/core&lt;/p&gt;
</comment>
                            <comment id="14907697" author="rombert" created="Fri, 25 Sep 2015 06:41:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vganesh&quot; class=&quot;user-hover&quot; rel=&quot;vganesh&quot;&gt;vganesh&lt;/a&gt; - you&apos;re missing some bundles from your launchpad, I think you need Jackrabbbit Filevault and the Sling Healthchecks.&lt;/p&gt;

&lt;p&gt;But please post on user@sling.apache.org with questions regarding how to use bundles.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="14907738" author="mpetria" created="Fri, 25 Sep 2015 07:23:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vganesh&quot; class=&quot;user-hover&quot; rel=&quot;vganesh&quot;&gt;vganesh&lt;/a&gt; you can find the additional bundles that need to be installed in order for distribution to start in the integration tests setup of distribution.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/contrib/extensions/distribution/it/pom.xml#L281&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/contrib/extensions/distribution/it/pom.xml#L281&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12762276" name="ScreenShot1.png" size="827348" author="vganesh" created="Fri, 25 Sep 2015 00:05:46 +0000"/>
                            <attachment id="12762275" name="ScreenShot2.png" size="870737" author="vganesh" created="Fri, 25 Sep 2015 00:05:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ljkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5061] [HApi] HApiType.getUrl() should be an absolute URL</title>
                <link>https://issues.apache.org/jira/browse/SLING-5061</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The Hypermedia API tools HApiType.getUrl() should return an absolute resolvable URL. In its current implementation, it&apos;s used to add a URL to the &lt;em&gt;itemtype&lt;/em&gt; attribute in microdata, and the spec says the URL should be absolute.&lt;/p&gt;

&lt;p&gt;The fix allows an OSGi config with an &lt;em&gt;external url&lt;/em&gt; that gets prepended to the repository path + extension.&lt;/p&gt;

&lt;p&gt;Patch attached&lt;/p&gt;</description>
                <environment></environment>
        <key id="12896084">SLING-5061</key>
            <summary>[HApi] HApiType.getUrl() should be an absolute URL</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="andrei.dulvac">Andrei Dulvac</reporter>
                        <labels>
                            <label>PatchAvailable</label>
                    </labels>
                <created>Thu, 24 Sep 2015 11:39:03 +0000</created>
                <updated>Fri, 5 Feb 2016 15:54:27 +0000</updated>
                            <resolved>Fri, 25 Sep 2015 13:30:34 +0000</resolved>
                                                    <fixVersion>HApi 1.0.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14906233" author="andrei.dulvac" created="Thu, 24 Sep 2015 11:42:34 +0000"  >&lt;p&gt;Attached patch. Can be applied with &lt;br/&gt;
patch -p0 -i &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5061&quot; title=&quot;[HApi] HApiType.getUrl() should be an absolute URL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5061&quot;&gt;&lt;del&gt;SLING-5061&lt;/del&gt;&lt;/a&gt;.git.patch&lt;/p&gt;</comment>
                            <comment id="14908033" author="bdelacretaz" created="Fri, 25 Sep 2015 13:30:34 +0000"  >&lt;p&gt;Thanks for your patch, I have applied it in &lt;a href=&quot;http://svn.apache.org/r1705296&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1705296&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12762133" name="SLING-5061.git.patch" size="6059" author="andrei.dulvac" created="Thu, 24 Sep 2015 11:42:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lie7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5059] PathNotFound in voting.toString() in test</title>
                <link>https://issues.apache.org/jira/browse/SLING-5059</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following Exception occurred during a &lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2308/testReport/junit/org.apache.sling.discovery.impl.cluster/ClusterTest/testConnectorSwitching4139/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;test&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.RuntimeException: Exception occurred: javax.jcr.PathNotFoundException: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/discovery/clusterC/ongoingVotings/430071f7-05b9-4a29-9682-a12b49b84b10/members
	at org.apache.jackrabbit.core.ItemManager.getNode(ItemManager.java:577)
	at org.apache.jackrabbit.core.session.SessionItemOperation$6.perform(SessionItemOperation.java:129)
	at org.apache.jackrabbit.core.session.SessionItemOperation$6.perform(SessionItemOperation.java:125)
	at org.apache.jackrabbit.core.session.SessionItemOperation.perform(SessionItemOperation.java:187)
	at org.apache.jackrabbit.core.session.SessionState.perform(SessionState.java:200)
	at org.apache.jackrabbit.core.SessionImpl.perform(SessionImpl.java:355)
	at org.apache.jackrabbit.core.SessionImpl.getNode(SessionImpl.java:1054)
	at org.apache.sling.discovery.impl.setup.MockedResource.adaptTo(MockedResource.java:94)
	at org.apache.sling.discovery.impl.setup.MockedResourceResolver.listChildren(MockedResourceResolver.java:161)
	at org.apache.sling.api.resource.AbstractResource.listChildren(AbstractResource.java:93)
	at org.apache.sling.api.resource.AbstractResource$1.iterator(AbstractResource.java:103)
	at org.apache.sling.discovery.impl.cluster.voting.VotingView.toString(VotingView.java:140)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.valueOf(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.java:2854)
	at java.lang.StringBuilder.append(StringBuilder.java:128)
	at org.apache.sling.discovery.impl.cluster.voting.VotingHelper.getWinningVoting(VotingHelper.java:168)
	at org.apache.sling.discovery.impl.common.heartbeat.HeartbeatHandler.doCheckView(HeartbeatHandler.java:512)
	at org.apache.sling.discovery.impl.common.heartbeat.HeartbeatHandler.checkView(HeartbeatHandler.java:482)
	at org.apache.sling.discovery.impl.common.heartbeat.HeartbeatHandler.run(HeartbeatHandler.java:250)
	at org.apache.sling.discovery.impl.setup.Instance.runHeartbeatOnce(Instance.java:554)
	at org.apache.sling.discovery.impl.cluster.ClusterTest.runHeartbeatOnceWith(ClusterTest.java:584)
	at org.apache.sling.discovery.impl.cluster.ClusterTest.testConnectorSwitching4139(ClusterTest.java:331)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;plus some logging info:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;22.09.2015 20:11:26 *INFO * [ObservationManager] 6bd57876-1c34-4707-a45f-49a8ae3af0de: promote: promote to &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; established node /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/discovery/clusterC/establishedView/430071f7-05b9-4a29-9682-a12b49b84b10
22.09.2015 20:11:26 *DEBUG* [ObservationManager] 6bd57876-1c34-4707-a45f-49a8ae3af0de: promote: done with promotiong. saving.
22.09.2015 20:11:26 *INFO * [pool-1-thread-4] HeartbeatHandler: doCheckView: votingHandler is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;! slingId=bdf3f1c9-7e61-4365-90ef-1eb385b9e1a4
22.09.2015 20:11:26 *ERROR* [main] MockedResource: Exception occurred: javax.jcr.PathNotFoundException: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/discovery/clusterC/ongoingVotings/430071f7-05b9-4a29-9682-a12b49b84b10/members
javax.jcr.PathNotFoundException: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/discovery/clusterC/ongoingVotings/430071f7-05b9-4a29-9682-a12b49b84b10/members
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this means that the log.debug in &lt;tt&gt;getWinningVoting&lt;/tt&gt; was trying to do a toString while the view was being promoted and fails as it has just been moved.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12896070">SLING-5059</key>
            <summary>PathNotFound in voting.toString() in test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Sep 2015 10:40:40 +0000</created>
                <updated>Wed, 30 Sep 2015 05:44:21 +0000</updated>
                            <resolved>Thu, 24 Sep 2015 10:42:08 +0000</resolved>
                                    <version>Discovery Impl 1.1.6</version>
                                    <fixVersion>Discovery Impl 1.1.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14906186" author="egli" created="Thu, 24 Sep 2015 10:42:08 +0000"  >&lt;p&gt;fixed in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1705026&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1705026&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lib3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5057] Support HttpServletRequest#getRemoteUser</title>
                <link>https://issues.apache.org/jira/browse/SLING-5057</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12896050">SLING-5057</key>
            <summary>Support HttpServletRequest#getRemoteUser</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Sep 2015 09:35:46 +0000</created>
                <updated>Thu, 24 Sep 2015 09:38:55 +0000</updated>
                            <resolved>Thu, 24 Sep 2015 09:38:55 +0000</resolved>
                                    <version>Testing Sling Mock 1.5.0</version>
                                    <fixVersion>Testing Sling Mock 1.6.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14906111" author="rombert" created="Thu, 24 Sep 2015 09:38:55 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1705021&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1705021&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2li6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5056] FAILED distribution response states are reported as succesful</title>
                <link>https://issues.apache.org/jira/browse/SLING-5056</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;During &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5047&quot; title=&quot;Support differentiated distribution response type for missing agent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5047&quot;&gt;&lt;del&gt;SLING-5047&lt;/del&gt;&lt;/a&gt; a bug was introduced which causes failed distributions to be reported as successful.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/commit/39649c3676fa22219bc3090c387482ad1fdab405&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/commit/39649c3676fa22219bc3090c387482ad1fdab405&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12895779">SLING-5056</key>
            <summary>FAILED distribution response states are reported as succesful</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Sep 2015 13:29:01 +0000</created>
                <updated>Thu, 24 Sep 2015 12:08:01 +0000</updated>
                            <resolved>Thu, 24 Sep 2015 12:07:37 +0000</resolved>
                                    <version>Content Distribution Core 0.1.8</version>
                                    <fixVersion>Content Distribution Core 0.1.8</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14906268" author="mpetria" created="Thu, 24 Sep 2015 12:07:38 +0000"  >&lt;p&gt;Committed revision 1705041.&lt;/p&gt;

&lt;p&gt;Fixed by returning isSuccesful only for DISTRIBUTED and ACCEPTED&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lgif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5055] [HApi] Potential infinite recursion on reading hapi type from a path</title>
                <link>https://issues.apache.org/jira/browse/SLING-5055</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The Hypermedia API tools could potentially enter an infinite recursion if a type defined in the sling repository has a property of the same type as the type being read.&lt;/p&gt;

&lt;p&gt;The problem is in HApiUtilImpl and the solution I found was to use the types cache before adding the parent and properties.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12895731">SLING-5055</key>
            <summary>[HApi] Potential infinite recursion on reading hapi type from a path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="andrei.dulvac">Andrei Dulvac</reporter>
                        <labels>
                            <label>PatchAvailable</label>
                    </labels>
                <created>Wed, 23 Sep 2015 09:56:00 +0000</created>
                <updated>Fri, 5 Feb 2016 15:54:09 +0000</updated>
                            <resolved>Wed, 23 Sep 2015 12:17:48 +0000</resolved>
                                                    <fixVersion>HApi 1.0.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14904310" author="andrei.dulvac" created="Wed, 23 Sep 2015 10:19:55 +0000"  >&lt;p&gt;Attached patch.&lt;/p&gt;</comment>
                            <comment id="14904412" author="andrei.dulvac" created="Wed, 23 Sep 2015 12:15:02 +0000"  >&lt;p&gt;Can be applied with patch -p1 -i &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5055&quot; title=&quot;[HApi] Potential infinite recursion on reading hapi type from a path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5055&quot;&gt;&lt;del&gt;SLING-5055&lt;/del&gt;&lt;/a&gt;.patch&lt;/p&gt;</comment>
                            <comment id="14904416" author="bdelacretaz" created="Wed, 23 Sep 2015 12:17:48 +0000"  >&lt;p&gt;Thanks for your patch, I have committed it in revision 1704829&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12761862" name="SLING-5055.patch" size="8197" author="andrei.dulvac" created="Wed, 23 Sep 2015 10:19:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lg7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5054] Rat plugin complains about testing/junit/teleporter</title>
                <link>https://issues.apache.org/jira/browse/SLING-5054</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;From &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/2310/:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/2310/:&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&amp;gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.rat:apache-rat-plugin:0.11:check (default) on project org.apache.sling.testing.reactor:&lt;br/&gt;
&amp;gt; Too many files with unapproved license: 5 See RAT report in: &amp;lt;&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/ws/trunk/testing/target/rat.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.7/ws/trunk/testing/target/rat.txt&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;Unapproved licenses:&lt;/p&gt;

&lt;p&gt;  /home/jenkins/jenkins-slave/workspace/sling-trunk-1.7/trunk/testing/teleporter/target/antrun/build-main.xml&lt;br/&gt;
  /home/jenkins/jenkins-slave/workspace/sling-trunk-1.7/trunk/testing/teleporter/target/rat.txt&lt;br/&gt;
  /home/jenkins/jenkins-slave/workspace/sling-trunk-1.7/trunk/testing/teleporter/target/.plxarc&lt;br/&gt;
  /home/jenkins/jenkins-slave/workspace/sling-trunk-1.7/trunk/testing/teleporter/target/maven-status/maven-compiler-plugin/compile/default-compile/inputFiles.lst&lt;br/&gt;
  /home/jenkins/jenkins-slave/workspace/sling-trunk-1.7/trunk/testing/teleporter/target/maven-status/maven-compiler-plugin/compile/default-compile/createdFiles.lst&lt;/p&gt;</description>
                <environment></environment>
        <key id="12895719">SLING-5054</key>
            <summary>Rat plugin complains about testing/junit/teleporter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Wed, 23 Sep 2015 08:43:11 +0000</created>
                <updated>Mon, 28 Sep 2015 10:04:33 +0000</updated>
                            <resolved>Wed, 23 Sep 2015 12:22:50 +0000</resolved>
                                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14904228" author="bdelacretaz" created="Wed, 23 Sep 2015 09:20:42 +0000"  >&lt;p&gt;testing/teleporter is the old location of that bundle, this looks like leftovers from previous builds in the Jenkins workspace.&lt;/p&gt;

&lt;p&gt;I have changed the job config to &quot;emulate clean checkout&quot;, let&apos;s see if that fixes it.&lt;/p&gt;</comment>
                            <comment id="14904418" author="bdelacretaz" created="Wed, 23 Sep 2015 12:22:50 +0000"  >&lt;p&gt;That was it, &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/2312/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/2312/&lt;/a&gt; passed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lg53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5052] NPE in DistributedEventSender</title>
                <link>https://issues.apache.org/jira/browse/SLING-5052</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following NPE has been noticed: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        at org.apache.sling.event.dea.impl.DistributedEventSender.runInBackground(DistributedEventSender.java:195)
        at org.apache.sling.event.dea.impl.DistributedEventSender.access$100(DistributedEventSender.java:54)
        at org.apache.sling.event.dea.impl.DistributedEventSender$1.run(DistributedEventSender.java:102)
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:722)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12895489">SLING-5052</key>
            <summary>NPE in DistributedEventSender</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Sep 2015 15:16:38 +0000</created>
                <updated>Thu, 26 Sep 2019 12:39:26 +0000</updated>
                            <resolved>Tue, 22 Sep 2015 16:21:28 +0000</resolved>
                                    <version>Distributed Event Admin 1.0.2</version>
                                    <fixVersion>Distributed Event Admin 1.0.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14902799" author="egli" created="Tue, 22 Sep 2015 15:21:15 +0000"  >&lt;p&gt;Attached a suggestion for a fix. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, wdyt?&lt;/p&gt;</comment>
                            <comment id="14902874" author="cziegeler" created="Tue, 22 Sep 2015 16:07:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; Lgtm&lt;/p&gt;</comment>
                            <comment id="14902895" author="egli" created="Tue, 22 Sep 2015 16:21:28 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1704664&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1704664&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12761665" name="SLING-5052.patch.txt" size="1204" author="stefanegli" created="Tue, 22 Sep 2015 15:21:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lepr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5051] RequestDispatcher forward breaks i18n</title>
                <link>https://issues.apache.org/jira/browse/SLING-5051</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I just noticed that on AEM 6, in my Filter, when I call RequestDispatcher forward, i.e. request.getRequestDispatcher(...).forward(req, res);, it cause i18n to break. Here&apos;s a snippet of my codes:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
boolean filtered = false;&lt;/p&gt;

&lt;p&gt;SlingHttpServletRequest request = req instanceof SlingHttpServletRequest ? (SlingHttpServletRequest) req : null;&lt;br/&gt;
SlingHttpServletResponse response = res instanceof SlingHttpServletResponse ? (SlingHttpServletResponse) res : null;&lt;/p&gt;

&lt;p&gt;if (request != null &amp;amp;&amp;amp; response != null) {&lt;/p&gt;

&lt;p&gt;    // block of codes to resolve the request uri and get the new desired URI &lt;/p&gt;

&lt;p&gt;    if (this.resolvedUriResource != null) &lt;/p&gt;
{
        String uri = this.resolvedUriResource.getPath() + &quot;.html&quot;;
        RequestDispatcherOptions options = new RequestDispatcherOptions();
        options.setAddSelectors(uriSelectors);
        this.filterConfig.getServletContext().getRequestDispatcher(uri).forward(req, res); // OR
        //request.getRequestDispatcher(this.resolvedUriResource, options).forward(req, res);
        filtered = true;
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;if (!filtered) {&lt;br/&gt;
    chain.doFilter(req, res);&lt;br/&gt;
}&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;Obtain the package contained detailed codes here: &lt;a href=&quot;http://www.sotheanim.com/images/www.sotheanim.com/blog/aem61-i18n-issue-samplepackage.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.sotheanim.com/images/www.sotheanim.com/blog/aem61-i18n-issue-samplepackage.zip&lt;/a&gt; (/sixd/bundle/src/main/java/com/sixd/i18nissue/filter/PathResolutionFilter.java)&lt;/p&gt;</description>
                <environment>Adobe Experience Manager 6.1</environment>
        <key id="12895452">SLING-5051</key>
            <summary>RequestDispatcher forward breaks i18n</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nimsothea">Sothea Nim</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Sep 2015 13:34:21 +0000</created>
                <updated>Mon, 2 Nov 2015 20:50:26 +0000</updated>
                                                                            <component>General</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14985088" author="jsedding" created="Mon, 2 Nov 2015 11:38:30 +0000"  >&lt;p&gt;This is likely a symptom of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5071&quot; title=&quot;Adjust filter order for I18NFilter to accomodate changes from SLING-2920&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5071&quot;&gt;&lt;del&gt;SLING-5071&lt;/del&gt;&lt;/a&gt;, i.e. a problem with filter ordering. Your filter has &lt;tt&gt;service.ranking=0&lt;/tt&gt; while the I18nFilter before &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5071&quot; title=&quot;Adjust filter order for I18NFilter to accomodate changes from SLING-2920&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5071&quot;&gt;&lt;del&gt;SLING-5071&lt;/del&gt;&lt;/a&gt; has &lt;tt&gt;service.ranking=-700&lt;/tt&gt;. Provided the unfortunate change in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2920&quot; title=&quot;Wrong handling of Sling Filter ordering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2920&quot;&gt;&lt;del&gt;SLING-2920&lt;/del&gt;&lt;/a&gt; reversed the filter ordering (now in descending order), &lt;tt&gt;0&lt;/tt&gt; now comes before &lt;tt&gt;-700&lt;/tt&gt; and thus I18N is not yet initialized in your filter.&lt;/p&gt;

&lt;p&gt;You can update the I18N Bundle to  version 2.4.6 to restore a proper ordering (note in AEM 6.1 the &lt;tt&gt;service.ranking&lt;/tt&gt; of the I18nFilter is configured to -10000 in &lt;tt&gt;/libs/sling/config&lt;/tt&gt;), so take that into account. Please close this issue as duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5071&quot; title=&quot;Adjust filter order for I18NFilter to accomodate changes from SLING-2920&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5071&quot;&gt;&lt;del&gt;SLING-5071&lt;/del&gt;&lt;/a&gt; if this solves your problem.&lt;/p&gt;</comment>
                            <comment id="14986006" author="alexander.klimetschek" created="Mon, 2 Nov 2015 20:50:26 +0000"  >&lt;p&gt;You can also simply adjust the service ranking in your filter to be lower than the i18n filter. You can see the actual filter order at &lt;a href=&quot;http://localhost:4502/system/console/status-slingfilter&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/system/console/status-slingfilter&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[http://www.sotheanim.com/34-aem-6-1-filter-requestdispatcher-forward-breaks-i18n]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lehj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5050] Disable AntiSamy&apos;s default formatOutput policy directive</title>
                <link>https://issues.apache.org/jira/browse/SLING-5050</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;By default AntiSamy enables the &lt;tt&gt;formatOutput&lt;/tt&gt; policy directive [0], formatting markup sent to it. However this sometimes works against a developer&apos;s intention of outputting markup with Sightly.&lt;/p&gt;

&lt;p&gt;[0] - &lt;a href=&quot;https://owaspantisamy.googlecode.com/files/Developer%20Guide.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://owaspantisamy.googlecode.com/files/Developer%20Guide.pdf&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12895439">SLING-5050</key>
            <summary>Disable AntiSamy&apos;s default formatOutput policy directive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Sep 2015 12:59:12 +0000</created>
                <updated>Fri, 16 Jun 2017 10:12:20 +0000</updated>
                            <resolved>Wed, 23 Sep 2015 15:11:43 +0000</resolved>
                                    <version>XSS Protection API 1.0.4</version>
                                    <fixVersion>XSS Protection API 1.0.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14904630" author="radu.cotescu" created="Wed, 23 Sep 2015 15:11:43 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1704874&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1704874&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13079809">SLING-6959</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2leen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5046] Allow distribution requests with fine grained deepness specification</title>
                <link>https://issues.apache.org/jira/browse/SLING-5046</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12895059">SLING-5046</key>
            <summary>Allow distribution requests with fine grained deepness specification</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Sep 2015 08:17:58 +0000</created>
                <updated>Tue, 22 Sep 2015 12:42:13 +0000</updated>
                            <resolved>Mon, 21 Sep 2015 08:27:09 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.1.8</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14900378" author="mpetria" created="Mon, 21 Sep 2015 08:27:09 +0000"  >&lt;p&gt;Committed revision 1704234.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2lc2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5045] The new &apos;test&apos; user is not able to access slingshot page</title>
                <link>https://issues.apache.org/jira/browse/SLING-5045</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Get the latest apache sling code from &lt;a href=&quot;https://github.com/apache/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;Follow the instructions available at sling/samples/accessmanager-ui/README.txt. From another browser, go to &lt;a href=&quot;http://localhost:8080/system/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console&lt;/a&gt; and try to login as user test and the password test. Not able to login successfully. Access control application feature is not working correctly. &lt;/p&gt;

&lt;p&gt;Also note that the command &apos;mvn install -P autoInstallBundle&apos;  from sling/samples/slingshot directory is failing because of extra comma in the json files. An example error is shown below. To fix the error shown below, I removed the extra commas from the offending json files. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal org.apache.sling:maven-sling-plugin:2.1.0:validate (install-bundle) on project org.apache.sling.sample.slingshot: An Error occured while validating the file &apos;SLING-INF/content/slingshot/users/slingshot2/places/landing.json&apos;: Trailing separator &apos;,&apos; in object. at character 302 of {&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &quot;jcr:primaryType&quot;:&quot;sling:OrderedFolder&quot;,&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &quot;sling:resourceType&quot;:&quot;slingshot/Item&quot;,&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &quot;title&quot;:&quot;Landing Place&quot;,&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &quot;description&quot;:&quot;Something happened here long time ago!&quot;,&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; comments : &lt;/p&gt;
{
[ERROR] &quot;jcr:primaryType&quot;:&quot;sling:OrderedFolder&quot;,
[ERROR] &quot;sling:resourceType&quot;:&quot;slingshot/Comments&quot;,
[ERROR] }
&lt;p&gt;,&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; ratings : &lt;/p&gt;
{
[ERROR] &quot;jcr:primaryType&quot;:&quot;sling:OrderedFolder&quot;,
[ERROR] &quot;sling:resourceType&quot;:&quot;slingshot/Ratings&quot;,
[ERROR] }
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; }&lt;/p&gt;</description>
                <environment></environment>
        <key id="12888651">SLING-5045</key>
            <summary>The new &apos;test&apos; user is not able to access slingshot page</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vganesh">Venkat Ganesh</reporter>
                        <labels>
                            <label>easytest</label>
                    </labels>
                <created>Fri, 18 Sep 2015 19:56:09 +0000</created>
                <updated>Tue, 22 Sep 2015 10:33:52 +0000</updated>
                                                                            <component>Samples</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14902363" author="cziegeler" created="Tue, 22 Sep 2015 10:31:15 +0000"  >&lt;p&gt;I&apos;Ve fixed the json files in the slingshot sample. I have the feeling that the readme in the accessmanager ui is outdated and needs updating&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2l4vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5044] Get system bundle by location, not number 0</title>
                <link>https://issues.apache.org/jira/browse/SLING-5044</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Getting the system bundle by id 0 might be prevented by hooks. Therefore we should try getting the bundle by bundle location.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12875816">SLING-5044</key>
            <summary>Get system bundle by location, not number 0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Sep 2015 09:13:08 +0000</created>
                <updated>Fri, 11 Mar 2016 14:19:52 +0000</updated>
                            <resolved>Fri, 18 Sep 2015 09:22:53 +0000</resolved>
                                                    <fixVersion>Installer Core 3.6.8</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14805274" author="cziegeler" created="Fri, 18 Sep 2015 09:22:53 +0000"  >&lt;p&gt;Fixed in rev 1703787&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2kdq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5042] ResourceResolver.commit() does not call session.save() on the backing JCR Session</title>
                <link>https://issues.apache.org/jira/browse/SLING-5042</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following test snippet passes:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            resourceResolver.delete(content);
            assertTrue(session.hasPendingChanges());
            resourceResolver.adaptTo(Session.class).save();
            assertFalse(session.hasPendingChanges());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but the following one fails&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            resourceResolver.delete(content);
            assertTrue(session.hasPendingChanges());
            resourceResolver.commit();
            assertFalse(session.hasPendingChanges());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;By taking a quick look it seems that &lt;tt&gt;ResourceResolverContext&lt;/tt&gt; instance of the &lt;tt&gt;ResourceResolverImpl&lt;/tt&gt; does not have any registered providers, so the commit() operation is effectively a no-op&lt;/p&gt;</description>
                <environment></environment>
        <key id="12875413">SLING-5042</key>
            <summary>ResourceResolver.commit() does not call session.save() on the backing JCR Session</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Sep 2015 16:36:24 +0000</created>
                <updated>Thu, 17 Sep 2015 23:55:26 +0000</updated>
                            <resolved>Thu, 17 Sep 2015 23:55:26 +0000</resolved>
                                    <version>Testing Sling Mock 1.5.0</version>
                                    <fixVersion>Testing Sling Mock 1.6.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14804714" author="sseifert@pro-vision.de" created="Thu, 17 Sep 2015 23:55:26 +0000"  >&lt;p&gt;oh, yes - should be fixed in rev. 1703732  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2kb93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5036] Optimise the ModelsFactoryUseProvider to fail as early as possible if it cannot provide an object</title>
                <link>https://issues.apache.org/jira/browse/SLING-5036</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;org.apache.sling.scripting.sightly.models.impl.ModelsFactoryUseProvider&lt;/tt&gt; should be further optimised to fail as early as possible if it cannot load a Sling Model, which means that it should check if the provided identifier pattern matches a Java class name pattern.&lt;/p&gt;

&lt;p&gt;Also some lazy bindings retrieval should be done in order to save time - the &lt;tt&gt;Resource&lt;/tt&gt; object should only be retrieved if the object is not adaptable from &lt;tt&gt;SlingHttpServletRequest&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;At the same time a rename of the class should be done, to properly reflect its purpose: &lt;tt&gt;ModelsFactoryUseProvider&lt;/tt&gt; -&amp;gt; &lt;tt&gt;SlingModelsUseProvider&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12875357">SLING-5036</key>
            <summary>Optimise the ModelsFactoryUseProvider to fail as early as possible if it cannot provide an object</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Sep 2015 13:39:33 +0000</created>
                <updated>Mon, 12 Oct 2015 13:26:07 +0000</updated>
                            <resolved>Thu, 17 Sep 2015 14:29:40 +0000</resolved>
                                    <version>Scripting Sightly Models Use Provider 1.0.0</version>
                                    <fixVersion>Scripting Sightly Models Use Provider 1.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14802982" author="radu.cotescu" created="Thu, 17 Sep 2015 14:29:40 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1703629&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1703629&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2kawn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5035] Sling Models Injectors should be queried in the reverse order of their service ranking value</title>
                <link>https://issues.apache.org/jira/browse/SLING-5035</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The current version of the &lt;tt&gt;ModelAdaptorFactory&lt;/tt&gt; [0] queries the Injectors in the ascending order of their service ranking value. However they should be queried in the descending order of the service ranking, to use the same logic as the &lt;tt&gt;BundleContext#getServiceReference(String)&lt;/tt&gt; method [1].&lt;/p&gt;

&lt;p&gt;[0] - &lt;a href=&quot;https://github.com/apache/sling/blob/f56b444b765beb1c31eed01b4c09fbda4013a580/bundles/extensions/models/impl/src/main/java/org/apache/sling/models/impl/ModelAdapterFactory.java#L411&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/f56b444b765beb1c31eed01b4c09fbda4013a580/bundles/extensions/models/impl/src/main/java/org/apache/sling/models/impl/ModelAdapterFactory.java#L411&lt;/a&gt;&lt;br/&gt;
[1] - &lt;a href=&quot;https://osgi.org/javadoc/r4v42/org/osgi/framework/BundleContext.html#getServiceReference(java.lang.String&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://osgi.org/javadoc/r4v42/org/osgi/framework/BundleContext.html#getServiceReference(java.lang.String&lt;/a&gt;)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12875351">SLING-5035</key>
            <summary>Sling Models Injectors should be queried in the reverse order of their service ranking value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Sep 2015 13:00:01 +0000</created>
                <updated>Fri, 18 Sep 2015 12:28:57 +0000</updated>
                            <resolved>Fri, 18 Sep 2015 11:17:08 +0000</resolved>
                                    <version>Sling Models Impl 1.2.2</version>
                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14802962" author="sseifert@pro-vision.de" created="Thu, 17 Sep 2015 14:13:50 +0000"  >&lt;p&gt;afair this logic with lowest ranking = highest priority is present in sling models sind version 1.0.0.&lt;br/&gt;
if we change it this would break backward compatibility when the generic @Inject annotation is used.&lt;/p&gt;

&lt;p&gt;for the injectors that are shipped with sling models we could just revert the ranking numbers as well at the same time, but this would not affect custom injectors which then would be inserted at another position in the ranking probably breaking code in a very subtle way.&lt;/p&gt;</comment>
                            <comment id="14802973" author="radu.cotescu" created="Thu, 17 Sep 2015 14:22:18 +0000"  >&lt;p&gt;Sure, but we&apos;re comparing 1.2.2 with 1.0.0 - we already know that 1.x.y (where x &amp;gt; 0) introduces API changes. I think that it&apos;s better to implement the Injectors picking algorithm to comply with the OSGi principles than to have this weird behaviour.&lt;/p&gt;

&lt;p&gt;Also, taking into account the current ordering, it doesn&apos;t make sense to have the Script Bindings injector called before anything else, which basically hints at the fact that the implementation was wrong from the beginning.&lt;/p&gt;</comment>
                            <comment id="14802974" author="kwin" created="Thu, 17 Sep 2015 14:22:29 +0000"  >&lt;p&gt;Who is responsible for that inverted order?&lt;br/&gt;
We use &lt;tt&gt;RankedServices&lt;/tt&gt; since &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4779&quot; title=&quot;Rely on RankedServices for Sling Models&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4779&quot;&gt;&lt;del&gt;SLING-4779&lt;/del&gt;&lt;/a&gt; which itself uses &lt;tt&gt;ServiceUtil.getComparableForServiceRanking(...)&lt;/tt&gt;. According to the javadoc the order should be the same as in &lt;tt&gt;org.osgi.framework.ServiceReference.compareTo(...)&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14802978" author="radu.cotescu" created="Thu, 17 Sep 2015 14:28:02 +0000"  >&lt;p&gt;The order is correct - the &lt;tt&gt;RankedServices&lt;/tt&gt; class returns the services in the ascending order of their service ranking value. What I&apos;m saying is that the Injector with the highest service ranking should be called first, so that we respect the same principle the OSGi container uses for returning an implementation of a certain service when there are multiple implementations available.&lt;/p&gt;</comment>
                            <comment id="14802983" author="sseifert@pro-vision.de" created="Thu, 17 Sep 2015 14:31:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;Also, taking into account the current ordering, it doesn&apos;t make sense to have the Script Bindings injector called before anything else, which basically hints at the fact that the implementation was wrong from the beginning.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;i don&apos;t think so. the current - effective - order is documented also here &lt;br/&gt;
&lt;a href=&quot;http://sling.apache.org/documentation/bundles/models.html#available-injectors&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/bundles/models.html#available-injectors&lt;/a&gt;&lt;br/&gt;
all new injectors since 1.1 were added at the end. the 1.0 injectors starting with script bindings at first position were designed in this order by justin, and i assume he had good reasons for it.&lt;/p&gt;

&lt;p&gt;changing this order now breaks the API contract and thus would need a 2.x version number.&lt;/p&gt;</comment>
                            <comment id="14802984" author="kwin" created="Thu, 17 Sep 2015 14:32:30 +0000"  >&lt;p&gt;Since RankedServices provides an iterator I would expect that the services with the highest ranking are returned first, then the ones with lower ranking. We should definitely clarify that in the JavaDoc of RankedServices. I cannot come up with a good use case where you would be interested in an iterator where the services with a lower ranking come first!&lt;/p&gt;</comment>
                            <comment id="14802990" author="radu.cotescu" created="Thu, 17 Sep 2015 14:34:33 +0000"  >&lt;p&gt;Overrides? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; That&apos;s how the BindingsValuesProviders work. You call them from the lowest to the highest ranking, so that the highest can override what other providers have put into the Bindings map.&lt;/p&gt;</comment>
                            <comment id="14803033" author="bdelacretaz" created="Thu, 17 Sep 2015 14:56:16 +0000"  >&lt;p&gt;I would not make that change...we did the same thing for Sling Filters in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2920&quot; title=&quot;Wrong handling of Sling Filter ordering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2920&quot;&gt;&lt;del&gt;SLING-2920&lt;/del&gt;&lt;/a&gt; and I think everybody agrees that this was a mistake. &lt;/p&gt;

&lt;p&gt;Although the current behavior might not be optimal, it works, and both conventions (higher wins or lower wins) are valid and used in different places.&lt;/p&gt;

&lt;p&gt;Changing the behavior would result in some existing injectors using the old convention and others using the new one, which is the mess that we&apos;re seeing with Filters after &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2920&quot; title=&quot;Wrong handling of Sling Filter ordering&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2920&quot;&gt;&lt;del&gt;SLING-2920&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14803034" author="justinedelson" created="Thu, 17 Sep 2015 14:57:02 +0000"  >&lt;p&gt;IMHO, the linked JavaDoc is irrelevant as that describes the interpretation of ranking with respect to returning a single service when multiple are registered.&lt;/p&gt;

&lt;p&gt;In any case, I can see the point about interpretations ranking as &apos;priority&apos; and because there&apos;s no override option (first value wins), it is inverted in this case. However, the intention was that ranking here would be interpreted quite literally as order and that&apos;s what was done. If someone thinks the ranking is wrong (I.e. That ScriptBindings should be later), that&apos;s a different issue.&lt;/p&gt;

&lt;p&gt;Unlike the Filter issue where we switched the ranking interpretation in a non-backwards compatible way, the documentation and implementation are aligned. There is no issue here&apos;s do changing this will only create issues.&lt;/p&gt;</comment>
                            <comment id="14803090" author="radu.cotescu" created="Thu, 17 Sep 2015 15:27:30 +0000"  >&lt;p&gt;This means that any Injector installed into the platform, without an explicitly defined service ranking value, will be called first. Not to mention that there isn&apos;t an explicit conflict resolution mechanism for two Injectors with the same service ranking and same name...&lt;/p&gt;</comment>
                            <comment id="14803164" author="fmeschbe" created="Thu, 17 Sep 2015 16:18:09 +0000"  >&lt;p&gt;Quoting the OSGi Core Specification R6 :&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;&lt;b&gt;5.2.6 Service Ranking Order&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;When registering a service object, a bundle may optionally specify a SERVICE_RANKING service property of type Integer. This number specifies a ranking order between services. The highest num- ber has the highest ranking and the lowest number (including negative numbers) has the lowest ranking. If no service.ranking service property is specified or its type is not Integer then a ranking of 0 must be used.&lt;/p&gt;

&lt;p&gt;The ranking order is defined as follows:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Sorted on descending ranking number (highest first)&lt;/li&gt;
	&lt;li&gt;If the ranking numbers are equal, sorted on ascending service.id property (oldest first).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This ordering is complete because service ids are never reused and handed out in order of their reg- istration time. That is, a service that is registered later will have a higher service id. Therefore, the ranking order is in descending service.ranking numeric order where ties give a preference to the ear- lier registrant.&lt;/p&gt;

&lt;p&gt;The ranking order is the reverse of the natural ordering of a ServiceReference object. The purpose of the ranking order is to allow:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Selection - When a single service must be chosen but multiple services qualify then the service with the highest ranking must be selected.&lt;/li&gt;
	&lt;li&gt;Ordering - When multiple services must be used in a specified order.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So essentially the ranking is from high value to low value, the service reference order as per &lt;tt&gt;compareTo&lt;/tt&gt; is from low value to high value.&lt;/p&gt;

&lt;p&gt;What you want here is the ranking order, that is checking the services with the higher ranking before the services with lower values.&lt;/p&gt;

&lt;p&gt;I think the implementation is wrong and needs to be fixed. At the same time, I suggest to negate the service.ranking values for the default injectors and third to update the documentation.&lt;/p&gt;

&lt;p&gt;Yes, that might give unexpected results for current implementations which expect the wrong behaviour &amp;#8211; if such implementations exist I would actually expect them to have stumbled upon this wrong behaviour and have broken service.ranking values to work around it.&lt;/p&gt;</comment>
                            <comment id="14803333" author="justinedelson" created="Thu, 17 Sep 2015 18:16:13 +0000"  >&lt;p&gt;Sorry, but -1 to all of those suggested changes. They have absolutely zero practical value. We shouldn&apos;t break backwards compatibility unless there&apos;s some value is doing so. This behavior has been well documented since the start.&lt;/p&gt;</comment>
                            <comment id="14803335" author="justinedelson" created="Thu, 17 Sep 2015 18:17:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;This means that any Injector installed into the platform, without an explicitly defined service ranking value, will be called first.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This, FWIW, is not actually true as service.ranking can be a negative value. It is true that all of the standard injectors have a positive value, but that&apos;s not guaranteed to be the case in general.&lt;/p&gt;</comment>
                            <comment id="14803362" author="radu.cotescu" created="Thu, 17 Sep 2015 18:26:07 +0000"  >&lt;p&gt;Quoting from the quote that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fmeschbe&quot; class=&quot;user-hover&quot; rel=&quot;fmeschbe&quot;&gt;fmeschbe&lt;/a&gt; posted (this sounds funny &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;):&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If no service.ranking service property is specified or its type is not Integer then a ranking of 0 must be used.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What this means is that if a service is registered without an explicit service ranking property the container will use 0 for this value when performing comparisons to figure out what implementation should be returned to a consumer of said service. So will the &lt;tt&gt;org.apache.sling.commons.osgi.RankedServices&lt;/tt&gt; class used for storing injectors in the &lt;tt&gt;ModelAdaptorFactory&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14805140" author="bdelacretaz" created="Fri, 18 Sep 2015 07:37:35 +0000"  >&lt;p&gt;As I said above I second this -1&lt;/p&gt;</comment>
                            <comment id="14805150" author="bdelacretaz" created="Fri, 18 Sep 2015 07:45:05 +0000"  >&lt;p&gt;So it looks like we have an actual problem here, an Injector registered with no specific ranking will get a zero ranking and cause trouble? If I&apos;m correct, that can probably be fixed without making big changes elsewhere, by treating 0 ranking in a special way.&lt;/p&gt;</comment>
                            <comment id="14805161" author="sseifert@pro-vision.de" created="Fri, 18 Sep 2015 07:51:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;So it looks like we have an actual problem here, an Injector registered with no specific ranking will get a zero ranking and cause trouble?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;no, not really a problem. then it&apos;s just the first injector in order that is called, but if it has nothing to inject the next in order is requested.&lt;/p&gt;

&lt;p&gt;anyone who implements a custom sling models Injector should know what he is doing, otherwise he could cause much more harm than just forgetting to define a feasible service ranking value.&lt;/p&gt;

&lt;p&gt;we should clearly document that this behavior of injector ranking is currently not in line with OSGi default behavior, and perhaps create a roadmap wiki page of changes for a sling models 2.x version and note it there. but only for this change is not worth starting a 2.x line.&lt;/p&gt;</comment>
                            <comment id="14805167" author="kwin" created="Fri, 18 Sep 2015 07:55:36 +0000"  >&lt;p&gt;+1 (especially for the documentation clarification around service rankings)&lt;/p&gt;</comment>
                            <comment id="14805181" author="bdelacretaz" created="Fri, 18 Sep 2015 08:07:55 +0000"  >&lt;p&gt;and I think the best reference &quot;docs&quot; for those kinds of things are readable tests. The docs pages can then just describe the general idea and point to the tests for details.&lt;/p&gt;</comment>
                            <comment id="14824515" author="justinedelson" created="Fri, 18 Sep 2015 10:57:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;no, not really a problem. then it&apos;s just the first injector in order that is called, but if it has nothing to inject the next in order is requested.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Again, this is not necessarily true. An injector registered with no specific ranking may or may not be called &apos;first&apos;. There could be other injectors registered with a negative ranking in which case they would be called before an injector with a 0 ranking.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;we should clearly document that this behavior of injector ranking is currently not in line with OSGi default behavior&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The documentation says &quot;Injectors are invoked in order of their service ranking, from lowest to highest. See the table below for the rankings of the standard injectors.&quot; I can&apos;t imagine this being clearer &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; IMHO adding &quot;... and this behvior is different than &apos;OSGi default behavior&apos; would actually make this more confusing.&lt;/p&gt;</comment>
                            <comment id="14824523" author="bdelacretaz" created="Fri, 18 Sep 2015 11:04:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;adding &quot;... and this behavior is different than &apos;OSGi default behavior&apos; would actually make this more confusing.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreeing a lot with Justin today, another +1 from me here.&lt;/p&gt;</comment>
                            <comment id="14837713" author="sseifert@pro-vision.de" created="Fri, 18 Sep 2015 11:17:08 +0000"  >&lt;p&gt;setting this ticket to won&apos;t fix&lt;/p&gt;

&lt;p&gt;in the wiki i&apos;ve created a &quot;Sling Models 2.x Roadmap&quot; page&lt;br/&gt;
&lt;a href=&quot;https://cwiki.apache.org/confluence/x/qqmnAw&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/x/qqmnAw&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;although i do not expect we will come to a 2.x version any soon, but we&apos;ve a place to collect such ideas.&lt;/p&gt;</comment>
                            <comment id="14847358" author="bdelacretaz" created="Fri, 18 Sep 2015 12:28:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; do you agree with setting this won&apos;t fix? As you created this ticket I think it&apos;s good to hear your opinion.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12875397">SLING-5041</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2kavb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5033] JUnit servlet should return 404 when no test is found</title>
                <link>https://issues.apache.org/jira/browse/SLING-5033</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The JUnit servlet returns HTTP status 200 even if no tests are found to execute, it should return 404 instead. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12875342">SLING-5033</key>
            <summary>JUnit servlet should return 404 when no test is found</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Sep 2015 12:26:38 +0000</created>
                <updated>Mon, 28 Sep 2015 10:03:53 +0000</updated>
                            <resolved>Thu, 17 Sep 2015 12:29:27 +0000</resolved>
                                    <version>JUnit Core 1.0.10</version>
                                    <fixVersion>JUnit Core 1.0.12</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14802843" author="bdelacretaz" created="Thu, 17 Sep 2015 12:29:27 +0000"  >&lt;p&gt;Implemented in revision 1703597&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2katb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5032] Even if a field is annotated with Source the ModelAdapterFactory will query all injectors</title>
                <link>https://issues.apache.org/jira/browse/SLING-5032</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Even if a field is annotated with Source the ModelAdapterFactory will query all injectors instead of directly picking the indicated injector, which is wasteful.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12875341">SLING-5032</key>
            <summary>Even if a field is annotated with Source the ModelAdapterFactory will query all injectors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Sep 2015 12:24:31 +0000</created>
                <updated>Fri, 4 Dec 2015 20:55:19 +0000</updated>
                            <resolved>Mon, 21 Sep 2015 11:47:21 +0000</resolved>
                                    <version>Sling Models Impl 1.2.2</version>
                                    <fixVersion>Sling Models Impl 1.2.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14900542" author="radu.cotescu" created="Mon, 21 Sep 2015 11:47:21 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1704257&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1704257&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15042221" author="sseifert@pro-vision.de" created="Fri, 4 Dec 2015 20:55:19 +0000"  >&lt;p&gt;Completed: At revision: 1718031  &lt;/p&gt;

&lt;p&gt;two small improvements on this fix:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;make access to injectors concurrent map atomic to ensure thread safety of bind/unbind methods&lt;/li&gt;
	&lt;li&gt;remove code redundancy in injectElement method when iterating over the injectors to process&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 47 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2kat3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5031] Switch the order in which a Use object is adapted in the JavaUseProvider</title>
                <link>https://issues.apache.org/jira/browse/SLING-5031</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;org.apache.sling.scripting.sightly.impl.engine.extension.use.JavaUseProvider&lt;/tt&gt; should first try to adapt the Use object to a request and then to a resource, in order to provide consistency with the &lt;tt&gt;org.apache.sling.scripting.sightly.models.impl.ModelFactoryUseProvider&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12873230">SLING-5031</key>
            <summary>Switch the order in which a Use object is adapted in the JavaUseProvider</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Sep 2015 08:35:33 +0000</created>
                <updated>Mon, 12 Oct 2015 13:25:24 +0000</updated>
                            <resolved>Thu, 17 Sep 2015 14:29:08 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.4</version>
                                    <fixVersion>Scripting Sightly Engine 1.0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14802980" author="radu.cotescu" created="Thu, 17 Sep 2015 14:29:08 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1703627&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1703627&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12831733">SLING-4734</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2kajr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5030] replace isolated mode with (larger) TOPOLOGY_CHANGING phase</title>
                <link>https://issues.apache.org/jira/browse/SLING-5030</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3432?focusedCommentId=14492494&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14492494&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;described in SLING-3432&lt;/a&gt; one major reason why duplicate leaders happen in discovery.impl is the isolated mode: the rule of discovery API is that every instance is always in a cluster. That kind of makes sense. However, when the connection to the cluster (ie to the repository) is faulty or delayed for some reason - and the remaining cluster does no longer interpret the local instance as being alive (ie heartbeats have timed out), then currently the local instance notices this &apos;isolated&apos; state and wraps itself into a pseudo cluster consisting only of itself. Of which it by definition is the leader.&lt;/p&gt;

&lt;p&gt;This is completely wrong: there should be no isolated mode. When this &apos;cut off&apos; the cluster happens, the local instance should just immediately send out a TOPOLOGY_CHANGING and remain in this state until things have settled with the repository and it successfully has taken part of a voting. Only then can it send out a TOPOLOGY_CHANGED event.&lt;/p&gt;

&lt;p&gt;This should fix a large number of situations where &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3432&quot; title=&quot;pseudo network partition causes job deserialization issue in a cluster (when reading while job is being reassigned)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3432&quot;&gt;&lt;del&gt;SLING-3432&lt;/del&gt;&lt;/a&gt; has been seen.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12873223">SLING-5030</key>
            <summary>replace isolated mode with (larger) TOPOLOGY_CHANGING phase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Sep 2015 08:17:48 +0000</created>
                <updated>Wed, 30 Sep 2015 05:44:20 +0000</updated>
                            <resolved>Thu, 24 Sep 2015 14:37:48 +0000</resolved>
                                    <version>Discovery Impl 1.0.2</version>
                                    <fixVersion>Discovery Impl 1.1.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14902533" author="egli" created="Tue, 22 Sep 2015 12:50:56 +0000"  >&lt;p&gt;Implemented preventing sending of TOPOLOGY_CHANGED while isolated in:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1704604&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1704604&amp;amp;view=rev&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1704609&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1704609&amp;amp;view=rev&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;will wait with calling this issue resolved until further testing is done though, as this touches quite a bit the core of discovery.impl&lt;/p&gt;</comment>
                            <comment id="14904275" author="egli" created="Wed, 23 Sep 2015 09:53:29 +0000"  >&lt;p&gt;One issue that remains to be fixed: once an instance becomes partitioned away the others will have elected a new leader. If the local instance was originally leader however, it will become leader again upon rejoining and take the leader-status away of the one that was leader in the meantime. There are two possible solutions here:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;either leave it as is: the leader moves to the remaining instances that can talk to the repository and once the partitioned original leader rejoins it gets the leader status back&lt;/li&gt;
	&lt;li&gt;or make the partitioned-away leader put itself at the end of the &apos;leader queue&apos; (by resetting the &lt;tt&gt;leaderElectionId&lt;/tt&gt;), thus reducing the number of leader changes&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I&apos;d vote for 2. and will follow-up on a solution for this...&lt;/p&gt;</comment>
                            <comment id="14906157" author="egli" created="Thu, 24 Sep 2015 10:10:41 +0000"  >&lt;p&gt;Done #2 in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1705024&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1705024&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14906162" author="egli" created="Thu, 24 Sep 2015 10:17:13 +0000"  >&lt;p&gt;Added a follow-up ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5058&quot; title=&quot;introduce viewCnt to ./establishedView to be able to detect missing changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5058&quot;&gt;&lt;del&gt;SLING-5058&lt;/del&gt;&lt;/a&gt; that would go even further into trying to avoid an unnecessary leader-switch in the case where the local instance doesn&apos;t even detect the topology change yet but was nevertheless isolated from the point of view of the others. This is an extreme edge case however and thus out-of-scope for 1.1.8&lt;/p&gt;</comment>
                            <comment id="14906290" author="egli" created="Thu, 24 Sep 2015 12:37:09 +0000"  >&lt;p&gt;Couple test, buglet fixed:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1705047&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1705047&amp;amp;view=rev&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1705035&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1705035&amp;amp;view=rev&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1705033&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1705033&amp;amp;view=rev&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1705032&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1705032&amp;amp;view=rev&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1705026&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1705026&amp;amp;view=rev&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14906352" author="egli" created="Thu, 24 Sep 2015 13:39:56 +0000"  >&lt;p&gt;Plus improved the webconsole: when it is isolated it&apos;s not rendering an exception anymore, but more loudly (via &apos;red&apos;) telling the user that we&apos;re in CHANGING mode: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1705056&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1705056&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14906370" author="egli" created="Thu, 24 Sep 2015 13:56:24 +0000"  >&lt;p&gt;and improved a log output at &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1705059&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1705059&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14906406" author="egli" created="Thu, 24 Sep 2015 14:22:53 +0000"  >&lt;p&gt;and ensure delayedEventPendingFailed is always correctly set false: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1705067&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1705067&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14906425" author="egli" created="Thu, 24 Sep 2015 14:37:48 +0000"  >&lt;p&gt;marking resolved, tests look fine.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12698636">SLING-3432</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12896061">SLING-5058</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2kai7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5029] ModelFactory.canCreateFromAdaptable can report false positives</title>
                <link>https://issues.apache.org/jira/browse/SLING-5029</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As being mentioned by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4997?focusedCommentId=14734059&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14734059&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-4997?focusedCommentId=14734059&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14734059&lt;/a&gt; the method &lt;tt&gt;ModelFactory.canCreateFromAdaptable&lt;/tt&gt; may return false positives in case the class has a model annotation but is still not registered due to last line in &lt;tt&gt;ModelFactory.getImplementationTypeForAdapterType(...)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In the best case an exception should be thrown if the class has a Model annotation but is still not registered (but probably that is not easily possible to detect in case of different adapter classes). Therefore at least the handling should be consistent here.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12873218">SLING-5029</key>
            <summary>ModelFactory.canCreateFromAdaptable can report false positives</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                            <label>models</label>
                    </labels>
                <created>Thu, 17 Sep 2015 07:52:10 +0000</created>
                <updated>Fri, 9 Sep 2016 11:46:06 +0000</updated>
                            <resolved>Fri, 8 Jan 2016 17:27:18 +0000</resolved>
                                    <version>Sling Models Impl 1.2.2</version>
                                    <fixVersion>Sling Models API 1.3.0</fixVersion>
                    <fixVersion>Sling Models Impl 1.2.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15089563" author="kwin" created="Fri, 8 Jan 2016 17:27:18 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1723767&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1723767&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also clarified the javadoc and method signature of &lt;tt&gt;ModelFactory.canCreateFromAdaptable&lt;/tt&gt; to no longer throw any exception but to just return &lt;tt&gt;false&lt;/tt&gt; in case e.g. the model annotation is missing or the according adapter factory is not there for any reason in addition to returning &lt;tt&gt;false&lt;/tt&gt; if the given model can just not be adapted from the given adaptable.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2kah3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5028] [Sling Mocks] Running a query with condition doesn&apos;t return any results</title>
                <link>https://issues.apache.org/jira/browse/SLING-5028</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Running a query that uses a WHERE condition returns no results when using JCR_JACKRABBIT provider. &lt;/p&gt;

&lt;p&gt;The query &lt;br/&gt;
&lt;tt&gt;SELECT * FROM &lt;span class=&quot;error&quot;&gt;&amp;#91;nt:unstructured&amp;#93;&lt;/span&gt; as N&lt;/tt&gt; returns the correct number of results. &lt;br/&gt;
However, running &lt;tt&gt;SELECT * FROM &lt;span class=&quot;error&quot;&gt;&amp;#91;nt:unstructured&amp;#93;&lt;/span&gt; as N WHERE ISDESCENDANTNODE(N,&quot;/content&apos;)&lt;/tt&gt; returns no results.&lt;/p&gt;

&lt;p&gt;I&apos;ve set up a small project to illustrate this at &lt;a href=&quot;https://github.com/dplaton/sling-testing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dplaton/sling-testing&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12868755">SLING-5028</key>
            <summary>[Sling Mocks] Running a query with condition doesn&apos;t return any results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="dplaton">Daniel Platon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Sep 2015 12:17:07 +0000</created>
                <updated>Fri, 18 Sep 2015 07:31:47 +0000</updated>
                            <resolved>Thu, 17 Sep 2015 16:20:39 +0000</resolved>
                                    <version>Testing Sling Mock 1.5.0</version>
                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14803107" author="rombert" created="Thu, 17 Sep 2015 15:47:30 +0000"  >&lt;p&gt;For the record, in your test no query returns the expected results. The first test passes because the result contains &apos;/&apos;, so the size is right.&lt;/p&gt;</comment>
                            <comment id="14803166" author="rombert" created="Thu, 17 Sep 2015 16:20:44 +0000"  >&lt;p&gt;The following changes make your test work&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/src/test/java/sandbox/SampleServiceTest.java b/src/test/java/sandbox/SampleServiceTest.java
index 218b9fc..063a565 100644
--- a/src/test/java/sandbox/SampleServiceTest.java
+++ b/src/test/java/sandbox/SampleServiceTest.java
@@ -55,12 +55,13 @@ public class SampleServiceTest {
         Resource content = context.resourceResolver().getResource(&quot;/content&quot;);
         if (content == null) {
             context.load().json(&quot;/sample-nodes.json&quot;,&quot;/content/sample-node-1&quot;);
+            context.resourceResolver().adaptTo(Session.class).save();
         }
     }
 
     @Test
     public void testQueryNoCondition() throws RepositoryException {
-        int expectedResults = 1;
+        int expectedResults = 3;
         String queryString = &quot;SELECT * FROM [nt:unstructured] AS N&quot;;
         List&amp;lt;String&amp;gt; actualResults = executeQuery(context.resourceResolver(),queryString);
         Assert.assertEquals(&quot;The number of results without parameter is incorrect&quot;, expectedResults, actualResults.size());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The root issue here is that JCR queries only operate on persisted changes, so you need a session.save() calls to make them visible to the query manager, even when operating under the same session.&lt;/p&gt;

&lt;p&gt;Therefore there&apos;s nothing to fix here IMO, resolving as not a problem.&lt;/p&gt;</comment>
                            <comment id="14803183" author="rombert" created="Thu, 17 Sep 2015 16:37:01 +0000"  >&lt;p&gt;For the record, you need to call save() on the backing JCR session instead of resourceResolver.commit() due to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5042&quot; title=&quot;ResourceResolver.commit() does not call session.save() on the backing JCR Session&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5042&quot;&gt;&lt;del&gt;SLING-5042&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14804280" author="dplaton" created="Thu, 17 Sep 2015 18:57:21 +0000"  >&lt;p&gt;Thanks for your input &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;. Where can I file a documentation issue? (or submit a documentation patch)&lt;br/&gt;
Saving the session after &lt;tt&gt;context.load()&lt;/tt&gt; is not documented at &lt;a href=&quot;https://sling.apache.org/documentation/development/sling-mock.html#import-resource-data-from-json-file-in-classpath&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/development/sling-mock.html#import-resource-data-from-json-file-in-classpath&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14804375" author="sseifert@pro-vision.de" created="Thu, 17 Sep 2015 19:59:45 +0000"  >&lt;p&gt;perhaps it would make sense that the content loader (context.load().*) automatically calls commit() when its done.&lt;br/&gt;
if yes we should file an improvement issue for sling-mock here.&lt;/p&gt;</comment>
                            <comment id="14805043" author="dplaton" created="Fri, 18 Sep 2015 06:17:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt;, I think this depends of the resource provider - JCR_JACKRABBIT uses an actual repository so it makes sense to call save() to persist the data. Using JCR_MOCK doesn&apos;t require a save() since it uses an in-memory repository (that&apos;s what threw me off in the first place).&lt;/p&gt;</comment>
                            <comment id="14805076" author="rombert" created="Fri, 18 Sep 2015 06:45:02 +0000"  >&lt;p&gt;Yes, I think it makes sense to automatically commit the data at the end of the import , that&apos;s what most people expect.&lt;/p&gt;</comment>
                            <comment id="14805131" author="sseifert@pro-vision.de" created="Fri, 18 Sep 2015 07:31:47 +0000"  >&lt;p&gt;i&apos;ve created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5043&quot; title=&quot;sling-mocks: Execute commit() after ContentLoader operations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5043&quot;&gt;&lt;del&gt;SLING-5043&lt;/del&gt;&lt;/a&gt; for this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12875796">SLING-5043</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k8xz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5027] vote loop until vote is promoted</title>
                <link>https://issues.apache.org/jira/browse/SLING-5027</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;VotingHandler.analyzeVotings&lt;/tt&gt; has the risk of running into a busy vote loop during the duration of an &lt;tt&gt;/ongoingVotings&lt;/tt&gt;:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;analyzeVotings&lt;/tt&gt; is invoked either when something changes in &lt;tt&gt;/var/discovery/impl/ongoingVotings&lt;/tt&gt; or as part of a heartbeat&lt;/li&gt;
	&lt;li&gt;as part of this, it figures out the ongoingVotings, decides on which it has to vote (should there be more than 1, and it doesn&apos;t vote if it was the initiator) then potentially does a &lt;tt&gt;vote(,true)&lt;/tt&gt; on it&lt;/li&gt;
	&lt;li&gt;in &lt;tt&gt;vote()&lt;/tt&gt; it not only sets the &lt;tt&gt;vote&lt;/tt&gt; property accordingly (true or false) - it additionally, since &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3434?focusedCommentId=14297078&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14297078&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;SLING-3434&lt;/a&gt;, also sets the &lt;tt&gt;votedAt&lt;/tt&gt; property (timestamp)&lt;/li&gt;
	&lt;li&gt;since the above is a change in &lt;tt&gt;/ongoingVotings&lt;/tt&gt;, this will trigger an observation event - which again triggers the &lt;tt&gt;analyzeVotings&lt;/tt&gt; to be called, which will again find an ongoing vote, vote upon, trigger an observation event etc. Resulting in an endless loop that involves repository and an observation handler&lt;/li&gt;
	&lt;li&gt;now the above loop only occurs since the introduction of the &lt;tt&gt;votedAt&lt;/tt&gt; property - as that is changing on each iteration. Without that, voting again with the same boolean would not result in an observation event and the loop would not happen at all.&lt;/li&gt;
	&lt;li&gt;in any case, the loop lasts at maximum until the initiator finally got all the votes and can promote the vote to an &lt;tt&gt;/establishedView&lt;/tt&gt;. This should typically be a fast operation - but if the cluster is under heavy load and experiences delays for some reason, this busy loop can last a little while.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So this loop is a regression introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3434&quot; title=&quot;Make intra-cluster discovery-heartbeats independent from machine clock differences&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3434&quot;&gt;&lt;del&gt;SLING-3434&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12864277">SLING-5027</key>
            <summary>vote loop until vote is promoted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Sep 2015 14:44:44 +0000</created>
                <updated>Wed, 30 Sep 2015 05:44:19 +0000</updated>
                            <resolved>Tue, 22 Sep 2015 14:30:27 +0000</resolved>
                                    <version>Discovery Impl 1.1.0</version>
                                    <fixVersion>Discovery Impl 1.1.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14745550" author="egli" created="Tue, 15 Sep 2015 14:47:09 +0000"  >&lt;p&gt;Marked as a regression of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3434&quot; title=&quot;Make intra-cluster discovery-heartbeats independent from machine clock differences&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3434&quot;&gt;&lt;del&gt;SLING-3434&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14745564" author="egli" created="Tue, 15 Sep 2015 14:54:28 +0000"  >&lt;p&gt;Note that this loop - besides being an additional resource-load while it lasts (typically only a few seconds though, but as mentioned this can be longer should the cluster experience delays and cause the vote in the first place, eg due to a heartbeat timeout..) - also has a higher risk of running into a conflict that would otherwise (without the votedAt guy) not occur. Here&apos;s an example of the conflict when running on oak:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: org.apache.jackrabbit.oak.api.CommitFailedException: OakState0001: Unresolved conflicts in /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/discovery/impl/ongoingVotings
        at org.apache.jackrabbit.oak.plugins.commit.ConflictValidator.failOnMergeConflict(ConflictValidator.java:115)
        at org.apache.jackrabbit.oak.plugins.commit.ConflictValidator.propertyAdded(ConflictValidator.java:84)
        at org.apache.jackrabbit.oak.spi.commit.CompositeEditor.propertyAdded(CompositeEditor.java:83)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.propertyAdded(EditorDiff.java:82)
        at org.apache.jackrabbit.oak.plugins.memory.ModifiedNodeState.compareAgainstBaseState(ModifiedNodeState.java:375)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.childNodeChanged(EditorDiff.java:148)
        at org.apache.jackrabbit.oak.plugins.memory.ModifiedNodeState.compareAgainstBaseState(ModifiedNodeState.java:396)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.childNodeChanged(EditorDiff.java:148)
        at org.apache.jackrabbit.oak.plugins.memory.ModifiedNodeState.compareAgainstBaseState(ModifiedNodeState.java:396)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.childNodeChanged(EditorDiff.java:148)
        at org.apache.jackrabbit.oak.plugins.memory.ModifiedNodeState.compareAgainstBaseState(ModifiedNodeState.java:396)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.childNodeChanged(EditorDiff.java:148)
        at org.apache.jackrabbit.oak.plugins.memory.ModifiedNodeState.compareAgainstBaseState(ModifiedNodeState.java:396)
        at org.apache.jackrabbit.oak.spi.commit.EditorDiff.process(EditorDiff.java:52)
        at org.apache.jackrabbit.oak.spi.commit.EditorHook.processCommit(EditorHook.java:54)
        at org.apache.jackrabbit.oak.spi.commit.CompositeHook.processCommit(CompositeHook.java:60)
        at org.apache.jackrabbit.oak.spi.commit.CompositeHook.processCommit(CompositeHook.java:60)
        at org.apache.jackrabbit.oak.spi.state.AbstractNodeStoreBranch$InMemory.merge(AbstractNodeStoreBranch.java:557)
        at org.apache.jackrabbit.oak.spi.state.AbstractNodeStoreBranch.merge0(AbstractNodeStoreBranch.java:329)
        at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStoreBranch.merge(DocumentNodeStoreBranch.java:148)
        at org.apache.jackrabbit.oak.plugins.document.DocumentRootBuilder.merge(DocumentRootBuilder.java:159)
        at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore.merge(DocumentNodeStore.java:1473)
        at org.apache.jackrabbit.oak.core.MutableRoot.commit(MutableRoot.java:247)
        at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.commit(SessionDelegate.java:391)
        at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.save(SessionDelegate.java:537)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14902714" author="egli" created="Tue, 22 Sep 2015 14:30:27 +0000"  >&lt;p&gt;fixed in &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1704640&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1704640&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12698865">SLING-3434</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k7dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5023] ResourceResolver bound in ObservationListenerSupport is stale after the configuration for the Resource Resolver Factory (PID: org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl) is touched</title>
                <link>https://issues.apache.org/jira/browse/SLING-5023</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently after reconfiguring the org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl the ResourceResolverFactory service is restarted.&lt;br/&gt;
The restart is unfortunately not detected by either &lt;tt&gt;OakResourceListener&lt;/tt&gt; nor &lt;tt&gt;ObservationListenerSupport&lt;/tt&gt;.Therefore the resource resolver being bound in &lt;tt&gt;ObservationListenerSupport.resourceResolver&lt;/tt&gt; is not refreshed. As a consequence this resource resolver is no longer being bound to any ResourceProviders and therefore all resolve requests on that resolver return &lt;tt&gt;null&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Possible solution: Add a service tracker for the &lt;tt&gt;ResourceResolverFactory&lt;/tt&gt; in &lt;tt&gt;ObservationListenerSupport&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The result of this bug is that after the configuration for the Resource Resolver Factory is touched, the &lt;tt&gt;OakResourceListener&lt;/tt&gt; does no longer propagate any event below jcr:content (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/jcr/resource/src/main/java/org/apache/sling/jcr/resource/internal/OakResourceListener.java#L206&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/jcr/resource/src/main/java/org/apache/sling/jcr/resource/internal/OakResourceListener.java#L206&lt;/a&gt;) because of the resource being &lt;tt&gt;null&lt;/tt&gt; (in &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/jcr/resource/src/main/java/org/apache/sling/jcr/resource/internal/OakResourceListener.java#L213&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/jcr/resource/src/main/java/org/apache/sling/jcr/resource/internal/OakResourceListener.java#L213&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12863903">SLING-5023</key>
            <summary>ResourceResolver bound in ObservationListenerSupport is stale after the configuration for the Resource Resolver Factory (PID: org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl) is touched</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Sep 2015 15:32:39 +0000</created>
                <updated>Sun, 13 Mar 2016 14:03:43 +0000</updated>
                            <resolved>Mon, 14 Sep 2015 15:59:16 +0000</resolved>
                                    <version>JCR Resource 2.5.0</version>
                                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14743708" author="cziegeler" created="Mon, 14 Sep 2015 15:54:13 +0000"  >&lt;p&gt;Isn&apos;t this a dub of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4974&quot; title=&quot;Observation support is using a stale resource resolver if resource resolver factory is restarted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4974&quot;&gt;&lt;del&gt;SLING-4974&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="14743716" author="kwin" created="Mon, 14 Sep 2015 15:58:50 +0000"  >&lt;p&gt;Indeed it is a duplicate. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Thanks for the fast answer.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12859853">SLING-4974</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k50v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5022] ImporterTopLevel is not set up correctly for the RhinoJavaScriptEngine</title>
                <link>https://issues.apache.org/jira/browse/SLING-5022</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;ImporterTopLevel&lt;/tt&gt; utility Rhino class is not set up correctly for the RhinoJavaScriptEngine. As a consequence none of the utility &lt;tt&gt;import*&lt;/tt&gt; functions the &lt;tt&gt;ImporterTopLevel&lt;/tt&gt; provides are available in the global scope.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12863881">SLING-5022</key>
            <summary>ImporterTopLevel is not set up correctly for the RhinoJavaScriptEngine</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Sep 2015 13:35:58 +0000</created>
                <updated>Mon, 12 Oct 2015 13:28:11 +0000</updated>
                            <resolved>Mon, 14 Sep 2015 13:38:36 +0000</resolved>
                                    <version>Scripting JavaScript 2.0.24</version>
                                    <fixVersion>Scripting JavaScript 2.0.26</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14743521" author="radu.cotescu" created="Mon, 14 Sep 2015 13:38:36 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1702951&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1702951&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k4vz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5020] Multivalued properties of user nodes are not distributed correctly</title>
                <link>https://issues.apache.org/jira/browse/SLING-5020</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Distribution a String[] property will end up on the other side as String.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12863858">SLING-5020</key>
            <summary>Multivalued properties of user nodes are not distributed correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Sep 2015 12:03:19 +0000</created>
                <updated>Thu, 15 Oct 2015 10:46:41 +0000</updated>
                            <resolved>Thu, 15 Oct 2015 10:46:41 +0000</resolved>
                                    <version>Content Distribution Core 0.1.2</version>
                                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14958721" author="mpetria" created="Thu, 15 Oct 2015 10:46:41 +0000"  >&lt;p&gt;Fixed in filevault-3.1.24&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12863856">JCRVLT-98</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k4r3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5018] JobManager.findJobs throws exception when job gets removed while querying.</title>
                <link>https://issues.apache.org/jira/browse/SLING-5018</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following exception is seen with a system under light Job Load viewing a page that needs to list jobs.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;10.09.2015 16:10:51.634 *ERROR* [160.46.173.180 [1441894183258] GET /libs/wcm/core/content/reference.json HTTP/1.1] org.apache.sling.engine.impl.SlingRequestProcessorImpl service: Uncaught Throwable
javax.servlet.ServletException: java.lang.IllegalStateException: Failed to retrieve path from Item:
	at com.day.cq.wcm.core.impl.reference.ActivationReferenceSearchServlet.doGet(ActivationReferenceSearchServlet.java:167)
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.mayService(SlingSafeMethodsServlet.java:268)
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:344)
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:375)
	at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:533)
	at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:45)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:64)
	at com.day.cq.personalization.impl.TargetComponentFilter.doFilter(TargetComponentFilter.java:96)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:60)
	at com.day.cq.wcm.core.impl.WCMDebugFilter.doFilter(WCMDebugFilter.java:146)
...
Caused by: java.lang.IllegalStateException: Failed to retrieve path from Item:
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrItemResource.getPath(JcrItemResource.java:82)
	at org.apache.sling.event.impl.jobs.JobManagerImpl.findJobs(JobManagerImpl.java:662)
	at com.day.cq.replication.impl.queue.ReplicationQueueImpl.entries(ReplicationQueueImpl.java:156)
	at com.day.cq.replication.impl.ReplicationStatusImpl.getQueueStatus(ReplicationStatusImpl.java:86)
	at com.day.cq.replication.impl.ReplicationStatusImpl.getPending(ReplicationStatusImpl.java:113)
	at com.day.cq.replication.impl.ReplicationStatusImpl.isPending(ReplicationStatusImpl.java:100)
	at com.day.cq.replication.impl.ReplicationStatusImpl.isDelivered(ReplicationStatusImpl.java:144)
	at com.day.cq.wcm.core.impl.reference.ActivationReferenceSearchServlet.doGet(ActivationReferenceSearchServlet.java:135)
	... 131 common frames omitted
Caused by: javax.jcr.InvalidItemStateException: This item [/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/eventing/jobs/assigned/7757d5f4-10a2-44c3-bb55-931db8d80a01/com.day.cq.replication.job.publish1/2015/9/10/16/10/7757d5f4-10a2-44c3-bb55-931db8d80a01_8] does not exist anymore
	at org.apache.jackrabbit.oak.jcr.delegate.ItemDelegate.checkAlive(ItemDelegate.java:85)
	at org.apache.jackrabbit.oak.jcr.session.operation.ItemOperation.checkPreconditions(ItemOperation.java:34)
	at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.perform(SessionDelegate.java:290)
	at org.apache.jackrabbit.oak.jcr.session.ItemImpl.perform(ItemImpl.java:113)
	at org.apache.jackrabbit.oak.jcr.session.ItemImpl.getPath(ItemImpl.java:153)
	at org.apache.jackrabbit.oak.jcr.session.NodeImpl.getPath(NodeImpl.java:99)
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrItemResource.getPath(JcrItemResource.java:80)
	... 138 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Investigation indicates that the Job was removed concurrently by the Job completing successfully while the UI query was being performed. &lt;/p&gt;

&lt;p&gt;This issue was also reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4853&quot; title=&quot;JobManager.findJobs should skip items that have been removed during the call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4853&quot;&gt;&lt;del&gt;SLING-4853&lt;/del&gt;&lt;/a&gt; in 3.7.2 but not fixed there at the time as it was thought the exception wasn&apos;t thrown. &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4853&quot; title=&quot;JobManager.findJobs should skip items that have been removed during the call&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4853&quot;&gt;&lt;del&gt;SLING-4853&lt;/del&gt;&lt;/a&gt; did fix a different list jobs operation.&lt;/p&gt;</description>
                <environment>Oak on MongoMK with custom compound indexes to speed up queries.</environment>
        <key id="12863604">SLING-5018</key>
            <summary>JobManager.findJobs throws exception when job gets removed while querying.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ianeboston">Ian Boston</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Sep 2015 10:01:26 +0000</created>
                <updated>Mon, 14 Sep 2015 08:42:59 +0000</updated>
                            <resolved>Mon, 14 Sep 2015 08:42:59 +0000</resolved>
                                    <version>Event 3.7.4</version>
                                    <fixVersion>JCR Resource 2.3.12</fixVersion>
                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14743103" author="mpetria" created="Mon, 14 Sep 2015 08:30:20 +0000"  >&lt;p&gt;JcrItemResource.getPath should not throw an IllegalStateException and that was fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4074&quot; title=&quot;Iterating over JCR resources might throw IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4074&quot;&gt;&lt;del&gt;SLING-4074&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14743163" author="ianeboston" created="Mon, 14 Sep 2015 08:42:59 +0000"  >&lt;p&gt;Fixed by installing JCR Resource 2.3.12  containing &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4074&quot; title=&quot;Iterating over JCR resources might throw IllegalStateException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4074&quot;&gt;&lt;del&gt;SLING-4074&lt;/del&gt;&lt;/a&gt; which no longer throws IllegalStateException. No code changes made to address this bug.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12842545">SLING-4853</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 7 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k37r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5017] Moving a JCR node not reflected in JcrNodeResource</title>
                <link>https://issues.apache.org/jira/browse/SLING-5017</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When moving a JCR node via the JCR API behind a resource, Resource.getPath() and Resource.getName() will still return the old path and name:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// e.g. &lt;span class=&quot;code-quote&quot;&gt;&quot;/some/oldname&quot;&lt;/span&gt;
&lt;/span&gt;Resource resource = request.getResource();

&lt;span class=&quot;code-comment&quot;&gt;// move via JCR API (no move available in resource API)
&lt;/span&gt;Node node = resource.adaptTo(Node.class);
node.getSession().move(node.getPath(), node.getParent().getPath() + &lt;span class=&quot;code-quote&quot;&gt;&quot;newname&quot;&lt;/span&gt;);
node.getSession().save();

resource.getName(); &lt;span class=&quot;code-comment&quot;&gt;// returns &lt;span class=&quot;code-quote&quot;&gt;&quot;oldname&quot;&lt;/span&gt;
&lt;/span&gt;resource.getPath(); &lt;span class=&quot;code-comment&quot;&gt;// returns &lt;span class=&quot;code-quote&quot;&gt;&quot;/some/oldname&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is because the path is &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/jcr/resource/src/main/java/org/apache/sling/jcr/resource/internal/helper/jcr/JcrItemResource.java#L83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;cached in JcrItemResource&lt;/a&gt; and it uses the getPath() and &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/api/src/main/java/org/apache/sling/api/resource/AbstractResource.java#L53&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;getName() implementation of AbstractResource&lt;/a&gt; which are based on the cached path.&lt;/p&gt;

&lt;p&gt;To ensure the correct transient JCR semantics, the resource should pass getPath() and getName() through to the underlying Node (respectively Item).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12863574">SLING-5017</key>
            <summary>Moving a JCR node not reflected in JcrNodeResource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alexander.klimetschek">Alexander Klimetschek</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Sep 2015 01:12:58 +0000</created>
                <updated>Mon, 14 Sep 2015 19:40:25 +0000</updated>
                                                                            <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14741827" author="alexander.klimetschek" created="Sat, 12 Sep 2015 01:14:38 +0000"  >&lt;p&gt;Two notes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;should check if other methods have the same issue (knowing that the ValueMap caches property values)&lt;/li&gt;
	&lt;li&gt;using ResourceResolver.commit() (instead of a plain jcr session.save()) does not seem to make a difference, as all it does is call session.save() and there is no invalidation mechanism for existing resource objects (and IMO should not, the JCR implementation already has to cover this tricky part)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14742063" author="cziegeler" created="Sat, 12 Sep 2015 14:01:43 +0000"  >&lt;p&gt;I think we shouldn&apos;t do this (and I think we have discusses this some years ago): As soon as you leave the resource api, and modify the underlying data you will get out of sync for resources fetched before this. This is known and expected. The solution is simple: a) stay in the resource api and b) if you don&apos;t stay there refetch resources.&lt;/p&gt;
</comment>
                            <comment id="14742668" author="alexander.klimetschek" created="Sun, 13 Sep 2015 21:16:44 +0000"  >&lt;p&gt;Problem with refetching is that it often gets cached, for example SlingHttpServletRequest.getResource() is &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/engine/src/main/java/org/apache/sling/engine/impl/request/ContentData.java#L41&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;cached in ContentData&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14742968" author="cziegeler" created="Mon, 14 Sep 2015 05:41:39 +0000"  >&lt;p&gt;There are a lot of these situations - moving is one of them, changes to properties is another etc. In addition there might not be a 1:1 mapping between the node path and the resource path, resources might be decorated or otherwise wrapped.&lt;br/&gt;
The code doing the modifications (like the move) knows what it&apos;s doing, it has to clearly document this and what clients need to expect. This is the only way I see to solve the problem. Otherwise we get a solution which is slightly better but still does not cover all cases; so I think it&apos;s far better to not start going this direction at all.&lt;br/&gt;
Caching of some things is in many cases a necessity for performance - unfortunately that&apos;s a fact.&lt;br/&gt;
The request keeping the resource which was targetted is a good thing and the app should know that once someone moves this resource, it&apos;s not the same anymore.&lt;br/&gt;
Again, there might be situations where it looks pretty easy to fix, but from that fix arise at least two situations where this will cause trouble.&lt;/p&gt;</comment>
                            <comment id="14744100" author="alexander.klimetschek" created="Mon, 14 Sep 2015 19:39:39 +0000"  >&lt;p&gt;I see your points, but the workaround of refetching is extremely ugly in case of a move of the request resource:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// request start
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// ... &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; move ...
&lt;/span&gt;
&lt;span class=&quot;code-comment&quot;&gt;// resource.getPath is cached after moving, use the underlying correct Node path to re-fetch it
&lt;/span&gt;Node node = request.getResource().adaptTo(Node.class);
Resource resource = request.getResourceResolver().getResource(node.getPath());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k313:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5016] SlingWebConsoleSecurityProvider2 does not work if ResourceResolver cannot be adapted to Session</title>
                <link>https://issues.apache.org/jira/browse/SLING-5016</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After the deployment of several configurations (affecting for example the JCR Resource Resolver Factory) we ran into the issue that the &lt;tt&gt;SlingWebConsoleSecurityProvider2&lt;/tt&gt; is active but it always returned a 401. &lt;br/&gt;
The according log from the &lt;tt&gt;SlingAuthenticator&lt;/tt&gt; for this failed authentication to the web console looks like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;11.09.2015 09:52:14.371 *DEBUG* [qtp851550369-82] org.apache.sling.auth.core.impl.SlingAuthenticator doHandleSecurity: Trying to get a session &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; admin
11.09.2015 09:52:14.372 *DEBUG* [qtp851550369-82] org.apache.sling.auth.core.impl.SlingAuthenticator setAttributes: ResourceResolver stored as request attribute: user=admin
11.09.2015 09:52:14.372 *DEBUG* [qtp851550369-82] org.apache.sling.auth.core.impl.SlingAuthenticator login: requesting authentication using handler: com.adobe.cq.creativecloud.cloudims.impl.auth.CloudIMSAuthenticationHandler@47a78ad3
11.09.2015 09:52:14.372 *DEBUG* [qtp851550369-82] org.apache.sling.auth.core.impl.SlingAuthenticator login: requesting authentication using handler: com.day.cq.auth.impl.LoginSelectorHandler@76a68a34
11.09.2015 09:52:14.372 *DEBUG* [qtp851550369-82] org.apache.sling.auth.core.impl.SlingAuthenticator login: requesting authentication using handler: com.adobe.granite.auth.cert.impl.ClientCertAuthHandler@7fad0b6d
11.09.2015 09:52:14.372 *DEBUG* [qtp851550369-82] org.apache.sling.auth.core.impl.SlingAuthenticator login: requesting authentication using handler: Token Authentication Handler
11.09.2015 09:52:14.372 *DEBUG* [qtp851550369-82] org.apache.sling.auth.core.impl.SlingAuthenticator login: requesting authentication using handler: com.adobe.cq.dam.s7imaging.impl.auth.MemoryTokenAuthHandler@4bdc6939
11.09.2015 09:52:14.878 *DEBUG* [qtp851550369-81] org.apache.sling.auth.core.impl.SlingAuthenticator doHandleSecurity: Trying to get a session &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; admin
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From these logs and from looking at the sources I assume the following happens here:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;SlingWebConsoleSecurityProvider2.authenticate&lt;/tt&gt; calls &lt;tt&gt;Authenticator.handleSecurity&lt;/tt&gt; (which returns true)&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;SlingWebConsoleSecurityProvider2.authenticate&lt;/tt&gt; tries to adapt resource resolver to session -&amp;gt; this fails and therefore &lt;tt&gt;Authenticator.login&lt;/tt&gt; is called&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;IMHO the SlingWebConsoleSecurityProvider2 should only be registered if the adaptation from resource resolver to session works. I am not sure under which circumstances this may fail, but if this fails the whole security provider should be inactive!&lt;/p&gt;</description>
                <environment></environment>
        <key id="12863330">SLING-5016</key>
            <summary>SlingWebConsoleSecurityProvider2 does not work if ResourceResolver cannot be adapted to Session</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Sep 2015 08:59:11 +0000</created>
                <updated>Thu, 4 May 2023 15:40:35 +0000</updated>
                            <resolved>Thu, 4 May 2023 15:40:35 +0000</resolved>
                                    <version>Web Console Security Provider 1.1.6</version>
                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k1kn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5015] SlingWebConsoleSecurityProvider cannot deal with an unregistered SlingAuthenticator</title>
                <link>https://issues.apache.org/jira/browse/SLING-5015</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the &lt;tt&gt;WebConsoleSecurityProvider&lt;/tt&gt; and &lt;tt&gt;WebConsoleSecurityProvider&lt;/tt&gt; are only registered once manually during the startup phase. If afterwards the &lt;tt&gt;SlingAuthenticator&lt;/tt&gt; is unregistered (e.g. because the &lt;tt&gt;JcrResourceResolverFactory&lt;/tt&gt; has been reconfigured) the security providers will still stay active, although they are useless because they don&apos;t have any SlingAuthenticator they can use. Instead the security providers should be unregistered as well (that one is still able to use the webconsole at that time).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12863100">SLING-5015</key>
            <summary>SlingWebConsoleSecurityProvider cannot deal with an unregistered SlingAuthenticator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Sep 2015 15:56:00 +0000</created>
                <updated>Sun, 13 Mar 2016 14:03:13 +0000</updated>
                            <resolved>Fri, 11 Sep 2015 08:59:46 +0000</resolved>
                                    <version>Web Console Security Provider 1.1.6</version>
                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14740438" author="kwin" created="Fri, 11 Sep 2015 08:59:36 +0000"  >&lt;p&gt;This is actually not true. I was experiencing another case which I describe in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5016&quot; title=&quot;SlingWebConsoleSecurityProvider2 does not work if ResourceResolver cannot be adapted to Session&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5016&quot;&gt;&lt;del&gt;SLING-5016&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
The unregistration and registration of the different types of SlingWebConsoleSecurityProviders work fine.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k06n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5014] Installer blacklist, to avoid reinstalling older bundles</title>
                <link>https://issues.apache.org/jira/browse/SLING-5014</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In case a bundle has mutliple install candiates only the highest version (with the highest priorty for the same versions) wins. An uninstall directive in the Sling bootstrap.txt file or provisioning model uninstalls this version. The way the OSGi install behavior is defined this lets the next artifact in the priority queue to get active and consequently only leads to downgrade to the next in the queue.&lt;/p&gt;

&lt;p&gt;As the uninstall directive declares a range that should be uninstalled the expectation is that after a startup with such an uninstall directive none of the declared versions are in an installed state. In consequence the OSGi installer must save this metainformation in the state that prevents a downgrade to a version that is part of an active uninstall directive.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12863046">SLING-5014</key>
            <summary>Installer blacklist, to avoid reinstalling older bundles</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="dsuess">Dominik S&#252;&#223;</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Sep 2015 13:15:25 +0000</created>
                <updated>Thu, 30 Mar 2017 15:17:36 +0000</updated>
                            <resolved>Wed, 19 Oct 2016 14:28:54 +0000</resolved>
                                    <version>Installer Core 3.6.6</version>
                                    <fixVersion>Installer Core 3.7.0</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14738846" author="cziegeler" created="Thu, 10 Sep 2015 14:39:06 +0000"  >&lt;p&gt;the uninstall directive is not handled by the installer, therefore the installer has zero knowledge of this directive.&lt;/p&gt;</comment>
                            <comment id="14738901" author="dsuess" created="Thu, 10 Sep 2015 15:19:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; ok - to rephrase. The uninstall directive leads to a corresponding uninstall task which afaiu only uninstalls the currently installed version of the bundle leading to a downgrade. I yet haven`t found the mechanism that generates the uninstall task for this directive - probably this uninstall task would need to be able to provide further metadata to define if only the currently installed needs to be removed (leading to a downgrade) or if a whole range is about to be removed, making the osgi installer aware which versions would be valid for installation and which ones need to be &quot;blacklisted&quot;.&lt;/p&gt;</comment>
                            <comment id="14738916" author="cziegeler" created="Thu, 10 Sep 2015 15:25:48 +0000"  >&lt;p&gt;No, the uninstall directive does not lead to a task - the uninstall directive is directly invoked by the launchpad, before the framework starts.&lt;/p&gt;</comment>
                            <comment id="14738989" author="dsuess" created="Thu, 10 Sep 2015 16:03:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - ok so we just detect that the installable is gone right? Could you please point me to the code that processes the uninstall directive in the launchpad so I can check if my conclusion based on the observed behavior was really correct. Anyways I think I got your point that we need something additional to &quot;persist&quot; this uninstall information as all the metainformation stored in the model is lost in the process of the subsequent events that finally lead to the persisted osgi installer state.&lt;/p&gt;</comment>
                            <comment id="14739380" author="cziegeler" created="Thu, 10 Sep 2015 19:05:43 +0000"  >&lt;p&gt;The code for the uninstall handling is in launchpad base, package org.apache.sling.launchpad.base.impl.bootstrapcommands&lt;/p&gt;</comment>
                            <comment id="14987534" author="dsuess" created="Tue, 3 Nov 2015 16:14:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; the last days I created a patch for the installer core and added a new bundle that implement a blacklist feature for the installer. &lt;/p&gt;

&lt;p&gt;The current bootstrap method just leads to uninstallation of a bundle but as soon as further (non-uninstalled) candidates than the uninstalled ones exist in the system the installer will install those. And even if this behavior would be fixed nothing would prevent a user from accidentially triggering a new installation by installing some obsolete Package containing such an installable.&lt;/p&gt;

&lt;p&gt;The default blacklist implementation therefore by default takes the uninstall commands from the sling_bootstrap.txt and prevents any installation (via installer) of the defined bundles (respecting version ranges). It is also possible to define further rules via osgi config.&lt;/p&gt;

&lt;p&gt;The blacklist implementation does also take care of uninstallation and downgrades and therefore eliminate issues with obsolete bundles hanging around in the system and therefore preventing a clean uninstallation of bundles without the need to do further housekeeping in the repository and/or filesystem.&lt;/p&gt;</comment>
                            <comment id="14987917" author="cziegeler" created="Tue, 3 Nov 2015 19:24:17 +0000"  >&lt;p&gt;We definitely need a way where you can override the info from the uninstall section. We already had the use case where someone wanted to reinstall a bundle which was removed by the uninstall section on startup&lt;/p&gt;</comment>
                            <comment id="14988385" author="dsuess" created="Tue, 3 Nov 2015 23:05:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - this patch is more about granting that  the uninstall directives really are taken into account. Although the OSGi config allows to override the uninstall directives as blacklist definitions the current implementation does not prevent uninstallation by the bootstrap installer on next startup.&lt;br/&gt;
We could think about an alternative way of defining the &quot;amendment&quot;/override of sling_bootstrap.txt in an install location that would need to be looked up before the bootstrap installer kicks in. This definition then should be respected by the blacklist service as well (just like utilizing sling_bootstrap.txt right now)&lt;/p&gt;

&lt;p&gt;It would anyways be great if you could have a quick look at my implementation as I want to make sure I haven&apos;t missed scenarios.&lt;br/&gt;
Note: this is more of a safety net for scenarios where installables are present that shouldn&apos;t be installed. The various different ways we have to provide installables lead to a state where it is not unlikely (and multiple time observed) that this safety net needs to kick in.&lt;/p&gt;</comment>
                            <comment id="15000306" author="bdelacretaz" created="Wed, 11 Nov 2015 12:30:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;this is more of a safety net for scenarios where installables are present that shouldn&apos;t be installed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It looks like this is the root cause: unwanted installable bundles being present in the content repository and (correctly) picked up by the installer.&lt;/p&gt;

&lt;p&gt;Shouldn&apos;t we rather provide a way to cleanly remove those unwanted installables from the repository? I&apos;ve seen several upgrade-related cases where a &quot;repository cleanup&quot; phase would be useful to get rid of leftovers from previous versions before making the repository service available. We might implement such a cleanup phase (with extension points) as a generally useful upgrade-related feature, and avoid complicating the installer even more with a blacklist than in the end is just a workaround for this &quot;stale installables&quot; issue.&lt;/p&gt;</comment>
                            <comment id="15000322" author="dsuess" created="Wed, 11 Nov 2015 12:46:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; this might be orthogonal. Anyways it might be possible that the candidates come from other arbitrary installers that the instance cannot control (immutable). Unless we do a breaking api change that mandates install providers to be able to handle cleanup we have no reliable way to enforce such a cleanup. For the repo we additionally have the case that users might &quot;accidentially&quot; reinstall packages containing harmful bundles that can tear down a complete instance completely. Therefore I think this safety net is very reasonable while I agree we should also look for a mechanism to clean up where we can.&lt;/p&gt;</comment>
                            <comment id="15000338" author="bdelacretaz" created="Wed, 11 Nov 2015 13:11:24 +0000"  >&lt;p&gt;If you want to completely forbid reinstalling obsolete bundles the only safe way is blacklists at the BundleContext level, for bundle install and upgrade operations. Apart from that I agree that cleanup might be orthogonal to this. &lt;/p&gt;

&lt;p&gt;My current use cases is system upgrades which sometimes contain unwanted leftovers from older versions, and cleanup would fix that.&lt;/p&gt;</comment>
                            <comment id="15554410" author="cziegeler" created="Fri, 7 Oct 2016 07:39:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt; Thanks for the patch, unfortunately , the patch also contains a lot of reformatting. In addition I think this should go directory into the core, avoiding the unstable dependency to the existence of another service. The installer might start before the blacklistener service etc. So I think making this a feature of the OSGi installer itself, is the better option.&lt;br/&gt;
Could you please provide an updated patch?&lt;/p&gt;</comment>
                            <comment id="15564988" author="dsuess" created="Tue, 11 Oct 2016 09:18:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - I can revisit this within the next 1-2 weeks. Sorry about the reformatting, this was created right after switching a new IDE which had some automatisms in there that I was not used to (and forgot to crosscheck the patch as I just did search for initial review).  I will crosscheck the osgi installer and see how to best hook in there and see how we can make the corresponding state handling of OSGi Installer more reliable based on problematic scenarios that we worked around or patched in quite brute manner in the past (e.g. cleaning osgi installer state cache). So this might take some time until I come up with a sequence of patches addressing those issues including the aspect of blacklisting.&lt;/p&gt;</comment>
                            <comment id="15585689" author="dsuess" created="Tue, 18 Oct 2016 15:03:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - patch has been refactored to be integrated in the installer core and  I created the corresponding PR.&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling/pull/183&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/183&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note that the ITs  due to the nature of the OsgiInstaller currently take 2-3 additional minutes due to necessary bundle restarts which are delayed by WABundleRefresher &amp;amp; PABundleRefresher (hardcoded 90second refresh timer).&lt;/p&gt;</comment>
                            <comment id="15587722" author="cziegeler" created="Wed, 19 Oct 2016 05:22:13 +0000"  >&lt;p&gt;Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think there shouldn&apos;t be a need to change the API to add this functionality. The blacklist can be checked in different places, with the patch it is checked more or less in the middle. I think we should either do it before or after &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
There are three steps:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;detecting a resource through the transformer - we could blacklist directly after this and discard the resource immediately&lt;/li&gt;
	&lt;li&gt;state handling (this is where the patch is doing the work right now)&lt;/li&gt;
	&lt;li&gt;task creation - we could also discard the bundles directly here and and set the state accordingly&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15587906" author="dsuess" created="Wed, 19 Oct 2016 07:20:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - I was checking the various options before - the challenging part is dealing with the uninstall cases where lower level install candidates might hang around. The Bootstrap Installer does not take of cleaning the install state of further install candidates so further install candidates will still hang around and lead to downgrade.  (see scenario 1). A default handling might not be applicable as the version range of the uninstall directive might in fact allow a certain downgrade (see scenario 2) - I know that the lower boundary cases are probably an edge case but these are present for the bootstrap installer so the osgi installer needs to respect them. As this affects the state based on available  install candidates I saw no other location but the BundleTaskCreator to perform the blacklisting. The API change was necessary as TaskResourceGroup#getNextActiveResource  had a hard wired behavior to deliver only the second resource. Spreading the blacklist logic across BundleTaskCreator AND EntityResourceList as the TaskResourceGroup implementation would spread the logic in a way that would make it a lot harder to understand and wires the implementations together. If EntityResourceList always would be the only implementation we &quot;could&quot; cast to the implementation and use the method instead of relying on publicly exposing this new method, yet this is error prone as in case the implementation needs to change at some point the implicit need for this method would not be documented.&lt;/p&gt;

&lt;p&gt;Having a new method in a Provider API leading to a minor version increment to a package anyways only implemented by the Sling Installer itself sounded like a fair compromise and least intrusive change.&lt;/p&gt;


&lt;p&gt;Scenario 1:&lt;br/&gt;
uninstall directive for bundle-x [1.0, 1.1)&lt;br/&gt;
Installed version 1.1, version 1.0 is in install state&lt;br/&gt;
Bootstrap directive will have no impact&lt;br/&gt;
Uninstallation of version 1.1 happening via osgi installer&lt;br/&gt;
as no further install candidate is existing the bundle needs to be completely uninstalled (no downgrade)&lt;/p&gt;

&lt;p&gt;Scenario 2:&lt;br/&gt;
uninstall directive for bundle-y [2.0,3.0) - because 2.x line had a serious bug&lt;br/&gt;
installed version: 3.0 versions 1.0 &amp;amp; 2.x are in install state&lt;br/&gt;
Bootstrap directive will have no impact&lt;br/&gt;
Uninstallation of version 3.0 will need to downgrade to 1.0 as 2.x versions are blacklisted (no uninstallation)&lt;/p&gt;
</comment>
                            <comment id="15588191" author="dsuess" created="Wed, 19 Oct 2016 09:36:20 +0000"  >&lt;p&gt;Pullrequest has been updated based on feedback by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; - as invocation chain leads to the case that the implementation will always be EntityResourceList casting is an appropriate way to prevent API changes but rely on the internal implementation details and just introduce the new method in there. &lt;/p&gt;</comment>
                            <comment id="15588925" author="cziegeler" created="Wed, 19 Oct 2016 14:28:54 +0000"  >&lt;p&gt;Thanks for your patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt;&lt;br/&gt;
I&apos;ve applied it in rev 1765608 together with some more cosmetics:&lt;br/&gt;
updated to latest parent pom&lt;br/&gt;
updated to OSGi annotations&lt;br/&gt;
updated to OSGi R6&lt;/p&gt;</comment>
                            <comment id="15815010" author="bdelacretaz" created="Tue, 10 Jan 2017 13:48:57 +0000"  >&lt;p&gt;Do we have any documentation on this?&lt;/p&gt;

&lt;p&gt;I have a similar use case where I&apos;d like to completely ignore some resources that are supplied to the installer, based on patterns in their URLs, when starting a fresh Sling instance.&lt;/p&gt;

&lt;p&gt;Does this feature help for that?&lt;/p&gt;</comment>
                            <comment id="15949268" author="henry kuijpers" created="Thu, 30 Mar 2017 15:17:36 +0000"  >&lt;p&gt;Is it also possible to make exceptions to this installer blacklist? I.e. the sling_bootstrap.txt says that certain bundles must be uninstalled (upgraded AEM), but we are still installing these bundles and requiring them (feature not yet upgraded after upgrade).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12770340" name="SLING-5014-1.diff" size="51029" author="dsuess" created="Tue, 3 Nov 2015 16:14:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jzun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5010] Sling Models: Stale StaticInjectionAnnotationProcesssorFactory list depending on bundle startup order</title>
                <link>https://issues.apache.org/jira/browse/SLING-5010</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;scenario:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;sling models impl 1.2.0&lt;/li&gt;
	&lt;li&gt;another bundle providing custom sling model annotations with a custom StaticInjectAnnotationProcessorFactory implementation&lt;/li&gt;
	&lt;li&gt;a sling model annotated with this custom annotation that has an flag optional = true&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;depending on startup order the optional flag is evaluated as true or false. if one of the bundles is restarted the flag is evaluated correctly.&lt;/p&gt;

&lt;p&gt;reason: depending on startup order the model may get added to the modeladapterfactory before the StaticInjectAnnotationProcessorFactory is registered. than the optional flag is not evaluated correctly. if the StaticInjectAnnotationProcessorFactory is registered a few moments later the (wrong) result is still cached in the ModelClass instance.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12862821">SLING-5010</key>
            <summary>Sling Models: Stale StaticInjectionAnnotationProcesssorFactory list depending on bundle startup order</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>models</label>
                    </labels>
                <created>Wed, 9 Sep 2015 17:08:16 +0000</created>
                <updated>Tue, 15 Sep 2015 14:00:40 +0000</updated>
                            <resolved>Wed, 9 Sep 2015 20:05:15 +0000</resolved>
                                    <version>Sling Models Impl 1.2.0</version>
                                    <fixVersion>Sling Models Impl 1.2.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14737487" author="sseifert@pro-vision.de" created="Wed, 9 Sep 2015 20:05:15 +0000"  >&lt;p&gt;Completed: At revision: 1702098  &lt;/p&gt;

&lt;p&gt;fixed and added unit test for this scenario&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jyin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5007] resourceresolver-mock: listChildren broken for root path &quot;/&quot;</title>
                <link>https://issues.apache.org/jira/browse/SLING-5007</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;listChildren(&quot;/&quot;) is broken and returns no result.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12862455">SLING-5007</key>
            <summary>resourceresolver-mock: listChildren broken for root path &quot;/&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Tue, 8 Sep 2015 15:59:13 +0000</created>
                <updated>Tue, 15 Sep 2015 14:01:10 +0000</updated>
                            <resolved>Tue, 8 Sep 2015 16:01:02 +0000</resolved>
                                    <version>Testing ResourceResolver Mock 1.1.8</version>
                                    <fixVersion>Testing ResourceResolver Mock 1.1.10</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14735045" author="sseifert@pro-vision.de" created="Tue, 8 Sep 2015 16:01:02 +0000"  >&lt;p&gt;Completed: At revision: 1701828  &lt;/p&gt;

&lt;p&gt;fixed and added unit test.&lt;br/&gt;
refactored path matching a bit.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jw9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5005] Root Resource lists child Resource paths incorrecty</title>
                <link>https://issues.apache.org/jira/browse/SLING-5005</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following code appears to generate incorrect paths that when given to other bundles that dont expect messy paths causes problems.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Iterator&amp;lt;Resource&amp;gt;  i = resourceResolver.getResource(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;).listChildren();
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;(i.hasNext()) {
  LOGGER.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Child Path {} &quot;&lt;/span&gt;,i.next().getPath());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Produces&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
&lt;span class=&quot;code-comment&quot;&gt;//etc
&lt;/span&gt;...
/content
...
/libs
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The // on some of the root resources causes issues.&lt;br/&gt;
Might be Oak related.&lt;/p&gt;</description>
                <environment>AEM 6.1 running JCR Resource 2.5.0 on MongoMK.</environment>
        <key id="12862322">SLING-5005</key>
            <summary>Root Resource lists child Resource paths incorrecty</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="ianeboston">Ian Boston</assignee>
                                    <reporter username="ianeboston">Ian Boston</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Sep 2015 06:05:20 +0000</created>
                <updated>Tue, 8 Sep 2015 11:18:50 +0000</updated>
                            <resolved>Tue, 8 Sep 2015 11:18:50 +0000</resolved>
                                    <version>JCR Resource 2.5.0</version>
                                    <fixVersion>JCR Resource 2.5.2</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14734402" author="ianeboston" created="Tue, 8 Sep 2015 08:13:01 +0000"  >&lt;p&gt;To verify, enable debug logging on org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator  and iterate through a Resource from &quot;/&quot;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;08.09.2015 07:59:53.485 *DEBUG* [pool-12-thread-26-&amp;lt;main queue&amp;gt;(com/adobe/aem/core/migrate/BACKUP)] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=sling:Folder, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=&lt;span class=&quot;code-comment&quot;&gt;//apps
&lt;/span&gt;08.09.2015 07:59:53.485 *DEBUG* [pool-12-thread-26-&amp;lt;main queue&amp;gt;(com/adobe/aem/core/migrate/BACKUP)] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=nt:folder, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=&lt;span class=&quot;code-comment&quot;&gt;//bin
&lt;/span&gt;08.09.2015 07:59:53.486 *DEBUG* [pool-12-thread-26-&amp;lt;main queue&amp;gt;(com/adobe/aem/core/migrate/BACKUP)] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=sling:Folder, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=&lt;span class=&quot;code-comment&quot;&gt;//conf
&lt;/span&gt;08.09.2015 07:59:53.486 *DEBUG* [pool-12-thread-26-&amp;lt;main queue&amp;gt;(com/adobe/aem/core/migrate/BACKUP)] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=sling:redirect, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=&lt;span class=&quot;code-comment&quot;&gt;//content
&lt;/span&gt;08.09.2015 07:59:53.486 *DEBUG* [pool-12-thread-26-&amp;lt;main queue&amp;gt;(com/adobe/aem/core/migrate/BACKUP)] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=sling:Folder, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=&lt;span class=&quot;code-comment&quot;&gt;//etc&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator#seek calls org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator#getPath which has test coverage for the &quot;/&quot;.&lt;/p&gt;

&lt;p&gt;May be an issue with node.getName() or node.getPath() for children of the root path. Checking to see if possible to reproduce in Sling trunk.&lt;/p&gt;
</comment>
                            <comment id="14734414" author="ianeboston" created="Tue, 8 Sep 2015 08:31:46 +0000"  >&lt;p&gt;Does not happen in Sling quickstart, JCR Resource 2.5.7 with default runmode.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;08.09.2015 09:28:54.292 *DEBUG* [0:0:0:0:0:0:0:1 [1441700933922] GET /.explorer.item.html HTTP/1.1] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=rep:system, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=/jcr:system
08.09.2015 09:28:54.293 *DEBUG* [0:0:0:0:0:0:0:1 [1441700933922] GET /.explorer.item.html HTTP/1.1] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=sling:Folder, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;
08.09.2015 09:28:54.294 *DEBUG* [0:0:0:0:0:0:0:1 [1441700933922] GET /.explorer.item.html HTTP/1.1] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=sling:Folder, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=/apps
08.09.2015 09:28:54.295 *DEBUG* [0:0:0:0:0:0:0:1 [1441700933922] GET /.explorer.item.html HTTP/1.1] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=nt:file, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=/gradient.png
08.09.2015 09:28:54.382 *DEBUG* [0:0:0:0:0:0:0:1 [1441700933922] GET /.explorer.item.html HTTP/1.1] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=nt:file, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=/index.html
08.09.2015 09:28:54.386 *DEBUG* [0:0:0:0:0:0:0:1 [1441700933922] GET /.explorer.item.html HTTP/1.1] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=nt:file, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=/signup.html
08.09.2015 09:28:54.389 *DEBUG* [0:0:0:0:0:0:0:1 [1441700933922] GET /.explorer.item.html HTTP/1.1] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=nt:file, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=/sling-logo.png
08.09.2015 09:28:54.394 *DEBUG* [0:0:0:0:0:0:0:1 [1441700933922] GET /.explorer.item.html HTTP/1.1] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=sling:Folder, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=/sling-test
08.09.2015 09:28:54.399 *DEBUG* [0:0:0:0:0:0:0:1 [1441700933922] GET /.explorer.item.html HTTP/1.1] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=nt:file, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=/sling.css
08.09.2015 09:28:54.402 *DEBUG* [0:0:0:0:0:0:0:1 [1441700933922] GET /.explorer.item.html HTTP/1.1] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=sling:Folder, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=/etc
08.09.2015 09:28:54.411 *DEBUG* [0:0:0:0:0:0:0:1 [1441700933922] GET /.explorer.item.html HTTP/1.1] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=sling:Folder, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=/sightly
08.09.2015 09:28:54.415 *DEBUG* [0:0:0:0:0:0:0:1 [1441700933922] GET /.explorer.item.html HTTP/1.1] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: Returning Resource JcrNodeResource, type=sling:Folder, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, path=/libs
08.09.2015 09:28:54.419 *DEBUG* [0:0:0:0:0:0:0:1 [1441700933922] GET /.explorer.item.html HTTP/1.1] org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator seek: No more nodes, iterator exhausted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14734640" author="cziegeler" created="Tue, 8 Sep 2015 11:14:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ieb%40tfd.co.uk&quot; class=&quot;user-hover&quot; rel=&quot;ieb@tfd.co.uk&quot;&gt;ieb@tfd.co.uk&lt;/a&gt; Isn&apos;t this &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4588&quot; title=&quot;JcrNodeResourceIterator : wrong paths generated when the parent resource is the root node.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4588&quot;&gt;&lt;del&gt;SLING-4588&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="14734649" author="ianeboston" created="Tue, 8 Sep 2015 11:18:50 +0000"  >&lt;p&gt;Yes, thanks, fixed in 2.5.2&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12819312">SLING-4588</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jvfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4998] sling-mock: ResponseBodySupport - use default charset if no response charset is set</title>
                <link>https://issues.apache.org/jira/browse/SLING-4998</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;when getting response body from the mock response a NPE ist thrown if no charset was set in the response.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12861701">SLING-4998</key>
            <summary>sling-mock: ResponseBodySupport - use default charset if no response charset is set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Thu, 3 Sep 2015 22:38:47 +0000</created>
                <updated>Thu, 10 Sep 2015 21:12:10 +0000</updated>
                            <resolved>Thu, 3 Sep 2015 22:39:35 +0000</resolved>
                                    <version>Testing Sling Mock 1.4.0</version>
                                    <fixVersion>Testing Sling Mock 1.5.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14729941" author="sseifert@pro-vision.de" created="Thu, 3 Sep 2015 22:39:35 +0000"  >&lt;p&gt;rev. 1701143&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jrp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4997] Inconsistency in ModelFactory.isModelClass()</title>
                <link>https://issues.apache.org/jira/browse/SLING-4997</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4056&quot; title=&quot;ModelFactory.canCreateFromAdaptable reports false errors when using &amp;quot;adapters&amp;quot; on models&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4056&quot;&gt;&lt;del&gt;SLING-4056&lt;/del&gt;&lt;/a&gt; there was a change on a method in the &lt;tt&gt;ModelFactory&lt;/tt&gt;:&lt;br/&gt;
&lt;tt&gt;public boolean isModelClass(Class&amp;lt;?&amp;gt; modelClass)&lt;/tt&gt; became&lt;br/&gt;
&lt;tt&gt;public boolean isModelClass(Object adaptable, Class&amp;lt;?&amp;gt; type)&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;The adaptable parameter was necessary because of the alternate adapter classes defined in &lt;a href=&quot;https://sling.apache.org/documentation/bundles/models.html#specifying-an-alternate-adapter-class-since-sling-models-110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/models.html#specifying-an-alternate-adapter-class-since-sling-models-110&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If you now have a Model defined like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Model(adaptables = Resource.class)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyModel
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;a call of &lt;tt&gt;ModelFactory.isModelClass(&amp;lt;some SlingHttpServletRequest&amp;gt;, MyModel.class)&lt;/tt&gt; returns &lt;tt&gt;true&lt;/tt&gt;, although the model class is only defined on the adaptable &lt;tt&gt;Resource&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;On the other hand if you define a model like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Model(adapters=MyModel, adaptables = Resource.class)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyModelImpl &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; MyModel
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;a call of &lt;tt&gt;ModelFactory.isModelClass(&amp;lt;some SlingHttpServletRequest&amp;gt;, MyModel.class)&lt;/tt&gt; returns &lt;tt&gt;false&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12861609">SLING-4997</key>
            <summary>Inconsistency in ModelFactory.isModelClass()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Sep 2015 15:57:14 +0000</created>
                <updated>Mon, 21 Sep 2015 12:37:28 +0000</updated>
                            <resolved>Thu, 10 Sep 2015 08:38:14 +0000</resolved>
                                    <version>Sling Models API 1.2.0</version>
                                    <fixVersion>Sling Models API 1.2.2</fixVersion>
                    <fixVersion>Sling Models Impl 1.2.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14729312" author="kwin" created="Thu, 3 Sep 2015 16:00:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; Any ideas how to solve this? I would like to get rid of the additional parameter &lt;tt&gt;adaptable&lt;/tt&gt; in the &lt;tt&gt;isModelClass&lt;/tt&gt; because that parameter is rather hard to understand, but then we can no longer support the alternate adapters concept.&lt;/p&gt;</comment>
                            <comment id="14734059" author="sseifert@pro-vision.de" created="Mon, 7 Sep 2015 22:31:28 +0000"  >&lt;p&gt;yes, you&apos;re right, the current behavior/signature is not consistent and probably not useful at all.&lt;/p&gt;

&lt;p&gt;btw, it seems to me that the implementation of canCreateFromAdaptable can report false answers as well: if you pass in a class with @Model anntation that was not registered to the ModelAdapterFactory (e.g. because package name not listed in the bundle headers) then it still may return true - because of the &quot;normally this code path is not executed, because all types are cached in adapterImplementations - it is still useful for unit testing&quot; code path. perhaps we should remove this and make sure false is returned in this case?&lt;/p&gt;

&lt;p&gt;coming back to isModelClass: what is the main goal of this method (it&apos;s not exactly described in the javadocs)? If it really should only check of the given class has a model annotation we can remove the adaptable parameter (that means deprecate this signature and add a new one without adaptable). if one wants to check in combination with alternate adapters he shoud use canCreateFromAdaptable instead.&lt;/p&gt;</comment>
                            <comment id="14738407" author="kwin" created="Thu, 10 Sep 2015 08:37:55 +0000"  >&lt;p&gt;Committed a fix with &lt;a href=&quot;http://svn.apache.org/r1702186&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1702186&lt;/a&gt;. With that I also clarified the javadocs on that method and added an integration test.&lt;/p&gt;</comment>
                            <comment id="14738607" author="sseifert@pro-vision.de" created="Thu, 10 Sep 2015 11:30:20 +0000"  >&lt;p&gt;you broke the API compatibility by setting the package version to 2.0.0 (OSGi will rate this by default as not compatible to 1.0.0). this was not intended.&lt;br/&gt;
i see that the sling models APIs are not marked yet with @ProviderType and @ConsumerType annotations - i will create a separate ticket for this and apply them.&lt;/p&gt;

&lt;p&gt;in rev. 1702220 i added @ProviderType to ModelFactory interface and lowered the package version to 1.1.0, making it backward compatible.&lt;/p&gt;</comment>
                            <comment id="14900584" author="kwin" created="Mon, 21 Sep 2015 12:37:28 +0000"  >&lt;p&gt;I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5029&quot; title=&quot;ModelFactory.canCreateFromAdaptable can report false positives&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5029&quot;&gt;&lt;del&gt;SLING-5029&lt;/del&gt;&lt;/a&gt; about the inconsistency in canCreateFromAdaptable.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12863019">SLING-5013</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jr4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4996] FullTextIndexingTest needs very long (60 seconds) timeout for Oak</title>
                <link>https://issues.apache.org/jira/browse/SLING-4996</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I had to increase the timeout to 60 seconds in the &lt;tt&gt;launchpad/integration-tests/.../FullTextIndexingTest&lt;/tt&gt; to make it pass reliably with Oak on Jenkins.&lt;/p&gt;

&lt;p&gt;I suspect the Oak indexes are not always ready when the test runs: the error log shows &quot;org.apache.jackrabbit.oak.plugins.index.IndexUpdate Indexing report&quot; messages after the test runs, which I suppose signals the end of an indexing task.&lt;/p&gt;

&lt;p&gt;We should find out how to take this into account in the tests, either wait for all required indexes to be ready before starting our tests, or having a way to find out whether a specific set of indexes is ready before starting a specific test.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12861590">SLING-4996</key>
            <summary>FullTextIndexingTest needs very long (60 seconds) timeout for Oak</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-it</label>
                    </labels>
                <created>Thu, 3 Sep 2015 14:27:53 +0000</created>
                <updated>Wed, 23 Aug 2017 21:01:30 +0000</updated>
                            <resolved>Wed, 23 Aug 2017 21:01:30 +0000</resolved>
                                                    <fixVersion>Launchpad Testing 10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15050513" author="bdelacretaz" created="Thu, 10 Dec 2015 10:22:10 +0000"  >&lt;p&gt;Unassigning tickets on which I&apos;m not currently working&lt;/p&gt;</comment>
                            <comment id="16138972" author="rombert" created="Wed, 23 Aug 2017 19:55:47 +0000"  >&lt;p&gt;Note that the test was removed in &lt;a href=&quot;https://svn.apache.org/r1797403&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1797403&lt;/a&gt; for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6928&quot; title=&quot;Remove servlets.compat and commons.json from launchpad.testing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6928&quot;&gt;&lt;del&gt;SLING-6928&lt;/del&gt;&lt;/a&gt;, presumably as it was using the servlets.compat bundle to verifying the test results. However, this should be restored.&lt;/p&gt;</comment>
                            <comment id="16139098" author="rombert" created="Wed, 23 Aug 2017 21:01:15 +0000"  >&lt;p&gt;After restoring the test ( &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7081&quot; title=&quot;Restore FullTextIndexingTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7081&quot;&gt;&lt;del&gt;SLING-7081&lt;/del&gt;&lt;/a&gt; ) the test finished in 10-15 seconds for 3 passes, so that&apos;s 3-5 seconds per individual test.&lt;/p&gt;

&lt;p&gt;Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 10.653 sec - in org.apache.sling.launchpad.webapp.integrationtest.indexing.FullTextIndexingTest&lt;br/&gt;
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 14.051 sec - in org.apache.sling.launchpad.webapp.integrationtest.indexing.FullTextIndexingTest&lt;/p&gt;

&lt;p&gt;In &lt;a href=&quot;https://svn.apache.org/r1805959&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1805959&lt;/a&gt; I&apos;ve set the timeout to 15 seconds per test, should be more than enough.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jr0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4992] 3 Sightly integration tests fail</title>
                <link>https://issues.apache.org/jira/browse/SLING-4992</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Tentatively assigning this to Radu, I suppose you&apos;ve been working on this lately.&lt;/p&gt;

&lt;p&gt;The following 3 tests fail both in our Jenkins builds and on my box:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;testUseAPIWithOSGIService&lt;/b&gt;(org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT)  Time elapsed: 0.066 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
io.sightly.tck.http.ClientException: Received status code 500, expected 200 - url &lt;a href=&quot;http://localhost:54792//sightly/use.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:54792//sightly/use.html&lt;/a&gt;&lt;br/&gt;
	at io.sightly.tck.http.Client.getStringContent(Client.java:82)&lt;br/&gt;
	at org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT.testUseAPIWithOSGIService(SlingSpecificsSightlyIT.java:70)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;testAdaptablesUseAPI&lt;/b&gt;(org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT)  Time elapsed: 0.041 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
io.sightly.tck.http.ClientException: Received status code 500, expected 200 - url &lt;a href=&quot;http://localhost:54792//sightly/use.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:54792//sightly/use.html&lt;/a&gt;&lt;br/&gt;
	at io.sightly.tck.http.Client.getStringContent(Client.java:82)&lt;br/&gt;
	at org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT.testAdaptablesUseAPI(SlingSpecificsSightlyIT.java:62)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;testSlingModelsUseAPI&lt;/b&gt;(org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT)  Time elapsed: 0.031 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
io.sightly.tck.http.ClientException: Received status code 500, expected 200 - url &lt;a href=&quot;http://localhost:54792//sightly/use.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:54792//sightly/use.html&lt;/a&gt;&lt;br/&gt;
	at io.sightly.tck.http.Client.getStringContent(Client.java:82)&lt;br/&gt;
	at org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT.testSlingModelsUseAPI(SlingSpecificsSightlyIT.java:53)&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12861493">SLING-4992</key>
            <summary>3 Sightly integration tests fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-it</label>
                    </labels>
                <created>Thu, 3 Sep 2015 08:16:00 +0000</created>
                <updated>Thu, 3 Sep 2015 11:33:44 +0000</updated>
                            <resolved>Thu, 3 Sep 2015 09:54:25 +0000</resolved>
                                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14728781" author="radu.cotescu" created="Thu, 3 Sep 2015 09:54:25 +0000"  >&lt;p&gt;Issue should be fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1700973&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1700973&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14728882" author="bdelacretaz" created="Thu, 3 Sep 2015 11:33:44 +0000"  >&lt;p&gt;Confirmed, thank you very much!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jqfj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4991] Semi-random failures in o.a.s.discovery.impl.cluster tests</title>
                <link>https://issues.apache.org/jira/browse/SLING-4991</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;A few tests from the org.apache.sling.discovery.impl.cluster package regularly (but not always) fail at &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;org.apache.sling.discovery.impl.cluster.TopologyEventTest.testNonDelayedInitEvent&lt;/b&gt;&lt;br/&gt;
java.lang.AssertionError: expected:&amp;lt;3&amp;gt; but was:&amp;lt;2&amp;gt;&lt;br/&gt;
	at org.junit.Assert.assertEquals(Assert.java:542)&lt;br/&gt;
	at org.apache.sling.discovery.impl.cluster.TopologyEventTest.testNonDelayedInitEvent(TopologyEventTest.java:307)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;org.apache.sling.discovery.impl.cluster.ClusterTest.testLeaderDesc&lt;/b&gt;&lt;br/&gt;
java.lang.AssertionError: expected:&amp;lt;2&amp;gt; but was:&amp;lt;1&amp;gt;&lt;br/&gt;
	at org.junit.Assert.assertEquals(Assert.java:542)&lt;br/&gt;
	at org.apache.sling.discovery.impl.cluster.ClusterTest.doTestLeader(ClusterTest.java:189)&lt;br/&gt;
	at org.apache.sling.discovery.impl.cluster.ClusterTest.testLeaderDesc(ClusterTest.java:152)&lt;/p&gt;

&lt;p&gt;&lt;b&gt;org.apache.sling.discovery.impl.cluster.ClusterTest.testDuplicateInstance3726&lt;/b&gt;&lt;br/&gt;
java.lang.AssertionError: instance 7c6e1f2c-cad7-465a-824f-8ddb9e53f43d expected 3, got: 1&lt;br/&gt;
	at org.junit.Assert.fail(Assert.java:88)&lt;br/&gt;
	at org.apache.sling.discovery.impl.cluster.ClusterTest.assertTopology(ClusterTest.java:762)&lt;br/&gt;
	at org.apache.sling.discovery.impl.cluster.ClusterTest.assertSameTopology(ClusterTest.java:553)&lt;br/&gt;
	at org.apache.sling.discovery.impl.cluster.ClusterTest.testDuplicateInstance3726(ClusterTest.java:537)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12861491">SLING-4991</key>
            <summary>Semi-random failures in o.a.s.discovery.impl.cluster tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-it</label>
                    </labels>
                <created>Thu, 3 Sep 2015 08:11:50 +0000</created>
                <updated>Thu, 26 Sep 2019 12:40:20 +0000</updated>
                            <resolved>Mon, 7 Sep 2015 13:05:28 +0000</resolved>
                                    <version>Discovery Impl 1.1.6</version>
                                    <fixVersion>Discovery Impl 1.1.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14728675" author="bdelacretaz" created="Thu, 3 Sep 2015 08:17:49 +0000"  >&lt;p&gt;Tentatively assigning to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt;, I suppose you&apos;ve been working on this module lately&lt;/p&gt;</comment>
                            <comment id="14733468" author="egli" created="Mon, 7 Sep 2015 09:40:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;org.apache.sling.discovery.impl.cluster.ClusterTest.testLeaderDesc&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;fixed in &lt;a href=&quot;http://svn.apache.org/r1701584&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1701584&lt;/a&gt; (heartbeat timeouts for this test were way too short: 1 and 2 sec. increased to 30sec)&lt;/p&gt;</comment>
                            <comment id="14733492" author="egli" created="Mon, 7 Sep 2015 09:56:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;org.apache.sling.discovery.impl.cluster.ClusterTest.testDuplicateInstance3726&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;fixed in &lt;a href=&quot;http://svn.apache.org/r1701589&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1701589&lt;/a&gt; (heartbeat timeout doubled from 5sec to 10sec and adjusted rest accordingly)&lt;/p&gt;</comment>
                            <comment id="14733513" author="egli" created="Mon, 7 Sep 2015 10:26:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;org.apache.sling.discovery.impl.cluster.TopologyEventTest.testNonDelayedInitEvent&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;fixed in &lt;a href=&quot;http://svn.apache.org/r1701595&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1701595&lt;/a&gt; and &lt;a href=&quot;http://svn.apache.org/r1701599&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1701599&lt;/a&gt; (the main issue was that min event delays were too tight and it could happen on apache jenkins that sleeping 3 sec was not done fast enough to accomodate the 5 sec min event delay. that caused the TOPOLOGY_INIT to be sent with current==true - which caused it to throw an assertion error - which caused the outer DiscoveryServiceImpl&apos;s AsyncEventSender to step back 5 sec due to this unexpected Error - which caused the subsequent test asserts to fail)&lt;/p&gt;</comment>
                            <comment id="14733518" author="egli" created="Mon, 7 Sep 2015 10:34:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2179/testReport/junit/org.apache.sling.discovery.impl.cluster/ClusterTest/testConnectorSwitching4139/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;also failed recently: ClusterTest.testConnectorSwitching &lt;/a&gt;&lt;br/&gt;
fixed in &lt;a href=&quot;http://svn.apache.org/r1701601&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1701601&lt;/a&gt; (by increasing the heartbeat timeouts from 5 sec to 10 sec)&lt;/p&gt;</comment>
                            <comment id="14733539" author="egli" created="Mon, 7 Sep 2015 10:54:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2181/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;also failed recently: TopologyAnnouncementRegistryTest.testExpiry&lt;/a&gt;&lt;br/&gt;
fixed in &lt;a href=&quot;http://svn.apache.org/r1701604&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1701604&lt;/a&gt; (also by increasing timeout from 1sec to 5sec)&lt;/p&gt;</comment>
                            <comment id="14733669" author="egli" created="Mon, 7 Sep 2015 13:02:38 +0000"  >&lt;p&gt;and &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2181/testReport/junit/org.apache.sling.discovery.impl.topology/LargeTopologyWithHubTest/testLargeTopologyWithHub/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;also failed recently: LargeTopologyWithHubTest&lt;/a&gt;&lt;br/&gt;
fixed in &lt;a href=&quot;http://svn.apache.org/r1701616&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1701616&lt;/a&gt; (by increasing the hearbeat timeout from 1500 sec &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/warning.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; to 3600sec=1hour - the heartbeat timeout covers the whole test in this case - and looks like on apache jenkins the test was running for longer than 25min.. so some initially created connectors already timed out)&lt;/p&gt;</comment>
                            <comment id="14733674" author="egli" created="Mon, 7 Sep 2015 13:05:28 +0000"  >&lt;p&gt;thx &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; for creating this ticket!&lt;br/&gt;
the issues reported plus 3 more I found in the history between 28-AUG (#2154) and 7-SEP (#2203) are now all &apos;fixed&apos; - ie mostly timeouts have been increased as it seems apache jenkins got slower over time. the assumption is that these increased timeouts will do the trick - if they don&apos;t I&apos;ll follow up anew.&lt;/p&gt;</comment>
                            <comment id="14738405" author="egli" created="Thu, 10 Sep 2015 08:34:51 +0000"  >&lt;p&gt;there was &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/2219/testReport/junit/org.apache.sling.discovery.impl.topology.announcement/TopologyAnnouncementRegistryTest/testCluster/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;another failure on jenkins&lt;/a&gt; which I&apos;ve now fixed in &lt;a href=&quot;http://svn.apache.org/r1702185&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1702185&lt;/a&gt; (further increased heartbeat timeout to 10sec from 5sec, apache jenkins sometimes seems to be reeaally slow)&lt;/p&gt;</comment>
                            <comment id="14738438" author="egli" created="Thu, 10 Sep 2015 08:57:59 +0000"  >&lt;p&gt;and there was &lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1510/testReport/junit/org.apache.sling.discovery.impl.cluster/SingleInstanceTest/testTopologyEventListeners/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;another one&lt;/a&gt; with SingleInstanceTest which is now fixed in &lt;a href=&quot;http://svn.apache.org/r1702194&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1702194&lt;/a&gt; : the problem was the background heartbeat interval being set to a default of 20sec was hitting during the test - which normally would terminate within 10sec. Now increased the heartbeat interval for that test to 999sec to avoid that.&lt;/p&gt;</comment>
                            <comment id="14738450" author="egli" created="Thu, 10 Sep 2015 09:05:47 +0000"  >&lt;p&gt;and &lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1508/testReport/junit/org.apache.sling.discovery.impl.cluster/ClusterTest/testDuplicateInstance3726/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ClusterTest.testDuplicateInstance3726&lt;/a&gt; was failing again even though the heartbeat timeout has been increased to 10sec from 5sec as part of this ticket already. Now increased to 15sec in &lt;a href=&quot;http://svn.apache.org/r1702196&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1702196&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jqf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4989] The JavaScript Use Provider fails to correctly load script using inheritance</title>
                <link>https://issues.apache.org/jira/browse/SLING-4989</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The JavaScript Use Provider fails to correctly load a script using inheritance if the loaded script is called from a component sub-script.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12861306">SLING-4989</key>
            <summary>The JavaScript Use Provider fails to correctly load script using inheritance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Sep 2015 13:05:09 +0000</created>
                <updated>Mon, 7 Sep 2015 14:05:29 +0000</updated>
                            <resolved>Wed, 2 Sep 2015 13:23:20 +0000</resolved>
                                    <version>Scripting Sightly JS Use Provider 1.0.8</version>
                                    <fixVersion>Scripting Sightly JS Use Provider 1.0.10</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14727322" author="radu.cotescu" created="Wed, 2 Sep 2015 13:23:20 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1700810&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1700810&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jpav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4988] Not all folders are displayed in Project Explorer</title>
                <link>https://issues.apache.org/jira/browse/SLING-4988</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Sorry for the vague description, but I don&apos;t have a good way of describing this, but it is easy to reproduce.&lt;/p&gt;

&lt;p&gt;1. Check out the project at &lt;a href=&quot;https://github.com/justinedelson/pgehello&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/justinedelson/pgehello&lt;/a&gt; (This is an AEM Apps project, although I don&apos;t think you need to have AEM to reproduce the issue in Sling IDE)&lt;br/&gt;
2. Import the three projects into Eclipse.&lt;br/&gt;
3. Configure the content-dev project to be a Content Package project&lt;br/&gt;
4. Navigate through to /content/phonegap/helloworld/shell/_jcr_content/pge-app/app-content.&lt;/p&gt;

&lt;p&gt;Observe that no child nodes of app-content are displayed. There should be a www folder here. In addition, app-content should have a number of sibling nodes (under pge-app) - &lt;a href=&quot;https://github.com/justinedelson/pgehello/tree/master/content-dev/src/main/content/jcr_root/content/phonegap/helloworld/shell/_jcr_content/pge-app&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/justinedelson/pgehello/tree/master/content-dev/src/main/content/jcr_root/content/phonegap/helloworld/shell/_jcr_content/pge-app&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This issue blocks the effective use of Sling IDE with AEM Apps.&lt;/p&gt;

&lt;p&gt;Eclipse Mars&lt;br/&gt;
Sling IDE 1.0.6&lt;br/&gt;
AEM IDE 1.0.4&lt;/p&gt;</description>
                <environment></environment>
        <key id="12861297">SLING-4988</key>
            <summary>Not all folders are displayed in Project Explorer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Sep 2015 12:33:01 +0000</created>
                <updated>Thu, 8 Oct 2015 13:10:38 +0000</updated>
                            <resolved>Tue, 29 Sep 2015 21:04:28 +0000</resolved>
                                                    <fixVersion>Sling Eclipse IDE 1.0.8</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14727255" author="justinedelson" created="Wed, 2 Sep 2015 12:33:37 +0000"  >&lt;p&gt;screenshot attached&lt;/p&gt;</comment>
                            <comment id="14935360" author="rombert" created="Tue, 29 Sep 2015 15:59:44 +0000"  >&lt;p&gt;By trial and error I&apos;ve determined that the problem only appears when the folder is placed under a jcr:content node, which is encoded as _jcr_content in the filesystem. I&apos;ve added a failing, ignored, test in &lt;a href=&quot;https://svn.apache.org/r1705883&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1705883&lt;/a&gt; , and a couple of cleanups in &lt;a href=&quot;https://svn.apache.org/r1705882&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1705882&lt;/a&gt; and &lt;a href=&quot;https://svn.apache.org/r1705884&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1705884&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14935400" author="rombert" created="Tue, 29 Sep 2015 16:25:24 +0000"  >&lt;p&gt;Apparently my failing test did not reliably show the problem - I&apos;ve fixed that problem in &lt;a href=&quot;https://svn.apache.org/r1705889&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1705889&lt;/a&gt; but the problem you reported still appears.&lt;/p&gt;</comment>
                            <comment id="14935851" author="rombert" created="Tue, 29 Sep 2015 21:04:05 +0000"  >&lt;p&gt;Aaargh, seems that my fix was the right one, just that I got lost in the sample project &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;At any rate, here&apos;s my screenshot for validation, resolving as fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12764317" name="screenshot.png" size="30343" author="rombert" created="Tue, 29 Sep 2015 21:03:59 +0000"/>
                            <attachment id="12753752" name="slingide-aem-apps-issue.png" size="105566" author="justinedelson" created="Wed, 2 Sep 2015 12:33:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jp93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4985] HtmlDefaultServlet test fails: enabling/disabling component does not work</title>
                <link>https://issues.apache.org/jira/browse/SLING-4985</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Both HtmlDefaultServletTest.testJsonExtension and testHtmlExtension currently failed. They are using &lt;tt&gt;system/console/components/&lt;/tt&gt; to activate and deactivate the test servlet, and it looks like that page now hides inactive components, making it impossible to reactivate them.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12861006">SLING-4985</key>
            <summary>HtmlDefaultServlet test fails: enabling/disabling component does not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Sep 2015 13:22:00 +0000</created>
                <updated>Tue, 1 Sep 2015 13:23:27 +0000</updated>
                            <resolved>Tue, 1 Sep 2015 13:23:27 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14725383" author="bdelacretaz" created="Tue, 1 Sep 2015 13:23:27 +0000"  >&lt;p&gt;Fixed in revision 1700539, using a more robust config-based activation mechanism&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jng7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4984] ScriptableTestsTest fails in testing/samples/integration-tests</title>
                <link>https://issues.apache.org/jira/browse/SLING-4984</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Failed tests: 
org.apache.sling.testing.samples.integrationtests.serverside.scriptable.ScriptableTestsTest.testScriptableTest[0](org.apache.sling.testing.samples.integrationtests.serverside.scriptable.ScriptableTestsTest)
  Run 1: ScriptableTestsTest.setupContent:73 PUT request to http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/apps/testing/ScriptableTests/test.txt.esp: expecting status 201 expected:&amp;lt;201&amp;gt; but was:&amp;lt;405&amp;gt;
&lt;/span&gt;  Run 2: ScriptableTestsTest.cleanupContent:80 DELETE request to http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/apps/testing/ScriptableTests: expecting status 204 expected:&amp;lt;204&amp;gt; but was:&amp;lt;405&amp;gt;
&lt;/span&gt;
org.apache.sling.testing.samples.integrationtests.serverside.scriptable.ScriptableTestsTest.testScriptableTest[1](org.apache.sling.testing.samples.integrationtests.serverside.scriptable.ScriptableTestsTest)
  Run 1: ScriptableTestsTest.setupContent:64-&amp;gt;cleanupContent:80 DELETE request to http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/apps/testing/ScriptableTests: expecting status 204 expected:&amp;lt;204&amp;gt; but was:&amp;lt;405&amp;gt;
&lt;/span&gt;  Run 2: ScriptableTestsTest.cleanupContent:80 DELETE request to http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/apps/testing/ScriptableTests: expecting status 204 expected:&amp;lt;204&amp;gt; but was:&amp;lt;405&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12860971">SLING-4984</key>
            <summary>ScriptableTestsTest fails in testing/samples/integration-tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Tue, 1 Sep 2015 11:05:02 +0000</created>
                <updated>Tue, 1 Sep 2015 11:20:10 +0000</updated>
                            <resolved>Tue, 1 Sep 2015 11:20:10 +0000</resolved>
                                                    <fixVersion>Sample Integration Tests 1.0.8</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14725214" author="bdelacretaz" created="Tue, 1 Sep 2015 11:20:10 +0000"  >&lt;p&gt;Fixed in revision 1700491 by enabling the missing WebDAV servlet&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jn8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4982] NPE in ContentDispositionFilter</title>
                <link>https://issues.apache.org/jira/browse/SLING-4982</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at org.apache.sling.security.impl.ContentDispositionFilter$RewriterResponse.isJcrData(ContentDispositionFilter.java:288)&lt;br/&gt;
	at org.apache.sling.security.impl.ContentDispositionFilter$RewriterResponse.setContentDisposition(ContentDispositionFilter.java:277)&lt;br/&gt;
	at org.apache.sling.security.impl.ContentDispositionFilter$RewriterResponse.setContentType(ContentDispositionFilter.java:236)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12860937">SLING-4982</key>
            <summary>NPE in ContentDispositionFilter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Sep 2015 08:45:35 +0000</created>
                <updated>Fri, 4 Sep 2015 11:39:42 +0000</updated>
                            <resolved>Tue, 1 Sep 2015 09:04:40 +0000</resolved>
                                                    <fixVersion>Security 1.0.16</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14725046" author="asanso" created="Tue, 1 Sep 2015 09:22:03 +0000"  >&lt;p&gt;fixed in rev 1700424&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jn0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4981] Deadlock involving Scheduler Whiteboard</title>
                <link>https://issues.apache.org/jira/browse/SLING-4981</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I repeatedly observed a deadlock situation in an AEM 6.1 installation (involving custom code).&lt;/p&gt;

&lt;p&gt;The result, amongst others, is a blocked SCR Actor thread.&lt;/p&gt;

&lt;p&gt;Hypothesis: I suspect that this can occur in situations where a scheduled Job (A) has a reference to another SCR component (B) that is lazily initialized (immediate=false) and itself registered via the whiteboard. If A is disabled while B is being added by the Scheduler, this triggers deregistration of B as well.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; could you please take a look at the attached thread-dump? Several subsequent thread-dumps showed no progress. I would appreciate your opinion on this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12860933">SLING-4981</key>
            <summary>Deadlock involving Scheduler Whiteboard</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Sep 2015 08:31:45 +0000</created>
                <updated>Mon, 14 Dec 2015 21:24:54 +0000</updated>
                            <resolved>Fri, 4 Sep 2015 13:41:38 +0000</resolved>
                                    <version>Commons Scheduler 2.4.6</version>
                                    <fixVersion>Commons Scheduler 2.4.12</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14725057" author="cziegeler" created="Tue, 1 Sep 2015 09:27:03 +0000"  >&lt;p&gt;I suggest you give it a try with removing the &quot;synchronized&quot; for the three methods in the ServiceTrackerCustomizer implementation and see what happens. I don&apos;t think these really need to be sync&apos;ed&lt;/p&gt;</comment>
                            <comment id="14730838" author="jsedding" created="Fri, 4 Sep 2015 13:41:38 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1701254&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1701254&lt;/a&gt; by removing the &lt;tt&gt;synchronized&lt;/tt&gt; keyword from all callbacks of the &lt;tt&gt;ServiceTrackerCustomizer&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In local tests I could re-create the deadlock from the attached dump by repeatedly restarting a bundle that registered several scheduled tasks on startup and subsequently unregistered some of them again.&lt;/p&gt;

&lt;p&gt;With my changes I was not able to reproduce.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12753486" name="scheduler-scr-deadlock.log" size="120897" author="jsedding" created="Tue, 1 Sep 2015 08:32:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jmzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4980] Improve locking in the SightlyJavaCompilerService</title>
                <link>https://issues.apache.org/jira/browse/SLING-4980</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The locking mechanism implemented in the &lt;tt&gt;SightlyJavaCompilerService&lt;/tt&gt; is not optimal and, under heavy load, can lead to lock contention.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12860682">SLING-4980</key>
            <summary>Improve locking in the SightlyJavaCompilerService</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Aug 2015 13:59:47 +0000</created>
                <updated>Mon, 7 Sep 2015 14:04:48 +0000</updated>
                            <resolved>Mon, 31 Aug 2015 14:03:16 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.2</version>
                                    <fixVersion>Scripting Sightly Engine 1.0.4</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14723429" author="radu.cotescu" created="Mon, 31 Aug 2015 14:03:16 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1700251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1700251&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jliv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4978] VersionParameterTest integration test fails</title>
                <link>https://issues.apache.org/jira/browse/SLING-4978</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The launchpad/integration-tests VersionParameterTest currently fails, it passes with launchpad/builder at revision 1686223&lt;/p&gt;

&lt;p&gt;With current trunk it looks like the ;v=1.1 suffix has no effect, the error is&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;testVersionParameter(org.apache.sling.launchpad.webapp.integrationtest.VersionParameterTest)  Time elapsed: 2.932 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
junit.framework.ComparisonFailure: expected:&amp;lt;v[2]&amp;gt; but was:&amp;lt;v[3]&amp;gt;
	at junit.framework.Assert.assertEquals(Assert.java:100)
	at junit.framework.Assert.assertEquals(Assert.java:107)
	at junit.framework.TestCase.assertEquals(TestCase.java:269)
	at org.apache.sling.launchpad.webapp.integrationtest.VersionParameterTest.testVersionParameter(VersionParameterTest.java:69)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12860665">SLING-4978</key>
            <summary>VersionParameterTest integration test fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Mon, 31 Aug 2015 12:36:09 +0000</created>
                <updated>Wed, 2 Sep 2015 07:50:25 +0000</updated>
                            <resolved>Tue, 1 Sep 2015 14:23:03 +0000</resolved>
                                                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14725122" author="bdelacretaz" created="Tue, 1 Sep 2015 10:06:14 +0000"  >&lt;p&gt;It looks like the RequestData.initResource() method does not get the &lt;tt&gt;;v=1.1&lt;/tt&gt; in request.getRequestURI() anymore - on the working instance &lt;tt&gt;/system/console/requests&lt;/tt&gt; says&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;1 TIMER_END{1,ResourceResolution} URI=/sling-tests/1441101191118/1_1441101192151;v=&lt;span class=&quot;code-quote&quot;&gt;&apos;1.1&apos;&lt;/span&gt;.json resolves to 
Resource=JcrNodeResource, 
type=nt:frozenNode, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, 
path=/sling-tests/1441101191118/1_1441101192151;v=&lt;span class=&quot;code-quote&quot;&gt;&apos;1.1&apos;&lt;/span&gt;      
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Whereas on the Sling trunk it says&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;5058 TIMER_END{5058,ResourceResolution} 
URI=/sling-tests/1441099914236/5_1441099915257.json resolves to 
Resource=JcrNodeResource, type=nt:unstructured, superType=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, 
path=/sling-tests/1441099914236/5_1441099915257   
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The URI= is &lt;tt&gt;getServletRequest().getRequestURI()&lt;/tt&gt;, so for some reason the &lt;tt&gt;;v=1.1&lt;/tt&gt; is lost on trunk.&lt;/p&gt;</comment>
                            <comment id="14725172" author="bdelacretaz" created="Tue, 1 Sep 2015 10:47:52 +0000"  >&lt;p&gt;Reverting to org.apache.felix.http.jetty/3.0.2 (instead of 3.1.0) in &lt;a href=&quot;http://svn.apache.org/r1700482&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1700482&lt;/a&gt; fixes this issue. &lt;/p&gt;

&lt;p&gt;I&apos;m leaving it open to investigate more and find out whether it&apos;s our code or the Felix/Jetty code that&apos;s at fault.&lt;/p&gt;

&lt;p&gt;Interestingly the WebDAV double slash behavior tested by WebDavDoubleSlashTest (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4976&quot; title=&quot;Clarify handling of empty JCR workspace name in WebDAV URLs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4976&quot;&gt;&lt;del&gt;SLING-4976&lt;/del&gt;&lt;/a&gt;) is also back to the old behavior, I had to temporarily change that test as well.&lt;/p&gt;</comment>
                            <comment id="14725463" author="bdelacretaz" created="Tue, 1 Sep 2015 14:23:03 +0000"  >&lt;p&gt;felix.http.jetty weirdness is being taken care of at &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4804&quot; title=&quot;Semicolon parameters are not passed to the resource resolver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4804&quot;&gt;&lt;del&gt;SLING-4804&lt;/del&gt;&lt;/a&gt;, marking this one fixed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12837507">SLING-4804</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12860637">SLING-4976</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12861244">SLING-4987</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jlf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4974] Observation support is using a stale resource resolver if resource resolver factory is restarted</title>
                <link>https://issues.apache.org/jira/browse/SLING-4974</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If the resource resovler factory is restarted (e.g. through a configuration change of that factory), the observation support will not update the resource resolver as it is not properly tracking the resource resolver factory service&lt;/p&gt;</description>
                <environment></environment>
        <key id="12859853">SLING-4974</key>
            <summary>Observation support is using a stale resource resolver if resource resolver factory is restarted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Aug 2015 09:01:13 +0000</created>
                <updated>Mon, 14 Sep 2015 15:59:16 +0000</updated>
                            <resolved>Fri, 28 Aug 2015 09:05:38 +0000</resolved>
                                    <version>JCR Resource 2.5.0</version>
                                    <fixVersion>JCR Resource 2.5.6</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14718242" author="cziegeler" created="Fri, 28 Aug 2015 09:05:38 +0000"  >&lt;p&gt;Changed the implementation to use a service tracker and the tracking count in rev 1698279&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12863903">SLING-5023</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jhlz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4972] Debug log output of OakResourceListener is not usable</title>
                <link>https://issues.apache.org/jira/browse/SLING-4972</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;While debug logging has been added to the OakResourceListener, this output is not very useful as the map contains arrays as the value and arrays have an unusable toString method&lt;/p&gt;</description>
                <environment></environment>
        <key id="12859841">SLING-4972</key>
            <summary>Debug log output of OakResourceListener is not usable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Aug 2015 08:10:41 +0000</created>
                <updated>Mon, 31 Aug 2015 10:31:00 +0000</updated>
                            <resolved>Fri, 28 Aug 2015 08:15:18 +0000</resolved>
                                    <version>JCR Resource 2.5.4</version>
                                    <fixVersion>JCR Resource 2.5.6</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14718194" author="cziegeler" created="Fri, 28 Aug 2015 08:15:18 +0000"  >&lt;p&gt;Fixed this in rev 1698275&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jhjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4971] &quot;static&quot; node name not allowed as a script ancestor</title>
                <link>https://issues.apache.org/jira/browse/SLING-4971</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Looks like having &quot;static&quot; as a script ancestor (e.g. /apps/blah/static/foo/foo.html) will break badly the script rendering (and all the rendering process), yelling:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Line 1, column 0 : The declared package &quot;&quot; does not match the expected package &quot;apps.blah.static.foo&quot;
Line 19, column 994 : Syntax error on token &quot;static&quot;, Identifier expected
        at org.apache.sling.scripting.sightly.impl.compiler.SightlyJavaCompilerService.compileSource(SightlyJavaCompilerService.java:143)
        at org.apache.sling.scripting.sightly.impl.engine.UnitLoader.createUnit(UnitLoader.java:140)
        at org.apache.sling.scripting.sightly.impl.engine.SightlyScriptEngine.evaluateScript(SightlyScriptEngine.java:94)
        at org.apache.sling.scripting.sightly.impl.engine.SightlyScriptEngine.eval(SightlyScriptEngine.java:83)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:361)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:171)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:463)
        ... 258 common frames omitted
Caused by: org.apache.sling.scripting.sightly.impl.compiler.CompilerException: org.apache.sling.scripting.sightly.impl.compiler.CompilerException: Compilation errors in apps/blah/static/foo/SightlyJava_foo.java:
Line 1, column 0 : The declared package &quot;&quot; does not match the expected package &quot;apps.blah.static.foo&quot;
Line 19, column 994 : Syntax error on token &quot;static&quot;, Identifier expected
        at org.apache.sling.scripting.sightly.impl.compiler.SightlyJavaCompilerService.compileJavaResource(SightlyJavaCompilerService.java:258)
        at org.apache.sling.scripting.sightly.impl.compiler.SightlyJavaCompilerService.compileSource(SightlyJavaCompilerService.java:141)
        ... 264 common frames omitted
Caused by: org.apache.sling.scripting.sightly.impl.compiler.CompilerException: Compilation errors in apps/blah/static/foo/SightlyJava_foo.java:
Line 1, column 0 : The declared package &quot;&quot; does not match the expected package &quot;apps.blah.static.foo&quot;
Line 19, column 994 : Syntax error on token &quot;static&quot;, Identifier expected
        at org.apache.sling.scripting.sightly.impl.compiler.SightlyJavaCompilerService.compileJavaResource(SightlyJavaCompilerService.java:250)
        ... 265 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12859836">SLING-4971</key>
            <summary>&quot;static&quot; node name not allowed as a script ancestor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Aug 2015 07:31:20 +0000</created>
                <updated>Mon, 12 Oct 2015 13:25:23 +0000</updated>
                            <resolved>Wed, 30 Sep 2015 11:04:39 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.2</version>
                                    <fixVersion>Scripting Sightly Engine 1.0.6</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14725165" author="radu.cotescu" created="Tue, 1 Sep 2015 10:41:50 +0000"  >&lt;p&gt;Path fragments that are reserved Java keywords should be treated in a special way and append an &quot;_&quot; to their corresponding package names.&lt;/p&gt;</comment>
                            <comment id="14936716" author="radu.cotescu" created="Wed, 30 Sep 2015 11:04:39 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=r1705994&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1705994&lt;/a&gt;. Simplified implementation in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=r1706440&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1706440&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jhi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4970] Potential NPE with transitive models</title>
                <link>https://issues.apache.org/jira/browse/SLING-4970</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If the current model references another model and that model references another one, and those models have not been built with the latest slingstart maven plugin, then an NPE occurs:&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.searchSlingstartDependencies(DependencyLifecycleParticipant.java:335)&lt;br/&gt;
	at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.processSlingstartDependencies(DependencyLifecycleParticipant.java:351)&lt;br/&gt;
	at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.searchSlingstartDependencies(DependencyLifecycleParticipant.java:314)&lt;br/&gt;
	at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.addDependencies(DependencyLifecycleParticipant.java:169)&lt;br/&gt;
	at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.addDependencies(DependencyLifecycleParticipant.java:130)&lt;br/&gt;
	at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.afterProjectsRead(DependencyLifecycleParticipant.java:125)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12859541">SLING-4970</key>
            <summary>Potential NPE with transitive models</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Aug 2015 08:35:11 +0000</created>
                <updated>Mon, 7 Sep 2015 05:15:58 +0000</updated>
                            <resolved>Thu, 27 Aug 2015 08:55:59 +0000</resolved>
                                    <version>Slingstart Maven Plugin 1.3.4</version>
                                    <fixVersion>Slingstart Maven Plugin 1.3.6</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14716308" author="cziegeler" created="Thu, 27 Aug 2015 08:55:59 +0000"  >&lt;p&gt;Fixed in rev 1698093&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jfs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4965] Native Code Aliases not available in Sling</title>
                <link>https://issues.apache.org/jira/browse/SLING-4965</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The OSGi specifications define a number of aliases for native code OSes and processors: &lt;a href=&quot;http://www.osgi.org/Specifications/Reference&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.osgi.org/Specifications/Reference&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;These aliases are defined by the Felix Framework in the default.properties. However they are not transferred to the sling.properties file which means they are not available for bundles running in Sling. &lt;/p&gt;

&lt;p&gt;The best thing to do would probable be to avoid overwriting the default.properties from Felix as it contains quite a lot of information for the framework and add any customizations separately.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12858569">SLING-4965</key>
            <summary>Native Code Aliases not available in Sling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="bosschaert">David Bosschaert</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Aug 2015 10:25:43 +0000</created>
                <updated>Sun, 6 Sep 2015 10:06:53 +0000</updated>
                            <resolved>Tue, 25 Aug 2015 12:26:29 +0000</resolved>
                                    <version>Launchpad Base 2.6.2</version>
                                    <fixVersion>Launchpad Base 2.6.4</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14711178" author="cziegeler" created="Tue, 25 Aug 2015 12:26:29 +0000"  >&lt;p&gt;This should be fixed with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4966&quot; title=&quot;Use default properties from Felix framework&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4966&quot;&gt;&lt;del&gt;SLING-4966&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2jbyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4962] getNodes() always returns empty iterator for root node</title>
                <link>https://issues.apache.org/jira/browse/SLING-4962</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;session.getRootNode().getNodes() always returns an empty iterator even when there are nodes in the MockJcr session.&lt;/p&gt;

&lt;p&gt;For example in the below code, s.getRootNode.getNodes().hasNext() returns false:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;Session s = JcrMock.newSession();
s.getRootNode().addNode(&quot;foo&quot;);
s.getRootNode.getNodes().hasNext()
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I attached a patch containing a test case and a fix.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12858165">SLING-4962</key>
            <summary>getNodes() always returns empty iterator for root node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="akhoury">Andrew Khoury</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Aug 2015 01:39:27 +0000</created>
                <updated>Thu, 10 Sep 2015 21:11:33 +0000</updated>
                            <resolved>Fri, 28 Aug 2015 15:11:11 +0000</resolved>
                                    <version>Testing JCR Mock 1.1.8</version>
                                    <fixVersion>Testing JCR Mock 1.1.10</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14719326" author="rombert" created="Fri, 28 Aug 2015 15:11:07 +0000"  >&lt;p&gt;Patch applied in &lt;a href=&quot;https://svn.apache.org/r1698347&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1698347&lt;/a&gt; , thanks a lot for the submission!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12751946" name="fix-root-getNodes.patch" size="1972" author="akhoury" created="Mon, 24 Aug 2015 01:46:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j9hz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4956] Endless redirect loop if the logged in user tries to access the system console without enough privileges</title>
                <link>https://issues.apache.org/jira/browse/SLING-4956</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If the logged in  user tries to access the system console at &lt;a href=&quot;http://localhost:8080/system/console/bundles&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/bundles&lt;/a&gt; and doesn&apos;t have enough privileges an infinite redirect loop will occur between the system console and the login screen.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12856887">SLING-4956</key>
            <summary>Endless redirect loop if the logged in user tries to access the system console without enough privileges</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Aug 2015 11:09:29 +0000</created>
                <updated>Fri, 21 Aug 2015 11:51:07 +0000</updated>
                            <resolved>Tue, 18 Aug 2015 11:15:25 +0000</resolved>
                                                    <fixVersion>Web Console Security Provider 1.1.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14701094" author="asanso" created="Tue, 18 Aug 2015 11:15:25 +0000"  >&lt;p&gt;fixed in rev. r1696393&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 11 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j1rz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4955] NPE in ValidationModelRetrieverImpl</title>
                <link>https://issues.apache.org/jira/browse/SLING-4955</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Due to the changes introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4876&quot; title=&quot;Support resource type inheritance for validator models&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4876&quot;&gt;&lt;del&gt;SLING-4876&lt;/del&gt;&lt;/a&gt; there has been a potential NPE been introduced in the &lt;tt&gt;o.a.s.validation.impl.ValidationModelRetrieverImpl&lt;/tt&gt;.&lt;br/&gt;
The stack trace looks like this &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.sling.validation.impl.model.MergedValidationModel.&amp;lt;init&amp;gt;(MergedValidationModel.java:60)
	at org.apache.sling.validation.impl.ValidationModelRetrieverImpl.getModel(ValidationModelRetrieverImpl.java:121)
	at org.apache.sling.validation.impl.ValidationModelRetrieverImpl.getModel(ValidationModelRetrieverImpl.java:94)
	at org.apache.sling.validation.impl.ValidationServiceImpl.getValidationModel(ValidationServiceImpl.java:93)
	at org.apache.sling.validation.impl.ValidationServiceImpl.getValidationModel(ValidationServiceImpl.java:125)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This happens whenever there is a model found for the requested resource type but not for one of its super resource types.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12856633">SLING-4955</key>
            <summary>NPE in ValidationModelRetrieverImpl</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Aug 2015 14:53:39 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:46 +0000</updated>
                            <resolved>Mon, 17 Aug 2015 14:58:34 +0000</resolved>
                                                    <fixVersion>Validation 1.0.0</fixVersion>
                                    <component>Validation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14699622" author="kwin" created="Mon, 17 Aug 2015 14:58:26 +0000"  >&lt;p&gt;Fixed in r1696301.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12844586">SLING-4876</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 11 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j0bb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4946] Model dependencies are not followed transitively</title>
                <link>https://issues.apache.org/jira/browse/SLING-4946</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If model c depends on model b and model b depends on model a, when building c, the reference from b to a will not be handled, either resulting in a build failure or missing artifacts&lt;/p&gt;</description>
                <environment></environment>
        <key id="12856079">SLING-4946</key>
            <summary>Model dependencies are not followed transitively</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Aug 2015 06:43:39 +0000</created>
                <updated>Thu, 20 Aug 2015 06:07:30 +0000</updated>
                            <resolved>Fri, 14 Aug 2015 08:22:59 +0000</resolved>
                                    <version>Slingstart Maven Plugin 1.2.0</version>
                    <version>Slingstart Maven Plugin 1.3.0</version>
                                    <fixVersion>Slingstart Maven Plugin 1.3.2</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14696693" author="cziegeler" created="Fri, 14 Aug 2015 08:22:59 +0000"  >&lt;p&gt;Fixed in rev 1695835 by traversing down all model files&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2iwxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4944] JcrResourceBundleProvider: Potential race condition between setting the resourceResolver and using it</title>
                <link>https://issues.apache.org/jira/browse/SLING-4944</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4910&quot; title=&quot;NPE in JCrResourceBundleProvider&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4910&quot;&gt;&lt;del&gt;SLING-4910&lt;/del&gt;&lt;/a&gt; there is still a very slim chance that the resource resolver is being null while being used within the scheduleReloadBundles, because that is called, before the resolver is initialized. The chance to see that in reality is close to zero though, because scheduleReloadBundles is using the resource resolver only in a scheduled thread.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12855778">SLING-4944</key>
            <summary>JcrResourceBundleProvider: Potential race condition between setting the resourceResolver and using it</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Aug 2015 06:23:53 +0000</created>
                <updated>Wed, 29 Mar 2017 13:37:42 +0000</updated>
                            <resolved>Thu, 13 Aug 2015 06:25:50 +0000</resolved>
                                    <version>i18n 2.4.4</version>
                                    <fixVersion>i18n 2.4.6</fixVersion>
                                    <component>Extensions</component>
                    <component>i18n</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12849512">SLING-4910</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2iv33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4943] ResourceNotFoundException: Include resource path in the getMessage() method</title>
                <link>https://issues.apache.org/jira/browse/SLING-4943</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently if instantiating a &lt;tt&gt;ResourceNotFoundException&lt;/tt&gt; with both a resource path and a message only the message is given out. That is e.g. a problem in &lt;tt&gt;DefaultGetServlet&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/servlets/get/src/main/java/org/apache/sling/servlets/get/impl/DefaultGetServlet.java#L218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/servlets/get/src/main/java/org/apache/sling/servlets/get/impl/DefaultGetServlet.java#L218&lt;/a&gt;).&lt;br/&gt;
That leads to exceptions like this in the log&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.dispatchRequest(SlingRequestProcessorImpl.java:322)
	at org.apache.sling.engine.impl.request.SlingRequestDispatcher.dispatch(SlingRequestDispatcher.java:216)
	at org.apache.sling.engine.impl.request.SlingRequestDispatcher.include(SlingRequestDispatcher.java:103)
	at 
... 
Caused by: org.apache.sling.api.resource.ResourceNotFoundException: No resource found
	at org.apache.sling.servlets.get.impl.DefaultGetServlet.doGet(DefaultGetServlet.java:219)
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.mayService(SlingSafeMethodsServlet.java:269)
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:345)
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:376)
	at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:533)
	at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You basically have no clue which resource path was requested (especially if the request was issued through request dispatching. Therefore I propose to always include the resource path in the message given out by &lt;tt&gt;getMessage()&lt;/tt&gt; or &lt;tt&gt;getLocalizedMessage()&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12855514">SLING-4943</key>
            <summary>ResourceNotFoundException: Include resource path in the getMessage() method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Aug 2015 11:10:11 +0000</created>
                <updated>Mon, 8 Feb 2016 22:11:28 +0000</updated>
                            <resolved>Wed, 26 Aug 2015 15:53:45 +0000</resolved>
                                    <version>API 2.9.0</version>
                                    <fixVersion>API 2.11.0</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14714227" author="kwin" created="Wed, 26 Aug 2015 15:53:45 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://svn.apache.org/r1697957&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1697957&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2itgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4942] Modified behaviour of data-sly-resource</title>
                <link>https://issues.apache.org/jira/browse/SLING-4942</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In previous versions of sightly (i.e. part of AEM 6.0) &lt;tt&gt;data-sly-resource&lt;/tt&gt; was  not emitting a failure in case a non-existing resource path was referenced. Instead it just skipped that Sightly block. With the Sightly implementation from Sling this leads to an exception (&lt;tt&gt;javax.servlet.ServletException: org.apache.sling.api.resource.ResourceNotFoundException: No resource found&lt;/tt&gt;).&lt;br/&gt;
There is a difference though if data-sly-resource is also used with the option resourceType. In that case it will work perfectly fine on the non-existing resource.&lt;br/&gt;
Please clarify what is the desired behaviour.&lt;br/&gt;
An example exception looks like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
Caused by: javax.servlet.ServletException: org.apache.sling.api.resource.ResourceNotFoundException: No resource found
	at 
	at com.daimler.embxp.wholesale.base.core.exception.ExceptionFilter.doFilter(ExceptionFilter.java:124)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at com.day.cq.personalization.impl.TargetComponentFilter.doFilter(TargetComponentFilter.java:96)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at com.day.cq.wcm.core.impl.WCMDebugFilter.doFilterWithErrorHandling(WCMDebugFilter.java:182)
	at com.day.cq.wcm.core.impl.WCMDebugFilter.doFilter(WCMDebugFilter.java:149)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at com.day.cq.wcm.core.impl.WCMComponentFilter.doFilter(WCMComponentFilter.java:230)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at com.day.cq.wcm.core.impl.WCMDeveloperModeFilter.doFilter(WCMDeveloperModeFilter.java:117)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)
	at org.apache.sling.engine.impl.SlingRequestProcessorImpl.dispatchRequest(SlingRequestProcessorImpl.java:322)
	at org.apache.sling.engine.impl.request.SlingRequestDispatcher.dispatch(SlingRequestDispatcher.java:216)
	at org.apache.sling.engine.impl.request.SlingRequestDispatcher.include(SlingRequestDispatcher.java:103)
	at com.day.cq.wcm.core.impl.WCMComponentFilter$ForwardRequestDispatcher.include(WCMComponentFilter.java:445)
	at com.adobe.cq.sightly.WCMScriptHelper.includeResource(WCMScriptHelper.java:138)
	... 286 common frames omitted
Caused by: org.apache.sling.api.resource.ResourceNotFoundException: No resource found
	at org.apache.sling.servlets.get.impl.DefaultGetServlet.doGet(DefaultGetServlet.java:219)
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.mayService(SlingSafeMethodsServlet.java:269)
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:345)
	at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:376)
	at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:533)
	at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)
	at com.daimler.embxp.wholesale.base.core.exception.ExceptionFilter.doFilter(ExceptionFilter.java:118)
	... 302 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12855477">SLING-4942</key>
            <summary>Modified behaviour of data-sly-resource</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Aug 2015 07:45:28 +0000</created>
                <updated>Tue, 1 Sep 2015 10:27:58 +0000</updated>
                            <resolved>Tue, 1 Sep 2015 10:27:58 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.2</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14725148" author="radu.cotescu" created="Tue, 1 Sep 2015 10:27:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, AEM code issues should be reported to Adobe, not to Sling, especially since the &lt;tt&gt;data-sly-resource&lt;/tt&gt; behaviour is implemented by &lt;tt&gt;com.adobe.cq.sightly.internal.extensions.ResourceExtension&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;However the behaviour is correct, since &lt;tt&gt;&amp;lt;div data-sly-resource=&quot;/bogus&quot;&amp;gt;&amp;lt;/div&amp;gt;&lt;/tt&gt; works similarly to &lt;tt&gt;&amp;lt;div&amp;gt;&amp;lt;sling:include path=&quot;/bogus&quot;/&amp;gt;&amp;lt;/div&amp;gt;&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2it8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4940] Add the Sling ScriptCache configuration applied by o.a.s.s.sightly.js.provider to the provisioning model</title>
                <link>https://issues.apache.org/jira/browse/SLING-4940</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;ScriptCache&lt;/tt&gt; configuration applied by the &lt;tt&gt;org.apache.sling.scripting.sightly.js.provider&lt;/tt&gt; for caching JS scripts should be moved to the provisioning model, since the Sightly JavaScript Use Provider is already present in the launchpad.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12853837">SLING-4940</key>
            <summary>Add the Sling ScriptCache configuration applied by o.a.s.s.sightly.js.provider to the provisioning model</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Aug 2015 13:25:42 +0000</created>
                <updated>Thu, 13 Aug 2015 15:29:23 +0000</updated>
                            <resolved>Mon, 10 Aug 2015 14:30:25 +0000</resolved>
                                    <version>Scripting Sightly JS Use Provider 1.0.6</version>
                                    <fixVersion>Launchpad Builder 8</fixVersion>
                    <fixVersion>Scripting Sightly JS Use Provider 1.0.8</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14680184" author="radu.cotescu" created="Mon, 10 Aug 2015 14:30:25 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1695078&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1695078&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ij7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4936] Enhance the Sling Script Cache to only cache scripts from the search paths</title>
                <link>https://issues.apache.org/jira/browse/SLING-4936</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;ScriptCache&lt;/tt&gt; implementation should not cache scripts which are not stored in any of the configured search paths.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12852984">SLING-4936</key>
            <summary>Enhance the Sling Script Cache to only cache scripts from the search paths</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Aug 2015 15:30:15 +0000</created>
                <updated>Thu, 13 Aug 2015 14:31:51 +0000</updated>
                            <resolved>Mon, 10 Aug 2015 10:03:01 +0000</resolved>
                                    <version>Scripting Core 2.0.32</version>
                                    <fixVersion>Scripting Core 2.0.34</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14679885" author="radu.cotescu" created="Mon, 10 Aug 2015 10:03:01 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1695008&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1695008&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ih1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4935] Rhino scripts not based on a resource will not get cached correctly by the Sling Script Cache</title>
                <link>https://issues.apache.org/jira/browse/SLING-4935</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Rhino scripts not based on repository resources will not get cached correctly by the Sling Script Cache since their default name will be set to the value of the &lt;tt&gt;org.apache.sling.scripting.javascript.internal.RhinoJavaScriptEngine#NO_SCRIPT_NAME&lt;/tt&gt; constant.&lt;/p&gt;

&lt;p&gt;The first such script will get cached and attempts to run similar scripts afterwards will always return the first compiled script.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12852952">SLING-4935</key>
            <summary>Rhino scripts not based on a resource will not get cached correctly by the Sling Script Cache</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Aug 2015 13:10:25 +0000</created>
                <updated>Thu, 13 Aug 2015 14:31:04 +0000</updated>
                            <resolved>Mon, 10 Aug 2015 11:25:02 +0000</resolved>
                                    <version>Scripting JavaScript 2.0.20</version>
                                    <fixVersion>Scripting JavaScript 2.0.22</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14679968" author="radu.cotescu" created="Mon, 10 Aug 2015 11:25:02 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1695020&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1695020&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2igun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4929] Remove configuration logic from SlingServerRepository</title>
                <link>https://issues.apache.org/jira/browse/SLING-4929</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The bundle&apos;s &lt;tt&gt;Activator&lt;/tt&gt; creates a default configuration if none if found, to ensure that there is a configuration available for the &lt;tt&gt;SlingServerRepository&lt;/tt&gt;. The &lt;tt&gt;Activator&lt;/tt&gt; also handles the creation of the home directory of the repository and of the default configuration file.&lt;/p&gt;

&lt;p&gt;When using a configuration from the provisioning model, the repository home and the config file are not created, therefore the repository startup fails.&lt;/p&gt;

&lt;p&gt;The solution is to handle the directory creation and the configuration file initialisation directly in the &lt;tt&gt;SlingServerRepository&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12852361">SLING-4929</key>
            <summary>Remove configuration logic from SlingServerRepository</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Aug 2015 19:59:52 +0000</created>
                <updated>Mon, 17 Aug 2015 07:07:20 +0000</updated>
                            <resolved>Thu, 6 Aug 2015 11:47:16 +0000</resolved>
                                                    <fixVersion>JCR Jackrabbit Server 2.3.0</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14658778" author="cziegeler" created="Wed, 5 Aug 2015 20:01:05 +0000"  >&lt;p&gt;We should really avoid creating configurations within bundles. The repository implementation should be able to use default values without having a configuration with these values in config admin.&lt;br/&gt;
Creating configs in code is always problematic.&lt;/p&gt;</comment>
                            <comment id="14659649" author="rombert" created="Thu, 6 Aug 2015 07:52:58 +0000"  >&lt;p&gt;OK so in that case we should&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;remove the code that creates configurations fromt the bundle&apos;s Activator&lt;/li&gt;
	&lt;li&gt;remove ConfigurationPolicy.REQUIRE from the SlingServerRepository&lt;/li&gt;
	&lt;li&gt;adapt the SlingServerRepository to work with default values if no configuration is present&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll try to have a look this week&lt;/p&gt;</comment>
                            <comment id="14659879" author="rombert" created="Thu, 6 Aug 2015 11:47:21 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1694462&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1694462&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14659896" author="cziegeler" created="Thu, 6 Aug 2015 11:59:17 +0000"  >&lt;p&gt;Great, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12852250">SLING-4927</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2idtz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4928] Configure the SlingServerRepository using the provisioning model</title>
                <link>https://issues.apache.org/jira/browse/SLING-4928</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Once &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4927&quot; title=&quot;Unable to configure the SlingServerRepository using the provisioning model&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4927&quot;&gt;&lt;del&gt;SLING-4927&lt;/del&gt;&lt;/a&gt; is fixed, the configuration should be moved into the provisioning model to avoid the problem reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4925&quot; title=&quot;Installer kills SlingServerRepository config if o.a.s.installer.factory.configuration starts at boot&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4925&quot;&gt;&lt;del&gt;SLING-4925&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12852252">SLING-4928</key>
            <summary>Configure the SlingServerRepository using the provisioning model</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Aug 2015 14:23:55 +0000</created>
                <updated>Fri, 16 Oct 2015 14:06:49 +0000</updated>
                            <resolved>Thu, 6 Aug 2015 11:47:56 +0000</resolved>
                                                    <fixVersion>Launchpad Builder 8</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14658293" author="rombert" created="Wed, 5 Aug 2015 14:31:37 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1694231&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1694231&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14659880" author="rombert" created="Thu, 6 Aug 2015 11:48:01 +0000"  >&lt;p&gt;Reverted in &lt;a href=&quot;https://svn.apache.org/r1694463&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1694463&lt;/a&gt; , as now the SlingServerRepository no longer requires a configuration ( &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4929&quot; title=&quot;Remove configuration logic from SlingServerRepository&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4929&quot;&gt;&lt;del&gt;SLING-4929&lt;/del&gt;&lt;/a&gt; )&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12787024">SLING-4556</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12852250">SLING-4927</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2id67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4927] Unable to configure the SlingServerRepository using the provisioning model</title>
                <link>https://issues.apache.org/jira/browse/SLING-4927</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The bundle&apos;s &lt;tt&gt;Activator&lt;/tt&gt; creates a default configuration if none if found, to ensure that there is a configuration available for the &lt;tt&gt;SlingServerRepository&lt;/tt&gt;. The &lt;tt&gt;Activator&lt;/tt&gt; also handles the creation of the home directory of the repository and of the default configuration file.&lt;/p&gt;

&lt;p&gt;When using a configuration from the provisioning model, the repository home and the config file are not created, therefore the repository startup fails.&lt;/p&gt;

&lt;p&gt;The solution is to handle the directory creation and the configuration file initialisation directly in the &lt;tt&gt;SlingServerRepository&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12852250">SLING-4927</key>
            <summary>Unable to configure the SlingServerRepository using the provisioning model</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Aug 2015 14:17:33 +0000</created>
                <updated>Mon, 17 Aug 2015 07:07:37 +0000</updated>
                            <resolved>Wed, 5 Aug 2015 20:00:07 +0000</resolved>
                                                    <fixVersion>JCR Jackrabbit Server 2.3.0</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14658292" author="rombert" created="Wed, 5 Aug 2015 14:30:58 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1694230&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1694230&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14658475" author="cziegeler" created="Wed, 5 Aug 2015 16:32:35 +0000"  >&lt;p&gt;We should not create a configuration if one is missing. The implementation should work without a configuration in configuration admin and revert to default values. So instead of requring the configuration, it should be optional.&lt;br/&gt;
Creating configurations in code is imho not a good practice&lt;/p&gt;</comment>
                            <comment id="14658759" author="rombert" created="Wed, 5 Aug 2015 19:49:52 +0000"  >&lt;p&gt;Then I suggest that we open a new task and remove the configuration creation logic from the Activator. This task was just about the possibility of using the provisioning model.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12852252">SLING-4928</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12852361">SLING-4929</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2id5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4925] Installer kills SlingServerRepository config if o.a.s.installer.factory.configuration starts at boot</title>
                <link>https://issues.apache.org/jira/browse/SLING-4925</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In revision 1693392 &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; moved the o.a.s.installer.factory.configuration bundle to the :boot section (start level 1), and this prevents the Jackrabbit SlingRepository from running.&lt;/p&gt;

&lt;p&gt;Below is the logs which show that the installer wrongly deletes the repository configuration, probably due to interference with the config writeback under &lt;tt&gt;/apps/sling/install.org.apache.sling.jcr.jackrabbit.server.SlingServerRepository-&amp;lt;pid&amp;gt;&lt;/tt&gt;. If I set a breakpoint in the &lt;tt&gt;ConfigRemoveTask&lt;/tt&gt; and set its cfg variable to null to prevent it from removing the config, all is well.&lt;/p&gt;

&lt;p&gt;Log excerpts:&lt;/p&gt;

&lt;p&gt;$ egrep &apos;verifyConfig|SlingServer.*REGISTERED|Deleted.*SlingServer|Repository&lt;br/&gt;
has been&apos; sling/logs/error.log&lt;/p&gt;

&lt;p&gt;04.08.2015 16:36:32.198 &lt;b&gt;INFO&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;OsgiInstallerImpl&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.apache.sling.jcr.jackrabbit.server.impl.Activator&lt;br/&gt;
verifyConfiguration: Created configuration&lt;br/&gt;
org.apache.sling.jcr.jackrabbit.server.SlingServerRepository.98b4bd1c-11f8-49e7-a5ed-684abf3acfc6&lt;br/&gt;
for org.apache.sling.jcr.jackrabbit.server.SlingServerRepository&lt;/p&gt;

&lt;p&gt;04.08.2015 16:36:37.482 &lt;b&gt;INFO&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;OsgiInstallerImpl&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.apache.sling.jcr.jackrabbit.server Service&lt;br/&gt;
[org.apache.sling.jcr.jackrabbit.server.SlingServerRepository.98b4bd1c-11f8-49e7-a5ed-684abf3acfc6,229,&lt;br/&gt;
[org.apache.sling.jcr.api.SlingRepository, javax.jcr.Repository,&lt;br/&gt;
org.apache.jackrabbit.api.management.RepositoryManager]] ServiceEvent&lt;br/&gt;
REGISTERED&lt;/p&gt;

&lt;p&gt;04.08.2015 16:36:38.783 &lt;b&gt;INFO&lt;/b&gt; [CM Event Dispatcher (Fire&lt;br/&gt;
ConfigurationEvent:&lt;br/&gt;
pid=org.apache.sling.jcr.jackrabbit.server.SlingServerRepository.98b4bd1c-11f8-49e7-a5ed-684abf3acfc6)]&lt;br/&gt;
org.apache.jackrabbit.core.RepositoryImpl Repository has been shutdown&lt;/p&gt;

&lt;p&gt;04.08.2015 16:45:25.610 &lt;b&gt;INFO&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;OsgiInstallerImpl&amp;#93;&lt;/span&gt;&lt;br/&gt;
org.apache.sling.audit.osgi.installer Deleted configuration&lt;br/&gt;
org.apache.sling.jcr.jackrabbit.server.SlingServerRepository.org.apache.sling.jcr.jackrabbit.server.SlingServerRepository.98b4bd1c-11f8-49e7-a5ed-684abf3acfc6&lt;br/&gt;
from resource TaskResource(url=jcrinstall:/apps/sling/install/org.apache.sling.jcr.jackrabbit.server.SlingServerRepository-98b4bd1c-11f8-49e7-a5ed-684abf3acfc6.config,&lt;br/&gt;
entity=config:org.apache.sling.jcr.jackrabbit.server.SlingServerRepository.org.apache.sling.jcr.jackrabbit.server.SlingServerRepository.98b4bd1c-11f8-49e7-a5ed-684abf3acfc6,&lt;br/&gt;
state=UNINSTALL,&lt;br/&gt;
attributes=[service.factoryPid=org.apache.sling.jcr.jackrabbit.server.SlingServerRepository,&lt;br/&gt;
installation.hint=launchpad:resources/install.jackrabbit/15/org.apache.sling.jcr.jackrabbit.server-2.2.1-SNAPSHOT.jar,&lt;br/&gt;
resource.uri.hint=org.apache.sling.jcr.jackrabbit.server.SlingServerRepository-98b4bd1c-11f8-49e7-a5ed-684abf3acfc6,&lt;br/&gt;
service.pid=org.apache.sling.jcr.jackrabbit.server.SlingServerRepository.98b4bd1c-11f8-49e7-a5ed-684abf3acfc6],&lt;br/&gt;
digest=588c513978ea07a8a9091048913e231e)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12851415">SLING-4925</key>
            <summary>Installer kills SlingServerRepository config if o.a.s.installer.factory.configuration starts at boot</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Aug 2015 15:11:43 +0000</created>
                <updated>Thu, 6 Aug 2015 11:50:11 +0000</updated>
                            <resolved>Thu, 6 Aug 2015 11:50:11 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14653960" author="bdelacretaz" created="Tue, 4 Aug 2015 16:53:08 +0000"  >&lt;p&gt;Getting closer, the config uninstall task is created due to this code in &lt;tt&gt;OsgiInstallerImpl&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;logger.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Resource {} seems to be removed.&quot;&lt;/span&gt;, r);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ( first &amp;amp;&amp;amp; (r.getState() == ResourceState.INSTALLED
  ||  r.getState() == ResourceState.INSTALL) ) {
  ((RegisteredResourceImpl)r).setState(ResourceState.UNINSTALL);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14654076" author="cziegeler" created="Tue, 4 Aug 2015 18:13:22 +0000"  >&lt;p&gt;I don&apos;t think its this line, it might be the final stone in a chain of things that go wrong. This is part of the merging so it seems that there is something wrong with the rendezvous part.&lt;br/&gt;
I suggest to turn on debug logging and see what is going on&lt;/p&gt;</comment>
                            <comment id="14654085" author="cziegeler" created="Tue, 4 Aug 2015 18:18:42 +0000"  >&lt;p&gt;Didn&apos;t realize that there is a config write back - we really should find out why this is happening in the first place. Isn&apos;t this configuration provided by launchpad and there shouldn&apos;t be a write back?&lt;/p&gt;</comment>
                            <comment id="14654284" author="bdelacretaz" created="Tue, 4 Aug 2015 20:15:33 +0000"  >&lt;p&gt;The configuration is created in code, by the jackrabbit server bundle. I suppose it is written back later as soon as the repository becomes available and that triggers the configuration removal eventually&lt;/p&gt;</comment>
                            <comment id="14654693" author="cziegeler" created="Wed, 5 Aug 2015 02:15:24 +0000"  >&lt;p&gt;My first guess is that there is a timing problem - however, the configuration should not be created by code, we should really move this to the provisioning model&lt;/p&gt;</comment>
                            <comment id="14654946" author="bdelacretaz" created="Wed, 5 Aug 2015 07:30:20 +0000"  >&lt;p&gt;I agree about using the provisioning model in general, but what&apos;s happening here definitely looks like a bug or a combination of bugs, so it&apos;s worth finding out the actual cause.&lt;/p&gt;</comment>
                            <comment id="14655183" author="cziegeler" created="Wed, 5 Aug 2015 11:01:22 +0000"  >&lt;p&gt;Absolutely, as mentioned I suggest to debug the rendezvous calls and see what happens there. If everything is fine on that level, go one level deeper&lt;/p&gt;</comment>
                            <comment id="14658242" author="rombert" created="Wed, 5 Aug 2015 13:52:54 +0000"  >&lt;p&gt;I think that what happens is that the OsgiInstaller and JcrInstaller are stepping on each other&apos;s toes, and that&apos;s an effect of the JcrInstaller having a dependency on the SlingRepository service.&lt;/p&gt;

&lt;p&gt;On &apos;regular&apos; startup, when the config is not yet created, the created configuration is picked up by the OsgiInstaller and processed as is. Obviously, the JcrInstaller did not have the time to register the config as an installable resource with the OsgiInstaller as it was not yet installed.&lt;/p&gt;

&lt;p&gt;When the bundle is restarted, the JCR installer quickly picks up the existing configurations - they were written in the repository - and registers them with the OSGi installer and they are no longer marked as deleted.&lt;/p&gt;

&lt;p&gt;What&apos;s also interesting is that when the o.a.s.installer.configuration.factory bundle is moved to a later start level, it logs nothing related to the SlingServerRepository config, probably since it was already processed and there&apos;s nothing to do.&lt;/p&gt;

&lt;p&gt;At this point I think this is a special case due to the special nature of the SlingServerRepository component - it does provide the repository after all, and not worth pursuing at the moment. I will investigate what needs to be done for the o.a.s.jcr.jackrabbit.server bundle to store its config in provisioning model.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;edit&lt;/em&gt;: SlingRepositoryServer -&amp;gt; SlingServerRepository&lt;/p&gt;</comment>
                            <comment id="14658251" author="bdelacretaz" created="Wed, 5 Aug 2015 14:00:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;I will investigate what needs to be done for the o.a.s.jcr.jackrabbit.server bundle to store its config in provisioning model.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Currently if a SlingServerRepository (factory) config already exists the Activator doesn&apos;t create one, I&apos;m not sure if this behavior can be kept if the configuration is moved to the provisioning model. &lt;/p&gt;

&lt;p&gt;We might need an extension in that model to declare configs that are only installed if a config LDAP filter returns nothing, in this case to be able to say &quot;install this default config unless another one is provided already&quot;.&lt;/p&gt;</comment>
                            <comment id="14658259" author="rombert" created="Wed, 5 Aug 2015 14:08:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;Currently if a SlingServerRepository (factory) config already exists the Activator doesn&apos;t create one, I&apos;m not sure if this behavior can be kept if the configuration is moved to the provisioning model. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The configurations are know to the ConfigurationAdmin - just tested with a config in jackrabbit.txt and some minor adjustments to SlingServerRepositoryManager, so the behaviour can be kept as-is. The Activator looks to be written with such a use case in mind.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We might need an extension in that model to declare configs that are only installed if a config LDAP filter returns nothing, in this case to be able to say &quot;install this default config unless another one is provided already&quot;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I am not sure what this would solve ; to my understanding configurations added by the provisioning model would be processed much earlier than the config which would be added by the bundle&apos;s Activator.&lt;/p&gt;</comment>
                            <comment id="14658342" author="cziegeler" created="Wed, 5 Aug 2015 15:12:15 +0000"  >&lt;p&gt;Thanks for the update, this was actually my gues as well, that this is a special case and kind of a timing problem. I think we don&apos;t have to do anything here.&lt;/p&gt;</comment>
                            <comment id="14658345" author="cziegeler" created="Wed, 5 Aug 2015 15:13:33 +0000"  >&lt;p&gt;Can we get rid of configuration manipulations in a bundle completely?&lt;/p&gt;</comment>
                            <comment id="14659884" author="rombert" created="Thu, 6 Aug 2015 11:49:18 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4929&quot; title=&quot;Remove configuration logic from SlingServerRepository&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4929&quot;&gt;&lt;del&gt;SLING-4929&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14659890" author="rombert" created="Thu, 6 Aug 2015 11:49:59 +0000"  >&lt;p&gt;I&apos;ll resolve this as a WONTFIX then. If anyone thinks there actually is something to fix, please reopen and I&apos;ll look into it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ibhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4924] Unable to deploy bundle on a Sling instance with a custom context</title>
                <link>https://issues.apache.org/jira/browse/SLING-4924</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;ol&gt;
	&lt;li&gt;start a Sling instance with a custom context path , e.g. /custom&lt;/li&gt;
	&lt;li&gt;create a new Sling server in Eclipse&lt;/li&gt;
	&lt;li&gt;set the context path to /custom&lt;/li&gt;
	&lt;li&gt;start the server ( &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4923&quot; title=&quot;Unable to connect to Sling instance running with a custom context&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4923&quot;&gt;&lt;del&gt;SLING-4923&lt;/del&gt;&lt;/a&gt; fix applied )&lt;/li&gt;
	&lt;li&gt;deploy a bundle&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Deployment fails with the following message:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Failed installing bundle : org.apache.commons.httpclient.HttpException: Got status code 404 for call to http://localhost:8080/customsystem/console/bundles.json&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12851371">SLING-4924</key>
            <summary>Unable to deploy bundle on a Sling instance with a custom context</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Aug 2015 11:29:32 +0000</created>
                <updated>Thu, 8 Oct 2015 13:10:39 +0000</updated>
                            <resolved>Tue, 4 Aug 2015 12:11:07 +0000</resolved>
                                                    <fixVersion>Sling Eclipse IDE 1.0.8</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14653526" author="rombert" created="Tue, 4 Aug 2015 12:11:07 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1694037&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1694037&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ib8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4923] Unable to connect to Sling instance running with a custom context</title>
                <link>https://issues.apache.org/jira/browse/SLING-4923</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;ol&gt;
	&lt;li&gt;start a Sling instance with a custom context path , e.g. /custom&lt;/li&gt;
	&lt;li&gt;create a new Sling server in Eclipse&lt;/li&gt;
	&lt;li&gt;set the context path to /custom&lt;/li&gt;
	&lt;li&gt;start the server&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Connection fails with the following error message:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;No repository found at http://localhost:8080/custom
http://localhost:8080/customserver/-/jcr:root : Not Found
http://localhost:8080/customcrx/-/jcr:root : Not Found&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12851364">SLING-4923</key>
            <summary>Unable to connect to Sling instance running with a custom context</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Aug 2015 10:51:53 +0000</created>
                <updated>Thu, 8 Oct 2015 13:10:39 +0000</updated>
                            <resolved>Tue, 4 Aug 2015 12:10:44 +0000</resolved>
                                                    <fixVersion>Sling Eclipse IDE 1.0.8</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14653525" author="rombert" created="Tue, 4 Aug 2015 12:10:44 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1694036&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1694036&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ib6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4922] Validator should be allowed to get the resource on which validation was triggered</title>
                <link>https://issues.apache.org/jira/browse/SLING-4922</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the &lt;tt&gt;Validator&lt;/tt&gt; interface only gets the &lt;tt&gt;ValueMap&lt;/tt&gt; on which the validation has been called (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/validation/api/src/main/java/org/apache/sling/validation/Validator.java#L75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/validation/api/src/main/java/org/apache/sling/validation/Validator.java#L75&lt;/a&gt;). But sometimes this is not enough because more information need to be evaluated in the validator.&lt;br/&gt;
For example the resource path or even the original resource is now completely inaccessible (except via weird workaround like casting to &lt;tt&gt;JcrPropertyMap&lt;/tt&gt; and calling the deprecated &lt;tt&gt;getPath()&lt;/tt&gt; on it). Therefore the validator should also get the resource on which the validation has been called originally (this must be &lt;tt&gt;null&lt;/tt&gt; in case the validation has been triggered directly on a &lt;tt&gt;ValueMap&lt;/tt&gt;). &lt;br/&gt;
That way it would be possible to e.g. get information about the container resource or get a Sling Model of that resource.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12851097">SLING-4922</key>
            <summary>Validator should be allowed to get the resource on which validation was triggered</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Aug 2015 13:28:24 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:41 +0000</updated>
                            <resolved>Fri, 28 Aug 2015 09:21:47 +0000</resolved>
                                                    <fixVersion>Validation 1.0.0</fixVersion>
                                    <component>Validation</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14718256" author="kwin" created="Fri, 28 Aug 2015 09:21:47 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;http://svn.apache.org/r1698283&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1698283&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2i9l3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4921] SlingMainServlet logs IOException at debug level only</title>
                <link>https://issues.apache.org/jira/browse/SLING-4921</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The log level of IOException was reduced to DEBUG for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3498&quot; title=&quot;Don&amp;#39;t log stacktrace on IOException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3498&quot;&gt;&lt;del&gt;SLING-3498&lt;/del&gt;&lt;/a&gt;, to avoid polluting the logs with client disconnect exceptions, which are hard to identify reliably.&lt;/p&gt;

&lt;p&gt;The downside is that this hides legit IOException from application code, as debug logs are usually not enabled on production systems.&lt;/p&gt;

&lt;p&gt;We should find a better to way to separate client disconnects from application-level IOException, and log the latter in the usual way.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12851075">SLING-4921</key>
            <summary>SlingMainServlet logs IOException at debug level only</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Aug 2015 11:41:02 +0000</created>
                <updated>Mon, 12 Oct 2015 09:44:51 +0000</updated>
                            <resolved>Wed, 5 Aug 2015 11:16:39 +0000</resolved>
                                    <version>Engine 2.4.2</version>
                                    <fixVersion>Engine 2.4.4</fixVersion>
                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14651775" author="bdelacretaz" created="Mon, 3 Aug 2015 11:51:42 +0000"  >&lt;p&gt;Robert suggested looking at how Tomcat generates the ClientAbortException that it uses to identify client disconnects - turns out that that exception is generated when an output buffer is written or flushed to the client.&lt;/p&gt;

&lt;p&gt;The attached &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4921&quot; title=&quot;SlingMainServlet logs IOException at debug level only&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4921&quot;&gt;&lt;del&gt;SLING-4921&lt;/del&gt;&lt;/a&gt;.patch uses the same technique where the RequestLoggerFilter&apos;s RequestLoggerResponse.LoggerResponseOutputStream class wraps IOExceptions in ClientAbortException when writing to the client.&lt;/p&gt;

&lt;p&gt;Using my test client &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; to generate lots of disconnects, with this patch I get the correct ClientAbortException at the debug level in the logs, and other IOException are now reported like any other exceptions.&lt;/p&gt;

&lt;p&gt;This will only work if the RequestLoggerFilter is used, and we might want to implement the same technique in other places where we write to the client - I&apos;ll ask for feedback on our dev list.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/whiteboard/bdelacretaz/http-disconnect-test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/whiteboard/bdelacretaz/http-disconnect-test&lt;/a&gt; - run with &quot;java -jar target/org.apache.sling.bdelacretaz.http.disconnect-0.1.1-SNAPSHOT.jar  10000 0.01 localhost 8080 /index.html&quot;&lt;/p&gt;</comment>
                            <comment id="14651784" author="bdelacretaz" created="Mon, 3 Aug 2015 11:58:43 +0000"  >&lt;p&gt;Attaching ClientAbortException stack trace for reference&lt;/p&gt;</comment>
                            <comment id="14655209" author="bdelacretaz" created="Wed, 5 Aug 2015 11:16:39 +0000"  >&lt;p&gt;Patch applied in revision 1694179, with tests.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12707191">SLING-3498</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12748438" name="SLING-4921.patch" size="5834" author="bdelacretaz" created="Mon, 3 Aug 2015 11:51:42 +0000"/>
                            <attachment id="12748439" name="cae-stack-trace.txt" size="7333" author="bdelacretaz" created="Mon, 3 Aug 2015 11:58:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2i9gf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4920] content.query.json gives 404</title>
                <link>https://issues.apache.org/jira/browse/SLING-4920</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I am using sling and trying to execute xpath query with //* using get request &lt;br/&gt;
&lt;a href=&quot;http://localhost:8089/content.query.tidy.json?queryType=xpath&amp;amp;statement=//*&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8089/content.query.tidy.json?queryType=xpath&amp;amp;statement=//*&lt;/a&gt;&lt;br/&gt;
but getting 404 error as follows&lt;/p&gt;







&lt;p&gt;No resource found (404)&lt;/p&gt;

&lt;p&gt;The requested URL /content.query.tidy.json resulted in an error in org.apache.sling.servlets.resolver.internal.defaults.DefaultErrorHandlerServlet.&lt;br/&gt;
Request Progress:&lt;/p&gt;

&lt;p&gt;      0 (2015-08-03 14:16:05) TIMER_START&lt;/p&gt;
{Request Processing}
&lt;p&gt;      0 (2015-08-03 14:16:05) COMMENT timer_end format is &lt;/p&gt;
{&amp;lt;elapsed msec&amp;gt;,&amp;lt;timer name&amp;gt;}
&lt;p&gt; &amp;lt;optional message&amp;gt;&lt;br/&gt;
      0 (2015-08-03 14:16:05) LOG Method=GET, PathInfo=/content.query.tidy.json&lt;br/&gt;
      0 (2015-08-03 14:16:05) TIMER_START&lt;/p&gt;
{ResourceResolution}
&lt;p&gt;      0 (2015-08-03 14:16:05) TIMER_END&lt;/p&gt;
{0,ResourceResolution}
&lt;p&gt; URI=/content.query.tidy.json resolves to Resource=NonExistingResource, path=/content.query.tidy.json&lt;br/&gt;
      0 (2015-08-03 14:16:05) LOG Resource Path Info: SlingRequestPathInfo: path=&apos;/content.query.tidy.json&apos;, selectorString=&apos;query.tidy&apos;, extension=&apos;json&apos;, suffix=&apos;null&apos;&lt;br/&gt;
      0 (2015-08-03 14:16:05) TIMER_START&lt;/p&gt;
{ServletResolution}
&lt;p&gt;      0 (2015-08-03 14:16:05) TIMER_START&lt;/p&gt;
{resolveServlet(NonExistingResource, path=/content.query.tidy.json)}
&lt;p&gt;      0 (2015-08-03 14:16:05) TIMER_END&lt;/p&gt;
{0,resolveServlet(NonExistingResource, path=/content.query.tidy.json)}
&lt;p&gt; Using servlet org.apache.sling.servlets.get.DefaultGetServlet&lt;br/&gt;
      0 (2015-08-03 14:16:05) TIMER_END&lt;/p&gt;
{0,ServletResolution}
&lt;p&gt; URI=/content.query.tidy.json handled by Servlet=org.apache.sling.servlets.get.DefaultGetServlet&lt;br/&gt;
      0 (2015-08-03 14:16:05) LOG Applying Requestfilters&lt;br/&gt;
      0 (2015-08-03 14:16:05) LOG Calling filter: org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter&lt;br/&gt;
      0 (2015-08-03 14:16:05) LOG Applying Componentfilters&lt;br/&gt;
      0 (2015-08-03 14:16:05) TIMER_START&lt;/p&gt;
{org.apache.sling.servlets.get.DefaultGetServlet#0}
&lt;p&gt;      0 (2015-08-03 14:16:05) TIMER_END&lt;/p&gt;
{0,org.apache.sling.servlets.get.DefaultGetServlet#0}
&lt;p&gt;      0 (2015-08-03 14:16:05) TIMER_START&lt;/p&gt;
{handleError:status=404}
&lt;p&gt;      0 (2015-08-03 14:16:05) TIMER_END&lt;/p&gt;
{0,handleError:status=404}
&lt;p&gt; Using handler org.apache.sling.servlets.resolver.internal.defaults.DefaultErrorHandlerServlet&lt;br/&gt;
      0 (2015-08-03 14:16:05) TIMER_END&lt;/p&gt;
{0,Request Processing}
&lt;p&gt; Dumping SlingRequestProgressTracker Entries&lt;/p&gt;</description>
                <environment>JDK 1.7</environment>
        <key id="12851050">SLING-4920</key>
            <summary>content.query.json gives 404</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="swapnil.bagul89">Swapnil Bagul</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Aug 2015 08:47:29 +0000</created>
                <updated>Mon, 3 Aug 2015 10:44:40 +0000</updated>
                            <resolved>Mon, 3 Aug 2015 09:14:02 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14651632" author="rombert" created="Mon, 3 Aug 2015 09:14:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=swapnil.bagul89&quot; class=&quot;user-hover&quot; rel=&quot;swapnil.bagul89&quot;&gt;swapnil.bagul89&lt;/a&gt; - you need to deploy the `org.apache.sling.servlets.compat` bundle into your Launchpad instance ; it&apos;s no longer part of the default Sling Launchpad.&lt;/p&gt;</comment>
                            <comment id="14651674" author="swapnil.bagul89" created="Mon, 3 Aug 2015 09:47:40 +0000"  >&lt;p&gt;Hi Robart&lt;/p&gt;

&lt;p&gt;Thanks for your reply I am new to sling can you please tell  how to&lt;br/&gt;
deploy the `org.apache.sling.servlets.compat` bundle into Launchpad&lt;br/&gt;
instance. I have deployed war in tomcat which I have downloaded from sling&lt;br/&gt;
site&lt;/p&gt;



&lt;p&gt;On Mon, Aug 3, 2015 at 2:44 PM, Robert Munteanu (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;




&lt;p&gt;&amp;#8211; &lt;br/&gt;
Thanks and Regards&lt;br/&gt;
Swapnil Bagul&lt;br/&gt;
9665337110 and 7588734167&lt;/p&gt;</comment>
                            <comment id="14651711" author="rombert" created="Mon, 3 Aug 2015 10:13:09 +0000"  >&lt;p&gt;The simplest way to deploy it is to&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;download the bundle from &lt;a href=&quot;http://sling.apache.org/downloads.cgi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/downloads.cgi&lt;/a&gt; ( direct link is &lt;a href=&quot;http://mirrors.hostingromania.ro/apache.org//sling/org.apache.sling.servlets.compat-1.0.2.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mirrors.hostingromania.ro/apache.org//sling/org.apache.sling.servlets.compat-1.0.2.jar&lt;/a&gt; )&lt;/li&gt;
	&lt;li&gt;access the OSGi console from your Sling install, e.g. at &lt;a href=&quot;http://localhost:8080/system/console/bundles&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/bundles&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;click on &apos;Install/Bundle...&apos;&lt;/li&gt;
	&lt;li&gt;On the dialog that appears
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;Enable &apos;Start bundle&apos;&lt;/li&gt;
		&lt;li&gt;Browse to the location where you downloaded the bundle jar&lt;/li&gt;
		&lt;li&gt;click &apos;Install or update&apos;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14651736" author="swapnil.bagul89" created="Mon, 3 Aug 2015 10:44:40 +0000"  >&lt;p&gt;Thank you Robert Thank you so much!!!!!!!!!!!!!!!!!!  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;On Mon, Aug 3, 2015 at 3:44 PM, Robert Munteanu (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;




&lt;p&gt;&amp;#8211; &lt;br/&gt;
Thanks and Regards&lt;br/&gt;
Swapnil Bagul&lt;br/&gt;
9665337110 and 7588734167&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2i9av:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4918] Frequent failures of AuthenticationResponseCodeTest </title>
                <link>https://issues.apache.org/jira/browse/SLING-4918</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Lately all test methods of AuthenticationResponseCodeTest often fail on Jenkins with the following (or similar) message:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;expected:&amp;lt;401&amp;gt; but was:&amp;lt;500&amp;gt;
Not able to fetch logs from [http://localhost:41600/system/sling/testlog]. TestLogServer probably not configured
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When reproducing this locally, there is a NullPointerException in the logs:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;29.07.2015 22:05:56.376 *WARN* [qtp1661403026-43] org.eclipse.jetty.servlet.ServletHandler /system/sling/testlog
java.lang.NullPointerException: null
        at ch.qos.logback.core.read.CyclicBufferAppender.reset(CyclicBufferAppender.java:66)
        at org.apache.sling.junit.impl.servlet.TestLogServlet.resetAppender(TestLogServlet.java:158)
        at org.apache.sling.junit.impl.servlet.TestLogServlet.doGet(TestLogServlet.java:150)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:618)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
        at org.apache.felix.http.base.internal.handler.ServletHandler.doHandle(ServletHandler.java:336)
        at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:297)
        at org.apache.felix.http.base.internal.dispatch.ServletPipeline.handle(ServletPipeline.java:93)
        at org.apache.felix.http.base.internal.dispatch.InvocationFilterChain.doFilter(InvocationFilterChain.java:50)
        at org.apache.felix.http.base.internal.dispatch.HttpFilterChain.doFilter(HttpFilterChain.java:31)
        ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12850053">SLING-4918</key>
            <summary>Frequent failures of AuthenticationResponseCodeTest </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2015 20:02:25 +0000</created>
                <updated>Mon, 28 Sep 2015 10:03:52 +0000</updated>
                            <resolved>Wed, 29 Jul 2015 20:17:30 +0000</resolved>
                                    <version>JUnit Core 1.0.10</version>
                                    <fixVersion>JUnit Core 1.0.12</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14646689" author="jsedding" created="Wed, 29 Jul 2015 20:17:30 +0000"  >&lt;p&gt;Committed tentative fix in &lt;a href=&quot;https://svn.apache.org/r1693340&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1693340&lt;/a&gt; that improves synchronization on the &lt;tt&gt;CyclicBufferAppender&lt;/tt&gt; used inside &lt;tt&gt;TestLogServlet&lt;/tt&gt;.&lt;/p&gt;

</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2i387:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4917] BasicInitialContentIT fails for the org.apache.sling.jcr.contentloader module</title>
                <link>https://issues.apache.org/jira/browse/SLING-4917</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The mentioned test suite fails with the following errors:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-------------------------------------------------------------------------------
Test set: org.apache.sling.jcr.contentloader.it.BasicInitialContentIT
-------------------------------------------------------------------------------
Tests run: 2, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 1.061 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.jcr.contentloader.it.BasicInitialContentIT
initialContentInstalled(org.apache.sling.jcr.contentloader.it.BasicInitialContentIT)  Time elapsed: 1.03 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.io.IOException: Error resolving artifact org.apache.sling:org.apache.sling.launchpad.karaf:jar:0.1.1-SNAPSHOT: Could not find artifact org.apache.sling:org.apache.sling.launchpad.karaf:jar:0.1.1-SNAPSHOT
	at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve(AetherBasedResolver.java:354)
	at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolveFile(AetherBasedResolver.java:312)
	at org.ops4j.pax.url.mvn.internal.AetherBasedResolver.resolve(AetherBasedResolver.java:296)
	at org.ops4j.pax.url.mvn.internal.Connection.getInputStream(Connection.java:131)
	at org.apache.felix.framework.util.SecureAction.getURLConnectionInputStream(SecureAction.java:508)
	at org.apache.felix.framework.cache.JarRevision.initialize(JarRevision.java:170)
	at org.apache.felix.framework.cache.JarRevision.&amp;lt;init&amp;gt;(JarRevision.java:82)
	at org.apache.felix.framework.cache.JarRevision.&amp;lt;init&amp;gt;(JarRevision.java:60)
	at org.apache.felix.framework.cache.BundleArchive.createRevisionFromLocation(BundleArchive.java:868)
	at org.apache.felix.framework.cache.BundleArchive.reviseInternal(BundleArchive.java:549)
	at org.apache.felix.framework.cache.BundleArchive.&amp;lt;init&amp;gt;(BundleArchive.java:148)
	at org.apache.felix.framework.cache.BundleCache.create(BundleCache.java:251)
	at org.apache.felix.framework.Felix.installBundle(Felix.java:2476)
	at org.apache.felix.framework.Felix.installBundle(Felix.java:2436)
	at org.apache.felix.framework.BundleContextImpl.installBundle(BundleContextImpl.java:129)
	at org.apache.felix.framework.BundleContextImpl.installBundle(BundleContextImpl.java:107)
	at org.ops4j.pax.exam.nat.internal.NativeTestContainer.installAndStartBundles(NativeTestContainer.java:307)
	at org.ops4j.pax.exam.nat.internal.NativeTestContainer.start(NativeTestContainer.java:175)
	at org.ops4j.pax.exam.spi.reactors.AllConfinedStagedReactor.invoke(AllConfinedStagedReactor.java:79)
	at org.ops4j.pax.exam.junit.PaxExam$2.evaluate(PaxExam.java:294)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.ops4j.pax.exam.junit.PaxExam.run(PaxExam.java:111)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)

bundleStarted(org.apache.sling.jcr.contentloader.it.BasicInitialContentIT)  Time elapsed: 0.005 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.Exception: Unable to lock bundle cache: java.nio.channels.OverlappingFileLockException
	at org.apache.felix.framework.cache.BundleCache.&amp;lt;init&amp;gt;(BundleCache.java:152)
	at org.apache.felix.framework.Felix.init(Felix.java:593)
	at org.ops4j.pax.exam.nat.internal.NativeTestContainer.start(NativeTestContainer.java:174)
	at org.ops4j.pax.exam.spi.reactors.AllConfinedStagedReactor.invoke(AllConfinedStagedReactor.java:79)
	at org.ops4j.pax.exam.junit.PaxExam$2.evaluate(PaxExam.java:294)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.ops4j.pax.exam.junit.PaxExam.run(PaxExam.java:111)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12849982">SLING-4917</key>
            <summary>BasicInitialContentIT fails for the org.apache.sling.jcr.contentloader module</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2015 16:16:57 +0000</created>
                <updated>Mon, 8 May 2017 07:56:19 +0000</updated>
                            <resolved>Wed, 5 Aug 2015 20:54:12 +0000</resolved>
                                    <version>JCR ContentLoader 2.1.10</version>
                                    <fixVersion>JCR ContentLoader 2.2.0</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14646340" author="radu.cotescu" created="Wed, 29 Jul 2015 16:18:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;, do you have any idea why the Karaf launchpad module cannot be found?&lt;/p&gt;</comment>
                            <comment id="14646499" author="olli" created="Wed, 29 Jul 2015 17:51:45 +0000"  >&lt;p&gt;Exam doesn&apos;t know the Apache Snapshots repo, but I remember a bug adding additional repositories.&lt;br/&gt;
And the used Pax Exam and Pax URL versions are really old, we should update.&lt;/p&gt;</comment>
                            <comment id="14646725" author="olli" created="Wed, 29 Jul 2015 20:38:28 +0000"  >&lt;p&gt;r1693342&lt;/p&gt;</comment>
                            <comment id="14653852" author="olli" created="Tue, 4 Aug 2015 15:59:17 +0000"  >&lt;p&gt;better solved in &lt;tt&gt;org.apache.sling.paxexam.util.SlingSetupTest&lt;/tt&gt; and &lt;tt&gt;org.apache.sling.event.it.AbstractJobHandlingTest&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="14658905" author="olli" created="Wed, 5 Aug 2015 20:54:12 +0000"  >&lt;p&gt;replaced StartupHandler from Karaf by anonymous one in r1694326&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2i2sn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4915] Order of sub-nodes is not maintained in case of a merge</title>
                <link>https://issues.apache.org/jira/browse/SLING-4915</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Given two content structures that should be merged by the Resource Merger, if the second tree contains all the sub-nodes of the first tree, a new node added in the second tree will always be added towards the end, irrespective of its position in the sub-node tree.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/libs/p1/components/c1
  node1
  node2
  node3
/libs/p2/components/c1 (sling:resourceSuperType=/libs/p1/components/c1)
  node1
  node4
  node2
  node3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When iterating over the child resources of &lt;tt&gt;/libs/p2/components/c1&lt;/tt&gt;, &lt;tt&gt;node4&lt;/tt&gt; will be the last child in the iteration instead of the second.&lt;/p&gt;

&lt;p&gt;The workaround is to not define the redundant nodes and add the &lt;tt&gt;sling:orderBefore&lt;/tt&gt; property on &lt;tt&gt;node4&lt;/tt&gt;, however this should be handled by default by the merger.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12849890">SLING-4915</key>
            <summary>Order of sub-nodes is not maintained in case of a merge</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2015 10:09:00 +0000</created>
                <updated>Wed, 14 Jun 2017 11:24:10 +0000</updated>
                            <resolved>Fri, 12 Feb 2016 10:58:23 +0000</resolved>
                                    <version>Resource Merger 1.2.10</version>
                                    <fixVersion>Resource Merger 1.3.2</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15140750" author="kwin" created="Wed, 10 Feb 2016 13:17:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; Which order should be taken in case  &lt;tt&gt;p2&lt;/tt&gt; would not redefine all the children from &lt;tt&gt;p1&lt;/tt&gt; but only few of them? Which order should be used then? Just take the following example &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/libs/p1/components/c1
  node1
  node2
  node3
/libs/p2/components/c1 (sling:resourceSuperType=/libs/p1/components/c1)
  node4
  node2
  node3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The current rule is:&lt;br/&gt;
Always first all children of the underlying resource (in the order defined by the underlying resource) then all new children only defined by the overlaying resource. That can only be changed with the &lt;tt&gt;sling:orderBefore&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15140766" author="radu.cotescu" created="Wed, 10 Feb 2016 13:36:26 +0000"  >&lt;p&gt;Why wouldn&apos;t this work?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    node1
    node4
    node2
    node3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15140777" author="kwin" created="Wed, 10 Feb 2016 13:48:42 +0000"  >&lt;p&gt;So the logic would be:&lt;br/&gt;
First the children from the underlying resource, then the children from the overlaying resource. If the latter contains the same resource name as the former, the order from the overlaying resource is taken.&lt;/p&gt;</comment>
                            <comment id="15140782" author="radu.cotescu" created="Wed, 10 Feb 2016 13:50:57 +0000"  >&lt;p&gt;Exactly. IMO it should perform an intertwined merge.&lt;/p&gt;</comment>
                            <comment id="15144409" author="kwin" created="Fri, 12 Feb 2016 10:58:23 +0000"  >&lt;p&gt;Fixed by &lt;a href=&quot;http://svn.apache.org/r1729981&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1729981&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15144414" author="kwin" created="Fri, 12 Feb 2016 11:01:59 +0000"  >&lt;p&gt;Removed some no longer needed code in &lt;a href=&quot;http://svn.apache.org/r1729983&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1729983&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13079730">SLING-6956</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2i2af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4914] LogPanel should pass appender name as request parameter</title>
                <link>https://issues.apache.org/jira/browse/SLING-4914</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;SlingLogPanel currently passes the appender name as part of request url itself. This can at times pose problem as the appender name can be arbitrary. It would be better if the name is passed as part of request parameter&lt;/p&gt;</description>
                <environment></environment>
        <key id="12849845">SLING-4914</key>
            <summary>LogPanel should pass appender name as request parameter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jul 2015 05:38:50 +0000</created>
                <updated>Tue, 11 Aug 2015 13:00:28 +0000</updated>
                            <resolved>Wed, 29 Jul 2015 06:06:28 +0000</resolved>
                                                    <fixVersion>Commons Log 4.0.6</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14645514" author="chetanm" created="Wed, 29 Jul 2015 06:06:28 +0000"  >&lt;p&gt;Change the implementation. Now url is like below&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:8080/system/console/slinglog/tailer.txt?tail=&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/slinglog/tailer.txt?tail=&lt;/a&gt;&amp;lt;number of lines to dump&amp;gt;&amp;amp;name=&amp;lt;appender name&amp;gt;&lt;/p&gt;

&lt;p&gt;Done with &lt;a href=&quot;http://svn.apache.org/r1693182&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1693182&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12849219">SLING-4905</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2i20n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4910] NPE in JCrResourceBundleProvider</title>
                <link>https://issues.apache.org/jira/browse/SLING-4910</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;At fresh startup seeing couple of exceptions like below. Looks like by the time events are delivered ResourceResolverFactory is still not set (ResourceResolverFactory is missing. Cannot create ResourceResolver) which later causes NPE. &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;28.07.2015 09:37:49.803 *ERROR* [Thread-36] org.apache.sling.i18n.impl.JcrResourceBundleProvider getResourceResolver: ResourceResolverFactory is missing. Cannot create ResourceResolver
28.07.2015 09:37:49.804 *WARN* [Thread-36] org.apache.felix.eventadmin Service [org.apache.sling.i18n.impl.JcrResourceBundleProvider,160, [org.apache.sling.i18n.ResourceBundleProvider, org.osgi.service.event.EventHandler]] EventAdmin: Exception during event dispatch [org.osgi.service.event.Event [topic=org/apache/sling/api/resource/Resource/ADDED] | [org.apache.sling.i18n.ResourceBundleProvider, org.osgi.service.event.EventHandler] | Bundle(org.apache.sling.i18n [93])] (java.lang.NullPointerException)
java.lang.NullPointerException: null
	at org.apache.sling.i18n.impl.JcrResourceBundle.refreshSession(JcrResourceBundle.java:98)
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.isDictionaryResource(JcrResourceBundleProvider.java:250)
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.handleEvent(JcrResourceBundleProvider.java:229)
	at org.apache.felix.eventadmin.impl.handler.EventHandlerProxy.sendEvent(EventHandlerProxy.java:415)
	at org.apache.felix.eventadmin.impl.tasks.SyncDeliverTasks$1.run(SyncDeliverTasks.java:145)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12849512">SLING-4910</key>
            <summary>NPE in JCrResourceBundleProvider</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jul 2015 04:22:42 +0000</created>
                <updated>Thu, 13 Aug 2015 07:16:09 +0000</updated>
                            <resolved>Tue, 28 Jul 2015 15:41:19 +0000</resolved>
                                    <version>i18n 2.4.4</version>
                                    <fixVersion>i18n 2.4.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14643830" author="chetanm" created="Tue, 28 Jul 2015 04:24:10 +0000"  >&lt;p&gt;Seeing this issue with latest trunk i.e. 2.4.3-SNAPSHOT&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; May be this is related to recent changes done for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4811&quot; title=&quot;Handle OSGi event in a separate thread to prevent being blacklisted by the OSGi Event Admin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4811&quot;&gt;&lt;del&gt;SLING-4811&lt;/del&gt;&lt;/a&gt;. Can you have a look&lt;/p&gt;</comment>
                            <comment id="14643887" author="kwin" created="Tue, 28 Jul 2015 05:49:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; Yes, indeed this is related to my changes. Thanks for noticing.&lt;br/&gt;
While looking at the code I am wondering why the &lt;tt&gt;ResourceResolverFactory&lt;/tt&gt; is a dynamic reference at all (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java#L104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java#L104&lt;/a&gt;). IMHO this should be static, and loosing it should lead to the JcrResourceBundleProvider being deactivated!&lt;/p&gt;</comment>
                            <comment id="14644555" author="kwin" created="Tue, 28 Jul 2015 15:41:09 +0000"  >&lt;p&gt;I fixed it in &lt;a href=&quot;https://svn.apache.org/r1693118&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1693118&lt;/a&gt; by making the resource resolver factory a static reference. Also now the resource resolver is once opened in the activate and closed only in the deactivate.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexander.klimetschek&quot; class=&quot;user-hover&quot; rel=&quot;alexander.klimetschek&quot;&gt;alexander.klimetschek&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; Please check if the fix is fine for you.&lt;/p&gt;</comment>
                            <comment id="14694264" author="alexander.klimetschek" created="Wed, 12 Aug 2015 22:09:29 +0000"  >&lt;p&gt;I assume there was a good reason for the ResourceResolverFactory reference to be dynamic. Unfortunately it&apos;s not visible from the version history, this was present before the &lt;a href=&quot;https://github.com/apache/sling/commit/cc7e95b8c6d2748a2dd2c59bb6c045892fc6f40b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;move sling to TLP location commit&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;My guess would be that restarts of this service should be avoided, since requests depend on it via the I18n filter and that should not depend on the resource resolver... though that seems unnecessary, if the resolver factory is gone, request handling is blocked anyway, right?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fmeschbe&quot; class=&quot;user-hover&quot; rel=&quot;fmeschbe&quot;&gt;fmeschbe&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Do you remember?&lt;/p&gt;

&lt;p&gt;The NPE can be fixed simply by guarding any access to the resolver if we need/want to keep the dynamic reference.&lt;/p&gt;</comment>
                            <comment id="14694694" author="cziegeler" created="Thu, 13 Aug 2015 05:07:54 +0000"  >&lt;p&gt;The references from the filter are dynamic to reduce the impact, the reference to the RRF should be static as it is right now, there is no point in having it dynamic.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12855778">SLING-4944</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2i00v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4903] ConcurrentModificationException in MapEntries</title>
                <link>https://issues.apache.org/jira/browse/SLING-4903</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.sling.engine.impl.SlingRequestProcessorImpl service: Uncaught Throwable java.util.ConcurrentModificationException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
 at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:859)
 at java.util.ArrayList$Itr.next(ArrayList.java:831)
 at org.apache.sling.resourceresolver.impl.mapping.MapEntries$MapEntryIterator.seek(MapEntries.jav a:1499)
 at org.apache.sling.resourceresolver.impl.mapping.MapEntries$MapEntryIterator.next(MapEntries.jav a:1450)
 at org.apache.sling.resourceresolver.impl.mapping.MapEntries$MapEntryIterator.next(MapEntries.jav a:1411)
 at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.resolveInternal(ResourceResolverIm pl.java:251)
 at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.resolve(ResourceResolverImpl.java: 192)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12848834">SLING-4903</key>
            <summary>ConcurrentModificationException in MapEntries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jul 2015 08:42:47 +0000</created>
                <updated>Mon, 8 Feb 2016 22:12:12 +0000</updated>
                            <resolved>Mon, 27 Jul 2015 11:36:51 +0000</resolved>
                                                    <fixVersion>Resource Resolver 1.4.0</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14640205" author="asanso" created="Fri, 24 Jul 2015 09:31:43 +0000"  >&lt;p&gt;adding patch containing unit test that reproduces the issue&lt;/p&gt;</comment>
                            <comment id="14640357" author="asanso" created="Fri, 24 Jul 2015 12:04:07 +0000"  >&lt;p&gt;attaching strawman patch. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; WDYT?&lt;/p&gt;

&lt;p&gt;The idea is to use CopyOnWriteArrayList rather then ArrayList. The only gotcha is that CopyOnWriteArrayList doesn;t support Collection.sort&lt;/p&gt;</comment>
                            <comment id="14640388" author="chetanm" created="Fri, 24 Jul 2015 12:21:35 +0000"  >&lt;p&gt;If the write is not concurrent  i.e. 2 thread writing to the list at same time  then instead of using CopyOnWriteArrayList you can just clone existing list (copy content to new) and then replace the entry in the map with new sorted list. This would ensure list is not modified while an iterator is opened&lt;/p&gt;</comment>
                            <comment id="14640433" author="asanso" created="Fri, 24 Jul 2015 13:14:45 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt;. Do you mean something like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /**
     * Add an entry to the resolve map.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; addEntry(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, List&amp;lt;MapEntry&amp;gt;&amp;gt; entryMap, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MapEntry entry) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entry==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;){
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        }
        List&amp;lt;MapEntry&amp;gt; entries = entryMap.get(key);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entries == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            entries = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;MapEntry&amp;gt;();
            entries.add(entry);
            &lt;span class=&quot;code-comment&quot;&gt;// and &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; sort list
&lt;/span&gt;            Collections.sort(entries);
            entryMap.put(key, entries);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            List&amp;lt;MapEntry&amp;gt; entriesCloned = (List&amp;lt;MapEntry&amp;gt;)  ((ArrayList&amp;lt;MapEntry&amp;gt;) entries).clone();
            entriesCloned.add(entry);
            &lt;span class=&quot;code-comment&quot;&gt;// and &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; sort list
&lt;/span&gt;            Collections.sort( entriesCloned);
            entryMap.put(key, entriesCloned);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14640507" author="chetanm" created="Fri, 24 Jul 2015 14:26:02 +0000"  >&lt;p&gt; No instead of cloning just create a new list like {{ List&amp;lt;MapEntry&amp;gt; entriesCopy =new ArrayList&amp;lt;MapEntry&amp;gt;(entries);}} and replaced the entry in entryMap like below&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * Add an entry to the resolve map.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; addEntry(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, List&amp;lt;MapEntry&amp;gt;&amp;gt; entryMap, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; MapEntry entry) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entry==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;){
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        }
        List&amp;lt;MapEntry&amp;gt; entries = entryMap.get(key);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entries == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            entries = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;MapEntry&amp;gt;();
            entries.add(entry);
            &lt;span class=&quot;code-comment&quot;&gt;// and &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; sort list
&lt;/span&gt;            Collections.sort(entries);
            entryMap.put(key, entries);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            List&amp;lt;MapEntry&amp;gt; entriesCopy =&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;MapEntry&amp;gt;(entries);
            entriesCopy.add(entry);
            &lt;span class=&quot;code-comment&quot;&gt;// and &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; sort list
&lt;/span&gt;            Collections.sort( entriesCopy);
            entryMap.put(key, entriesCopy);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14642596" author="asanso" created="Mon, 27 Jul 2015 11:36:51 +0000"  >&lt;p&gt;fixed in rev 1692825&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12747013" name="SLING-4883-patch.txt" size="4898" author="asanso" created="Fri, 24 Jul 2015 12:04:07 +0000"/>
                            <attachment id="12746993" name="SLING-4883-test-patch.txt" size="3351" author="asanso" created="Fri, 24 Jul 2015 09:31:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hvwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4899] Background servlets: potential job storage path conflicts in clustered environments</title>
                <link>https://issues.apache.org/jira/browse/SLING-4899</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The background servlet creates stream nodes under a configurable path with a local counter. When running in a cluster, it may happen that background servlets on multiple cluster nodes try to create the same stream node.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IllegalArgumentException: Stream node already exists: /var/bg/jobs/2015/07/17/15/51/82/stream
	at org.apache.sling.bgservlets.impl.storage.JobDataImpl.getOutputStream(JobDataImpl.java:74)
	at org.apache.sling.bgservlets.impl.BackgroundRequestExecutionJob.&amp;lt;init&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It would probably be good to include the slingId in the path prefix to separate streams from different cluster nodes. A similar approach is implemented already for sling jobs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12848478">SLING-4899</key>
            <summary>Background servlets: potential job storage path conflicts in clustered environments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jul 2015 07:56:09 +0000</created>
                <updated>Thu, 19 Nov 2015 20:54:25 +0000</updated>
                            <resolved>Tue, 28 Jul 2015 14:31:29 +0000</resolved>
                                    <version>Background Servlets 1.0.0</version>
                                    <fixVersion>Background Servlets 1.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14644443" author="bdelacretaz" created="Tue, 28 Jul 2015 14:31:29 +0000"  >&lt;p&gt;At revision 1693098 this is fixed using the Sling instance ID in the jobs storage path, as suggested. &lt;/p&gt;

&lt;p&gt;Job content is now under paths like &lt;tt&gt;/var/bg/jobs/6c707c04-200b-4358-92d2-02c223f9c0ee/2015/07/28/15/59/2&lt;/tt&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2htqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4898] Scheduler: misconfigured job should not disable all other jobs on activate()</title>
                <link>https://issues.apache.org/jira/browse/SLING-4898</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Upon start of the scheduler bundle, if one Job is misconfigured and an exception is thrown like below, all other Jobs tracked by the ServiceTracker will be ignored since the exception bubbles up.&lt;/p&gt;

&lt;p&gt;I guess it should be isolated by catching any exception when &lt;a href=&quot;https://github.com/apache/sling/blob/dbf5122bb38cd011a5cd88cd6540acf8a98a9e82/bundles/commons/scheduler/src/main/java/org/apache/sling/commons/scheduler/impl/WhiteboardHandler.java#L75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;calling register()&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;21.07.2015 11:37:11.818 *ERROR* [FelixFrameworkWiring] org.apache.sling.commons.scheduler [org.apache.sling.commons.scheduler.impl.WhiteboardHandler(1950)] The activate method has thrown an exception (jav
a.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Long)
java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Long
        at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.register(WhiteboardHandler.java:140)
        at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.access$100(WhiteboardHandler.java:41)
        at org.apache.sling.commons.scheduler.impl.WhiteboardHandler$1.addingService(WhiteboardHandler.java:75)
        at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:932)
        at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:864)
        at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256)
        at org.osgi.util.tracker.AbstractTracked.trackInitial(AbstractTracked.java:183)
        at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:317)
        at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:261)
        at org.apache.sling.commons.scheduler.impl.WhiteboardHandler.activate(WhiteboardHandler.java:80)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:606)
        at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222)
        at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)
        at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615)
        at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499)
        at org.apache.felix.scr.impl.helper.ActivateMethod.invoke(ActivateMethod.java:295)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:302)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:113)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:832)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:799)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:724)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.enable(AbstractComponentManager.java:399)
        at org.apache.felix.scr.impl.config.ConfigurableComponentHolder.enableComponents(ConfigurableComponentHolder.java:669)
        at org.apache.felix.scr.impl.BundleComponentActivator.initialEnable(BundleComponentActivator.java:184)
        at org.apache.felix.scr.impl.Activator.loadComponents(Activator.java:332)
        at org.apache.felix.scr.impl.Activator.access$000(Activator.java:49)
        at org.apache.felix.scr.impl.Activator$ScrExtension.start(Activator.java:257)
        at org.apache.felix.utils.extender.AbstractExtender.createExtension(AbstractExtender.java:259)
        at org.apache.felix.utils.extender.AbstractExtender.modifiedBundle(AbstractExtender.java:232)
        at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:482)
        at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:415)
        at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:232)
        at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444)
        at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:869)
        at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:790)
        at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:515)
        at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4409)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:2098)
        at org.apache.felix.framework.Felix$RefreshHelper.restart(Felix.java:4861)
        at org.apache.felix.framework.Felix.refreshPackages(Felix.java:4128)
        at org.apache.felix.framework.FrameworkWiringImpl.run(FrameworkWiringImpl.java:178)
        at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12848337">SLING-4898</key>
            <summary>Scheduler: misconfigured job should not disable all other jobs on activate()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="alexander.klimetschek">Alexander Klimetschek</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Jul 2015 18:26:33 +0000</created>
                <updated>Fri, 14 Aug 2015 04:56:22 +0000</updated>
                            <resolved>Tue, 28 Jul 2015 13:03:52 +0000</resolved>
                                    <version>Commons Scheduler 2.4.8</version>
                                    <fixVersion>Commons Scheduler 2.4.10</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14644340" author="cziegeler" created="Tue, 28 Jul 2015 13:03:52 +0000"  >&lt;p&gt;Fixed in rev 1693090&lt;br/&gt;
I&apos;ve also added code to handle a change in the name service registration property&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hsw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4896] A race condition can prevent correctly disabling the EventHandler created by the ScriptCache implementation</title>
                <link>https://issues.apache.org/jira/browse/SLING-4896</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;A race condition can make the &lt;tt&gt;org.apache.sling.scripting.core.impl.ScriptCacheImpl&lt;/tt&gt; component to not correctly unregister the &lt;tt&gt;EventHandler&lt;/tt&gt; it dynamically creates.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12846541">SLING-4896</key>
            <summary>A race condition can prevent correctly disabling the EventHandler created by the ScriptCache implementation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jul 2015 14:55:43 +0000</created>
                <updated>Sun, 26 Jul 2015 12:29:31 +0000</updated>
                            <resolved>Tue, 21 Jul 2015 15:08:05 +0000</resolved>
                                    <version>Scripting Core 2.0.30</version>
                                    <fixVersion>Scripting Core 2.0.32</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14635229" author="radu.cotescu" created="Tue, 21 Jul 2015 15:08:05 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1692141&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1692141&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14636171" author="chetanm" created="Wed, 22 Jul 2015 03:47:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; I had earlier logged &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4893&quot; title=&quot;Service already unregistered exception in ScriptCacheImpl&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4893&quot;&gt;&lt;del&gt;SLING-4893&lt;/del&gt;&lt;/a&gt;. Is that same as this one? Is yes then can you close that as duplicate of this&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12846290">SLING-4893</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hhvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4895] Service registry should not be called from within synchronized block</title>
                <link>https://issues.apache.org/jira/browse/SLING-4895</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;RIght now, if e.g. an amendment is added/removed/updated, all registration/unregistration is done in a &quot;large&quot; synchronized block. This should be avoided&lt;/p&gt;</description>
                <environment></environment>
        <key id="12846533">SLING-4895</key>
            <summary>Service registry should not be called from within synchronized block</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jul 2015 14:17:19 +0000</created>
                <updated>Wed, 30 Dec 2015 09:29:54 +0000</updated>
                            <resolved>Thu, 13 Aug 2015 13:18:20 +0000</resolved>
                                    <version>Service User Mapper 1.2.0</version>
                                    <fixVersion>Service User Mapper 1.2.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14640018" author="cziegeler" created="Fri, 24 Jul 2015 06:45:55 +0000"  >&lt;p&gt;I think the easiest solution is to queue the operation and process it asynchronously. Or maybe it&apos;s possible to do more fine grained operations&lt;/p&gt;</comment>
                            <comment id="14640147" author="mpetria" created="Fri, 24 Jul 2015 08:23:05 +0000"  >&lt;p&gt;I think we can safely move the updateServiceMappings out of the synchronized block and use a concurrent map for the activeMappingRegistrations. Basically, it all comes down to updating activeMappingRegistrations from the activeMappings and the conflict can occur only if the same key is involved. It does not look probable to have a conflict on the same mapping, but even if it happens I think we can solve it without additional synchronization. I will try to write a patch for it.&lt;/p&gt;</comment>
                            <comment id="14644530" author="mpetria" created="Tue, 28 Jul 2015 15:28:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I attached a patch that moves the service registration outside the sync block and uses a concurrent hash map to keep the registrations.&lt;/p&gt;</comment>
                            <comment id="14645607" author="cziegeler" created="Wed, 29 Jul 2015 07:17:50 +0000"  >&lt;p&gt;I&apos;ll have a look. I think there is also a bug in the updateServiceMappings method, it does:&lt;br/&gt;
            if (!activeMappingRegistrations.containsKey(mapping)) {&lt;br/&gt;
                ...&lt;br/&gt;
and later on&lt;br/&gt;
                final ServiceRegistration oldRegistration = activeMappingRegistrations.put(mapping, registration);&lt;br/&gt;
but this will always return null as the if already checked that there is no value in the map.&lt;/p&gt;</comment>
                            <comment id="14645651" author="mpetria" created="Wed, 29 Jul 2015 07:52:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; that is exactly the &quot;concurrency fix&quot;. As updateServiceMappings is no longer synchronized, it can happen that two threads pass the guard an register a service for the same mapping, but in that case one needs to unregister one of the services.&lt;/p&gt;</comment>
                            <comment id="14645682" author="cziegeler" created="Wed, 29 Jul 2015 08:13:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt; Ah right, I&apos;m currently trying to find a different solution which reduces the changes to a minimum&lt;/p&gt;</comment>
                            <comment id="14645786" author="cziegeler" created="Wed, 29 Jul 2015 09:34:45 +0000"  >&lt;p&gt;I&apos;ve attached an alternative patch which uses a use count for mappings. However, this is a more complicated setup compared to the original version. on the other hand, it handles the case where several amendments return a mapping for the same combination - I&apos;m not 100% sure if this is currently correctly handled.&lt;br/&gt;
But maybe the simpler patch is already enough&lt;/p&gt;</comment>
                            <comment id="14647433" author="mpetria" created="Thu, 30 Jul 2015 10:25:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I have to look more closely to your version as it introduces indeed more changes. As for your concerns with conflicting mappings maybe we can just fix that and implement hashCode and equals for mapping to be consistent with compareTo.&lt;/p&gt;</comment>
                            <comment id="14647477" author="cziegeler" created="Thu, 30 Jul 2015 11:05:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt; Yes, maybe - however I implemented equals/hashTo for mapping to just compare the &quot;key&quot; part of the mapping not the value (service user name), as this is usually used to detect duplicate mappings. A duplicate mapping is already there if serviceName/subservicename are the same. That&apos;s why I thought to make more drastic changes, but maybe they are not necessary&lt;/p&gt;</comment>
                            <comment id="14647514" author="mpetria" created="Thu, 30 Jul 2015 11:58:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I&apos;ll try to understand the things a little better.  Are duplicate mappings a valid case? It appears to be so, because two amendment configs can have different service.ranking and the reason for that it is probably to be able to override a mapping providing a different username. Hence the identity of a mapping is given by the serviceName and subServiceName, and this means the current compareTo method of Mapping is wrong and should not take into account the userName. &lt;/p&gt;

&lt;p&gt;Compared to my version I think what you do with useCount and unprocessedRegistrations was done by eliminating duplicates of Mappings using sorted sets. The major difference is that in my version you could end up registering a service concurrently and hence you need to unregister. So I think doing something similar to what you do with a placeholder registration makes sense. I will update my patch to behave similarly and let&apos;s decide then which way to go &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                            <comment id="14647535" author="cziegeler" created="Thu, 30 Jul 2015 12:14:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt; Yes, duplicate mappings are valid for the reason you describe &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Ok, looking forward to your patch and then we can do a beauty contest (though I fear, mine will loose)&lt;/p&gt;</comment>
                            <comment id="14647550" author="mpetria" created="Thu, 30 Jul 2015 12:24:27 +0000"  >&lt;p&gt;I am afraid it is a bit harder than I thought initially to prevent double registration &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. However even for you version I have some questions.&lt;/p&gt;

&lt;p&gt;1. unregisterMapping does not remove the mapping from unprocessed mappings&lt;br/&gt;
2. what happens if registerMapping and unregisterMapping execute concurrently for the same mapping (modulo equals). It can happen that registerMapping just puts an incomplete placeholder that unregisterMapping will pick it up bringing the useCount to -1. &lt;/p&gt;</comment>
                            <comment id="14647559" author="cziegeler" created="Thu, 30 Jul 2015 12:33:50 +0000"  >&lt;p&gt;1. Yes, that&apos;s true - this can in theory happen, but I thought it&apos;s too unlikely &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
2. I guess this can be solved/synced somehow&lt;/p&gt;</comment>
                            <comment id="14647640" author="mpetria" created="Thu, 30 Jul 2015 13:52:33 +0000"  >&lt;p&gt;I created another patch that uses a placeholder registration object and then delegates the registrations and unregistrations outside the synched zones.&lt;/p&gt;</comment>
                            <comment id="14681727" author="cziegeler" created="Tue, 11 Aug 2015 12:28:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt; The patch lgtm, I think we can go with it&lt;/p&gt;</comment>
                            <comment id="14693463" author="mpetria" created="Wed, 12 Aug 2015 13:17:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I will apply the patch and start the release.&lt;/p&gt;</comment>
                            <comment id="14695201" author="mpetria" created="Thu, 13 Aug 2015 13:18:20 +0000"  >&lt;p&gt;I committed a slightly modified version of the patch in revision 1695707.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12747762" name="SLING-4895-alt.diff" size="19103" author="cziegeler" created="Wed, 29 Jul 2015 09:34:45 +0000"/>
                            <attachment id="12747988" name="SLING-4895.1.diff" size="9147" author="mpetria" created="Thu, 30 Jul 2015 13:52:33 +0000"/>
                            <attachment id="12747572" name="SLING-4895.diff" size="4654" author="mpetria" created="Tue, 28 Jul 2015 15:28:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hhu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4893] Service already unregistered exception in ScriptCacheImpl</title>
                <link>https://issues.apache.org/jira/browse/SLING-4893</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Seeing following error on startup with latest Launchpad from trunk&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;20.07.2015 20:29:10.310 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.scripting.core.impl.ScriptCacheImpl)] org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory Script extension &apos;jspf&apos; is now handled by ScriptEngine &apos;Apache Sling Scripting JSP Support&apos;, version=&apos;2.1.6&apos;, class=&apos;org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine&apos;
20.07.2015 20:29:10.310 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.scripting.core.impl.ScriptCacheImpl)] org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory Script extension &apos;jspx&apos; is now handled by ScriptEngine &apos;Apache Sling Scripting JSP Support&apos;, version=&apos;2.1.6&apos;, class=&apos;org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine&apos;
20.07.2015 20:29:10.311 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.scripting.core.impl.ScriptCacheImpl)] org.apache.sling.scripting.core Service [361, [org.osgi.service.event.EventHandler]] ServiceEvent UNREGISTERING
20.07.2015 20:29:10.316 *ERROR* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.scripting.core.impl.ScriptCacheImpl)] org.apache.sling.scripting.core [org.apache.sling.scripting.core.impl.ScriptCacheImpl(114)] The deactivate method has thrown an exception (java.lang.IllegalStateException: Service already unregistered.)
java.lang.IllegalStateException: Service already unregistered.
	at org.apache.felix.framework.ServiceRegistrationImpl.unregister(ServiceRegistrationImpl.java:136)
	at org.apache.sling.scripting.core.impl.ScriptCacheImpl.deactivate(ScriptCacheImpl.java:269)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:231)
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:39)
	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:624)
	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:508)
	at org.apache.felix.scr.impl.helper.ActivateMethod.invoke(ActivateMethod.java:149)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.disposeImplementationObject(SingleComponentManager.java:355)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.deleteComponent(SingleComponentManager.java:170)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.ungetService(SingleComponentManager.java:929)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.ungetService(SingleComponentManager.java:915)
	at org.apache.felix.framework.ServiceRegistrationImpl.ungetFactoryUnchecked(ServiceRegistrationImpl.java:384)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looking at &lt;tt&gt;ScriptCacheImpl&lt;/tt&gt; the service reg is getting unregistered at two place. So probably at &lt;tt&gt;configureCache&lt;/tt&gt; it should null the reference&lt;/p&gt;</description>
                <environment></environment>
        <key id="12846290">SLING-4893</key>
            <summary>Service already unregistered exception in ScriptCacheImpl</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Jul 2015 15:07:47 +0000</created>
                <updated>Sun, 26 Jul 2015 12:29:31 +0000</updated>
                            <resolved>Fri, 24 Jul 2015 06:39:00 +0000</resolved>
                                    <version>Scripting Core 2.0.30</version>
                                    <fixVersion>Scripting Core 2.0.32</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12846541">SLING-4896</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hgcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4886] Testing tools bundles installer fails if there are no bundles to install</title>
                <link>https://issues.apache.org/jira/browse/SLING-4886</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Background:&lt;br/&gt;
org.apache.sling.testing.tools.sling.BundlesInstaller.installBundles is invoked by org.apache.sling.testing.tools.sling.SlingTestBase.installAdditionalBundles for installing any additional bundles which may be necessary while running a test sling instance for some integration tests.&lt;/p&gt;

&lt;p&gt;Problem:&lt;br/&gt;
The problem with BundlesInstaller.installBundles is that it fails if there are no bundles to install and hence the integration tests fail. &lt;/p&gt;

&lt;p&gt;Expectation:&lt;br/&gt;
BundlesInstaller.installBundles should not fail if there are no bundles to install. It should just be a no-op.&lt;/p&gt;

&lt;p&gt;Fix:&lt;br/&gt;
The problem is with a log message in this method which assumes that the bundles list will not be empty. Also the log text seems to incorrectly assume that the list contains bundles&apos; folder path while it actually contains the bundle list.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12845239">SLING-4886</key>
            <summary>Testing tools bundles installer fails if there are no bundles to install</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="satyadeep">Satya Deep Maheshwari</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jul 2015 11:44:53 +0000</created>
                <updated>Mon, 1 Feb 2016 20:32:43 +0000</updated>
                            <resolved>Fri, 17 Jul 2015 14:41:43 +0000</resolved>
                                    <version>org.apache.sling.testing.tools 1.0.10</version>
                                    <fixVersion>org.apache.sling.testing.tools 1.0.12</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14627936" author="satyadeep" created="Wed, 15 Jul 2015 11:54:23 +0000"  >&lt;p&gt;Attaching patch containing proposed fix.&lt;/p&gt;</comment>
                            <comment id="14631413" author="kwin" created="Fri, 17 Jul 2015 14:39:13 +0000"  >&lt;p&gt;Patch committed in &lt;a href=&quot;http://svn.apache.org/r1691576&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1691576&lt;/a&gt;. Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12745433" name="SLING-4886.patch" size="1558" author="satyadeep" created="Wed, 15 Jul 2015 11:54:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ha33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4885] creation of jobs via OSGI events stops working on Exceptions</title>
                <link>https://issues.apache.org/jira/browse/SLING-4885</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We have the case, that we create jobs based on OSGI events. At some point of time it stops working and we have this exception:&lt;/p&gt;

&lt;p&gt;15.07.2015 07:15:23.080 &lt;b&gt;ERROR&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Apache Sling Job Event Bridge&amp;#93;&lt;/span&gt; org.apache.sling.event.impl.jobs.deprecated.EventAdminBridge Bridge thread stopped with exception: org.apache.jackrabbit.oak.plugins.document.DocumentStoreException:  &lt;br/&gt;
        at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2199) &lt;br/&gt;
        at com.google.common.cache.LocalCache.get(LocalCache.java:3932) &lt;br/&gt;
        at com.google.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:4721) &lt;br/&gt;
        at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore.getChildren(DocumentNodeStore.java:812) &lt;br/&gt;
        at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore.getChildNodes(DocumentNodeStore.java:1008) &lt;br/&gt;
        at org.apache.jackrabbit.oak.plugins.document.DocumentNodeState.getChildNodeEntries(DocumentNodeState.java:481) &lt;br/&gt;
        at org.apache.jackrabbit.oak.plugins.document.DocumentNodeState.access$000(DocumentNodeState.java:64) &lt;/p&gt;
</description>
                <environment>Oak 1.0.16, DocumentNodeStore</environment>
        <key id="12845229">SLING-4885</key>
            <summary>creation of jobs via OSGI events stops working on Exceptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="joerghoh">Joerg Hoh</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jul 2015 10:31:28 +0000</created>
                <updated>Fri, 24 Jul 2015 15:22:03 +0000</updated>
                            <resolved>Wed, 15 Jul 2015 11:50:22 +0000</resolved>
                                    <version>Event 3.5.4</version>
                                    <fixVersion>Event 3.7.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14627930" author="cziegeler" created="Wed, 15 Jul 2015 11:50:22 +0000"  >&lt;p&gt;Moved the try/catch into the while loop&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ha0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4882] Shared session usage in Sling MapEntries causes contention</title>
                <link>https://issues.apache.org/jira/browse/SLING-4882</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
&quot;pool-7-thread-103&quot; prio=10 tid=0x00007fede006c000 nid=0x6db8 waiting on condition [0x00007fecdbb7a000]
   java.lang.Thread.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait for  &amp;lt;0x00000005063f5b00&amp;gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:834)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:867)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1197)
	at java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:214)
	at java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:290)
	at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate$WarningLock.lock(SessionDelegate.java:744)
	at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate$WarningLock.lock(SessionDelegate.java:775)
	at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.perform(SessionDelegate.java:271)
	at org.apache.jackrabbit.oak.jcr.session.SessionImpl.perform(SessionImpl.java:127)
	at org.apache.jackrabbit.oak.jcr.session.SessionImpl.refresh(SessionImpl.java:430)
	at sun.reflect.GeneratedMethodAccessor46.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.sling.jcr.base.SessionProxyHandler$SessionProxyInvocationHandler.invoke(SessionProxyHandler.java:113)
	at com.sun.proxy.$Proxy7.refresh(Unknown Source)
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProvider.refresh(JcrResourceProvider.java:545)
	at org.apache.sling.resourceresolver.impl.helper.ResourceResolverContext.refresh(ResourceResolverContext.java:192)
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.refresh(ResourceResolverImpl.java:1186)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.doAddAttributes(MapEntries.java:321)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.handleEvent(MapEntries.java:776)
	at org.apache.felix.eventadmin.impl.handler.EventHandlerProxy.sendEvent(EventHandlerProxy.java:412)
	at org.apache.felix.eventadmin.impl.tasks.SyncDeliverTasks.execute(SyncDeliverTasks.java:118)
	at org.apache.felix.eventadmin.impl.handler.EventAdminImpl.sendEvent(EventAdminImpl.java:114)
	at org.apache.felix.eventadmin.impl.security.EventAdminSecurityDecorator.sendEvent(EventAdminSecurityDecorator.java:96)
	at org.apache.sling.jcr.resource.internal.OakResourceListener.sendOsgiEvent(OakResourceListener.java:243)
	at org.apache.sling.jcr.resource.internal.OakResourceListener.added(OakResourceListener.java:109)
	at org.apache.jackrabbit.oak.plugins.observation.NodeObserver$NodeEventHandler.leave(NodeObserver.java:209)
	at org.apache.jackrabbit.oak.plugins.observation.FilteredHandler.leave(FilteredHandler.java:51)
	at org.apache.jackrabbit.oak.plugins.observation.EventGenerator$Continuation.run(EventGenerator.java:182)
	at org.apache.jackrabbit.oak.plugins.observation.EventGenerator.generate(EventGenerator.java:124)
	at org.apache.jackrabbit.oak.plugins.observation.NodeObserver.contentChanged(NodeObserver.java:163)
	at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:124)
	at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:118)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12845173">SLING-4882</key>
            <summary>Shared session usage in Sling MapEntries causes contention</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jul 2015 04:39:05 +0000</created>
                <updated>Mon, 8 Feb 2016 22:12:14 +0000</updated>
                            <resolved>Wed, 15 Jul 2015 09:11:16 +0000</resolved>
                                                    <fixVersion>Resource Resolver 1.4.0</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14627553" author="asanso" created="Wed, 15 Jul 2015 05:29:02 +0000"  >&lt;p&gt;attaching proposed patch. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; WDYT?&lt;/p&gt;</comment>
                            <comment id="14627611" author="asanso" created="Wed, 15 Jul 2015 06:37:37 +0000"  >&lt;p&gt;attempt #2. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; WDYT? thanks so far&lt;/p&gt;</comment>
                            <comment id="14627616" author="chetanm" created="Wed, 15 Jul 2015 06:45:38 +0000"  >&lt;p&gt;+1. This would avoid contention due to shared Jcr session&lt;/p&gt;</comment>
                            <comment id="14627762" author="asanso" created="Wed, 15 Jul 2015 09:11:16 +0000"  >&lt;p&gt;fixed in rev r1691149 &lt;/p&gt;</comment>
                            <comment id="14628469" author="alexander.klimetschek" created="Wed, 15 Jul 2015 18:05:48 +0000"  >&lt;p&gt;BTW, it&apos;s using an admin session, not a service user.&lt;/p&gt;</comment>
                            <comment id="14628476" author="alexander.klimetschek" created="Wed, 15 Jul 2015 18:09:43 +0000"  >&lt;p&gt;For reference, here is another stacktrace originating in a custom filter doing an extra resolve(). We have seen multiple concurrent threads executing a vanity path search with the same trace.&lt;/p&gt;

&lt;p&gt;It seems unnecessary to do a vanity path search for a request that does not have a vanity path. I agree that having separate sessions is better, but the actual problem is that you need to run queries during requests.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;192.168.193.1 [1436890270925] GET /libs/cq/gui/components/siteadmin/admin/actions/reorder/clientlibs/reorder.min.js HTTP/1.1&quot;: awaiting notification on [0x00000005063f5b00]
	at sun.misc.Unsafe.park(Native Method)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:834)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:867)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1197)
	at java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:214)
	at java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:290)
	at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate$WarningLock.lock(SessionDelegate.java:744)
	at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate$SynchronizedIterator.hasNext(SessionDelegate.java:693)
	at org.apache.jackrabbit.oak.jcr.query.PrefetchIterator.hasNext(PrefetchIterator.java:81)
	at org.apache.jackrabbit.commons.iterator.RangeIteratorAdapter.hasNext(RangeIteratorAdapter.java:132)
	at org.apache.jackrabbit.commons.iterator.RangeIteratorDecorator.hasNext(RangeIteratorDecorator.java:82)
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator.seek(JcrNodeResourceIterator.java:90)
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResourceIterator.&amp;lt;init&amp;gt;(JcrNodeResourceIterator.java:64)
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProvider.findResources(JcrResourceProvider.java:265)
	at org.apache.sling.resourceresolver.impl.tree.RootResourceProviderEntry$2.seek(RootResourceProviderEntry.java:148)
	at org.apache.sling.resourceresolver.impl.tree.RootResourceProviderEntry$2.&amp;lt;init&amp;gt;(RootResourceProviderEntry.java:134)
	at org.apache.sling.resourceresolver.impl.tree.RootResourceProviderEntry.findResources(RootResourceProviderEntry.java:132)
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.findResources(ResourceResolverImpl.java:668)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.getVanityPaths(MapEntries.java:860)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.getMapEntryList(MapEntries.java:714)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.access$100(MapEntries.java:69)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries$MapEntryIterator.seek(MapEntries.java:1456)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries$MapEntryIterator.&amp;lt;init&amp;gt;(MapEntries.java:1407)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.getResolveMapsIterator(MapEntries.java:694)
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.resolveInternal(ResourceResolverImpl.java:249)
	at org.apache.sling.resourceresolver.impl.ResourceResolverImpl.resolve(ResourceResolverImpl.java:192)
	at com.day.cq.wcm.core.impl.AuthoringUIModeServiceImpl.isEditor(AuthoringUIModeServiceImpl.java:385)
	at com.day.cq.wcm.core.impl.AuthoringUIModeServiceImpl.doFilter(AuthoringUIModeServiceImpl.java:300)
	at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:60)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14628612" author="asanso" created="Wed, 15 Jul 2015 19:50:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;BTW, it&apos;s using an admin session, not a service user.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexander.klimetschek&quot; class=&quot;user-hover&quot; rel=&quot;alexander.klimetschek&quot;&gt;alexander.klimetschek&lt;/a&gt; same as the original resolver. We still did not migrate this module to service user&lt;/p&gt;</comment>
                            <comment id="14628615" author="asanso" created="Wed, 15 Jul 2015 19:51:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;It seems unnecessary to do a vanity path search for a request that does not have a vanity path.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;true. the reason is a false positive on the bloom filter. Increasing the bloom filter size (and this is configurable) would lower the false positive rate&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12745386" name="SLING-4882-patch.txt" size="3001" author="asanso" created="Wed, 15 Jul 2015 05:29:02 +0000"/>
                            <attachment id="12745389" name="SLING-4882-patchv2.txt" size="1787" author="asanso" created="Wed, 15 Jul 2015 06:37:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h9ov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4881]  NoSQL Generic Resource Provider: Preserve order of changed resources</title>
                <link>https://issues.apache.org/jira/browse/SLING-4881</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;comment from Levente Santha in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4381&quot; title=&quot;Sling NoSQL Resource Provider for Couchbase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4381&quot;&gt;&lt;del&gt;SLING-4381&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I&apos;ve made some experiments recently with NoSQL Generic Resource Provider and it was very useful. &lt;br/&gt;
I&apos;ve noticed an issue where the order of changed resources is not preserved in NoSqlResourceProvider and it can happen that for the create() method a path gets passed which has no parent in the backing NoSQL storage yet. I&apos;ve also attached the patch &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4381&quot; title=&quot;Sling NoSQL Resource Provider for Couchbase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4381&quot;&gt;&lt;del&gt;SLING-4381&lt;/del&gt;&lt;/a&gt;&lt;em&gt;Preserve_order_of_changed_resources&lt;/em&gt;.patch for this.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;this includes a patch:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12743313/SLING-4381_Preserve_order_of_changed_resources_.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12743313/SLING-4381_Preserve_order_of_changed_resources_.patch&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12844974">SLING-4881</key>
            <summary> NoSQL Generic Resource Provider: Preserve order of changed resources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jul 2015 15:28:49 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:31 +0000</updated>
                            <resolved>Tue, 14 Jul 2015 15:35:48 +0000</resolved>
                                    <version>NoSQL Generic Resource Provider 1.0.0</version>
                                    <fixVersion>NoSQL Generic Resource Provider 1.0.0</fixVersion>
                                    <component>NoSQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14626496" author="sseifert@pro-vision.de" created="Tue, 14 Jul 2015 15:35:48 +0000"  >&lt;p&gt;Completed: At revision: 1690990  &lt;/p&gt;

&lt;p&gt;patch applied, thanks&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12771727">SLING-4381</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h8j3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4878] Resource Merger: Infinite loop in case a parent resource has one of its children as a supertype</title>
                <link>https://issues.apache.org/jira/browse/SLING-4878</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Assuming a hierarchy as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /x (supertype = x/y)
    /x/y
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then the OverridingResourcePicker#pickResources() method will enter an infinite loop.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12844664">SLING-4878</key>
            <summary>Resource Merger: Infinite loop in case a parent resource has one of its children as a supertype</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="vladb">Vlad Bailescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Jul 2015 14:59:43 +0000</created>
                <updated>Tue, 21 Jul 2015 11:57:31 +0000</updated>
                            <resolved>Wed, 15 Jul 2015 09:05:27 +0000</resolved>
                                    <version>Resource Merger 1.2.8</version>
                                    <fixVersion>Resource Merger 1.2.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14627751" author="radu.cotescu" created="Wed, 15 Jul 2015 09:05:27 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1691143&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1691143&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12745272" name="sling-4878-infinite-loop-in-resourcemerger.patch" size="4949" author="vladb" created="Tue, 14 Jul 2015 15:29:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h6mf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4874] &apos;classic&apos; jobs going via event admin get blocked</title>
                <link>https://issues.apache.org/jira/browse/SLING-4874</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;For jobs that do not use the new job api but rather go via the classic event admin, the jobs might end up being queued until the &apos;Queue manager maintenance&apos; scans through the jobs as a fallback (which by default happens every 60 seconds - so those jobs might get stuck for 60 sec).&lt;/p&gt;

&lt;p&gt;The problem is two fold:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;when a job is finished it is not properly notifying the job queue&lt;/li&gt;
	&lt;li&gt;also, such classic jobs are not properly doing audit log, statistics update, email notification nor updating the processingJobsList appropriately (leading to statistic counting being wrong even if notification would work fine)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12844177">SLING-4874</key>
            <summary>&apos;classic&apos; jobs going via event admin get blocked</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jul 2015 13:49:16 +0000</created>
                <updated>Mon, 13 Jul 2015 14:21:06 +0000</updated>
                            <resolved>Fri, 10 Jul 2015 13:54:49 +0000</resolved>
                                    <version>Event 3.7.0</version>
                                    <fixVersion>Event 3.7.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14622320" author="egli" created="Fri, 10 Jul 2015 13:53:04 +0000"  >&lt;p&gt;Attaching &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12744714/12744714_SLING-4874-patch.txt&quot; title=&quot;SLING-4874-patch.txt attached to SLING-4874&quot;&gt;SLING-4874-patch.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; provided by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14622327" author="egli" created="Fri, 10 Jul 2015 13:54:49 +0000"  >&lt;p&gt;Applied in &lt;a href=&quot;http://svn.apache.org/r1690262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1690262&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12744714" name="SLING-4874-patch.txt" size="2488" author="stefanegli" created="Fri, 10 Jul 2015 13:53:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h3rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4867] EntityResourceList should be thread-safe</title>
                <link>https://issues.apache.org/jira/browse/SLING-4867</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There was a Jenkins test failure[0] due to the following exception. This looks like &lt;tt&gt;EntityResourceList&lt;/tt&gt; should be thread-safe.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, I took the liberty to assign the issue to you. Hope that&apos;s ok.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;OsgiInstallerImpl&quot; java.util.ConcurrentModificationException
	at java.util.ArrayList.sort(ArrayList.java:1456)
	at java.util.Collections.sort(Collections.java:141)
	at org.apache.sling.installer.core.impl.EntityResourceList.getActiveResource(EntityResourceList.java:125)
	at org.apache.sling.installer.factories.configuration.impl.ConfigTaskCreator.createTask(ConfigTaskCreator.java:71)
	at org.apache.sling.installer.core.impl.OsgiInstallerImpl.getTask(OsgiInstallerImpl.java:632)
	at org.apache.sling.installer.core.impl.OsgiInstallerImpl.computeTasks(OsgiInstallerImpl.java:612)
	at org.apache.sling.installer.core.impl.OsgiInstallerImpl.run(OsgiInstallerImpl.java:262)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;[0] &lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/1292/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/1292/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12843799">SLING-4867</key>
            <summary>EntityResourceList should be thread-safe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Jul 2015 08:24:33 +0000</created>
                <updated>Tue, 25 Oct 2016 17:42:19 +0000</updated>
                            <resolved>Sun, 16 Oct 2016 13:16:07 +0000</resolved>
                                    <version>Installer Core 3.6.6</version>
                                    <fixVersion>Installer Core 3.7.0</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14679634" author="cziegeler" created="Mon, 10 Aug 2015 06:20:35 +0000"  >&lt;p&gt;There are a lot of calls to sort the resource list in EntityResourceList - I guess we could remove all of them and just do the sorting whenever the resources are modified. But this would assume that we don&apos;t modify resources directly which &lt;b&gt;should&lt;/b&gt; be the case.&lt;/p&gt;</comment>
                            <comment id="15554420" author="cziegeler" created="Fri, 7 Oct 2016 07:44:24 +0000"  >&lt;p&gt;I&apos;ll close this as won&apos;t fix as this is either fixed already, or not reproducible. If the issue appears again, please reopen&lt;/p&gt;</comment>
                            <comment id="15579689" author="cziegeler" created="Sun, 16 Oct 2016 09:52:05 +0000"  >&lt;p&gt;Reopening as I&apos;m seeing this now happening a lot in the launchpad integration tests.&lt;br/&gt;
The problem is that even getXXX methods change the state by sorting the array - this sorting is needed to avoid other problems with the sort order (we had them before)&lt;/p&gt;</comment>
                            <comment id="15579693" author="cziegeler" created="Sun, 16 Oct 2016 09:54:36 +0000"  >&lt;p&gt;Added an additional lock in rev 1765129&lt;/p&gt;</comment>
                            <comment id="15579723" author="cziegeler" created="Sun, 16 Oct 2016 10:14:44 +0000"  >&lt;p&gt;Can&apos;t reproduce the problem any with the additional lock&lt;/p&gt;</comment>
                            <comment id="15579912" author="cziegeler" created="Sun, 16 Oct 2016 12:41:00 +0000"  >&lt;p&gt;Not sure if it is related to the above change, but integration tests fail no with:&lt;br/&gt;
noActiveResources(org.apache.sling.launchpad.webapp.integrationtest.installer.ServerSideInstallerTest)  Time elapsed: 0.653 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
java.lang.AssertionError: Active resources found: [group[[resource&lt;span class=&quot;error&quot;&gt;&amp;#91;entityId=bundle:org.apache.sling.testbundle.InstallManyBundlesTest.4a84e6dd-3129-46eb-be31-bad8f77177d4_upgradetest, scheme=jcrinstall, url=jcrinstall:/apps/InstallManyBundlesTest/4a84e6dd-3129-46eb-be31-bad8f77177d4/install/org.apache.sling.testbundle.InstallManyBundlesTest.4a84e6dd-3129-46eb-be31-bad8f77177d4_upgradetest.9.jar, type=bundle, state=UNINSTALLED, version=42.0.9, lastChange=1476548965424, priority=200, digest=1476548964497&amp;#93;&lt;/span&gt;]]]&lt;br/&gt;
	at org.junit.Assert.fail(Assert.java:88)&lt;br/&gt;
	at org.apache.sling.launchpad.webapp.integrationtest.installer.ServerSideInstallerTest.noActiveResources(ServerSideInstallerTest.java:61)&lt;/p&gt;

&lt;p&gt;which shows an active resource in the uninstall state&lt;/p&gt;</comment>
                            <comment id="15579961" author="cziegeler" created="Sun, 16 Oct 2016 13:16:07 +0000"  >&lt;p&gt;I think the problem is rather a bug in the installer integration test: it does not wait until all bundles from the ManyBundlesTest are installed, launches the next test and that gets a wrong initial state.&lt;br/&gt;
Fixed the test case in rev 1765152&lt;br/&gt;
I&apos;ve also improved the state handling in the installer a little bit&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h1hr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4866] JSP scripting engine performance degraded in org.apache.sling.scripting.jsp 2.1.6</title>
                <link>https://issues.apache.org/jira/browse/SLING-4866</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The commit applied in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1629144&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1629144&lt;/a&gt; seems to have affected the JSP scripting engine performance.&lt;/p&gt;

&lt;p&gt;The Sightly JSP &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/scripting/sightly/testing-content/src/main/resources/SLING-INF/apps/sightlyperf/test/test.jsp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;performance tests&lt;/a&gt; show a 5x degradation on my machine when compared to running the same tests on &lt;tt&gt;org.apache.sling.scripting.jsp&lt;/tt&gt; 2.1.4.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12843575">SLING-4866</key>
            <summary>JSP scripting engine performance degraded in org.apache.sling.scripting.jsp 2.1.6</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jul 2015 17:05:54 +0000</created>
                <updated>Wed, 7 Oct 2015 06:07:50 +0000</updated>
                            <resolved>Tue, 25 Aug 2015 15:01:21 +0000</resolved>
                                    <version>Scripting JSP 2.1.6</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14618945" author="radu.cotescu" created="Wed, 8 Jul 2015 17:07:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, could we somehow maintain the compilation consistency without imposing such a slow locking mechanism?&lt;/p&gt;</comment>
                            <comment id="14620497" author="cziegeler" created="Thu, 9 Jul 2015 13:33:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; Is the compilation slower or once it&apos;s compiled the execution?&lt;/p&gt;</comment>
                            <comment id="14622257" author="radu.cotescu" created="Fri, 10 Jul 2015 13:04:39 +0000"  >&lt;p&gt;The execution is 5 - 6 times slower.&lt;/p&gt;</comment>
                            <comment id="14622305" author="cziegeler" created="Fri, 10 Jul 2015 13:41:00 +0000"  >&lt;p&gt;Ok, but I think this code should not be executed during execution, just for compilation&lt;/p&gt;</comment>
                            <comment id="14711405" author="radu.cotescu" created="Tue, 25 Aug 2015 15:01:21 +0000"  >&lt;p&gt;I figured out that this is not an issue of the JSP scripting engine.&lt;/p&gt;

&lt;p&gt;The tests in question were initially run on a Sling Launchpad 7 instance, to which the Sightly bundles were installed through the maven-launchpad-plugin. The performance degradation was discovered after switching to the provisioning model for the tests, which required Sling Launchpad 8-SNAPSHOT.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h05b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4864] SlingAuthenticator should handle empty path for anonymous resources</title>
                <link>https://issues.apache.org/jira/browse/SLING-4864</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-4925&quot; title=&quot;Request path is not decoded&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-4925&quot;&gt;&lt;del&gt;FELIX-4925&lt;/del&gt;&lt;/a&gt; changed the semantic of &lt;tt&gt;request.getServletPath()&lt;/tt&gt; in case of &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;GET /
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it now return &lt;tt&gt;&quot;&quot;&lt;/tt&gt; rather than &lt;tt&gt;&quot;/&quot;&lt;/tt&gt;&lt;/p&gt;


&lt;p&gt;This case needs to be correctly handled&lt;/p&gt;</description>
                <environment></environment>
        <key id="12843519">SLING-4864</key>
            <summary>SlingAuthenticator should handle empty path for anonymous resources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jul 2015 14:09:06 +0000</created>
                <updated>Mon, 13 Jul 2015 07:49:55 +0000</updated>
                            <resolved>Thu, 9 Jul 2015 07:32:41 +0000</resolved>
                                                    <fixVersion>Auth Core 1.3.10</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14620047" author="asanso" created="Thu, 9 Jul 2015 07:32:41 +0000"  >&lt;p&gt;added fix and unit test in rev. r1689995&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12837383">FELIX-4925</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gzt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4861] another TopologyTest failure due to slowness on jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-4861</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There was another failure of TestTopology &lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/org.apache.sling$org.apache.sling.discovery.impl/1278/testReport/org.apache.sling.discovery.impl.topology/TopologyTest/testTwoNodes/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;recently on jenkins&lt;/a&gt; (will attach full log output below).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Error Message

expected:&amp;lt;2&amp;gt; but was:&amp;lt;1&amp;gt;

Stacktrace

java.lang.AssertionError: expected:&amp;lt;2&amp;gt; but was:&amp;lt;1&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:555)
	at org.junit.Assert.assertEquals(Assert.java:542)
	at org.apache.sling.discovery.impl.topology.TopologyTestHelper.assertTopologyConsistsOf(TopologyTestHelper.java:127)
	at org.apache.sling.discovery.impl.topology.TopologyTest.testTwoNodes(TopologyTest.java:88)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12843221">SLING-4861</key>
            <summary>another TopologyTest failure due to slowness on jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Jul 2015 15:51:00 +0000</created>
                <updated>Wed, 30 Sep 2015 05:44:19 +0000</updated>
                            <resolved>Tue, 7 Jul 2015 15:53:57 +0000</resolved>
                                    <version>Discovery Impl 1.1.6</version>
                                    <fixVersion>Discovery Impl 1.1.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14616894" author="egli" created="Tue, 7 Jul 2015 15:52:35 +0000"  >&lt;p&gt;Attaching the testoutput: &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12743979/12743979_sling-trunk-18-1278.txt&quot; title=&quot;sling-trunk-18-1278.txt attached to SLING-4861&quot;&gt;sling-trunk-18-1278.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14616895" author="egli" created="Tue, 7 Jul 2015 15:53:57 +0000"  >&lt;p&gt;Increased timeouts in &lt;a href=&quot;http://svn.apache.org/r1689704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1689704&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12766887">SLING-4300</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12743979" name="sling-trunk-18-1278.txt" size="37163" author="stefanegli" created="Tue, 7 Jul 2015 15:52:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gxzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4858] fix Javadoc in RequestLocaleResolver</title>
                <link>https://issues.apache.org/jira/browse/SLING-4858</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;dev@: &lt;a href=&quot;http://mail-archives.us.apache.org/mod_mbox/sling-dev/201506.mbox/%3c1578459.EWsyv128nl@madness%3e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;i18n: RequestLocaleResolver#resolveLocale(HttpServletRequest request):List&amp;lt;Locale&amp;gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12842881">SLING-4858</key>
            <summary>fix Javadoc in RequestLocaleResolver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Jul 2015 13:17:14 +0000</created>
                <updated>Thu, 13 Aug 2015 07:16:08 +0000</updated>
                            <resolved>Mon, 6 Jul 2015 13:19:03 +0000</resolved>
                                    <version>i18n 2.4.2</version>
                                    <fixVersion>i18n 2.4.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14615010" author="olli" created="Mon, 6 Jul 2015 13:19:03 +0000"  >&lt;p&gt;r1689393&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 17 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gvwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4857] Parent pom needs combine.children for rat plugin excludes</title>
                <link>https://issues.apache.org/jira/browse/SLING-4857</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4846&quot; title=&quot;Rat plugin config should exclude DEPENDENCIES&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4846&quot;&gt;&lt;del&gt;SLING-4846&lt;/del&gt;&lt;/a&gt; fixed some rat plugin settings, but if a child pom defines its own excludes those replace the parent pom&apos;s. Setting the combine.children attribute on the excludes as per &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; should fix that.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://blog.sonatype.com/2011/01/maven-how-to-merging-plugin-configuration-in-complex-projects/#.VZp5OKKBE2c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://blog.sonatype.com/2011/01/maven-how-to-merging-plugin-configuration-in-complex-projects/#.VZp5OKKBE2c&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12842874">SLING-4857</key>
            <summary>Parent pom needs combine.children for rat plugin excludes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Jul 2015 12:49:11 +0000</created>
                <updated>Sun, 3 Jan 2016 13:48:07 +0000</updated>
                            <resolved>Thu, 10 Dec 2015 10:18:50 +0000</resolved>
                                    <version>Parent 24</version>
                                    <fixVersion>Parent 26</fixVersion>
                                    <component>General</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14936923" author="rombert" created="Wed, 30 Sep 2015 14:45:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; - this seems to be fixed in SVN, is there anything to be done or can we mark it as resolved?&lt;/p&gt;</comment>
                            <comment id="15050512" author="bdelacretaz" created="Thu, 10 Dec 2015 10:22:09 +0000"  >&lt;p&gt;Unassigning tickets on which I&apos;m not currently working&lt;/p&gt;</comment>
                            <comment id="15052556" author="rombert" created="Fri, 11 Dec 2015 10:00:08 +0000"  >&lt;p&gt;But since it&apos;s already fixed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I&apos;ve taken the liberty to assign it back to you - just for record-keeping&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12841592">SLING-4846</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gvvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4856] Resource resolution fails when mapped path is not normalised</title>
                <link>https://issues.apache.org/jira/browse/SLING-4856</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;b&gt;Description&lt;/b&gt; &lt;br/&gt;
During resource resolution the resource metadata are populated with values used for the initialisation of the &lt;tt&gt;SlingHttpServletRequest&lt;/tt&gt; in the &lt;tt&gt;SlingRequestProcessorImpl&lt;/tt&gt;. The problem is that those metadata may be broken when there is a misconfigured mapping applied to the request path info.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;How to reproduce&lt;/b&gt; &lt;br/&gt;
1. Configure the &lt;tt&gt;ResourceResolverFactory&lt;/tt&gt; to have a mapping &lt;tt&gt;/&amp;gt;/prefix&lt;/tt&gt;. &lt;br/&gt;
2. Create a &lt;tt&gt;Resource&lt;/tt&gt; /content/path/to/resource&lt;br/&gt;
3. Access the &lt;tt&gt;Resource&lt;/tt&gt; &lt;br/&gt;
3 a) using /content/path/to/resource.selector1.selector2.html/suffix.html&lt;br/&gt;
3 b) using /prefix/content/path/to/resource.selector1.selector2.html/suffix.html&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Expected result&lt;/em&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The path can be resolved to the &lt;tt&gt;Resource&lt;/tt&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;The selector string is selector1.selector2 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;The suffix is /suffix.html &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;em&gt;Actual result&lt;/em&gt;&lt;br/&gt;
In the second case (b) the selector string has a leading &quot;.&quot;. Which causes the &lt;tt&gt;RequestPathInfo&lt;/tt&gt; to return a &lt;tt&gt;String&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;&lt;/tt&gt;, where the first entry is an empty &lt;tt&gt;String&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Details&lt;/b&gt;&lt;br/&gt;
This is caused by the following code in &lt;tt&gt;resolveInternal&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path = resolutionPath.toString();
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; pathInfo = absPath.substring(path.length());

resource.getResourceMetadata().setResolutionPath(path);
resource.getResourceMetadata().setResolutionPathInfo(pathInfo);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The problem is that in this special case the resolved path starts with a &quot;//&quot; and is therefor not properly normalised. As the resolution is working properly and the returned resource has its path normalised the length of resource path part in the absPath and resoultionPath differ by one. This causes resoultion path info to contain the last char of the resource path part of the absPath, which then causes wrong interpretation and extraction of the selector string from the resolution path info in the &lt;tt&gt;ResourceMetaData&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Use case&lt;/b&gt;&lt;br/&gt;
In our current project based on AEM6 we use such a path prefix to use separated dispatcher farms for caching. We were able to fix the internal issue by properly configuring the prefix but as a user i would expect Sling to handle this misconfigured scenario either properly or at least log a warning that the mapped path is not normalised because debugging it was a little bit tricky.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12842619">SLING-4856</key>
            <summary>Resource resolution fails when mapped path is not normalised</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Jul 2015 19:17:53 +0000</created>
                <updated>Fri, 11 Feb 2022 17:49:48 +0000</updated>
                            <resolved>Fri, 11 Feb 2022 17:49:48 +0000</resolved>
                                    <version>Resource Resolver 1.1.14</version>
                                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14613417" author="diru" created="Fri, 3 Jul 2015 19:21:48 +0000"  >&lt;p&gt;From my point of view there are two possible solutions:&lt;/p&gt;

&lt;p&gt;1. Proper handling of not normalised paths in &lt;tt&gt;resolveInternal&lt;/tt&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Extend &lt;tt&gt;ResourceUtil#normalize(String)&lt;/tt&gt; to replace &quot;//&quot; by single slash&lt;/li&gt;
	&lt;li&gt;Call &lt;tt&gt;ResourceUtil#normalize(String)&lt;/tt&gt; on the path passed to &lt;tt&gt;resolveInternal&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;2. Logging of not normalised result of applied mapping&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Add a method &lt;tt&gt;ResourceUtil#isNormalized(String)&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;if log level is warning or higher call it after the mapping has been applied and log a warning if it returns false&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;What do you think? I would volunteer to provide a patch and related test cases for that.&lt;/p&gt;</comment>
                            <comment id="17491073" author="diru" created="Fri, 11 Feb 2022 17:49:48 +0000"  >&lt;p&gt;I cannot reproduce that anymore, it seems to work now. &lt;/p&gt;

&lt;p&gt;I tried this with the following mapping entry instead&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/etc/map/http/my-site
sling:math=&lt;span class=&quot;code-quote&quot;&gt;&quot;domaing.\\d+&quot;&lt;/span&gt;
sling:internalRedirect=&lt;span class=&quot;code-quote&quot;&gt;&quot;[/,/content/domain]&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I try to resolve an existing resource everything works as expected.&lt;/p&gt;

&lt;p&gt;If I try to resolve a non-existing resource with that I get &lt;tt&gt;//non-existing-resource.selector1.selector2.html&lt;/tt&gt;, which is properly parsed into&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
selectors = [selector1, selector2]
extension = html
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The resourcePath however remains &lt;tt&gt;//non-existing-resource.selector1.selector2.html&lt;/tt&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gubz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4854] RegisteredResourceImpl.compare throws NPE with null entityId</title>
                <link>https://issues.apache.org/jira/browse/SLING-4854</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;RegisteredResourceImpl.compare does not check for a null result of getEntityId() and throws an NPE in this case. Untransformed resources can have null entity IDs, so this should be supported.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12842575">SLING-4854</key>
            <summary>RegisteredResourceImpl.compare throws NPE with null entityId</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Jul 2015 13:43:36 +0000</created>
                <updated>Fri, 11 Mar 2016 14:21:49 +0000</updated>
                            <resolved>Fri, 3 Jul 2015 13:50:44 +0000</resolved>
                                    <version>Installer Core 3.6.6</version>
                                    <fixVersion>Installer Core 3.6.8</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14613201" author="bdelacretaz" created="Fri, 3 Jul 2015 13:50:44 +0000"  >&lt;p&gt;Fixed in revision 1689013, with unit test.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gu2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4853] JobManager.findJobs should skip items that have been removed during the call</title>
                <link>https://issues.apache.org/jira/browse/SLING-4853</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Sometimes under high load the iteration over job nodes can fail &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; because the nodes could be already processed and removed. We could by more fault tolerant when reading a resource and just skip it in case of failure.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.IllegalStateException: Failed to retrieve path from Item:
at org.apache.sling.jcr.resource.internal.helper.jcr.JcrItemResource.getPath(JcrItemResource.java:82)
at org.apache.sling.event.impl.jobs.JobManagerImpl.findJobs(JobManagerImpl.java:659)
at com.day.cq.replication.impl.queue.ReplicationQueueImpl.entries(ReplicationQueueImpl.java:144)
Caused by: javax.jcr.InvalidItemStateException: This item does not exist anymore
at org.apache.jackrabbit.oak.jcr.delegate.ItemDelegate.checkAlive(ItemDelegate.java:85)
at org.apache.jackrabbit.oak.jcr.session.operation.ItemOperation.checkPreconditions(ItemOperation.java:34)
at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.perform(SessionDelegate.java:289)
at org.apache.jackrabbit.oak.jcr.session.ItemImpl.perform(ItemImpl.java:113)
at org.apache.jackrabbit.oak.jcr.session.ItemImpl.getPath(ItemImpl.java:153)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/29420e3482d610c1dd9741276388670474026bf6/bundles/extensions/event/src/main/java/org/apache/sling/event/impl/jobs/JobManagerImpl.java#L662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/29420e3482d610c1dd9741276388670474026bf6/bundles/extensions/event/src/main/java/org/apache/sling/event/impl/jobs/JobManagerImpl.java#L662&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12842545">SLING-4853</key>
            <summary>JobManager.findJobs should skip items that have been removed during the call</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                            <label>event</label>
                    </labels>
                <created>Fri, 3 Jul 2015 09:23:36 +0000</created>
                <updated>Mon, 14 Sep 2015 08:28:55 +0000</updated>
                            <resolved>Fri, 10 Jul 2015 07:58:42 +0000</resolved>
                                                    <fixVersion>Event 3.7.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14614999" author="mpetria" created="Mon, 6 Jul 2015 13:03:33 +0000"  >&lt;p&gt;I attached a patch that ignores invalid job entries. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; can you please let me know if it is OK to apply it.&lt;/p&gt;</comment>
                            <comment id="14618714" author="cziegeler" created="Wed, 8 Jul 2015 14:39:36 +0000"  >&lt;p&gt;Catching RuntimeException seems to strong for me, in fact, getPath() should not throw any exception. We should add a catch IllegalStateException to the check job method and open an issue for the jcr impl&lt;/p&gt;</comment>
                            <comment id="14618731" author="mpetria" created="Wed, 8 Jul 2015 14:51:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; it seems that getPath no longer throws IllegalStateException (since &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;). I will close this issue.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/commit/b8e2eee099be61277882c4ca3101ba693debb343&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/commit/b8e2eee099be61277882c4ca3101ba693debb343&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14618797" author="mpetria" created="Wed, 8 Jul 2015 15:51:14 +0000"  >&lt;p&gt;I partially misunderstood your comment &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. We still need to fix Utility.readJob.&lt;/p&gt;</comment>
                            <comment id="14620200" author="mpetria" created="Thu, 9 Jul 2015 09:43:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I attached a new patch that fixes Utility.readJob against IllegalArgumentException which might be thrown by &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; jcr value map read. &lt;/p&gt;

&lt;p&gt;However this feels like not respecting abstraction and I am still thinking if it is not better to catch all RuntimeExceptions in readJob in order not to be implementation specific.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/a3f25af5da1edb9f2719f04b560370c5cb6464c3/bundles/jcr/resource/src/main/java/org/apache/sling/jcr/resource/JcrPropertyMap.java#L285&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/a3f25af5da1edb9f2719f04b560370c5cb6464c3/bundles/jcr/resource/src/main/java/org/apache/sling/jcr/resource/JcrPropertyMap.java#L285&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14621458" author="cziegeler" created="Thu, 9 Jul 2015 23:41:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mpetria&quot; class=&quot;user-hover&quot; rel=&quot;mpetria&quot;&gt;mpetria&lt;/a&gt; While I think a value map should not throw, adding catch RuntimeException to readJob sounds like a compromise to be safe&lt;/p&gt;</comment>
                            <comment id="14621934" author="mpetria" created="Fri, 10 Jul 2015 07:56:37 +0000"  >&lt;p&gt;I committed the fix in &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1690217&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1690217&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12748860">SLING-4074</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12863604">SLING-5018</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12744459" name="SLING-4853.1.diff" size="793" author="mpetria" created="Thu, 9 Jul 2015 09:43:42 +0000"/>
                            <attachment id="12743718" name="SLING-4853.diff" size="1481" author="mpetria" created="Mon, 6 Jul 2015 13:03:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gtvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4851] Extract the launchpad startup logic in separate bundles</title>
                <link>https://issues.apache.org/jira/browse/SLING-4851</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The launchpad currently embeds the incremental startup logic (in DefaultStartupHandler) as well as the StartupMode detection logic in a way that&apos;s tightly linked to the launchpad runnable jar.&lt;/p&gt;

&lt;p&gt;In other to make these functionalities available to other startup environments (Karaf, Crankstart etc.) we need to extract them into a separate bundle that can be installed at start level 1 to provide these functions with any OSGi launcher.&lt;/p&gt;

&lt;p&gt;We might create two bundles, one for incremental startup and one for startup mode detection. For now I have started to experiment with tests at &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/whiteboard/bdelacretaz/it-startup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/whiteboard/bdelacretaz/it-startup&lt;/a&gt; to have a baseline before moving things out.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12842302">SLING-4851</key>
            <summary>Extract the launchpad startup logic in separate bundles</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jul 2015 12:25:28 +0000</created>
                <updated>Thu, 10 Dec 2015 10:22:12 +0000</updated>
                                                                            <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14620447" author="bdelacretaz" created="Thu, 9 Jul 2015 12:44:43 +0000"  >&lt;p&gt;At revision 1690079 I have moved the experimental modules under &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; and implemented a &lt;tt&gt;StartLevelController&lt;/tt&gt; with a mechanism to wait for OSGi installer resources that are slow to install (or any other slow operation) when increasing the start levels.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;IncrementalStartupIT&lt;/tt&gt; test passes with the following scenario:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Use the &lt;tt&gt;StartLevelController&lt;/tt&gt; to increase the start level&lt;/li&gt;
	&lt;li&gt;When the a &quot;start level changed&quot; framework event is received for start level N, register a bunch of new bundles as &lt;tt&gt;InstallableResources&lt;/tt&gt; for the OSGi installer, which works mostly asynchronously&lt;/li&gt;
	&lt;li&gt;Each bundle includes an Activator which takes about 100msec to execute, randomly&lt;/li&gt;
	&lt;li&gt;The activator verifies that when it&apos;s done the start level is still N&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Out of the box this doesn&apos;t work when switching from start level 5 to 15 for example, the activators of bundles registered at level 6 might end their execution at level 8 or 9 depending on timings. The goal is to simulate a startup where many things are registered with the OSGi installer as start levels go up, and take time to be fully installed.&lt;/p&gt;

&lt;p&gt;To solve this I&apos;ve tried a new approach, with this interface&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; StartLevelChangeBarrier {
    
    /** Optionally &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; a latch that must have
     *  a zero value before the start level change
     *  is considered complete. Called by the {@link StartLevelController} 
     *  right after increasing the start level.
     *   
     * @param startLevel the start level that was just switched to
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; a latch or &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; none is needed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; level.
     *          The initial value of the latch is meaningless,
     *          it&apos;s just the latch reaching zero that is important.
     *          If a client needs complex logic to find out when things
     *          are ready, it can &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; a latch with an initial value
     *          of 1 and just bring that down to zero when ready.   
     */
    CountDownLatch getStartLevelLatch(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; startLevel);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is implemented by my test code to return a CountDownLatch initialized with the number of bundles that will be registered for the supplied startLevel value. Those bundle&apos;s activators then decrement the counter when done, and as a result the StartLevelController correctly waits for all of them to be started before proceeding to the next start level.&lt;/p&gt;

&lt;p&gt;This is just a proof of context of course, I guess the main questions now are whether a) we like this &lt;tt&gt;StartLevelChangeBarrier&lt;/tt&gt; mechanism, and whether b) having to use a new &lt;tt&gt;StartLevelController&lt;/tt&gt; to get a sequenced increase of start levels is acceptable.&lt;/p&gt;

&lt;p&gt;For b) we might be able to use a &lt;tt&gt;FindHook&lt;/tt&gt; to hide the standard start level services and replace them with our custom one, but going through the &lt;tt&gt;StartLevelController&lt;/tt&gt; might be ok as well as this is only needed during startup AFAIK.&lt;/p&gt;

&lt;p&gt;Besides being decoupled from our launchpad code the big advantage of this mechanism is that it avoids the arbitrary 2 seconds delay that the current &lt;tt&gt;DefaultStartupHandler&lt;/tt&gt; uses to let the installer react to a change of start levels. The installer should be able to find out what needs to be waited for on a start level change and provide that information via a  &lt;tt&gt;StartLevelChangeBarrier&lt;/tt&gt; service.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/whiteboard/bdelacretaz/startup-stuff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/whiteboard/bdelacretaz/startup-stuff/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15050523" author="bdelacretaz" created="Thu, 10 Dec 2015 10:22:12 +0000"  >&lt;p&gt;Unassigning tickets on which I&apos;m not currently working&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12711434">SLING-3529</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gsfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4848] Command mistake in Sling document</title>
                <link>https://issues.apache.org/jira/browse/SLING-4848</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In the document of &quot;Discover Sling in 15 minutes&quot;(&lt;a href=&quot;http://sling.apache.org/documentation/getting-started/discover-sling-in-15-minutes.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/getting-started/discover-sling-in-15-minutes.html&lt;/a&gt;) , below command is not right:&lt;/p&gt;

&lt;blockquote&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ curl http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/content/mynode.json {&lt;span class=&quot;code-quote&quot;&gt;&quot;title&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;some title&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;foo/bar&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:primaryType&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;nt:unstructured&quot;&lt;/span&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;The JSON string is the output of curl, so I think this would be change to:&lt;/p&gt;

&lt;blockquote&gt;

&lt;p&gt;The resulting node can be seen at &lt;a href=&quot;http://localhost:8080/content/mynode.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/content/mynode.html&lt;/a&gt;, or as json format under &lt;a href=&quot;http://localhost:8080/content/mynode.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/content/mynode.json&lt;/a&gt;. Lets try with cURL:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/content/mynode.json&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This returns the properties of the /content/mynode in JSON format as we have created it above.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;title&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;some title&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;sling:resourceType&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;foo/bar&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:primaryType&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;nt:unstructured&quot;&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12841893">SLING-4848</key>
            <summary>Command mistake in Sling document</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="xxd3vin">Devin Chen</reporter>
                        <labels>
                            <label>documentation</label>
                    </labels>
                <created>Wed, 1 Jul 2015 05:40:32 +0000</created>
                <updated>Wed, 1 Jul 2015 06:21:03 +0000</updated>
                            <resolved>Wed, 1 Jul 2015 06:21:03 +0000</resolved>
                                                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14609617" author="bdelacretaz" created="Wed, 1 Jul 2015 06:21:03 +0000"  >&lt;p&gt;Thanks very much for reporting this, I agree with your suggestion, fixed at &lt;a href=&quot;http://sling.apache.org/documentation/getting-started/discover-sling-in-15-minutes.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/getting-started/discover-sling-in-15-minutes.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gpz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4847] NullPointerException in MapEntries handleEvent</title>
                <link>https://issues.apache.org/jira/browse/SLING-4847</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;On a running system at times following exceptions are seen&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;30.06.2015 09:00:34.108 *WARN* [pool-5-thread-115] org.apache.felix.eventadmin Service [Map Entries Observation,1094] EventAdmin: Exception during event dispatch [org.osgi.service.event.Event [topic=org/apache/sling/api/resource/Resource/ADDED] | [org.osgi.service.event.EventHandler] | Bundle(org.apache.sling.resourceresolver [211])] (java.lang.NullPointerException)
java.lang.NullPointerException: null
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.doNodeAdded(MapEntries.java:300)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.handleEvent(MapEntries.java:769)
	at org.apache.felix.eventadmin.impl.handler.EventHandlerProxy.sendEvent(EventHandlerProxy.java:412)
	at org.apache.felix.eventadmin.impl.tasks.SyncDeliverTasks.execute(SyncDeliverTasks.java:118)
	at org.apache.felix.eventadmin.impl.handler.EventAdminImpl.sendEvent(EventAdminImpl.java:114)
	at org.apache.felix.eventadmin.impl.security.EventAdminSecurityDecorator.sendEvent(EventAdminSecurityDecorator.java:96)
	at org.apache.sling.jcr.resource.internal.OakResourceListener.sendOsgiEvent(OakResourceListener.java:243)
	at org.apache.sling.jcr.resource.internal.OakResourceListener.added(OakResourceListener.java:109)
	at org.apache.jackrabbit.oak.plugins.observation.NodeObserver$NodeEventHandler.leave(NodeObserver.java:209)
	at org.apache.jackrabbit.oak.plugins.observation.FilteredHandler.leave(FilteredHandler.java:51)
	at org.apache.jackrabbit.oak.plugins.observation.EventGenerator$Continuation.run(EventGenerator.java:182)
	at org.apache.jackrabbit.oak.plugins.observation.EventGenerator.generate(EventGenerator.java:124)
	at org.apache.jackrabbit.oak.plugins.observation.NodeObserver.contentChanged(NodeObserver.java:163)
	at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:124)
	at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:118)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looking at &lt;a href=&quot;https://github.com/apache/sling/blob/a3f25af5da1edb9f2719f04b560370c5cb6464c3/bundles/resourceresolver/src/main/java/org/apache/sling/resourceresolver/impl/mapping/MapEntries.java#L299&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;code&lt;/a&gt; the resource might be null by the time event is processed. So code should guard against that&lt;/p&gt;</description>
                <environment></environment>
        <key id="12841887">SLING-4847</key>
            <summary>NullPointerException in MapEntries handleEvent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Jul 2015 04:46:18 +0000</created>
                <updated>Tue, 21 Jul 2015 10:56:04 +0000</updated>
                            <resolved>Thu, 2 Jul 2015 08:01:14 +0000</resolved>
                                    <version>Resource Resolver 1.1.14</version>
                                    <fixVersion>Resource Resolver 1.2.6</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14611627" author="asanso" created="Thu, 2 Jul 2015 08:01:14 +0000"  >&lt;p&gt;fixed with unit test in rev. r1688777&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gpxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4846] Rat plugin config should exclude DEPENDENCIES</title>
                <link>https://issues.apache.org/jira/browse/SLING-4846</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Release archives that use our parent pom 23 fail to build as they include a DEPENDENCIES file that is not ignored by apache-rat-plugin and does not include the Apache license header. Rat should ignore that file.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12841592">SLING-4846</key>
            <summary>Rat plugin config should exclude DEPENDENCIES</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jun 2015 07:19:23 +0000</created>
                <updated>Tue, 28 Jul 2015 12:48:09 +0000</updated>
                            <resolved>Tue, 30 Jun 2015 07:20:26 +0000</resolved>
                                    <version>Parent 23</version>
                                    <fixVersion>Parent 24</fixVersion>
                                    <component>General</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14607698" author="bdelacretaz" created="Tue, 30 Jun 2015 07:20:26 +0000"  >&lt;p&gt;Added the DEPENDENCIES ignore in &lt;a href=&quot;http://svn.apache.org/r1688380&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1688380&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12842874">SLING-4857</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2go3r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4845] MockBundleContext is not thread-safe</title>
                <link>https://issues.apache.org/jira/browse/SLING-4845</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;According to its javdocs &lt;tt&gt;BundleContext&lt;/tt&gt; must be thread-safe, the MockBundleContext implementation is not.&lt;/p&gt;

&lt;p&gt;Seen on jenkins build #1274: &lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.8/1274/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.8/1274/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.util.ConcurrentModificationException: null
	at java.util.HashMap$HashIterator.nextNode(HashMap.java:1429)
	at java.util.HashMap$EntryIterator.next(HashMap.java:1463)
	at java.util.HashMap$EntryIterator.next(HashMap.java:1461)
	at org.apache.sling.testing.mock.osgi.MockBundleContext.notifyServiceListeners(MockBundleContext.java:235)
	at org.apache.sling.testing.mock.osgi.MockBundleContext.registerService(MockBundleContext.java:100)
	at org.apache.sling.testing.mock.osgi.MockBundleContext.registerService(MockBundleContext.java:85)
	at org.apache.sling.testing.mock.osgi.context.OsgiContextImpl.registerService(OsgiContextImpl.java:117)
	at org.apache.sling.testing.mock.osgi.context.OsgiContextImpl.registerService(OsgiContextImpl.java:101)
	at org.apache.sling.jcr.contentloader.internal.BundleContentLoaderTest.prepareContentLoader(BundleContentLoaderTest.java:69)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12841407">SLING-4845</key>
            <summary>MockBundleContext is not thread-safe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jun 2015 18:09:48 +0000</created>
                <updated>Wed, 14 Oct 2015 08:08:37 +0000</updated>
                            <resolved>Mon, 29 Jun 2015 18:12:57 +0000</resolved>
                                    <version>Testing OSGi Mock 1.3.0</version>
                                    <fixVersion>Testing OSGi Mock 1.5.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14606040" author="jsedding" created="Mon, 29 Jun 2015 18:12:57 +0000"  >&lt;p&gt;Fixed in&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/r1688279&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1688279&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/r1688292&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1688292&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12904780">SLING-5143</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gmzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4843] Concurrency issue in Rhino can lead to Sling deadlock problems during startup</title>
                <link>https://issues.apache.org/jira/browse/SLING-4843</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Bug &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=738388&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;738388&lt;/a&gt; from Rhino seems to affect Sling instances during startup due to its potential deadlock. The bug was fixed in Rhino 1.7R5, while &lt;tt&gt;org.apache.sling.scripting.javascript&lt;/tt&gt; still embeds 1.7R4. Due to the &lt;a href=&quot;https://github.com/mozilla/rhino/releases&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;numerous improvements&lt;/a&gt; of the 1.7.7 release over 1.7R4 I propose to update the dependency to 1.7.7.&lt;/p&gt;

&lt;p&gt;One of the stuck threads pointing at the Rhino 738388 bug provides the following stack trace:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;10.10.150.15 [1435169509358] GET /content/geometrixx-media/en/longevity/longevity-18/longevity-18-6.html HTTP/1.1&quot; prio=10 tid=0x000000000ef40800 nid=0x2507 runnable [0x00000000541be000
]
   java.lang.Thread.State: RUNNABLE
        at java.util.HashMap.getEntry(HashMap.java:465)
        at java.util.HashMap.get(HashMap.java:417)
        at org.mozilla.javascript.JavaMembers.lookupClass(JavaMembers.java:797)
        at org.mozilla.javascript.NativeJavaObject.initMembers(NativeJavaObject.java:54)
        at org.mozilla.javascript.NativeJavaObject.&amp;lt;init&amp;gt;(NativeJavaObject.java:44)
        at org.mozilla.javascript.NativeJavaObject.&amp;lt;init&amp;gt;(NativeJavaObject.java:34)
        at org.mozilla.javascript.WrapFactory.wrapAsJavaObject(WrapFactory.java:115)
        at org.mozilla.javascript.WrapFactory.wrap(WrapFactory.java:72)
        at org.mozilla.javascript.NativeJavaMethod.call(NativeJavaMethod.java:236)
        at org.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:1473)
        at org.mozilla.javascript.Interpreter.interpret(Interpreter.java:815)
        at org.mozilla.javascript.InterpretedFunction.call(InterpretedFunction.java:109)
        at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:394)
        at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:3091)
        at org.mozilla.javascript.InterpretedFunction.call(InterpretedFunction.java:107)
        at org.apache.sling.scripting.sightly.js.impl.jsapi.SlyBindingsValuesProvider.addBinding(SlyBindingsValuesProvider.java:162)
        at org.apache.sling.scripting.sightly.js.impl.jsapi.SlyBindingsValuesProvider.processBindings(SlyBindingsValuesProvider.java:125)
        at org.apache.sling.scripting.sightly.js.impl.JsUseProvider.provide(JsUseProvider.java:84)
        at org.apache.sling.scripting.sightly.impl.engine.extension.use.UseRuntimeExtension.call(UseRuntimeExtension.java:87)
        at org.apache.sling.scripting.sightly.impl.engine.runtime.RenderContextImpl.call(RenderContextImpl.java:89)
        at libs.wcm.foundation.components.parsys.newpar.SightlyJava_newpar.render(SightlyJava_newpar.java:39)
        at org.apache.sling.scripting.sightly.impl.engine.runtime.RenderUnit.render(RenderUnit.java:52)
        at org.apache.sling.scripting.sightly.impl.engine.SightlyScriptEngine.evaluateScript(SightlyScriptEngine.java:95)
        at org.apache.sling.scripting.sightly.impl.engine.SightlyScriptEngine.eval(SightlyScriptEngine.java:83)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:361)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:171)
        at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:463)
        at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:533)
        at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12841271">SLING-4843</key>
            <summary>Concurrency issue in Rhino can lead to Sling deadlock problems during startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jun 2015 08:49:59 +0000</created>
                <updated>Thu, 2 Jul 2015 14:27:13 +0000</updated>
                            <resolved>Mon, 29 Jun 2015 13:47:33 +0000</resolved>
                                    <version>Scripting JavaScript 2.0.16</version>
                                    <fixVersion>Scripting JavaScript 2.0.18</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14605624" author="radu.cotescu" created="Mon, 29 Jun 2015 13:47:33 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1688215&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1688215&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gm5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4841] Occasional test failures of JackrabbitRepositoryIT</title>
                <link>https://issues.apache.org/jira/browse/SLING-4841</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Occasionally &lt;tt&gt;JackrabbitRepositoryIT#checkRepositoryDescriptors&lt;/tt&gt; fails with the following message:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Expected repository descriptor jcr.repository.name to contain Oak, failed (descriptor=Jackrabbit)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is the message that would be expected if &lt;tt&gt;OakRepositoryIT#checkRepositoryDescriptors&lt;/tt&gt; got called but was running with an underlying Jackrabbit 2 repository.&lt;/p&gt;

&lt;p&gt;My hypothesis is that PaxExam gets confused due to the template method pattern used for the &lt;tt&gt;checkRepositoryDescriptors&lt;/tt&gt; test method. Running the tests with different PaxExam versions up to 4.4.0 locally lead to the same failure. Version 4.5.0 seemed to lead to other issues (OSGi not bootstrapped correctly?), so I didn&apos;t pursue that any further.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12841171">SLING-4841</key>
            <summary>Occasional test failures of JackrabbitRepositoryIT</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Sun, 28 Jun 2015 12:39:14 +0000</created>
                <updated>Sun, 28 Jun 2015 13:51:20 +0000</updated>
                            <resolved>Sun, 28 Jun 2015 13:51:20 +0000</resolved>
                                                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14604681" author="jsedding" created="Sun, 28 Jun 2015 13:37:10 +0000"  >&lt;p&gt;Fixed in  &lt;a href=&quot;http://svn.apache.org/r1688000&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1688000&lt;/a&gt;&lt;br/&gt;
I removed the template method pattern. Added the &lt;tt&gt;@Test&lt;/tt&gt; annotation to the subclasses directly instead.&lt;/p&gt;

&lt;p&gt;We can consider re-introducing it if it turns out that there is a fix in PaxExam.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gljj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4838] Tests failing if &quot;test.server.url&quot; is not null but blank</title>
                <link>https://issues.apache.org/jira/browse/SLING-4838</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In SlingTestBase there is a check for whether the system property &lt;tt&gt;test.server.url&lt;/tt&gt; is set or not. It only checks for null but does not take into account that it could be blank.&lt;/p&gt;

&lt;p&gt;This leads to integration test failures on Jenkins.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12840892">SLING-4838</key>
            <summary>Tests failing if &quot;test.server.url&quot; is not null but blank</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Jun 2015 15:47:02 +0000</created>
                <updated>Mon, 1 Feb 2016 20:32:43 +0000</updated>
                            <resolved>Fri, 26 Jun 2015 16:52:27 +0000</resolved>
                                    <version>org.apache.sling.testing.tools 1.0.10</version>
                                    <fixVersion>org.apache.sling.testing.tools 1.0.12</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14603171" author="jsedding" created="Fri, 26 Jun 2015 16:52:27 +0000"  >&lt;p&gt;fixed in &lt;a href=&quot;https://svn.apache.org/r1687810&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1687810&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gjtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4836] Escape output in Apache Sling Feature Flags webconsole plugin</title>
                <link>https://issues.apache.org/jira/browse/SLING-4836</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12840759">SLING-4836</key>
            <summary>Escape output in Apache Sling Feature Flags webconsole plugin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Jun 2015 07:27:06 +0000</created>
                <updated>Wed, 1 Jul 2015 13:45:21 +0000</updated>
                            <resolved>Fri, 26 Jun 2015 07:31:57 +0000</resolved>
                                                    <fixVersion>Feature Flags 1.0.2</fixVersion>
                                    <component>Feature Flags</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14602515" author="asanso" created="Fri, 26 Jun 2015 07:31:57 +0000"  >&lt;p&gt;fixed in rev. r1687690&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gj13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4835] jacoco-it report missing if maven-failsafe-plugin:argLine is used </title>
                <link>https://issues.apache.org/jira/browse/SLING-4835</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In &lt;tt&gt;bundles/commons/contentdetection&lt;/tt&gt; for example, using our parent pom 23, the &lt;tt&gt;target/site/jacoco-it&lt;/tt&gt; report is not generated.&lt;/p&gt;

&lt;p&gt;That&apos;s probably because the pom uses the maven-failsafe-plugin &lt;tt&gt;argLine&lt;/tt&gt; setting to set the jvm memory. The jacoco plugin also sets that to activate its agent, but I suppose that&apos;s ignored as &lt;tt&gt;argLine&lt;/tt&gt; is already set by the pom, so the agent is not activated for the integration tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12840758">SLING-4835</key>
            <summary>jacoco-it report missing if maven-failsafe-plugin:argLine is used </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Jun 2015 07:24:05 +0000</created>
                <updated>Fri, 26 Jun 2015 10:38:37 +0000</updated>
                            <resolved>Fri, 26 Jun 2015 10:38:03 +0000</resolved>
                                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14602681" author="bdelacretaz" created="Fri, 26 Jun 2015 10:38:03 +0000"  >&lt;p&gt;As per &lt;a href=&quot;http://www.eclemma.org/jacoco/trunk/doc/prepare-agent-mojo.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.eclemma.org/jacoco/trunk/doc/prepare-agent-mojo.html&lt;/a&gt; (&quot;if your project already uses the argLine&quot;) the trick is to set argLine in the pom properties, so that the jacoco plugin appends to it.&lt;/p&gt;

&lt;p&gt;I have fixed this in the contentdetection and contentloader modules, building with -P jacoco-report now correctly produces 3 reports as per &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4760&quot; title=&quot;jacoco-report Maven profile should aggregate unit and integration tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4760&quot;&gt;&lt;del&gt;SLING-4760&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The downside is that options added to that argLine is now used by both the surefire and failsafe plugins - if surefire needs a different argLine it will need to be declared in that plugin&apos;s config.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gj0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4834] Jcr trigger should distribute asynchronously </title>
                <link>https://issues.apache.org/jira/browse/SLING-4834</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Jcr trigger should distribute asynchronously such that the event listenet does not take too long. That will avoid filling the observation queue under high load.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12840613">SLING-4834</key>
            <summary>Jcr trigger should distribute asynchronously </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Jun 2015 18:39:54 +0000</created>
                <updated>Wed, 5 Aug 2015 11:30:24 +0000</updated>
                            <resolved>Thu, 25 Jun 2015 18:46:28 +0000</resolved>
                                    <version>Content Distribution Core 0.1.2</version>
                                    <fixVersion>Content Distribution Core 0.1.6</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14601713" author="mpetria" created="Thu, 25 Jun 2015 18:46:28 +0000"  >&lt;p&gt;Committed revision 1687606.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gi5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4833] Clarify licensing of prettify.js and prettify.css</title>
                <link>https://issues.apache.org/jira/browse/SLING-4833</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4792&quot; title=&quot;FS ClassLoader Find .java File&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4792&quot;&gt;&lt;del&gt;SLING-4792&lt;/del&gt;&lt;/a&gt; has seen the addition of the two mentioned files, but they do not have any license header. This should be clarified as it fails the build due to RAT errors.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12840537">SLING-4833</key>
            <summary>Clarify licensing of prettify.js and prettify.css</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Jun 2015 13:35:28 +0000</created>
                <updated>Sat, 24 Dec 2016 12:26:26 +0000</updated>
                            <resolved>Mon, 29 Feb 2016 23:31:50 +0000</resolved>
                                    <version>File System ClassLoader 1.0.2</version>
                                    <fixVersion>File System ClassLoader 1.0.4</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14601196" author="rombert" created="Thu, 25 Jun 2015 13:35:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klcodanr&quot; class=&quot;user-hover&quot; rel=&quot;klcodanr&quot;&gt;klcodanr&lt;/a&gt; - can you please look into this as you added the files?&lt;/p&gt;</comment>
                            <comment id="14601331" author="rombert" created="Thu, 25 Jun 2015 15:12:56 +0000"  >&lt;p&gt;Temporarily ignored rat errors in &lt;a href=&quot;https://svn.apache.org/r1687545&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1687545&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15075085" author="cziegeler" created="Wed, 30 Dec 2015 15:03:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klcodanr&quot; class=&quot;user-hover&quot; rel=&quot;klcodanr&quot;&gt;klcodanr&lt;/a&gt; We really should clarify this - where are these two files originating from?&lt;/p&gt;</comment>
                            <comment id="15075197" author="olli" created="Wed, 30 Dec 2015 16:56:11 +0000"  >&lt;p&gt;Seems to be &lt;a href=&quot;https://github.com/google/code-prettify&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/google/code-prettify&lt;/a&gt; - Apache License, Version 2.0&lt;/p&gt;</comment>
                            <comment id="15172852" author="radu.cotescu" created="Mon, 29 Feb 2016 23:24:21 +0000"  >&lt;p&gt;Indeed that&apos;s the project from where these two files were integrated into the FS Classloader Web Console Plugin. &lt;/p&gt;</comment>
                            <comment id="15172871" author="radu.cotescu" created="Mon, 29 Feb 2016 23:31:51 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=1732971&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1732971&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ghpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4832] SlingPaxUtil should allow for ignoring bundles</title>
                <link>https://issues.apache.org/jira/browse/SLING-4832</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When SlingPaxUtil is used to convert a Sling bundle list to pax options, it should allow for ignoring bundles based their artifact IDs. This is need to replace some launchpad bundles with never versions under test, for example.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12840312">SLING-4832</key>
            <summary>SlingPaxUtil should allow for ignoring bundles</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2015 20:19:38 +0000</created>
                <updated>Mon, 8 May 2017 07:56:37 +0000</updated>
                            <resolved>Wed, 24 Jun 2015 20:20:40 +0000</resolved>
                                                    <fixVersion>Sling Pax Exam Utilities 1.0.4</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14600077" author="bdelacretaz" created="Wed, 24 Jun 2015 20:20:40 +0000"  >&lt;p&gt;Implemented in revision 1687359&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ggcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4829] ClusterTest.testConnectorSwitching4139 failures</title>
                <link>https://issues.apache.org/jira/browse/SLING-4829</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/1928/testReport/junit/org.apache.sling.discovery.impl.cluster/ClusterTest/testConnectorSwitching4139/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.impl/1928/testReport/junit/org.apache.sling.discovery.impl.cluster/ClusterTest/testConnectorSwitching4139/&lt;/a&gt; fails at times&lt;/p&gt;</description>
                <environment></environment>
        <key id="12839820">SLING-4829</key>
            <summary>ClusterTest.testConnectorSwitching4139 failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Jun 2015 11:37:51 +0000</created>
                <updated>Wed, 30 Sep 2015 05:44:20 +0000</updated>
                            <resolved>Wed, 16 Sep 2015 08:28:17 +0000</resolved>
                                    <version>Discovery Impl 1.1.6</version>
                                    <fixVersion>Discovery Impl 1.1.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14747134" author="egli" created="Wed, 16 Sep 2015 08:28:17 +0000"  >&lt;p&gt;not having seen this recently anymore&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12741269" name="failure1.txt" size="48566" author="stefanegli" created="Tue, 23 Jun 2015 11:38:54 +0000"/>
                            <attachment id="12741270" name="failure2.txt" size="46714" author="stefanegli" created="Tue, 23 Jun 2015 11:39:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gdrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4828] JobManagerImpl job persisting doesn&apos;t check the created resource </title>
                <link>https://issues.apache.org/jira/browse/SLING-4828</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;JobManagerImpl#addJob&lt;/tt&gt; persists the job to be started in &lt;tt&gt;writeJob&lt;/tt&gt; however the result of &lt;tt&gt;ResourceHelper.getOrCreateResource&lt;/tt&gt;&#160;is neither checked (!=null) nor used so it can be that the returned &lt;tt&gt;Resource&lt;/tt&gt;&#160;is null or corrupted and therefore the job could not be persisted correctly, see &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/event/src/main/java/org/apache/sling/event/impl/jobs/JobManagerImpl.java#L846&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/event/src/main/java/org/apache/sling/event/impl/jobs/JobManagerImpl.java#L846&lt;/a&gt;.&lt;br/&gt;
E.g. I&apos;ve experienced some cases where a binary property of a JCR node ends up being null but that is only noticed when the job is executed, not when it&apos;s persisted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12839557">SLING-4828</key>
            <summary>JobManagerImpl job persisting doesn&apos;t check the created resource </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="teofili">Tommaso Teofili</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Jun 2015 14:03:15 +0000</created>
                <updated>Thu, 26 Nov 2015 10:12:30 +0000</updated>
                            <resolved>Thu, 26 Nov 2015 09:29:42 +0000</resolved>
                                    <version>Event 3.6.0</version>
                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14596069" author="teofili" created="Mon, 22 Jun 2015 15:17:34 +0000"  >&lt;p&gt;I&apos;d suggest at least to replace the mentioned line with &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        Resource createdResource = ResourceHelper.getOrCreateResource(resolver, path, properties);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (createdResource == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PersistenceException(&lt;span class=&quot;code-quote&quot;&gt;&quot;unable to persist resource &quot;&lt;/span&gt; + path);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and eventually with some kind of checksum control, so that the resulting persisted properties are the very same of the properties passed to &lt;tt&gt;ResourceUtil&lt;/tt&gt;&#160;method, maybe that would need a different issue and should be done in the resource API implementation rather than on the client code.&lt;/p&gt;</comment>
                            <comment id="14596960" author="cziegeler" created="Tue, 23 Jun 2015 01:06:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt; The contract of ResourceHelper.getOrCreateResource is to return a resource. If it returns null, than we should check why this is the case and fix the implementation of ResourceHelper.getOrCreateResource (or one of the methods it calls). That method really should return something or throw an exception.&lt;br/&gt;
Do you know what exactly is going wrong?&lt;/p&gt;</comment>
                            <comment id="14597332" author="teofili" created="Tue, 23 Jun 2015 08:22:39 +0000"  >&lt;blockquote&gt;

&lt;p&gt;If it returns null, than we should check why this is the case and fix the implementation of ResourceHelper.getOrCreateResource&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;that&apos;s right, I was thinking also about checking that Resource (which is assumed to be not null) is consistent with the passed properties (e.g. the passed properties and the &lt;tt&gt;Resource#getValueMap&lt;/tt&gt; of the just created Resource should have the same k-&amp;gt;v entries, plus the job specific ones).&lt;br/&gt;
Something like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Resource createdResource = ResourceHelper.getOrCreateResource(resolver,
                path,
                properties);
        
        &lt;span class=&quot;code-comment&quot;&gt;// consistency check
&lt;/span&gt;        ValueMap valueMap = createdResource.adaptTo(ValueMap.class);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (jobProperties != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Map.Entry&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; entry : jobProperties.entrySet()) {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!valueMap.containsKey(entry.getKey())) {
                    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PersistenceException(&lt;span class=&quot;code-quote&quot;&gt;&quot;created resource doesn&apos;t contain property &quot;&lt;/span&gt; + entry.getKey());
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!valueMap.containsValue(entry.getValue())) {
                    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PersistenceException(&lt;span class=&quot;code-quote&quot;&gt;&quot;created resource doesn&apos;t contain value &quot;&lt;/span&gt; + entry.getValue() +
                            &lt;span class=&quot;code-quote&quot;&gt;&quot; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; property &quot;&lt;/span&gt; + entry.getKey());
                }
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;we could make that consistency check optional to not impact too much performance in case that&apos;s not so important.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do you know what exactly is going wrong?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;not really, the problem I&apos;ve experienced is that I saw a (binary) property being null in the serialized job and therefore the job processing, expecting that property to be there, results in failing but only on processing time (where it cannot be recovered as the job payload is not there anymore), rather than on serialization time.&lt;br/&gt;
If we would be able to fail fast in such cases it&apos;d be possible to &lt;br/&gt;
a) identify the root cause of the serialization problem&lt;br/&gt;
b) retry submitting the job&lt;/p&gt;

&lt;p&gt;Note that the property I&apos;ve seen missing is a &lt;tt&gt;Serializable&lt;/tt&gt; one, so I wonder if it could be that there&apos;s a bug on the resource API implementation for such cases.&lt;/p&gt;</comment>
                            <comment id="14597493" author="cziegeler" created="Tue, 23 Jun 2015 11:23:50 +0000"  >&lt;p&gt;I&apos;m slightly unsure what exactly the issue is &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Did you experience ResourceHelper.getOrCreateResource returning null? Or is it that a property is null? Or Both? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14597556" author="teofili" created="Tue, 23 Jun 2015 12:07:54 +0000"  >&lt;blockquote&gt;&lt;p&gt;Did you experience ResourceHelper.getOrCreateResource returning null? Or is it that a property is null? Or Both?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;the only fact I experienced is that a job gets not correctly serialized as one of the persisted properties (in JCR) happened to be null even if the passed property was not null, whether that results in a null Resource (because there&apos;s an error in writing which doesn&apos;t raise an exception) or not I don&apos;t know; that&apos;s why I was thinking to double checking the resource is not null and / or checking the persisted properties match the properties passed to the JobManager for creating the Job.&lt;br/&gt;
The bottom line is that if there&apos;s any issue in persisting the Job it should fail fast.&lt;/p&gt;</comment>
                            <comment id="14597701" author="cziegeler" created="Tue, 23 Jun 2015 14:17:46 +0000"  >&lt;p&gt;Ok, got it - this sounds like a bug in the jcr resource bundle not being able to write the property correctly. We should see if there is a problem in that code, &lt;/p&gt;</comment>
                            <comment id="15028425" author="cziegeler" created="Thu, 26 Nov 2015 09:29:42 +0000"  >&lt;p&gt;I think this is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3432&quot; title=&quot;pseudo network partition causes job deserialization issue in a cluster (when reading while job is being reassigned)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3432&quot;&gt;&lt;del&gt;SLING-3432&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15028428" author="teofili" created="Thu, 26 Nov 2015 09:33:03 +0000"  >&lt;p&gt;isn&apos;t &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3432&quot; title=&quot;pseudo network partition causes job deserialization issue in a cluster (when reading while job is being reassigned)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3432&quot;&gt;&lt;del&gt;SLING-3432&lt;/del&gt;&lt;/a&gt; more a possible consequence of this ?&lt;/p&gt;</comment>
                            <comment id="15028469" author="cziegeler" created="Thu, 26 Nov 2015 10:12:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt; It&apos;s not clear, according to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3432&quot; title=&quot;pseudo network partition causes job deserialization issue in a cluster (when reading while job is being reassigned)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3432&quot;&gt;&lt;del&gt;SLING-3432&lt;/del&gt;&lt;/a&gt; the job is persisted correctly, but later on something goes wrong which then shows the same symptom as here. Because of the partitioning concurrent operations are done and for some reason the repository can&apos;t cope with it. I think these two issues have the same root cause, therefore I think one issue is enough - but I&apos;m happy to be proofen wrong &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12698636">SLING-3432</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gc6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4826] WebConsolePrinter.testConsolePrinter always fails on Java 8</title>
                <link>https://issues.apache.org/jira/browse/SLING-4826</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;On builds.apache.org the test fails with Java 8 but passes with Java 7. I&apos;ve verified that the same happens locally, so this is not a flaky test.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Error Message&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Expecting regexp match: &apos;Job : testName2, class: java.lang.Thread, concurrent: true, bundleId: 2, serviceId: 2&apos; / &apos;^Job.*testName3.*&apos;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Stacktrace&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.AssertionError: Expecting regexp match: &apos;Job : testName2, class: java.lang.Thread, concurrent: true, bundleId: 2, serviceId: 2&apos; / &apos;^Job.*testName3.*&apos;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.apache.sling.commons.scheduler.impl.WebConsolePrinterTest.assertRegexp(WebConsolePrinterTest.java:86)
	at org.apache.sling.commons.scheduler.impl.WebConsolePrinterTest.testConsolePrinter(WebConsolePrinterTest.java:71)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;Standard Error&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;373 [main] INFO org.apache.sling.commons.threads.impl.DefaultThreadPoolManager - Startet Apache Sling Thread Pool Manager: org.apache.sling.commons.threads.impl.DefaultThreadPoolManager
373 [main] ERROR org.apache.sling.commons.threads.impl.DefaultThreadPoolManager - Configuration admin is not available.
373 [main] INFO org.apache.sling.commons.threads.impl.DefaultThreadPool - Initializing thread pool [testName]  ...
373 [main] INFO org.apache.sling.commons.threads.impl.DefaultThreadPool - Thread pool [testName] initialized.
373 [main] INFO org.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
373 [main] INFO org.quartz.core.QuartzScheduler - Quartz Scheduler v.2.2.1 created.
373 [main] INFO org.quartz.simpl.RAMJobStore - RAMJobStore initialized.
373 [main] INFO org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.2.1) &apos;ApacheSling&apos; with instanceId &apos;Mon_Jun_22_08:44:40_UTC_2015&apos;
  Scheduler class: &apos;org.quartz.core.QuartzScheduler&apos; - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool &apos;org.apache.sling.commons.scheduler.impl.QuartzScheduler$QuartzThreadPool&apos; - with 5 threads.
  Using job-store &apos;org.quartz.simpl.RAMJobStore&apos; - which does not support persistence. and is not clustered.

374 [main] INFO org.quartz.impl.DirectSchedulerFactory - Quartz scheduler &apos;ApacheSling
374 [main] INFO org.quartz.impl.DirectSchedulerFactory - Quartz scheduler version: 2.2.1
374 [main] INFO org.quartz.core.QuartzScheduler - Scheduler ApacheSling_$_Mon_Jun_22_08:44:40_UTC_2015 started.
378 [main] INFO org.quartz.core.QuartzScheduler - Scheduler ApacheSling_$_Mon_Jun_22_08:44:40_UTC_2015 shutting down.
378 [main] INFO org.quartz.core.QuartzScheduler - Scheduler ApacheSling_$_Mon_Jun_22_08:44:40_UTC_2015 paused.
378 [main] INFO org.quartz.core.QuartzScheduler - Scheduler ApacheSling_$_Mon_Jun_22_08:44:40_UTC_2015 shutdown complete.
378 [main] INFO org.apache.sling.commons.threads.impl.DefaultThreadPool - Shutting down thread pool [testName] ...
378 [main] INFO org.apache.sling.commons.threads.impl.DefaultThreadPool - Thread pool [testName] is shut down.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12839487">SLING-4826</key>
            <summary>WebConsolePrinter.testConsolePrinter always fails on Java 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Jun 2015 09:14:21 +0000</created>
                <updated>Fri, 14 Aug 2015 04:56:32 +0000</updated>
                            <resolved>Mon, 22 Jun 2015 12:30:15 +0000</resolved>
                                    <version>Commons Scheduler 2.4.8</version>
                                    <fixVersion>Commons Scheduler 2.4.10</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14595563" author="rombert" created="Mon, 22 Jun 2015 09:17:44 +0000"  >&lt;p&gt;Based on the console output and previous experience with tests failing on Java 8, it looks like the test has strict expectations related to the order in which information is returned, but that order is not enforced by the backing data structures ( e.g. a &lt;tt&gt;HashSet&lt;/tt&gt; ). &lt;/p&gt;</comment>
                            <comment id="14595566" author="rombert" created="Mon, 22 Jun 2015 09:23:30 +0000"  >&lt;p&gt;Minor preparatory cleanup in &lt;a href=&quot;https://svn.apache.org/r1686818&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1686818&lt;/a&gt; - use a StringWriter instead of a FileWriter&lt;/p&gt;</comment>
                            <comment id="14595579" author="bdelacretaz" created="Mon, 22 Jun 2015 09:39:09 +0000"  >&lt;p&gt;Confirmed, I see the same issue in my environment. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=petr.shypila&quot; class=&quot;user-hover&quot; rel=&quot;petr.shypila&quot;&gt;petr.shypila&lt;/a&gt; could you have a look? This is one of the tests that you supplied for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4735&quot; title=&quot;New tests for commons.scheduler module&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4735&quot;&gt;&lt;del&gt;SLING-4735&lt;/del&gt;&lt;/a&gt; - let us know if you need any help!&lt;/p&gt;</comment>
                            <comment id="14595737" author="petr.shypila" created="Mon, 22 Jun 2015 10:36:27 +0000"  >&lt;p&gt;Same behavior on my environment. Investigating that.&lt;/p&gt;</comment>
                            <comment id="14595790" author="petr.shypila" created="Mon, 22 Jun 2015 11:21:31 +0000"  >&lt;p&gt;So the problem was quite simple. The Set of &lt;tt&gt;org.quartz.JobKey&lt;/tt&gt; returned by &lt;tt&gt;org.quartz.Scheduler&lt;/tt&gt; has another order in a for loop. So in Java 7 WebConsolePrinter produces this content:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Job : testName3, class: java.lang.Thread, concurrent: true, bundleId: 3, serviceId: 3
Trigger : Trigger &apos;DEFAULT.testName3&apos;:  triggerClass: &apos;org.quartz.impl.triggers.CronTriggerImpl calendar: &apos;null&apos; misfireInstruction: 0 nextFireTime: Mon Jun 22 06:13:00 VET 2015

Job : testName2, class: java.lang.Thread, concurrent: true, bundleId: 2, serviceId: 2
Trigger : Trigger &apos;DEFAULT.testName2&apos;:  triggerClass: &apos;org.quartz.impl.triggers.CronTriggerImpl calendar: &apos;null&apos; misfireInstruction: 0 nextFireTime: Mon Jun 22 06:13:00 VET 2015

Job : testName1, class: java.lang.Thread, concurrent: true, bundleId: 1, serviceId: 1
Trigger : Trigger &apos;DEFAULT.testName1&apos;:  triggerClass: &apos;org.quartz.impl.triggers.CronTriggerImpl calendar: &apos;null&apos; misfireInstruction: 0 nextFireTime: Mon Jun 22 06:13:00 VET 2015
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But in Java 8 this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Job : testName2, class: java.lang.Thread, concurrent: true, bundleId: 2, serviceId: 2
Trigger : Trigger &apos;DEFAULT.testName2&apos;:  triggerClass: &apos;org.quartz.impl.triggers.CronTriggerImpl calendar: &apos;null&apos; misfireInstruction: 0 nextFireTime: Mon Jun 22 13:47:00 MSK 2015

Job : testName1, class: java.lang.Thread, concurrent: true, bundleId: 1, serviceId: 1
Trigger : Trigger &apos;DEFAULT.testName1&apos;:  triggerClass: &apos;org.quartz.impl.triggers.CronTriggerImpl calendar: &apos;null&apos; misfireInstruction: 0 nextFireTime: Mon Jun 22 13:47:00 MSK 2015

Job : testName3, class: java.lang.Thread, concurrent: true, bundleId: 3, serviceId: 3
Trigger : Trigger &apos;DEFAULT.testName3&apos;:  triggerClass: &apos;org.quartz.impl.triggers.CronTriggerImpl calendar: &apos;null&apos; misfireInstruction: 0 nextFireTime: Mon Jun 22 13:47:00 MSK 2015
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have fixed this problem by regular expression modification. Please take a look in a patch.&lt;/p&gt;</comment>
                            <comment id="14595848" author="rombert" created="Mon, 22 Jun 2015 12:30:15 +0000"  >&lt;p&gt;Applied in &lt;a href=&quot;https://svn.apache.org/r1686847&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1686847&lt;/a&gt;, thanks for the fix!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12831900">SLING-4735</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12741013" name="SLING-4826_Tests_Fails_on_Java_8.patch" size="1857" author="petr.shypila" created="Mon, 22 Jun 2015 11:21:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gbrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4822] Allow to skip validation of sub resources based on arbitrary predicates</title>
                <link>https://issues.apache.org/jira/browse/SLING-4822</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Sometimes it is useful to skip some resources in &lt;tt&gt;ValidationService.validateAllResourceTypesInResource&lt;/tt&gt; not only depending on the actual resource type but based on some other condition. To keep things simple I would suggest to replace the &lt;tt&gt;ignoredResourceTypes&lt;/tt&gt; parameter with just a &lt;tt&gt;org.apache.commons.collection.Predicate&lt;/tt&gt; parameter which acts as filter.&lt;br/&gt;
Only resources which fulfill the given predicate are validated.&lt;br/&gt;
Then either filtering based on a resource type or based on any other property of the resource could be easily done.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12838816">SLING-4822</key>
            <summary>Allow to skip validation of sub resources based on arbitrary predicates</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jun 2015 14:35:08 +0000</created>
                <updated>Wed, 20 Sep 2017 13:17:37 +0000</updated>
                            <resolved>Mon, 29 Jun 2015 13:46:34 +0000</resolved>
                                                    <fixVersion>Validation 1.0.0</fixVersion>
                                    <component>Validation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14605616" author="kwin" created="Mon, 29 Jun 2015 13:38:25 +0000"  >&lt;p&gt;Fixed in r1688209. Also renamed &lt;tt&gt;ValidationService.validateAllResourceTypesInResource&lt;/tt&gt; to &lt;tt&gt;ValidationService.validateResourceRecursively&lt;/tt&gt; as this reflects much better what the method is actually doing.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12838813">SLING-4821</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12772039">SLING-4387</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g7o7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4821] Allow to skip validation of sub resources based on a property</title>
                <link>https://issues.apache.org/jira/browse/SLING-4821</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Sometimes it is useful to skip some resources in &lt;tt&gt;ValidationMessage.validateAllResourceTypesInResource&lt;/tt&gt; not only depending on the actual resource type but based on some other condition. To keep things simple I would suggest to have a property with a special name e.g. &lt;tt&gt;sling:skipValidation&lt;/tt&gt; to allow to skip validation for a specific sub resource.&lt;br/&gt;
Then the property could just be set to &lt;tt&gt;true&lt;/tt&gt; in case that resource should always be skipped for &lt;tt&gt;validateAllResourceTypesInResource&lt;/tt&gt;, independent of the resource type.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12838813">SLING-4821</key>
            <summary>Allow to skip validation of sub resources based on a property</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jun 2015 14:32:21 +0000</created>
                <updated>Thu, 18 Jun 2015 15:15:26 +0000</updated>
                            <resolved>Thu, 18 Jun 2015 15:15:26 +0000</resolved>
                                                                    <component>Validation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14591949" author="rombert" created="Thu, 18 Jun 2015 15:15:26 +0000"  >&lt;p&gt;Reported twice, but &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4822&quot; title=&quot;Allow to skip validation of sub resources based on arbitrary predicates&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4822&quot;&gt;&lt;del&gt;SLING-4822&lt;/del&gt;&lt;/a&gt; has more information&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12838816">SLING-4822</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g7nj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4820] NoClassDefFoundError and ServiceException when using Sling with Oak 1.3.0</title>
                <link>https://issues.apache.org/jira/browse/SLING-4820</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If you try to run Sling with the latest Oak 1.3.0 you get a couple of&lt;br/&gt;
errors (see below) most probably due to the fact that in 1.3.0 Oak&lt;br/&gt;
exported a different API.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;List of changed packages in Oak&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;./oak-core/src/main/java/org/apache/jackrabbit/oak/api/jmx/package-info.java:@Version(&quot;2.0.0&quot;)
./oak-core/src/main/java/org/apache/jackrabbit/oak/api/package-info.java:@Version(&quot;2.0&quot;)
./oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/package-info.java:@Version(&quot;2.0.0&quot;)
./oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/file/package-info.java:@Version(&quot;2.0.0&quot;)
./oak-core/src/main/java/org/apache/jackrabbit/oak/query/package-info.java:@Version(&quot;2.0&quot;)
./oak-core/src/main/java/org/apache/jackrabbit/oak/spi/gc/package-info.java:@Version(&quot;2.0.0&quot;)
./oak-core/src/main/java/org/apache/jackrabbit/oak/spi/query/package-info.java:@Version(&quot;2.0.0&quot;)
./oak-core/src/main/java/org/apache/jackrabbit/oak/spi/security/user/package-info.java:@Version(&quot;2.0&quot;)
./oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/package-info.java:@Version(&quot;2.0.0&quot;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Error messages&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;17.06.2015 14:57:01.912 *ERROR* [FelixStartLevel] org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProviderFactory Unable to instantiate improved JCR Resource listener for Oak. Using fallback.
java.lang.NoClassDefFoundError: org/apache/jackrabbit/oak/plugins/observation/NodeObserver
	at java.lang.ClassLoader.defineClass1(Native Method)
	at java.lang.ClassLoader.defineClass(ClassLoader.java:800)
	at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.defineClass(BundleWiringImpl.java:2350)
	at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.findClass(BundleWiringImpl.java:2134)
	at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1526)
	at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:79)
	at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1998)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:358)
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProviderFactory.activate(JcrResourceProviderFactory.java:150)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.felix.scr.impl.helper.BaseMethod.invokeMethod(BaseMethod.java:222)
	at org.apache.felix.scr.impl.helper.BaseMethod.access$500(BaseMethod.java:37)
	at org.apache.felix.scr.impl.helper.BaseMethod$Resolved.invoke(BaseMethod.java:615)
	at org.apache.felix.scr.impl.helper.BaseMethod.invoke(BaseMethod.java:499)
	at org.apache.felix.scr.impl.helper.ActivateMethod.invoke(ActivateMethod.java:295)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:302)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:113)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:832)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:799)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:749)
	at org.apache.felix.framework.ServiceRegistrationImpl.getFactoryUnchecked(ServiceRegistrationImpl.java:347)
	at org.apache.felix.framework.ServiceRegistrationImpl.getService(ServiceRegistrationImpl.java:247)
	at org.apache.felix.framework.ServiceRegistry.getService(ServiceRegistry.java:343)
	at org.apache.felix.framework.Felix.getService(Felix.java:3692)
	at org.apache.felix.framework.BundleContextImpl.getService(BundleContextImpl.java:470)
	at org.apache.felix.scr.impl.manager.SingleRefPair.getServiceObject(SingleRefPair.java:72)
	at org.apache.felix.scr.impl.helper.BindMethod.getServiceObject(BindMethod.java:576)
	at org.apache.felix.scr.impl.manager.DependencyManager.getServiceObject(DependencyManager.java:2037)
	at org.apache.felix.scr.impl.manager.DependencyManager$MultipleDynamicCustomizer.prebind(DependencyManager.java:396)
	at org.apache.felix.scr.impl.manager.DependencyManager.prebind(DependencyManager.java:1410)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.collectDependencies(AbstractComponentManager.java:983)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:778)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:724)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:927)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:891)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1492)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1413)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:1222)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:1158)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1444)
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:987)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:838)
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:545)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4560)
	at org.apache.felix.framework.Felix.registerService(Felix.java:3542)
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)
	at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.enable(AbstractComponentManager.java:399)
	at org.apache.felix.scr.impl.config.ConfigurableComponentHolder.enableComponents(ConfigurableComponentHolder.java:669)
	at org.apache.felix.scr.impl.BundleComponentActivator.initialEnable(BundleComponentActivator.java:184)
	at org.apache.felix.scr.impl.Activator.loadComponents(Activator.java:332)
	at org.apache.felix.scr.impl.Activator.access$000(Activator.java:49)
	at org.apache.felix.scr.impl.Activator$ScrExtension.start(Activator.java:257)
	at org.apache.felix.utils.extender.AbstractExtender.createExtension(AbstractExtender.java:259)
	at org.apache.felix.utils.extender.AbstractExtender.modifiedBundle(AbstractExtender.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:482)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:415)
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444)
	at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:913)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:834)
	at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:516)
	at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4544)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2166)
	at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1365)
	at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:308)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.ClassNotFoundException: org.apache.jackrabbit.oak.plugins.observation.NodeObserver not found by org.apache.sling.jcr.resource [123]
	at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1557)
	at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:79)
	at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1998)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:358)
	... 74 common frames omitted

...

18.06.2015 09:47:22.913 *INFO* [FelixStartLevel] org.apache.sling.resource.inventory BundleEvent RESOLVED
18.06.2015 09:47:22.913 *INFO* [FelixStartLevel] org.apache.sling.resource.inventory BundleEvent STARTING
18.06.2015 09:47:22.922 *ERROR* [FelixDispatchQueue] org.apache.sling.serviceusermapper FrameworkEvent ERROR (org.osgi.framework.ServiceException: Service factory returned null.)
org.osgi.framework.ServiceException: Service factory returned null.
	at org.apache.felix.framework.ServiceRegistrationImpl.getFactoryUnchecked(ServiceRegistrationImpl.java:380)
	at org.apache.felix.framework.ServiceRegistrationImpl.getService(ServiceRegistrationImpl.java:247)
	at org.apache.felix.framework.ServiceRegistry.getService(ServiceRegistry.java:343)
	at org.apache.felix.framework.Felix.getService(Felix.java:3692)
	at org.apache.felix.framework.Felix.getServiceReferences(Felix.java:3603)
	at org.apache.felix.framework.Felix.getAllowedServiceReferences(Felix.java:3655)
	at org.apache.felix.framework.BundleContextImpl.getServiceReferences(BundleContextImpl.java:434)
	at org.apache.felix.scr.impl.manager.ServiceTracker.getInitialReferences(ServiceTracker.java:363)
	at org.apache.felix.scr.impl.manager.ServiceTracker.open(ServiceTracker.java:334)
	at org.apache.felix.scr.impl.manager.ServiceTracker.open(ServiceTracker.java:288)
	at org.apache.felix.scr.impl.manager.DependencyManager.setTargetFilter(DependencyManager.java:1939)
	at org.apache.felix.scr.impl.manager.DependencyManager.setTargetFilter(DependencyManager.java:1822)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.updateTargets(AbstractComponentManager.java:1120)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.enableInternal(AbstractComponentManager.java:641)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.enable(AbstractComponentManager.java:396)
	at org.apache.felix.scr.impl.config.ConfigurableComponentHolder.enableComponents(ConfigurableComponentHolder.java:669)
	at org.apache.felix.scr.impl.BundleComponentActivator.initialEnable(BundleComponentActivator.java:184)
	at org.apache.felix.scr.impl.Activator.loadComponents(Activator.java:332)
	at org.apache.felix.scr.impl.Activator.access$000(Activator.java:49)
	at org.apache.felix.scr.impl.Activator$ScrExtension.start(Activator.java:257)
	at org.apache.felix.utils.extender.AbstractExtender.createExtension(AbstractExtender.java:259)
	at org.apache.felix.utils.extender.AbstractExtender.modifiedBundle(AbstractExtender.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:482)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:415)
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444)
	at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:913)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:834)
	at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:516)
	at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4544)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2166)
	at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1365)
	at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:308)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12838807">SLING-4820</key>
            <summary>NoClassDefFoundError and ServiceException when using Sling with Oak 1.3.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="edivad">Davide Giannella</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jun 2015 14:11:19 +0000</created>
                <updated>Wed, 8 Jul 2015 16:40:08 +0000</updated>
                            <resolved>Thu, 18 Jun 2015 15:02:13 +0000</resolved>
                                    <version>JCR Resource 2.5.0</version>
                                    <fixVersion>JCR Resource 2.5.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14591932" author="cziegeler" created="Thu, 18 Jun 2015 15:02:13 +0000"  >&lt;p&gt;Fixed by updating the dependencies to newer Oak and jackrabbit in rev 1686241&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g7m7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4818] rep:membersList nodes are not distributed correctly</title>
                <link>https://issues.apache.org/jira/browse/SLING-4818</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In case of groups that have more than 100 members the members are split into a node tree stored under rep:membersList node. Distributing the 101 member of a group causes an error on importing.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12838758">SLING-4818</key>
            <summary>rep:membersList nodes are not distributed correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Jun 2015 11:13:56 +0000</created>
                <updated>Wed, 5 Aug 2015 11:30:09 +0000</updated>
                            <resolved>Thu, 18 Jun 2015 11:25:13 +0000</resolved>
                                    <version>Content Distribution Core 0.1.2</version>
                                    <fixVersion>Content Distribution Core 0.1.6</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14591659" author="mpetria" created="Thu, 18 Jun 2015 11:25:14 +0000"  >&lt;p&gt;Committed revision 1686190.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g7bj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4816] When creating new servers ensure that local install is only selected for localhost</title>
                <link>https://issues.apache.org/jira/browse/SLING-4816</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Whenever a new server is created, either through the new Server wizard or from the extended Sling project creation wizard, bundle deployment takes the default value of &apos;Install from local filesystem&apos; . That obviously does not work when working with remote server. We should only set that version when the host is localhost&lt;/p&gt;</description>
                <environment></environment>
        <key id="12838425">SLING-4816</key>
            <summary>When creating new servers ensure that local install is only selected for localhost</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Jun 2015 09:46:40 +0000</created>
                <updated>Thu, 8 Oct 2015 13:10:39 +0000</updated>
                            <resolved>Wed, 17 Jun 2015 10:10:26 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.0.6</version>
                                    <fixVersion>Sling Eclipse IDE 1.0.8</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14589579" author="rombert" created="Wed, 17 Jun 2015 10:10:19 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1685983&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1685983&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g5b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4814] i18n translations not working unless server is restarted</title>
                <link>https://issues.apache.org/jira/browse/SLING-4814</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We have deployed an AEM package where the i18n translations are defined in the standard way under /apps/myapp/i18n as sling:key/sling:value pairs.&lt;br/&gt;
After installing the package on AEM 6.1 we found that none of the strings (not even the English ones) get translated properly. Once we restart the AEM server all translations works fine.&lt;br/&gt;
It works fine in AEM 6.0 without requiring any server restart.&lt;br/&gt;
I tried to capture the logs after setting the org.apache.sling.i18n to DEBUG level.&lt;/p&gt;

&lt;p&gt;When I install the app bundle I see the following entry in the log file:&lt;br/&gt;
17.06.2015 11:54:14.438 INFO [0:0:0:0:0:0:0:1 &lt;span class=&quot;error&quot;&gt;&amp;#91;1434522253131&amp;#93;&lt;/span&gt; GET /libs/granite/core/content/login.html HTTP/1.1] org.apache.sling.i18n.impl.JcrResourceBundleProvider Currently loaded dictionaries across all locales: &lt;span class=&quot;error&quot;&gt;&amp;#91;/libs/foundation/components/mobilefooter/i18n/en, /libs/cq/searchpromote/components/pagination/i18n/en, /libs/foundation/components/search/i18n/en, /libs/commerce/components/search/i18n/en&amp;#93;&lt;/span&gt;&lt;br/&gt;
It does not list the dictionary of my app bundle. There is no other log related to loading dictionaries.&lt;br/&gt;
However when I restart the server after installing my package I see the entry in the log file related to loading the dictionaries corresponding to my application bundle /apps/connect/i18n/en/strings. Pasting the log entries below:&lt;br/&gt;
17.06.2015 11:14:38.232 INFO [0:0:0:0:0:0:0:1 &lt;span class=&quot;error&quot;&gt;&amp;#91;1434519877679&amp;#93;&lt;/span&gt; GET /libs/granite/core/content/login.html HTTP/1.1] org.apache.sling.i18n Service [3279, &lt;span class=&quot;error&quot;&gt;&amp;#91;java.util.ResourceBundle&amp;#93;&lt;/span&gt;] ServiceEvent REGISTERED&lt;br/&gt;
17.06.2015 11:14:38.234 DEBUG [0:0:0:0:0:0:0:1 &lt;span class=&quot;error&quot;&gt;&amp;#91;1434519877679&amp;#93;&lt;/span&gt; GET /libs/granite/core/content/login.html HTTP/1.1] org.apache.sling.i18n.impl.JcrResourceBundleProvider registerResourceBundle(Key(null, en), ...): added service registration and language roots &lt;span class=&quot;error&quot;&gt;&amp;#91;/libs/foundation/components/mobilefooter/i18n/en, /libs/cq/searchpromote/components/pagination/i18n/en, /libs/foundation/components/search/i18n/en, /libs/commerce/components/search/i18n/en, /apps/connect/i18n/en/strings&amp;#93;&lt;/span&gt;&lt;br/&gt;
17.06.2015 11:14:38.234 INFO [0:0:0:0:0:0:0:1 &lt;span class=&quot;error&quot;&gt;&amp;#91;1434519877679&amp;#93;&lt;/span&gt; GET /libs/granite/core/content/login.html HTTP/1.1] org.apache.sling.i18n.impl.JcrResourceBundleProvider Currently loaded dictionaries across all locales: &lt;span class=&quot;error&quot;&gt;&amp;#91;/libs/foundation/components/mobilefooter/i18n/en, /libs/cq/searchpromote/components/pagination/i18n/en, /apps/connect/i18n/en/strings, /libs/foundation/components/search/i18n/en, /libs/commerce/components/search/i18n/en&amp;#93;&lt;/span&gt;&lt;br/&gt;
17.06.2015 11:14:38.267 DEBUG [0:0:0:0:0:0:0:1 &lt;span class=&quot;error&quot;&gt;&amp;#91;1434519877679&amp;#93;&lt;/span&gt; GET /libs/granite/core/content/login.html HTTP/1.1] org.apache.sling.i18n.impl.JcrResourceBundleProvider getResourceBundleInternal(Key(null, en)): got cache hit on first try&lt;/p&gt;</description>
                <environment></environment>
        <key id="12838399">SLING-4814</key>
            <summary>i18n translations not working unless server is restarted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="ngoyal@adobe.com">Nitin Goyal</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Jun 2015 07:23:28 +0000</created>
                <updated>Thu, 12 Oct 2017 05:52:25 +0000</updated>
                            <resolved>Thu, 18 Jun 2015 13:53:53 +0000</resolved>
                                    <version>i18n 2.4.2</version>
                                    <fixVersion>i18n 2.4.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14589508" author="kwin" created="Wed, 17 Jun 2015 09:00:14 +0000"  >&lt;p&gt;Basically the fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2881&quot; title=&quot;[I18N][Performance] JcrResourceBundleProvider clears the cache on mix:language changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2881&quot;&gt;&lt;del&gt;SLING-2881&lt;/del&gt;&lt;/a&gt; has been removed when getting rid of the JCR API in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4186&quot; title=&quot;Make org.apache.sling.i18n independent from JCR APIs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4186&quot;&gt;&lt;del&gt;SLING-4186&lt;/del&gt;&lt;/a&gt;. There used to be two different observation listeners:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;one for sling:Message mixin types (always relevant)&lt;/li&gt;
	&lt;li&gt;one for mix:language node types (only relevant if below one of the language roots)&lt;br/&gt;
Those have been removed in r1650497   (&lt;a href=&quot;https://fisheye6.atlassian.com/browse/sling/trunk/contrib/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java?r1=1650495&amp;amp;r2=1650497&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://fisheye6.atlassian.com/browse/sling/trunk/contrib/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java?r1=1650495&amp;amp;r2=1650497&lt;/a&gt;).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Therefore changes outside of any known &lt;tt&gt;languageRootPath&lt;/tt&gt; is not processed at all.&lt;/p&gt;

&lt;p&gt;Fixing this only leveraging the OSGi event listener is not that easy, because it is impossible to get the mixin with Sling API. Therefore it is impossible to check with just Sling API whether a resource with the mixin &lt;tt&gt;sling:Message&lt;/tt&gt; just has been added or some other resource.&lt;br/&gt;
Just checking for the primary type &lt;tt&gt;sling:MessageEntry&lt;/tt&gt; (which should be set as the resource type) is not enough, because in the past also entries of other primary types with just the mixin &lt;tt&gt;sling:Message&lt;/tt&gt; have been accepted as well.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexander.klimetschek&quot; class=&quot;user-hover&quot; rel=&quot;alexander.klimetschek&quot;&gt;alexander.klimetschek&lt;/a&gt; Any idea how to fix this regression, without refreshing the cache too often?&lt;/p&gt;</comment>
                            <comment id="14589580" author="kwin" created="Wed, 17 Jun 2015 10:10:22 +0000"  >&lt;p&gt;Also a fix has to consider the addition of JSON dictionaries.&lt;/p&gt;</comment>
                            <comment id="14591461" author="kwin" created="Thu, 18 Jun 2015 08:23:24 +0000"  >&lt;p&gt;Attached is a proposed patch which will detect new dictionaries. The shortcomings of it are&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;does not detect dictionaries based on a derivative of the mixin &lt;tt&gt;sling:Message&lt;/tt&gt;, only the primary type &lt;tt&gt;sling:MessageEntry&lt;/tt&gt; is supported in addition -&amp;gt; some old dictionary formats might not properly be detected&lt;/li&gt;
	&lt;li&gt;needs to get the resource and value map for most of the resource events (to figure out the mixin) -&amp;gt; might be a performance issue&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Since the non-JSON dictionaries rely on mixins I don&apos;t really get why we should completely get rid of JCR API. As far as I know mixins are only supported by JCR, therefore using the &lt;tt&gt;JcrResourceBundleProvider&lt;/tt&gt; does not make sense for ResourceResolvers based on something which is not a JCR. And why not using JCR API for something which is only supported through a JCR?&lt;/p&gt;

&lt;p&gt;The only real alternative would be, to get rid of the primary types and mixin types and only rely on resource types. That way other non-JCR based resources would be supported as well (although this would not be backward compatible).&lt;/p&gt;</comment>
                            <comment id="14591819" author="kwin" created="Thu, 18 Jun 2015 13:53:53 +0000"  >&lt;p&gt;Fixed by slightly modified patch (from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4811&quot; title=&quot;Handle OSGi event in a separate thread to prevent being blacklisted by the OSGi Event Admin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4811&quot;&gt;&lt;del&gt;SLING-4811&lt;/del&gt;&lt;/a&gt;) in rev. 1686215.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12838094">SLING-4812</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13108810">SLING-7190</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12756352">SLING-4186</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12740340" name="SLING-4814-v01.patch" size="3819" author="kwin" created="Thu, 18 Jun 2015 08:16:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g55b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4812] Incorrect event handling for initially empty dictionary</title>
                <link>https://issues.apache.org/jira/browse/SLING-4812</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the Event Handler of the &lt;tt&gt;JcrResourceBundleProvider&lt;/tt&gt; only invalidates the caches if there was some modification on or below one of the &lt;tt&gt;languageRootPaths&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java#L180&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java#L180&lt;/a&gt;). Since empty dictionaries (without any messages) are not added to the &lt;tt&gt;languageRootPaths&lt;/tt&gt; (&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundle.java#L199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundle.java#L199&lt;/a&gt;) the following use case is not supported&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;create a new empty dictionary without any entries&lt;/li&gt;
	&lt;li&gt;create an entry below the empty dictionary&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;If between step 1 and 2 the i18n bundle is not reloaded the newly created entry is not detected and therefore not part of any JcrResourceBundle.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12838094">SLING-4812</key>
            <summary>Incorrect event handling for initially empty dictionary</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jun 2015 08:35:21 +0000</created>
                <updated>Thu, 13 Aug 2015 07:16:09 +0000</updated>
                            <resolved>Thu, 18 Jun 2015 13:54:27 +0000</resolved>
                                    <version>i18n 2.4.2</version>
                                    <fixVersion>i18n 2.4.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14591821" author="kwin" created="Thu, 18 Jun 2015 13:54:27 +0000"  >&lt;p&gt;The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4814&quot; title=&quot;i18n translations not working unless server is restarted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4814&quot;&gt;&lt;del&gt;SLING-4814&lt;/del&gt;&lt;/a&gt; fixed this issue as well.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12838399">SLING-4814</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g3av:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4811] Handle OSGi event in a separate thread to prevent being blacklisted by the OSGi Event Admin</title>
                <link>https://issues.apache.org/jira/browse/SLING-4811</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Since Apache Felix blacklists all OSGi Event Handlers which take too long to complete it would be good if all long-running tasks would be executed in a separate thread (like preloading resource bundles).&lt;br/&gt;
Otherwise the &lt;tt&gt;JcrResourceBundleProvider&lt;/tt&gt; might get blacklisted if the instance is under load and in the future is not notified about any changes. The default timeout of Apache Felix is 5 seconds (&lt;a href=&quot;http://felix.apache.org/documentation/subprojects/apache-felix-event-admin.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://felix.apache.org/documentation/subprojects/apache-felix-event-admin.html&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12838089">SLING-4811</key>
            <summary>Handle OSGi event in a separate thread to prevent being blacklisted by the OSGi Event Admin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jun 2015 08:19:55 +0000</created>
                <updated>Thu, 13 Aug 2015 07:16:09 +0000</updated>
                            <resolved>Thu, 18 Jun 2015 13:51:50 +0000</resolved>
                                    <version>i18n 2.4.2</version>
                                    <fixVersion>i18n 2.4.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14587668" author="kwin" created="Tue, 16 Jun 2015 08:26:30 +0000"  >&lt;p&gt;There are three different options on how to execute the potentially long-running handler&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;using the &lt;tt&gt;ThreadPoolManager&lt;/tt&gt; to use a thread from the pool to process the event&lt;/li&gt;
	&lt;li&gt;using Sling Events&lt;/li&gt;
	&lt;li&gt;just using &lt;tt&gt;Thread.start&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;IMHO 1. is the best option because it prevents too many threads in parallel from being created (as opposed to 3.) and also does not come with too much overhead like Sling Jobs (which would also by default process the event only on one instance in a cluster).&lt;br/&gt;
Any other opinions?&lt;/p&gt;</comment>
                            <comment id="14587852" author="chetanm" created="Tue, 16 Jun 2015 10:54:48 +0000"  >&lt;p&gt;You can possibly use &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/commons/scheduler/src/main/java/org/apache/sling/commons/scheduler/Scheduler.java#L123&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Scheduler.schedule(runnable, Scheduler.NOW())&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14589976" author="kwin" created="Wed, 17 Jun 2015 16:07:38 +0000"  >&lt;p&gt;The scheduler seems like the right option here. Also maybe the event handling should be deferred as each registration and unregistration of a resource bundle as a service (which might happen with each touch on a node) takes quite some time (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2062&quot; title=&quot;register each generated ResourceBundle as an OSGi service&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2062&quot;&gt;&lt;del&gt;SLING-2062&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="14591624" author="kwin" created="Thu, 18 Jun 2015 10:40:20 +0000"  >&lt;p&gt;Attached is a patch which combines the fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4814&quot; title=&quot;i18n translations not working unless server is restarted&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4814&quot;&gt;&lt;del&gt;SLING-4814&lt;/del&gt;&lt;/a&gt; (extended event handling) with the asynchronous handling of resource bundle updates.&lt;br/&gt;
The jobs which invalidate and reload the resource bundles are triggered with a delay of 3 seconds (to also cover events for the same resource bundle, arriving shortly afterwards). That way the amount of reloading is minimized, e.g. when a new dictionary is installed and events are received for each individual dictionary entry.&lt;/p&gt;</comment>
                            <comment id="14591815" author="kwin" created="Thu, 18 Jun 2015 13:51:50 +0000"  >&lt;p&gt;Applied slightly modified patch in rev. 1686215.&lt;/p&gt;</comment>
                            <comment id="14593755" author="alexander.klimetschek" created="Fri, 19 Jun 2015 18:33:59 +0000"  >&lt;p&gt;The &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java#L289-L290&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;comments&lt;/a&gt; (and &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java#L307-L308&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;) says 3 seconds, actual value is 5 seconds. I am not a fan of arbitrary wait times.&lt;/p&gt;

&lt;p&gt;Also, are you sure upon startup initial requests will actually get the current dictionary and not empty ones (until that timeout is over)?&lt;/p&gt;</comment>
                            <comment id="14605276" author="kwin" created="Mon, 29 Jun 2015 08:27:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexander.klimetschek&quot; class=&quot;user-hover&quot; rel=&quot;alexander.klimetschek&quot;&gt;alexander.klimetschek&lt;/a&gt; Thanks for your comments. I made the delay configurable in rev. 1688114 and also disabled the delay for the initial preloading of the cache.&lt;br/&gt;
In general the delay only affects the invalidation and preloading (if enabled). If a request comes in before the delay has timed out, this will not defer the request, but rather just use the resource bundle from the cache (if it already cached) or load it immediately (without a delay).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12740365" name="SLING-4811-v02.patch" size="13222" author="kwin" created="Thu, 18 Jun 2015 11:27:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g39r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4810] FS ClassLoader not invalidated if resources change</title>
                <link>https://issues.apache.org/jira/browse/SLING-4810</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Right now, the fs classloader is only invalidated for classes, but not if resources are loaded by it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12838076">SLING-4810</key>
            <summary>FS ClassLoader not invalidated if resources change</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jun 2015 07:32:53 +0000</created>
                <updated>Tue, 16 Jun 2015 07:34:30 +0000</updated>
                            <resolved>Tue, 16 Jun 2015 07:34:30 +0000</resolved>
                                    <version>File System ClassLoader 1.0.0</version>
                                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14587606" author="cziegeler" created="Tue, 16 Jun 2015 07:34:30 +0000"  >&lt;p&gt;The current behaviour is correct as there is nothing to invalidate...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g36v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4809] Filesystem classwriter does not delete directories</title>
                <link>https://issues.apache.org/jira/browse/SLING-4809</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If the classloader writer is instructred to delete a directory, e.g. by the jsp engine to remove all generated jsps, this fails, as a simply File#delete is used and that one only succeeds if the directory is empty.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12838058">SLING-4809</key>
            <summary>Filesystem classwriter does not delete directories</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jun 2015 06:33:31 +0000</created>
                <updated>Fri, 19 Jun 2015 06:46:27 +0000</updated>
                            <resolved>Tue, 16 Jun 2015 07:25:12 +0000</resolved>
                                    <version>File System ClassLoader 1.0.0</version>
                                    <fixVersion>File System ClassLoader 1.0.2</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14587592" author="cziegeler" created="Tue, 16 Jun 2015 07:25:12 +0000"  >&lt;p&gt;Solved by recursively deleting the directory&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g32v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4808] Empty config values parsed in VaultDistributionPackageBuilderFactory should be treated as null </title>
                <link>https://issues.apache.org/jira/browse/SLING-4808</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Saving a config of VaultDistributionPackageBuilderFactory from configMgr causes tempJcrFolder=&quot;&quot; and the associated check session.nodeExists(tempJcrFolder) to fail. The case should be treated exactly as if the property is missing. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12837914">SLING-4808</key>
            <summary>Empty config values parsed in VaultDistributionPackageBuilderFactory should be treated as null </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Jun 2015 18:09:37 +0000</created>
                <updated>Wed, 5 Aug 2015 11:29:52 +0000</updated>
                            <resolved>Tue, 16 Jun 2015 08:39:42 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.1.6</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14587690" author="mpetria" created="Tue, 16 Jun 2015 08:39:42 +0000"  >&lt;p&gt;Committed revision 1685733.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g273:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4807] Variables in configurations are not replaced</title>
                <link>https://issues.apache.org/jira/browse/SLING-4807</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a configuration contains variables, these are not replaced. We should add support for it&lt;/p&gt;</description>
                <environment></environment>
        <key id="12837858">SLING-4807</key>
            <summary>Variables in configurations are not replaced</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Jun 2015 15:00:32 +0000</created>
                <updated>Fri, 7 Aug 2015 11:33:37 +0000</updated>
                            <resolved>Wed, 17 Jun 2015 16:34:47 +0000</resolved>
                                    <version>Sling Provisioning Model 1.0.0</version>
                    <version>Sling Provisioning Model 1.1.0</version>
                    <version>Sling Provisioning Model 1.2.0</version>
                                    <fixVersion>Sling Provisioning Model 1.3.0</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14590049" author="cziegeler" created="Wed, 17 Jun 2015 16:34:47 +0000"  >&lt;p&gt;Fixed in rev 1686067&lt;/p&gt;</comment>
                            <comment id="14626149" author="sseifert@pro-vision.de" created="Tue, 14 Jul 2015 10:05:31 +0000"  >&lt;p&gt;Completed: At revision: 1690894  &lt;/p&gt;

&lt;p&gt;is think there was a bug in this rev - the replacement of variables on the raw config was only applied when a custom variable resolver was present. if none, no variable was replaced, not even those defined in the model itself. was this by intention?&lt;/p&gt;

&lt;p&gt;in this rev i fixed the behavior, please cross-check.&lt;/p&gt;

&lt;p&gt;(please note that in context of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4879&quot; title=&quot;Slingstart Maven Plugin: Allow to read variables from POM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4879&quot;&gt;&lt;del&gt;SLING-4879&lt;/del&gt;&lt;/a&gt; i moved the method getProcessedConfiguration to another class, but i did not change its logic)&lt;/p&gt;</comment>
                            <comment id="14627256" author="cziegeler" created="Tue, 14 Jul 2015 23:14:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; I think the code was actually correct &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; The method is called from two places: merge and getEffectiveModel - variable replacement should not take place when called from merge, therefore the null check. So I think we should revert your change. I thought I added tests for this, but maybe I did not &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14627268" author="sseifert@pro-vision.de" created="Tue, 14 Jul 2015 23:26:37 +0000"  >&lt;p&gt;Completed: At revision: 1691105  &lt;/p&gt;

&lt;p&gt;ah, ok - i did not see that intention. still the code was not correct in my pov - getEffectiveModel may call getProcessedConfiguration  with a variable resolver or with null - but wants to replace variables in both cases.&lt;br/&gt;
in this rev i added an explicit boolean flag if variables should be replaced or not - and set it to false in all calls from merge methods, but to true from getEffectiveModel.&lt;/p&gt;

&lt;p&gt;i think this should do the job?&lt;/p&gt;</comment>
                            <comment id="14627499" author="cziegeler" created="Wed, 15 Jul 2015 04:35:15 +0000"  >&lt;p&gt;lgtm, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2g1vb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4804] Semicolon parameters are not passed to the resource resolver</title>
                <link>https://issues.apache.org/jira/browse/SLING-4804</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-848&quot; title=&quot;Support getting versioned resources by using uri path parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-848&quot;&gt;&lt;del&gt;SLING-848&lt;/del&gt;&lt;/a&gt; provided a way to pass semicolon-separated parameters to the resource provider. However, such parameters are removed from the &lt;tt&gt;HttpServletRequest#getPathInfo()&lt;/tt&gt;, which is used in the &lt;tt&gt;RequestData#initResource()&lt;/tt&gt; method to resolve the resource from the URI. As a result, resource resolver and resource provider don&apos;t see the semicolon parameters and can&apos;t use them.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12837507">SLING-4804</key>
            <summary>Semicolon parameters are not passed to the resource resolver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tomek.rekawek">Tomek R&#281;kawek</assignee>
                                    <reporter username="tomek.rekawek">Tomek R&#281;kawek</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Jun 2015 20:18:19 +0000</created>
                <updated>Mon, 12 Oct 2015 09:44:50 +0000</updated>
                            <resolved>Wed, 2 Sep 2015 07:34:23 +0000</resolved>
                                    <version>Engine 2.4.2</version>
                                    <fixVersion>Engine 2.4.4</fixVersion>
                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14584476" author="tomek.rekawek" created="Sat, 13 Jun 2015 06:38:34 +0000"  >&lt;p&gt;The attached patch adds the semicolon parameter back to the path in the &lt;tt&gt;RequestData#initResource()&lt;/tt&gt;. It also adds an integration test that checks the semicolon parameters support using the &lt;tt&gt;;v=1.1&lt;/tt&gt; to retrieve a historic resource.&lt;/p&gt;</comment>
                            <comment id="14585493" author="cziegeler" created="Mon, 15 Jun 2015 06:37:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomek.rekawek&quot; class=&quot;user-hover&quot; rel=&quot;tomek.rekawek&quot;&gt;tomek.rekawek&lt;/a&gt; Please don&apos;t apply this patch as it does not handle encoding of the path correctly. getRequestURI and getRequestURL return the path encoded, therefore if your path contains encoded characters like unicode you will get them as %xyz. I just stumbled across this problem recently (and that&apos;s why I asked for a http test case in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-848&quot; title=&quot;Support getting versioned resources by using uri path parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-848&quot;&gt;&lt;del&gt;SLING-848&lt;/del&gt;&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ).&lt;br/&gt;
So far, the only potential solution I found is to apply a similar decoding as Jetty (or other servlet containers) does, which is pretty heavy. &lt;/p&gt;</comment>
                            <comment id="14585624" author="tomek.rekawek" created="Mon, 15 Jun 2015 08:27:59 +0000"  >&lt;p&gt;I see. I&apos;d like to take the decoded semicolon part, but I wasn&apos;t able to find it anywhere in the request. Do you think it would be enough to extend the patch with the URI decoder (in case there is a semicolon)?&lt;/p&gt;</comment>
                            <comment id="14585666" author="cziegeler" created="Mon, 15 Jun 2015 09:01:31 +0000"  >&lt;p&gt;Not sure if URI decoder is enough; we could try this as a start. I briefly looked at the code from Jetty and it does a lot more things&lt;/p&gt;</comment>
                            <comment id="14585847" author="tomek.rekawek" created="Mon, 15 Jun 2015 12:27:51 +0000"  >&lt;p&gt;I updated the patch, so now it decodes the URI before extracting the semicolon.&lt;/p&gt;

&lt;p&gt;I also took a look on the Request class in Jetty [1] and there is this HttpURI object that already contains parsed parameter [2]. However, they are part of the Jetty internal API, so we probably can&apos;t reference them in the Sling engine. On the other hand, copying the whole logic just to get the parameter in the exactly same way doesn&apos;t seem to be a good idea as well - as it may not be compatible with other containers and their logic. Maybe such a simple solution would be ok?&lt;/p&gt;

&lt;p&gt;Carsten, were you able to solve this issue somewhere else?&lt;/p&gt;

&lt;p&gt;[1] &lt;a href=&quot;https://github.com/eclipse/jetty.project/blob/master/jetty-server/src/main/java/org/eclipse/jetty/server/Request.java#L1747&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eclipse/jetty.project/blob/master/jetty-server/src/main/java/org/eclipse/jetty/server/Request.java#L1747&lt;/a&gt;&lt;br/&gt;
[2] &lt;a href=&quot;https://github.com/eclipse/jetty.project/blob/master/jetty-http/src/main/java/org/eclipse/jetty/http/HttpURI.java#L558&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eclipse/jetty.project/blob/master/jetty-http/src/main/java/org/eclipse/jetty/http/HttpURI.java#L558&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14591768" author="cziegeler" created="Thu, 18 Jun 2015 13:18:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomek.rekawek&quot; class=&quot;user-hover&quot; rel=&quot;tomek.rekawek&quot;&gt;tomek.rekawek&lt;/a&gt; I couldn&apos;t come up with a good solution either, in my case we just decided to ignore path parameters as Jetty (or Jetty&apos;s getPathInfo) does.&lt;br/&gt;
I guess there will be servlet engines which provide path parameters as part of getPathInfo and others which don&apos;t (like Jetty).&lt;br/&gt;
The patch looks basically good to me, however, could it be improved by first checking whether getRequestURI contains a semicolon and only do the decoding if it has one? And of course only if getPathInfo doesn&apos;t have it?&lt;/p&gt;</comment>
                            <comment id="14591781" author="tomek.rekawek" created="Thu, 18 Jun 2015 13:31:06 +0000"  >&lt;p&gt;I was thinking about looking for the semicolon decoding URI, but I thought that sometimes the semicolon may be encoded too. I&apos;ll look for &apos;;&apos; or &quot;%3B&quot; so we&apos;ll have both cases covered.&lt;/p&gt;</comment>
                            <comment id="14591803" author="cziegeler" created="Thu, 18 Jun 2015 13:47:25 +0000"  >&lt;p&gt;I think just looking for &quot;;&quot; is enough as it&apos;s never encoded if it&apos;s part of the path &lt;/p&gt;</comment>
                            <comment id="14591840" author="tomek.rekawek" created="Thu, 18 Jun 2015 14:09:05 +0000"  >&lt;p&gt;OK. Merged in r1686223.&lt;/p&gt;</comment>
                            <comment id="14725238" author="cziegeler" created="Tue, 1 Sep 2015 11:35:18 +0000"  >&lt;p&gt;It seems when updating to the latest http implementation 3.1.0, the test case is failing, see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4978&quot; title=&quot;VersionParameterTest integration test fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4978&quot;&gt;&lt;del&gt;SLING-4978&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14725344" author="tomek.rekawek" created="Tue, 1 Sep 2015 12:55:25 +0000"  >&lt;p&gt;It seems that &lt;tt&gt;requestURI()&lt;/tt&gt; doesn&apos;t contain the semicolon parameters anymore. I updated the RequestData to use the &lt;tt&gt;requestURL()&lt;/tt&gt; method instead. Now it works both with 3.0.2 and 3.1.0 http implementation. Patch (SLING&amp;#45;4804-3.patch) attached.&lt;/p&gt;</comment>
                            <comment id="14725367" author="cziegeler" created="Tue, 1 Sep 2015 13:12:49 +0000"  >&lt;p&gt;Lgtm, minor nit picking: we could avoid the toString() on the StringBuffer and use indexOf instead of contains. Not sure if it makes a difference though&lt;/p&gt;</comment>
                            <comment id="14725376" author="bdelacretaz" created="Tue, 1 Sep 2015 13:18:44 +0000"  >&lt;p&gt;Do we know what the correct behavior is supposed to be? &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURI%28%29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURI%28%29&lt;/a&gt; says &lt;em&gt;returns the part of this request&apos;s URL from the protocol name up to the query string in the first line of the HTTP request. The web container does not decode this String&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;My understanding is that in a URL like /foo;v=1.1?x=y the ;v=1.1 should be included in getRequestURI()&lt;/p&gt;

&lt;p&gt;I&apos;m not trying to be pedantic, just trying to make sure we&apos;re not chasing the wrong bugs. If the reality if that different servlet engines each interpret this in their own way we might need some clever fallbacks, which is IIUC what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomek.rekawek&quot; class=&quot;user-hover&quot; rel=&quot;tomek.rekawek&quot;&gt;tomek.rekawek&lt;/a&gt; is creating here?&lt;/p&gt;</comment>
                            <comment id="14725393" author="tomek.rekawek" created="Tue, 1 Sep 2015 13:31:27 +0000"  >&lt;p&gt;I investigated this a bit and it seems that the Jetty &lt;a href=&quot;https://github.com/eclipse/jetty.project/blob/master/jetty-server/src/main/java/org/eclipse/jetty/server/Request.java#L1306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Request#getRequestURI()&lt;/a&gt; method includes the semicolon, however the Felix &lt;a href=&quot;https://github.com/apache/felix/blob/trunk/http/base/src/main/java/org/apache/felix/http/base/internal/dispatch/ServletRequestWrapper.java#L199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ServletRequestWrapper#getRequestURI()&lt;/a&gt; overrides it and recreates the URI, but without the semicolon.&lt;/p&gt;</comment>
                            <comment id="14725397" author="bdelacretaz" created="Tue, 1 Sep 2015 13:34:23 +0000"  >&lt;p&gt;Ok cool, I would much prefer fixing those kinds of things rather than implementing workarounds. I&apos;m writing a test that will output all these request values so we can prevent such surprises in the future.&lt;/p&gt;</comment>
                            <comment id="14725450" author="cziegeler" created="Tue, 1 Sep 2015 14:10:41 +0000"  >&lt;p&gt;The Felix implementation is correct imho - we are talking here about the OSGi http implementation&lt;/p&gt;</comment>
                            <comment id="14725458" author="bdelacretaz" created="Tue, 1 Sep 2015 14:18:05 +0000"  >&lt;p&gt;I have added a RequestObjectTest at &lt;a href=&quot;http://svn.apache.org/r1700561&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1700561&lt;/a&gt; that verifies the current behavior, with org.apache.felix.http.jetty/3.0.2.&lt;/p&gt;

&lt;p&gt;This new test will likely fail with org.apache.felix.http.jetty/3.1.0 - if &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomek.rekawek&quot; class=&quot;user-hover&quot; rel=&quot;tomek.rekawek&quot;&gt;tomek.rekawek&lt;/a&gt;&apos;s analysis is correct and the Felix ServletRequestWrapper modifies the getRequestURI() value that sounds like a bug to me.&lt;/p&gt;</comment>
                            <comment id="14725478" author="cziegeler" created="Tue, 1 Sep 2015 14:30:53 +0000"  >&lt;p&gt;Again, I don&apos;t think its a bug&lt;/p&gt;</comment>
                            <comment id="14725493" author="bdelacretaz" created="Tue, 1 Sep 2015 14:42:54 +0000"  >&lt;p&gt;Well, if I understand &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomek.rekawek&quot; class=&quot;user-hover&quot; rel=&quot;tomek.rekawek&quot;&gt;tomek.rekawek&lt;/a&gt; correctly our failure scenario is:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Incoming request is like /foo;v=1.1&lt;/li&gt;
	&lt;li&gt;The servlet engines&apos; request.getRequestURI() returns /foo;v=1.1&lt;/li&gt;
	&lt;li&gt;The Felix ServletRequestWrapper wraps that request object and its getRequestURI() method returns /foo&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If this scenario is correct I fail to see why ServletRequestWrapper modifying that value is correct. Also as this IMO doesn&apos;t match the HttpServletRequest.getRequestURI docs quoted above.&lt;/p&gt;

&lt;p&gt;I would be ready to believe that this is not a bug, if you can provide some justification to counter my hypothesis &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14725506" author="cziegeler" created="Tue, 1 Sep 2015 14:58:40 +0000"  >&lt;p&gt;The servlet spec states:&lt;br/&gt;
   requestURI = contextPath + servletPath + pathInfo&lt;/p&gt;

&lt;p&gt;pathInfo does not contain the version par, and the OSGi http impl is therefore correct&lt;/p&gt;</comment>
                            <comment id="14726152" author="tomek.rekawek" created="Tue, 1 Sep 2015 20:46:05 +0000"  >&lt;p&gt;Sounds like a specification incosistency. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; - maybe in this case switching to getRequestURL() is not a bad idea?&lt;/p&gt;</comment>
                            <comment id="14726750" author="cziegeler" created="Wed, 2 Sep 2015 05:05:23 +0000"  >&lt;p&gt;Yes, as far as I remember it&apos;s a spec inconsistency as the RI started to remove semicolon parameters and everyone else implemented it in the same way. I think there is nothing wrong with using getRequestURL&lt;/p&gt;</comment>
                            <comment id="14726915" author="tomek.rekawek" created="Wed, 2 Sep 2015 07:34:10 +0000"  >&lt;p&gt;I committed the version with the &lt;tt&gt;getRequestURL()&lt;/tt&gt; in r1700719.&lt;/p&gt;</comment>
                            <comment id="14726941" author="bdelacretaz" created="Wed, 2 Sep 2015 07:49:53 +0000"  >&lt;p&gt;Thanks - now that we have a clear explanation I agree that using &lt;tt&gt;getRequestURL&lt;/tt&gt; makes sense.&lt;/p&gt;

&lt;p&gt;I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4987&quot; title=&quot;Upgrade to org.apache.felix.http.jetty/3.1.0 &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4987&quot;&gt;&lt;del&gt;SLING-4987&lt;/del&gt;&lt;/a&gt; to upgrade to org.apache.felix.http.jetty/3.1.0 and adapt the affected tests accordingly.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12413860">SLING-848</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12860665">SLING-4978</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12861244">SLING-4987</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12739600" name="SLING-4804-2.patch" size="5803" author="tomek.rekawek" created="Mon, 15 Jun 2015 12:18:11 +0000"/>
                            <attachment id="12753521" name="SLING-4804-3.patch" size="1470" author="tomek.rekawek" created="Tue, 1 Sep 2015 12:55:25 +0000"/>
                            <attachment id="12739403" name="SLING-4804.patch" size="5382" author="tomek.rekawek" created="Sat, 13 Jun 2015 06:38:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fzpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4800] If SlingMainServlet has allowTrace = false, default Allow header shouldn&apos;t contain TRACE method</title>
                <link>https://issues.apache.org/jira/browse/SLING-4800</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If the configuration of the SlingMainServlet specifies that the TRACE method isn&apos;t allowed, the Allow header in an OPTIONS response from servlets extending the SlingSafeMethodsServlet still contain the TRACE method. This shouldn&apos;t be the case. Although technically allowable by the HTTP spec, this behavior isn&apos;t ideal&lt;/p&gt;</description>
                <environment></environment>
        <key id="12837138">SLING-4800</key>
            <summary>If SlingMainServlet has allowTrace = false, default Allow header shouldn&apos;t contain TRACE method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Jun 2015 13:52:58 +0000</created>
                <updated>Wed, 12 Apr 2023 05:45:08 +0000</updated>
                            <resolved>Wed, 12 Apr 2023 05:45:08 +0000</resolved>
                                                                    <component>API</component>
                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14581944" author="justinedelson" created="Thu, 11 Jun 2015 13:58:32 +0000"  >&lt;p&gt;proposed patch: &lt;a href=&quot;https://codereview.appspot.com/247970043&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://codereview.appspot.com/247970043&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fxif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4794] SchedulerServiceFactory.fireJobAt ignores date, thus fires immediately</title>
                <link>https://issues.apache.org/jira/browse/SLING-4794</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling/blob/dbf5122bb38cd011a5cd88cd6540acf8a98a9e82/bundles/commons/scheduler/src/main/java/org/apache/sling/commons/scheduler/impl/SchedulerServiceFactory.java#L150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SchedulerServiceFactory.fireJobAt &apos;swallows&apos; the date by calling scheduler.fireJob() instead of scheduler.fireJobAt()&lt;/a&gt; - with the effect that it fires immediately instead of delaying.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12836812">SLING-4794</key>
            <summary>SchedulerServiceFactory.fireJobAt ignores date, thus fires immediately</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Jun 2015 11:58:23 +0000</created>
                <updated>Sat, 13 Jun 2015 16:12:02 +0000</updated>
                            <resolved>Wed, 10 Jun 2015 12:11:53 +0000</resolved>
                                    <version>Commons Scheduler 2.4.6</version>
                                    <fixVersion>Commons Scheduler 2.4.8</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14580437" author="cziegeler" created="Wed, 10 Jun 2015 12:11:53 +0000"  >&lt;p&gt;Fixed copy/paste error&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fvjr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4791] Error when saving configuration of &quot;org.apache.sling.engine.parameters&quot; with an empty &quot;file.location&quot; parameter</title>
                <link>https://issues.apache.org/jira/browse/SLING-4791</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Go to *&lt;a href=&quot;http://localhost:4502/system/console/configMgr/org.apache.sling.engine.parameters*&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4502/system/console/configMgr/org.apache.sling.engine.parameters*&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Change &lt;b&gt;sling.default.max.parameters&lt;/b&gt; to 10001&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;See in the logs :&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;09.06.2015 19:02:11.577 *ERROR* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.engine.parameters)] org.apache.sling.engine [org.apache.sling.engine.parameters(404)] The configure method has thrown an exception (java.lang.NullPointerException)
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.sling.engine.impl.parameters.RequestParameterSupportConfigurer.getFileLocation(RequestParameterSupportConfigurer.java:132)
	at org.apache.sling.engine.impl.parameters.RequestParameterSupportConfigurer.configure(RequestParameterSupportConfigurer.java:108)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
....
....
09.06.2015 19:09:32.291 *ERROR* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.engine.parameters)] org.apache.sling.engine [org.apache.sling.engine.parameters(404)] Failed creating the component instance; see log &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; reason
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Workaround : set the file.location parameter to a non-empty path.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12836597">SLING-4791</key>
            <summary>Error when saving configuration of &quot;org.apache.sling.engine.parameters&quot; with an empty &quot;file.location&quot; parameter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gschneck">Geoffroy Schneck</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Jun 2015 17:07:34 +0000</created>
                <updated>Wed, 10 Jun 2015 05:41:17 +0000</updated>
                            <resolved>Wed, 10 Jun 2015 05:41:17 +0000</resolved>
                                    <version>Engine 2.3.10</version>
                                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12768942">SLING-4339</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fu9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4790] Removal of artifacts from inherited model is not possible</title>
                <link>https://issues.apache.org/jira/browse/SLING-4790</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently an artifact (or configuration) can&apos;t be removed from an inherited model as the local model is read and merged first which removes the :remove run mode from the read model. Afterwards. the dependencies are read and the local model is merged into this. However as the :remove run mode is already gone, it&apos;s not possible to remove anything from inherited models&lt;/p&gt;</description>
                <environment></environment>
        <key id="12836516">SLING-4790</key>
            <summary>Removal of artifacts from inherited model is not possible</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Jun 2015 11:36:51 +0000</created>
                <updated>Sat, 13 Jun 2015 16:10:39 +0000</updated>
                            <resolved>Tue, 9 Jun 2015 11:40:33 +0000</resolved>
                                    <version>Sling Provisioning Model 1.1.0</version>
                    <version>Slingstart Maven Plugin 1.1.0</version>
                                    <fixVersion>Sling Provisioning Model 1.2.0</fixVersion>
                    <fixVersion>Slingstart Maven Plugin 1.2.0</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14578765" author="cziegeler" created="Tue, 9 Jun 2015 11:40:33 +0000"  >&lt;p&gt;Fixed by adding a new variant of the merge method to the provisioning model which keeps the :remove run modes. With this, the local model can be read without applying the removals yet. Then the dependencies are read and the local model is merged in&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ftrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4787] Change the DynamicClassLoader used by the Sightly scripting engine</title>
                <link>https://issues.apache.org/jira/browse/SLING-4787</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Since Sightly generated classes are instantiated with a &lt;tt&gt;DynamicClassLoader&lt;/tt&gt; obtained from the &lt;tt&gt;ClassLoaderWriter&lt;/tt&gt;, the context class loader used on a Sightly execution thread should be of the same type.&lt;/p&gt;

&lt;p&gt;This way the cleaning mechanism that will be implemented for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4783&quot; title=&quot;The JavaScript scripting engine can generate classloader leaks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4783&quot;&gt;&lt;del&gt;SLING-4783&lt;/del&gt;&lt;/a&gt; will properly remove strong references  to Sightly generated classes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12836154">SLING-4787</key>
            <summary>Change the DynamicClassLoader used by the Sightly scripting engine</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Jun 2015 14:03:38 +0000</created>
                <updated>Thu, 14 Dec 2017 07:29:06 +0000</updated>
                            <resolved>Mon, 8 Jun 2015 14:10:06 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.2</version>
                                    <fixVersion>Scripting Sightly Engine 1.0.4</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14577238" author="radu.cotescu" created="Mon, 8 Jun 2015 14:10:06 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=r1684191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1684191&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12836086">SLING-4783</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fri7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4786] Attributes and configuration format are wronlgy written out</title>
                <link>https://issues.apache.org/jira/browse/SLING-4786</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a configuration is written out, the format information is wrongly encoded. The same happens to attributes of artifacts.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12836122">SLING-4786</key>
            <summary>Attributes and configuration format are wronlgy written out</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Jun 2015 11:55:35 +0000</created>
                <updated>Sat, 13 Jun 2015 16:10:47 +0000</updated>
                            <resolved>Mon, 8 Jun 2015 11:58:40 +0000</resolved>
                                    <version>Sling Provisioning Model 1.1.0</version>
                                    <fixVersion>Sling Provisioning Model 1.2.0</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14577080" author="cziegeler" created="Mon, 8 Jun 2015 11:58:40 +0000"  >&lt;p&gt;Fixed by changing from the wrong formatting to the correct one using [] brackets. Added a test to verify this&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2frb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4785] sling.auth.requirements is ignored on expired credentials</title>
                <link>https://issues.apache.org/jira/browse/SLING-4785</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Let&apos;s assume the following scenario:&lt;/p&gt;

&lt;p&gt;A sling application has an sling.auth.requirements that contains &lt;tt&gt;-/content/noauthenticationrequired.html&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;An user obtained a valid sling credentials that last 1 hour. The credentials is e.g. a token stored in the cookie.&lt;br/&gt;
If the user try to hit &lt;tt&gt;localhost:8080/content/noauthenticationrequired.html&lt;/tt&gt; with the expired crendentials (e.g. 2 hours after the authentication} the login page is shown.&lt;/p&gt;

&lt;p&gt;Expected behavior is instead the resource &lt;tt&gt;/content/noauthenticationrequired.html&lt;/tt&gt; should be displayed.&lt;/p&gt;

&lt;p&gt;Patch to follow&lt;/p&gt;</description>
                <environment></environment>
        <key id="12836118">SLING-4785</key>
            <summary>sling.auth.requirements is ignored on expired credentials</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Jun 2015 11:36:00 +0000</created>
                <updated>Mon, 6 Jul 2015 12:48:38 +0000</updated>
                            <resolved>Fri, 3 Jul 2015 08:28:12 +0000</resolved>
                                                    <fixVersion>Auth Core 1.3.8</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14577058" author="asanso" created="Mon, 8 Jun 2015 11:41:48 +0000"  >&lt;p&gt;proposed patch&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Index: src/main/java/org/apache/sling/auth/core/impl/SlingAuthenticator.java
===================================================================
--- src/main/java/org/apache/sling/auth/core/impl/SlingAuthenticator.java	(revision 1658921)
+++ src/main/java/org/apache/sling/auth/core/impl/SlingAuthenticator.java	(working copy)
@@ -817,8 +817,13 @@
 
             &lt;span class=&quot;code-comment&quot;&gt;// now find a way to get credentials unless the feedback handler
&lt;/span&gt;             &lt;span class=&quot;code-comment&quot;&gt;// has committed a response to the client already
&lt;/span&gt;-            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!response.isCommitted()) {
-                handleLoginFailure(request, response, authInfo.getUser(), re);
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!response.isCommitted()) {       
+                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!getAnonymousResolver(request, response, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AuthenticationInfo(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;))) {
+                    authInfo.setAuthType(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
+                    handleLoginFailure(request, response, authInfo.getUser(), re);
+                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
+                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
+                }
             }
 
         }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14612997" author="asanso" created="Fri, 3 Jul 2015 08:27:56 +0000"  >&lt;p&gt;applied slightly different patch in rev. r1688970 &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fra7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4784] Implement equals() and hashCode() for ValueMapDecorator</title>
                <link>https://issues.apache.org/jira/browse/SLING-4784</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Both equals() and hashCode() should be implemented for ValueMapDecorator (which eases the usage of such objects in tests and also might improve the usage in Collections).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12836114">SLING-4784</key>
            <summary>Implement equals() and hashCode() for ValueMapDecorator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Jun 2015 11:12:54 +0000</created>
                <updated>Mon, 8 Feb 2016 22:11:26 +0000</updated>
                            <resolved>Mon, 8 Jun 2015 11:27:58 +0000</resolved>
                                    <version>API 2.11.0</version>
                                    <fixVersion>API 2.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14577047" author="kwin" created="Mon, 8 Jun 2015 11:27:40 +0000"  >&lt;p&gt;I implemented both methods in rev.1684152. Only for array values the equal does not return true for the same values, because array comparison only returns true if it really is the same reference.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fr9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4783] The JavaScript scripting engine can generate classloader leaks</title>
                <link>https://issues.apache.org/jira/browse/SLING-4783</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The implementation of the JavaScript scripting engine, based on Rhino, can lead to classloader leaks due to Rhino&apos;s &lt;tt&gt;ClassCache&lt;/tt&gt; if the used classloader for loading objects is a &lt;tt&gt;DynamicClassLoader&lt;/tt&gt;. The cache is used by default to cache object translation from JavaScript to Java and generally outlives the objects it stores, holding a hard reference to them.&lt;/p&gt;

&lt;p&gt;Disabling the cache is not a solution as synthetic tests proved that the execution of JavaScript code had increased two times.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12836086">SLING-4783</key>
            <summary>The JavaScript scripting engine can generate classloader leaks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Jun 2015 08:44:42 +0000</created>
                <updated>Thu, 14 Dec 2017 07:29:06 +0000</updated>
                            <resolved>Mon, 8 Jun 2015 14:09:09 +0000</resolved>
                                                    <fixVersion>Scripting JavaScript 2.0.18</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14577236" author="radu.cotescu" created="Mon, 8 Jun 2015 14:09:09 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=r1684189&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1684189&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12836154">SLING-4787</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12738315" name="heap dump analysis.png" size="318263" author="radu" created="Mon, 8 Jun 2015 08:52:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fr33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4776] Document how to create system user for loginService</title>
                <link>https://issues.apache.org/jira/browse/SLING-4776</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The Service Authentication documentation &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; describes the API.&lt;/p&gt;

&lt;p&gt;We now need to describe how to create and ship the service user along with the services.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://sling.apache.org/documentation/the-sling-engine/service-authentication.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/the-sling-engine/service-authentication.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12835372">SLING-4776</key>
            <summary>Document how to create system user for loginService</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="acollign">Alex Collignon</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Jun 2015 12:08:11 +0000</created>
                <updated>Wed, 19 Sep 2018 12:33:51 +0000</updated>
                                                                            <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14572656" author="teofili" created="Thu, 4 Jun 2015 12:12:04 +0000"  >&lt;p&gt;I can pick it up as I&apos;ll be shortly working on &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3891&quot; title=&quot;Document Sling Content Distribution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3891&quot;&gt;&lt;del&gt;SLING-3891&lt;/del&gt;&lt;/a&gt; for the Distribution documentation.&lt;/p&gt;</comment>
                            <comment id="14574091" author="kwin" created="Fri, 5 Jun 2015 07:53:01 +0000"  >&lt;p&gt;Can you at the same time document the other 2 improvement to the service authentication?&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Mapping amendments: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3578&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-3578&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Start OSGi service only when service user is available: &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4312&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-4312&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14589652" author="acollign" created="Wed, 17 Jun 2015 11:33:29 +0000"  >&lt;p&gt;Since system users are only supported since jackrabbit 2.9 which is not used yet in the default sling distribution, I&apos;m wondering how one can use this feature.&lt;/p&gt;</comment>
                            <comment id="14589658" author="rombert" created="Wed, 17 Jun 2015 11:43:42 +0000"  >&lt;p&gt;We use Oak 1.2.2 and Jackrabbit 2.10.1 in the 8-SNAPSHOT version of the launchpad. And users are free to use bundles more recent that what&apos;s in the latest released launchpad.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fmnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4774] JobManager does not allow finding jobs for all topics</title>
                <link>https://issues.apache.org/jira/browse/SLING-4774</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the JobManager.findJobs should support searching jobs with any topic according to javadocs:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;@param topic Topic can be used as a filter, if it is non-null, only jobs with this topic will be returned.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;but it does not work - searching for topic = null never returns a result.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12835236">SLING-4774</key>
            <summary>JobManager does not allow finding jobs for all topics</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>event</label>
                    </labels>
                <created>Wed, 3 Jun 2015 23:16:10 +0000</created>
                <updated>Mon, 13 Jul 2015 14:25:26 +0000</updated>
                            <resolved>Wed, 3 Jun 2015 23:34:41 +0000</resolved>
                                    <version>Event 3.6.0</version>
                                    <fixVersion>Event 3.7.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14571835" author="sseifert@pro-vision.de" created="Wed, 3 Jun 2015 23:34:41 +0000"  >&lt;p&gt;Completed: At revision: 1683445&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fltr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4773] SlingMocks always returns the value of property jcr:primaryType for Resource.getResourceType()</title>
                <link>https://issues.apache.org/jira/browse/SLING-4773</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Even if a resource was created with &lt;tt&gt;sling:resourceType&lt;/tt&gt; being set to some value calling &lt;tt&gt;Resource.getResourceType()&lt;/tt&gt; will always return the value of its &quot;jcr:primaryType&quot; property, even if  the &quot;sling:resourceType&quot; property is being set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12835072">SLING-4773</key>
            <summary>SlingMocks always returns the value of property jcr:primaryType for Resource.getResourceType()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jun 2015 14:49:22 +0000</created>
                <updated>Sat, 27 Jun 2015 09:38:34 +0000</updated>
                            <resolved>Thu, 11 Jun 2015 15:39:12 +0000</resolved>
                                    <version>Testing Sling Mock 1.3.0</version>
                                    <fixVersion>Testing Sling Mock 1.4.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14570943" author="kwin" created="Wed, 3 Jun 2015 14:51:41 +0000"  >&lt;p&gt;Attached is a test which shows the wrong behaviour.&lt;/p&gt;</comment>
                            <comment id="14574103" author="kwin" created="Fri, 5 Jun 2015 08:10:48 +0000"  >&lt;p&gt;Actually it is the same issue as described in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4362&quot; title=&quot;[jcr mocks] Resource type not correctly loaded when using jcr mock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4362&quot;&gt;&lt;del&gt;SLING-4362&lt;/del&gt;&lt;/a&gt; which was supposed to be fixed with JCR Mock 1.1.4 and Sling Mocks 1.2. Unfortunately even in Sling Mock 1.3 this does not yet work, because there was no real test case added for that in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4362&quot; title=&quot;[jcr mocks] Resource type not correctly loaded when using jcr mock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4362&quot;&gt;&lt;del&gt;SLING-4362&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14574142" author="kwin" created="Fri, 5 Jun 2015 08:51:01 +0000"  >&lt;p&gt;Actually it works if I use the &lt;tt&gt;resourceResolver&lt;/tt&gt; being returned by the &lt;tt&gt;SlingContext&lt;/tt&gt; object (that one does have the necessary sling namespace). Unfortunately I cannot use that in Sling Validation because I need access to the &lt;tt&gt;ResourceResolver&lt;/tt&gt; which is not exposed via the &lt;tt&gt;SlingContext&lt;/tt&gt;. Therefore I would propose the following 2 enhancements:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;expose the &lt;tt&gt;ResourceResolverFactory&lt;/tt&gt; via the &lt;tt&gt;SlingContext&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;by default register the Sling namespace for the JcrMock (since it will always be used in a Sling context I guess), so that this works even with MockSling.newResourceResolverFactory(ResourceResolverType.JCR_MOCK)&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14574330" author="sseifert@pro-vision.de" created="Fri, 5 Jun 2015 11:16:36 +0000"  >&lt;p&gt;i&apos;ll have a look at it&lt;/p&gt;</comment>
                            <comment id="14582100" author="sseifert@pro-vision.de" created="Thu, 11 Jun 2015 15:39:12 +0000"  >&lt;p&gt;Completed: At revision: 1684924  &lt;/p&gt;

&lt;p&gt;the problem should be solved - i moved the namespace registering part to the adapter which is the better solution anyways.&lt;/p&gt;

&lt;p&gt;please give it a try.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12770680">SLING-4362</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12772054">SLING-4388</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12737290" name="SLING-4773-testcase-v1.diff" size="1652" author="kwin" created="Wed, 3 Jun 2015 14:51:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fkwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4766] Provisioning Model does not support adding variables to Sling Settings</title>
                <link>https://issues.apache.org/jira/browse/SLING-4766</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the provisioning model supports resolving variables to values defined in the model itself in the [variables] section.&lt;/p&gt;

&lt;p&gt;in the [settings] it is sometimes required to insert variables that should not be resolved when parsing the model, but should be written as variable to the resulting sling.properties file.&lt;/p&gt;

&lt;p&gt;this is already supported for &lt;tt&gt;${sling.home&lt;/tt&gt;} - but for nothing else as it seems.&lt;/p&gt;

&lt;p&gt;example what does not work - override the boot delegation&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  org.osgi.framework.bootdelegation=com.yourkit.*, com.wily.*, ${org.apache.sling.launcher.bootdelegation}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this fails with an error&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Internal error: java.lang.IllegalArgumentException: Unknown variable: org.apache.sling.launcher.bootdelegation -&amp;gt; [Help 1]
org.apache.maven.InternalErrorException: Internal error: java.lang.IllegalArgumentException: Unknown variable: org.apache.sling.launcher.bootdelegation
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:166)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:582)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:214)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:158)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:483)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)
Caused by: java.lang.IllegalArgumentException: Unknown variable: org.apache.sling.launcher.bootdelegation
        at org.apache.sling.provisioning.model.ModelUtility.replace(ModelUtility.java:336)
        at org.apache.sling.provisioning.model.ModelUtility.getEffectiveModel(ModelUtility.java:286)
        at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.addDependencies(DependencyLifecycleParticipant.java:149)
        at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.addDependencies(DependencyLifecycleParticipant.java:124)
        at org.apache.sling.maven.slingstart.DependencyLifecycleParticipant.afterProjectsRead(DependencyLifecycleParticipant.java:119)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:310)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:154)
        ... 11 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;we should introduce some sort of escaping syntax for special chars in the settings value to support other variables than sling.home as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12833887">SLING-4766</key>
            <summary>Provisioning Model does not support adding variables to Sling Settings</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 May 2015 21:22:45 +0000</created>
                <updated>Sat, 13 Jun 2015 16:11:08 +0000</updated>
                            <resolved>Thu, 4 Jun 2015 20:48:54 +0000</resolved>
                                    <version>Sling Provisioning Model 1.1.0</version>
                                    <fixVersion>Sling Provisioning Model 1.2.0</fixVersion>
                    <fixVersion>Slingstart Maven Plugin 1.2.0</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14565443" author="sseifert@pro-vision.de" created="Fri, 29 May 2015 21:24:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;: any ideas what is the best way to solve this?&lt;/p&gt;</comment>
                            <comment id="14565890" author="cziegeler" created="Sat, 30 May 2015 08:11:57 +0000"  >&lt;p&gt;Hmm, unfortunately we picked the same syntax in both case.&lt;br/&gt;
I guess escaping is a good idea, what about prefixing with $, so something like $${foo} ?&lt;/p&gt;</comment>
                            <comment id="14565897" author="sseifert@pro-vision.de" created="Sat, 30 May 2015 08:17:30 +0000"  >&lt;p&gt;i thought about something linke \${foo} - but your proposal works as well&lt;/p&gt;</comment>
                            <comment id="14565904" author="cziegeler" created="Sat, 30 May 2015 08:55:35 +0000"  >&lt;p&gt;I&apos;m fine with that, too - I&apos;m not sure which of the two is the more intuitiv&lt;/p&gt;</comment>
                            <comment id="14573555" author="sseifert@pro-vision.de" created="Thu, 4 Jun 2015 20:48:54 +0000"  >&lt;p&gt;Completed: At revision: 1683639  &lt;/p&gt;

&lt;p&gt;i implemented it with &quot;\${var}&quot; syntax.&lt;/p&gt;

&lt;p&gt;i had to change the sling start maven plugin as well to do the final de-escaping when writing the settings file.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fec7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4764] ClassCastException when trying to modify properties in custom appender Service</title>
                <link>https://issues.apache.org/jira/browse/SLING-4764</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Exception:&lt;br/&gt;
java.lang.ClassCastException: org.apache.sling.commons.log.logback.internal.AppenderTracker$AppenderInfo cannot be cast to ch.qos.logback.core.Appender&lt;br/&gt;
	at org.apache.sling.commons.log.logback.internal.AppenderTracker.modifiedService(AppenderTracker.java:78)&lt;/p&gt;

&lt;p&gt;Solution:&lt;br/&gt;
org.apache.sling.commons.log.logback.internal.AppenderTracker#addingService should return Appender (a) instead of AppenderInfo (ai)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12833780">SLING-4764</key>
            <summary>ClassCastException when trying to modify properties in custom appender Service</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="bobi">Andrey Bardashevsky</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 May 2015 13:04:37 +0000</created>
                <updated>Tue, 4 Aug 2015 13:20:32 +0000</updated>
                            <resolved>Wed, 22 Jul 2015 08:32:31 +0000</resolved>
                                    <version>Commons Log 4.0.2</version>
                    <version>Commons Log 4.0.4</version>
                                    <fixVersion>Commons Log 4.0.4</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14636505" author="chetanm" created="Wed, 22 Jul 2015 08:32:31 +0000"  >&lt;p&gt;Fixed along with testcase in &lt;a href=&quot;http://svn.apache.org/r1692236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1692236&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fdnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4762] Latest job handling expects created date job property</title>
                <link>https://issues.apache.org/jira/browse/SLING-4762</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The latest job handling assumes that a created date property is always set on a job - for new jobs created with this eventing that&apos;s true. But for old jobs when updating the instance it&apos;s not.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12833709">SLING-4762</key>
            <summary>Latest job handling expects created date job property</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 May 2015 08:00:11 +0000</created>
                <updated>Mon, 13 Jul 2015 14:25:27 +0000</updated>
                            <resolved>Fri, 29 May 2015 08:20:38 +0000</resolved>
                                    <version>Event 3.6.0</version>
                                    <fixVersion>Event 3.7.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14564403" author="cziegeler" created="Fri, 29 May 2015 08:20:38 +0000"  >&lt;p&gt;Fixed in rev 1682391 by adding an extra upgrade check and adding the property if missing&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fd8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4761] Latest view seems to get marked as not current</title>
                <link>https://issues.apache.org/jira/browse/SLING-4761</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12833512">SLING-4761</key>
            <summary>Latest view seems to get marked as not current</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 May 2015 18:02:35 +0000</created>
                <updated>Thu, 26 Sep 2019 12:40:13 +0000</updated>
                            <resolved>Wed, 16 Sep 2015 17:59:20 +0000</resolved>
                                    <version>Discovery Impl 1.1.0</version>
                    <version>Discovery Impl 1.1.2</version>
                                    <fixVersion>Discovery Impl 1.1.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14563386" author="cziegeler" created="Thu, 28 May 2015 18:11:27 +0000"  >&lt;p&gt;It seems that the last view you get via a topology listener might get mark as old (not current), this is the events I see:&lt;/p&gt;

&lt;p&gt;28.05.2015 19:58:57.015 Received topology event PROPERTIES_CHANGED, hash code 2037323133, current : true&lt;br/&gt;
28.05.2015 19:58:57.022 Received topology event PROPERTIES_CHANGED, hash code 2037323133, current  : true&lt;br/&gt;
28.05.2015 19:59:06.995 active check, hash code 2037323133, current : false&lt;/p&gt;

&lt;p&gt;The interesting thing is that the properties changed event is received twice, with the same new view object, ten seconds later the view is not current anymore but no topology event / change has been received by the listener.&lt;/p&gt;

&lt;p&gt;I experienced this with 1.1.0 and can reproduce this. Trying 1.1.2 now&lt;/p&gt;</comment>
                            <comment id="14563416" author="cziegeler" created="Thu, 28 May 2015 18:22:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; WDYT? It still happens to me with 1.1.2&lt;/p&gt;</comment>
                            <comment id="14563449" author="cziegeler" created="Thu, 28 May 2015 18:45:18 +0000"  >&lt;p&gt;Forgot one detail: Although this is random (sometimes it seems to work), it&apos;s often reproducible&lt;/p&gt;</comment>
                            <comment id="14564353" author="egli" created="Fri, 29 May 2015 07:41:29 +0000"  >&lt;p&gt;Not good.. Would you be able to enable debug log level on org.apache.sling.discovery - maybe that makes it clearer - otherwise I can try to reproduce it too (what exactly generates this?).&lt;br/&gt;
In any case, this looks like even two issues: the sending of properties_changed twice and the wrong current.&lt;/p&gt;</comment>
                            <comment id="14790643" author="egli" created="Wed, 16 Sep 2015 16:17:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, good news is I was able to reproduce. Bad news is I don&apos;t know why the direct &apos;current&apos;-check makes tests fail..&lt;/p&gt;

&lt;p&gt;Here&apos;s more details as to what seems happening:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;during startup discovery.impl typically sends out multiple &lt;tt&gt;PROPERTIES_CHANGED&lt;/tt&gt;, this is &apos;legal&apos;&lt;/li&gt;
	&lt;li&gt;in &lt;tt&gt;JobManagerConfiguration.handleTopologyEvent&lt;/tt&gt; there is a mechanism which &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/event/src/main/java/org/apache/sling/event/impl/jobs/config/JobManagerConfiguration.java#L548&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ignores the event if only properties have changed but no job-relevant ones&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;so if the capabilities-properties do change - even though the view is otherwise the same - then this will result in a sequence of &lt;tt&gt;stopProcessing&lt;/tt&gt;/&lt;tt&gt;startProcessing&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;in &lt;tt&gt;startProcessing&lt;/tt&gt; there is a mechanism to &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/event/src/main/java/org/apache/sling/event/impl/jobs/config/JobManagerConfiguration.java#L527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;trigger an async job after 10sec&lt;/a&gt; (I guess to avoid blocking the handleTopologyEvent)&lt;/li&gt;
	&lt;li&gt;so, what can happen is that such a delay-job is started, then a PROPERTIES_CHANGED comes in, that one will have correctly marked the (previous) view of the delay-job as not-current&lt;/li&gt;
	&lt;li&gt;thus once that delay-job wakes up it &lt;b&gt;can&lt;/b&gt; see that the view is not current, so that is legal&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;What very likely adds to the confusion of the output you noticed, is the fact that &lt;ins&gt;&lt;tt&gt;TopologyViewImpl&lt;/tt&gt; overwrites hashCode()&lt;/ins&gt; for internal and testing purpose (to have topologyViews comparable/&apos;equalable&apos;). So just from the fact that you output the hashCode above and given they are equal as a just received PROPERTIES_CHANGED event, doesn&apos;t make it the &lt;b&gt;same&lt;/b&gt; view object. In fact, adding more logging output showed that they were indeed different views - and thus in this case it was valid/correct that the view is not current (the event for that change was received 10sec earlier, which is before the last received event in your log).&lt;/p&gt;

&lt;p&gt;So to reply to the initial reported issues:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;It seems that the last view you get via a topology listener might get mark as old (not current)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;that would then not be true - this view here was marked !current 10 sec before:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 28.05.2015 19:59:06.995 active check, hash code 2037323133, current : &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;The interesting thing is that the properties changed event is received twice, with the same new view object, ten seconds later the view is not current anymore but no topology event / change has been received by the listener.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Same here - given the hashCode is the way it is, these assumptions do not hold - the views were likely different&lt;/p&gt;

&lt;p&gt;Which brings me to the actual issue: I don&apos;t know why enabling that direct &apos;current&apos; check on makes tests fail. But I suspect the problem is not the &apos;current&apos; itself..&lt;/p&gt;</comment>
                            <comment id="14790650" author="egli" created="Wed, 16 Sep 2015 16:18:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, assuming the above assumptions hold, then this would not be an issue. Hence removed fix-version for now and assigned to you for a review, thx!&lt;/p&gt;</comment>
                            <comment id="14790668" author="cziegeler" created="Wed, 16 Sep 2015 16:29:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; If I understand this correctly, this means:&lt;br/&gt;
a) the view changes if just properties change&lt;br/&gt;
b) as the job handling only acts on change on some properties, it does not handle all view changes&lt;br/&gt;
c) due to a) and b) the issue needs to be solved in the jobs handling&lt;br/&gt;
Is this correct?&lt;/p&gt;</comment>
                            <comment id="14790696" author="egli" created="Wed, 16 Sep 2015 16:41:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;a) the view changes if just properties change&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;yes, the view &apos;object&apos; changes - but not the content of the view, ie the list of instances is the same&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;b) as the job handling only acts on change on some properties, it does not handle all view changes&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;hm, as I read the &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/event/src/main/java/org/apache/sling/event/impl/jobs/config/JobManagerConfiguration.java#L567&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;code&lt;/a&gt; it should already also handle the TOPOLOGY_CHANGED case - so I&apos;m assuming it already handles view changes. so I dont quite see a bug yet in that handleTopologyEvent.. perhaps a subtle one: when only irrelevant properties change, then it doesn&apos;t stop/start - which will maybe leave the job handler to eventually stop as it&apos;s swallowing the latest (and thus current) event.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;c) due to a) and b) the issue needs to be solved in the jobs handling&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;yes. probably the safest is to &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/event/src/main/java/org/apache/sling/event/impl/jobs/config/JobManagerConfiguration.java#L551&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;not swallow the event&lt;/a&gt; for irrelevant property changes&lt;/p&gt;</comment>
                            <comment id="14790728" author="egli" created="Wed, 16 Sep 2015 16:55:55 +0000"  >&lt;p&gt;I think this could go into the argument whether &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/discovery/api/src/main/java/org/apache/sling/discovery/TopologyView.java#L41&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;isCurrent()&lt;/tt&gt;&lt;/a&gt; should return true even if the properties are not current. I was under the assumption that if &lt;b&gt;anything&lt;/b&gt; changes in the view - ie if a new TopologyView object must be created as a result - then (all) the previous one(s) would be marked as not current.&lt;/li&gt;
	&lt;li&gt;the counter-view could be that &lt;tt&gt;isCurrent&lt;/tt&gt; only is about the instance/cluster part and not the properties ..&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I&apos;d vote to stick to 1 as is currently the case .. wdyt?&lt;/p&gt;</comment>
                            <comment id="14790810" author="cziegeler" created="Wed, 16 Sep 2015 17:58:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; My impression was more towards 2 but thinkint about it, 1 is the better option&lt;/p&gt;</comment>
                            <comment id="14790811" author="cziegeler" created="Wed, 16 Sep 2015 17:59:21 +0000"  >&lt;p&gt;Let&apos;s continue the discussion in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4634&quot; title=&quot;Directly check if view is still current&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4634&quot;&gt;&lt;del&gt;SLING-4634&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14791707" author="egli" created="Thu, 17 Sep 2015 07:22:30 +0000"  >&lt;p&gt;(just slightly modified the toString of TopologyViewImpl to help debugging similar cases in the future and avoid confusion due to hashCode overwrite: &lt;a href=&quot;http://svn.apache.org/r1703507&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1703507&lt;/a&gt;)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12822258">SLING-4638</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12821883">SLING-4634</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fc27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4756] ServiceListener notifications are not filtered</title>
                <link>https://issues.apache.org/jira/browse/SLING-4756</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;While working on &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4605&quot; title=&quot;Add support for an Oak resource resolver type mock&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4605&quot;&gt;&lt;del&gt;SLING-4605&lt;/del&gt;&lt;/a&gt; I noticed many ClassCastExceptions filling the logs ( see below ). Similar exceptions are also present for the mock-jackrabbit module, only less verbose ( not stack traces )&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;5432 [oak-executor-1] WARN org.apache.jackrabbit.oak.jcr.observation.ChangeProcessor - Error while dispatching observation events for ///*[11111b]@org.apache.sling.jcr.resource.internal.JcrResourceListener
java.lang.ClassCastException: org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProvider cannot be cast to org.osgi.service.event.EventAdmin
        at org.apache.sling.jcr.resource.internal.JcrResourceListener.onEvent(JcrResourceListener.java:173)
        at org.apache.jackrabbit.commons.observation.ListenerTracker$1.onEvent(ListenerTracker.java:164)
        at org.apache.jackrabbit.oak.jcr.observation.ChangeProcessor.contentChanged(ChangeProcessor.java:302)
        at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:125)
        at org.apache.jackrabbit.oak.spi.commit.BackgroundObserver$1$1.call(BackgroundObserver.java:119)
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The root cause is that when registering a &lt;tt&gt;ServiceTracker&lt;/tt&gt; for a given class name the service tracker receives all registered services after it has been instantiated. The fix is the following&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;when registering a service the mandatory &lt;tt&gt;objectClass&lt;/tt&gt; property must be set for the &lt;tt&gt;ServiceReference&lt;/tt&gt;&apos;s properties&lt;/li&gt;
	&lt;li&gt;implement simple filtering based on the &lt;tt&gt;objectClass&lt;/tt&gt; parameter in &lt;tt&gt;MockBundleContext&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;notify only interested &lt;tt&gt;ServiceListener&lt;/tt&gt; instances based on the filter they are registered with&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12833024">SLING-4756</key>
            <summary>ServiceListener notifications are not filtered</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 May 2015 12:30:17 +0000</created>
                <updated>Sat, 27 Jun 2015 09:37:43 +0000</updated>
                            <resolved>Wed, 27 May 2015 13:30:06 +0000</resolved>
                                    <version>Testing OSGi Mock 1.3.0</version>
                                    <fixVersion>Testing OSGi Mock 1.4.0</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14560950" author="sseifert@pro-vision.de" created="Wed, 27 May 2015 13:26:14 +0000"  >&lt;p&gt;filter support is missing currently completely in osgi-mock, main reason is i avoided up to now to implement a parser for the ldap-style query syntax. perhaps there is a library to integrate in the mocks?&lt;/p&gt;</comment>
                            <comment id="14560963" author="rombert" created="Wed, 27 May 2015 13:30:06 +0000"  >&lt;p&gt;This is now fixed based on the issue description. This might not be 100% backwards compatible with how the OSGi mocks behaved since ServiceListeners registered with a filter which were previously (incorrectly) invoked are no longer invoked, but the behavior should be correct.&lt;/p&gt;

&lt;p&gt;Maybe it&apos;s worth discussing if when encountering an unsupported filter specification we should simply fail hard with an exception instead of ignoring it, like it does now.&lt;/p&gt;</comment>
                            <comment id="14560978" author="rombert" created="Wed, 27 May 2015 13:42:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;filter support is missing currently completely in osgi-mock, main reason is i avoided up to now to implement a parser for the ldap-style query syntax. perhaps there is a library to integrate in the mocks?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry, missed your comment. There seem to be a number of alternatives listed at &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; . We can even consider reusing/embedding &lt;tt&gt;org.apache.felix.framework.FilterImpl&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;: &lt;a href=&quot;http://stackoverflow.com/questions/1027307/is-there-a-standalone-java-library-which-provides-ldap-style-parsing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/1027307/is-there-a-standalone-java-library-which-provides-ldap-style-parsing&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14560993" author="rombert" created="Wed, 27 May 2015 13:52:48 +0000"  >&lt;p&gt;The Apache Directory implementation will drag in loads of dependencies ( see &lt;a href=&quot;https://github.com/apache/directory-shared/blob/trunk/ldap/model/pom.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/directory-shared/blob/trunk/ldap/model/pom.xml&lt;/a&gt; ) , while the openDS artifact on Maven central is old ( 2007 ) and has 6.3 MB. I&apos;d rather not pull in that many dependencies.&lt;/p&gt;</comment>
                            <comment id="14561108" author="rombert" created="Wed, 27 May 2015 15:02:12 +0000"  >&lt;p&gt;Another option is to rebase the OSGi mocks on top of &lt;a href=&quot;https://svn.apache.org/repos/asf/felix/trunk/connect/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Apache Felix Connect&lt;/a&gt; ( formerly &lt;a href=&quot;https://code.google.com/p/pojosr/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PojoSR&lt;/a&gt; ) , but I&apos;m not sure if that will what we want and keep the project lightweight.&lt;/p&gt;</comment>
                            <comment id="14567981" author="sseifert@pro-vision.de" created="Mon, 1 Jun 2015 20:55:25 +0000"  >&lt;p&gt;Completed: At revision: 1683002  &lt;/p&gt;

&lt;p&gt;i replaced you partial filter implementation with FilterImpl from felix framework - it seems to work very well, and has no futher dependencies!&lt;/p&gt;

&lt;p&gt;after applying FilterImpl i had to remove one of your unit tests&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testNestedObjectClassFilterMatches() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InvalidSyntaxException {
        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; matches what the ServiceTracker creates
&lt;/span&gt;        Filter filter = bundleContext.createFilter(&lt;span class=&quot;code-quote&quot;&gt;&quot;((&quot;&lt;/span&gt; + Constants.OBJECTCLASS + &lt;span class=&quot;code-quote&quot;&gt;&quot;=&quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName() + &lt;span class=&quot;code-quote&quot;&gt;&quot;))&quot;&lt;/span&gt;);
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;because FelixImpl then throws an error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.osgi.framework.InvalidSyntaxException: Only one top-level operation allowed: ((objectClass=java.lang.Integer))
	at org.apache.felix.framework.FilterImpl.&amp;lt;init&amp;gt;(FilterImpl.java:51)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;i assume FilterImpl is correct here.&lt;/p&gt;</comment>
                            <comment id="14572295" author="rombert" created="Thu, 4 Jun 2015 07:09:22 +0000"  >&lt;p&gt;Thanks for the further fix! I would assume that FilterImpl is correct as well &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f933:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4753] Commit the Resource Resolver before passing it to Tenant Customizers for setting up their own customizations</title>
                <link>https://issues.apache.org/jira/browse/SLING-4753</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We should commit the Resource Resolver after creating the Tenant Resource and before passing it on to the Tenant Customizers. &lt;/p&gt;

&lt;p&gt;One possible issue is that one of the Tenant Customizers calls some APIs like PageManager##createPage that does a session.refresh() and rollbacks all the un-committed changes on the resolver so far. That could also include the tenant resource itself. &lt;/p&gt;

&lt;p&gt;Ideally the TenantCustomizers should not call commit on the resolver and let TenantProvider commit the changes, but it would be a good protection against all such cases where we could prevent the tenant resource from getting modified if the TenantCustomizer failed and tried to refresh the session.&lt;/p&gt;

&lt;p&gt;We are experiencing this issue in &lt;a href=&quot;https://jira.corp.adobe.com/browse/MAC-25410&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jira.corp.adobe.com/browse/MAC-25410&lt;/a&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="12832976">SLING-4753</key>
            <summary>Commit the Resource Resolver before passing it to Tenant Customizers for setting up their own customizations</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="amangal">Agraj Mangal</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 May 2015 07:27:17 +0000</created>
                <updated>Tue, 17 Jan 2017 09:41:43 +0000</updated>
                            <resolved>Thu, 12 Jan 2017 13:55:13 +0000</resolved>
                                    <version>Tenant 1.1.0</version>
                                    <fixVersion>Tenant 1.1.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14560581" author="githubbot" created="Wed, 27 May 2015 07:47:37 +0000"  >&lt;p&gt;GitHub user agrajm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/92&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/92&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4753&quot; title=&quot;Commit the Resource Resolver before passing it to Tenant Customizers for setting up their own customizations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4753&quot;&gt;&lt;del&gt;SLING-4753&lt;/del&gt;&lt;/a&gt; - Commit the Resource Resolver before passing it to TenantCustomizers for setting up their own customizations&lt;/p&gt;

&lt;p&gt;    Persisting the Tenant Resource by calling commit before setting up the Tenant Customizers and passing the resolver to them, which potentially have the ability to undo all the un-committed changes on the Resolver ( including the Tenant Resource itself ) leading to all kind of weird errors like InvalidItemStateException , StaleItemStateException etc.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/agrajm/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/agrajm/sling&lt;/a&gt; trunk&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/92.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/92.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #92&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2979825d40644e0c51c0e10c47b3139d181a7c19&lt;br/&gt;
Author: Agraj Mangal &amp;lt;amangal@adobe.com&amp;gt;&lt;br/&gt;
Date:   2015-05-27T07:42:04Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4753&quot; title=&quot;Commit the Resource Resolver before passing it to Tenant Customizers for setting up their own customizations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4753&quot;&gt;&lt;del&gt;SLING-4753&lt;/del&gt;&lt;/a&gt; - Commit the Resource Resolver before passing it to Tenant Customizers for setting up their own customizations&lt;/p&gt;

&lt;p&gt;commit 375f29b74a3ca5b3ba718a9899b902863660cc7a&lt;br/&gt;
Author: Agraj Mangal &amp;lt;amangal@adobe.com&amp;gt;&lt;br/&gt;
Date:   2015-05-27T07:53:23Z&lt;/p&gt;

&lt;p&gt;    Revert &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4753&quot; title=&quot;Commit the Resource Resolver before passing it to Tenant Customizers for setting up their own customizations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4753&quot;&gt;&lt;del&gt;SLING-4753&lt;/del&gt;&lt;/a&gt; - Commit the Resource Resolver before passing it to Tenant Customizers for setting up their own customizations&quot;&lt;/p&gt;

&lt;p&gt;    This reverts commit 2979825d40644e0c51c0e10c47b3139d181a7c19.&lt;/p&gt;

&lt;p&gt;commit fe537e9fed86fb022110f72982938ce8f7c7de75&lt;br/&gt;
Author: Agraj Mangal &amp;lt;amangal@adobe.com&amp;gt;&lt;br/&gt;
Date:   2015-05-27T07:54:23Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4753&quot; title=&quot;Commit the Resource Resolver before passing it to Tenant Customizers for setting up their own customizations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4753&quot;&gt;&lt;del&gt;SLING-4753&lt;/del&gt;&lt;/a&gt; - Commit the Resource Resolver before passing it to Tenant Customizers for setting up their own customizations&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14560667" author="githubbot" created="Wed, 27 May 2015 09:06:57 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/92&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/92&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15768162" author="marett" created="Wed, 21 Dec 2016 21:04:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitgupt&quot; class=&quot;user-hover&quot; rel=&quot;amitgupt&quot;&gt;amitgupt&lt;/a&gt; it seems the patch has been commit at &lt;tt&gt;r1681937&lt;/tt&gt;. Could you close this issue ? &lt;/p&gt;</comment>
                            <comment id="15769366" author="fmeschbe" created="Thu, 22 Dec 2016 07:35:52 +0000"  >&lt;p&gt;Hmm, I am a bit concerned, yet, of course, late in the game.&lt;/p&gt;

&lt;p&gt;IIRC we explicitly did &lt;b&gt;not&lt;/b&gt; commit the changes to the Tenant before calling the customers to abort/roll-back the creation in case of problems. This change of course prevents that from happening.&lt;/p&gt;

&lt;p&gt;I am also a bit concerned with the reasoning behind this change: AEM&apos;s PageManager.createPage method presumably clearing any changes before acting. I am not sure, we really want to support such questionable behaviour.&lt;/p&gt;

&lt;p&gt;Also, while I agree that is not clearly spec-ed that changes are not persisted &lt;b&gt;before&lt;/b&gt; calling the customizers, there is some indication in that:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;It is clearly stated in the TenantManager.setup method that changes are persisted &lt;b&gt;before&lt;/b&gt; the method returns&lt;/li&gt;
	&lt;li&gt;It is clearly stated with the TenantCustomer that ResourceResolver.commit must not be called&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Particularly from the second statement we could deduce, that also ResourceResolver.revert should not be called, hence calling Session.refresh is equally unexpected and undesired.&lt;/p&gt;

&lt;p&gt;Plus, even if the original creation is persisted, the behaviour could even revert any changes that a previous customizer applied. I really think, we should fix the problem not the symptom.&lt;/p&gt;

&lt;p&gt;As such, the longer I think about it, the longer I have the impression, that this change should be reverted.&lt;/p&gt;

&lt;p&gt;Last but not least: Do we really close issues before a release has been cut ?&lt;/p&gt;

&lt;p&gt;/cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitgupt&quot; class=&quot;user-hover&quot; rel=&quot;amitgupt&quot;&gt;amitgupt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15769369" author="fmeschbe" created="Thu, 22 Dec 2016 07:37:36 +0000"  >&lt;p&gt;Reopening as I think this is not done yet.&lt;/p&gt;</comment>
                            <comment id="15769483" author="marett" created="Thu, 22 Dec 2016 08:35:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;the longer I think about it, the longer I have the impression, that this change should be reverted.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitgupt&quot; class=&quot;user-hover&quot; rel=&quot;amitgupt&quot;&gt;amitgupt&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fmeschbe&quot; class=&quot;user-hover&quot; rel=&quot;fmeschbe&quot;&gt;fmeschbe&lt;/a&gt; I think that keeping the pre-&lt;tt&gt;r1681937&lt;/tt&gt; behaviour makes sense for the reasons &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fmeschbe&quot; class=&quot;user-hover&quot; rel=&quot;fmeschbe&quot;&gt;fmeschbe&lt;/a&gt; mentioned and because the &lt;tt&gt;o.a.s.t.s.TenantCustomizer&lt;/tt&gt; is deprecated in favour of &lt;tt&gt;o.a.s.t.s.TenantManagerHook&lt;/tt&gt; which does not pass the resolver through the spi (and then the pre-tenant-customizer-commit does not make sense anymore).&lt;/p&gt;

&lt;p&gt;A pragmatic approach may be to allow configuring this pre-commit behaviour and have it disabled (no pre-commit) by default.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do we really close issues before a release has been cut ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;As far as I understand from &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; and looking current running releases, issues are &lt;tt&gt;Resolved Fixed&lt;/tt&gt; before cutting the release and &lt;tt&gt;Closed Fixed&lt;/tt&gt; once the release has been cut. I mistakenly wrote &lt;tt&gt;close&lt;/tt&gt; when I meant &lt;tt&gt;resolve&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://sling.apache.org/documentation/development/release-management.html#update-jira&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/development/release-management.html#update-jira&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="15769793" author="fmeschbe" created="Thu, 22 Dec 2016 11:09:18 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;. Looking at the support for the post-factum hook, then IMHO it is probably even better to revert this change and go back to the &quot;after-customizer-commit&quot;.&lt;/p&gt;

&lt;p&gt;I would not make that configurable, though, because that might generate complicated ordering problems: We call in some order, now there is this config flag, which might have an unexpected consequence on this order.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I mistakenly wrote close when I meant resolve.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks for clarifying.&lt;/p&gt;</comment>
                            <comment id="15797619" author="marett" created="Wed, 4 Jan 2017 08:42:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitgupt&quot; class=&quot;user-hover&quot; rel=&quot;amitgupt&quot;&gt;amitgupt&lt;/a&gt; I am thinking to propose a release of the tenant bundle soon, in order to release the security fix &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5240&quot; title=&quot;Remove getAdministrativeResourceResolver() usage from org.apache.sling.tenant&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5240&quot;&gt;&lt;del&gt;SLING-5240&lt;/del&gt;&lt;/a&gt;. I think that this release can&apos;t be cut without sorting out &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4753&quot; title=&quot;Commit the Resource Resolver before passing it to Tenant Customizers for setting up their own customizations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4753&quot;&gt;&lt;del&gt;SLING-4753&lt;/del&gt;&lt;/a&gt;. Would you be ok with reverting the patch as suggested by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fmeschbe&quot; class=&quot;user-hover&quot; rel=&quot;fmeschbe&quot;&gt;fmeschbe&lt;/a&gt; or would you see an alternative ?&lt;/p&gt;</comment>
                            <comment id="15820712" author="amitgupt" created="Thu, 12 Jan 2017 10:44:09 +0000"  >&lt;p&gt;&amp;gt;Would you be ok with reverting the patch as suggested&lt;br/&gt;
Yeah, let&apos;s revert that. &lt;/p&gt;</comment>
                            <comment id="15821045" author="marett" created="Thu, 12 Jan 2017 13:52:31 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitgupt&quot; class=&quot;user-hover&quot; rel=&quot;amitgupt&quot;&gt;amitgupt&lt;/a&gt;! Reverted the commit in &lt;tt&gt;r1778434&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15821049" author="marett" created="Thu, 12 Jan 2017 13:55:13 +0000"  >&lt;p&gt;Set status &lt;tt&gt;Not A Bug&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f8sf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4749] Request using &quot;sling:bg=true&quot; causes StackOverflow when no read access to /var</title>
                <link>https://issues.apache.org/jira/browse/SLING-4749</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I have a system, where the anonymous user does not have read access to /var/bg. When I do a call to it (for example: &lt;a href=&quot;http://localhost:4503/?sling:bg=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4503/?sling:bg=true&lt;/a&gt;&quot;, it returns with a internal server error. The log shows a stackoverflow exception, caused by&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
at org.apache.sling.bgservlets.impl.DeepNodeCreator.deepCreateNode(DeepNodeCreator.java:54)
at org.apache.sling.bgservlets.impl.DeepNodeCreator.deepCreateNode(DeepNodeCreator.java:54)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looking at this line in the code I see a recursive call of deepCreateNode, which is executed, when the item itself does not exist. Which is true from the view of an anonymous session, which doesn&apos;t have read access to nodes beneath /var.&lt;/p&gt;

&lt;p&gt;The code should be improved, so it does either check with an admin session that the path exists, but is simply not readable, or preferably add some detection, that it has already reached &quot;/&quot; and that it doesn&apos;t make sense to continue then. &lt;/p&gt;

</description>
                <environment></environment>
        <key id="12832658">SLING-4749</key>
            <summary>Request using &quot;sling:bg=true&quot; causes StackOverflow when no read access to /var</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="joerghoh">Joerg Hoh</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 May 2015 07:57:33 +0000</created>
                <updated>Tue, 8 Feb 2022 09:24:45 +0000</updated>
                            <resolved>Tue, 26 May 2015 08:49:24 +0000</resolved>
                                    <version>Background Servlets 1.0.0</version>
                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12832657">SLING-4748</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f6uv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4748] Request using &quot;sling:bg=true&quot; causes StackOverflow when no read access to /var</title>
                <link>https://issues.apache.org/jira/browse/SLING-4748</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I have a system, where the anonymous user does not have read access to /var/bg. When I do a call to it (for example: &lt;a href=&quot;http://localhost:4503/?sling:bg=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:4503/?sling:bg=true&lt;/a&gt;&quot;, it returns with a internal server error. The log shows a stackoverflow exception, caused by&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;...
at org.apache.sling.bgservlets.impl.DeepNodeCreator.deepCreateNode(DeepNodeCreator.java:54)
at org.apache.sling.bgservlets.impl.DeepNodeCreator.deepCreateNode(DeepNodeCreator.java:54)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looking at this line in the code I see a recursive call of deepCreateNode, which is executed, when the item itself does not exist. Which is true from the view of an anonymous session, which doesn&apos;t have read access to nodes beneath /var.&lt;/p&gt;

&lt;p&gt;The code should be improved, so it does either check with an admin session that the path exists, but is simply not readable, or preferably add some detection, that it has already reached &quot;/&quot; and that it doesn&apos;t make sense to continue then. &lt;/p&gt;

</description>
                <environment></environment>
        <key id="12832657">SLING-4748</key>
            <summary>Request using &quot;sling:bg=true&quot; causes StackOverflow when no read access to /var</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="joerghoh">Joerg Hoh</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 May 2015 07:56:17 +0000</created>
                <updated>Wed, 20 Sep 2017 13:08:05 +0000</updated>
                            <resolved>Tue, 26 May 2015 09:44:55 +0000</resolved>
                                    <version>Background Servlets 1.0.0</version>
                                    <fixVersion>Background Servlets 1.0.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14558921" author="bdelacretaz" created="Tue, 26 May 2015 09:44:55 +0000"  >&lt;p&gt;Thanks for reporting, fixed in &lt;a href=&quot;http://svn.apache.org/r1681728&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1681728&lt;/a&gt; - please cross-check!&lt;/p&gt;</comment>
                            <comment id="14559081" author="joerghoh" created="Tue, 26 May 2015 13:08:54 +0000"  >&lt;p&gt;Looks better now, thanks! No StackOverflowException anymore. We probably need to handle a resulting &quot;AccessDeniedException&quot; better, but that&apos;s something for another ticket.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12832658">SLING-4749</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f6un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4747] Installer does not consistently update bundle location in Webconsole</title>
                <link>https://issues.apache.org/jira/browse/SLING-4747</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I have a sling-based application using Apache Oak as content repository. I started with Oak being part of the Launchpad, so I had for example a bundle &quot;org.apache.jackrabbit.oak-solr-osgi&quot; in version 1.0. The OSGI Webconsole displayed as bundle location &quot;launchpad:resources/install.crx3/15/oak-solr-osgi-1.0.0.jar&quot;, which is perfect.&lt;/p&gt;

&lt;p&gt;Now I upgraded Oak to version 1.0.13 by putting the bundles inside /libs/system/install. The OSGI Webconsole displays for my bundle oak-solr-osgi the version 1.0.13, but still shows as Bundle location the string &quot;launchpad:resources/install.crx3/15/oak-solr-osgi-1.0.0.jar&quot;.&lt;/p&gt;

&lt;p&gt;But this isn&apos;t true for all bundles. For example I deployed the bundle oak-mk in version 1.0.13 in the very same way as the oak-solr-osgi bundle, but there the bundle location is updated and displays &quot;jcrinstall:/libs/system/install.crx3/oak-mk-1.0.13.jar&quot;, which is correct.&lt;/p&gt;

&lt;p&gt;So the update process seems to work to reliably. I&apos;ve seen this behaviour not only for mixed installers, but also with jcrinstaller only.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12832654">SLING-4747</key>
            <summary>Installer does not consistently update bundle location in Webconsole</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="joerghoh">Joerg Hoh</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 May 2015 07:45:34 +0000</created>
                <updated>Tue, 8 Feb 2022 09:24:15 +0000</updated>
                            <resolved>Tue, 26 May 2015 14:40:31 +0000</resolved>
                                    <version>File Installer 1.0.4</version>
                                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14559192" author="cziegeler" created="Tue, 26 May 2015 14:40:17 +0000"  >&lt;p&gt;The location string is the first location when the bundle gets installed, it does not change through an update (please see the framework spec for this). If it changes, this means the bundle is removed and the new version is installed fresh&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13272503">SLING-8877</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f6tz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4746] Installer does not consistently update bundle location in Webconsole</title>
                <link>https://issues.apache.org/jira/browse/SLING-4746</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I have a sling-based application using Apache Oak as content repository. I started with Oak being part of the Launchpad, so I had for example a bundle &quot;org.apache.jackrabbit.oak-solr-osgi&quot; in version 1.0. The OSGI Webconsole displayed as bundle location &quot;launchpad:resources/install.crx3/15/oak-solr-osgi-1.0.0.jar&quot;, which is perfect.&lt;/p&gt;

&lt;p&gt;Now I upgraded Oak to version 1.0.13 by putting the bundles inside /libs/system/install. The OSGI Webconsole displays for my bundle oak-solr-osgi the version 1.0.13, but still shows as Bundle location the string &quot;launchpad:resources/install.crx3/15/oak-solr-osgi-1.0.0.jar&quot;.&lt;/p&gt;

&lt;p&gt;But this isn&apos;t true for all bundles. For example I deployed the bundle oak-mk in version 1.0.13 in the very same way as the oak-solr-osgi bundle, but there the bundle location is updated and displays &quot;jcrinstall:/libs/system/install.crx3/oak-mk-1.0.13.jar&quot;, which is correct.&lt;/p&gt;

&lt;p&gt;So the update process seems to work to reliably. I&apos;ve seen this behaviour not only for mixed installers, but also with jcrinstaller only.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12832647">SLING-4746</key>
            <summary>Installer does not consistently update bundle location in Webconsole</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="joerghoh">Joerg Hoh</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 May 2015 07:25:24 +0000</created>
                <updated>Tue, 8 Feb 2022 09:24:25 +0000</updated>
                            <resolved>Fri, 7 Oct 2016 07:47:01 +0000</resolved>
                                    <version>File Installer 1.0.4</version>
                                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15554429" author="cziegeler" created="Fri, 7 Oct 2016 07:47:01 +0000"  >&lt;p&gt;Bundle location is not updated when a bundle is updated (this is according to the spec).&lt;br/&gt;
It really depends if the remove/add of a bundle is reported to the installer in one command. In this case an update is performed, but if its remove first, and then add, the bundle is uninstalled and then installed. Creating a new bundle with a new location.&lt;br/&gt;
This can happen with the jcr installer and package installs for example.&lt;/p&gt;

&lt;p&gt;Therefore I set this to won&apos;t fix. If you think there is still an issue to be fixed in the installer please reopen but also provide a reproducible test scenario&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f6sf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4745] Do not throw an exception if some packages have already be pulled</title>
                <link>https://issues.apache.org/jira/browse/SLING-4745</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Do not throw an exception in SimpleHttpDistributionTransport if some packages have already be pulled.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12832526">SLING-4745</key>
            <summary>Do not throw an exception if some packages have already be pulled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mpetria">Marius Petria</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 May 2015 14:52:34 +0000</created>
                <updated>Wed, 5 Aug 2015 11:25:51 +0000</updated>
                            <resolved>Mon, 25 May 2015 15:07:42 +0000</resolved>
                                    <version>Content Distribution Core 0.1.2</version>
                                    <fixVersion>Content Distribution Core 0.1.4</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14558322" author="mpetria" created="Mon, 25 May 2015 15:07:42 +0000"  >&lt;p&gt;Committed revision 1681592.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f61z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4740] BackgroundHttpServletRequest should remove parameters from its query string</title>
                <link>https://issues.apache.org/jira/browse/SLING-4740</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;BackgroundHttpServletRequest does remove the sling:bg parameter from its internal map of parameters, but if it was provided by a query string it is not removed from that.&lt;/p&gt;

&lt;p&gt;For consistency, the parameter and its value should be removed from the query string as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12832131">SLING-4740</key>
            <summary>BackgroundHttpServletRequest should remove parameters from its query string</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 May 2015 10:56:30 +0000</created>
                <updated>Wed, 20 Sep 2017 13:08:18 +0000</updated>
                            <resolved>Fri, 22 May 2015 11:46:38 +0000</resolved>
                                                    <fixVersion>Background Servlets 1.0.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14556019" author="bdelacretaz" created="Fri, 22 May 2015 11:46:38 +0000"  >&lt;p&gt;Implemented in &lt;a href=&quot;http://svn.apache.org/r1681080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1681080&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f3of:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4731] bgservlet consumes all memory during large uploads in background</title>
                <link>https://issues.apache.org/jira/browse/SLING-4731</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>
&lt;p&gt;When you do an upload of a large file with &quot;sling:bg=true&quot; appended, the BackgroundHttpServletRequest loads the complete inputstream into memory.&lt;/p&gt;

&lt;p&gt;Would it be possible to have something less memory-intensive? Of course a file upload in the background is questionable ...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;21.05.2015 10:59:53.290 *ERROR* [pool-28-thread-7] org.apache.sling.engine.impl.SlingRequestProcessorImpl service: Uncaught Throwable
java.lang.OutOfMemoryError: Java heap space
                at java.lang.&lt;span class=&quot;code-object&quot;&gt;StringBuffer&lt;/span&gt;.ensureCapacityImpl(&lt;span class=&quot;code-object&quot;&gt;StringBuffer&lt;/span&gt;.java:338)
                at java.lang.&lt;span class=&quot;code-object&quot;&gt;StringBuffer&lt;/span&gt;.append(&lt;span class=&quot;code-object&quot;&gt;StringBuffer&lt;/span&gt;.java:131)
                at java.net.URLEncoder.encode(URLEncoder.java:211)
                at org.apache.sling.bgservlets.BackgroundHttpServletRequest.encode(BackgroundHttpServletRequest.java:260)
                at org.apache.sling.bgservlets.BackgroundHttpServletRequest.append(BackgroundHttpServletRequest.java:272)
                at org.apache.sling.bgservlets.BackgroundHttpServletRequest.getInputStream(BackgroundHttpServletRequest.java:283)
                at org.apache.commons.fileupload.servlet.ServletRequestContext.getInputStream(ServletRequestContext.java:112)
                at org.apache.commons.fileupload.FileUploadBase$FileItemIteratorImpl.&amp;lt;init&amp;gt;(FileUploadBase.java:952)
                at org.apache.commons.fileupload.FileUploadBase.getItemIterator(FileUploadBase.java:310)
                at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:334)
                at org.apache.sling.engine.impl.parameters.ParameterSupport.parseMultiPartPost(ParameterSupport.java:349)
                at org.apache.sling.engine.impl.parameters.ParameterSupport.getRequestParameterMapInternal(ParameterSupport.java:279)
                at org.apache.sling.engine.impl.parameters.ParameterSupport.getParameter(ParameterSupport.java:173)
                at org.apache.sling.engine.impl.SlingHttpServletRequestImpl.getParameter(SlingHttpServletRequestImpl.java:142)
                at org.apache.sling.bgservlets.impl.BackgroundServletStarterFilter.doFilter(BackgroundServletStarterFilter.java:105)
                at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:60)
                at com.adobe.cq.social.commons.security.SaferSlingPostServlet.doFilter(SaferSlingPostServlet.java:132)
                at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:60)
                at com.adobe.granite.requests.logging.impl.RequestLoggerImpl.doFilter(RequestLoggerImpl.java:124)
                at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:60)
                at org.apache.sling.engine.impl.SlingRequestProcessorImpl.doProcessRequest(SlingRequestProcessorImpl.java:151)
                at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processRequest(SlingRequestProcessorImpl.java:247)
                at org.apache.sling.bgservlets.impl.BackgroundRequestExecutionJob.run(BackgroundRequestExecutionJob.java:99)
                at org.apache.sling.bgservlets.impl.ExecutionEngineImpl$RunnableWrapper.run(ExecutionEngineImpl.java:87)
                at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:906)
                at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:929)
                at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:761)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12831688">SLING-4731</key>
            <summary>bgservlet consumes all memory during large uploads in background</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="joerghoh">Joerg Hoh</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 May 2015 10:30:19 +0000</created>
                <updated>Mon, 7 Feb 2022 11:07:47 +0000</updated>
                            <resolved>Mon, 7 Feb 2022 11:07:43 +0000</resolved>
                                    <version>Background Servlets 1.0.0</version>
                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14554127" author="bdelacretaz" created="Thu, 21 May 2015 11:22:11 +0000"  >&lt;p&gt;Uploading in the background is questionable indeed, would we have a way to block such operations?&lt;/p&gt;</comment>
                            <comment id="14554193" author="joerghoh" created="Thu, 21 May 2015 12:19:28 +0000"  >&lt;p&gt;Well, we will change the usage of background threads on our side, as it is a bad idea anyway.&lt;/p&gt;

&lt;p&gt;But if we consider more &quot;legitimate&quot; POST requests, a body can there be large as well, and requesting a large chunk continued memory can be a problem, depending on the fragmentation of the heap.&lt;br/&gt;
Maybe we can &quot;offload&quot; the input stream to disk if it&apos;s larger than 1 megabyte?&lt;/p&gt;</comment>
                            <comment id="17488041" author="joerghoh" created="Mon, 7 Feb 2022 11:07:43 +0000"  >&lt;p&gt;bgservlets are no longer maintained&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f1hb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4730] Update to Jackrabbit 2.10.1</title>
                <link>https://issues.apache.org/jira/browse/SLING-4730</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Filing as an issue to not lose track of this. &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-3883&quot; title=&quot;Jackrabbit WebDAV bundle susceptible to XXE/XEE attack (CVE-2015-1833)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCR-3883&quot;&gt;&lt;del&gt;JCR-3883&lt;/del&gt;&lt;/a&gt; describes a security flaw in the jackrabbit-webdav module, and we should upgrade to 2.10.1 as soon as it is released.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12831667">SLING-4730</key>
            <summary>Update to Jackrabbit 2.10.1</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 May 2015 09:17:16 +0000</created>
                <updated>Mon, 17 Aug 2015 07:07:57 +0000</updated>
                            <resolved>Thu, 21 May 2015 09:40:49 +0000</resolved>
                                    <version>Launchpad Builder 7</version>
                    <version>JCR Jackrabbit Server 2.2.0</version>
                                    <fixVersion>JCR Jackrabbit Server 2.3.0</fixVersion>
                    <fixVersion>Launchpad Builder 8</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f1cn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-4724] Mock OSGI service does not work without bind and unbind methods.</title>
                <link>https://issues.apache.org/jira/browse/SLING-4724</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When making a junit test using the org.apache.sling.testing.osgi-mock library, the osgi context will not start up (MockOsgi.injectServices(service, bundleContext) when a service which is @Reference&apos;ed does not have a bind and unbind method. The following error is thrown:&lt;/p&gt;

&lt;p&gt;java.lang.RuntimeException: Bind method with name bindSecondService not found for reference &apos;secondService&apos; for class {}some.packagename.FirstService&lt;br/&gt;
at org.apache.sling.testing.mock.osgi.ReflectionServiceUtil.injectServiceReference(ReflectionServiceUtil.java:351)&lt;br/&gt;
	at org.apache.sling.testing.mock.osgi.ReflectionServiceUtil.injectServices(ReflectionServiceUtil.java:278)&lt;br/&gt;
	at org.apache.sling.testing.mock.osgi.MockOsgi.injectServices(MockOsgi.java:114)&lt;br/&gt;
	at some.packagename.FirstServiceTest.before(FirstServiceTest.java:42)&lt;/p&gt;

&lt;p&gt;Seeing as sling works without the bind methods, this looks to me like an error which should not happen and a default bind method should be used?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12830924">SLING-4724</key>
            <summary>Mock OSGI service does not work without bind and unbind methods.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="royteeuwen">Roy Teeuwen</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Tue, 19 May 2015 06:39:39 +0000</created>
                <updated>Thu, 14 Mar 2019 13:14:30 +0000</updated>
                            <resolved>Mon, 7 Sep 2015 21:25:11 +0000</resolved>
                                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14553770" author="sseifert@pro-vision.de" created="Thu, 21 May 2015 07:16:37 +0000"  >&lt;p&gt;can you provide a unit test or test project to reproduce the failure?&lt;/p&gt;</comment>
                            <comment id="14553864" author="royteeuwen" created="Thu, 21 May 2015 08:22:00 +0000"  >&lt;p&gt;Hmm, it seems to be an intellij problem. I created a test project to reproduce the failure, but when I finished the test project and deleted the *.iml files and .idea files and cleared the cache, the problem does not occur anymore... (The problem happens when using the built in Run/Debug of Intellij on unit tests). Any idea why maybe?&lt;/p&gt;</comment>
                            <comment id="14553870" author="sseifert@pro-vision.de" created="Thu, 21 May 2015 08:26:22 +0000"  >&lt;p&gt;see the very last sentence on &lt;a href=&quot;http://sling.apache.org/documentation/development/osgi-mock.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/development/osgi-mock.html&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The injectServices, activate and deactivate Methods can only work properly when the SCR XML metadata files are preset in the classpath at /OSGI-INF. They are generated automatically by the Maven SCR plugin, but might be missing if your clean and build the project within your IDE (e.g. Eclipse). In this case you have to compile the project again with maven and can run the tests - or use a Maven IDE Integration like m2eclipse.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;when you compile OSGi services with SCR metdata within you IDE you have to make sure the plugins defined in the POM are executed as well esp. the SCR plugin. this works in eclipse with m2e plugin.&lt;/p&gt;

&lt;p&gt;i&apos;ve no experience with intellij - if you find a solution i can add them to the documentation.&lt;/p&gt;</comment>
                            <comment id="16792632" author="danon" created="Thu, 14 Mar 2019 13:14:30 +0000"  >&lt;p&gt;There is a solution for running tests from IntelliJ (works only from maven 3.3.1):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;In jUnit &quot;Edit configurations...&quot; in IntelliJ:&lt;/li&gt;
	&lt;li&gt;Before launch: Build, MavenGoal Activate tool window&lt;/li&gt;
	&lt;li&gt;Click &quot;+&quot;&lt;/li&gt;
	&lt;li&gt;Chose &quot;Run Maven Goal&quot;&lt;/li&gt;
	&lt;li&gt;And in command line type &quot;scr:scr&quot; (&quot;scr&quot; is plugin name and &quot;scr&quot; is goal name)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Works for me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ewtz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>