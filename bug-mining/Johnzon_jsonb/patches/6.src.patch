diff --git a/johnzon-jsonb/src/main/java/org/apache/johnzon/jsonb/JohnzonBuilder.java b/johnzon-jsonb/src/main/java/org/apache/johnzon/jsonb/JohnzonBuilder.java
index da23f6a7..673877a2 100644
--- a/johnzon-jsonb/src/main/java/org/apache/johnzon/jsonb/JohnzonBuilder.java
+++ b/johnzon-jsonb/src/main/java/org/apache/johnzon/jsonb/JohnzonBuilder.java
@@ -307,7 +307,7 @@ public class JohnzonBuilder implements JsonbBuilder {
             });
         });
 
-        final boolean useCdi = cdiIntegration != null && cdiIntegration.isCanWrite();
+        final boolean useCdi = cdiIntegration != null && cdiIntegration.isCanWrite() && config.getProperty("johnzon.cdi.activated").map(Boolean.class::cast).orElse(Boolean.TRUE);
         final Mapper mapper = builder.addCloseable(accessMode).build();
 
         return useCdi ? new JohnsonJsonb(mapper) {
diff --git a/johnzon-jsonb/src/main/java/org/apache/johnzon/jsonb/cdi/JohnzonCdiExtension.java b/johnzon-jsonb/src/main/java/org/apache/johnzon/jsonb/cdi/JohnzonCdiExtension.java
index d9256597..17dae3cb 100644
--- a/johnzon-jsonb/src/main/java/org/apache/johnzon/jsonb/cdi/JohnzonCdiExtension.java
+++ b/johnzon-jsonb/src/main/java/org/apache/johnzon/jsonb/cdi/JohnzonCdiExtension.java
@@ -69,7 +69,7 @@ public class JohnzonCdiExtension implements Extension {
 
     void cleanUp(@Observes final BeforeShutdown beforeShutdown) {
         canWrite = false;
-        jsonbs.forEach(this::untrack);
+        new ArrayList<>(jsonbs).forEach(this::untrack);
         jsonbs.clear();
     }
 }
