diff --git a/src/native/unix/native/dso.h b/src/native/unix/native/dso.h
index 6fb8662..f75a133 100644
--- a/src/native/unix/native/dso.h
+++ b/src/native/unix/native/dso.h
@@ -20,7 +20,7 @@
 /**
  * A library handle represents a unique pointer to its location in memory.
  */
-#ifdef OS_DARWIN
+#ifdef DSO_DYLD
 #include <mach-o/dyld.h>
 #endif
 typedef void *dso_handle;
diff --git a/src/native/unix/support/apsupport.m4 b/src/native/unix/support/apsupport.m4
index 4a38de7..aee3322 100644
--- a/src/native/unix/support/apsupport.m4
+++ b/src/native/unix/support/apsupport.m4
@@ -25,7 +25,7 @@ AC_DEFUN(AP_SUPPORTED_HOST,[
 
   case $host_os in
   darwin*)
-    CFLAGS="$CFLAGS -DOS_DARWIN -DDSO_DYLD"
+    CFLAGS="$CFLAGS -DOS_DARWIN -DDSO_DLFCN"
     supported_os="darwin"
     ;;
   solaris*)
