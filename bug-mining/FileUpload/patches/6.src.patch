diff --git a/pom.xml b/pom.xml
index e4f36bf4..2413891e 100644
--- a/pom.xml
+++ b/pom.xml
@@ -160,7 +160,7 @@
     <dependency>
       <groupId>javax.servlet</groupId>
       <artifactId>servlet-api</artifactId>
-      <version>2.3</version>
+      <version>2.4</version>
       <scope>provided</scope>
     </dependency>
     <dependency>
diff --git a/project.xml b/project.xml
index 221ce0e4..46d1d5d0 100644
--- a/project.xml
+++ b/project.xml
@@ -180,7 +180,7 @@
     <dependency>
       <groupId>javax.servlet</groupId>
       <artifactId>servlet-api</artifactId>
-      <version>2.3</version>
+      <version>2.4</version>
       <url>http://java.sun.com/products/servlet/</url>
       <properties>
         <scope>provided</scope>
diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index 082c64b0..8021f05f 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -46,6 +46,11 @@ The <action> type attribute can be add,update,fix,remove.
         Upgrade to commons-io-1.4-SNAPSHOT, in order to use the new
         FileCleaningTracker and fix issues with FileCleaner.
       </action>
+      <action dev="jochen" type="fix" issue="FILEUPLOAD-129">
+        Made the MockHttpServletRequest comply to the servlet 2.4 specification
+        by applying
+        http://www.sourcelabs.com/dashboards/sash-1.2/patches/commons-fileupload-1.1-1/SUP-520.diff
+      </action>
     </release>
 
 	<release version="1.2" date="2007-02-13">
diff --git a/src/test/org/apache/commons/fileupload/MockHttpServletRequest.java b/src/test/org/apache/commons/fileupload/MockHttpServletRequest.java
index 8ffe2720..f142d962 100644
--- a/src/test/org/apache/commons/fileupload/MockHttpServletRequest.java
+++ b/src/test/org/apache/commons/fileupload/MockHttpServletRequest.java
@@ -402,6 +402,14 @@ class MockHttpServletRequest implements HttpServletRequest
 	}
 
 	/**
+	 * @see javax.servlet.ServletRequest#getLocalName()
+	 */
+	public String getLocalName()
+	{
+	    return null;
+	}
+
+    /**
 	 * @see javax.servlet.ServletRequest#getServerPort()
 	 */
 	public int getServerPort()
@@ -410,6 +418,22 @@ class MockHttpServletRequest implements HttpServletRequest
 	}
 
 	/**
+	 * @see javax.servlet.ServletRequest#getLocalPort()
+	 */
+	public int getLocalPort()
+	{
+	    return 0;
+	}
+
+	/**
+	 * @see javax.servlet.ServletRequest#getRemotePort()
+	 */
+	public int getRemotePort()
+	{
+	    return 0;
+	}
+
+    /**
 	 * @see javax.servlet.ServletRequest#getReader()
 	 */
 	public BufferedReader getReader() throws IOException
@@ -426,6 +450,14 @@ class MockHttpServletRequest implements HttpServletRequest
 	}
 
 	/**
+	 * @see javax.servlet.ServletRequest#getLocalAddr()
+	 */
+	public String getLocalAddr()
+	{
+	    return null;
+	}
+
+    /**
 	 * @see javax.servlet.ServletRequest#getRemoteHost()
 	 */
 	public String getRemoteHost()
