<!--
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Thu Oct 23 09:38:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+%22SLING%22+AND+issuetype+%3D+Bug+ORDER+BY+key+DESC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="2000" end="2200" total="4707"/>
                <build-info>
            <version>8.20.10</version>
            <build-number>820010</build-number>
            <build-date>22-06-2022</build-date>
        </build-info>

<item>
            <title>[SLING-6344] Support filter.xmls being generated by the content-package-maven-plugin</title>
                <link>https://issues.apache.org/jira/browse/SLING-6344</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The content-package-maven plugin can not only consume a filter.xml from the source directory, but also generate or merge filter.xmls. Therefore Sling IDE should consider only the filter.xml in the generated artifacts (package). The problem with that is, that content-package-maven-plugin does only generate that filter.xml when it generates the real package.&lt;/p&gt;

&lt;p&gt;There is one other related issue: In case a filter file is not found, the method &lt;tt&gt;ResourceChangeCommandFactory#getFilterResult&lt;/tt&gt; returns &lt;tt&gt;ALLOW&lt;/tt&gt; while it should return &lt;tt&gt;DENY&lt;/tt&gt; to not overwrite any nodes in case the filter rules could not be determined.&lt;/p&gt;

&lt;p&gt;In my case those two problems lead to a modification of the jcr:primaryType of the root node in the JCR from &lt;tt&gt;rep:root&lt;/tt&gt; to &lt;tt&gt;nt:unstructured&lt;/tt&gt; and the resourceType from &lt;tt&gt;sling:redirect&lt;/tt&gt; to just being removed which breaks the redirect handling.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13024386">SLING-6344</key>
            <summary>Support filter.xmls being generated by the content-package-maven-plugin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Nov 2016 10:33:27 +0000</created>
                <updated>Fri, 11 Apr 2025 14:30:45 +0000</updated>
                                            <version>Sling Eclipse IDE 1.1.0</version>
                                    <fixVersion>Sling Eclipse IDE 1.3.2</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15708943" author="kwin" created="Wed, 30 Nov 2016 15:56:51 +0000"  >&lt;p&gt;The patch attached at &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12841070/12841070_SLING-6344-v02.patch&quot; title=&quot;SLING-6344-v02.patch attached to SLING-6344&quot;&gt;SLING-6344-v02.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; does no longer silently accept modules for which no suitable filter can be found.&lt;br/&gt;
Alternatively  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12841068/12841068_SLING-6344-v01.patch&quot; title=&quot;SLING-6344-v01.patch attached to SLING-6344&quot;&gt;SLING-6344-v01.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; would fix this in a different way (without relying on exceptions) by just denying any content updates for any modules without a filter.&lt;br/&gt;
I like the approach in &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12841070/12841070_SLING-6344-v02.patch&quot; title=&quot;SLING-6344-v02.patch attached to SLING-6344&quot;&gt;SLING-6344-v02.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; much better because that also exposes some error to the user. &lt;br/&gt;
Both patches do not yet support filter.xmls being generated by the content-package-maven-plugin but they at least prevent nodes from getting overwritten in case no filter was found which is crucial.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; WDYT?&lt;/p&gt;</comment>
                            <comment id="15708972" author="kwin" created="Wed, 30 Nov 2016 16:07:20 +0000"  >&lt;p&gt;Since the &lt;tt&gt;content-package-maven-plugin&lt;/tt&gt; generates the final filter.xml as well as the ZIP artifact in the same goal (even in the same method) there is no easy way to leverage the functionality for the filter generation in the Sling IDE. The possible solutions which come to my mind are&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Adobe would properly split up filter.xml generation and generation of the final package into two different goals (the former bound to &lt;tt&gt;process-resources&lt;/tt&gt; phase the latter to &lt;tt&gt;package&lt;/tt&gt; phase) in the content-package-maven-plugin and make the first goal m2e compliant (i.e. support incremental builds)&lt;/li&gt;
	&lt;li&gt;Sling IDE would just copy the according code from content-package-maven-plugin to generate the filter.xml&lt;br/&gt;
Though 1 is the much cleaner solution it is IMHO less likely to happen soon, so we probably have to stick to solution 2.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="15711403" author="kwin" created="Thu, 1 Dec 2016 09:03:40 +0000"  >&lt;p&gt;Can someone help me to clarify the licensing issue we might run into here?&lt;br/&gt;
AFAIK we are not allowed to include any non-open source code in any Apache artifacts.&lt;br/&gt;
What about reverse engineering functionality being provided by external closed source tools?&lt;br/&gt;
In this case the functionality which generates/merges filter.xmls?&lt;/p&gt;

&lt;p&gt;Of course the cleanest approach would be if the `content-package-maven-plugin` would be finally open sourced, as being promised in &lt;a href=&quot;http://apache-sling.73963.n3.nabble.com/content-package-maven-plugin-and-tooling-around-it-td4028573.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-sling.73963.n3.nabble.com/content-package-maven-plugin-and-tooling-around-it-td4028573.html&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15711458" author="kwin" created="Thu, 1 Dec 2016 09:30:05 +0000"  >&lt;p&gt;The patch in v03 refactored the FilterLocator service a bit and removed some no longer relevant methods. This patch relies on exceptions whenever filters could not be extracted from a project.&lt;/p&gt;</comment>
                            <comment id="15779043" author="royteeuwen" created="Mon, 26 Dec 2016 21:52:47 +0000"  >&lt;p&gt;Seems hard to get a response on this, would love to see this too. &lt;/p&gt;</comment>
                            <comment id="15785582" author="kwin" created="Thu, 29 Dec 2016 16:03:44 +0000"  >&lt;p&gt;Applied patch v03 in &lt;a href=&quot;https://svn.apache.org/r1776444&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1776444&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15793452" author="kwin" created="Mon, 2 Jan 2017 20:30:19 +0000"  >&lt;p&gt;Reverted commit r1776444 in &lt;a href=&quot;https://svn.apache.org/r1776987&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1776987&lt;/a&gt; until the necessary semantics of the FilterLocator service and usage of null annotations in Sling IDE is clarified.&lt;/p&gt;</comment>
                            <comment id="15814800" author="rombert" created="Tue, 10 Jan 2017 12:07:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can someone help me to clarify the licensing issue we might run into here?&lt;br/&gt;
AFAIK we are not allowed to include any non-open source code in any Apache artifacts.&lt;br/&gt;
What about reverse engineering functionality being provided by external closed source tools?&lt;br/&gt;
In this case the functionality which generates/merges filter.xmls?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is probably best discussed on the dev mailing list, I don&apos;t think all the devs are following this issue. TBH my hope would be towards creating our own open source content-package plugin, see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6195&quot; title=&quot;Initial release of the Content-Package Maven Plugin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6195&quot;&gt;&lt;del&gt;SLING-6195&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15814804" author="rombert" created="Tue, 10 Jan 2017 12:08:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - your changes seem to add an import to &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+ org.eclipse.core.resources,
+ org.eclipse.jdt.annotation&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to the API project, and that&apos;s not good for our goal of keeping some parts IDE independent.&lt;/p&gt;</comment>
                            <comment id="15814940" author="kwin" created="Tue, 10 Jan 2017 13:14:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Ok, I see. Since I reverted the patch anyhow for other issues that should currently be no longer an issue. Before I come up with a new patch I would like to get your opinion also on the general semantics that no import/export should take place for nodes in a project not having a filter.xml. Currently at least the &lt;tt&gt;o.a.s.ide.eclipse.ui.internal.ExportWizardPage&lt;/tt&gt; and &lt;tt&gt;ImportWizardPage&lt;/tt&gt; assume that in such a case everything is imported/exported (and some ITs also rely on that behaviour). If I change the semantics I would need to change those places as well. WDYT?&lt;/p&gt;</comment>
                            <comment id="15815284" author="rombert" created="Tue, 10 Jan 2017 15:28:49 +0000"  >&lt;p&gt;I think it&apos;s fine to require a filter.xml at all times. There is no reason to support a missing filter.xml scenario except some developer convenience and I assume all real-world projects have a filter.xml defined anyway.&lt;/p&gt;</comment>
                            <comment id="15815331" author="kwin" created="Tue, 10 Jan 2017 15:46:01 +0000"  >&lt;p&gt;Ok, I just want to point out that I would need to change the import/export wizard to clarify that then. And in fact I know several projects leveraging the content-package-maven-plugin feature to generate the filter.xml which would then prevent to use syncing/import/export (unless we would be able to detect that as well). Since I don&apos;t have a proper solution for supporting the generated filter.xmls of that plugin, I would go forward with just proposing a patch which prevents any content without a proper filter.xml to be imported/exported.&lt;/p&gt;</comment>
                            <comment id="15815374" author="rombert" created="Tue, 10 Jan 2017 16:07:18 +0000"  >&lt;p&gt;If we can&apos;t support generated filter.xml files, what would be the gain then? Export/Import would not work but syncing would which is incosistent IMO. I would prefer that we do this for all situations.&lt;/p&gt;</comment>
                            <comment id="15815644" author="kwin" created="Tue, 10 Jan 2017 17:49:51 +0000"  >&lt;p&gt;Yes, I agree. IMHO we should disable a) syncing b) explicit import and c) explicit export. At least a) causes right now problems by destroying content (see the original description of the issue). And since we want to handle all three use cases with the same underlying filter concept we just prevent all. &lt;/p&gt;

&lt;p&gt;So the first fix should would in case of a generated filter.xml prevent content from being destroyed (by disabling sync/import and export alltogether).&lt;/p&gt;

&lt;p&gt;As a second step we could look into supporting generated filter.xmls better.&lt;/p&gt;</comment>
                            <comment id="15815746" author="rombert" created="Tue, 10 Jan 2017 18:25:57 +0000"  >&lt;p&gt;Sounds like a good first step to me.&lt;/p&gt;</comment>
                            <comment id="15818619" author="kwin" created="Wed, 11 Jan 2017 15:28:39 +0000"  >&lt;p&gt;Let&apos;s track that first step in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6453&quot; title=&quot;In case no filter.xml could be found nothing should be synchronized&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6453&quot;&gt;&lt;del&gt;SLING-6453&lt;/del&gt;&lt;/a&gt; and use this ticket for the next step to really support filter.xmls being generated by the Maven plugin.&lt;/p&gt;</comment>
                            <comment id="16605818" author="kwin" created="Thu, 6 Sep 2018 13:58:05 +0000"  >&lt;p&gt;Since version 1.0.3 the filevault-package-maven-plugin (&lt;a href=&quot;http://jackrabbit.apache.org/filevault-package-maven-plugin/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jackrabbit.apache.org/filevault-package-maven-plugin/index.html&lt;/a&gt;) supports generating filter.xml out of plugin configuration in a dedicated step (which is also executed via m2e within Eclipse). That makes it possible to leverage the generated &lt;tt&gt;filter.xml&lt;/tt&gt; also in the Sling IDE. I need to check what needs to be changed in the Sling IDE sources to properly support generated &lt;tt&gt;filter.xml&lt;/tt&gt; files.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13121662">JCRVLT-246</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13183396">SLING-7883</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12748545">SLING-4069</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13008857">SLING-6081</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13033754">SLING-6453</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13079192">SLING-6950</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12841068" name="SLING-6344-v01.patch" size="1228" author="kwin" created="Wed, 30 Nov 2016 15:56:51 +0000"/>
                            <attachment id="12841070" name="SLING-6344-v02.patch" size="3987" author="kwin" created="Wed, 30 Nov 2016 16:01:33 +0000"/>
                            <attachment id="12841253" name="SLING-6344-v03.patch" size="13326" author="kwin" created="Thu, 1 Dec 2016 09:33:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0klu7:w</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6343] Sling IDE: Publishing failures do no report the correct synchronization state of the module</title>
                <link>https://issues.apache.org/jira/browse/SLING-6343</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;After a clean/republish from scratch which fails (e.g. with an error like described in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6342&quot; title=&quot;Sling IDE: Better deal with reconfigurations of the sling repository service&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6342&quot;&gt;SLING-6342&lt;/a&gt;) the synchronization status of all modules are marked as &quot;Synchronized&quot; although this is clearly not reflecting reality.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13024365">SLING-6343</key>
            <summary>Sling IDE: Publishing failures do no report the correct synchronization state of the module</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Nov 2016 09:26:53 +0000</created>
                <updated>Sun, 21 Jan 2018 20:23:33 +0000</updated>
                            <resolved>Wed, 30 Nov 2016 09:36:24 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.1.0</version>
                                    <fixVersion>Sling Eclipse IDE 1.2.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15708060" author="kwin" created="Wed, 30 Nov 2016 09:36:24 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1772006&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1772006&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36yav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6342] Sling IDE: Better deal with reconfigurations of the sling repository service</title>
                <link>https://issues.apache.org/jira/browse/SLING-6342</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In some cases, e.g. deployment of a configuration for PID &lt;tt&gt;org.apache.sling.jcr.resource.internal.JcrResourceResolverFactoryImpl&lt;/tt&gt; the sling repository service is restarted in the background which leads to temporary failures during publishing like this &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Failed publishing path=/content, result=JcrResult[ success:&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, exception: org.apache.sling.ide.transport.RepositoryException - javax.jcr.RepositoryException: AuthenticationSupport service missing. Cannot authenticate request.]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The publish client code should check in advance if the relevant bundles/services are running.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13024362">SLING-6342</key>
            <summary>Sling IDE: Better deal with reconfigurations of the sling repository service</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Nov 2016 09:12:50 +0000</created>
                <updated>Fri, 11 Apr 2025 14:30:42 +0000</updated>
                                            <version>Sling Eclipse IDE 1.1.0</version>
                                    <fixVersion>Sling Eclipse IDE 1.3.2</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15724976" author="rombert" created="Tue, 6 Dec 2016 09:51:18 +0000"  >&lt;p&gt;I am not sure this happens very often, but maybe we can detect from the response that the repository is starting up and simply wait.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36ya7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6341] ResourcePath injector does not correctly wraps to array</title>
                <link>https://issues.apache.org/jira/browse/SLING-6341</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In a sling model, when injecting resources from the resourcePath injector, if you declare the injected field as an array, the injection will fail.&lt;/p&gt;

&lt;p&gt;Injection works fine if you declare the field as a list.&lt;/p&gt;


&lt;p&gt;to verify.&lt;/p&gt;

&lt;p&gt;Have a resource which holds a property with a path to other resource.&lt;br/&gt;
Have the following injection:&lt;/p&gt;


&lt;p&gt;	@ResourcePath(path = &quot;/content/test/node&quot;)&lt;br/&gt;
	private Resource[] pathProperty;&lt;/p&gt;


&lt;p&gt;I get the following:&lt;/p&gt;

&lt;p&gt;org.apache.sling.models.factory.ModelClassException: Could not adapt from class org.apache.sling.jcr.resource.internal.helper.jcr.JcrNodeResource to class [Lorg.apache.sling.api.resource.Resource;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13024141">SLING-6341</key>
            <summary>ResourcePath injector does not correctly wraps to array</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="santiagozky">Santiago Garc&#237;a Pimentel</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Nov 2016 16:48:09 +0000</created>
                <updated>Wed, 30 Nov 2016 20:40:12 +0000</updated>
                            <resolved>Wed, 30 Nov 2016 17:47:58 +0000</resolved>
                                    <version>Sling Models Impl 1.2.2</version>
                                    <fixVersion>Sling Models Impl 1.3.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15705902" author="santiagozky" created="Tue, 29 Nov 2016 17:18:05 +0000"  >&lt;p&gt;A potential fix &lt;a href=&quot;https://github.com/apache/sling/pull/186&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/186&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15705906" author="santiagozky" created="Tue, 29 Nov 2016 17:19:12 +0000"  >&lt;p&gt;the docs at &lt;a href=&quot;http://sling.apache.org/documentation/bundles/models.html#available-injectors&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/bundles/models.html#available-injectors&lt;/a&gt;&lt;br/&gt;
list the injector as supporting arrays, so this is clearly a bug.&lt;/p&gt;</comment>
                            <comment id="15709243" author="justinedelson" created="Wed, 30 Nov 2016 17:47:59 +0000"  >&lt;p&gt;patch applied (with whitespace changes removed) in r 1772094 &lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="15709711" author="santiagozky" created="Wed, 30 Nov 2016 20:40:12 +0000"  >&lt;p&gt;thanks to you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36wx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6337] Fix default folder name regular expression</title>
                <link>https://issues.apache.org/jira/browse/SLING-6337</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;brackets got lost, regular expression has to be &lt;tt&gt;.*/(install|config)$&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13023808">SLING-6337</key>
            <summary>Fix default folder name regular expression</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Nov 2016 18:09:03 +0000</created>
                <updated>Wed, 21 Dec 2016 11:02:28 +0000</updated>
                            <resolved>Mon, 28 Nov 2016 18:24:28 +0000</resolved>
                                    <version>JCR Installer 3.1.18</version>
                                    <fixVersion>JCR Installer 3.1.22</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15702710" author="olli" created="Mon, 28 Nov 2016 18:24:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1771785&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1771785&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15702954" author="rombert" created="Mon, 28 Nov 2016 19:58:00 +0000"  >&lt;p&gt;Thanks for the fix &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;. Note that since the vote for 3.1.20 is underway and will be cancelled I moved the issue to 3.1.22&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12939091">SLING-5519</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36uv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6332] Configurations with same PID but different features/run modes in provisioning model are ignored </title>
                <link>https://issues.apache.org/jira/browse/SLING-6332</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I have the following scenario:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;launchpad/builder&lt;/tt&gt; defines an OSGi config for &lt;tt&gt;org.apache.sling.jcr.base.internal.LoginAdminWhitelist&lt;/tt&gt;, setting the &lt;tt&gt;whitelist.bundles.additional&lt;/tt&gt; property&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;launchpad/testing&lt;/tt&gt; depends on &lt;tt&gt;launchpad/builder&lt;/tt&gt; and defines an the same config with &lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;mode=merge&amp;#93;&lt;/span&gt;&lt;/tt&gt; and sets the &lt;tt&gt;whitelist.bundles.regexp&lt;/tt&gt; property&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;When building &lt;tt&gt;launchpad/testing&lt;/tt&gt;, the configuration from this project is ignored completely and the one from &lt;tt&gt;launchpad/builder&lt;/tt&gt; is picked up.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13023405">SLING-6332</key>
            <summary>Configurations with same PID but different features/run modes in provisioning model are ignored </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Nov 2016 13:55:13 +0000</created>
                <updated>Thu, 28 Sep 2023 14:16:38 +0000</updated>
                            <resolved>Thu, 28 Sep 2023 14:16:38 +0000</resolved>
                                                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15695926" author="rombert" created="Fri, 25 Nov 2016 13:58:27 +0000"  >&lt;p&gt;I&apos;ve tried to debug with no luck. It seems that configurations should be merged properly at the model level, since there are working tests for it. I think the issue is at the Maven plug-in level. I&apos;ve also attached a patchset to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6330&quot; title=&quot;Replace Sling Explorer with Composum&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6330&quot;&gt;&lt;del&gt;SLING-6330&lt;/del&gt;&lt;/a&gt; which applies on Sling trunk and reproduces the issue.&lt;/p&gt;</comment>
                            <comment id="15695974" author="bdelacretaz" created="Fri, 25 Nov 2016 14:26:42 +0000"  >&lt;p&gt;I think the &lt;tt&gt;target/slingstart.txt&lt;/tt&gt; file should contain the result of the merge, and that&apos;s what&apos;s included in the launchpad jar AFAIK - maybe that helps troubleshooting.&lt;/p&gt;</comment>
                            <comment id="15695992" author="rombert" created="Fri, 25 Nov 2016 14:36:34 +0000"  >&lt;p&gt;That&apos;s a good point. in slingstart.txt both configurations are defined, but one is under the sling feature, while another is under the launchpad-testing feature. Moving both to the same feature makes the configuration merge properly.&lt;/p&gt;</comment>
                            <comment id="15696000" author="rombert" created="Fri, 25 Nov 2016 14:38:42 +0000"  >&lt;p&gt;I&apos;ve updated the title to reflect the current situation - when configurations with identical PIDs are defined in different run modes one is kept and the others are silently discarded.&lt;/p&gt;</comment>
                            <comment id="15696009" author="bdelacretaz" created="Fri, 25 Nov 2016 14:41:31 +0000"  >&lt;p&gt;I had another go at the title, feel free to tweak if needed&lt;/p&gt;</comment>
                            <comment id="15696018" author="rombert" created="Fri, 25 Nov 2016 14:46:03 +0000"  >&lt;p&gt;Your title looks better, I think Jira needs some optimistic concurrency control ( as opposed to no concurrency control &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; )&lt;/p&gt;</comment>
                            <comment id="15741870" author="cziegeler" created="Mon, 12 Dec 2016 13:21:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; I assume the resulting model still contains both configurations - it&apos;s just that at run time one wins, right? I think this is the intended behaviour&lt;/p&gt;</comment>
                            <comment id="15741878" author="rombert" created="Mon, 12 Dec 2016 13:23:44 +0000"  >&lt;p&gt;Yes, both configurations are contained in the resulting model. Not sure how they are interpreted at runtime, but under which circumstances would this behaviour be useful?&lt;/p&gt;</comment>
                            <comment id="15741887" author="cziegeler" created="Mon, 12 Dec 2016 13:28:13 +0000"  >&lt;p&gt;A feature is a single deployment unit - I think we made the initial mistake to allow several features in a single file - but that&apos;s a different issue.&lt;br/&gt;
So someone deploying a feature has no idea which other features are deployed and in which order, so merged configurations is not really going to fly across features.&lt;/p&gt;

&lt;p&gt;For run modes, it&apos;s defined that the most specific run mode wins&lt;/p&gt;</comment>
                            <comment id="15743121" author="rombert" created="Mon, 12 Dec 2016 20:55:50 +0000"  >&lt;p&gt;My expectation - and I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; was also suprised by this - is that config merging &apos;just works&apos;. If you feel strongly that merging configuration is a no-go, let&apos;s at least add a warning that a configuration merge/overwrite is not going to work as expected if we find the same configuration PID ( non-factory ) across different features.&lt;/p&gt;</comment>
                            <comment id="15744335" author="cziegeler" created="Tue, 13 Dec 2016 06:33:00 +0000"  >&lt;p&gt;Well, what does &quot;just works&quot; mean?&lt;br/&gt;
Merging of configurations is there if you have a base feature and want to extend it - that&apos;s exactly the launchpad/testing case. Launchpad defines the base (or application feature), and testing adds additional stuff or adjust configurations etc to a feature.&lt;br/&gt;
Maybe we have to update the documentation and make it clear, that merging only works on a feature base, but other than that I think we should not do anything.&lt;br/&gt;
The same happens for bundles as well, if you have to features with the same bundle, then each feature lists this bundle, there is no merging or removal etc.&lt;/p&gt;</comment>
                            <comment id="15744400" author="cziegeler" created="Tue, 13 Dec 2016 07:06:55 +0000"  >&lt;p&gt;I thought that the slingstart maven plugin is already detecting this situation and issuing an error if a configuration for the same pid is provided more than once (from more than one feature).&lt;br/&gt;
If that is not the case, I totally agree that we should do so and detect/report this at build time&lt;/p&gt;</comment>
                            <comment id="15744624" author="jsedding" created="Tue, 13 Dec 2016 09:07:40 +0000"  >&lt;p&gt;I think the expectation is that we can define multiple features in a single maven module. IIUC different features can be activated using different run-modes.&lt;/p&gt;

&lt;p&gt;The use-case would be to have a &quot;base&quot; feature and then a variation/extension of this feature, without requiring duplication of all the definitions. E.g. a maven module might define a &quot;launchpad&quot; and a &quot;testing&quot; feature. The &quot;testing&quot; feature would inherit all definitions from the &quot;launchpad&quot; feature, but add a configuration property to a configuration and a few bundles to be installed.&lt;/p&gt;

&lt;p&gt;Is that an accurate description of the use-case &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 46 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36sdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6329] RR.isResourceType() broken with jcr.resource 2.8.2</title>
                <link>https://issues.apache.org/jira/browse/SLING-6329</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With &lt;tt&gt;jcr.resource&lt;/tt&gt; 2.8.2, &lt;tt&gt;ResourceResolverFactory.getAdministrativeResourceResolver&lt;/tt&gt; requires the using bundle to be provided via the &lt;tt&gt;authenticationInfo&lt;/tt&gt; map. For creating the internal &lt;tt&gt;resourceTypeResourceResolver&lt;/tt&gt; no bundle is provided and thus the admin RR cannot be created. To make matters worse, the releated &lt;tt&gt;LoginException&lt;/tt&gt; is swollowed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13023375">SLING-6329</key>
            <summary>RR.isResourceType() broken with jcr.resource 2.8.2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Nov 2016 11:45:16 +0000</created>
                <updated>Tue, 6 Dec 2016 08:59:17 +0000</updated>
                            <resolved>Fri, 25 Nov 2016 17:57:59 +0000</resolved>
                                    <version>Resource Resolver 1.5.4</version>
                                    <fixVersion>Resource Resolver 1.5.6</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15695690" author="jsedding" created="Fri, 25 Nov 2016 11:55:49 +0000"  >&lt;p&gt;Proposed patch. Still working on a test case.&lt;/p&gt;</comment>
                            <comment id="15695755" author="bdelacretaz" created="Fri, 25 Nov 2016 12:33:46 +0000"  >&lt;p&gt;IIUC this causes &lt;tt&gt;ResourceResolverControl.getParentResourceType&lt;/tt&gt; to fail silently? That&apos;s quite bad...but it looks like your patch would fix this.&lt;/p&gt;</comment>
                            <comment id="15696401" author="jsedding" created="Fri, 25 Nov 2016 17:59:02 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1771346&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1771346&lt;/a&gt;.&lt;br/&gt;
Added integration test to (oak-server module) in &lt;a href=&quot;https://svn.apache.org/r1771347&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1771347&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12840501" name="SLING-6329-jsedding.patch" size="1938" author="jsedding" created="Fri, 25 Nov 2016 11:55:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36s6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6328] JSP concurrent compiling issue</title>
                <link>https://issues.apache.org/jira/browse/SLING-6328</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;At times JSP fails to compile due to duplicate variable error (Duplicate local variable _jspx_temp0).&lt;/p&gt;

&lt;p&gt;This is suppose to be fixed in jasper (within Tomcat) but not in Sling impl. &lt;br/&gt;
See &lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=45691&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bz.apache.org/bugzilla/show_bug.cgi?id=45691&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This seems to be the culprit (see line 623) but there might be other issues.&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/scripting/jsp/src/main/java/org/apache/sling/scripting/jsp/jasper/compiler/JspUtil.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/scripting/jsp/src/main/java/org/apache/sling/scripting/jsp/jasper/compiler/JspUtil.java&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13023277">SLING-6328</key>
            <summary>JSP concurrent compiling issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="scharles@towardmay.com">Sameer Charles</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Nov 2016 02:33:02 +0000</created>
                <updated>Tue, 17 Jan 2017 11:31:35 +0000</updated>
                            <resolved>Mon, 9 Jan 2017 16:29:21 +0000</resolved>
                                    <version>Scripting JSP 2.1.6</version>
                                    <fixVersion>Scripting JSP 2.2.4</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15695219" author="rombert" created="Fri, 25 Nov 2016 08:12:36 +0000"  >&lt;p&gt;Thanks for the report. This isn&apos;t my area of expertise, but I&apos;m sure whoever picks this up would like to know more about the steps to reproduce.&lt;/p&gt;</comment>
                            <comment id="15695278" author="fmeschbe" created="Fri, 25 Nov 2016 08:45:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; According to the bug referenced this is a concurrency issue which should be pretty easy to analyse statically.&lt;/p&gt;</comment>
                            <comment id="15804944" author="jsedding" created="Fri, 6 Jan 2017 16:40:55 +0000"  >&lt;p&gt;I did some research on this issue. For the record: it seems Sling JSP is a fork of Jasper 6.0.14 (as indicated by other dependencies of the module with the same version).&lt;/p&gt;

&lt;p&gt;The commit to fix the above mentioned &lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=45691&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;bugzilla issue #45691&lt;/a&gt; is &lt;a href=&quot;http://svn.apache.org/r707745&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r707745&lt;/a&gt;, which was first released with Jasper 6.0.19 and should thus be fairly close to our fork.&lt;/p&gt;</comment>
                            <comment id="15804994" author="jsedding" created="Fri, 6 Jan 2017 16:58:24 +0000"  >&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12846037/12846037_SLING-6328-backported-changes-jsedding.patch&quot; title=&quot;SLING-6328-backported-changes-jsedding.patch attached to SLING-6328&quot;&gt;Attached is a patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; that backports the changes made in the original code-base. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fmeschbe&quot; class=&quot;user-hover&quot; rel=&quot;fmeschbe&quot;&gt;fmeschbe&lt;/a&gt; could you please review? I&apos;m planning to apply the changes on Monday. &lt;/p&gt;</comment>
                            <comment id="15811129" author="cziegeler" created="Mon, 9 Jan 2017 09:12:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt; Patch itself looks fine, can&apos;t tell whether it solves the problem &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15812168" author="jsedding" created="Mon, 9 Jan 2017 16:29:23 +0000"  >&lt;p&gt;Thanks for reviewing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;. I have applied the patch in &lt;a href=&quot;https://svn.apache.org/r1778009&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1778009&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12846037" name="SLING-6328-backported-changes-jsedding.patch" size="4842" author="jsedding" created="Fri, 6 Jan 2017 16:58:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36rl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6324] MonitoringDistributionPackageBuilder registering of same beans cause exception</title>
                <link>https://issues.apache.org/jira/browse/SLING-6324</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;While distributing some content massively I have encountered lots of stacktraces like below (on sending instance):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;24.11.2016 13:09:37.424 *INFO* [127.0.0.1 [1479989377273] POST /bin/replicate.json HTTP/1.1] org.apache.sling.distribution.agent.impl.SimpleDistributionAgent [agent][publish] REQUEST-START DSTRQ2791: ADD paths=[/content/test10K/node27/subnode90], user=replication-service
24.11.2016 13:09:37.425 *ERROR* [sling-threadpool-7c966356-fcc8-467b-9d58-eab12551b43c-(apache-sling-job-thread-pool)-2-org_apache_sling_distribution_queue_publish_default(org/apache/sling/distribution/queue/publish/default)] org.apache.aries.jmx.whiteboard.MBeanHolder register: Failure registering MBean org.apache.aries.jmx.util.shared.RegistrableStandardEmitterMBean@42b86d48
javax.management.InstanceAlreadyExistsException: org.apache.sling.distribution:type=distributionpackage,id=&quot;/var/sling/distribution/packages/kryo-cs/data/dstrpck-1479989376714-b79fc9b9-a3e2-4a03-a33c-e87ccd17b8dc&quot;
	at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)
	at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)
	at org.apache.aries.jmx.whiteboard.MBeanHolder.register(MBeanHolder.java:114)
	at org.apache.aries.jmx.whiteboard.JmxWhiteboardSupport.registerMBean(JmxWhiteboardSupport.java:86)
	at org.apache.aries.jmx.whiteboard.Activator$MBeanTracker.addingService(Activator.java:102)
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:941)
	at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:870)
	at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:256)
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:229)
	at org.osgi.util.tracker.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:901)
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4558)
	at org.apache.felix.framework.Felix.registerService(Felix.java:3550)
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:322)
	at org.apache.sling.distribution.monitor.impl.MonitoringDistributionPackageBuilder.registerDistributionPackageMBean(MonitoringDistributionPackageBuilder.java:109)
	at org.apache.sling.distribution.monitor.impl.MonitoringDistributionPackageBuilder.getPackage(MonitoringDistributionPackageBuilder.java:81)
	at org.apache.sling.distribution.serialization.impl.DistributionPackageBuilderFactory.getPackage(DistributionPackageBuilderFactory.java:222)
	at org.apache.sling.distribution.packaging.impl.exporter.LocalDistributionPackageExporter.getPackage(LocalDistributionPackageExporter.java:55)
	at org.apache.sling.distribution.agent.impl.SimpleDistributionAgentQueueProcessor.processQueueItem(SimpleDistributionAgentQueueProcessor.java:116)
	at org.apache.sling.distribution.agent.impl.SimpleDistributionAgentQueueProcessor.process(SimpleDistributionAgentQueueProcessor.java:84)
	at org.apache.sling.distribution.queue.impl.jobhandling.DistributionAgentJobConsumer.process(DistributionAgentJobConsumer.java:48)
	at org.apache.sling.event.impl.jobs.JobConsumerManager$JobConsumerWrapper.process(JobConsumerManager.java:500)
	at org.apache.sling.event.impl.jobs.queues.JobQueueImpl.startJob(JobQueueImpl.java:291)
	at org.apache.sling.event.impl.jobs.queues.JobQueueImpl.access$100(JobQueueImpl.java:58)
	at org.apache.sling.event.impl.jobs.queues.JobQueueImpl$1.run(JobQueueImpl.java:227)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems &lt;tt&gt;MonitoringDistributionPackageBuilder&lt;/tt&gt;&#160;is registering same beans multiple times, however the mentioned exception doesn&apos;t block distribution request processing it seems.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13023166">SLING-6324</key>
            <summary>MonitoringDistributionPackageBuilder registering of same beans cause exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="teofili">Tommaso Teofili</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Nov 2016 12:13:20 +0000</created>
                <updated>Tue, 14 Feb 2017 09:30:51 +0000</updated>
                            <resolved>Tue, 29 Nov 2016 15:07:07 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.2.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15693513" author="simone.tripodi" created="Thu, 24 Nov 2016 15:14:02 +0000"  >&lt;p&gt;hi there &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt;,&lt;br/&gt;
the issue is in the fact that the &lt;tt&gt;ResourceDistributionPackage&lt;/tt&gt; does not have a unique identifier - resource path is good to identify a unique resource, but multiple packages can be built on top of the same resource and they need to be identified by an unique id.&lt;br/&gt;
The proposed attached patch try to solve the issue by assigning a unique UUIDs to each &lt;tt&gt;DistributionPackage&lt;/tt&gt;&lt;br/&gt;
As usual, I am open to suggestions in order to improve the qualify of my contributions, TIA! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15693532" author="teofili" created="Thu, 24 Nov 2016 15:24:27 +0000"  >&lt;p&gt;thanks a lot Simo, I&apos;ve applied your patch!&lt;/p&gt;</comment>
                            <comment id="15702139" author="teofili" created="Mon, 28 Nov 2016 14:52:14 +0000"  >&lt;p&gt;reopening as it seems the &lt;tt&gt;MonitoringDistributionPackageBuilder&lt;/tt&gt;&#160;is actually registering mbeans twice on sender (create() and get()) and on receiver (read() and install()).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12840428" name="SLING-6324.patch" size="2255" author="simone.tripodi" created="Thu, 24 Nov 2016 15:14:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36qwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6323] Kryo serializer persists resources at the wrong path with depth one resources</title>
                <link>https://issues.apache.org/jira/browse/SLING-6323</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Kryo serializer appends resources wrongly upon deserialization when their depth (or depth of their parent) is one.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13023162">SLING-6323</key>
            <summary>Kryo serializer persists resources at the wrong path with depth one resources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="teofili">Tommaso Teofili</assignee>
                                    <reporter username="teofili">Tommaso Teofili</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Nov 2016 11:56:18 +0000</created>
                <updated>Thu, 24 Nov 2016 11:57:17 +0000</updated>
                            <resolved>Thu, 24 Nov 2016 11:57:16 +0000</resolved>
                                                    <fixVersion>Content Distribution Extensions 0.1.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15693085" author="teofili" created="Thu, 24 Nov 2016 11:57:17 +0000"  >&lt;p&gt;fixed in r1771120.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36qvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6322] AvroContentSerializer cannot deserialize packages with multiple resources</title>
                <link>https://issues.apache.org/jira/browse/SLING-6322</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Avro serializer fails at deserializing / persisting a package which contains two or more different resources, resulting in persisting only one of them (the last one).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13023161">SLING-6322</key>
            <summary>AvroContentSerializer cannot deserialize packages with multiple resources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="teofili">Tommaso Teofili</assignee>
                                    <reporter username="teofili">Tommaso Teofili</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Nov 2016 11:52:37 +0000</created>
                <updated>Thu, 24 Nov 2016 11:53:42 +0000</updated>
                            <resolved>Thu, 24 Nov 2016 11:53:42 +0000</resolved>
                                                    <fixVersion>Content Distribution Extensions 0.1.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15693073" author="teofili" created="Thu, 24 Nov 2016 11:53:42 +0000"  >&lt;p&gt;fixed in r1771119.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36qvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6321] Sling Mock throwing java.lang.NoClassDefFoundError</title>
                <link>https://issues.apache.org/jira/browse/SLING-6321</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I&apos;m getting the following error:&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;java.lang.NoClassDefFoundError: org/apache/sling/models/spi/injectorspecific/InjectAnnotationProcessorFactory&lt;/p&gt;

&lt;p&gt;	at org.apache.sling.models.impl.ModelAdapterFactory.&amp;lt;init&amp;gt;(ModelAdapterFactory.java:143)&lt;br/&gt;
	at org.apache.sling.testing.mock.sling.context.SlingContextImpl.registerDefaultServices(SlingContextImpl.java:160)&lt;br/&gt;
	at org.apache.sling.testing.mock.sling.context.SlingContextImpl.setUp(SlingContextImpl.java:143)&lt;br/&gt;
	at org.apache.sling.testing.mock.sling.junit.SlingContext.access$100(SlingContext.java:35)&lt;br/&gt;
	at org.apache.sling.testing.mock.sling.junit.SlingContext$1.before(SlingContext.java:126)&lt;br/&gt;
	at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:46)&lt;br/&gt;
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)&lt;br/&gt;
	at org.junit.runner.JUnitCore.run(JUnitCore.java:160)&lt;br/&gt;
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:117)&lt;br/&gt;
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:42)&lt;br/&gt;
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:262)&lt;br/&gt;
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:84)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: org.apache.sling.models.spi.injectorspecific.InjectAnnotationProcessorFactory&lt;br/&gt;
	at java.net.URLClassLoader$1.run(URLClassLoader.java:366)&lt;br/&gt;
	at java.net.URLClassLoader$1.run(URLClassLoader.java:355)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at java.net.URLClassLoader.findClass(URLClassLoader.java:354)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:425)&lt;br/&gt;
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:358)&lt;br/&gt;
	... 26 more&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;trying to run the following snipet:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@RunWith(MockitoJUnitRunner.class)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;SimpleMockTest {

	@Rule
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SlingContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlingContext();

	@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSomething() {
		Resource resource = context.resourceResolver().getResource(&lt;span class=&quot;code-quote&quot;&gt;&quot;/content/sample/en&quot;&lt;/span&gt;);
	}

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Using the following dependencies:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.sling&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;org.apache.sling.api&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.7.0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.sling&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;org.apache.sling.models.api&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0.0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;provided&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- sling mock framework --&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.sling&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;org.apache.sling.testing.osgi-mock&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.8.0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;test&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.sling&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;org.apache.sling.testing.jcr-mock&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.1.16&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;test&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.sling&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;org.apache.sling.testing.sling-mock&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.8.0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;test&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Am i missing something?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13023081">SLING-6321</key>
            <summary>Sling Mock throwing java.lang.NoClassDefFoundError</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="11">Done</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="doriguetto">Gustavo</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Thu, 24 Nov 2016 03:53:48 +0000</created>
                <updated>Fri, 9 Dec 2016 22:53:01 +0000</updated>
                            <resolved>Fri, 9 Dec 2016 22:52:46 +0000</resolved>
                                    <version>Testing Sling Mock 1.8.0</version>
                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15692684" author="sseifert@pro-vision.de" created="Thu, 24 Nov 2016 08:55:55 +0000"  >&lt;p&gt;sling mocks 1.x has a minimum dependency of sling models API + Impl 1.1.0 - can you update your project to this version?&lt;br/&gt;
(you have defined version 1.0.0)&lt;/p&gt;</comment>
                            <comment id="15694412" author="doriguetto" created="Thu, 24 Nov 2016 23:30:40 +0000"  >&lt;p&gt;After updating the dependency to sling models API 1.1.0 + impl 1.1.0 everything started to work fine. Thanks&lt;br/&gt;
i suggest update the documentation including dependency on both - sling models API 1.1.0 + impl 1.1.0 -  or work out the transitive dependencies in POM files.&lt;/p&gt;</comment>
                            <comment id="15736580" author="sseifert@pro-vision.de" created="Fri, 9 Dec 2016 22:52:47 +0000"  >&lt;p&gt;the transitive dependency is already included in the sling-mock pom - but it was overridden in your project with an older version.&lt;/p&gt;

&lt;p&gt;i&apos;ve added a small notice on the min. sling models versions in the documentation.&lt;br/&gt;
&lt;a href=&quot;http://sling.apache.org/documentation/development/sling-mock.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/development/sling-mock.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36qdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6320] New Endpoint through Connector Creation does not get updated</title>
                <link>https://issues.apache.org/jira/browse/SLING-6320</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;em&gt;StandardPropertyProvider&lt;/em&gt; updates the &lt;em&gt;endpoint&lt;/em&gt; property upon the &lt;em&gt;HttpService&lt;/em&gt; being modified.&lt;/p&gt;

&lt;p&gt;If a new endpoint is created by having a custom &lt;em&gt;org.apache.felix.http.jetty.ConnectorFactory&lt;/em&gt; that adds a &lt;em&gt;org.eclipse.jetty.server.Connector&lt;/em&gt; (e.g. to add an SSL listener), the &lt;em&gt;HttpService&lt;/em&gt; will not be modified and therefore the &lt;em&gt;StandardPropertyProvider&lt;/em&gt; not propagate the new endpoint.&lt;/p&gt;

&lt;p&gt;The &lt;em&gt;StandardPropertyProvider&lt;/em&gt; should probably also (or only?) listen to the binding/unbinding of &lt;em&gt;Connectors&lt;/em&gt;. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13022884">SLING-6320</key>
            <summary>New Endpoint through Connector Creation does not get updated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dominique.jaeggi">Dominique J&#228;ggi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Nov 2016 15:11:19 +0000</created>
                <updated>Wed, 23 Nov 2016 15:11:19 +0000</updated>
                                            <version>Discovery API 1.0.2</version>
                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36p5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6319] Installer sometimes deletes the wrong .ser files</title>
                <link>https://issues.apache.org/jira/browse/SLING-6319</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;It looks like the logic used to delete the &lt;tt&gt;rsrc.getPrivateCopyOfFile()&lt;/tt&gt; in &lt;tt&gt;OsgiInstallerImpl.registerResources&lt;/tt&gt; is wrong and sometimes causes .ser files to be wrongly deleted.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit a new &lt;tt&gt;OsgiInstallerImplTest&lt;/tt&gt; that demonstrates this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13022854">SLING-6319</key>
            <summary>Installer sometimes deletes the wrong .ser files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Nov 2016 13:33:52 +0000</created>
                <updated>Tue, 31 Jan 2017 07:04:05 +0000</updated>
                            <resolved>Wed, 23 Nov 2016 14:31:47 +0000</resolved>
                                    <version>Installer Core 3.8.0</version>
                                    <fixVersion>Installer Core 3.8.2</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15690252" author="bdelacretaz" created="Wed, 23 Nov 2016 14:31:47 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1770974&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1770974&lt;/a&gt; after adding the test mentioned above and a bit of refactoring to make the logic easier to understand.&lt;/p&gt;</comment>
                            <comment id="15690263" author="bdelacretaz" created="Wed, 23 Nov 2016 14:37:20 +0000"  >&lt;p&gt;And the test that validates this is at &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk/installer/core/src/test/java/org/apache/sling/installer/core/impl/OsgiInstallerImplTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk/installer/core/src/test/java/org/apache/sling/installer/core/impl/OsgiInstallerImplTest.java&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36oz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6318] Remove repeated retrieval of ValueMap when adapting a model class with multiple ValueMap injections</title>
                <link>https://issues.apache.org/jira/browse/SLING-6318</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In an offline discussion with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;, he expressed a concern about how if you have a model class (or interface) with a number of ValueMap-based injections it would end up calling Resource.adaptTo(ValueMap.class) multiple times.&lt;/p&gt;

&lt;p&gt;While I think this may be primarily an issue for the Resource implementation to solve for, it is true that the effective code executed by Sling Models is going to be less efficient in this case than manual construction of the object.&lt;/p&gt;

&lt;p&gt;So I think it is worth exploring.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13022642">SLING-6318</key>
            <summary>Remove repeated retrieval of ValueMap when adapting a model class with multiple ValueMap injections</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Nov 2016 21:44:05 +0000</created>
                <updated>Wed, 30 Nov 2016 17:13:55 +0000</updated>
                            <resolved>Wed, 30 Nov 2016 17:13:54 +0000</resolved>
                                                    <fixVersion>Sling Models Impl 1.3.6</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15688004" author="justinedelson" created="Tue, 22 Nov 2016 21:48:18 +0000"  >&lt;p&gt;Here&apos;s my first attempt to optimize for this case.&lt;/p&gt;

&lt;p&gt;The patch adds an internal-only interface (ValuePreparer) which can be implemented by Injectors to do some prework (i.e. get the ValueMap for a Resource) one time per adaptation rather than per-injection point.&lt;/p&gt;

&lt;p&gt;For now, this interface (and thus the implementations of it) is internal to the implementation bundle, so this is only available on 1st party injectors. We can always move this to the API package later, but I thought it was best to experiment on our injectors before adding new API.&lt;/p&gt;</comment>
                            <comment id="15709150" author="justinedelson" created="Wed, 30 Nov 2016 17:13:55 +0000"  >&lt;p&gt;patch applied in r 1772085 &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12840126" name="SLING-6318.diff" size="19389" author="justinedelson" created="Tue, 22 Nov 2016 21:48:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36nnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6315] o.a.sling.scripting.core: IllegalStateException: The bundle is uninstalled</title>
                <link>https://issues.apache.org/jira/browse/SLING-6315</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;18.11.2016 02:58:23.445 *ERROR* [FelixDispatchQueue] org.apache.sling.scripting.core FrameworkEvent ERROR (java.lang.IllegalStateException: The bundle is uninstalled.)java.lang.IllegalStateException: The bundle is uninstalled.
	at org.apache.felix.framework.Felix.getBundleEntry(Felix.java:1741)
	at org.apache.felix.framework.BundleImpl.getEntry(BundleImpl.java:291)
	at org.apache.sling.scripting.core.impl.ScriptEngineManagerFactory.bundleChanged(ScriptEngineManagerFactory.java:158)
	at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:916)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:835)
	at org.apache.felix.framework.util.EventDispatcher.run(EventDispatcher.java:1148)
	at org.apache.felix.framework.util.EventDispatcher.access$000(EventDispatcher.java:55)
	at org.apache.felix.framework.util.EventDispatcher$1.run(EventDispatcher.java:103)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13022488">SLING-6315</key>
            <summary>o.a.sling.scripting.core: IllegalStateException: The bundle is uninstalled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Nov 2016 12:57:15 +0000</created>
                <updated>Wed, 23 Nov 2016 14:57:11 +0000</updated>
                            <resolved>Wed, 23 Nov 2016 14:57:11 +0000</resolved>
                                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15686740" author="asanso" created="Tue, 22 Nov 2016 13:19:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; are you fine if I apply this patch ?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Index: src/main/java/org/apache/sling/scripting/core/impl/ScriptEngineManagerFactory.java
===================================================================
--- src/main/java/org/apache/sling/scripting/core/impl/ScriptEngineManagerFactory.java	(revision 1770833)
+++ src/main/java/org/apache/sling/scripting/core/impl/ScriptEngineManagerFactory.java	(working copy)
@@ -154,16 +154,25 @@
 
     @Override
     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void bundleChanged(BundleEvent event) {
+        Bundle bundle = event.getBundle();
+        URL url = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
+
+        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+            url = bundle.getEntry(ENGINE_FACTORY_SERVICE);
+        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IllegalStateException ie) {
+            log.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;bundleChanged: an issue &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; refreshing the Script Engine Manager occurred&quot;&lt;/span&gt;, ie);
+        }
+
         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (event.getType() == BundleEvent.STARTED
-            &amp;amp;&amp;amp; event.getBundle().getEntry(ENGINE_FACTORY_SERVICE) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+                &amp;amp;&amp;amp; url != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
             &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.engineSpiBundles) {
-                &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.engineSpiBundles.add(event.getBundle());
+                &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.engineSpiBundles.add(bundle);
             }
             &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.refreshScriptEngineManager();
         } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (event.getType() == BundleEvent.STOPPED) {
             &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; refresh;
             &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.engineSpiBundles) {
-                refresh = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.engineSpiBundles.remove(event.getBundle());
+                refresh = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.engineSpiBundles.remove(bundle);
             }
             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (refresh) {
                 &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.refreshScriptEngineManager();
@@ -170,7 +179,6 @@
             }
         }
     }
-
     &lt;span class=&quot;code-comment&quot;&gt;// ---------- SCR integration ----------------------------------------------
&lt;/span&gt; 
     &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void activate(ComponentContext context) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15689502" author="radu.cotescu" created="Wed, 23 Nov 2016 09:27:42 +0000"  >&lt;p&gt;LGTM. I would maybe just implement it like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; event == started {
  URL url = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
  } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ISE) {
      log
  }
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; event == stopped {
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We don&apos;t need the URL for when the bundle stops, right?&lt;/p&gt;</comment>
                            <comment id="15689529" author="fmeschbe" created="Wed, 23 Nov 2016 09:32:48 +0000"  >&lt;p&gt;Rather than try-catching (on every event even !) I suggest to amend the the test for the started event with a test for the bundle state, such as :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (event == started and bundle.state == active) { ... }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15689551" author="asanso" created="Wed, 23 Nov 2016 09:41:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fmeschbe&quot; class=&quot;user-hover&quot; rel=&quot;fmeschbe&quot;&gt;fmeschbe&lt;/a&gt; thanks for the hint. &lt;br/&gt;
Is it still possible to have a race condition though between the if block and the &lt;tt&gt;event.getBundle().getEntry()&lt;/tt&gt; ?&lt;/p&gt;</comment>
                            <comment id="15689557" author="fmeschbe" created="Wed, 23 Nov 2016 09:45:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is it still possible to have a race condition&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unless you implement a synchronous event listener, which I strongly discourage, yes, there is a chance for a race condition. Is this a problem ? This should be rare.&lt;/p&gt;

&lt;p&gt;Even this situation that you are trying to fix/workaround should really be extremely rare and only on a &quot;flickering&quot; system, which might even hint at a problematic underlying provisioning function !&lt;/p&gt;

&lt;p&gt;So maybe, it might even make sense to &lt;b&gt;not&lt;/b&gt; do anything about this problem in the event listener but rather seek to fix the &quot;system flickering&quot; in the provisioning function ? As in &quot;fix the root not the symptom&quot;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36mpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6314] Sling Models bundles link to old versions</title>
                <link>https://issues.apache.org/jira/browse/SLING-6314</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Apache Sling web site downloads page links to old (&amp;lt;1.3.0) versions of the Sling Models bundles, and does not include an entry for the Sling Model Jackson Exporter.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13022281">SLING-6314</key>
            <summary>Sling Models bundles link to old versions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="empire29">David Gonzalez</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Nov 2016 19:36:02 +0000</created>
                <updated>Thu, 24 Nov 2016 20:07:08 +0000</updated>
                            <resolved>Mon, 21 Nov 2016 20:59:02 +0000</resolved>
                                                                    <component>Documentation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15684708" author="sseifert@pro-vision.de" created="Mon, 21 Nov 2016 20:59:02 +0000"  >&lt;p&gt;missing on the news page as well - both fixed.&lt;/p&gt;</comment>
                            <comment id="15694118" author="sseifert@pro-vision.de" created="Thu, 24 Nov 2016 20:07:08 +0000"  >&lt;p&gt;Completed: At revision: 1771216  &lt;/p&gt;

&lt;p&gt;i&apos;ve also updates news page &amp;amp; download list for the new impl/jackson importer release this week (Sling Models Impl 1.3.4 and Jackson Exporter 1.0.4)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36lfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6313] Sling installer can duplicate factory configurations if an invalid RegisteredResourceList.ser is found</title>
                <link>https://issues.apache.org/jira/browse/SLING-6313</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Steps to reproduce, inside `launchpad/builder`&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mvn clean package
java -jar target/org.apache.sling.launchpad-9-SNAPSHOT.jar
# wait for Sling to start up properly, stop it with CTRL-C
truncate --size=-1 sling/installer/RegisteredResourceList.ser
java -jar target/org.apache.sling.launchpad-9-SNAPSHOT.jar
# wait for Sling to start up properly, stop it with CTRL-C
java -jar target/org.apache.sling.launchpad-9-SNAPSHOT.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The following exceptions are logged in the last run:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;21.11.2016 14:32:26.538 *ERROR* [CM Configuration Updater (ManagedServiceFactory Update: factoryPid=[org.apache.sling.commons.log.LogManager.factory.config])] org.apache.felix.configadmin Service [org.apache.felix.cm.ConfigurationAdmin,28, [org.osgi.service.cm.ConfigurationAdmin]] [org.osgi.service.cm.ManagedServiceFactory, id=19, bundle=8/slinginstall:org.apache.sling.commons.log-5.0.1-SNAPSHOT.jar]: Updating property org.apache.sling.commons.log.names of configuration org.apache.sling.commons.log.LogManager.factory.config.b4cf7982-9af0-40a1-b720-3e83a9f9e7f9 caused a problem: Category log.request already defined by configuration org.apache.sling.commons.log.LogManager.factory.config.b4cf7982-9af0-40a1-b720-3e83a9f9e7f9 (org.osgi.service.cm.ConfigurationException: org.apache.sling.commons.log.names : Category log.request already defined by configuration org.apache.sling.commons.log.LogManager.factory.config.b4cf7982-9af0-40a1-b720-3e83a9f9e7f9)
org.osgi.service.cm.ConfigurationException: org.apache.sling.commons.log.names : Category log.request already defined by configuration org.apache.sling.commons.log.LogManager.factory.config.b4cf7982-9af0-40a1-b720-3e83a9f9e7f9
	at org.apache.sling.commons.log.logback.internal.config.LoggerManagedServiceFactory.updated(LoggerManagedServiceFactory.java:36)
	at org.apache.felix.cm.impl.helper.ManagedServiceFactoryTracker.updated(ManagedServiceFactoryTracker.java:159)
	at org.apache.felix.cm.impl.helper.ManagedServiceFactoryTracker.provideConfiguration(ManagedServiceFactoryTracker.java:93)
	at org.apache.felix.cm.impl.ConfigurationManager$ManagedServiceFactoryUpdate.provide(ConfigurationManager.java:1611)
	at org.apache.felix.cm.impl.ConfigurationManager$ManagedServiceFactoryUpdate.run(ConfigurationManager.java:1554)
	at org.apache.felix.cm.impl.UpdateThread.run0(UpdateThread.java:141)
	at org.apache.felix.cm.impl.UpdateThread.run(UpdateThread.java:109)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.apache.sling.commons.log.logback.internal.config.ConfigurationException: 
	at org.apache.sling.commons.log.logback.internal.LogConfigManager.updateLoggerConfiguration(LogConfigManager.java:533)
	at org.apache.sling.commons.log.logback.internal.config.LoggerManagedServiceFactory.updated(LoggerManagedServiceFactory.java:34)
	... 7 common frames omitted&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13022178">SLING-6313</key>
            <summary>Sling installer can duplicate factory configurations if an invalid RegisteredResourceList.ser is found</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Nov 2016 12:35:48 +0000</created>
                <updated>Wed, 26 May 2021 20:59:10 +0000</updated>
                            <resolved>Wed, 4 Sep 2019 08:01:09 +0000</resolved>
                                                    <fixVersion>Installer Core 3.9.0</fixVersion>
                    <fixVersion>Installer Configuration Factory 1.2.4</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>13</watches>
                                                                                                                <comments>
                            <comment id="15683733" author="rombert" created="Mon, 21 Nov 2016 14:40:03 +0000"  >&lt;p&gt;There is code that attempts to prevent duplicate configurations to be created - in &lt;a href=&quot;https://github.com/apache/sling/blob/bff79339342b748b327b5cbb7f13d42c3d6ba1a1/installer/factories/configuration/src/main/java/org/apache/sling/installer/factories/configuration/impl/ConfigUtil.java#L188-L213&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ConfigUtil.getOrCreateConfiguration&lt;/a&gt;, but it fails for configuration factory &quot;instances&quot; created from the provisioning model. The key difference here is that the provisioning model allows to specify configs with &quot;friendly&quot; qualifiers, e.g. org.apache.felix.jaas.Configuration.factory-&lt;b&gt;GuestLoginModule&lt;/b&gt;, but on the other hand the config admin replaces that config pid with an actual UUID - org.apache.felix.jaas.Configuration.factory.&lt;b&gt;150bc928-25e8-4c2e-b210-89331344b3a5&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;One possible solution is to retain the original alias as a configuration property. But I&apos;ll dig a bit more and see if this is the correct fix.&lt;/p&gt;</comment>
                            <comment id="15684501" author="justinedelson" created="Mon, 21 Nov 2016 19:30:14 +0000"  >&lt;blockquote&gt;&lt;p&gt;One possible solution is to retain the original alias as a configuration property. But I&apos;ll dig a bit more and see if this is the correct fix.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;AFAIK, that used to be present, but was removed with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2004&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-2004&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15686196" author="rombert" created="Tue, 22 Nov 2016 09:31:34 +0000"  >&lt;p&gt;Good point, thanks. Now I need to find out if &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt; This property is not needed as the installer keeps track where a configuration came from.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;can still be made to work with the provisioning model or if we need to partially resurrect the code removed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2004&quot; title=&quot;Don&amp;#39;t add org.apache.sling.installer.osgi.path property to configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2004&quot;&gt;&lt;del&gt;SLING-2004&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15686257" author="jsedding" created="Tue, 22 Nov 2016 09:58:03 +0000"  >&lt;p&gt;I have never fully analyzed the issue, but I have seen systems with duplicated logging related configs a number of times. None of these systems were based on the provisioning model, so I assume the problem is not exclusive to the combination of launchpad and provisioning model.&lt;/p&gt;

&lt;p&gt;Rather, I think, you found the root cause - when the installer&apos;s internal state is broken (e.g. corrupt sling/installer/RegisteredResourceList.ser), the premise from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2004&quot; title=&quot;Don&amp;#39;t add org.apache.sling.installer.osgi.path property to configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2004&quot;&gt;&lt;del&gt;SLING-2004&lt;/del&gt;&lt;/a&gt; (&quot;This property is not needed as the installer &lt;b&gt;keeps track&lt;/b&gt; where a configuration came from&quot;; my emphasis) does no longer hold.&lt;/p&gt;</comment>
                            <comment id="15687036" author="rombert" created="Tue, 22 Nov 2016 15:29:14 +0000"  >&lt;p&gt;A minimal resurrection of the old &lt;tt&gt;org.apache.sling.installer.osgi.factoryaliaspid&lt;/tt&gt; to track alias keys seems to fix the problem for me. I have attached a minimal patch which seems to work with light testing : &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12840035/12840035_SLING-6313-0.diff&quot; title=&quot;SLING-6313-0.diff attached to SLING-6313&quot;&gt;SLING-6313-0.diff&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=justinedelson&quot; class=&quot;user-hover&quot; rel=&quot;justinedelson&quot;&gt;justinedelson&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; - do you think this approach is the right one? The code definitely needs documentation and automated testing, but I&apos;m curious to know if the basic ideas are ok.&lt;/p&gt;</comment>
                            <comment id="15687042" author="justinedelson" created="Tue, 22 Nov 2016 15:32:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; should review this as well. He was the one who implemented &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-2004&quot; title=&quot;Don&amp;#39;t add org.apache.sling.installer.osgi.path property to configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-2004&quot;&gt;&lt;del&gt;SLING-2004&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;FWIW, I&apos;m in favor of adding this property back from the perspective of troubleshooting.&lt;/p&gt;</comment>
                            <comment id="15687052" author="bdelacretaz" created="Tue, 22 Nov 2016 15:35:11 +0000"  >&lt;p&gt;I don&apos;t know about the installer keeping track of where a config came from, but apparently it doesn&apos;t work, and we don&apos;t have tests that demonstrate that so I agree with Robert about taking the safe route and re-adding the factoryaliaspid property for now.&lt;/p&gt;
</comment>
                            <comment id="15687352" author="jsedding" created="Tue, 22 Nov 2016 17:31:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; I tested your patch locally and it seems to work fine. And while I don&apos;t fully understand how it works, it does add the alias property to the configuration (can be seen in &lt;a href=&quot;http://localhost:8080/system/console/status-Configurations&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/status-Configurations&lt;/a&gt;). So from my side the change looks good.&lt;/p&gt;</comment>
                            <comment id="15692718" author="rombert" created="Thu, 24 Nov 2016 09:14:53 +0000"  >&lt;p&gt;Thanks all for the feedback. I still need to write a proper test for the behaviour, but right now I&apos;m looking into &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5228&quot; title=&quot;Remove loginAdministrative() usage from org.apache.sling.installer.provider.jcr&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5228&quot;&gt;&lt;del&gt;SLING-5228&lt;/del&gt;&lt;/a&gt; so this will need to wait for a bit.&lt;/p&gt;</comment>
                            <comment id="15722414" author="elemer" created="Mon, 5 Dec 2016 14:32:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;:  Would the solution in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6313&quot; title=&quot;Sling installer can duplicate factory configurations if an invalid RegisteredResourceList.ser is found&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6313&quot;&gt;&lt;del&gt;SLING-6313&lt;/del&gt;&lt;/a&gt; account for existing double configurations (regardless if of corrupted RegisteredResourceList.ser) and delete them, because we have observed cases, where the .res file is not corrupted?&lt;/p&gt;</comment>
                            <comment id="15722594" author="rombert" created="Mon, 5 Dec 2016 15:53:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=elemer&quot; class=&quot;user-hover&quot; rel=&quot;elemer&quot;&gt;elemer&lt;/a&gt; - that depends on the root cause. This fix does not delete duplicate configurations, it only ensures that factory configurations are not registered twice.&lt;/p&gt;</comment>
                            <comment id="15742181" author="elemer" created="Mon, 12 Dec 2016 14:45:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;: should I create a different SLING issue for the case when a duplicate is created on the opposite node by modifying OSGi configuration (e.g. changing logging from INFO to ERROR) ? &lt;/p&gt;</comment>
                            <comment id="15742193" author="cziegeler" created="Mon, 12 Dec 2016 14:49:49 +0000"  >&lt;p&gt;I&apos;m not really sure if we should add a fix for when the .ser file gets corrupted. If that file gets corrupted other stuff can get corrupted at least in theory as well&lt;br/&gt;
And finally with the upcoming R7 spec, config admin will directly support an alias and there is no need to for either storing the mapping somewhere or adding internal properties to the configuration. This is already implemented in Apache Felix&lt;/p&gt;</comment>
                            <comment id="15743115" author="rombert" created="Mon, 12 Dec 2016 20:53:46 +0000"  >&lt;p&gt;We&apos;ve seen real world problems due to this corruption and if we be more robust I would say it&apos;s better. Is the implementation in Felix something we can use now or do we have to wait for the R7 spec to be released?&lt;/p&gt;</comment>
                            <comment id="15743124" author="rombert" created="Mon, 12 Dec 2016 20:56:51 +0000"  >&lt;p&gt;Sounds like a bug to me, and more context in a new SLING issue would be more than welcome &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15900904" author="rombert" created="Wed, 8 Mar 2017 08:24:40 +0000"  >&lt;p&gt;I&apos;m coming back to this since we&apos;re starting to see this issue in upgrade scenarios. I&apos;m inclined to add back the fix to Sling and then once the R7 release of the Config Admin is available we&apos;ll switch to that.&lt;/p&gt;

&lt;p&gt;Looking at the last 2 config admin releases + the next one it does not seem like there is any movement towards adding support for aliases - &lt;a href=&quot;https://issues.apache.org/jira/issues/?jql=project%20%3D%20FELIX%20AND%20fixVersion%20IN%20(configadmin-1.8.14%2C%20configadmin-1.8.12%2C%20configadmin-1.8.10&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/issues/?jql=project%20%3D%20FELIX%20AND%20fixVersion%20IN%20(configadmin-1.8.14%2C%20configadmin-1.8.12%2C%20configadmin-1.8.10&lt;/a&gt;) .&lt;/p&gt;</comment>
                            <comment id="15900976" author="rombert" created="Wed, 8 Mar 2017 09:38:29 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1785938&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1785938&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15901125" author="rombert" created="Wed, 8 Mar 2017 11:32:34 +0000"  >&lt;p&gt;On second thought this does not look like it&apos;s going to help for upgrade scenarios, since we need the &lt;em&gt;old&lt;/em&gt; configuration to have the alias set, which means that we would need to force a regeneration of configurations on the old instance.&lt;/p&gt;</comment>
                            <comment id="15903071" author="rombert" created="Thu, 9 Mar 2017 13:48:13 +0000"  >&lt;p&gt;Reverted in &lt;a href=&quot;https://svn.apache.org/r1786170&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1786170&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="15903268" author="kwin" created="Thu, 9 Mar 2017 16:00:52 +0000"  >&lt;p&gt;This is a chicken/egg problem, right? Right now we don&apos;t have any alias support, and to profit from it for upgrades we would need to have it in the last and the next Sling version. If we wait for OSGi R7 we will solve that not for the upgrade to OSGi R7 then, but rather for the upgrade afterwards. Therefore I would strongly recommend to reimplement the old alias handling, as this is definitely an improvement and would allow to easily reinstall everything (see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5745&quot; title=&quot;Provide a button to clear all registered entities and reinstall those&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5745&quot;&gt;SLING-5745&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="15907434" author="rombert" created="Mon, 13 Mar 2017 13:13:28 +0000"  >&lt;p&gt;In my scenario the fix would not have helped so I don&apos;t have a proper way of verifying the fix.&lt;/p&gt;

&lt;p&gt;Is it possible to use alias support in a way that&apos;s compatible with the R7 release? If so, I don&apos;t think there&apos;s any harm in doing that.&lt;/p&gt;</comment>
                            <comment id="15998018" author="cziegeler" created="Fri, 5 May 2017 09:59:24 +0000"  >&lt;p&gt;I don&apos;t think that&apos;s possible as you would need a way to bypass the pid generation for factory pids &lt;/p&gt;</comment>
                            <comment id="16460911" author="kwin" created="Wed, 2 May 2018 11:38:01 +0000"  >&lt;p&gt;Now that OSGi R7 has been released, can we take another stab at this? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Which version of the configuration admin from Felix supports alias?&lt;/p&gt;</comment>
                            <comment id="16460913" author="cziegeler" created="Wed, 2 May 2018 11:41:23 +0000"  >&lt;p&gt;Version 1.9.0 of Felix Config Admin supports the alias/named factory configurations&lt;/p&gt;</comment>
                            <comment id="16651304" author="kwin" created="Tue, 16 Oct 2018 08:23:30 +0000"  >&lt;p&gt;Just for the record: With &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-7786&quot; title=&quot;Use R7 configuration admin supporting named factory configurations&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-7786&quot;&gt;&lt;del&gt;SLING-7786&lt;/del&gt;&lt;/a&gt; named factory configurations are supported now.&lt;/p&gt;</comment>
                            <comment id="16867794" author="akhoury" created="Wed, 19 Jun 2019 16:26:58 +0000"  >&lt;p&gt;I created a tool to clean up these duplicate factory instances:&lt;br/&gt;
&lt;a href=&quot;https://github.com/cqsupport/felix-osgi-utils/tree/master/felix-osgi-config-repair&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cqsupport/felix-osgi-utils/tree/master/felix-osgi-config-repair&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16922260" author="cziegeler" created="Wed, 4 Sep 2019 08:01:09 +0000"  >&lt;p&gt;This should be fixed with the latest versions&lt;/p&gt;</comment>
                            <comment id="17351487" author="henry kuijpers" created="Wed, 26 May 2021 05:05:53 +0000"  >&lt;p&gt;Please be wary in using the provided tool &quot;Felix OSGi Config Repair&quot;: This will only delete duplicated configurations (which is fine), randomly (and there is the problem). &lt;/p&gt;

&lt;p&gt;There is a reference towards those configuration files (including their pid, which includes the factory identifier) inside RegisteredResourceList.ser. &lt;/p&gt;

&lt;p&gt;That tool has a chance of deleting the configuration that is actually refered to in RegisteredResourceList.ser. &lt;/p&gt;

&lt;p&gt;It is better to somehow parse the .ser file and then do lookups to see if a configuration is still being used or not. &lt;/p&gt;

&lt;p&gt;There is a tool created by Adobe that maybe does things better: &lt;a href=&quot;https://helpx.adobe.com/nl/experience-manager/kb/AEM-does-not-pick-Filedatastore-location-and-start-successfully-on-upgrading-from-56x-to-6x.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://helpx.adobe.com/nl/experience-manager/kb/AEM-does-not-pick-Filedatastore-location-and-start-successfully-on-upgrading-from-56x-to-6x.html&lt;/a&gt;&lt;br/&gt;
However, we weren&apos;t able to easily start jar files anywhere on our servers. &lt;/p&gt;

&lt;p&gt;In our case, we fixed it by using a groovy script (in the groovy console in AEM) to list all configurations (using ConfigurationAdmin) and then looking up each pid in the RegisteredResourceList.ser file (that we read as a string containing the binary, because it wasn&apos;t easy to parse the file into a proper object tree). The ones we couldn&apos;t find, we deleted. &lt;/p&gt;

&lt;p&gt;This was important, because once the duplication happens, the old configuration will not be used anymore, in terms of being managed by the Sling installer.&lt;/p&gt;</comment>
                            <comment id="17352058" author="akhoury" created="Wed, 26 May 2021 20:29:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Henry+Kuijpers&quot; class=&quot;user-hover&quot; rel=&quot;Henry Kuijpers&quot;&gt;Henry Kuijpers&lt;/a&gt;&#160;thanks for letting me know.&#160; I will need to decommission that tool as you are right it doesn&apos;t address the fact those files are referenced.&lt;/p&gt;

&lt;p&gt;Can you provide your groovy script and steps instead please?&lt;/p&gt;</comment>
                            <comment id="17352074" author="henry kuijpers" created="Wed, 26 May 2021 20:57:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akhoury&quot; class=&quot;user-hover&quot; rel=&quot;akhoury&quot;&gt;akhoury&lt;/a&gt;, I&apos;m sorry, i had the intention of posting the script later on, as i could not access our git box from my mobile phone this morning. &lt;/p&gt;

&lt;p&gt;This is the groovy script i made. As i said, it&apos;s quick &amp;amp; dirty and definitely the way of verifying if a config is still present in the ser file can be improved big time; it currently takes advantage of how the ObjectOutputStream writes a string into the binary file. &lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.osgi.service.cm.Configuration;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.osgi.service.cm.ConfigurationAdmin;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.io.IOUtils;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Files;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Paths;

&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; = only factory configs, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; = *all* configurations
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; factoryConfigsOnly = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; = only print, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; = print + delete
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; dryRun = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ConfigurationPidComparator &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Comparator&amp;lt;Configuration&amp;gt; {
    @Override
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; compare(Configuration first, Configuration second) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; first.getPid().compareTo(second.getPid());
    }
}

&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; path = &lt;span class=&quot;code-quote&quot;&gt;&quot;crx-quickstart/launchpad/installer/RegisteredResourceList.ser&quot;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; contents = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(Files.readAllBytes(Paths.get(path)), &lt;span class=&quot;code-quote&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; configurations = getService(ConfigurationAdmin.class).listConfigurations(factoryConfigsOnly ? &lt;span class=&quot;code-quote&quot;&gt;&quot;(service.factoryPid=*)&quot;&lt;/span&gt; : &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
Arrays.sort(configurations, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ConfigurationPidComparator());

&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (configuration &lt;span class=&quot;code-keyword&quot;&gt;in&lt;/span&gt; configurations) {
    &lt;span class=&quot;code-keyword&quot;&gt;def&lt;/span&gt; pid = configuration.getPid()
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!contents.contains(pid)) {
        print pid + &lt;span class=&quot;code-quote&quot;&gt;&quot; does not exist!&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!dryRun) {
            configuration.delete();
            println &lt;span class=&quot;code-quote&quot;&gt;&quot; - Deleted&quot;&lt;/span&gt;;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            println &lt;span class=&quot;code-quote&quot;&gt;&quot; - Dry run, not deleting&quot;&lt;/span&gt;;
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In our case it&apos;s an AEM system, hence the crx-quickstart reference.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12972333">SLING-5745</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13175064">SLING-7786</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12991737">SLING-5887</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13027803">SLING-6393</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12840035" name="SLING-6313-0.diff" size="2632" author="rombert" created="Tue, 22 Nov 2016 14:44:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36ksv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6310] Sling Models OSGi Reference queue not cleared on component deactivation</title>
                <link>https://issues.apache.org/jira/browse/SLING-6310</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If the ModelAdapterFactory is deactivated, the disposal registry queue is not immediately cleared. This clearing should happen immediately upon component deactivation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13021962">SLING-6310</key>
            <summary>Sling Models OSGi Reference queue not cleared on component deactivation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Sat, 19 Nov 2016 22:25:13 +0000</created>
                <updated>Sat, 19 Nov 2016 22:33:46 +0000</updated>
                            <resolved>Sat, 19 Nov 2016 22:33:44 +0000</resolved>
                                                    <fixVersion>Sling Models Impl 1.3.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15679978" author="justinedelson" created="Sat, 19 Nov 2016 22:33:46 +0000"  >&lt;p&gt;fixed in r1770521 &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36jgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6305] LoginAdminWhitelist configuration is applied too late</title>
                <link>https://issues.apache.org/jira/browse/SLING-6305</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I&apos;ve been getting some local failures with the launchpad/testing module, and I noticed that the &lt;tt&gt;org.apache.sling.junit.scriptable&lt;/tt&gt; bundle was not whitelisted for loginAdministrative:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;19.11.2016 10:40:54.063 *ERROR* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStoreService)] org.apache.sling.junit.scriptable [org.apache.sling.junit.scriptable.ScriptableTestsProvider(204)] The activate method has thrown an exception (javax.jcr.LoginException: Bundle org.apache.sling.junit.scriptable is NOT whitelisted)
javax.jcr.LoginException: Bundle org.apache.sling.junit.scriptable is NOT whitelisted&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The configuration was correct, so I added a little debug information in the &lt;tt&gt;org.apache.sling.jcr.base&lt;/tt&gt; bundle to print the whitelist regexp in the same line as the whitelisted bundles. I noticed then that the component is activated several times, with only the last one actually setting the configuration&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;19.11.2016 10:40:51.630 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStoreService)] org.apache.sling.jcr.base.internal.LoginAdminWhitelist bypassWhitelist=false, whitelisted BSNs(17)=[org.apache.sling.discovery.base, org.apache.sling.discovery.commons, org.apache.sling.discovery.oak, org.apache.sling.extensions.webconsolesecurityprovider, org.apache.sling.i18n, org.apache.sling.installer.provider.jcr, org.apache.sling.jcr.base, org.apache.sling.jcr.contentloader, org.apache.sling.jcr.davex, org.apache.sling.jcr.jackrabbit.usermanager, org.apache.sling.jcr.oak.server, org.apache.sling.jcr.repoinit, org.apache.sling.jcr.resource, org.apache.sling.jcr.webconsole, org.apache.sling.resourceresolver, org.apache.sling.servlets.post, org.apache.sling.servlets.resolver], whitelistRegexp=null
19.11.2016 10:40:55.150 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.jackrabbit.oak.security.authentication.AuthenticationConfigurationImpl)] org.apache.sling.jcr.base.internal.LoginAdminWhitelist bypassWhitelist=false, whitelisted BSNs(17)=[org.apache.sling.discovery.base, org.apache.sling.discovery.commons, org.apache.sling.discovery.oak, org.apache.sling.extensions.webconsolesecurityprovider, org.apache.sling.i18n, org.apache.sling.installer.provider.jcr, org.apache.sling.jcr.base, org.apache.sling.jcr.contentloader, org.apache.sling.jcr.davex, org.apache.sling.jcr.jackrabbit.usermanager, org.apache.sling.jcr.oak.server, org.apache.sling.jcr.repoinit, org.apache.sling.jcr.resource, org.apache.sling.jcr.webconsole, org.apache.sling.resourceresolver, org.apache.sling.servlets.post, org.apache.sling.servlets.resolver], whitelistRegexp=null
19.11.2016 10:40:56.200 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.jackrabbit.oak.security.user.UserConfigurationImpl)] org.apache.sling.jcr.base.internal.LoginAdminWhitelist bypassWhitelist=false, whitelisted BSNs(17)=[org.apache.sling.discovery.base, org.apache.sling.discovery.commons, org.apache.sling.discovery.oak, org.apache.sling.extensions.webconsolesecurityprovider, org.apache.sling.i18n, org.apache.sling.installer.provider.jcr, org.apache.sling.jcr.base, org.apache.sling.jcr.contentloader, org.apache.sling.jcr.davex, org.apache.sling.jcr.jackrabbit.usermanager, org.apache.sling.jcr.oak.server, org.apache.sling.jcr.repoinit, org.apache.sling.jcr.resource, org.apache.sling.jcr.webconsole, org.apache.sling.resourceresolver, org.apache.sling.servlets.post, org.apache.sling.servlets.resolver], whitelistRegexp=null
19.11.2016 10:40:57.190 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.jackrabbit.oak.spi.security.user.action.DefaultAuthorizableActionProvider)] org.apache.sling.jcr.base.internal.LoginAdminWhitelist bypassWhitelist=false, whitelisted BSNs(17)=[org.apache.sling.discovery.base, org.apache.sling.discovery.commons, org.apache.sling.discovery.oak, org.apache.sling.extensions.webconsolesecurityprovider, org.apache.sling.i18n, org.apache.sling.installer.provider.jcr, org.apache.sling.jcr.base, org.apache.sling.jcr.contentloader, org.apache.sling.jcr.davex, org.apache.sling.jcr.jackrabbit.usermanager, org.apache.sling.jcr.oak.server, org.apache.sling.jcr.repoinit, org.apache.sling.jcr.resource, org.apache.sling.jcr.webconsole, org.apache.sling.resourceresolver, org.apache.sling.servlets.post, org.apache.sling.servlets.resolver], whitelistRegexp=null
19.11.2016 10:40:57.692 *INFO* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.base.internal.LoginAdminWhitelist)] org.apache.sling.jcr.base.internal.LoginAdminWhitelist bypassWhitelist=false, whitelisted BSNs(17)=[org.apache.sling.discovery.base, org.apache.sling.discovery.commons, org.apache.sling.discovery.oak, org.apache.sling.extensions.webconsolesecurityprovider, org.apache.sling.i18n, org.apache.sling.installer.provider.jcr, org.apache.sling.jcr.base, org.apache.sling.jcr.contentloader, org.apache.sling.jcr.davex, org.apache.sling.jcr.jackrabbit.usermanager, org.apache.sling.jcr.oak.server, org.apache.sling.jcr.repoinit, org.apache.sling.jcr.resource, org.apache.sling.jcr.webconsole, org.apache.sling.resourceresolver, org.apache.sling.servlets.post, org.apache.sling.servlets.resolver], whitelistRegexp=org.apache.sling.(launchpad|junit).*&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With the error appearing at 10:40:54. and the correct configuration being applied at 10:40:57, it&apos;s clear that the configuration should&apos;ve been applied much earlier.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt; - what are your thoughts on this?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13021927">SLING-6305</key>
            <summary>LoginAdminWhitelist configuration is applied too late</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Sat, 19 Nov 2016 09:59:35 +0000</created>
                <updated>Wed, 21 Dec 2016 15:42:28 +0000</updated>
                                            <version>JCR Base 2.4.2</version>
                                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15679215" author="jsedding" created="Sat, 19 Nov 2016 12:48:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Can you share a diff with your debugging changes please?&lt;/p&gt;

&lt;p&gt;I have done some more changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6285&quot; title=&quot;Implement LoginAdminWhitelist in JCR Base&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6285&quot;&gt;&lt;del&gt;SLING-6285&lt;/del&gt;&lt;/a&gt; that &lt;b&gt;may&lt;/b&gt; resolve this issue, because I register the &lt;tt&gt;SlingRepository&lt;/tt&gt; asynchronously after &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; becomes available. However, I suspect that the issue is not the activation of &lt;tt&gt;LoginAdminWhitelist&lt;/tt&gt; but rather its configuration. And I currently have no idea on how we could enforce that a specific configuration is present at any moment in time, in a system that allows dynamic re-configuration of components.&lt;/p&gt;</comment>
                            <comment id="15683094" author="rombert" created="Mon, 21 Nov 2016 10:11:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt; - the changes is below, just to make it easy to see all config parameters on one line:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/bundles/jcr/base/src/main/java/org/apache/sling/jcr/base/internal/LoginAdminWhitelist.java b/bundles/jcr/base/src/main/java/org/apache/sling/jcr/base/internal/LoginAdminWhitelist.java
index e41f745..c1f304a 100644
--- a/bundles/jcr/base/src/main/java/org/apache/sling/jcr/base/internal/LoginAdminWhitelist.java
+++ b/bundles/jcr/base/src/main/java/org/apache/sling/jcr/base/internal/LoginAdminWhitelist.java
@@ -113,7 +113,7 @@ public class LoginAdminWhitelist {
                         &quot;configuration of this service. This is NOT RECOMMENDED, for security reasons.&quot;
                 );
             } else {
-                LOG.info(&quot;bypassWhitelist=false, whitelisted BSNs({})={}&quot;, whitelistedBsn.size(), whitelistedBsn);
+                LOG.info(&quot;bypassWhitelist=false, whitelisted BSNs({})={}, whitelistRegexp={}&quot;, whitelistedBsn.size(), whitelistedBsn, whitelistRegexp);
             }
         }
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After a failed test run I run a &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;grep -e bypassWhitelist target/_-*/sling/logs/error.log&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; command to get the results.&lt;/p&gt;</comment>
                            <comment id="15683113" author="rombert" created="Mon, 21 Nov 2016 10:21:14 +0000"  >&lt;p&gt;Also posted on &lt;a href=&quot;https://lists.apache.org/thread.html/e952bba7ea58d5bb2a14fd3337e6c2bba6edf1498dbf0b67459b72fc@%3Cdev.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dev@sling - Ensuring that components have a configuration when started&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15686271" author="jsedding" created="Tue, 22 Nov 2016 10:02:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; I have tried to reproduce this locally without success (or failure for that matter). I think it is important to correlate these &quot;configuration events&quot; with the time of the service registration of &quot;LoginAdminWhitelist&quot;. Do you think it could help further analysis if we count (re-)configurations and log that count each time? In my test runs there is only one configuration event, but this may be different for you.&lt;/p&gt;</comment>
                            <comment id="15686663" author="rombert" created="Tue, 22 Nov 2016 12:49:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt; - how do you count reconfigurations - counter in the &lt;tt&gt;configure&lt;/tt&gt; method?&lt;/p&gt;</comment>
                            <comment id="15686875" author="jsedding" created="Tue, 22 Nov 2016 14:24:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; yes exactly. I used AtomicInteger#incrementAndGet() in the &lt;tt&gt;configure&lt;/tt&gt; method. This works, as it&apos;s annotated with both &lt;tt&gt;@Activate&lt;/tt&gt; and &lt;tt&gt;@Modified&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15692893" author="rombert" created="Thu, 24 Nov 2016 10:30:05 +0000"  >&lt;p&gt;For the record, the behaviour seems stable with&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java version &quot;1.7.0_79&quot;
Java(TM) SE Runtime Environment (build 1.7.0_79-b15)
Java HotSpot(TM) 64-Bit Server VM (build 24.79-b02, mixed mode)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but not with&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java version &quot;1.8.0_72&quot;
Java(TM) SE Runtime Environment (build 1.8.0_72-b15)
Java HotSpot(TM) 64-Bit Server VM (build 25.72-b15, mixed mode)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or with&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;openjdk version &quot;1.8.0_111&quot;
OpenJDK Runtime Environment (IcedTea 3.2.0) (suse-1.1-x86_64)
OpenJDK 64-Bit Server VM (build 25.111-b14, mixed mode)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="15692899" author="rombert" created="Thu, 24 Nov 2016 10:32:34 +0000"  >&lt;p&gt;I noticed that the incorrect Java 8 behaviour only happens on the first run. For for instance in launchpad/testing:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ mvn clean verify #fails
$ mvn verify #works
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which hints at some sort of timing issue when initially provisioning the instance.&lt;/p&gt;</comment>
                            <comment id="15704473" author="sseifert@pro-vision.de" created="Tue, 29 Nov 2016 07:15:07 +0000"  >&lt;p&gt;a good test object to test this problem seems to be this integration test:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling/tree/trunk/contrib/extensions/contextaware-config/integration-tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/tree/trunk/contrib/extensions/contextaware-config/integration-tests&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;on linux-based machines (e.g. ubuntu/trusty64) it seems to fail permanently with Java 8 (e.g. 1.8.0_92). error is always&lt;br/&gt;
&quot;Bundle org.apache.sling.junit.core is NOT whitelisted&quot;&lt;br/&gt;
although it is correctly whitelisted via regex in configuration.&lt;/p&gt;

&lt;p&gt;on a windows 10 machine with exactly the same Java 8 version (1.8.0_92) the error does &lt;em&gt;not&lt;/em&gt; occur - it is always running fine there!&lt;/p&gt;</comment>
                            <comment id="15705303" author="sseifert@pro-vision.de" created="Tue, 29 Nov 2016 13:33:32 +0000"  >&lt;p&gt;did more testing on different environments - it fails only on some (older linux environments):&lt;/p&gt;

&lt;p&gt;build &lt;font color=&quot;green&quot;&gt;&lt;b&gt;successful&lt;/b&gt;&lt;/font&gt;: Windows 10&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T17:41:47+01:00)
Maven home: C:\java\apache-maven-3.3.9\bin\..
Java version: 1.8.0_92, vendor: Oracle Corporation
Java home: C:\java\jdk1.8.0_92\jre
Default locale: de_DE, platform encoding: Cp1252
OS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;dos&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;build &lt;font color=&quot;green&quot;&gt;&lt;b&gt;successful&lt;/b&gt;&lt;/font&gt;: Ubuntu trusty-64  3.13.0-101-generic&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T16:41:47+00:00)
Maven home: /opt/apache-maven-3.3.9
Java version: 1.8.0_111, vendor: Oracle Corporation
Java home: /opt/jdk1.8.0_111/jre
Default locale: en_US, platform encoding: UTF-8
OS name: &quot;linux&quot;, version: &quot;3.13.0-101-generic&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;build &lt;font color=&quot;red&quot;&gt;&lt;b&gt;failed&lt;/b&gt;&lt;/font&gt;: Ubuntu trusty-64  3.13.0-91-generic&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T16:41:47+00:00)
Maven home: /opt/apache-maven-3.3.9
Java version: 1.8.0_111, vendor: Oracle Corporation
Java home: /opt/jdk1.8.0_111/jre
Default locale: en_US, platform encoding: UTF-8
OS name: &quot;linux&quot;, version: &quot;3.13.0-91-generic&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;build &lt;font color=&quot;red&quot;&gt;&lt;b&gt;failed&lt;/b&gt;&lt;/font&gt;: Debian Wheezy 3.2.0&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T16:41:47+00:00)
Maven home: /opt/apache-maven-3.3.9
Java version: 1.8.0_111, vendor: Oracle Corporation
Java home: /opt/jdk1.8.0_111/jre
Default locale: en_US, platform encoding: UTF-8
OS name: &quot;linux&quot;, version: &quot;3.2.0-4-amd64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;i tried multiple runs on each environment, it was always the same result.&lt;/p&gt;</comment>
                            <comment id="15767106" author="rombert" created="Wed, 21 Dec 2016 13:57:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; - the caconfig ITs seem to be working just fine now, I think that it&apos;s due to the upstream projects moving to LoginAdminWhiteList fragments, e.g.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  org.apache.sling.jcr.base.internal.LoginAdminWhitelist.fragment-composum
    whitelist.name=&quot;composum&quot;
    whitelist.bundles=[
    &quot;com.composum.core.commons&quot;,\
    ]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Additionally, the ITs were being hit by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6332&quot; title=&quot;Configurations with same PID but different features/run modes in provisioning model are ignored &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6332&quot;&gt;&lt;del&gt;SLING-6332&lt;/del&gt;&lt;/a&gt; - the original LoginAdminWhiteList config was declared in the &lt;tt&gt;sling&lt;/tt&gt; features, but the additional one was included in the &lt;tt&gt;integration-tests&lt;/tt&gt; one, so which one was being picked up was random.&lt;/p&gt;

&lt;p&gt;I would suggest that the caconfig ITs move to a config fragment as well, to be consistent.&lt;/p&gt;</comment>
                            <comment id="15767262" author="sseifert@pro-vision.de" created="Wed, 21 Dec 2016 15:06:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;I would suggest that the caconfig ITs move to a config fragment as well, to be consistent.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;did this in rev. 1775466&lt;/p&gt;</comment>
                            <comment id="15767346" author="jsedding" created="Wed, 21 Dec 2016 15:42:28 +0000"  >&lt;p&gt;Based on my analysis, I suspect the main reason why tests usually pass now is that the repo initialization is asynchronous now.&lt;br/&gt;
Normally, repo initialization takes a few seconds and used to block any other configs or bundles from being installed. Thus it now allows more time for configurations to be registered, leading to a higher success rate. Due to the fact that we&apos;re still relying on a (now heavily biased) race, strictly speaking, I would argue that the tests are not yet fully deterministic. But they seem to be good enough for the moment.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13020754">SLING-6285</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36j93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6299] SCD ClassCastException ServiceRegistration cannot be cast to Comparable</title>
                <link>https://issues.apache.org/jira/browse/SLING-6299</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following exception was observed:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.ClassCastException: org.apache.felix.framework.ServiceRegistrationImpl cannot be cast to java.lang.Comparable
        at java.util.concurrent.PriorityBlockingQueue.siftUpComparable(PriorityBlockingQueue.java:357)
        at java.util.concurrent.PriorityBlockingQueue.offer(PriorityBlockingQueue.java:489)
        at org.apache.sling.distribution.monitor.impl.MonitoringDistributionPackageBuilder.registerDistributionPackageMBean(MonitoringDistributionPackageBuilder.java:119)
        at org.apache.sling.distribution.monitor.impl.MonitoringDistributionPackageBuilder.createPackage(MonitoringDistributionPackageBuilder.java:65)
        at org.apache.sling.distribution.serialization.impl.vlt.VaultDistributionPackageBuilderFactory.createPackage(VaultDistributionPackageBuilderFactory.java:260)
        at org.apache.sling.distribution.packaging.impl.exporter.LocalDistributionPackageExporter.exportPackages(LocalDistributionPackageExporter.java:45)
        at org.apache.sling.distribution.agent.impl.SimpleDistributionAgent.exportPackages(SimpleDistributionAgent.java:214)
        at org.apache.sling.distribution.agent.impl.SimpleDistributionAgent.execute(SimpleDistributionAgent.java:182)
        at org.apache.sling.distribution.servlet.DistributionAgentServlet.doPost(DistributionAgentServlet.java:62)
        at org.apache.sling.api.servlets.SlingAllMethodsServlet.mayService(SlingAllMethodsServlet.java:149)
        at org.apache.sling.api.servlets.SlingSafeMethodsServlet.service(SlingSafeMethodsServlet.java:346)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is due to a violation of the contract of &lt;tt&gt;PriorityBlockingQueue&lt;/tt&gt;, which expects &lt;tt&gt;Comparable&lt;/tt&gt; objects OR a &lt;tt&gt;Comparator&lt;/tt&gt;. &lt;tt&gt;ServiceRegistration&lt;/tt&gt; is not comparable.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13021436">SLING-6299</key>
            <summary>SCD ClassCastException ServiceRegistration cannot be cast to Comparable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Nov 2016 11:40:59 +0000</created>
                <updated>Tue, 14 Feb 2017 09:30:57 +0000</updated>
                            <resolved>Thu, 17 Nov 2016 15:13:22 +0000</resolved>
                                    <version>Content Distribution Core 0.1.18</version>
                                    <fixVersion>Content Distribution Core 0.2.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15673520" author="jsedding" created="Thu, 17 Nov 2016 11:54:47 +0000"  >&lt;p&gt;Proposed patch. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=simone.tripodi&quot; class=&quot;user-hover&quot; rel=&quot;simone.tripodi&quot;&gt;simone.tripodi&lt;/a&gt; could you please review? Thanks.&lt;/p&gt;

&lt;p&gt;The change replaces a &lt;tt&gt;PriorityBlockingQueue&lt;/tt&gt; with an &lt;tt&gt;ArrayBlockingQueue&lt;/tt&gt;, thus theoretically changing the semantics. However, since &lt;tt&gt;ServiceRegistration&lt;/tt&gt; is not &lt;tt&gt;Comparable&lt;/tt&gt; the current code could never have worked, nor is an intention for some kind of &quot;natural ordering&quot; obvious. Insertion order (i.e. FIFO) seems to make more sense afaics.&lt;/p&gt;</comment>
                            <comment id="15673723" author="teofili" created="Thu, 17 Nov 2016 13:25:42 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt;, it looks good to me.&lt;/p&gt;</comment>
                            <comment id="15673956" author="jsedding" created="Thu, 17 Nov 2016 15:13:25 +0000"  >&lt;p&gt;Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt;. I have applied the patch in &lt;a href=&quot;https://svn.apache.org/r1770209&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1770209&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12839351" name="SLING-6299-jsedding.patch" size="937" author="jsedding" created="Thu, 17 Nov 2016 11:54:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36g7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6298] Resource Type-Based Registration of Sling Models doesn&apos;t work with alternate adapter type</title>
                <link>https://issues.apache.org/jira/browse/SLING-6298</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a model class has an annotation like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Model(adaptables = { Resource.class }, adapters = Component.class, resourceType = &lt;span class=&quot;code-quote&quot;&gt;&quot;sling/exp/&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt;&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ComponentImpl {
...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;then calling exportModelForResource() does not work because the resource type is associated with the adapter type ComponentImpl rather than the type Component.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13021418">SLING-6298</key>
            <summary>Resource Type-Based Registration of Sling Models doesn&apos;t work with alternate adapter type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Nov 2016 10:16:32 +0000</created>
                <updated>Thu, 17 Nov 2016 10:19:52 +0000</updated>
                            <resolved>Thu, 17 Nov 2016 10:19:51 +0000</resolved>
                                    <version>Sling Models Impl 1.3.0</version>
                                    <fixVersion>Sling Models Impl 1.3.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15673332" author="justinedelson" created="Thu, 17 Nov 2016 10:19:51 +0000"  >&lt;p&gt;fixed in r1770147&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36g3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6296] DefaultThreadPool causes warning when minPoolSize == 0</title>
                <link>https://issues.apache.org/jira/browse/SLING-6296</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;DefaultThreadPool inappropriately emits a warning when a pool has a min pool size of 0.&lt;/p&gt;

&lt;p&gt;A min pool size of 0 is supported by the downstream ThreadExpiringThreadPool, and is logically useful when &apos;empty&apos; is a reasonable size of a pool, e.g. when no work is apriori expected for the pool.&lt;br/&gt;
The code in question is:&lt;br/&gt;
 // Min pool size&lt;br/&gt;
        if (this.configuration.getMinPoolSize() &amp;lt; 1) &lt;/p&gt;
{
            this.configuration.setMinPoolSize(1);
            this.logger.warn(&quot;min-pool-size &amp;lt; 1 for pool \&quot;&quot; + this.name + &quot;\&quot;. Set to 1&quot;);
        }
&lt;p&gt;The downstream code in ThreadExpiringThreadPool only enforces this value is &amp;gt;= 0.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13021287">SLING-6296</key>
            <summary>DefaultThreadPool causes warning when minPoolSize == 0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="rryan@adobe.com">Rob Ryan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Nov 2016 22:08:48 +0000</created>
                <updated>Wed, 12 Apr 2017 08:52:51 +0000</updated>
                            <resolved>Wed, 12 Apr 2017 08:47:09 +0000</resolved>
                                    <version>Commons Threads 3.2.6</version>
                                    <fixVersion>Commons Threads 3.2.10</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15965565" author="kwin" created="Wed, 12 Apr 2017 08:46:13 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;http://svn.apache.org/r1791093&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1791093&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36fav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6295] StackOverflowException when Jackson tries to serialize a Resource object</title>
                <link>https://issues.apache.org/jira/browse/SLING-6295</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a model class has a property of type Resource (or a collection of Resource objects), attempting to serialize that class into a String produces a StackOverflow due to the getParent() method.&lt;/p&gt;

&lt;p&gt;The simplest solution would be to use Jackson mixins to skip the getParent() (and, for good measure, the getResourceResolver() and getResourceMetadata()) methods. A better solution would be to simply use the standard Sling JSON in these cases.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13021275">SLING-6295</key>
            <summary>StackOverflowException when Jackson tries to serialize a Resource object</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Nov 2016 21:45:25 +0000</created>
                <updated>Thu, 17 Nov 2016 02:09:38 +0000</updated>
                            <resolved>Thu, 17 Nov 2016 02:09:37 +0000</resolved>
                                    <version>Sling Models Jackson Exporter 1.0.0</version>
                                    <fixVersion>Sling Models Jackson Exporter 1.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15672409" author="justinedelson" created="Thu, 17 Nov 2016 02:09:38 +0000"  >&lt;p&gt;Fixed in r1770102.&lt;/p&gt;

&lt;p&gt;The actual code used for JSON output could not be reused from Sling Commons JSON but was adapted for use with the Jackson API.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36f87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6294] incorrect/incomplete error message in Sling Models Export Servlet</title>
                <link>https://issues.apache.org/jira/browse/SLING-6294</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The error messages in Export Servlet are badly worded and, in one case, don&apos;t log the actual exception making it hard to troubleshoot.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13021262">SLING-6294</key>
            <summary>incorrect/incomplete error message in Sling Models Export Servlet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Nov 2016 21:05:03 +0000</created>
                <updated>Wed, 16 Nov 2016 21:18:23 +0000</updated>
                            <resolved>Wed, 16 Nov 2016 21:18:22 +0000</resolved>
                                    <version>Sling Models Impl 1.3.0</version>
                                    <fixVersion>Sling Models Impl 1.3.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15671670" author="justinedelson" created="Wed, 16 Nov 2016 21:18:22 +0000"  >&lt;p&gt;fixed in r1770055&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36f5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6292] jcr.js.nodetypes tests fail when run in a different timezone</title>
                <link>https://issues.apache.org/jira/browse/SLING-6292</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The NodeTypes module JSON comparison tests expect the formatted date to be in the &apos;+01:00&apos; time zone, most likely were developed in the Europe/Berlin timezone &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Of course, this fails when run in other timezones, for instance on Jenkins which has the timezone set to Etc/GMT or anywhere else in the world.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sandro&quot; class=&quot;user-hover&quot; rel=&quot;sandro&quot;&gt;sandro&lt;/a&gt; - I think you&apos;re the best person to look into this, would be great to fix as it would remove two failed jobs on Jenkins.&lt;/p&gt;

&lt;p&gt;A sample test failure is:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 13, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 0.113 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.jcr.js.nodetypes.PropertyDefGenerationTest
testCompleteDatePropertyDefinition(org.apache.sling.jcr.js.nodetypes.PropertyDefGenerationTest)  Time elapsed: 0.037 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
org.junit.ComparisonFailure: Actual JSON: {&quot;ntWithPropertyDefs&quot;: {&quot;declaredPropertyDefinitions&quot;: [{
  &quot;name&quot;: &quot;datePropertyDef&quot;,
  &quot;autoCreated&quot;: true,
  &quot;mandatory&quot;: true,
  &quot;protected&quot;: true,
  &quot;onParentVersion&quot;: &quot;VERSION&quot;,
  &quot;defaultValues&quot;: [{
    &quot;date&quot;: &quot;2012-02-01T00:00:00.000Z&quot;,
    &quot;type&quot;: &quot;Date&quot;
    }],
  &quot;requiredType&quot;: &quot;Date&quot;,
  &quot;valueConstraints&quot;: [&quot;2012-04-01T00:00:00Z&quot;],
  &quot;multiple&quot;: true
  }]}}

Expected JSON: {  &quot;ntWithPropertyDefs&quot;: {    &quot;declaredPropertyDefinitions&quot;: [      {        &quot;defaultValues&quot;: [          {            &quot;date&quot;: &quot;2012-02-01T00:00:00.000+01:00&quot;,            &quot;type&quot;: &quot;Date&quot;          }        ],        &quot;requiredType&quot;: &quot;Date&quot;,        &quot;valueConstraints&quot;: [          &quot;2012-04-01T00:00:00Z&quot;        ],        &quot;multiple&quot;: true,        &quot;autoCreated&quot;: true,        &quot;mandatory&quot;: true,        &quot;protected&quot;: true,        &quot;onParentVersion&quot;: &quot;VERSION&quot;,        &quot;name&quot;: &quot;datePropertyDef&quot;      }    ]  }}: objects differed at key [ntWithPropertyDefs];: objects differed at key [declaredPropertyDefinitions];: arrays first differed at element [0];: objects differed at key [defaultValues];: arrays first differed at element [0];: objects differed at key [date]; expected:&amp;lt;...2-02-01T00:00:00.000[+01:00]&amp;gt; but was:&amp;lt;...2-02-01T00:00:00.000[Z]&amp;gt;
	at org.junit.Assert.assertEquals(Assert.java:115)
	at org.apache.sling.jcr.js.nodetypes.test.JSONAssert.assertEquals(JSONAssert.java:173)
	at org.apache.sling.jcr.js.nodetypes.test.JSONAssert.assertEquals(JSONAssert.java:99)
	at org.apache.sling.jcr.js.nodetypes.test.JSONAssert.assertEquals(JSONAssert.java:170)
	at org.apache.sling.jcr.js.nodetypes.test.JSONAssert.assertEquals(JSONAssert.java:99)
	at org.apache.sling.jcr.js.nodetypes.test.JSONAssert.assertEquals(JSONAssert.java:170)
	at org.apache.sling.jcr.js.nodetypes.test.JSONAssert.assertEquals(JSONAssert.java:167)
	at org.apache.sling.jcr.js.nodetypes.mock.MockNodeTypeGenerator.assertEqualsWithServletResult(MockNodeTypeGenerator.java:143)
	at org.apache.sling.jcr.js.nodetypes.PropertyDefGenerationTest.testCompletePropertyDefinition(PropertyDefGenerationTest.java:123)
	at org.apache.sling.jcr.js.nodetypes.PropertyDefGenerationTest.testCompleteDatePropertyDefinition(PropertyDefGenerationTest.java:70)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13021171">SLING-6292</key>
            <summary>jcr.js.nodetypes tests fail when run in a different timezone</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sandro">Sandro Boehme</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Wed, 16 Nov 2016 15:29:49 +0000</created>
                <updated>Wed, 16 Nov 2016 20:33:22 +0000</updated>
                            <resolved>Wed, 16 Nov 2016 20:31:52 +0000</resolved>
                                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15671530" author="sandro" created="Wed, 16 Nov 2016 20:31:54 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, Berlin is the epicenter of Sling at one time of the year - shouldn&apos;t that be enough to expect everybody to use this timezone? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;br/&gt;
Thanks for reporting so specific and also for the pom changes!&lt;br/&gt;
I fixed the comparison to always use UTC.&lt;/p&gt;</comment>
                            <comment id="15671535" author="rombert" created="Wed, 16 Nov 2016 20:33:22 +0000"  >&lt;p&gt;&amp;gt; Hey Robert Munteanu, Berlin is the epicenter of Sling at one time of the year - shouldn&apos;t that be enough to expect everybody to use this timezone?  &lt;/p&gt;

&lt;p&gt;We should consider it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks a lot for the quick fix!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36el3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6290] Add a &apos;rebuildDaily&apos; property for Jenkins jobs</title>
                <link>https://issues.apache.org/jira/browse/SLING-6290</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As a spin-off of &lt;a href=&quot;https://lists.apache.org/thread.html/ceffb905aed296e6d985afbc160c95c9ad6e1f9cb2c0e187f223284d@%3Cdev.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dev@sling: Build failures&lt;/a&gt; we discussed adding a way of triggering some build jobs periodically, to alleviate the problem of &apos;hidden&apos; dependencies declared using the provisioning model or pax-exam.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13021154">SLING-6290</key>
            <summary>Add a &apos;rebuildDaily&apos; property for Jenkins jobs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Nov 2016 14:14:44 +0000</created>
                <updated>Wed, 16 Nov 2016 14:27:34 +0000</updated>
                            <resolved>Wed, 16 Nov 2016 14:27:33 +0000</resolved>
                                                                    <component>CI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15670540" author="rombert" created="Wed, 16 Nov 2016 14:27:33 +0000"  >&lt;p&gt;Implemented in &lt;a href=&quot;https://svn.apache.org/r1769989&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1769989&lt;/a&gt; and activated for the oak-server module.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36ehb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6284] PreparePackageMojo.testSubsystemBaseGeneration often fails on Jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-6284</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The test seems to fail every other run. The error is&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.maven.plugin.MojoExecutionException: Problem creating subsystem .esa file /tmp/PreparePackageMojoTest1894864848680720292/slingstart-tmp/test1.subsystem-base
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214)
	at java.nio.file.Files.newByteChannel(Files.java:317)
	at java.nio.file.Files.newByteChannel(Files.java:363)
	at java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:380)
	at java.nio.file.Files.newInputStream(Files.java:108)
	at java.nio.file.Files.copy(Files.java:2895)
	at org.apache.sling.maven.slingstart.PreparePackageMojo.createSubsystemBaseFile(PreparePackageMojo.java:351)
	at org.apache.sling.maven.slingstart.PreparePackageMojo.buildSubsystemBase(PreparePackageMojo.java:244)
	at org.apache.sling.maven.slingstart.PreparePackageMojo.buildContentsMap(PreparePackageMojo.java:224)
	at org.apache.sling.maven.slingstart.PreparePackageMojo.prepareGlobal(PreparePackageMojo.java:130)
	at org.apache.sling.maven.slingstart.PreparePackageMojo.execute(PreparePackageMojo.java:120)
	at org.apache.sling.maven.slingstart.PreparePackageMojoTest.testSubsystemBaseGeneration(PreparePackageMojoTest.java:176)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13020492">SLING-6284</key>
            <summary>PreparePackageMojo.testSubsystemBaseGeneration often fails on Jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Mon, 14 Nov 2016 12:18:03 +0000</created>
                <updated>Thu, 4 Jan 2018 10:04:40 +0000</updated>
                            <resolved>Wed, 14 Dec 2016 11:25:57 +0000</resolved>
                                    <version>Slingstart Maven Plugin 1.6.0</version>
                                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15663786" author="rombert" created="Mon, 14 Nov 2016 12:22:13 +0000"  >&lt;p&gt;Made the mojo fail fast if a directory could not be created in &lt;a href=&quot;https://svn.apache.org/r1769613&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1769613&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15747586" author="cziegeler" created="Wed, 14 Dec 2016 07:50:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Is there anything else we can/should do here?&lt;/p&gt;</comment>
                            <comment id="15748088" author="rombert" created="Wed, 14 Dec 2016 11:25:57 +0000"  >&lt;p&gt;Haven&apos;t seen this fail in some time, resolving as cannot reproduce&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13125896">SLING-7318</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36ae7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6283] Exclusion of observations with listeners using patterns is too aggressive</title>
                <link>https://issues.apache.org/jira/browse/SLING-6283</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If for example a resource change listeners registers for &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/libs/**/*.jsp
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and a resource provider is registered at /libs/.servlet&lt;/p&gt;

&lt;p&gt;Then the above listener is excluded. Path.matches() is defined the way that it returns true in this case. The API of Path is fine, however it is not usable for the resource resolver implementation&lt;/p&gt;</description>
                <environment></environment>
        <key id="13020483">SLING-6283</key>
            <summary>Exclusion of observations with listeners using patterns is too aggressive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Nov 2016 11:41:21 +0000</created>
                <updated>Wed, 30 Nov 2016 15:03:16 +0000</updated>
                            <resolved>Mon, 14 Nov 2016 11:46:32 +0000</resolved>
                                    <version>Resource Resolver 1.5.2</version>
                                    <fixVersion>Resource Resolver 1.5.4</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36ac7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6280] Add logging to installer FileDataStore class</title>
                <link>https://issues.apache.org/jira/browse/SLING-6280</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We should add some debug logging to the installer/core &lt;tt&gt;FileDataStore&lt;/tt&gt; class, for troubleshooting.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13020359">SLING-6280</key>
            <summary>Add logging to installer FileDataStore class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Sun, 13 Nov 2016 15:41:47 +0000</created>
                <updated>Tue, 31 Jan 2017 07:04:27 +0000</updated>
                            <resolved>Sun, 13 Nov 2016 16:35:21 +0000</resolved>
                                    <version>Installer Core 3.8.0</version>
                                    <fixVersion>Installer Core 3.8.2</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15661738" author="bdelacretaz" created="Sun, 13 Nov 2016 16:35:21 +0000"  >&lt;p&gt;Implemented in &lt;a href=&quot;http://svn.apache.org/r1769517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1769517&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i369kn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6277] CAConfig BND Plugin: Do not generate bundle header when no class names found</title>
                <link>https://issues.apache.org/jira/browse/SLING-6277</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;when no annotation with @Configuration annotation found, the header &lt;tt&gt;Sling-ContextAware-Configuration-Classes&lt;/tt&gt; should not be generated at all.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13020206">SLING-6277</key>
            <summary>CAConfig BND Plugin: Do not generate bundle header when no class names found</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>contextaware-config</label>
                    </labels>
                <created>Fri, 11 Nov 2016 22:05:47 +0000</created>
                <updated>Mon, 19 Dec 2016 12:02:21 +0000</updated>
                            <resolved>Thu, 17 Nov 2016 18:22:50 +0000</resolved>
                                    <version>Context-Aware Configuration bnd Plugin 1.0.0</version>
                                    <fixVersion>Context-Aware Configuration bnd Plugin 1.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="15674444" author="sseifert@pro-vision.de" created="Thu, 17 Nov 2016 18:22:50 +0000"  >&lt;p&gt;Completed: At revision: 1769352&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i368mn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6275] Unable to impersonate user with surrogate pair character</title>
                <link>https://issues.apache.org/jira/browse/SLING-6275</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When trying to impersonate to a user having surrogate pair character (e.g. &quot;&#20013;&#25991;test&quot;), SlingAuthenticator throws an error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;23.03.2016 10:34:37.637 *ERROR* [qtp1315207446-3359] org.apache.felix.http.jetty Exception &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; processing request to /home/users/I/ (java.lang.IllegalArgumentException: Illegal character in cookie value)
java.lang.IllegalArgumentException: Illegal character in cookie value
	at org.eclipse.jetty.server.Response.isQuoteNeededForCookie(Response.java:405)
	at org.eclipse.jetty.server.Response.addSetCookie(Response.java:353)
	at org.eclipse.jetty.server.Response.addCookie(Response.java:239)
	at javax.servlet.http.HttpServletResponseWrapper.addCookie(HttpServletResponseWrapper.java:56)
	at org.apache.sling.auth.core.impl.SlingAuthenticator.sendSudoCookie(SlingAuthenticator.java:1225)
	at org.apache.sling.auth.core.impl.SlingAuthenticator.setSudoCookie(SlingAuthenticator.java:1344)
	at org.apache.sling.auth.core.impl.SlingAuthenticator.getResolver(SlingAuthenticator.java:777)
	at org.apache.sling.auth.core.impl.SlingAuthenticator.doHandleSecurity(SlingAuthenticator.java:495)
	at org.apache.sling.auth.core.impl.SlingAuthenticator.handleSecurity(SlingAuthenticator.java:449)
	at org.apache.sling.engine.impl.SlingHttpContext.handleSecurity(SlingHttpContext.java:121)
	at org.apache.felix.http.base.internal.service.ServletContextImpl.handleSecurity(ServletContextImpl.java:421)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:57)
	at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:124)
	at org.apache.felix.http.base.internal.DispatcherServlet.service(DispatcherServlet.java:61)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is due to the implementation of SlingAuthenticator#quoteCookieValue() that cannot handle surrogate pair character.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13020100">SLING-6275</key>
            <summary>Unable to impersonate user with surrogate pair character</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="christanto">Christanto</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Nov 2016 12:40:09 +0000</created>
                <updated>Tue, 15 Nov 2016 09:14:13 +0000</updated>
                            <resolved>Fri, 11 Nov 2016 14:46:30 +0000</resolved>
                                    <version>Auth Core 1.3.12</version>
                                    <fixVersion>Auth Core 1.3.22</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15656982" author="asanso" created="Fri, 11 Nov 2016 12:40:35 +0000"  >&lt;p&gt;The fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5625&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-5625&lt;/a&gt; was not complete.&lt;/p&gt;</comment>
                            <comment id="15657235" author="asanso" created="Fri, 11 Nov 2016 14:46:30 +0000"  >&lt;p&gt;fixed in r1769285 and r1769292&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12952783">SLING-5625</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i367z3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6274] Busy loop in jcr installer</title>
                <link>https://issues.apache.org/jira/browse/SLING-6274</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;It seems there is at least sometimes a busy loop:&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Running watch cycle.&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Found child nodes &lt;span class=&quot;error&quot;&gt;&amp;#91;e693e4e4-4fab-4a71-aa5d-69170a605f1a&amp;#93;&lt;/span&gt; at path /system/sling/installer/jcr/pauseInstallation. Scanning would be paused&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Running watch cycle.&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Found child nodes &lt;span class=&quot;error&quot;&gt;&amp;#91;e693e4e4-4fab-4a71-aa5d-69170a605f1a&amp;#93;&lt;/span&gt; at path /system/sling/installer/jcr/pauseInstallation. Scanning would be paused&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Running watch cycle.&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Found child nodes &lt;span class=&quot;error&quot;&gt;&amp;#91;e693e4e4-4fab-4a71-aa5d-69170a605f1a&amp;#93;&lt;/span&gt; at path /system/sling/installer/jcr/pauseInstallation. Scanning would be paused&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Running watch cycle.&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Found child nodes &lt;span class=&quot;error&quot;&gt;&amp;#91;e693e4e4-4fab-4a71-aa5d-69170a605f1a&amp;#93;&lt;/span&gt; at path /system/sling/installer/jcr/pauseInstallation. Scanning would be paused&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Running watch cycle.&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Found child nodes &lt;span class=&quot;error&quot;&gt;&amp;#91;e693e4e4-4fab-4a71-aa5d-69170a605f1a&amp;#93;&lt;/span&gt; at path /system/sling/installer/jcr/pauseInstallation. Scanning would be paused&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Running watch cycle.&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Found child nodes &lt;span class=&quot;error&quot;&gt;&amp;#91;e693e4e4-4fab-4a71-aa5d-69170a605f1a&amp;#93;&lt;/span&gt; at path /system/sling/installer/jcr/pauseInstallation. Scanning would be paused&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Running watch cycle.&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Found child nodes &lt;span class=&quot;error&quot;&gt;&amp;#91;e693e4e4-4fab-4a71-aa5d-69170a605f1a&amp;#93;&lt;/span&gt; at path /system/sling/installer/jcr/pauseInstallation. Scanning would be paused&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Running watch cycle.&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Found child nodes &lt;span class=&quot;error&quot;&gt;&amp;#91;e693e4e4-4fab-4a71-aa5d-69170a605f1a&amp;#93;&lt;/span&gt; at path /system/sling/installer/jcr/pauseInstallation. Scanning would be paused&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Running watch cycle.&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Found child nodes &lt;span class=&quot;error&quot;&gt;&amp;#91;e693e4e4-4fab-4a71-aa5d-69170a605f1a&amp;#93;&lt;/span&gt; at path /system/sling/installer/jcr/pauseInstallation. Scanning would be paused&lt;/p&gt;

&lt;p&gt;09.11.2016 01:45:38.067 &lt;b&gt;DEBUG&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;JcrInstaller.1&amp;#93;&lt;/span&gt; org.apache.sling.installer.provider.jcr.impl.JcrInstaller Running watch cycle.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13020053">SLING-6274</key>
            <summary>Busy loop in jcr installer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Nov 2016 08:58:19 +0000</created>
                <updated>Thu, 15 Dec 2016 13:16:53 +0000</updated>
                            <resolved>Sun, 13 Nov 2016 15:08:09 +0000</resolved>
                                    <version>JCR Installer 3.1.18</version>
                                    <fixVersion>JCR Installer 3.1.22</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15661609" author="bdelacretaz" created="Sun, 13 Nov 2016 14:58:38 +0000"  >&lt;p&gt;I can reproduce this on the trunk launchpad/builder by creating two nodes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;/system/sling/installer/jcr/pauseInstallation/foo&lt;/tt&gt; which activates the installer pause mode&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;libs/x/install&lt;/tt&gt; or any other new installable folder which causes the pause to become effective.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;When this happens, the installer doesn&apos;t wait between calls to runOneCycle, as it usually does, and calls it in a tight loop.&lt;/p&gt;</comment>
                            <comment id="15661621" author="bdelacretaz" created="Sun, 13 Nov 2016 15:08:10 +0000"  >&lt;p&gt;Fixed in revision 1769503 by adding a sleep when scanning is disabled&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i367on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6272] Comments in the provisioning model get lost</title>
                <link>https://issues.apache.org/jira/browse/SLING-6272</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a model is merged, the comments get lost.&lt;br/&gt;
As the slingstart maven plugin is using merging for processing the models, the resulting artifacts have no comments anymore either&lt;/p&gt;</description>
                <environment></environment>
        <key id="13020028">SLING-6272</key>
            <summary>Comments in the provisioning model get lost</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Nov 2016 06:37:07 +0000</created>
                <updated>Fri, 16 Dec 2016 12:52:26 +0000</updated>
                            <resolved>Fri, 11 Nov 2016 06:47:13 +0000</resolved>
                                                    <fixVersion>Sling Provisioning Model 1.8.0</fixVersion>
                    <fixVersion>Slingstart Maven Plugin 1.7.0</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i367j3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6271] ContentDispositionFilter can suppress content type upon request forwarding</title>
                <link>https://issues.apache.org/jira/browse/SLING-6271</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4604&quot; title=&quot;Multiple Content-Disposition headers added&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4604&quot;&gt;&lt;del&gt;SLING-4604&lt;/del&gt;&lt;/a&gt; Alessandro Bonfatti noted a use case whereby a response would contain no Content-Type header despite a similar non-forwarded request would have a Content-Type. He further traced it to the ContentDispositionFilter and the change where I introduced a shortcut in cases the same content type was being set repeatedly.&lt;/p&gt;

&lt;p&gt;The scenario is:&lt;br/&gt;
setContentType is called&lt;br/&gt;
RequestDispatcher.forward is used to forward a request to a new servlet for further handling. &lt;br/&gt;
setContentType is called.&lt;/p&gt;

&lt;p&gt;As of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4604&quot; title=&quot;Multiple Content-Disposition headers added&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-4604&quot;&gt;&lt;del&gt;SLING-4604&lt;/del&gt;&lt;/a&gt;, the second setContentType call will be ignored if it sets the same content type. But even if it &lt;b&gt;is&lt;/b&gt; the same, setContentType needs to be called again because request forwarding clears all headers with response.reset().&lt;/p&gt;

&lt;p&gt;I will attach two patches, one (simple) very simple, and the best performing. The other (conservative) is more complex, but should still perform adequately and is conservative in the following senses:&lt;br/&gt;
It will always call super.setContentType when its setContentType is invoked.&lt;br/&gt;
On each setContentType it will re-apply the Content-Disposition header if there is not one present and the &apos;attachment&apos; value is called for by the configuration.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019969">SLING-6271</key>
            <summary>ContentDispositionFilter can suppress content type upon request forwarding</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="rryan@adobe.com">Rob Ryan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Nov 2016 22:26:51 +0000</created>
                <updated>Tue, 22 Nov 2016 06:58:22 +0000</updated>
                            <resolved>Wed, 16 Nov 2016 12:55:20 +0000</resolved>
                                    <version>Security 1.1.0</version>
                                    <fixVersion>Security 1.1.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15655391" author="rryan@adobe.com" created="Thu, 10 Nov 2016 22:33:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asanso&quot; class=&quot;user-hover&quot; rel=&quot;asanso&quot;&gt;asanso&lt;/a&gt; Can you review these and let me know which approach you favor, and or commit whichever one that is &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thanks.&lt;/p&gt;</comment>
                            <comment id="15670367" author="asanso" created="Wed, 16 Nov 2016 12:55:20 +0000"  >&lt;p&gt;fixed in rev. r1769970. Applied patch from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rryan%40adobe.com&quot; class=&quot;user-hover&quot; rel=&quot;rryan@adobe.com&quot;&gt;rryan@adobe.com&lt;/a&gt; (the simple one). Thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12838448" name="conservative.patch.txt" size="24880" author="rryan@adobe.com" created="Thu, 10 Nov 2016 22:30:37 +0000"/>
                            <attachment id="12838449" name="simple.patch.txt" size="775" author="rryan@adobe.com" created="Thu, 10 Nov 2016 22:30:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3675z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6270] slf4j-mdc build fails on Java 8</title>
                <link>https://issues.apache.org/jira/browse/SLING-6270</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The bundles fail to start, I suspect due to an old Felix framework version, similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5119&quot; title=&quot;Jaas module build fails with JDK 8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5119&quot;&gt;&lt;del&gt;FELIX-5119&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019963">SLING-6270</key>
            <summary>slf4j-mdc build fails on Java 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Nov 2016 22:06:00 +0000</created>
                <updated>Thu, 10 Nov 2016 22:11:18 +0000</updated>
                            <resolved>Thu, 10 Nov 2016 22:11:17 +0000</resolved>
                                                    <fixVersion>SLF4J MDC Filter 1.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15655315" author="rombert" created="Thu, 10 Nov 2016 22:11:18 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1769209&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1769209&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3674n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6269] DynamicClassLoaderIT fails when the org.apache.sling.commons.osgi:2.1.0 Maven artifact is not available locally</title>
                <link>https://issues.apache.org/jira/browse/SLING-6269</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following code snippet tries to load the OSGi bundle from the filesystem&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; URL url = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URL(mavenBundle(&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.commons.osgi&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;2.1.0&quot;&lt;/span&gt;).getURL());
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; InputStream is = url.openStream();
        Bundle osgiBundle = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            osgiBundle = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.bundleContext.installBundle(url.toExternalForm(), is);
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { is.close(); } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; ( &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; IOException ignore) {}
        }
        assertNotNull(osgiBundle);
        assertEquals(Bundle.INSTALLED, osgiBundle.getState());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Even though it&apos;s wrapped in a &lt;tt&gt;mavenBundle&lt;/tt&gt; call, the bundle is not actually downloaded, so if the bundle is not available locally the test will fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019873">SLING-6269</key>
            <summary>DynamicClassLoaderIT fails when the org.apache.sling.commons.osgi:2.1.0 Maven artifact is not available locally</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Thu, 10 Nov 2016 15:52:52 +0000</created>
                <updated>Wed, 20 Sep 2017 11:34:15 +0000</updated>
                            <resolved>Thu, 10 Nov 2016 21:40:15 +0000</resolved>
                                                    <fixVersion>Commons ClassLoader 1.3.8</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15654478" author="rombert" created="Thu, 10 Nov 2016 16:31:58 +0000"  >&lt;p&gt;Fix applied in &lt;a href=&quot;https://svn.apache.org/r1769150&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1769150&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15654496" author="rombert" created="Thu, 10 Nov 2016 16:40:15 +0000"  >&lt;p&gt;Reopening, still fails on Jenkins&lt;/p&gt;</comment>
                            <comment id="15655212" author="rombert" created="Thu, 10 Nov 2016 21:32:37 +0000"  >&lt;p&gt;Pulled in the bundle via Maven in &lt;a href=&quot;https://svn.apache.org/r1769199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1769199&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i366kn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6268] Error reported for bundle projects: Conflicting lifecycle mapping metadata</title>
                <link>https://issues.apache.org/jira/browse/SLING-6268</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;With a locally built Sling IDE 1.2.0 and the locally checked out Sling bundles I get the following kind of errors:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Conflicting lifecycle mapping metadata (project packaging type=&quot;bundle&quot;). To enable full functionality, remove the conflicting mapping and run Maven-&amp;gt;Update Project Configuration.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This one is for example for org.apache.sling.api . I do have Tycho Project Configurators 0.8.0.201409231215 installed. I&apos;ll attach my configuration details, if needed.&lt;/p&gt;

&lt;p&gt;The whole Sling checkout is at r1768748.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019790">SLING-6268</key>
            <summary>Error reported for bundle projects: Conflicting lifecycle mapping metadata</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Nov 2016 10:01:11 +0000</created>
                <updated>Sun, 21 Jan 2018 20:23:31 +0000</updated>
                            <resolved>Fri, 18 Nov 2016 13:22:49 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.2.0</version>
                                    <fixVersion>Sling Eclipse IDE 1.2.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15653641" author="rombert" created="Thu, 10 Nov 2016 10:03:43 +0000"  >&lt;p&gt;Also attached my full eclipse configuration details - &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12838333/12838333_eclipse-config.txt&quot; title=&quot;eclipse-config.txt attached to SLING-6268&quot;&gt;eclipse-config.txt&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; I think it would be good to fix this for the next release, the error is pretty confusing and I see now way for me - as a user - to fix it.&lt;/p&gt;</comment>
                            <comment id="15654400" author="kwin" created="Thu, 10 Nov 2016 15:57:07 +0000"  >&lt;p&gt;That is very weird. I wonder which other extension would provide a lifecycle metadata for packaging &quot;bundle&quot;. One part is for sure m2e-tycho, but Sling IDE itself does not provide one. Therefore I have only seen different error message like &quot;Duplicate bundle executions found. Please remove any explicitly defined bundle executions in your pom.xml&quot; which is coming from m2e-tycho (see also &lt;a href=&quot;http://sling.apache.org/documentation/development/ide-tooling/ide-tooling-incremental-build.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/development/ide-tooling/ide-tooling-incremental-build.html&lt;/a&gt;). &lt;/p&gt;

&lt;p&gt;Feel free to try out my gerrit change at &lt;a href=&quot;https://git.eclipse.org/r/#/c/82840/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git.eclipse.org/r/#/c/82840/&lt;/a&gt; for m2e to figure out which extensions are actually conflicting here. Alternatively please set a breakpoint in &lt;tt&gt;org.eclipse.m2e.core.internal.lifecyclemapping.LifecycleMappingFactory.java&lt;/tt&gt; around line 560. This should allow you to figure out which plugins are causing the conflict.&lt;/p&gt;</comment>
                            <comment id="15654453" author="kwin" created="Thu, 10 Nov 2016 16:22:41 +0000"  >&lt;p&gt;With the latest Sling IDE (1.1.1.qualifier) with &lt;tt&gt;org.sonatype.tycho.m2e&lt;/tt&gt; installed in version  &lt;tt&gt;0.8.0.201409231215&lt;/tt&gt; I get a different error message: &lt;tt&gt;Conflicting lifecycle mapping (plugin execution &quot;org.apache.felix:maven-bundle-plugin:3.2.0:bundle (execution: default-bundle, phase: package)&quot;). To enable full functionality, remove the conflicting mapping and run Maven-&amp;gt;Update Project Configuration.&lt;/tt&gt;. This is expected as both m2e-tycho as well as Sling IDE bind their configurators to the bundle &lt;tt&gt;goal&lt;/tt&gt; of the &lt;tt&gt;m-b-p&lt;/tt&gt;. Don&apos;t know why we didn&apos;t have the issue before, I still need to investigate. The active extension seem to depend on the plugin id. Asked about multiple Eclipse plugins providing lifecycle mappings for the same Maven plugin goal on the m2e-users mailing list (&lt;a href=&quot;http://dev.eclipse.org/mhonarc/lists/m2e-users/msg05618.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://dev.eclipse.org/mhonarc/lists/m2e-users/msg05618.html&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;About the error you experienced I am pretty sure you are acting on an old version of the &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/tooling/ide/eclipse-m2e-ui/lifecycle-mapping-metadata.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/tooling/ide/eclipse-m2e-ui/lifecycle-mapping-metadata.xml&lt;/a&gt; which had a definition for packaging type &quot;bundle&quot; (in the old revision &lt;a href=&quot;https://github.com/apache/sling/commit/9b87230177c8ded8f6d5b86099aeda3818e5b438&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/commit/9b87230177c8ded8f6d5b86099aeda3818e5b438&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="15656405" author="kwin" created="Fri, 11 Nov 2016 07:33:15 +0000"  >&lt;p&gt;It seems that multiple Eclipse plugins are only allowed to supply a lifecycle mapping for the same goal when one is marked &quot;secondary&quot; to the other (&lt;a href=&quot;http://dev.eclipse.org/mhonarc/lists/m2e-users/msg05619.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://dev.eclipse.org/mhonarc/lists/m2e-users/msg05619.html&lt;/a&gt;). This was the case in the past with &lt;a href=&quot;https://github.com/apache/sling/blob/eb1a51485d442b6d7a56670139ba0c46bf3434cf/tooling/ide/eclipse-m2e-ui/plugin.xml#L54&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/eb1a51485d442b6d7a56670139ba0c46bf3434cf/tooling/ide/eclipse-m2e-ui/plugin.xml#L54&lt;/a&gt;. Unfortunately this line prevents the Sling IDE configurator from being executed when m2e-tycho is not installed.&lt;/p&gt;

&lt;p&gt;Therefore we need to rely on the new feature &quot;runsBefore&quot; being introduced with m2e 1.6 (&lt;a href=&quot;http://www.eclipse.org/m2e/documentation/release-notes-16.html#improved-project-configurator-ordering&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.eclipse.org/m2e/documentation/release-notes-16.html#improved-project-configurator-ordering&lt;/a&gt;). That allows to specify optional secondary configurators (like m2e-tycho).&lt;/p&gt;</comment>
                            <comment id="15656415" author="kwin" created="Fri, 11 Nov 2016 07:38:30 +0000"  >&lt;p&gt;I can either upgrade the target definitions to require at least Mars (v4.5) (was Luna = v4.4 in the past) or just upgrade the m2e dependency to 1.6 (which is supposed to be still compatible with Luna, according to &lt;a href=&quot;http://www.eclipse.org/m2e/documentation/release-notes-16.htm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.eclipse.org/m2e/documentation/release-notes-16.htm&lt;/a&gt;).&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; WDYT?&lt;/p&gt;</comment>
                            <comment id="15656746" author="rombert" created="Fri, 11 Nov 2016 10:48:24 +0000"  >&lt;p&gt;It should be ok to upgrade to Mars, it&apos;s already been out for a almost 1 and a half years.&lt;/p&gt;</comment>
                            <comment id="15657467" author="kwin" created="Fri, 11 Nov 2016 16:35:24 +0000"  >&lt;p&gt;I cannot upgrade the target because I always run into this bug: &lt;a href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=465602&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=465602&lt;/a&gt;. Any suggestion how to proceed here?&lt;/p&gt;

&lt;p&gt;Attached is a patch containing only the necessary code changes without adjusting the target.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Would you please try out if that fixes your problem as well?&lt;/p&gt;</comment>
                            <comment id="15670624" author="rombert" created="Wed, 16 Nov 2016 14:57:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; - I&apos;ve tried the patch and after updating the configuration for &lt;tt&gt;org.apache.sling.commons.json&lt;/tt&gt; I get the following error on the pom.xml file:&lt;/p&gt;

&lt;p&gt;&amp;gt; Missing m2e incremental build support for generating the bundle manifest, component descriptions and metatype resources. Please use the provided Quick Fixes on this issue to &lt;br/&gt;
 resolve this.&lt;/p&gt;

&lt;p&gt;Note that I do have m2e-tycho 0.8.0 installed. When opening the quick fix dialog and selecting the &apos;install m2e-tycho&apos; option, the m2e catalog dialog is empty, presumably because I already have m2e-tycho installed.&lt;/p&gt;

&lt;p&gt;As for the issue with the Target platform and Eclipse Mars, maybe it&apos;s safer to pull in and require a new enough version of m2e, and upgrade our requirements to Neon a bit later, once Oxygen is out.  &lt;/p&gt;</comment>
                            <comment id="15670869" author="kwin" created="Wed, 16 Nov 2016 16:16:56 +0000"  >&lt;p&gt;Sorry for the poor testing together with m2e-tycho. Yes indeed the marker is generated although m2e-tycho is already installed. Will look into that and do some proper testing this time. For the target file we proceed only with the addition of m2e 1.6 (and leave the rest as it is).&lt;br/&gt;
What do you mean by &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;after updating the configuration for org.apache.sling.commons.json&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="15673411" author="rombert" created="Thu, 17 Nov 2016 11:02:28 +0000"  >&lt;p&gt;The plan sounds good to me.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;after updating the configuration for org.apache.sling.commons.json&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That was supposed to mean &lt;em&gt;Maven&lt;/em&gt; &#8594; &lt;em&gt;Update Project...&lt;/em&gt; for the org.apache.sling.commons.json project in Eclipse. But I was in a hurry &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15676699" author="kwin" created="Fri, 18 Nov 2016 13:22:36 +0000"  >&lt;p&gt;I committed the fixes with &lt;a href=&quot;https://svn.apache.org/r1770377&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1770377&lt;/a&gt;. Now a sample project worked with m-b-p as well as bnd-maven-plugin with and without m2e-tycho being installed. I increased the requirements to m2e 1.6.&lt;/p&gt;</comment>
                            <comment id="15677079" author="kwin" created="Fri, 18 Nov 2016 16:27:25 +0000"  >&lt;p&gt;Fixed the build with &lt;a href=&quot;https://svn.apache.org/r1770406&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1770406&lt;/a&gt; by leveraging archetype 2.0 (final) API (which is included in m2e 1.6, &lt;a href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=336461&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=336461&lt;/a&gt;) instead of the 2.0 alpha 4 being shipped with previous versions of m2e. Unfortunately with that new version the API changed in a backwards incompatible way.&lt;/p&gt;</comment>
                            <comment id="15677138" author="kwin" created="Fri, 18 Nov 2016 16:58:33 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6304&quot; title=&quot;Get rid of EmbeddedArchetypeInstaller&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6304&quot;&gt;&lt;del&gt;SLING-6304&lt;/del&gt;&lt;/a&gt; to finally get rid of that no longer necessary class.&lt;/p&gt;</comment>
                            <comment id="15677955" author="rombert" created="Fri, 18 Nov 2016 22:25:03 +0000"  >&lt;p&gt;Sling projects now work fine, thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13021789">SLING-6304</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12838574" name="SLING-6268-v01.patch" size="2373" author="kwin" created="Fri, 11 Nov 2016 16:43:11 +0000"/>
                            <attachment id="12838333" name="eclipse-config.txt" size="1382441" author="rombert" created="Thu, 10 Nov 2016 10:03:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36627:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6266] Feature version should be converted to OSGi version</title>
                <link>https://issues.apache.org/jira/browse/SLING-6266</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If the option to set the feature version to the project version is used, the version should be converted from a maven version to an OSGi version.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019577">SLING-6266</key>
            <summary>Feature version should be converted to OSGi version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Nov 2016 16:44:27 +0000</created>
                <updated>Sun, 13 Nov 2016 08:43:07 +0000</updated>
                            <resolved>Wed, 9 Nov 2016 16:45:00 +0000</resolved>
                                    <version>Slingstart Maven Plugin 1.5.0</version>
                                    <fixVersion>Slingstart Maven Plugin 1.6.0</fixVersion>
                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i364qv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6265] Effective model does not get feature versions</title>
                <link>https://issues.apache.org/jira/browse/SLING-6265</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If an effective model is created, the version of a feature is lost&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019574">SLING-6265</key>
            <summary>Effective model does not get feature versions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Nov 2016 16:31:14 +0000</created>
                <updated>Sun, 13 Nov 2016 08:42:57 +0000</updated>
                            <resolved>Wed, 9 Nov 2016 16:43:11 +0000</resolved>
                                    <version>Sling Provisioning Model 1.5.0</version>
                    <version>Sling Provisioning Model 1.6.0</version>
                                    <fixVersion>Sling Provisioning Model 1.7.0</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i364q7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6263] Dependency problem between RepositoryInitializer and AbstractSlingRepositoryManager</title>
                <link>https://issues.apache.org/jira/browse/SLING-6263</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As we can currently see on our Jenkins:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/sling-launchpad-builder-1.8/lastSuccessfulBuild/artifact/target/_-32861/sling/logs/error.log&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-launchpad-builder-1.8/lastSuccessfulBuild/artifact/target/_-32861/sling/logs/error.log&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;there is a dependency problem with the repository and repoinit.&lt;br/&gt;
When the repository is started, there is no RepositoryInitializer&lt;br/&gt;
service and the repository starts up fine. When the&lt;br/&gt;
RepositoryInitializer arrives later it is completely ignored.&lt;/p&gt;

&lt;p&gt;I&apos;m not 100% sure how to fix this, easiest fix would be to make a&lt;br/&gt;
RepositoryInitializer required, but then this would mean only one of&lt;br/&gt;
them is required.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019487">SLING-6263</key>
            <summary>Dependency problem between RepositoryInitializer and AbstractSlingRepositoryManager</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Nov 2016 09:17:41 +0000</created>
                <updated>Wed, 20 Sep 2017 11:35:04 +0000</updated>
                            <resolved>Wed, 9 Nov 2016 13:23:19 +0000</resolved>
                                                    <fixVersion>JCR Base 2.4.2</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15650553" author="olli" created="Wed, 9 Nov 2016 10:20:30 +0000"  >&lt;p&gt;comment on &lt;a href=&quot;https://lists.apache.org/thread.html/36718a75f4dccfb865c2dd37052593c063849ad60c6795995e786c47@%3Cdev.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;dev@&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Do not use &lt;tt&gt;SlingRepositoryInitializer&lt;/tt&gt; for repoinit at all. Instead we should support components to better handle absence of users, paths and ACLs (&lt;a href=&quot;https://lists.apache.org/thread.html/c88a36eb4684fd162174ea8b979f07552ff6ed4695035aef561a52dc@%3Cusers.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Creating a service user for your own bundle&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="15650920" author="cziegeler" created="Wed, 9 Nov 2016 13:23:19 +0000"  >&lt;p&gt;The RepositoryInitializer services are now executed, regardless when they arrive&lt;/p&gt;</comment>
                            <comment id="15651061" author="olli" created="Wed, 9 Nov 2016 14:17:12 +0000"  >&lt;p&gt;This changes the intended behavior of &lt;tt&gt;SlingRepositoryInitializer&lt;/tt&gt;, at least the javadoc should be adjusted (it&apos;s not really &lt;em&gt;initialization&lt;/em&gt; anymore):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; * All active &amp;lt;code&amp;gt;SlingRepositoryInitializer&amp;lt;/code&amp;gt; services are called before
 * making the &amp;lt;code&amp;gt;SlingRepository&amp;lt;/code&amp;gt; service available, and can perform
 * initializations on it, like creating service users, setting up initial access
 * control, migrating content in upgrades, etc.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15651076" author="olli" created="Wed, 9 Nov 2016 14:22:15 +0000"  >&lt;p&gt;How about renaming &lt;tt&gt;SlingRepositoryInitializer&lt;/tt&gt; to &lt;tt&gt;SlingRepositoryProcessor&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="15651105" author="bdelacretaz" created="Wed, 9 Nov 2016 14:33:44 +0000"  >&lt;p&gt;I disagree with changing the javadocs or renaming, this is changing the purpose of the &lt;tt&gt;SlingRepositoryInitializer&lt;/tt&gt;. &lt;/p&gt;

&lt;p&gt;Executing such services as they appear is probably useful as an additional option but the main role of the &lt;tt&gt;SlingRepositoryInitializer&lt;/tt&gt; is to be executed &lt;em&gt;before&lt;/em&gt; making the &lt;tt&gt;SlingRepository&lt;/tt&gt; service available - as discussed at &lt;a href=&quot;https://lists.apache.org/thread.html/a55778fabe3ff5a5403eb5f852e10a2b4184b05e01366959d88c821c@%3Cdev.sling.apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread.html/a55778fabe3ff5a5403eb5f852e10a2b4184b05e01366959d88c821c@%3Cdev.sling.apache.org%3E&lt;/a&gt; - so we need a reliable way for that to happen for the &lt;tt&gt;SlingRepositoryInitializer&lt;/tt&gt; services that require that.&lt;/p&gt;

&lt;p&gt;I don&apos;t have time to implement that now, so not opposed to a release that doesn&apos;t have that feature, provided there&apos;s a backwards compatible migration path once we implement that.&lt;/p&gt;</comment>
                            <comment id="15651136" author="cziegeler" created="Wed, 9 Nov 2016 14:45:46 +0000"  >&lt;p&gt;But that is exactly happening, all active services are call before the repo is made available&lt;/p&gt;

&lt;p&gt;What is missing: all services that become active later are called at a later point&lt;/p&gt;</comment>
                            <comment id="15654535" author="olli" created="Thu, 10 Nov 2016 16:55:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;: now the behavior of &lt;tt&gt;SlingRepositoryInitializer&lt;/tt&gt; is changed: they are executed as they appear (instead of initializing the repository before making at available) - or did I miss something?&lt;/p&gt;</comment>
                            <comment id="15654603" author="cziegeler" created="Thu, 10 Nov 2016 17:23:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; No the behaviour is more or less the same: if the initializer is available before the repo is started, it is executed before.&lt;br/&gt;
The difference is: if an initializer appears after the repository has been started it is then executed. Before this change it was never executed at all&lt;/p&gt;</comment>
                            <comment id="15654654" author="olli" created="Thu, 10 Nov 2016 17:42:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;Before this change it was never executed at all&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That is exactly the reason for my concerns... you could deploy them and be sure they would not be executed until repository (re)start.&lt;/p&gt;

&lt;p&gt;Therefore I had preferred a &lt;tt&gt;SlingRepositoryProcessor&lt;/tt&gt; which is executed whenever activated and a &lt;tt&gt;SlingRepositoryInitializer&lt;/tt&gt; (only an empty marker interface which extends &lt;tt&gt;SlingRepositoryProcessor&lt;/tt&gt;, a copy of the existing &lt;tt&gt;SlingRepositoryInitializer&lt;/tt&gt;) which is only executed &lt;em&gt;before&lt;/em&gt; the repo is started and in defined order (service ranking).&lt;/p&gt;</comment>
                            <comment id="15654719" author="cziegeler" created="Thu, 10 Nov 2016 18:09:13 +0000"  >&lt;p&gt;Ok, I guess I have missed parts of that discussion somehow.&lt;/p&gt;

&lt;p&gt;I see your point, what about (and we should maybe discuss this on the mailing list or in another issue) if we add a service registration property to SlingRepositoryInitializer. It defaults to &quot;execute me whenever I&apos;m there&quot; (or maybe better wording) and it can be changed to &quot;only execute my before repositoy start&quot;.&lt;br/&gt;
This would solve your problem, without creating a new interface and would not change what we have now.&lt;/p&gt;</comment>
                            <comment id="15654832" author="olli" created="Thu, 10 Nov 2016 19:01:10 +0000"  >&lt;p&gt;I don&apos;t have a strong opinion on &lt;em&gt;new interface&lt;/em&gt; vs. &lt;em&gt;service registration property&lt;/em&gt;. Service registration property means more effort for users, but maybe more flexibility also. Inserting a new interface is no change and effort for users &#8211; we just have to check for &lt;tt&gt;SlingRepositoryInitializer&lt;/tt&gt; in &lt;tt&gt;executeRepositoryInitializers&lt;/tt&gt; (than better named &lt;tt&gt;executeRepositoryProcessors&lt;/tt&gt;) and execute &lt;b&gt;not&lt;/b&gt; if repository was already started.&lt;/p&gt;</comment>
                            <comment id="15656509" author="cziegeler" created="Fri, 11 Nov 2016 08:32:57 +0000"  >&lt;p&gt;Yes, I think a service prop is the better option - and I think we can add it directly after the current release is out&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3646v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6260] oak-server ITs failing with latest org.apache.sling.jcr.repoinit 1.0.3-SNAPSHOT</title>
                <link>https://issues.apache.org/jira/browse/SLING-6260</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The ITs in the JCR Oak Server module reference &lt;tt&gt;org.apache.sling.jcr.repoinit 1.0.3-SNAPSHOT&lt;/tt&gt;, which does no longer allow &lt;tt&gt;org.apache.sling.repoinit.parser 1.0.4&lt;/tt&gt; to resolve.&lt;/p&gt;

&lt;p&gt;Updating to &lt;tt&gt;org.apache.sling.repoinit.parser 1.0.5-SNAPSHOT&lt;/tt&gt; allows the tests to pass again.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019363">SLING-6260</key>
            <summary>oak-server ITs failing with latest org.apache.sling.jcr.repoinit 1.0.3-SNAPSHOT</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsedding">Julian Sedding</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Nov 2016 20:42:53 +0000</created>
                <updated>Mon, 20 Mar 2017 22:18:00 +0000</updated>
                            <resolved>Tue, 8 Nov 2016 20:45:08 +0000</resolved>
                                    <version>JCR Oak Server 1.1.0</version>
                                    <fixVersion>JCR Oak Server 1.1.4</fixVersion>
                                    <component>Oak</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15648735" author="jsedding" created="Tue, 8 Nov 2016 20:45:08 +0000"  >&lt;p&gt;Fixed &lt;a href=&quot;https://svn.apache.org/r1768780&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1768780&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i363fj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6259] The PackageAdminClassLoader cannot load classes from bundles providing older API versions</title>
                <link>https://issues.apache.org/jira/browse/SLING-6259</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;org.apache.sling.commons.classloader.impl.PackageAdminClassLoader&lt;/tt&gt; cannot correctly load classes that exist only in bundles providing older API implementations if another bundle providing the same API, but newer version, exists on the instance.&lt;/p&gt;

&lt;p&gt;Assuming bundles A and B both export &lt;tt&gt;org.example&lt;/tt&gt;, A with version &lt;tt&gt;1.0.0&lt;/tt&gt; and B with version &lt;tt&gt;2.0.0&lt;/tt&gt;, when the &lt;tt&gt;org.apache.sling.commons.classloader.impl.PackageAdminClassLoader&lt;/tt&gt; is queried to resolve a class only available in A, it will try to resolve it from B. This happens because the &lt;tt&gt;org.apache.sling.commons.classloader.impl.PackageAdminClassLoader&lt;/tt&gt; only checks the bundle that provides the highest API (in terms of version number) of the class&apos; providing package.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019288">SLING-6259</key>
            <summary>The PackageAdminClassLoader cannot load classes from bundles providing older API versions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Nov 2016 17:59:07 +0000</created>
                <updated>Thu, 24 Nov 2016 16:32:06 +0000</updated>
                            <resolved>Tue, 8 Nov 2016 17:59:55 +0000</resolved>
                                    <version>Commons ClassLoader 1.3.2</version>
                                    <fixVersion>Commons ClassLoader 1.3.6</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13019287">SLING-6258</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i362yv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6258] The PackageAdminClassLoader cannot load classes from bundles providing older API versions</title>
                <link>https://issues.apache.org/jira/browse/SLING-6258</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;org.apache.sling.commons.classloader.impl.PackageAdminClassLoader&lt;/tt&gt; cannot correctly load classes that exist only in bundles providing older API implementations if another bundle providing the same API, but newer version, exists on the instance.&lt;/p&gt;

&lt;p&gt;Assuming bundles A and B both export &lt;tt&gt;org.example&lt;/tt&gt;, A with version &lt;tt&gt;1.0.0&lt;/tt&gt; and B with version &lt;tt&gt;2.0.0&lt;/tt&gt;, when the &lt;tt&gt;org.apache.sling.commons.classloader.impl.PackageAdminClassLoader&lt;/tt&gt; is queried to resolve a class only available in A, it will try to resolve it from B. This happens because the &lt;tt&gt;org.apache.sling.commons.classloader.impl.PackageAdminClassLoader&lt;/tt&gt; only checks the bundle that provides the highest API (in terms of version number) of the class&apos; providing package.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019287">SLING-6258</key>
            <summary>The PackageAdminClassLoader cannot load classes from bundles providing older API versions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Nov 2016 17:58:50 +0000</created>
                <updated>Wed, 4 Sep 2019 12:43:24 +0000</updated>
                            <resolved>Thu, 10 Nov 2016 15:05:03 +0000</resolved>
                                    <version>Commons ClassLoader 1.3.2</version>
                                    <fixVersion>Commons ClassLoader 1.3.6</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="15648385" author="radu.cotescu" created="Tue, 8 Nov 2016 18:34:30 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1768759&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1768759&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15653540" author="radu.cotescu" created="Thu, 10 Nov 2016 09:09:53 +0000"  >&lt;p&gt;From an email sent by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fmeschbe&quot; class=&quot;user-hover&quot; rel=&quot;fmeschbe&quot;&gt;fmeschbe&lt;/a&gt; to sling-dev:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;First the OSGi spec says to resolve to the highest matching version of a package and not just any. So our PackageAdminClassLoader should do the same.&lt;/p&gt;

&lt;p&gt;Even ignoring this, you must make sure to always use the same provider for a specific package once you decided for one. Otherwise you get incompatible classes, hard to trace issues, and split package issues.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="15654186" author="radu.cotescu" created="Thu, 10 Nov 2016 14:30:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fmeschbe&quot; class=&quot;user-hover&quot; rel=&quot;fmeschbe&quot;&gt;fmeschbe&lt;/a&gt;, I&apos;ve tried to address your concerns in &lt;a href=&quot;https://svn.apache.org/r1769127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1769127&lt;/a&gt;. Could you please review the changes? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15654207" author="fmeschbe" created="Thu, 10 Nov 2016 14:37:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; From what I can tell, this looks good, yes. Thanks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13019288">SLING-6259</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i362yn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6257] Sling IDE: Debugging: Thread interrupted for every uncaught exception</title>
                <link>https://issues.apache.org/jira/browse/SLING-6257</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When I debug a local Sling server with the Sling IDE every uncaught exception leads to a suspension of the affected thread (in Eclipse Neon). That is the case even though no breakpoints are set in Eclipse (neither Exception breakpoints, nor class nor method breakpoints).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019277">SLING-6257</key>
            <summary>Sling IDE: Debugging: Thread interrupted for every uncaught exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Nov 2016 17:17:28 +0000</created>
                <updated>Wed, 9 Nov 2016 09:55:14 +0000</updated>
                            <resolved>Wed, 9 Nov 2016 07:25:36 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.1.0</version>
                                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15648806" author="rombert" created="Tue, 8 Nov 2016 21:13:40 +0000"  >&lt;p&gt;Hm ... I always thought this was due to Eclipse. Why do you think this happens due to the Sling IDE tooling?&lt;/p&gt;</comment>
                            <comment id="15650060" author="kwin" created="Wed, 9 Nov 2016 07:25:27 +0000"  >&lt;p&gt;This seems to happen even when doing a manual remote debugging connection (Standard Socket Attach) to Sling. So rather an Eclipse issue indeed. Seems that since Eclipse Neon this is be default enabled in Preferences -&amp;gt; Java -&amp;gt; Debug -&amp;gt; Suspend on uncaught exceptions.&lt;br/&gt;
For me the exceptions happen in all &lt;tt&gt;ThreadExpiringThreadPool&lt;/tt&gt; threads with the exception &lt;tt&gt;RuntimeException&lt;/tt&gt; with message &quot;Kill old thread&quot;. This behaviour is also described at &lt;a href=&quot;http://stackoverflow.com/questions/6290470/eclipse-debugger-always-blocks-on-threadpoolexecutor-without-any-obvious-excepti&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/6290470/eclipse-debugger-always-blocks-on-threadpoolexecutor-without-any-obvious-excepti&lt;/a&gt;. I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6261&quot; title=&quot;ThreadExpiringThreadPool is relying on uncaught exceptions to kill threads&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6261&quot;&gt;&lt;del&gt;SLING-6261&lt;/del&gt;&lt;/a&gt; to fix relying on uncaught exception in Sling Commons Thread.&lt;/p&gt;</comment>
                            <comment id="15650077" author="rryan@adobe.com" created="Wed, 9 Nov 2016 07:34:59 +0000"  >&lt;p&gt;It is unfortunate though that the thread pooling (in at least some part) of Sling uses exceptions for normal, even frequent cases.&lt;/p&gt;</comment>
                            <comment id="15650505" author="rombert" created="Wed, 9 Nov 2016 09:55:14 +0000"  >&lt;p&gt;Nice catch!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13019472">SLING-6261</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i362wf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6256] Tooling Support: Fragments are listed twice as source reference</title>
                <link>https://issues.apache.org/jira/browse/SLING-6256</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;All bundle fragments appear twice in the JSON output of &lt;tt&gt;/system/sling/tooling/sourceReferences.json&lt;/tt&gt; because once they are listed with their host bundle and once on their own. I think it makes sense to only consider real bundles (with all their bound fragments) and skip the individual fragments.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019243">SLING-6256</key>
            <summary>Tooling Support: Fragments are listed twice as source reference</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Nov 2016 15:27:03 +0000</created>
                <updated>Mon, 1 May 2017 11:45:28 +0000</updated>
                            <resolved>Tue, 8 Nov 2016 16:16:19 +0000</resolved>
                                    <version>Tooling Support Source 1.0.0</version>
                                    <fixVersion>Tooling Support Source 1.0.2</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15647876" author="kwin" created="Tue, 8 Nov 2016 15:38:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; Is it ok to upgrade the tooling support to Sling Parent 28. That would implicitly increase the version of the OSGi dependencies to 6.&lt;/p&gt;</comment>
                            <comment id="15647927" author="rombert" created="Tue, 8 Nov 2016 15:54:11 +0000"  >&lt;p&gt;Since this would effectively restrict where the IDE tooling runs I would prefer to keep the requirements low. Can we perhaps override the OSGi deps to keep them at the same level? If you need a more precise answer you&apos;d need to wait while I check the minimum dependencies for older AEM versions &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15647997" author="kwin" created="Tue, 8 Nov 2016 16:16:08 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://svn.apache.org/r1768719&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1768719&lt;/a&gt;. It only required to increase the OSGi Core dependency to 4.3 (supported since CQ 5.6).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12939829">SLING-5528</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i362ov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6255] Sling IDE: Rely on latest tooling source support (1.0.2)</title>
                <link>https://issues.apache.org/jira/browse/SLING-6255</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Once we have a release of the tooling support 1.0.2 we should automatically install that version/upgrade previous version through Sling Eclipse IDE.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019237">SLING-6255</key>
            <summary>Sling IDE: Rely on latest tooling source support (1.0.2)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Nov 2016 15:15:25 +0000</created>
                <updated>Sun, 21 Jan 2018 20:23:33 +0000</updated>
                            <resolved>Mon, 1 May 2017 15:45:18 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.1.0</version>
                                    <fixVersion>Sling Eclipse IDE 1.2.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15990980" author="kwin" created="Mon, 1 May 2017 15:45:18 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1793358&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1793358&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13019227">SLING-6254</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 26 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i362nj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6254] Sling IDE: Got status code 500 for call to http://localhost:4000/system/sling/tooling/sourceReferences.json with AEM 6.2</title>
                <link>https://issues.apache.org/jira/browse/SLING-6254</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When connecting in debug mode with a local server got the following error&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.sling.ide.osgi.OsgiClientException: org.apache.commons.httpclient.HttpException: Got status code 500 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; call to http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:4000/system/sling/tooling/sourceReferences.json
&lt;/span&gt;	at org.apache.sling.ide.osgi.impl.HttpOsgiClient.findSourceReferences(HttpOsgiClient.java:223)
	at org.apache.sling.ide.osgi.impl.TracingOsgiClient.findSourceReferences(TracingOsgiClient.java:110)
	at org.apache.sling.ide.eclipse.core.internal.JVMDebuggerConnection.connectInDebugMode(JVMDebuggerConnection.java:119)
	at org.apache.sling.ide.eclipse.core.internal.SlingLaunchpadBehaviour.start(SlingLaunchpadBehaviour.java:123)
	at org.apache.sling.ide.eclipse.core.internal.SlingLaunchpadLaunchConfigurationDelegate.launch(SlingLaunchpadLaunchConfigurationDelegate.java:45)
	at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:885)
	at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:739)
	at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:731)
	at org.eclipse.wst.server.core.internal.Server.startImpl2(Server.java:3556)
	at org.eclipse.wst.server.core.internal.Server.startImpl(Server.java:3492)
	at org.eclipse.wst.server.core.internal.Server$StartJob.run(Server.java:367)
	at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)
Caused by: org.apache.commons.httpclient.HttpException: Got status code 500 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; call to http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:4000/system/sling/tooling/sourceReferences.json
&lt;/span&gt;	at org.apache.sling.ide.osgi.impl.HttpOsgiClient.findSourceReferences(HttpOsgiClient.java:198)
	... 11 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;On the server-side I see&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;8.11.2016 15:42:56.189 *ERROR* [qtp1040324669-4133] org.apache.felix.http.jetty Exception &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; processing request to /system/sling/tooling/sourceReferences.json (java.lang.NullPointerException)
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.sling.tooling.support.source.impl.FelixJettySourceReferenceFinder.findSourceReferences(FelixJettySourceReferenceFinder.java:53)
	at org.apache.sling.tooling.support.source.impl.SourceReferencesServlet.doGet(SourceReferencesServlet.java:123)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:618)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
	at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:85)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:79)
	at org.apache.sling.security.impl.ReferrerFilter.doFilter(ReferrerFilter.java:290)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at com.adobe.granite.license.impl.LicenseCheckFilter.doFilter(LicenseCheckFilter.java:308)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.felix.http.sslfilter.internal.SslFilter.doFilter(SslFilter.java:89)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:129)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.sling.featureflags.impl.FeatureManager.doFilter(FeatureManager.java:116)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.sling.engine.impl.log.RequestLoggerFilter.doFilter(RequestLoggerFilter.java:75)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:124)
	at org.apache.felix.http.base.internal.DispatcherServlet.service(DispatcherServlet.java:61)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:812)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:587)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:221)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:215)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)
	at org.eclipse.jetty.server.Server.handle(Server.java:499)
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:311)
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:544)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13019227">SLING-6254</key>
            <summary>Sling IDE: Got status code 500 for call to http://localhost:4000/system/sling/tooling/sourceReferences.json with AEM 6.2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Nov 2016 14:45:53 +0000</created>
                <updated>Mon, 1 May 2017 11:45:28 +0000</updated>
                            <resolved>Tue, 8 Nov 2016 15:18:36 +0000</resolved>
                                    <version>Tooling Support Source 1.0.0</version>
                                    <fixVersion>Tooling Support Source 1.0.2</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15647773" author="kwin" created="Tue, 8 Nov 2016 14:56:51 +0000"  >&lt;p&gt;The reason is that with AEM 6.2 the bundle with the symbolic name &lt;tt&gt;org.apache.felix.http.jetty&lt;/tt&gt; is deployed in a custom version with a modified group id. Therefore the jetty version can only be extracted from &lt;tt&gt;META-INF/maven/com.adobe.granite.felix/org.apache.felix.http.jetty/pom.xml&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15647823" author="kwin" created="Tue, 8 Nov 2016 15:18:36 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://svn.apache.org/r1768712&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1768712&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13019237">SLING-6255</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12939829">SLING-5528</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i362lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6252] Resource Editor :: Fix frontend build</title>
                <link>https://issues.apache.org/jira/browse/SLING-6252</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The frontend build currently does not work because the package.json has to be updated and the e2e tests for PhantomJS (and Chrome and Firefox) have to be fixed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13019040">SLING-6252</key>
            <summary>Resource Editor :: Fix frontend build</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sandro">Sandro Boehme</assignee>
                                    <reporter username="sandro">Sandro Boehme</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Nov 2016 23:46:14 +0000</created>
                <updated>Wed, 9 Nov 2016 17:01:59 +0000</updated>
                            <resolved>Wed, 9 Nov 2016 17:01:59 +0000</resolved>
                                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i361fr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6250] Importing packages with large headers fails</title>
                <link>https://issues.apache.org/jira/browse/SLING-6250</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When importing packages with large headers, e.g. packages containing many paths, the following exception is thrown:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.RuntimeException: java.io.IOException: Resetting to invalid mark
	at java.io.BufferedInputStream.reset(BufferedInputStream.java:448)
	at org.apache.sling.distribution.packaging.impl.importer.LocalDistributionPackageImporter.importStream(LocalDistributionPackageImporter.java:122)
	at org.apache.sling.distribution.packaging.impl.importer.LocalDistributionPackageImporterTest.importPackageWithLargeHeader(LocalDistributionPackageImporterTest.java:100)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This happens when the header is larger than the default buffer size of the &lt;tt&gt;BufferedInputStream&lt;/tt&gt; and thus its &lt;tt&gt;#mark()&lt;/tt&gt; is lost and &lt;tt&gt;#reset()&lt;/tt&gt; cannot happen anymore.&lt;/p&gt;

&lt;p&gt;I will investigate, whether we can stop relying on marked input streams. This would be desirable, because we cannot know in advance how long the header is.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13018856">SLING-6250</key>
            <summary>Importing packages with large headers fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="teofili">Tommaso Teofili</assignee>
                                    <reporter username="jsedding">Julian Sedding</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Nov 2016 14:57:33 +0000</created>
                <updated>Tue, 17 Jan 2017 11:19:30 +0000</updated>
                            <resolved>Tue, 17 Jan 2017 10:38:14 +0000</resolved>
                                    <version>Content Distribution Core 0.1.18</version>
                                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15644405" author="jsedding" created="Mon, 7 Nov 2016 14:58:56 +0000"  >&lt;p&gt;The attached patch adds a test case that allows to reproduce the issue.&lt;/p&gt;</comment>
                            <comment id="15647214" author="teofili" created="Tue, 8 Nov 2016 10:55:02 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsedding&quot; class=&quot;user-hover&quot; rel=&quot;jsedding&quot;&gt;jsedding&lt;/a&gt; for reporting and providing a test case to reproduce the issue.&lt;/p&gt;</comment>
                            <comment id="15825811" author="teofili" created="Tue, 17 Jan 2017 10:38:14 +0000"  >&lt;p&gt;test added in r1779164, fix was introduced in r1778443.&lt;/p&gt;</comment>
                            <comment id="15825861" author="jsedding" created="Tue, 17 Jan 2017 11:10:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt; I don&apos;t understand how swallowing the exception fixes the issue. Could you please explain why that&apos;s a valid fix?&lt;/p&gt;</comment>
                            <comment id="15825874" author="teofili" created="Tue, 17 Jan 2017 11:19:05 +0000"  >&lt;p&gt;the &lt;em&gt;stream.reset()&lt;/em&gt; call was set there to make &lt;tt&gt;LocalDistributionPackageImporter&lt;/tt&gt;&#160;work together with &lt;tt&gt;AsyncDeliveryDispatchingStrategy&lt;/tt&gt;, because there the same importer is used for both storing a reference package and the referenced (actual) package which come with different headers.&lt;br/&gt;
I have put a &lt;em&gt;TODO&lt;/em&gt; as I think that reset should be avoided at all if possible, but that&apos;s not needed in most of the cases (async dispatching is not used by default) anyway.&lt;br/&gt;
So I was thinking to fix the issue here (throwing a RE is probably too much anyway) and open a new one for improving the way headers are read in sync and async cases.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12837783" name="SLING-6250-testcase.patch" size="8135" author="jsedding" created="Mon, 7 Nov 2016 14:58:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i360an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6247] Potential class cast exception for primitive arrays</title>
                <link>https://issues.apache.org/jira/browse/SLING-6247</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If a configuration property is an array it is cast to Object[] which might lead to class cast exceptions if the array is actually a primitve array, like long[] etc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13018623">SLING-6247</key>
            <summary>Potential class cast exception for primitive arrays</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Sat, 5 Nov 2016 15:59:34 +0000</created>
                <updated>Thu, 14 Mar 2019 08:15:20 +0000</updated>
                            <resolved>Sat, 5 Nov 2016 16:04:06 +0000</resolved>
                                    <version>Installer Configuration Factory 1.1.2</version>
                                    <fixVersion>Installer Configuration Factory 1.2.0</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15639896" author="cziegeler" created="Sat, 5 Nov 2016 16:04:07 +0000"  >&lt;p&gt;Added impl in rev 1768233&lt;br/&gt;
and simple test case in 1768234&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13216607">SLING-8280</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13221610">SLING-8314</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35yuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6236] Sling IDE: Deployment Descriptor not hidden in package explorer if toplevel elements are working sets</title>
                <link>https://issues.apache.org/jira/browse/SLING-6236</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In case the package explorer&apos;s toplevel elements are &quot;Working Sets&quot; the logic in &lt;tt&gt;ContentViewerFilter&lt;/tt&gt; to hide the deployment descriptor does no longer work.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13017568">SLING-6236</key>
            <summary>Sling IDE: Deployment Descriptor not hidden in package explorer if toplevel elements are working sets</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Nov 2016 09:24:06 +0000</created>
                <updated>Sun, 21 Jan 2018 20:23:30 +0000</updated>
                            <resolved>Thu, 3 Nov 2016 09:32:27 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.1.0</version>
                                    <fixVersion>Sling Eclipse IDE 1.2.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15632199" author="kwin" created="Thu, 3 Nov 2016 09:32:27 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1767850&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1767850&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12944924">SLING-5565</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35scn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6231] Sightly SWTBot tests are unstable</title>
                <link>https://issues.apache.org/jira/browse/SLING-6231</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The Sightly UI tests fail often on Jenkins but also locally. There seems to be some kind of timing issue involved.&lt;/p&gt;

&lt;p&gt;The failure is the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.eclipse.swtbot.swt.finder.exceptions.WidgetNotFoundException: Could not find widget matching: (of type &apos;Tree&apos;)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:437)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:411)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntil(SWTBotFactory.java:399)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.waitUntilWidgetAppears(SWTBotFactory.java:381)
	at org.eclipse.swtbot.swt.finder.SWTBotFactory.widget(SWTBotFactory.java:334)
	at org.eclipse.swtbot.swt.finder.SWTBot.tree(SWTBot.java:1283)
	at org.eclipse.swtbot.swt.finder.SWTBot.tree(SWTBot.java:1272)
	at org.apache.sling.ide.test.impl.ui.sightly.SightlyAutocompletionTest$AutocompletionCallable.call(SightlyAutocompletionTest.java:110)
	at org.apache.sling.ide.test.impl.ui.sightly.SightlyAutocompletionTest.attributeAutocompletion(SightlyAutocompletionTest.java:81)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13017230">SLING-6231</key>
            <summary>Sightly SWTBot tests are unstable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Nov 2016 13:29:46 +0000</created>
                <updated>Sun, 21 Jan 2018 20:23:32 +0000</updated>
                            <resolved>Wed, 2 Nov 2016 15:09:11 +0000</resolved>
                                                    <fixVersion>Sling Eclipse IDE 1.2.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15629234" author="rombert" created="Wed, 2 Nov 2016 15:09:05 +0000"  >&lt;p&gt;Fixed:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://svn.apache.org/r1767701&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1767701 &lt;/a&gt; - Use a specific bot instance instead of the global one&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://svn.apache.org/r1767702&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1767702&lt;/a&gt; - replace hardcoded 1000 ms sleep with a polling condition&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12836573" name="sightly-tests-unstable.jpg" size="91729" author="rombert" created="Wed, 2 Nov 2016 13:30:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35q9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6230] The SightlyCompiler reports errors and warnings with an offset by one for the line count</title>
                <link>https://issues.apache.org/jira/browse/SLING-6230</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;SightlyCompiler&lt;/tt&gt; reports errors and warnings with an offset by one for the line count. Since the HTL Maven Plugin directly uses the compiler, this means that the plugin is also affected.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13017195">SLING-6230</key>
            <summary>The SightlyCompiler reports errors and warnings with an offset by one for the line count</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Nov 2016 12:37:04 +0000</created>
                <updated>Mon, 9 Jan 2017 11:43:52 +0000</updated>
                            <resolved>Wed, 2 Nov 2016 14:09:54 +0000</resolved>
                                    <version>Scripting HTL Compiler 1.0.2</version>
                    <version>HTL Maven Plugin 1.0.0</version>
                                    <fixVersion>Scripting HTL Compiler 1.0.4</fixVersion>
                    <fixVersion>HTL Maven Plugin 1.0.4</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15629085" author="radu.cotescu" created="Wed, 2 Nov 2016 14:09:54 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1767685&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1767685&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35q1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6226] substVars not properly handling unknown properties</title>
                <link>https://issues.apache.org/jira/browse/SLING-6226</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Assuming a property in &lt;tt&gt;sling.properties&lt;/tt&gt; of the form&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.sling.commons.log.pattern=%d{yyyy-MM-dd HH:mm:ss.SSSXXX} *%level* [%thread] %logger %msg%n
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This will break during Sling startup as the date format of this &lt;tt&gt;log.pattern&lt;/tt&gt; ends with a curly brace but is not matched with a {{ ${ }}. This is a but in the &lt;tt&gt;substVars&lt;/tt&gt; method.&lt;/p&gt;

&lt;p&gt;Another problem is that this method is duplicate in the &lt;tt&gt;Sling&lt;/tt&gt; and &lt;tt&gt;SlingServlet&lt;/tt&gt; classes where the latter is in the web app class loader while the former already is in the launcher class loader.&lt;/p&gt;

&lt;p&gt;Proposing a patch taking the latest Felix Framework&apos;s Util class creating a new &lt;tt&gt;Util&lt;/tt&gt; class in the shared package.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016932">SLING-6226</key>
            <summary>substVars not properly handling unknown properties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fmeschbe">Felix Meschberger</assignee>
                                    <reporter username="fmeschbe">Felix Meschberger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2016 15:54:17 +0000</created>
                <updated>Sun, 5 Feb 2017 15:59:40 +0000</updated>
                            <resolved>Wed, 2 Nov 2016 08:52:24 +0000</resolved>
                                    <version>Launchpad Base 2.6.14</version>
                                    <fixVersion>Launchpad Base 2.6.16</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15625780" author="fmeschbe" created="Tue, 1 Nov 2016 15:56:03 +0000"  >&lt;p&gt;Proposed patch adding the Util class, removing the old substVars implementations and providing some test cases.&lt;/p&gt;</comment>
                            <comment id="15627867" author="cziegeler" created="Wed, 2 Nov 2016 06:00:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fmeschbe&quot; class=&quot;user-hover&quot; rel=&quot;fmeschbe&quot;&gt;fmeschbe&lt;/a&gt; Lgtm&lt;/p&gt;</comment>
                            <comment id="15628254" author="fmeschbe" created="Wed, 2 Nov 2016 08:52:24 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Committed the patch in Rev. 1767618&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12836378" name="SLING-6226.diff" size="24641" author="fmeschbe" created="Tue, 1 Nov 2016 15:56:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35ofr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6225] Metatype issues in JavaScriptEngineFactory</title>
                <link>https://issues.apache.org/jira/browse/SLING-6225</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There&apos;s two issues in the metatype of JavaScriptEngineFactory:&lt;/p&gt;

&lt;p&gt;1) The description of the Target VM property is cut off after the word &quot;left&quot;&lt;br/&gt;
2) The CHANGES property is part of the metatype (and should be propertyPrivate like the PATHS property is).&lt;br/&gt;
3) The description for the Source and Target VM properties states that the default is 1.6, but since &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3724&quot; title=&quot;Provide option to always use current vm version for source and target&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3724&quot;&gt;&lt;del&gt;SLING-3724&lt;/del&gt;&lt;/a&gt;, it has been &quot;auto&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016929">SLING-6225</key>
            <summary>Metatype issues in JavaScriptEngineFactory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="justinedelson">Justin Edelson</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2016 15:40:47 +0000</created>
                <updated>Fri, 16 Dec 2016 12:54:07 +0000</updated>
                            <resolved>Tue, 1 Nov 2016 15:51:01 +0000</resolved>
                                    <version>Scripting Java 2.1.0</version>
                                    <fixVersion>Scripting Java 2.1.2</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15625766" author="justinedelson" created="Tue, 1 Nov 2016 15:51:02 +0000"  >&lt;p&gt;fixed in r1767512&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35of3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6224] Expand the accepted &amp; ignored whitespace characters for HTL scripts</title>
                <link>https://issues.apache.org/jira/browse/SLING-6224</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Some whitespace characters (e.g. &lt;tt&gt;NO-BREAK SPACE, \u00a0&lt;/tt&gt;) are not recognised and ignored accordingly when present in HTL expressions, leading to token recognition errors.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016922">SLING-6224</key>
            <summary>Expand the accepted &amp; ignored whitespace characters for HTL scripts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2016 15:11:00 +0000</created>
                <updated>Mon, 9 Jan 2017 11:43:52 +0000</updated>
                            <resolved>Tue, 1 Nov 2016 16:14:04 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.0</version>
                                    <fixVersion>Scripting HTL Compiler 1.0.4</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15625843" author="radu.cotescu" created="Tue, 1 Nov 2016 16:14:05 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1767516&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1767516&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35odj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6223] Impossible to create HTL resource type that starts with a number inside the foldername</title>
                <link>https://issues.apache.org/jira/browse/SLING-6223</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We have versioned resource types in folders concerning the release date. For example /apps/myapp/1702/components/mycomponent&lt;/p&gt;

&lt;p&gt;Now when switching from jsp to HTL, we get following exception:&lt;/p&gt;

&lt;p&gt;org.apache.sling.scripting.sightly.impl.compiler.CompilerException: org.apache.sling.scripting.sightly.impl.compiler.CompilerException: org.apache.sling.scripting.sightly.impl.compiler.CompilerException: Compilation errors in apps/myapp/1702/components/mycomponent/SightlyJava_main.java:&lt;br/&gt;
Line 19, column 971 : The declared package &quot;apps.myapp&quot; does not match the expected package &quot;apps.myapp.1702.components.mycomponent&quot;&lt;br/&gt;
Line 19, column 981 : Syntax error on token &quot;.1702&quot;, delete this token&lt;br/&gt;
    at org.apache.sling.scripting.sightly.impl.compiler.SightlyJavaCompilerService.compileSource(SightlyJavaCompilerService.java:143)&lt;/p&gt;

&lt;p&gt;I guess this is because it translates the folders to package names, and 1702 is not a valid package identifier, but why isn&#8217;t it throwing this exception then in all the already existing jsp components?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016915">SLING-6223</key>
            <summary>Impossible to create HTL resource type that starts with a number inside the foldername</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="royteeuwen">Roy Teeuwen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2016 14:49:06 +0000</created>
                <updated>Fri, 13 Jan 2017 10:27:29 +0000</updated>
                            <resolved>Fri, 13 Jan 2017 10:27:29 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.2</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15821565" author="radu.cotescu" created="Fri, 13 Jan 2017 10:26:12 +0000"  >&lt;p&gt;The JSP scripting engine is a totally different scripting engine than the HTL one. Furthermore, this issue was addressed by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5787&quot; title=&quot;Modularise the Sightly script engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5787&quot;&gt;&lt;del&gt;SLING-5787&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6094&quot; title=&quot;HTL can generate invalid Java code by using user-supplied input&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6094&quot;&gt;&lt;del&gt;SLING-6094&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6146&quot; title=&quot;SourceIdentifier should not mangle underscore characters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6146&quot;&gt;&lt;del&gt;SLING-6146&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13009530">SLING-6094</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13011950">SLING-6146</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12979332">SLING-5787</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35obz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6222] [Startup ERROR] org.apache.sling.commons.mime FrameworkEvent ERROR (The bundle is uninstalled.)</title>
                <link>https://issues.apache.org/jira/browse/SLING-6222</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;During startup, the following ERROR randomly appears in the logs:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;25.10.2016 07:57:53.712 *ERROR* [FelixDispatchQueue] org.apache.sling.commons.mime FrameworkEvent ERROR (java.lang.IllegalStateException: The bundle is uninstalled.)
java.lang.IllegalStateException: The bundle is uninstalled.
	at org.apache.felix.framework.Felix.getBundleEntry(Felix.java:1741)
	at org.apache.felix.framework.BundleImpl.getEntry(BundleImpl.java:291)
	at org.apache.sling.commons.mime.internal.MimeTypeServiceImpl.bundleChanged(MimeTypeServiceImpl.java:249)
	at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:916)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:835)
	at org.apache.felix.framework.util.EventDispatcher.run(EventDispatcher.java:1148)
	at org.apache.felix.framework.util.EventDispatcher.access$000(EventDispatcher.java:55)
	at org.apache.felix.framework.util.EventDispatcher$1.run(EventDispatcher.java:103)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13016897">SLING-6222</key>
            <summary>[Startup ERROR] org.apache.sling.commons.mime FrameworkEvent ERROR (The bundle is uninstalled.)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2016 13:43:21 +0000</created>
                <updated>Mon, 7 Nov 2016 10:55:54 +0000</updated>
                            <resolved>Wed, 2 Nov 2016 10:56:37 +0000</resolved>
                                                    <fixVersion>Commons Mime 2.1.10</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15625474" author="asanso" created="Tue, 1 Nov 2016 13:46:56 +0000"  >&lt;p&gt;proposed patch &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Index: src/main/java/org/apache/sling/commons/mime/internal/MimeTypeServiceImpl.java
===================================================================
--- src/main/java/org/apache/sling/commons/mime/internal/MimeTypeServiceImpl.java	(revision 1765930)
+++ src/main/java/org/apache/sling/commons/mime/internal/MimeTypeServiceImpl.java	(working copy)
@@ -255,11 +255,15 @@
 
     @Override
     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void bundleChanged(BundleEvent event) {
-        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (event.getType() == BundleEvent.RESOLVED) {
-            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.registerMimeType(event.getBundle().getEntry(MIME_TYPES));
+        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
+            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (event.getType() == BundleEvent.RESOLVED) {
+                &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.registerMimeType(event.getBundle().getEntry(MIME_TYPES));
+            }
+        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IllegalStateException ie) {
+            log(LogService.LOG_INFO, &lt;span class=&quot;code-quote&quot;&gt;&quot;bundleChanged: The bundle is uninstalled&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
         }
     }
-
+    
     &lt;span class=&quot;code-comment&quot;&gt;// ---------- plugin support -----------------------------------------------
&lt;/span&gt; 
     Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; getMimeMap() {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15625475" author="asanso" created="Tue, 1 Nov 2016 13:47:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; WDYT?&lt;/p&gt;</comment>
                            <comment id="15625609" author="fmeschbe" created="Tue, 1 Nov 2016 14:48:54 +0000"  >&lt;p&gt;Looks like a concurrency situation with bundles oscillating between being resolved and soon uninstalled ...&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;I suggest to only catch the registerMimeType line inside the if statement.&lt;/li&gt;
	&lt;li&gt;I suggest to not call the message &quot;uninstalled&quot;. Just indicate an error registering the mime type.&lt;/li&gt;
	&lt;li&gt;Maybe add the bundle identification to the log message&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="15627857" author="cziegeler" created="Wed, 2 Nov 2016 05:55:23 +0000"  >&lt;p&gt;+1 to what &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fmeschbe&quot; class=&quot;user-hover&quot; rel=&quot;fmeschbe&quot;&gt;fmeschbe&lt;/a&gt; said &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15628589" author="asanso" created="Wed, 2 Nov 2016 10:55:48 +0000"  >&lt;p&gt;applied modified patch (as per suggestions) in r1767631&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35o7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6208] [dev] Extension point declaration for org.eclipse.ui.trace.traceComponents is marked as an error</title>
                <link>https://issues.apache.org/jira/browse/SLING-6208</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I am not sure when this started happening, but for me ( tried both Neon.1 and Mars.2 ) the extension point is marked as an error.&lt;/p&gt;

&lt;p&gt;The root cause seems to be that the extension point is provided by the &lt;tt&gt;org.eclipse.ui.trace&lt;/tt&gt; bundle, which is not included in the target platform. In my local installation it&apos;s provided by the PDE feature, which means that we should include PDE in the target platform as well.&lt;/p&gt;

&lt;p&gt;I&apos;d rather do this more fine-grained, but at the moment I don&apos;t see a simpler solution.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13016117">SLING-6208</key>
            <summary>[dev] Extension point declaration for org.eclipse.ui.trace.traceComponents is marked as an error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2016 11:31:02 +0000</created>
                <updated>Sun, 21 Jan 2018 20:23:39 +0000</updated>
                            <resolved>Tue, 1 Nov 2016 12:14:40 +0000</resolved>
                                                    <fixVersion>Sling Eclipse IDE 1.2.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15615160" author="kwin" created="Fri, 28 Oct 2016 11:40:06 +0000"  >&lt;p&gt;The related discussion at &lt;a href=&quot;http://stackoverflow.com/questions/13178267/optional-extension-points-in-plugin-xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/13178267/optional-extension-points-in-plugin-xml&lt;/a&gt; (triggered by you) is probably worth adding as a reference here.&lt;/p&gt;</comment>
                            <comment id="15615186" author="kwin" created="Fri, 28 Oct 2016 11:53:43 +0000"  >&lt;p&gt;Can&apos;t we just rely on one single plugin (&lt;a href=&quot;http://git.eclipse.org/c/pde/eclipse.pde.ui.git/tree/ui/org.eclipse.ui.trace/META-INF/MANIFEST.MF&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git.eclipse.org/c/pde/eclipse.pde.ui.git/tree/ui/org.eclipse.ui.trace/META-INF/MANIFEST.MF&lt;/a&gt;) in the target? Otherwise problems at run time might not be visible early enough.&lt;/p&gt;</comment>
                            <comment id="15616538" author="rombert" created="Fri, 28 Oct 2016 20:55:28 +0000"  >&lt;p&gt;I don&apos;t see a way of doing that from the target editor. Yes, there is the plug-ins tab, but as soon as I deselect something the whole list of included plug-ins is included in the platform, and I&apos;m wary of maintaining that.&lt;/p&gt;

&lt;p&gt;Right now I see three options:&lt;/p&gt;

&lt;p&gt;1. Use an &apos;extended&apos; target platform and live with the fact that we might reference PDE stuff which is not necessarily available for the users installing the IDE tooling&lt;br/&gt;
2. Use the existing target platform and live with the the errors in the editor&lt;br/&gt;
3. Use two target platforms, one for dev, and one for building. The one for dev would include PDE and the one for prod the Eclipse platform.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="15617636" author="kwin" created="Sat, 29 Oct 2016 07:26:32 +0000"  >&lt;p&gt;You can in fact restrict filter target files in Tycho (through a Maven plugin configuration, &lt;a href=&quot;https://wiki.eclipse.org/Tycho/Target_Platform#Filtering&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wiki.eclipse.org/Tycho/Target_Platform#Filtering&lt;/a&gt;). But in fact I would be in favour of 3. Although a &quot;merge&quot; is not properly supported in PDE (&lt;a href=&quot;https://bugs.eclipse.org/bugs/show_bug.cgi?id=392652&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.eclipse.org/bugs/show_bug.cgi?id=392652&lt;/a&gt;) at least manually one can select the DEV target for PDE file while Tycho is still using PROD for building.&lt;/p&gt;</comment>
                            <comment id="15625275" author="rombert" created="Tue, 1 Nov 2016 12:14:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;You can in fact restrict filter target files in Tycho (through a Maven plugin configuration, &lt;a href=&quot;https://wiki.eclipse.org/Tycho/Target_Platform#Filtering&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wiki.eclipse.org/Tycho/Target_Platform#Filtering&lt;/a&gt;). &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That does not seem to help us here, as we need most of the target platform identical, and then add:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Eclipse Platform, for building&lt;/li&gt;
	&lt;li&gt;Eclipse PDE, for dev&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For the record, there is also option&lt;/p&gt;

&lt;p&gt;4. Use the &lt;a href=&quot;https://github.com/mbarbero/fr.obeo.releng.targetplatform&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Target Platform Definition DSL and Generator&lt;/a&gt;, but it seems overkill for our scenario ( see also &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3555&quot; title=&quot;Simpler target platform management with the target platform generator DSL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3555&quot;&gt;&lt;del&gt;SLING-3555&lt;/del&gt;&lt;/a&gt; )&lt;/p&gt;

&lt;p&gt;I&apos;ve gone with 3. and created two target platform definitions, fixed in &lt;a href=&quot;https://svn.apache.org/r1767485&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1767485&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35jev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6191] Background servlets uses the user&apos;s session to create job node</title>
                <link>https://issues.apache.org/jira/browse/SLING-6191</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When you call a background servlet, it will create a node by default in /var/bg/jobs. This is done using the same session of the user that made the request.&lt;/p&gt;

&lt;p&gt;This causes problems since it is possible that the user does not have write access to that directory. If this is the case the request will fail due to an AccessDeniedException.&lt;/p&gt;

&lt;p&gt;Also, the node doesn&apos;t seem exist by default, so you have to manually create it to apply any permissions to it.&lt;/p&gt;

&lt;p&gt;Instead the job node should be created with a dedicated user.&lt;/p&gt;

&lt;p&gt;I reproduced this with org.apache.sling.bgservlets 1.0.6&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015441">SLING-6191</key>
            <summary>Background servlets uses the user&apos;s session to create job node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="santiagozky">Santiago Garc&#237;a Pimentel</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 14:37:48 +0000</created>
                <updated>Mon, 31 Oct 2016 13:30:21 +0000</updated>
                                            <version>Background Servlets 1.0.6</version>
                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15608678" author="santiagozky" created="Wed, 26 Oct 2016 14:46:42 +0000"  >&lt;p&gt;I upgraded my bundle to version 1.0.8 and the problem persists.&lt;/p&gt;</comment>
                            <comment id="15609626" author="joerghoh" created="Wed, 26 Oct 2016 20:48:00 +0000"  >&lt;p&gt;I think, that it&apos;s correct that the user session is used to create the node in /var/bg/jobs. Using a service user would allow everyone (even the anonymous user) to create a background job, which would be a huge problem.&lt;br/&gt;
So if you need to grant access for certain users to that folder, you can easily restrict access to use this feature. When you use a service user, you need to implement another mechanism to restrict access.&lt;/p&gt;</comment>
                            <comment id="15622155" author="santiagozky" created="Mon, 31 Oct 2016 13:30:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joerghoh&quot; class=&quot;user-hover&quot; rel=&quot;joerghoh&quot;&gt;joerghoh&lt;/a&gt; I think it would have to be made at some point. from the TODO points in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-550&quot; title=&quot;Support for background servlets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-550&quot;&gt;&lt;del&gt;SLING-550&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
-&quot;Access control: status nodes should be readable by their owner only (+ admin of course).&quot;.&lt;br/&gt;
I don&apos;t think this is happening right now and any user with rights to that node could access other user&apos;s jobs.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12910481">SLING-5261</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35f8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6190] More gracefully deal with non existing natures during project import</title>
                <link>https://issues.apache.org/jira/browse/SLING-6190</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The project configurator from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3100&quot; title=&quot;Provide a m2e project configurator for packaging &amp;quot;content-package&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3100&quot;&gt;&lt;del&gt;SLING-3100&lt;/del&gt;&lt;/a&gt; fails in case a nature is not available. E.g. with this stack trace in case JSDT is not available:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;WARNING: org.eclipse.core.resources code=568 Problems encountered &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; setting project description.
  at org.eclipse.core.internal.resources.Project.setDescription(Project.java:1255)
  at org.apache.sling.ide.eclipse.m2e.internal.ContentPackageProjectConfigurator.addNatures(ContentPackageProjectConfigurator.java:115)
  at org.apache.sling.ide.eclipse.m2e.internal.ContentPackageProjectConfigurator.access$1(ContentPackageProjectConfigurator.java:103)
  at org.apache.sling.ide.eclipse.m2e.internal.ContentPackageProjectConfigurator$WtpProjectConfigurer.configure(ContentPackageProjectConfigurator.java:139)
  at org.apache.sling.ide.eclipse.m2e.internal.ContentPackageProjectConfigurator.configure(ContentPackageProjectConfigurator.java:91)
  at org.eclipse.m2e.core.project.configurator.AbstractLifecycleMapping.configure(AbstractLifecycleMapping.java:120)
  at org.eclipse.m2e.core.internal.project.ProjectConfigurationManager$3.call(ProjectConfigurationManager.java:501)
  at org.eclipse.m2e.core.internal.project.ProjectConfigurationManager$3.call(ProjectConfigurationManager.java:1)
  at org.eclipse.m2e.core.internal.embedder.MavenExecutionContext.executeBare(MavenExecutionContext.java:176)
  at org.eclipse.m2e.core.internal.embedder.MavenExecutionContext.execute(MavenExecutionContext.java:151)
  at org.eclipse.m2e.core.internal.project.ProjectConfigurationManager.updateProjectConfiguration(ProjectConfigurationManager.java:494)
  at org.eclipse.m2e.core.internal.project.ProjectConfigurationManager.configureNewMavenProjects(ProjectConfigurationManager.java:281)
  at org.eclipse.m2e.core.internal.project.ProjectConfigurationManager$1.call(ProjectConfigurationManager.java:168)
  at org.eclipse.m2e.core.internal.project.ProjectConfigurationManager$1.call(ProjectConfigurationManager.java:1)
  at org.eclipse.m2e.core.internal.embedder.MavenExecutionContext.executeBare(MavenExecutionContext.java:176)
  at org.eclipse.m2e.core.internal.embedder.MavenExecutionContext.execute(MavenExecutionContext.java:151)
  at org.eclipse.m2e.core.internal.embedder.MavenExecutionContext.execute(MavenExecutionContext.java:99)
  at org.eclipse.m2e.core.internal.embedder.MavenImpl.execute(MavenImpl.java:1355)
  at org.eclipse.m2e.core.internal.project.ProjectConfigurationManager.importProjects(ProjectConfigurationManager.java:136)
...
  at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)
  WARNING: org.eclipse.core.resources code=35 Nature does not exist: org.eclipse.wst.jsdt.core.jsNature.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We should deal more gracefully with missing natures (which are not enforced at all by Sling IDE e.g. through required bundles)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015411">SLING-6190</key>
            <summary>More gracefully deal with non existing natures during project import</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 13:24:49 +0000</created>
                <updated>Sun, 21 Jan 2018 20:23:31 +0000</updated>
                            <resolved>Thu, 27 Oct 2016 14:12:51 +0000</resolved>
                                    <version>Sling Eclipse IDE 1.1.0</version>
                                    <fixVersion>Sling Eclipse IDE 1.2.0</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15608456" author="kwin" created="Wed, 26 Oct 2016 13:30:02 +0000"  >&lt;p&gt;All existing natures can be listed via &lt;tt&gt;workspace.getNatureDescriptors()&lt;/tt&gt; (&lt;a href=&quot;http://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2FresAdv_natures.htm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://help.eclipse.org/neon/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2FresAdv_natures.htm&lt;/a&gt;), alternatively a new set can be validated via &lt;tt&gt;workspace.validateNatureSet(newNatures)&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15612010" author="kwin" created="Thu, 27 Oct 2016 14:12:51 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1766831&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1766831&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16130396" author="rombert" created="Thu, 17 Aug 2017 13:34:40 +0000"  >&lt;p&gt;Added missing import in manifest in &lt;a href=&quot;https://svn.apache.org/r1805284&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1805284&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35f27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6188] Improve validators</title>
                <link>https://issues.apache.org/jira/browse/SLING-6188</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Both validators being provided by Sling IDE (checking manifest.mf consistency as well as checking for a valid jcr_root) are not classical WST validators bound to a specific file.&lt;br/&gt;
E.g. manifest.mf can become invalid if one of the referenced service.xmls vanishes during the build. So it is hard to tell which modifications require a revalidation. For the content package validation it is currently triggered only once per validation run (still too often) but not filtered on any specific files.&lt;/p&gt;

&lt;p&gt;I would rather propose to not use WST validators for those cases but rather do that check only once after each build.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13015330">SLING-6188</key>
            <summary>Improve validators</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Oct 2016 07:13:44 +0000</created>
                <updated>Fri, 11 Apr 2025 14:30:42 +0000</updated>
                                            <version>Sling Eclipse IDE 1.1.0</version>
                                    <fixVersion>Sling Eclipse IDE 1.3.2</fixVersion>
                                    <component>IDE</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15628132" author="kwin" created="Wed, 2 Nov 2016 07:58:17 +0000"  >&lt;p&gt;Maybe a module validator is the right choice here. That one should be called only prior to publishing (still to be verified). There would be the right place to do that kind of validation.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12748547">SLING-4070</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12747442">SLING-4031</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35ek7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6185] I18NHttpServletRequest#getLocale should never return null</title>
                <link>https://issues.apache.org/jira/browse/SLING-6185</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;According to the JEE API, the &lt;tt&gt;ServletRequest#getLocale&lt;/tt&gt; should never return &lt;tt&gt;null&lt;/tt&gt;, the ultimate fallback being the default locale for the server.&lt;/p&gt;

&lt;p&gt;However, the Sling wrapper &lt;tt&gt;o.a.s.i.i.I18NFilter.I18NHttpServletRequest#getLocale&lt;/tt&gt; &lt;em&gt;may&lt;/em&gt; return &lt;tt&gt;null&lt;/tt&gt; in case:&lt;br/&gt;
1. the localeResolver does return &lt;tt&gt;empty list&lt;/tt&gt; (allowed as per API)&lt;br/&gt;
2. &lt;tt&gt;The bundleProvider#getDefaultLocale&lt;/tt&gt; returns &lt;tt&gt;null&lt;/tt&gt; (not clear if allowed or not)&lt;/p&gt;

&lt;p&gt;With the current Sling code, 2. can occurs at &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/I18NFilter.java#L198&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/I18NFilter.java#L198&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/I18NFilter.java#L280-L283&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/I18NFilter.java#L280-L283&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015024">SLING-6185</key>
            <summary>I18NHttpServletRequest#getLocale should never return null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Oct 2016 09:37:24 +0000</created>
                <updated>Thu, 22 Dec 2016 08:02:39 +0000</updated>
                            <resolved>Tue, 25 Oct 2016 19:04:12 +0000</resolved>
                                    <version>i18n 2.5.4</version>
                                    <fixVersion>i18n 2.5.6</fixVersion>
                                    <component>i18n</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15604798" author="marett" created="Tue, 25 Oct 2016 09:40:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I suggest to fix this by&lt;/p&gt;

&lt;p&gt;1. Clarifying that &lt;tt&gt;org.apache.sling.i18n.ResourceBundleProvider#getDefaultLocale&lt;/tt&gt; must not return null and ;&lt;br/&gt;
2. Fixing &lt;tt&gt;CombinedBundleProvider#getDefaultLocale&lt;/tt&gt; such that it returns &lt;tt&gt;Locale.ENGLISH&lt;/tt&gt; as fallback&lt;/p&gt;

&lt;p&gt;This would require changing the unit tests &lt;tt&gt;ResourceBundleProviderIT&lt;/tt&gt;&#160;which cover returning &lt;tt&gt;null&lt;/tt&gt; in some cases.&lt;/p&gt;

&lt;p&gt;Alternatively, we could &lt;br/&gt;
1. Clarify that &lt;tt&gt;org.apache.sling.i18n.ResourceBundleProvider#getDefaultLocale&lt;/tt&gt; &lt;em&gt;may&lt;/em&gt; return null and ;&lt;br/&gt;
2. Fixing &lt;tt&gt;I18NHttpServletRequest#getLocaleList&lt;/tt&gt; such that it returns &lt;tt&gt;Locale.ENGLISH&lt;/tt&gt; as fallback when ResourceBundleProvider#getDefaultLocale returns &lt;tt&gt;null&lt;/tt&gt;, and we keep the tests as is.&lt;/p&gt;

&lt;p&gt;wdyt ?&lt;/p&gt;</comment>
                            <comment id="15605107" author="marett" created="Tue, 25 Oct 2016 12:00:46 +0000"  >&lt;p&gt;Attaching svn compatible patch for alternative solution, patch is otherwise available at &lt;a href=&quot;https://github.com/tmaret/sling/commit/74e6e3a2bd21469241cf39fbca9913b051b82312.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tmaret/sling/commit/74e6e3a2bd21469241cf39fbca9913b051b82312.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I think it&apos;d make sense for you to quickly look at it as it seems you are the main contributor here.&lt;/p&gt;</comment>
                            <comment id="15606176" author="cziegeler" created="Tue, 25 Oct 2016 19:04:13 +0000"  >&lt;p&gt;Thanks for your patch, it&apos;s applied&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835108" name="SLING-6185.patch" size="2327" author="marett" created="Tue, 25 Oct 2016 12:00:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35co7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6182] repoinit fails to set ACL on previously created principal</title>
                <link>https://issues.apache.org/jira/browse/SLING-6182</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2016-10-23 14:23:46,104 DEBUG [FelixStartLevel] o.a.s.j.o.s.i.OakSlingRepositoryManager [AbstractSlingRepositoryManager.java : 335] start: calling SlingRepositoryInitializer
2016-10-23 14:23:46,104 DEBUG [FelixStartLevel] o.a.s.j.o.s.i.OakSlingRepositoryManager [AbstractSlingRepositoryManager.java : 376] Executing RepositoryInitializer, references=[raw:file:/[...]/scripting/org.apache.sling.scripting.thymeleaf/src/test/resources/repoinit.txt]
2016-10-23 14:23:46,104 DEBUG [FelixStartLevel] o.a.s.j.b.i.LoginAdminWhitelistImpl [LoginAdminWhitelistImpl.java : 138] org.apache.sling.jcr.oak.server is whitelisted to use loginAdministrative, by explicit whitelist
2016-10-23 14:23:46,104 DEBUG [FelixStartLevel] o.a.s.j.o.s.i.OakSlingRepository [AbstractSlingRepository2.java : 384] SlingRepository.loginAdministrative is deprecated. Please use SlingRepository.loginService.
2016-10-23 14:23:46,104 DEBUG [FelixStartLevel] o.a.j.o.s.a.LoginContextProviderImpl [LoginContextProviderImpl.java : 77] Found pre-authenticated subject: No further login actions required.
2016-10-23 14:23:46,106 INFO [FelixStartLevel] o.a.s.j.r.i.RepoinitTextProvider [RepoinitTextProvider.java : 99] Reading repoinit statements from Reference:format=raw, URL=file:/[...]/scripting/org.apache.sling.scripting.thymeleaf/src/test/resources/repoinit.txt
2016-10-23 14:23:46,106 DEBUG [FelixStartLevel] o.a.s.j.r.i.RepoinitTextProvider [RepoinitTextProvider.java : 101] Raw text from file:/[...]/scripting/org.apache.sling.scripting.thymeleaf/src/test/resources/repoinit.txt: 
################################################################################
#
#    Licensed to the Apache Software Foundation (ASF) under one or more
#    contributor license agreements.  See the NOTICE file distributed with
#    this work for additional information regarding copyright ownership.
#    The ASF licenses this file to You under the Apache License, Version 2.0
#    (the &quot;License&quot;); you may not use this file except in compliance with
#    the License.  You may obtain a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
#    Unless required by applicable law or agreed to in writing, software
#    distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
#    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#    See the License for the specific language governing permissions and
#    limitations under the License.
#
################################################################################

create path (sling:Folder) /apps
create path (sling:Folder) /libs

create service user sling-scripting

set ACL for sling-scripting
  allow jcr:read on /apps
  allow jcr:read on /libs
end


# JCR Oak Server &amp;gt; 1.1.0
create path (sling:OrderedFolder) /content

set ACL for everyone
  allow jcr:read on /content
end

2016-10-23 14:23:46,115 INFO [FelixStartLevel] o.a.s.j.r.i.RepositoryInitializer [RepositoryInitializer.java : 114] Executing 6 repoinit operations
2016-10-23 14:23:46,123 INFO [FelixStartLevel] o.a.s.j.r.i.ServiceAndAclVisitor [ServiceAndAclVisitor.java : 125] Creating node /apps with primary type sling:Folder
2016-10-23 14:23:46,124 DEBUG [FelixStartLevel] o.a.j.o.audit [SessionDelegate.java : 655] [admin] [session-11] Adding node [//apps]
2016-10-23 14:23:46,126 DEBUG [FelixStartLevel] o.a.j.o.p.i.IndexUpdate [IndexUpdate.java : 268] Indexing report
    - /oak:index/nodetype(1)

2016-10-23 14:23:46,127 INFO [FelixStartLevel] o.a.s.j.r.i.ServiceAndAclVisitor [ServiceAndAclVisitor.java : 125] Creating node /libs with primary type sling:Folder
2016-10-23 14:23:46,127 DEBUG [FelixStartLevel] o.a.j.o.audit [SessionDelegate.java : 655] [admin] [session-11] Adding node [//libs]
2016-10-23 14:23:46,128 DEBUG [FelixStartLevel] o.a.j.o.p.i.IndexUpdate [IndexUpdate.java : 268] Indexing report
    - /oak:index/nodetype(1)

2016-10-23 14:23:46,132 DEBUG [FelixStartLevel] o.a.j.o.p.i.p.PropertyIndex [PropertyIndex.java : 165] property cost for uuid is 2.0
2016-10-23 14:23:46,133 DEBUG [FelixStartLevel] o.a.j.o.q.QueryEngineImpl [QueryEngineImpl.java : 295] No alternatives found. Query: select [nt:base].[jcr:primaryType] as [nt:base.jcr:primaryType] from [nt:base] as [nt:base] where [nt:base].[jcr:uuid] = $id
2016-10-23 14:23:46,135 INFO [FelixStartLevel] o.a.s.j.r.i.ServiceAndAclVisitor [ServiceAndAclVisitor.java : 60] Creating service user sling-scripting
2016-10-23 14:23:46,136 DEBUG [FelixStartLevel] o.a.j.o.p.i.p.PropertyIndex [PropertyIndex.java : 165] property cost for uuid is 2.0
2016-10-23 14:23:46,137 DEBUG [FelixStartLevel] o.a.j.o.q.QueryEngineImpl [QueryEngineImpl.java : 295] No alternatives found. Query: select [nt:base].[jcr:primaryType] as [nt:base.jcr:primaryType] from [nt:base] as [nt:base] where [nt:base].[jcr:uuid] = $id
2016-10-23 14:23:46,138 DEBUG [FelixStartLevel] o.a.j.o.p.i.p.PropertyIndex [PropertyIndex.java : 165] property cost for principalName is 2.0
2016-10-23 14:23:46,138 DEBUG [FelixStartLevel] o.a.j.o.q.QueryEngineImpl [QueryEngineImpl.java : 295] No alternatives found. Query: select [rep:Authorizable].[rep:authorizableId] as [rep:Authorizable.rep:authorizableId], [rep:Authorizable].[rep:principalName] as [rep:Authorizable.rep:principalName], [rep:Authorizable].[jcr:uuid] as [rep:Authorizable.jcr:uuid], [rep:Authorizable].[jcr:primaryType] as [rep:Authorizable.jcr:primaryType], [rep:Authorizable].[jcr:createdBy] as [rep:Authorizable.jcr:createdBy], [rep:Authorizable].[jcr:created] as [rep:Authorizable.jcr:created] from [rep:Authorizable] as [rep:Authorizable] where [rep:Authorizable].[rep:principalName] = $principalName
2016-10-23 14:23:46,139 DEBUG [FelixStartLevel] o.a.j.o.s.u.UserManagerImpl [UserManagerImpl.java : 190] System user created: sling-scripting
2016-10-23 14:23:46,144 DEBUG [FelixStartLevel] o.a.j.o.p.i.p.PropertyIndex [PropertyIndex.java : 165] property cost for principalName is 2.0
2016-10-23 14:23:46,144 DEBUG [FelixStartLevel] o.a.j.o.q.QueryEngineImpl [QueryEngineImpl.java : 295] No alternatives found. Query: select [rep:Authorizable].[rep:authorizableId] as [rep:Authorizable.rep:authorizableId], [rep:Authorizable].[rep:principalName] as [rep:Authorizable.rep:principalName], [rep:Authorizable].[jcr:uuid] as [rep:Authorizable.jcr:uuid], [rep:Authorizable].[jcr:primaryType] as [rep:Authorizable.jcr:primaryType], [rep:Authorizable].[jcr:createdBy] as [rep:Authorizable.jcr:createdBy], [rep:Authorizable].[jcr:created] as [rep:Authorizable.jcr:created] from [rep:Authorizable] as [rep:Authorizable] where [rep:Authorizable].[rep:principalName] = $principalName
2016-10-23 14:23:46,146 ERROR [FelixStartLevel] o.a.s.j.o.s.i.OakSlingRepositoryManager [AbstractSlingRepositoryManager.java : 345] Exception in a SlingRepositoryInitializer, SlingRepository service registration aborted
java.lang.RuntimeException: Failed to set ACL (java.lang.IllegalStateException: Principal not found: sling-scripting) AclLine ALLOW {paths=[/apps], privileges=[jcr:read]}
	at org.apache.sling.jcr.repoinit.impl.ServiceAndAclVisitor.setAcl(ServiceAndAclVisitor.java:93)
	at org.apache.sling.jcr.repoinit.impl.ServiceAndAclVisitor.visitSetAclPrincipal(ServiceAndAclVisitor.java:102)
	at org.apache.sling.repoinit.parser.operations.SetAclPrincipals.accept(SetAclPrincipals.java:48)
	at org.apache.sling.jcr.repoinit.impl.JcrRepoInitOpsProcessorImpl.apply(JcrRepoInitOpsProcessorImpl.java:47)
	at org.apache.sling.jcr.repoinit.impl.RepositoryInitializer.processRepository(RepositoryInitializer.java:115)
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.executeRepositoryInitializers(AbstractSlingRepositoryManager.java:378)
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.start(AbstractSlingRepositoryManager.java:338)
	at org.apache.sling.jcr.oak.server.internal.OakSlingRepositoryManager.activate(OakSlingRepositoryManager.java:269)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.felix.scr.impl.inject.BaseMethod.invokeMethod(BaseMethod.java:224)
	at org.apache.felix.scr.impl.inject.BaseMethod.access$500(BaseMethod.java:39)
	at org.apache.felix.scr.impl.inject.BaseMethod$Resolved.invoke(BaseMethod.java:617)
	at org.apache.felix.scr.impl.inject.BaseMethod.invoke(BaseMethod.java:501)
	at org.apache.felix.scr.impl.inject.ActivateMethod.invoke(ActivateMethod.java:302)
	at org.apache.felix.scr.impl.inject.ActivateMethod.invoke(ActivateMethod.java:294)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:297)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:108)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:906)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:879)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:748)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:1012)
	at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:968)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)
	at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)
	at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)
	at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:127)
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:322)
	at org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStoreService.registerNodeStore(SegmentNodeStoreService.java:386)
	at org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStoreService.activate(SegmentNodeStoreService.java:337)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.felix.scr.impl.inject.BaseMethod.invokeMethod(BaseMethod.java:224)
	at org.apache.felix.scr.impl.inject.BaseMethod.access$500(BaseMethod.java:39)
	at org.apache.felix.scr.impl.inject.BaseMethod$Resolved.invoke(BaseMethod.java:617)
	at org.apache.felix.scr.impl.inject.BaseMethod.invoke(BaseMethod.java:501)
	at org.apache.felix.scr.impl.inject.ActivateMethod.invoke(ActivateMethod.java:302)
	at org.apache.felix.scr.impl.inject.ActivateMethod.invoke(ActivateMethod.java:294)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:297)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:108)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:906)
	at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:879)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:748)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.enableInternal(AbstractComponentManager.java:674)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.enable(AbstractComponentManager.java:429)
	at org.apache.felix.scr.impl.manager.ConfigurableComponentHolder.enableComponents(ConfigurableComponentHolder.java:657)
	at org.apache.felix.scr.impl.BundleComponentActivator.initialEnable(BundleComponentActivator.java:341)
	at org.apache.felix.scr.impl.Activator.loadComponents(Activator.java:403)
	at org.apache.felix.scr.impl.Activator.access$200(Activator.java:54)
	at org.apache.felix.scr.impl.Activator$ScrExtension.start(Activator.java:278)
	at org.apache.felix.utils.extender.AbstractExtender.createExtension(AbstractExtender.java:259)
	at org.apache.felix.utils.extender.AbstractExtender.modifiedBundle(AbstractExtender.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:482)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:415)
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444)
	at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:916)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:835)
	at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:517)
	at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4541)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2172)
	at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1371)
	at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:308)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: Principal not found: sling-scripting
	at org.apache.sling.jcr.repoinit.impl.AclUtil.setAcl(AclUtil.java:61)
	at org.apache.sling.jcr.repoinit.impl.ServiceAndAclVisitor.setAcl(ServiceAndAclVisitor.java:91)
	... 75 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13014559">SLING-6182</key>
            <summary>repoinit fails to set ACL on previously created principal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Sun, 23 Oct 2016 12:37:14 +0000</created>
                <updated>Mon, 13 Mar 2017 14:47:45 +0000</updated>
                            <resolved>Thu, 9 Mar 2017 16:25:21 +0000</resolved>
                                                    <fixVersion>Repoinit JCR 1.1.4</fixVersion>
                                    <component>JCR</component>
                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15599671" author="olli" created="Sun, 23 Oct 2016 13:18:32 +0000"  >&lt;p&gt;Works with reordered statements (creating folders after service user), so obviously a timing issue - &lt;del&gt;or is it expected behavior&lt;/del&gt; I guess it&apos;s because of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6171&quot; title=&quot;Unable to set up ACLs for the &amp;#39;everyone&amp;#39; principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6171&quot;&gt;&lt;del&gt;SLING-6171&lt;/del&gt;&lt;/a&gt; and slightly better performance, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;create service user sling-scripting

create path (sling:Folder) /apps
create path (sling:Folder) /libs
create path (sling:OrderedFolder) /content

set ACL for everyone
  allow jcr:read on /content
end

set ACL for sling-scripting
  allow jcr:read on /apps
  allow jcr:read on /libs
end
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15621743" author="bdelacretaz" created="Mon, 31 Oct 2016 09:45:42 +0000"  >&lt;p&gt;I&apos;m not sure what the failure scenario is (or rather was), do you mean that &lt;tt&gt;set ACL for sling-scripting&lt;/tt&gt; fails if it&apos;s right after &lt;tt&gt;create service user sling-scripting&lt;/tt&gt; ?&lt;/p&gt;

&lt;p&gt;If yes, in theory the order of statement &quot;families&quot; should have no impact as the JCR initializer executes those statements in a set order - but maybe the creation of the &lt;tt&gt;sling-scripting&lt;/tt&gt; service user is asynchronous inside Oak, and it needs time to be effective?&lt;/p&gt;

&lt;p&gt;If we suspect this we can create a test which quickly executes similar operations many times, to confirm.&lt;/p&gt;</comment>
                            <comment id="15622026" author="olli" created="Mon, 31 Oct 2016 12:31:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;but maybe the creation of the sling-scripting service user is asynchronous inside Oak, and it needs time to be effective?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;most likely as creating a single path (folder) after creating the user and before setting an ACL entry is enough to work around this issue &#8211; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, can you add a test or should I look into it (probably not this week)?&lt;/p&gt;
</comment>
                            <comment id="15622056" author="bdelacretaz" created="Mon, 31 Oct 2016 12:45:28 +0000"  >&lt;p&gt;I should be able to add this test later this week but feel free to beat me to it if you don&apos;t see more action here!&lt;/p&gt;</comment>
                            <comment id="15828154" author="olli" created="Wed, 18 Jan 2017 14:21:18 +0000"  >&lt;p&gt;Using dedicated repoinit files is impossible due to this issue.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, we have to file an issue at Oak, right?&lt;/p&gt;</comment>
                            <comment id="15828204" author="bdelacretaz" created="Wed, 18 Jan 2017 14:48:14 +0000"  >&lt;p&gt;If the problem is indeed that the sling-script user creation is asynchronous (do we know that?) best is probably for the repoinit code to wait until that user is effectively created. &lt;/p&gt;

&lt;p&gt;For this we might improve Oak to provide an event or callback when the user creation is effective, or find suitable code that repoinit can execute in a loop to find out.&lt;/p&gt;</comment>
                            <comment id="15831528" author="olli" created="Fri, 20 Jan 2017 10:35:36 +0000"  >&lt;p&gt;The problem still exists with latest Sling and Oak releases (but I cannot reproduce in a simple integration test):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[...]
2017-01-20T11:20:09,185 | DEBUG | Apache Sling Repository Startup Thread | PropertyIndex                    | 58 - org.apache.jackrabbit.oak-core - 1.5.17 | property cost for principalName is 2.0
2017-01-20T11:20:09,185 | DEBUG | Apache Sling Repository Startup Thread | QueryEngineImpl                  | 58 - org.apache.jackrabbit.oak-core - 1.5.17 | No alternatives found. Query: select [rep:Authorizable].[rep:principalName] as [rep:Authorizable.rep:principalName], [rep:Authorizable].[rep:authorizableId] as [rep:Authorizable.rep:authorizableId], [rep:Authorizable].[jcr:uuid] as [rep:Authorizable.jcr:uuid], [rep:Authorizable].[jcr:primaryType] as [rep:Authorizable.jcr:primaryType], [rep:Authorizable].[jcr:created] as [rep:Authorizable.jcr:created], [rep:Authorizable].[jcr:createdBy] as [rep:Authorizable.jcr:createdBy] from [rep:Authorizable] as [rep:Authorizable] where [rep:Authorizable].[rep:principalName] = $principalName
2017-01-20T11:20:09,186 | DEBUG | Apache Sling Repository Startup Thread | UserManagerImpl                  | 58 - org.apache.jackrabbit.oak-core - 1.5.17 | System user created: sling-i18n
2017-01-20T11:20:09,186 | INFO  | Apache Sling Repository Startup Thread | AclVisitor                       | 101 - org.apache.sling.jcr.repoinit - 1.1.2 | Adding ACL &apos;allow&apos; entry &apos;[jcr:read]&apos; for [sling-i18n] on [/]
2017-01-20T11:20:09,187 | DEBUG | Apache Sling Repository Startup Thread | PropertyIndex                    | 58 - org.apache.jackrabbit.oak-core - 1.5.17 | property cost for principalName is 2.0
2017-01-20T11:20:09,187 | DEBUG | Apache Sling Repository Startup Thread | QueryEngineImpl                  | 58 - org.apache.jackrabbit.oak-core - 1.5.17 | No alternatives found. Query: select [rep:Authorizable].[rep:principalName] as [rep:Authorizable.rep:principalName], [rep:Authorizable].[rep:authorizableId] as [rep:Authorizable.rep:authorizableId], [rep:Authorizable].[jcr:uuid] as [rep:Authorizable.jcr:uuid], [rep:Authorizable].[jcr:primaryType] as [rep:Authorizable.jcr:primaryType], [rep:Authorizable].[jcr:created] as [rep:Authorizable.jcr:created], [rep:Authorizable].[jcr:createdBy] as [rep:Authorizable.jcr:createdBy] from [rep:Authorizable] as [rep:Authorizable] where [rep:Authorizable].[rep:principalName] = $principalName
2017-01-20T11:20:09,187 | DEBUG | Apache Sling Repository Startup Thread | PropertyIndex                    | 58 - org.apache.jackrabbit.oak-core - 1.5.17 | property cost for principalName is 2.0
2017-01-20T11:20:09,188 | DEBUG | Apache Sling Repository Startup Thread | QueryEngineImpl                  | 58 - org.apache.jackrabbit.oak-core - 1.5.17 | No alternatives found. Query: select [rep:Authorizable].[rep:principalName] as [rep:Authorizable.rep:principalName], [rep:Authorizable].[rep:authorizableId] as [rep:Authorizable.rep:authorizableId], [rep:Authorizable].[jcr:uuid] as [rep:Authorizable.jcr:uuid], [rep:Authorizable].[jcr:primaryType] as [rep:Authorizable.jcr:primaryType], [rep:Authorizable].[jcr:created] as [rep:Authorizable.jcr:created], [rep:Authorizable].[jcr:createdBy] as [rep:Authorizable.jcr:createdBy] from [rep:Authorizable] as [rep:Authorizable] where [rep:Authorizable].[rep:principalName] = $principalName
2017-01-20T11:20:09,188 | DEBUG | Apache Sling Repository Startup Thread | PropertyIndex                    | 58 - org.apache.jackrabbit.oak-core - 1.5.17 | property cost for principalName is 2.0
2017-01-20T11:20:09,188 | DEBUG | Apache Sling Repository Startup Thread | QueryEngineImpl                  | 58 - org.apache.jackrabbit.oak-core - 1.5.17 | No alternatives found. Query: select [rep:Authorizable].[rep:principalName] as [rep:Authorizable.rep:principalName], [rep:Authorizable].[rep:authorizableId] as [rep:Authorizable.rep:authorizableId], [rep:Authorizable].[jcr:uuid] as [rep:Authorizable.jcr:uuid], [rep:Authorizable].[jcr:primaryType] as [rep:Authorizable.jcr:primaryType], [rep:Authorizable].[jcr:created] as [rep:Authorizable.jcr:created], [rep:Authorizable].[jcr:createdBy] as [rep:Authorizable.jcr:createdBy] from [rep:Authorizable] as [rep:Authorizable] where [rep:Authorizable].[rep:principalName] = $principalName
2017-01-20T11:20:09,189 | DEBUG | Apache Sling Repository Startup Thread | PropertyIndex                    | 58 - org.apache.jackrabbit.oak-core - 1.5.17 | property cost for principalName is 2.0
2017-01-20T11:20:09,189 | DEBUG | Apache Sling Repository Startup Thread | QueryEngineImpl                  | 58 - org.apache.jackrabbit.oak-core - 1.5.17 | No alternatives found. Query: select [rep:Authorizable].[rep:principalName] as [rep:Authorizable.rep:principalName], [rep:Authorizable].[rep:authorizableId] as [rep:Authorizable.rep:authorizableId], [rep:Authorizable].[jcr:uuid] as [rep:Authorizable.jcr:uuid], [rep:Authorizable].[jcr:primaryType] as [rep:Authorizable.jcr:primaryType], [rep:Authorizable].[jcr:created] as [rep:Authorizable.jcr:created], [rep:Authorizable].[jcr:createdBy] as [rep:Authorizable.jcr:createdBy] from [rep:Authorizable] as [rep:Authorizable] where [rep:Authorizable].[rep:principalName] = $principalName
2017-01-20T11:20:09,190 | ERROR | Apache Sling Repository Startup Thread | OakSlingRepositoryManager        | 93 - org.apache.sling.jcr.base - 3.0.0 | Exception in a SlingRepositoryInitializer, SlingRepository service registration aborted
java.lang.RuntimeException: Failed to set ACL (java.lang.IllegalStateException: Principal not found: sling-i18n) AclLine ALLOW {paths=[/], privileges=[jcr:read]}
	at org.apache.sling.jcr.repoinit.impl.AclVisitor.setAcl(AclVisitor.java:61) [101:org.apache.sling.jcr.repoinit:1.1.2]
	at org.apache.sling.jcr.repoinit.impl.AclVisitor.visitSetAclPrincipal(AclVisitor.java:70) [101:org.apache.sling.jcr.repoinit:1.1.2]
	at org.apache.sling.repoinit.parser.operations.SetAclPrincipals.accept(SetAclPrincipals.java:48) [108:org.apache.sling.repoinit.parser:1.1.0]
	at org.apache.sling.jcr.repoinit.impl.JcrRepoInitOpsProcessorImpl.apply(JcrRepoInitOpsProcessorImpl.java:49) [101:org.apache.sling.jcr.repoinit:1.1.2]
	at org.apache.sling.jcr.repoinit.impl.RepositoryInitializer.processRepository(RepositoryInitializer.java:98) [101:org.apache.sling.jcr.repoinit:1.1.2]
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.executeRepositoryInitializers(AbstractSlingRepositoryManager.java:541) [93:org.apache.sling.jcr.base:3.0.0]
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.initializeAndRegisterRepositoryService(AbstractSlingRepositoryManager.java:485) [93:org.apache.sling.jcr.base:3.0.0]
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.access$300(AbstractSlingRepositoryManager.java:85) [93:org.apache.sling.jcr.base:3.0.0]
	at org.apache.sling.jcr.base.AbstractSlingRepositoryManager$4.run(AbstractSlingRepositoryManager.java:455) [93:org.apache.sling.jcr.base:3.0.0]
Caused by: java.lang.IllegalStateException: Principal not found: sling-i18n
	at org.apache.sling.jcr.repoinit.impl.AclUtil.setAcl(AclUtil.java:71) ~[?:?]
	at org.apache.sling.jcr.repoinit.impl.AclVisitor.setAcl(AclVisitor.java:59) ~[?:?]
	... 8 more
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt;: Should we call save after every repoinit operation?&lt;/p&gt;</comment>
                            <comment id="15831538" author="bdelacretaz" created="Fri, 20 Jan 2017 10:52:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;Should we call save after every repoinit operation?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t know if that&apos;s required but if that helps I&apos;d say go for it, and leave a TODO to have a deeper look later and decide if it&apos;s really needed.&lt;/p&gt;</comment>
                            <comment id="15831606" author="olli" created="Fri, 20 Jan 2017 11:57:12 +0000"  >&lt;p&gt;It doesn&apos;t help when saving after every &lt;tt&gt;OperationVisitor&lt;/tt&gt;&lt;del&gt;, but only Oak with Mongo is affected (Oak with Tar is fine)&lt;/del&gt;. So it&apos;s an Oak issue for sure.&lt;/p&gt;</comment>
                            <comment id="15851511" author="bdelacretaz" created="Fri, 3 Feb 2017 13:57:52 +0000"  >&lt;p&gt;I have added a unit test in &lt;a href=&quot;http://svn.apache.org/r1781548&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1781548&lt;/a&gt; which creates many service users and immediately sets ACLs on them. It works, but just uses the JCR primitives implemented in this module, does not go through the repoinit layers.&lt;/p&gt;

&lt;p&gt;As a next experiment I&apos;ll try to add lots of service user / ACL statements to the sling/launchpad/testing provisioning model to try and reproduce the issue there.&lt;/p&gt;</comment>
                            <comment id="15851560" author="olli" created="Fri, 3 Feb 2017 14:35:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=henzlerg&quot; class=&quot;user-hover&quot; rel=&quot;henzlerg&quot;&gt;henzlerg&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; have observed a similar behavior: &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3228&quot; title=&quot;Delayed visibility of new groups when using PrincipalManager &quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3228&quot;&gt;&lt;del&gt;OAK-3228&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When removing dummy statements from &lt;a href=&quot;http://svn.apache.org/viewvc/sling/trunk/karaf/org.apache.sling.karaf-repoinit/src/main/resources/sling-i18n.txt?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-i18n.txt&lt;/a&gt; and &lt;a href=&quot;http://svn.apache.org/viewvc/sling/trunk/karaf/org.apache.sling.karaf-repoinit/src/main/resources/sling-scripting.txt?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;sling-scripting.txt&lt;/a&gt; tests will fail immediately.&lt;/p&gt;</comment>
                            <comment id="15851570" author="bdelacretaz" created="Fri, 3 Feb 2017 14:42:29 +0000"  >&lt;p&gt;by dummy statements you mean things like this IIUC?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;create path (sling:Folder) /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/SLING-6182/OAK-5496/sling-i18n
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6465&quot; title=&quot;Split repoinit.txt into dedicated files (nearly per feature)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6465&quot;&gt;&lt;del&gt;SLING-6465&lt;/del&gt;&lt;/a&gt; doesn&apos;t explain how you came up with those statements, do you have an explanation of why they help or was that just trial and error trying to slow things down?&lt;/p&gt;
</comment>
                            <comment id="15851590" author="olli" created="Fri, 3 Feb 2017 14:58:41 +0000"  >&lt;p&gt;Yes, those with &lt;tt&gt;# TODO remove workaround&lt;/tt&gt; above.&lt;/p&gt;

&lt;p&gt;The issues appeared when changing order of statements and I observed that creating a path/node right after a service user was enough to let service users materialize (see my first comment in this issue).&lt;/p&gt;</comment>
                            <comment id="15851604" author="bdelacretaz" created="Fri, 3 Feb 2017 15:11:08 +0000"  >&lt;p&gt;I created the attached &lt;tt&gt;many-service-users.txt&lt;/tt&gt; (with the below script) to try to get a failure at startup but repoinit doesn&apos;t fail.&lt;/p&gt;

&lt;p&gt;OTOH those 1&apos;000 service users cause Sling to reply with a &quot;request failed, authentication service missing&quot; for about 2 minutes after startup, so something asynchronous is definitely going on - but that might be unrelated, I&apos;m just saving this here for reference.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# repoinit statements generation
echo &lt;span class=&quot;code-quote&quot;&gt;&quot;# Testing multiple service users &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; SLING-6182&quot;&lt;/span&gt;
echo &lt;span class=&quot;code-quote&quot;&gt;&quot;create path /SLING_6182_test_path_1&quot;&lt;/span&gt;
echo &lt;span class=&quot;code-quote&quot;&gt;&quot;create path /SLING_6182_test_path_2&quot;&lt;/span&gt;

&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; i in {1..1000}
&lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
ID=SLING_6182_test_$i
cat &amp;lt;&amp;lt; EOF
create service user $ID
set ACL &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; $ID
  allow jcr:read on /SLING_6182_test_path_1
  allow jcr:read on /SLING_6182_test_path_2
end
EOF
done

echo &lt;span class=&quot;code-quote&quot;&gt;&quot;# Testing multiple service users &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; SLING-6182 - done&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15903309" author="olli" created="Thu, 9 Mar 2017 16:19:51 +0000"  >&lt;p&gt;As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anchela&quot; class=&quot;user-hover&quot; rel=&quot;anchela&quot;&gt;anchela&lt;/a&gt; pointed out in &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-5496&quot; title=&quot;Creating service user and setting ACLs immediately for this user fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-5496&quot;&gt;&lt;del&gt;OAK-5496&lt;/del&gt;&lt;/a&gt; (Thanks!), we cannot use &lt;tt&gt;PrincipalManager&lt;/tt&gt; without an index update for getting new principals (which we did with Jackrabbit&apos;s &lt;tt&gt;AccessControlUtils&lt;/tt&gt;).&lt;/p&gt;</comment>
                            <comment id="15903318" author="olli" created="Thu, 9 Mar 2017 16:25:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1786198&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1786198&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/r1786199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1786199&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13034998">SLING-6465</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13036535">OAK-5496</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13013309">SLING-6171</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12850838" name="many-service-users.txt" size="170124" author="bdelacretaz" created="Fri, 3 Feb 2017 15:11:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i359sv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6173] HTL compiled scripts need to set the SlingBindings as request attributes on eval</title>
                <link>https://issues.apache.org/jira/browse/SLING-6173</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;HTL compiled scripts need to set the &lt;tt&gt;SlingBindings&lt;/tt&gt; as request attributes on &lt;tt&gt;eval&lt;/tt&gt; so that Sling Models are able to inject values.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13013425">SLING-6173</key>
            <summary>HTL compiled scripts need to set the SlingBindings as request attributes on eval</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Oct 2016 07:39:27 +0000</created>
                <updated>Tue, 28 Aug 2018 06:38:17 +0000</updated>
                            <resolved>Wed, 19 Oct 2016 16:55:24 +0000</resolved>
                                    <version>Scripting HTL Engine 1.0.20</version>
                                    <fixVersion>Scripting HTL Engine 1.0.26</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15589245" author="radu.cotescu" created="Wed, 19 Oct 2016 16:55:25 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1765682&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1765682&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13181513">SLING-7859</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i352t3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6171] Unable to set up ACLs for the &apos;everyone&apos; principal</title>
                <link>https://issues.apache.org/jira/browse/SLING-6171</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I&apos;m trying to set up ACLs for the &lt;tt&gt;everyone&lt;/tt&gt; principal, but it seems that repoinit does not accept such a setup.&lt;/p&gt;

&lt;p&gt;I&apos;m using a provisioning model section:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[:repoinit]
  create path (sling:Folder) /content/blog/comments
  
  set ACL for everyone
  	allow jcr:addChildNodes,jcr:modifyProperties on /content/blog/comments
  end&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And when I do that the repository initialisation fails with:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;18.10.2016 23:42:26.846 *ERROR* [CM Event Dispatcher (Fire ConfigurationEvent: pid=org.apache.sling.jcr.base.internal.LoginAdminWhitelistImpl)] org.apache.sling.jcr.oak.server.internal.OakSlingRepositoryManager 
Exception in a SlingRepositoryInitializer, SlingRepository service registration aborted
java.lang.RuntimeException: Failed to set ACL (java.lang.IllegalStateException: Principal not found:everyone) AclLine ALLOW {paths=[/content/blog/comments], privileges=[jcr:addChildNodes, jcr:modifyProperties]}
        at org.apache.sling.jcr.repoinit.impl.ServiceAndAclVisitor.setAcl(ServiceAndAclVisitor.java:93)
        at org.apache.sling.jcr.repoinit.impl.ServiceAndAclVisitor.visitSetAclPrincipal(ServiceAndAclVisitor.java:102)
        at org.apache.sling.repoinit.parser.operations.SetAclPrincipals.accept(SetAclPrincipals.java:48)
        at org.apache.sling.jcr.repoinit.impl.JcrRepoInitOpsProcessorImpl.apply(JcrRepoInitOpsProcessorImpl.java:47)
        at org.apache.sling.jcr.repoinit.impl.RepositoryInitializer.processRepository(RepositoryInitializer.java:115)
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.executeRepositoryInitializers(AbstractSlingRepositoryManager.java:378)
        at org.apache.sling.jcr.base.AbstractSlingRepositoryManager.start(AbstractSlingRepositoryManager.java:338)
        at org.apache.sling.jcr.oak.server.internal.OakSlingRepositoryManager.activate(OakSlingRepositoryManager.java:269)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.apache.felix.scr.impl.inject.BaseMethod.invokeMethod(BaseMethod.java:224)
        at org.apache.felix.scr.impl.inject.BaseMethod.access$500(BaseMethod.java:39)
        at org.apache.felix.scr.impl.inject.BaseMethod$Resolved.invoke(BaseMethod.java:617)
        at org.apache.felix.scr.impl.inject.BaseMethod.invoke(BaseMethod.java:501)
        at org.apache.felix.scr.impl.inject.ActivateMethod.invoke(ActivateMethod.java:302)
        at org.apache.felix.scr.impl.inject.ActivateMethod.invoke(ActivateMethod.java:294)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.createImplementationObject(SingleComponentManager.java:297)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.createComponent(SingleComponentManager.java:108)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.getService(SingleComponentManager.java:906)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.getServiceInternal(SingleComponentManager.java:879)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:748)
        at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:1012)
        at org.apache.felix.scr.impl.manager.DependencyManager$SingleStaticCustomizer.addedService(DependencyManager.java:968)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1215)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.customizerAdded(ServiceTracker.java:1136)
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.trackAdding(ServiceTracker.java:945)
        at org.apache.felix.scr.impl.manager.ServiceTracker$AbstractTracked.track(ServiceTracker.java:881)
        at org.apache.felix.scr.impl.manager.ServiceTracker$Tracked.serviceChanged(ServiceTracker.java:1167)
        at org.apache.felix.scr.impl.BundleComponentActivator$ListenerInfo.serviceChanged(BundleComponentActivator.java:127)
        at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)
        at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)
        at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)
        at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4558)
        at org.apache.felix.framework.Felix.registerService(Felix.java:3550)
        at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:886)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:873)
        at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:132)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:940)
        at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:740)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.reconfigure(SingleComponentManager.java:670)
        at org.apache.felix.scr.impl.manager.SingleComponentManager.reconfigure(SingleComponentManager.java:609)
        at org.apache.felix.scr.impl.manager.ConfigurableComponentHolder.configurationUpdated(ConfigurableComponentHolder.java:426)
        at org.apache.felix.scr.impl.manager.RegionConfigurationSupport.configurationEvent(RegionConfigurationSupport.java:273)
        at org.apache.felix.cm.impl.ConfigurationManager$FireConfigurationEvent.sendEvent(ConfigurationManager.java:2055)
        at org.apache.felix.cm.impl.ConfigurationManager$FireConfigurationEvent.run(ConfigurationManager.java:2023)
        at org.apache.felix.cm.impl.UpdateThread.run0(UpdateThread.java:141)
        at org.apache.felix.cm.impl.UpdateThread.run(UpdateThread.java:109)
        at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.IllegalStateException: Principal not found:everyone
        at org.apache.sling.jcr.repoinit.impl.AclUtil.setAcl(AclUtil.java:62)
        at org.apache.sling.jcr.repoinit.impl.ServiceAndAclVisitor.setAcl(ServiceAndAclVisitor.java:91)
        ... 50 common frames omitted&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13013309">SLING-6171</key>
            <summary>Unable to set up ACLs for the &apos;everyone&apos; principal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Oct 2016 20:45:20 +0000</created>
                <updated>Thu, 9 Mar 2017 16:26:37 +0000</updated>
                            <resolved>Fri, 21 Oct 2016 16:02:07 +0000</resolved>
                                    <version>Repoinit JCR 1.0.0</version>
                                    <fixVersion>Repoinit JCR 1.1.0</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15588087" author="bdelacretaz" created="Wed, 19 Oct 2016 08:50:17 +0000"  >&lt;p&gt;In this case the failing code at &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; just does this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;((JackrabbitSession)session).getUserManager().getAuthorizable(&lt;span class=&quot;code-quote&quot;&gt;&quot;everyone&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which apparently returns null.&lt;/p&gt;

&lt;p&gt;Does &quot;everyone&quot; need special treatment, or do you think this fails because that Authorizable does not exist yet at this point?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk/bundles/jcr/repoinit/src/main/java/org/apache/sling/jcr/repoinit/impl/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk/bundles/jcr/repoinit/src/main/java/org/apache/sling/jcr/repoinit/impl/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15588095" author="rombert" created="Wed, 19 Oct 2016 08:53:15 +0000"  >&lt;p&gt;I&apos;m not sure why it fails. I know that in Jackrabbit and Oak the everyone principal has special treatment - there are &lt;tt&gt;EveryonePrincipal&lt;/tt&gt; classes in Oak and IIRC in Jackrabbit as well. &lt;/p&gt;</comment>
                            <comment id="15595510" author="olli" created="Fri, 21 Oct 2016 16:02:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1766056&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1766056&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15903319" author="olli" created="Thu, 9 Mar 2017 16:26:16 +0000"  >&lt;p&gt;See also &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6182&quot; title=&quot;repoinit fails to set ACL on previously created principal&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6182&quot;&gt;&lt;del&gt;SLING-6182&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13011339">SLING-6130</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13014559">SLING-6182</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3523b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6170] Crankstart launcher tests fail with Java 1.8</title>
                <link>https://issues.apache.org/jira/browse/SLING-6170</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The contrib/crankstart/launcher build fails with Java 1.8 due to the &lt;tt&gt;org.apache.sling.crankstart.test.services&lt;/tt&gt; bundle not starting as the framework (bundle 0) has an empty &lt;tt&gt;Provide-Capability&lt;/tt&gt; header - so the bundle is missing the &lt;tt&gt;(&amp;amp;(osgi.ee=JavaSE)(version=1.5))&lt;/tt&gt; requirement.&lt;/p&gt;

&lt;p&gt;Interestingly, if I start a Sling instance manually with the same provisioning model and JVM, that bundle starts and &lt;tt&gt;Provide-Capability&lt;/tt&gt; is correctly populated.&lt;/p&gt;

&lt;p&gt;The startup command for that is&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; rm -rf CRANKSTART ; \
java -jar \
target/org.apache.sling.crankstart.launcher-1.9.9-SNAPSHOT.jar \
src/test/resources/crankstart-model.txt src/test/resources/provisioning-model
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13012883">SLING-6170</key>
            <summary>Crankstart launcher tests fail with Java 1.8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Oct 2016 14:44:45 +0000</created>
                <updated>Mon, 17 Oct 2016 15:40:04 +0000</updated>
                            <resolved>Mon, 17 Oct 2016 15:39:49 +0000</resolved>
                                                    <fixVersion>Crankstart Launcher 2.0.0</fixVersion>
                                    <component>Crankstart</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15582564" author="bdelacretaz" created="Mon, 17 Oct 2016 15:39:49 +0000"  >&lt;p&gt;Fixed in revision 1765316 - the pom had an older Felix framework dependency which is used in tests and didn&apos;t have the eecaps-1.8 default property.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34zhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6169] HTL Compiler does not detect missing quotes</title>
                <link>https://issues.apache.org/jira/browse/SLING-6169</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;While evaluating the HTL Maven Plugin I found a possible bug in the HTL compiler:&lt;/p&gt;

&lt;p&gt;The following statement is correct and the plugin does not report an error:&lt;br/&gt;
&amp;lt;sly data-sly-test=&quot;${!headline}&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;A missing &quot;}&quot; causes the plugin to fail:&lt;br/&gt;
&amp;lt;sly data-sly-test=&quot;${!headline&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;But a missing &quot;\&quot;&quot; does not:&lt;br/&gt;
&amp;lt;sly data-sly-test=${!headline}&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;As this causes htl to render out the statement instead of evaluating it, I&apos;d suspect this is a bug.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13012871">SLING-6169</key>
            <summary>HTL Compiler does not detect missing quotes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="amuthmann">Alexander Muthmann</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Oct 2016 14:11:01 +0000</created>
                <updated>Wed, 30 Nov 2016 13:57:51 +0000</updated>
                            <resolved>Wed, 30 Nov 2016 13:57:50 +0000</resolved>
                                    <version>Scripting HTL Compiler 1.0.2</version>
                    <version>HTL Maven Plugin 1.0.0</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15708666" author="radu.cotescu" created="Wed, 30 Nov 2016 13:57:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amuthmann&quot; class=&quot;user-hover&quot; rel=&quot;amuthmann&quot;&gt;amuthmann&lt;/a&gt;, that&apos;s actually not an HTL error. The markup, due to the wrongly added double quotes, is interpreted by the HTML parser as a Text Node. In this context HTL works correctly...&lt;/p&gt;

&lt;p&gt;Unfortunately we cannot throw compilation errors for invalid HTML markup.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34zen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6168] ServletContext is registered with wrong name</title>
                <link>https://issues.apache.org/jira/browse/SLING-6168</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Unfortunately , the ServletContext is not registered with the name &quot;org.apache.sling&quot; as designed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5783&quot; title=&quot;Add service property to identify the ServletContext registered by Sling&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5783&quot;&gt;&lt;del&gt;SLING-5783&lt;/del&gt;&lt;/a&gt;, but with a class object of the SlingMain class.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13012841">SLING-6168</key>
            <summary>ServletContext is registered with wrong name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Oct 2016 12:07:54 +0000</created>
                <updated>Thu, 20 Oct 2016 14:41:26 +0000</updated>
                            <resolved>Mon, 17 Oct 2016 12:08:26 +0000</resolved>
                                    <version>Engine 2.5.0</version>
                    <version>Engine 2.6.4</version>
                                    <fixVersion>Engine 2.6.6</fixVersion>
                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12978167">SLING-5784</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34z7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6166] Update the HTL bundles to use the SLING-6165 request-scoped resource resolver</title>
                <link>https://issues.apache.org/jira/browse/SLING-6166</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6156&quot; title=&quot;The JsUseProvider should use the sling-scripting service user for solving scripting dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6156&quot;&gt;&lt;del&gt;SLING-6156&lt;/del&gt;&lt;/a&gt; brings in a performance penalty for the JS Use Provider since a resource resolver is needed every time when dependency resolution is performed. When &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6165&quot; title=&quot;Expose a service for Sling Scripting that provides request-scoped Resource Resolvers for scripting dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6165&quot;&gt;&lt;del&gt;SLING-6165&lt;/del&gt;&lt;/a&gt; is implemented, the JS Use Provider should switch to this new API.&lt;/p&gt;

&lt;p&gt;Additionally, the HTL Scripting Engine should also switch to the same resolver for script resolution, instead of relying on the admin resolver passed through the &lt;tt&gt;ScriptContext&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13012817">SLING-6166</key>
            <summary>Update the HTL bundles to use the SLING-6165 request-scoped resource resolver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Oct 2016 10:11:05 +0000</created>
                <updated>Mon, 9 Jan 2017 11:44:50 +0000</updated>
                            <resolved>Wed, 30 Nov 2016 14:01:38 +0000</resolved>
                                    <version>Scripting HTL JS Use Provider 1.0.16</version>
                    <version>Scripting HTL Engine 1.0.26</version>
                                    <fixVersion>Scripting HTL JS Use Provider 1.0.18</fixVersion>
                    <fixVersion>Scripting HTL Engine 1.0.28</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13012805">SLING-6165</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34z2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6156] The JsUseProvider should use the sling-scripting service user for solving scripting dependencies</title>
                <link>https://issues.apache.org/jira/browse/SLING-6156</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5334&quot; title=&quot;Improve Sightly script resolution for components using inheritance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5334&quot;&gt;&lt;del&gt;SLING-5334&lt;/del&gt;&lt;/a&gt; the &lt;tt&gt;JsUseProvider&lt;/tt&gt; was modified for better handling of script resolution for components using inheritance. However, the resolver that&apos;s currently used for solving these dependencies is not the correct one, since &lt;tt&gt;SlingScript&lt;/tt&gt; resources will always use the request resource resolver.&lt;/p&gt;

&lt;p&gt;The fix is to switch to a resource resolver backed by the &lt;tt&gt;sling-scripting&lt;/tt&gt; service user.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13012384">SLING-6156</key>
            <summary>The JsUseProvider should use the sling-scripting service user for solving scripting dependencies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Oct 2016 15:22:39 +0000</created>
                <updated>Thu, 20 Oct 2016 15:21:02 +0000</updated>
                            <resolved>Mon, 17 Oct 2016 11:27:23 +0000</resolved>
                                    <version>Scripting HTL JS Use Provider 1.0.12</version>
                                    <fixVersion>Scripting HTL JS Use Provider 1.0.16</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15581807" author="radu.cotescu" created="Mon, 17 Oct 2016 10:12:16 +0000"  >&lt;p&gt;The fix for this issue will bring in a performance penalty that will be fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6166&quot; title=&quot;Update the HTL bundles to use the SLING-6165 request-scoped resource resolver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6166&quot;&gt;&lt;del&gt;SLING-6166&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15581957" author="radu.cotescu" created="Mon, 17 Oct 2016 11:27:23 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1765242&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1765242&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34whr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6155] Context-Aware Config: Integration Test unstable on Apache Jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-6155</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;the integration tests for context-aware config are currently flaky for java 1.7 (but run smooth with java 1.8). i cannot reproduce the problem when running them locally with java 1.7.&lt;/p&gt;

&lt;p&gt;example: &lt;a href=&quot;https://builds.apache.org/job/sling-contrib-extensions-contextaware-config-integration-tests-1.7/11/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-contrib-extensions-contextaware-config-integration-tests-1.7/11/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;seems to be a startup racing condition with getting the resource resolver/root resource.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Results :

Tests in error: 
  AdaptToConfigClassIT.setUp:54 &#187; IllegalState Cannot read root resource
  ConfigurationManagerIT.setUp:69 &#187; IllegalState Cannot read root resource
  ConfigurationManagerIT.setUp:69 &#187; IllegalState Cannot read root resource
  ConfigurationManagerIT.setUp:69 &#187; IllegalState Cannot read root resource
  ConfigurationManagerIT.setUp:69 &#187; IllegalState Cannot read root resource
org.apache.sling.contextaware.config.it.ConfigurationResolverConfigClassIT.testExistingConfig(org.apache.sling.contextaware.config.it.ConfigurationResolverConfigClassIT)
  Run 1: ConfigurationResolverConfigClassIT.setUp:53 &#187; IllegalState unable to get a ser...
  Run 2: ConfigurationResolverConfigClassIT.tearDown:59 &#187; NullPointer

org.apache.sling.contextaware.config.it.ConfigurationResolverConfigClassIT.testNonExistingConfig(org.apache.sling.contextaware.config.it.ConfigurationResolverConfigClassIT)
  Run 1: ConfigurationResolverConfigClassIT.setUp:53 &#187; IllegalState unable to get a ser...
  Run 2: ConfigurationResolverConfigClassIT.tearDown:59 &#187; NullPointer

org.apache.sling.contextaware.config.it.ConfigurationResolverValueMapIT.testExistingConfig(org.apache.sling.contextaware.config.it.ConfigurationResolverValueMapIT)
  Run 1: ConfigurationResolverValueMapIT.setUp:53 &#187; IllegalState unable to get a servic...
  Run 2: ConfigurationResolverValueMapIT.tearDown:59 &#187; NullPointer

org.apache.sling.contextaware.config.it.ConfigurationResolverValueMapIT.testNonExistingConfig(org.apache.sling.contextaware.config.it.ConfigurationResolverValueMapIT)
  Run 1: ConfigurationResolverValueMapIT.setUp:53 &#187; IllegalState unable to get a servic...
  Run 2: ConfigurationResolverValueMapIT.tearDown:59 &#187; NullPointer
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13012368">SLING-6155</key>
            <summary>Context-Aware Config: Integration Test unstable on Apache Jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>contextaware-config</label>
                            <label>integration-test</label>
                    </labels>
                <created>Fri, 14 Oct 2016 13:56:07 +0000</created>
                <updated>Mon, 19 Dec 2016 12:01:53 +0000</updated>
                            <resolved>Thu, 17 Nov 2016 18:14:15 +0000</resolved>
                                                    <fixVersion>Context-Aware Configuration Impl 1.2.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="15575412" author="sseifert@pro-vision.de" created="Fri, 14 Oct 2016 13:58:09 +0000"  >&lt;p&gt;oh, it happens with Java 1.8 as well&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-contrib-extensions-contextaware-config-integration-tests-1.8/7/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-contrib-extensions-contextaware-config-integration-tests-1.8/7/console&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15575469" author="sseifert@pro-vision.de" created="Fri, 14 Oct 2016 14:16:44 +0000"  >&lt;p&gt;i switched to launchpad 9-SNAPSHOT and deactivated the java 1.7 integration test (via create_jobs.groovy).&lt;/p&gt;

&lt;p&gt;still fails with java 1.8 - this time with timeouts&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-contrib-extensions-contextaware-config-integration-tests-1.8/10/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-contrib-extensions-contextaware-config-integration-tests-1.8/10/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;not reproducible locally.&lt;/p&gt;</comment>
                            <comment id="15674419" author="sseifert@pro-vision.de" created="Thu, 17 Nov 2016 18:14:16 +0000"  >&lt;p&gt;was stable the last time&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34we7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6148] MapEntries get CHANGED event right after DELETE</title>
                <link>https://issues.apache.org/jira/browse/SLING-6148</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Investigating &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6147&quot; title=&quot;Four tests fail in ResourceResolverTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6147&quot;&gt;&lt;del&gt;SLING-6147&lt;/del&gt;&lt;/a&gt; I see this in the logs when deleting a /content node:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;13.10.2016 16:20:23.895 *DEBUG* [oak-executor-17] org.apache.sling.resourceresolver.impl.mapping.MapEntries onChange, type=REMOVED, path=/content
13.10.2016 16:20:23.895 *DEBUG* [oak-executor-17] org.apache.sling.resourceresolver.impl.mapping.MapEntries onChange, type=CHANGED, path=/content
13.10.2016 16:20:23.895 *DEBUG* [oak-executor-17] org.apache.sling.resourceresolver.impl.mapping.MapEntries doAddVanity getting /content
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And MapEntries.isValidVanityPath() then fails as it&apos;s getting a null resource.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I suppose this is related to recent listener mechanism changes? Getting a CHANGED event after the DELETE doesn&apos;t seem correct.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13012008">SLING-6148</key>
            <summary>MapEntries get CHANGED event right after DELETE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Oct 2016 14:25:24 +0000</created>
                <updated>Tue, 25 Oct 2016 06:22:28 +0000</updated>
                            <resolved>Fri, 14 Oct 2016 11:16:00 +0000</resolved>
                                                    <fixVersion>JCR Resource 2.8.2</fixVersion>
                    <fixVersion>Resource Resolver 1.5.0</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15574242" author="cziegeler" created="Fri, 14 Oct 2016 05:23:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; We recently removed the special Oak observation bridge and now are using a plain JCR listener. It looks like there is something wrong in that listener&lt;br/&gt;
What is the easiest way to debug/test this?&lt;/p&gt;</comment>
                            <comment id="15574359" author="bdelacretaz" created="Fri, 14 Oct 2016 06:04:35 +0000"  >&lt;p&gt;You can probably reproduce with launchpad/builder as well but in my case I&apos;m doing this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cd launchpad/testing
mvn clean install -Dlaunchpad.keep.running=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dhttp.port=8080 -Ddebug=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Configure debug logging for &lt;tt&gt;org.apache.sling.resourceresolver&lt;/tt&gt; and then&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;tail -F target/_-8080/sling/logs/error.log | egrep &lt;span class=&quot;code-quote&quot;&gt;&apos;MapEntries|ResourceResolverTest|java.lang.IllegalArgumentException| at &apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl -u admin:admin -X POST http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/content
&lt;/span&gt;curl -u admin:admin -X DELETE http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/content&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And that DELETE produces the following logs:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;14.10.2016 08:00:44.665 *DEBUG* [oak-executor-33] org.apache.sling.resourceresolver.impl.mapping.MapEntries onChange, type=REMOVED, path=/content
14.10.2016 08:00:44.665 *DEBUG* [oak-executor-33] org.apache.sling.resourceresolver.impl.mapping.MapEntries onChange, type=CHANGED, path=/content
14.10.2016 08:00:44.665 *DEBUG* [oak-executor-33] org.apache.sling.resourceresolver.impl.mapping.MapEntries doAddVanity getting /content
java.lang.IllegalArgumentException: Unexpected &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; resource
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.isValidVanityPath(MapEntries.java:962)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.loadVanityPath(MapEntries.java:1245)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.doAddVanity(MapEntries.java:467)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.doUpdateVanity(MapEntries.java:481)
	at org.apache.sling.resourceresolver.impl.mapping.MapEntries.onChange(MapEntries.java:846)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &quot;doAddVanity getting /content&quot; log message was added yesterday, svn revision 1764697, which is what I&apos;m using for testing this.&lt;/p&gt;

&lt;p&gt;I suspect this is causing &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6147&quot; title=&quot;Four tests fail in ResourceResolverTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6147&quot;&gt;&lt;del&gt;SLING-6147&lt;/del&gt;&lt;/a&gt;, I&apos;ll add info there about how to reproduce that one.&lt;/p&gt;</comment>
                            <comment id="15574373" author="cziegeler" created="Fri, 14 Oct 2016 06:10:25 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;&lt;br/&gt;
The unused JcrResourceListener seems to have some bugs - so it looks like we just tested the oak observer in the past...&lt;/p&gt;</comment>
                            <comment id="15574380" author="bdelacretaz" created="Fri, 14 Oct 2016 06:14:22 +0000"  >&lt;p&gt;Ok, let me know if I can help improve JcrResourceListener testing or otherwise.&lt;/p&gt;</comment>
                            <comment id="15574830" author="cziegeler" created="Fri, 14 Oct 2016 09:44:00 +0000"  >&lt;p&gt;Thanks, I just committed a fix for the JcrResourceListener which should correctly handle the observation events now.&lt;br/&gt;
Still the tests don&apos;t pass. I&apos;ve also committed a couple of fixes for the MapEntries and start getting a feeling how all the stuff works&lt;/p&gt;</comment>
                            <comment id="15575029" author="cziegeler" created="Fri, 14 Oct 2016 11:16:01 +0000"  >&lt;p&gt;The code of MapEntries seemed to be highly optimized for the way changes used to be reported through the Oak observer - now as we switched back to a JCR Listener, the changes are reported differently (still correct), but this broke the MapEntries.&lt;br/&gt;
While working on this, I noticed that there is some room for improvement and obviously also test coverage. Created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6153&quot; title=&quot;Improve MapEntries implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6153&quot;&gt;&lt;del&gt;SLING-6153&lt;/del&gt;&lt;/a&gt; for this&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13011964">SLING-6147</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34u67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6147] Four tests fail in ResourceResolverTest</title>
                <link>https://issues.apache.org/jira/browse/SLING-6147</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As per &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling-Dashboard/job/sling-launchpad-testing-1.8/lastBuild/org.apache.sling$org.apache.sling.launchpad.testing/testReport/org.apache.sling.launchpad.webapp.integrationtest/ResourceResolverProxyTest/runWriteableResourcesTest/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling-Dashboard/job/sling-launchpad-testing-1.8/lastBuild/org.apache.sling$org.apache.sling.launchpad.testing/testReport/org.apache.sling.launchpad.webapp.integrationtest/ResourceResolverProxyTest/runWriteableResourcesTest/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;java.lang.AssertionError: 4 tests failed:[&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;test_resolve_extension(org.apache.sling.launchpad.testservices.serversidetests.ResourceResolverTest): expected:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;grandchild&amp;#93;&lt;/span&gt;.html&amp;gt; but was:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;enkel&amp;#93;&lt;/span&gt;.html&amp;gt;,&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;test_resolve_selectors_extension(org.apache.sling.launchpad.testservices.serversidetests.ResourceResolverTest): expected:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;grandchild&amp;#93;&lt;/span&gt;.sel1.sel2.html&amp;gt; but was:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;enkel&amp;#93;&lt;/span&gt;.sel1.sel2.html&amp;gt;,&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;test_resolve(org.apache.sling.launchpad.testservices.serversidetests.ResourceResolverTest): expected:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;grandchild&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;enkel&amp;#93;&lt;/span&gt;&amp;gt;,&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;test_resolve_with_sling_alias_limited_access(org.apache.sling.launchpad.testservices.serversidetests.ResourceResolverTest): expected:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;enkel&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;grandChild&amp;#93;&lt;/span&gt;&amp;gt;]&lt;br/&gt;
	at org.junit.Assert.fail(Assert.java:88)&lt;br/&gt;
	at org.apache.sling.launchpad.webapp.integrationtest.util.ServerSideTestClient.assertTestsPass(ServerSideTestClient.java:109)&lt;br/&gt;
	at org.apache.sling.launchpad.webapp.integrationtest.ResourceResolverProxyTest.runWriteableResourcesTest(ResourceResolverProxyTest.java:26)&lt;/li&gt;
&lt;/ul&gt;

</description>
                <environment></environment>
        <key id="13011964">SLING-6147</key>
            <summary>Four tests fail in ResourceResolverTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Thu, 13 Oct 2016 12:12:05 +0000</created>
                <updated>Fri, 14 Oct 2016 11:49:14 +0000</updated>
                            <resolved>Fri, 14 Oct 2016 11:49:13 +0000</resolved>
                                                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15572182" author="bdelacretaz" created="Thu, 13 Oct 2016 15:04:02 +0000"  >&lt;p&gt;It looks like there&apos;s an unwanted interaction between tests, if I keep just these two:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;test_resolve_with_sling_alias_selectors_extension&lt;/li&gt;
	&lt;li&gt;test_resolve_extension&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Then the second one fails, but if I keep just that second one it passes.&lt;/p&gt;</comment>
                            <comment id="15574363" author="bdelacretaz" created="Fri, 14 Oct 2016 06:06:23 +0000"  >&lt;p&gt;To reproduce this start the testing instance:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cd launchpad/testing
mvn clean install -Dlaunchpad.keep.running=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -Dhttp.port=8080 -Ddebug=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And run the tests with&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl -X POST http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/system/sling/junit/org.apache.sling.launchpad.testservices.serversidetests.ResourceResolverTest.html&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15575031" author="cziegeler" created="Fri, 14 Oct 2016 11:16:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; with rev1764878 all tests pass again for me, could you please verify?&lt;br/&gt;
I&apos;ll increase the test coverage of MapEntries with &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6153&quot; title=&quot;Improve MapEntries implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6153&quot;&gt;&lt;del&gt;SLING-6153&lt;/del&gt;&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="15575104" author="bdelacretaz" created="Fri, 14 Oct 2016 11:49:14 +0000"  >&lt;p&gt;All ResourceResolverTest tests indeed pass now, thanks you very much!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13012008">SLING-6148</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34twf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6146] SourceIdentifier should not mangle underscore characters</title>
                <link>https://issues.apache.org/jira/browse/SLING-6146</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;org.apache.sling.scripting.sightly.impl.engine.compiled.SourceIdentifier&lt;/tt&gt; should not mangle &lt;tt&gt;_&lt;/tt&gt; characters for Java Use-API objects, since this will lead to complicated package names that developers cannot easily deduce.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13011950">SLING-6146</key>
            <summary>SourceIdentifier should not mangle underscore characters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Oct 2016 11:05:31 +0000</created>
                <updated>Fri, 13 Jan 2017 10:27:29 +0000</updated>
                            <resolved>Thu, 13 Oct 2016 19:51:21 +0000</resolved>
                                    <version>Scripting HTL Engine 1.0.20</version>
                    <version>Scripting HTL Java Compiler 1.0.0</version>
                                    <fixVersion>Scripting HTL Engine 1.0.24</fixVersion>
                    <fixVersion>Scripting HTL Java Compiler 1.0.4</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15572989" author="radu.cotescu" created="Thu, 13 Oct 2016 19:51:22 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1764774&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1764774&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13016915">SLING-6223</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34ttb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6141] StartupFilter should use servlet path and request info</title>
                <link>https://issues.apache.org/jira/browse/SLING-6141</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="13011687">SLING-6141</key>
            <summary>StartupFilter should use servlet path and request info</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Oct 2016 14:49:08 +0000</created>
                <updated>Wed, 12 Oct 2016 14:49:40 +0000</updated>
                            <resolved>Wed, 12 Oct 2016 14:49:40 +0000</resolved>
                                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15568938" author="cziegeler" created="Wed, 12 Oct 2016 14:49:40 +0000"  >&lt;p&gt;Fixed in rev 1764477&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34s6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6139] Updates to sling:alias property breaks aliases</title>
                <link>https://issues.apache.org/jira/browse/SLING-6139</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I&apos;ve found another issue with the MapEntries changes (I assume), see below for the failure scenario. Tentatively assigning to Carsten.&lt;/p&gt;

&lt;p&gt;This is breaking the testResolveResourceAliasWithUpdate and testResolveResourceAliasJcrContentWithUpdate tests in the launchpad/testservices ResourceResolverTest - I will commit the below changes in launchpad setup with those tests @Ignored as I need the tests to run with the latest bundles for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5135&quot; title=&quot;Whitelist legit usages of loginAdministrative and administrative ResourceResolver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5135&quot;&gt;&lt;del&gt;SLING-5135&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;h4&gt;&lt;a name=&quot;Failurescenario&quot;&gt;&lt;/a&gt;Failure scenario&lt;/h4&gt;

&lt;p&gt;a) Adding both foo and bar aliases from scratch works&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl -u admin:admin -Ftitle=whatever http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/tmp
&lt;/span&gt;curl -u admin:admin -X DELETE http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/tmp
&lt;/span&gt;curl -u admin:admin -F&lt;span class=&quot;code-quote&quot;&gt;&quot;sling:alias=foo&quot;&lt;/span&gt; -F&lt;span class=&quot;code-quote&quot;&gt;&quot;sling:alias=bar&quot;&lt;/span&gt; http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/tmp
&lt;/span&gt;curl http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/bar.json ; echo
&lt;/span&gt;curl http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/foo.json ; echo&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;b) Adding foo first and then updating to foo and bar breaks both foo and bar aliases&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl -u admin:admin -Ftitle=whatever http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/tmp
&lt;/span&gt;curl -u admin:admin -X DELETE http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/tmp
&lt;/span&gt;curl -u admin:admin -F&lt;span class=&quot;code-quote&quot;&gt;&quot;sling:alias=foo&quot;&lt;/span&gt; http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/tmp
&lt;/span&gt;curl http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/foo.json ; echo
&lt;/span&gt;
curl -u admin:admin -F&lt;span class=&quot;code-quote&quot;&gt;&quot;sling:alias=foo&quot;&lt;/span&gt; -F&lt;span class=&quot;code-quote&quot;&gt;&quot;sling:alias=bar&quot;&lt;/span&gt; http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/tmp
&lt;/span&gt;# getting a 404 &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; both of these now
curl http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/bar.json ; echo
&lt;/span&gt;curl http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/foo.json ; echo&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h4&gt;&lt;a name=&quot;Patchwhichusesthelatestsnapshotsinlaunchpad&quot;&gt;&lt;/a&gt;Patch which uses the latest snapshots in launchpad&lt;/h4&gt;
&lt;p&gt;With this patch the &lt;tt&gt;ResourceResolverTest&lt;/tt&gt; mentioned above fails.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Index: launchpad/builder/src/main/provisioning/oak.txt
===================================================================
--- launchpad/builder/src/main/provisioning/oak.txt	(revision 1764392)
+++ launchpad/builder/src/main/provisioning/oak.txt	(working copy)
@@ -42,7 +42,7 @@
 # start the Oak server instance after all components have been configured
 # and started to avoid restarting that component ( see SLING-4556 )
 [artifacts startLevel=16]
-    org.apache.sling/org.apache.sling.jcr.oak.server/1.1.0
+    org.apache.sling/org.apache.sling.jcr.oak.server/1.1.1-SNAPSHOT
 
 [configurations]
   org.apache.felix.jaas.Configuration.factory-GuestLoginModule
Index: launchpad/builder/src/main/provisioning/sling.txt
===================================================================
--- launchpad/builder/src/main/provisioning/sling.txt	(revision 1764392)
+++ launchpad/builder/src/main/provisioning/sling.txt	(working copy)
@@ -59,7 +59,7 @@
     org.apache.sling/org.apache.sling.installer.console/1.0.1-SNAPSHOT
     org.apache.sling/org.apache.sling.installer.provider.jcr/3.1.19-SNAPSHOT
     org.apache.sling/org.apache.sling.jcr.contentloader/2.1.11-SNAPSHOT
-    org.apache.sling/org.apache.sling.jcr.resource/2.8.0
+    org.apache.sling/org.apache.sling.jcr.resource/2.8.1-SNAPSHOT
     org.apache.sling/org.apache.sling.launchpad.content/2.0.8
     org.apache.sling/org.apache.sling.models.api/1.2.2
     org.apache.sling/org.apache.sling.models.impl/1.2.8
@@ -104,7 +104,7 @@
 [artifacts startLevel=15]
     org.apache.sling/org.apache.sling.jcr.jcr-wrapper/2.0.0
     org.apache.sling/org.apache.sling.jcr.api/2.4.0
-    org.apache.sling/org.apache.sling.jcr.base/2.4.0
+    org.apache.sling/org.apache.sling.jcr.base/2.4.1-SNAPSHOT
     org.apache.sling/org.apache.sling.jcr.registration/1.0.2
     org.apache.jackrabbit/jackrabbit-api/${jackrabbit.version}
     org.apache.jackrabbit/jackrabbit-jcr-commons/${jackrabbit.version}
Index: launchpad/testing/src/main/provisioning/model.txt
===================================================================
--- launchpad/testing/src/main/provisioning/model.txt	(revision 1764392)
+++ launchpad/testing/src/main/provisioning/model.txt	(working copy)
@@ -32,6 +32,9 @@
     # Set the servlet resolver&apos;s cache size to zero &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; testing
     servletresolver.cacheSize=I&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;
 
+  org.apache.sling.jcr.base.internal.LoginAdminWhitelistImpl
+    whitelist.regexp=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling.(launchpad|junit).*&quot;&lt;/span&gt;
+
 [settings]
   org.apache.sling.commons.log.julenabled=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
   
@@ -41,4 +44,4 @@
  [:repoinit]
 create path /repoinit/provisioningModelTest
 
-create service user provisioningModelUser
\ No newline at end of file
+create service user provisioningModelUser
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13011664">SLING-6139</key>
            <summary>Updates to sling:alias property breaks aliases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Oct 2016 13:12:44 +0000</created>
                <updated>Thu, 13 Oct 2016 12:16:08 +0000</updated>
                            <resolved>Wed, 12 Oct 2016 13:49:58 +0000</resolved>
                                                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15568705" author="cziegeler" created="Wed, 12 Oct 2016 13:25:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; All it tests currently work for me&lt;/p&gt;</comment>
                            <comment id="15568723" author="bdelacretaz" created="Wed, 12 Oct 2016 13:34:51 +0000"  >&lt;p&gt;I have disabled the affected tests in revision 1764466, we&apos;ll need to revert that commit once this is fixed.&lt;/p&gt;</comment>
                            <comment id="15568727" author="bdelacretaz" created="Wed, 12 Oct 2016 13:36:11 +0000"  >&lt;p&gt;Ok, I see that there have been some changes since I last updated my sandbox, I&apos;ll test this again at revision 1764466&lt;/p&gt;</comment>
                            <comment id="15568780" author="bdelacretaz" created="Wed, 12 Oct 2016 13:49:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; you&apos;re right, these tests pass at revision 1764466, sorry for the noise, marking this invalid.&lt;/p&gt;

&lt;p&gt;I see other failures now however, see below. Are you still working on this resourceresolver stuff, or should I analyze more?&lt;/p&gt;

&lt;p&gt;Running org.apache.sling.launchpad.webapp.integrationtest.ResourceResolverProxyTest&lt;br/&gt;
Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 26.294 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.launchpad.webapp.integrationtest.ResourceResolverProxyTest&lt;br/&gt;
runWriteableResourcesTest(org.apache.sling.launchpad.webapp.integrationtest.ResourceResolverProxyTest)  Time elapsed: 26.247 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
java.lang.AssertionError: 4 tests failed:[test_resolve_extension(org.apache.sling.launchpad.testservices.serversidetests.ResourceResolverTest): expected:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;grandchild&amp;#93;&lt;/span&gt;.html&amp;gt; but was:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;enkel&amp;#93;&lt;/span&gt;.html&amp;gt;, test_resolve_selectors_extension(org.apache.sling.launchpad.testservices.serversidetests.ResourceResolverTest): expected:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;grandchild&amp;#93;&lt;/span&gt;.sel1.sel2.html&amp;gt; but was:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;enkel&amp;#93;&lt;/span&gt;.sel1.sel2.html&amp;gt;, test_resolve(org.apache.sling.launchpad.testservices.serversidetests.ResourceResolverTest): expected:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;grandchild&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;enkel&amp;#93;&lt;/span&gt;&amp;gt;, test_resolve_with_sling_alias_limited_access(org.apache.sling.launchpad.testservices.serversidetests.ResourceResolverTest): expected:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;enkel&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;/child/&lt;span class=&quot;error&quot;&gt;&amp;#91;grandChild&amp;#93;&lt;/span&gt;&amp;gt;]&lt;br/&gt;
	at org.junit.Assert.fail(Assert.java:88)&lt;br/&gt;
	at org.apache.sling.launchpad.webapp.integrationtest.util.ServerSideTestClient.assertTestsPass(ServerSideTestClient.java:109)&lt;br/&gt;
	at org.apache.sling.launchpad.webapp.integrationtest.ResourceResolverProxyTest.runWriteableResourcesTest(ResourceResolverProxyTest.java:26)&lt;/p&gt;

</comment>
                            <comment id="15571751" author="bdelacretaz" created="Thu, 13 Oct 2016 12:16:08 +0000"  >&lt;p&gt;I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6147&quot; title=&quot;Four tests fail in ResourceResolverTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6147&quot;&gt;&lt;del&gt;SLING-6147&lt;/del&gt;&lt;/a&gt; for the failing ResourceResolver tests&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34s1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6135] ResourceEditor build failure on Jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-6135</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The resource editor fails to build on Jenkins, and I have no idea how to tackle the node build error. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sandro&quot; class=&quot;user-hover&quot; rel=&quot;sandro&quot;&gt;sandro&lt;/a&gt; - IIRC you were the one who contributed the module, perhaps you have an idea about how to fix the build.&lt;/p&gt;

&lt;p&gt;The error lines that I spotted are:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; gyp_main.py: error: no such option: --no-parallel&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; node-pre-gyp ERR! stack Error: Failed to execute &apos;node-gyp configure --fallback-to-build --module=/home/jenkins/jenkins-slave/workspace/sling-contrib-explorers-resourceeditor-1.7/frontend/node_modules/grunt-node-inspector/node_modules/node-inspector/node_modules/v8-debug/build/debug/v0.4.6/node-v14-linux-x64/debug.node --module_name=debug --module_path=/home/jenkins/jenkins-slave/workspace/sling-contrib-explorers-resourceeditor-1.7/frontend/node_modules/grunt-node-inspector/node_modules/node-inspector/node_modules/v8-debug/build/debug/v0.4.6/node-v14-linux-x64&apos; (1)&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Error: Cannot find module &apos;./pre-binding&apos;&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13011483">SLING-6135</key>
            <summary>ResourceEditor build failure on Jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sandro">Sandro Boehme</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Oct 2016 19:59:46 +0000</created>
                <updated>Wed, 9 Nov 2016 20:09:36 +0000</updated>
                            <resolved>Wed, 9 Nov 2016 17:05:04 +0000</resolved>
                                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15651459" author="sandro" created="Wed, 9 Nov 2016 17:05:04 +0000"  >&lt;p&gt;Thanks for reporting &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="15651919" author="rombert" created="Wed, 9 Nov 2016 20:09:36 +0000"  >&lt;p&gt;Anytime &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thanks for the fix&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12832738" name="resourceeditor_failure.txt" size="151810" author="rombert" created="Tue, 11 Oct 2016 20:00:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34qxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6134] org.apache.sling.samples.jcr.contentloader does not build</title>
                <link>https://issues.apache.org/jira/browse/SLING-6134</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The build fails with compilation errors both on Jenkins and locally. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; - since you submitted this module I assigned it to you, but feel free to disagree &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /home/jenkins/jenkins-slave/workspace/sling-samples-org.apache.sling.samples.jcr.contentloader-1.8/src/main/java/org/apache/sling/samples/jcr/contentloader/internal/GsonReader.java:[43,42] cannot find symbol
  symbol:   class BaseContentReader
  location: package org.apache.sling.jcr.contentloader
[ERROR] /home/jenkins/jenkins-slave/workspace/sling-samples-org.apache.sling.samples.jcr.contentloader-1.8/src/main/java/org/apache/sling/samples/jcr/contentloader/internal/GsonReader.java:[87,39] cannot find symbol
  symbol: class BaseContentReader
[ERROR] /home/jenkins/jenkins-slave/workspace/sling-samples-org.apache.sling.samples.jcr.contentloader-1.8/src/main/java/org/apache/sling/samples/jcr/contentloader/internal/GsonReader.java:[75,29] cannot find symbol
  symbol:   variable PROPERTY_CONTENTTYPES
  location: interface org.apache.sling.jcr.contentloader.ContentReader
[ERROR] /home/jenkins/jenkins-slave/workspace/sling-samples-org.apache.sling.samples.jcr.contentloader-1.8/src/main/java/org/apache/sling/samples/jcr/contentloader/internal/GsonReader.java:[98,9] cannot find symbol
  symbol:   method configure(org.osgi.service.component.ComponentContext)
  location: class org.apache.sling.samples.jcr.contentloader.internal.GsonReader
[ERROR] /home/jenkins/jenkins-slave/workspace/sling-samples-org.apache.sling.samples.jcr.contentloader-1.8/src/main/java/org/apache/sling/samples/jcr/contentloader/internal/GsonReader.java:[104,9] cannot find symbol
  symbol:   method configure(org.osgi.service.component.ComponentContext)
  location: class org.apache.sling.samples.jcr.contentloader.internal.GsonReader
[ERROR] /home/jenkins/jenkins-slave/workspace/sling-samples-org.apache.sling.samples.jcr.contentloader-1.8/src/main/java/org/apache/sling/samples/jcr/contentloader/internal/GsonReader.java:[109,9] cannot find symbol
  symbol:   variable extensions
  location: class org.apache.sling.samples.jcr.contentloader.internal.GsonReader
[ERROR] /home/jenkins/jenkins-slave/workspace/sling-samples-org.apache.sling.samples.jcr.contentloader-1.8/src/main/java/org/apache/sling/samples/jcr/contentloader/internal/GsonReader.java:[110,9] cannot find symbol
  symbol:   variable contentTypes
  location: class org.apache.sling.samples.jcr.contentloader.internal.GsonReader
[INFO] 7 errors &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13011472">SLING-6134</key>
            <summary>org.apache.sling.samples.jcr.contentloader does not build</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="7">Later</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Oct 2016 19:21:05 +0000</created>
                <updated>Tue, 11 Oct 2016 20:08:54 +0000</updated>
                            <resolved>Tue, 11 Oct 2016 20:07:42 +0000</resolved>
                                                                    <component>Samples</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15566423" author="olli" created="Tue, 11 Oct 2016 20:02:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, I guess this sample is based on my work to make Content Loader extensible (but was implemented differently by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomek.rekawek&quot; class=&quot;user-hover&quot; rel=&quot;tomek.rekawek&quot;&gt;tomek.rekawek&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="15566435" author="olli" created="Tue, 11 Oct 2016 20:07:42 +0000"  >&lt;p&gt;moved to whiteboard in &lt;a href=&quot;https://svn.apache.org/r1764333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1764333&lt;/a&gt; and removed from builds in &lt;a href=&quot;https://svn.apache.org/r1764336&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1764336&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15566440" author="rombert" created="Tue, 11 Oct 2016 20:08:54 +0000"  >&lt;p&gt;Great, thanks for the quick fix!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34qv3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6132] ResourceBuilder: Use absolute resource path should switch to hierachy mode</title>
                <link>https://issues.apache.org/jira/browse/SLING-6132</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;when using an absolute resource path the resource build should implicitly switch back to hierarchy mode from this point on - otherwise it will create unexpected results for further resource creations.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13011415">SLING-6132</key>
            <summary>ResourceBuilder: Use absolute resource path should switch to hierachy mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Oct 2016 16:37:02 +0000</created>
                <updated>Tue, 18 Oct 2016 08:00:26 +0000</updated>
                            <resolved>Tue, 11 Oct 2016 16:39:49 +0000</resolved>
                                    <version>Resource Builder 1.0.0</version>
                                    <fixVersion>Resource Builder 1.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="15565938" author="sseifert@pro-vision.de" created="Tue, 11 Oct 2016 16:39:49 +0000"  >&lt;p&gt;Completed: At revision: 1764295  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34qiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6131] MapEntries: Invalid logic around added/changed/removed property names</title>
                <link>https://issues.apache.org/jira/browse/SLING-6131</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6000&quot; title=&quot;MapEntries should move to new ResourceChangeListener API &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6000&quot;&gt;&lt;del&gt;SLING-6000&lt;/del&gt;&lt;/a&gt; changes have introduced code that looks incorrect and breaks a number of integration tests (MappingEventsProxyTest, ResourceResolverProxyTest, VanityPathTest) as (for example) changing a single property of a map entry does not cause MapEntries to send events anymore.&lt;/p&gt;

&lt;p&gt;In the affected code below, from the MapEntries class, the changedAttributes and removedAttributes section are not reached if addedAttributes is null, I don&apos;t think that&apos;s intentional.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; could you have a look? I have assigned this to you as IIUC you wrote that &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6000&quot; title=&quot;MapEntries should move to new ResourceChangeListener API &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6000&quot;&gt;&lt;del&gt;SLING-6000&lt;/del&gt;&lt;/a&gt; code.&lt;/p&gt;

&lt;p&gt;This is blocking &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5135&quot; title=&quot;Whitelist legit usages of loginAdministrative and administrative ResourceResolver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5135&quot;&gt;&lt;del&gt;SLING-5135&lt;/del&gt;&lt;/a&gt; but I&apos;ll commit that code and disable the affected integration tests until this is fixed.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; addedAttributes = rc.getAddedPropertyNames();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (addedAttributes != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
  ...
  wasResolverRefreshed = doAddAttributes(path, addedAttributes, wasResolverRefreshed);
  ...
  Set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; changedAttributes = rc.getChangedPropertyNames();
  ...
  Set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; removedAttributes = rc.getRemovedPropertyNames();
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13011354">SLING-6131</key>
            <summary>MapEntries: Invalid logic around added/changed/removed property names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Oct 2016 14:12:11 +0000</created>
                <updated>Tue, 21 Feb 2017 14:53:20 +0000</updated>
                            <resolved>Wed, 12 Oct 2016 08:19:09 +0000</resolved>
                                                    <fixVersion>Resource Resolver 1.5.0</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15565726" author="cziegeler" created="Tue, 11 Oct 2016 15:20:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; The change is actually intentional. If the addedAttributes is null, it means that no information about attributes is delivered. Only if it is not null, it means that added/changed/removed are reported, it might be empty in this case.&lt;br/&gt;
Nevertheless, if it is null it goes into the else case which should work nevertheless&lt;/p&gt;</comment>
                            <comment id="15565788" author="bdelacretaz" created="Tue, 11 Oct 2016 15:42:35 +0000"  >&lt;p&gt;Ok, I see, so I suppose something else is wrong as this breaks the mentioned tests: if you create a new mapping the &lt;tt&gt;TOPIC_RESOURCE_RESOLVER_MAPPING_CHANGED&lt;/tt&gt; events are correctly delivered, but if you later change its &lt;tt&gt;sling:vanityPath&lt;/tt&gt; property, for example, no such events are generated.&lt;/p&gt;</comment>
                            <comment id="15565811" author="cziegeler" created="Tue, 11 Oct 2016 15:50:14 +0000"  >&lt;p&gt;It seems the &quot;else&quot; part is not sending an OSGi event if the mapping changed. Testing a fix now...&lt;/p&gt;</comment>
                            <comment id="15568017" author="cziegeler" created="Wed, 12 Oct 2016 08:19:09 +0000"  >&lt;p&gt;Some null checks where missing and the sending of the change events was not correct. Fixed this now, all integration tests now pass for me&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13044860">SLING-6542</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34q5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6122] Sling Pipes javadoc fails</title>
                <link>https://issues.apache.org/jira/browse/SLING-6122</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;sling pipes javadoc fails, preventing release to be done&lt;/p&gt;</description>
                <environment></environment>
        <key id="13010718">SLING-6122</key>
            <summary>Sling Pipes javadoc fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Oct 2016 13:19:14 +0000</created>
                <updated>Fri, 16 Nov 2018 14:38:36 +0000</updated>
                            <resolved>Mon, 10 Oct 2016 07:25:17 +0000</resolved>
                                                    <fixVersion>Pipes 0.0.10</fixVersion>
                                    <component>Extensions</component>
                    <component>pipes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15557960" author="npeltier" created="Sat, 8 Oct 2016 13:19:55 +0000"  >&lt;p&gt;fix is in the attached patch&lt;/p&gt;</comment>
                            <comment id="15561528" author="olli" created="Mon, 10 Oct 2016 07:25:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1764022&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1764022&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12832262" name="SLING-6122.patch" size="27214" author="npeltier" created="Sat, 8 Oct 2016 13:19:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34m8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6119] Log parameters not captured correctly in few cases</title>
                <link>https://issues.apache.org/jira/browse/SLING-6119</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Tracer also captures the log message parameters separately and provides string representation in recording. In some cases where params are bound to say JCR session there evaluation fails if done outside of session. This causes message like&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;{
timestamp: 1475920906003,
level: &quot;TRACE&quot;,
logger: &quot;org.apache.jackrabbit.oak.jcr.operations.writes&quot;,
message: &quot;[session-1987] Setting property [/content/dam/summer_collection/jcr:content/jcr:title]&quot;,
params: [
&quot;session-1987&quot;,
&quot;[FAILED toString()]&quot;
]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As a fix the param should be converted to string at time of logging itself&lt;/p&gt;</description>
                <environment></environment>
        <key id="13010711">SLING-6119</key>
            <summary>Log parameters not captured correctly in few cases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Sat, 8 Oct 2016 10:04:44 +0000</created>
                <updated>Mon, 24 Oct 2016 10:54:03 +0000</updated>
                            <resolved>Sat, 8 Oct 2016 10:24:08 +0000</resolved>
                                                    <fixVersion>Log Tracer 1.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15557708" author="chetanm" created="Sat, 8 Oct 2016 10:24:08 +0000"  >&lt;p&gt;Done with r1763884&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34m73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6110] ServerSideTeleporter can&apos;t read the bundle header Sling-Test-WaitForService-Timeout</title>
                <link>https://issues.apache.org/jira/browse/SLING-6110</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;em&gt;Sling-Test-WaitForService-Timeout&lt;/em&gt; bundle header is not properly read by the &lt;tt&gt;ServerSideTeleporter&lt;/tt&gt;. The method &lt;tt&gt;getService()&lt;/tt&gt; reads the bundle header using the &lt;tt&gt;BundleContext&lt;/tt&gt; (&lt;tt&gt;bundleContext.getBundle().getHeaders()&lt;/tt&gt;). This &lt;tt&gt;BundleContext&lt;/tt&gt; is set in the &lt;tt&gt;Activator&lt;/tt&gt; class on start of the bundle &lt;tt&gt;org.apache.sling.junit.core&lt;/tt&gt;. Therefore &lt;tt&gt;bundleContext.getBundle()&lt;/tt&gt; resolves to the bundle &lt;tt&gt;org.apache.sling.junit.core&lt;/tt&gt;. This bundle does not have the proper headers. Instead the bundle headers of the bundle, which is created in the &lt;tt&gt;ClientSideTeleporter&lt;/tt&gt;, including the class under test, should be used. Thus its &lt;tt&gt;BundleContext&lt;/tt&gt; is needed.&lt;/p&gt;

&lt;p&gt;I already made the required code changes using &lt;tt&gt;FrameWorkUtil&lt;/tt&gt; to retrieve the &lt;tt&gt;BundleContext&lt;/tt&gt; for the class under test. I&apos;ll create a pull request, which resolves this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13010397">SLING-6110</key>
            <summary>ServerSideTeleporter can&apos;t read the bundle header Sling-Test-WaitForService-Timeout</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="marcel.jolk">Marcel Jolk</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Oct 2016 08:56:03 +0000</created>
                <updated>Mon, 19 Dec 2016 13:46:14 +0000</updated>
                            <resolved>Fri, 7 Oct 2016 11:40:16 +0000</resolved>
                                    <version>JUnit Tests Teleporter 1.0.8</version>
                    <version>JUnit Core 1.0.18</version>
                                    <fixVersion>JUnit Core 1.0.20</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15554585" author="githubbot" created="Fri, 7 Oct 2016 09:02:30 +0000"  >&lt;p&gt;GitHub user marcel-j opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/178&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/178&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6110&quot; title=&quot;ServerSideTeleporter can&amp;#39;t read the bundle header Sling-Test-WaitForService-Timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6110&quot;&gt;&lt;del&gt;SLING-6110&lt;/del&gt;&lt;/a&gt;: use the proper bundleContext in the ServerSideTeleporter &#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;to retrieve the correct bundle headers&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/marcel-j/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/marcel-j/sling&lt;/a&gt; trunk&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/178.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/178.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #178&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c400ed4291090da2fb522692a1837265d991db2a&lt;br/&gt;
Author: Marcel Jolk &amp;lt;marcel.jolk@cybercon.de&amp;gt;&lt;br/&gt;
Date:   2016-10-07T09:00:10Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6110&quot; title=&quot;ServerSideTeleporter can&amp;#39;t read the bundle header Sling-Test-WaitForService-Timeout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6110&quot;&gt;&lt;del&gt;SLING-6110&lt;/del&gt;&lt;/a&gt;: use the proper bundleContext in the ServerSideTeleporter to retrieve the correct bundle headers&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15554617" author="rombert" created="Fri, 7 Oct 2016 09:18:20 +0000"  >&lt;p&gt;We don&apos;t resolve issues until the code changes are integrated in the Sling SVN repository, so reopening for now.&lt;/p&gt;

&lt;p&gt;But thanks for the report and the pull request &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15554873" author="sseifert@pro-vision.de" created="Fri, 7 Oct 2016 11:40:16 +0000"  >&lt;p&gt;Completed: At revision: 1763743  &lt;/p&gt;

&lt;p&gt;thanks - i applied your patch in a slightly modified version.&lt;br/&gt;
please check if it still fixes the problem on your side.&lt;/p&gt;</comment>
                            <comment id="15554911" author="marcel.jolk" created="Fri, 7 Oct 2016 12:01:32 +0000"  >&lt;p&gt;Still works. Thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13002346">SLING-6031</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34k9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6103] crankstart-launcher ITs fail when executed in isolation (on Jenkins)</title>
                <link>https://issues.apache.org/jira/browse/SLING-6103</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When building on Jenkins SNAPSHOT dependencies can&apos;t be found. I assume that this is because they haven&apos;t been installed in the local repository and the IT does not look in the apache snapshots repository.&lt;/p&gt;

&lt;p&gt;In that case, it should be similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6080&quot; title=&quot;oak-server ITs fail under Java 7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6080&quot;&gt;&lt;del&gt;SLING-6080&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6074&quot; title=&quot;Healthcheck ITs fail in isolated job on Jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6074&quot;&gt;&lt;del&gt;SLING-6074&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13010113">SLING-6103</key>
            <summary>crankstart-launcher ITs fail when executed in isolation (on Jenkins)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Thu, 6 Oct 2016 09:31:26 +0000</created>
                <updated>Wed, 19 Oct 2016 13:51:22 +0000</updated>
                            <resolved>Wed, 19 Oct 2016 13:51:21 +0000</resolved>
                                                                    <component>Crankstart</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15551509" author="bdelacretaz" created="Thu, 6 Oct 2016 09:59:10 +0000"  >&lt;p&gt;I&apos;ll check whether the snapshots are really required.&lt;/p&gt;</comment>
                            <comment id="15551742" author="bdelacretaz" created="Thu, 6 Oct 2016 12:01:33 +0000"  >&lt;p&gt;I have removed unnecessary SNAPSHOTs in revision 1763566, but the launcher module still needs snapshots from the sibling test modules, so you probably need to configure the addtional Maven Repository using the org.ops4j.pax.url.mvn.repositories system property as per &lt;a href=&quot;https://ops4j1.jira.com/wiki/display/paxurl/Mvn+Protocol&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ops4j1.jira.com/wiki/display/paxurl/Mvn+Protocol&lt;/a&gt; as Crankstart uses Pax URL to get the artifacts.&lt;/p&gt;

&lt;p&gt;Note that the tests currently fail with Java 8. For now I have just added an enforcer rule to fail early with Java 8 (revision 1763567), we could just keep this build active but failing or disable it until that&apos;s fixed.&lt;/p&gt;</comment>
                            <comment id="15551751" author="bdelacretaz" created="Thu, 6 Oct 2016 12:04:05 +0000"  >&lt;p&gt;Wait...I need to setup the pom to correctly pass the &lt;tt&gt;org.ops4j.pax.url.mvn.repositories&lt;/tt&gt; property.&lt;/p&gt;</comment>
                            <comment id="15551787" author="bdelacretaz" created="Thu, 6 Oct 2016 12:17:29 +0000"  >&lt;p&gt;Ok, as of revision 1763570 you should be able to use &lt;tt&gt;-D org.ops4j.pax.url.mvn.repositories=...&lt;/tt&gt; to build the launcher module.&lt;/p&gt;</comment>
                            <comment id="15588624" author="bdelacretaz" created="Wed, 19 Oct 2016 12:28:14 +0000"  >&lt;p&gt;The build passed now at &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling-Dashboard/job/sling-contrib-crankstart-launcher-1.8/9/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling-Dashboard/job/sling-contrib-crankstart-launcher-1.8/9/&lt;/a&gt; after changing the build&apos;s &quot;goals and options&quot; settings to&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-U clean verify -Dorg.ops4j.pax.url.mvn.repositories=http:&lt;span class=&quot;code-comment&quot;&gt;//repo.maven.apache.org/maven2@id=apache-releases,http://repository.apache.org/content/groups/snapshots-group@snapshots@noreleases@id=apache-snapshots&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; how do we make those job-specific settings permanent? I suppose we need to modify &lt;tt&gt;tooling/jenkins/create_jobs.groovy&lt;/tt&gt; to add an optional per-job variable (&quot;extraGoals&quot; ?) for these settings?&lt;/p&gt;</comment>
                            <comment id="15588633" author="rombert" created="Wed, 19 Oct 2016 12:33:33 +0000"  >&lt;p&gt;We can do this in two ways:&lt;/p&gt;

&lt;p&gt;1) add a &apos;goals&apos; setting, which overrides the global one &lt;/p&gt;

&lt;p&gt;The advantage is that we have full control. The disadvantage is that it does not play nicely with the &apos;deploy only once&apos; logic&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-groovy&quot;&gt;goals(deploy ? &lt;span class=&quot;code-quote&quot;&gt;&quot;-U clean deploy&quot;&lt;/span&gt; : &lt;span class=&quot;code-quote&quot;&gt;&quot;-U clean verify&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2) Add an &apos;extraArguments&apos; setting, which is appended to the global goals&lt;/p&gt;

&lt;p&gt;The advantage is that it plays nicely with the &apos;deply only once&apos; logic, but the disadvantage is that you can&apos;t override the full command line. But OTOH that is not necessary now.&lt;/p&gt;

&lt;p&gt;I have a slight preference for 2), but I can also see 1) working.&lt;/p&gt;</comment>
                            <comment id="15588779" author="bdelacretaz" created="Wed, 19 Oct 2016 13:32:18 +0000"  >&lt;p&gt;Ok, I&apos;ve implemented an &lt;tt&gt;extraGoalsParams&lt;/tt&gt; option in &lt;a href=&quot;http://svn.apache.org/r1765586&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1765586&lt;/a&gt; - &lt;/p&gt;

&lt;p&gt;I&apos;ve executed &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-seed-build/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-seed-build/&lt;/a&gt; and the results look good, but &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; please cross-check as it&apos;s the first time I touch that code (fun stuff BTW!).&lt;/p&gt;</comment>
                            <comment id="15588786" author="rombert" created="Wed, 19 Oct 2016 13:34:14 +0000"  >&lt;p&gt;Change looks good, thanks!&lt;/p&gt;

&lt;p&gt;And yes, quite fun &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15588821" author="bdelacretaz" created="Wed, 19 Oct 2016 13:51:21 +0000"  >&lt;p&gt;With this the &lt;tt&gt;sling-contrib-crankstart-launcher&lt;/tt&gt; 1.7 and 1.8 jobs build successfully, marking this fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34ii7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6100] NPE in StartupFilterImpl if pathInfo is null</title>
                <link>https://issues.apache.org/jira/browse/SLING-6100</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;StartupFilterImpl can throw an NPE if &lt;tt&gt;((HttpServletRequest)request).getPathInfo()&lt;/tt&gt; returns null&lt;/p&gt;</description>
                <environment></environment>
        <key id="13009837">SLING-6100</key>
            <summary>NPE in StartupFilterImpl if pathInfo is null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Oct 2016 10:55:48 +0000</created>
                <updated>Wed, 5 Oct 2016 11:15:53 +0000</updated>
                            <resolved>Wed, 5 Oct 2016 10:57:19 +0000</resolved>
                                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15548378" author="bdelacretaz" created="Wed, 5 Oct 2016 10:57:21 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;http://svn.apache.org/r1763407&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1763407&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13009508">SLING-6093</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34gsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6099] NPE in StartupFilterImpl if pathInfo is null</title>
                <link>https://issues.apache.org/jira/browse/SLING-6099</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;StartupFilterImpl can throw an NPE if &lt;tt&gt;((HttpServletRequest)request).getPathInfo()&lt;/tt&gt; returns null&lt;/p&gt;</description>
                <environment></environment>
        <key id="13009836">SLING-6099</key>
            <summary>NPE in StartupFilterImpl if pathInfo is null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Oct 2016 10:55:44 +0000</created>
                <updated>Fri, 14 Oct 2016 13:53:21 +0000</updated>
                            <resolved>Fri, 14 Oct 2016 13:53:21 +0000</resolved>
                                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15575401" author="bdelacretaz" created="Fri, 14 Oct 2016 13:53:21 +0000"  >&lt;p&gt;Fixed by &lt;a href=&quot;http://svn.apache.org/r1763407&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1763407&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34gsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6094] HTL can generate invalid Java code by using user-supplied input</title>
                <link>https://issues.apache.org/jira/browse/SLING-6094</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;HTL can generate invalid Java code by using user-supplied input or markup elements as fragments for variable names, leading to failed script executions.&lt;/p&gt;

&lt;p&gt;This could happen with the &lt;tt&gt;data-sly-attribute&lt;/tt&gt; plug-in, when the value is a map and the plug-in has to analyse previously defined attributes (see &lt;tt&gt;v-bind:src&lt;/tt&gt;):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;img src=&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot; v-bind:src=&quot;&lt;/span&gt;abc&lt;span class=&quot;code-quote&quot;&gt;&quot; data-sly-attribute=&quot;&lt;/span&gt;${logic.hello}&quot; /&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or with user-defined script variable names:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;div data-sly-test.jcr:title=&lt;span class=&quot;code-quote&quot;&gt;&quot;${1&amp;gt;&lt;/span&gt;0}&quot;&lt;/span&gt;&amp;gt;correctly escaped variable&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13009530">SLING-6094</key>
            <summary>HTL can generate invalid Java code by using user-supplied input</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="marbec">Mark J. Becker</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Oct 2016 12:49:43 +0000</created>
                <updated>Fri, 13 Jan 2017 10:27:29 +0000</updated>
                            <resolved>Fri, 7 Oct 2016 10:39:27 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.18</version>
                                    <fixVersion>Scripting HTL Engine 1.0.22</fixVersion>
                    <fixVersion>Scripting HTL Java Compiler 1.0.2</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15554771" author="radu.cotescu" created="Fri, 7 Oct 2016 10:39:27 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1763629&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1763629&lt;/a&gt;, added tests in &lt;a href=&quot;https://svn.apache.org/r1763732&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1763732&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13016915">SLING-6223</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34ewv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6093] NPE in StartupFilterImpl</title>
                <link>https://issues.apache.org/jira/browse/SLING-6093</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Following NPE is seen with a system running &lt;tt&gt;org.apache.sling.startupfilter&lt;/tt&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2016-10-04 16:54:32,290 ERROR NA [qtp113547859-173] org.apache.felix.http.jetty - Exception while processing request to /system/console (java.lang.NullPointerException) 
java.lang.NullPointerException: null
	at org.apache.sling.startupfilter.impl.StartupFilterImpl.doFilter(StartupFilterImpl.java:104)
	at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)
	at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)
	at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:124)
	at org.apache.felix.http.base.internal.DispatcherServlet.service(DispatcherServlet.java:61)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The NPE is due to pathinfo being null &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/contrib/extensions/startup-filter/src/main/java/org/apache/sling/startupfilter/impl/StartupFilterImpl.java#L104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13009508">SLING-6093</key>
            <summary>NPE in StartupFilterImpl</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Oct 2016 11:32:06 +0000</created>
                <updated>Wed, 5 Oct 2016 11:15:53 +0000</updated>
                            <resolved>Wed, 5 Oct 2016 11:15:52 +0000</resolved>
                                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13009837">SLING-6100</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34erz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6089] Log Tracer does not work with system having new HTTP whiteboard implementation</title>
                <link>https://issues.apache.org/jira/browse/SLING-6089</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Log Tracer does not work with Sling setups which have newer HTTP Whiteboard implementation (org.apache.felix.http.whiteboard:3.0.0). Currently the filter is registered with service property&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;pattern=/.*
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The filter does gets used for calls to /system/console but does not get invoked for any calls which are handled by SlingMainServlet (as reported by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/sling-dev/201609.mbox/%3CCAEWfVJ%3DWUVaoD9GOTD3WpL7PSEh9_Jk3maP2WPEWWTc7dbCftw%40mail.gmail.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13009155">SLING-6089</key>
            <summary>Log Tracer does not work with system having new HTTP whiteboard implementation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Oct 2016 04:14:09 +0000</created>
                <updated>Mon, 24 Oct 2016 10:54:03 +0000</updated>
                            <resolved>Mon, 3 Oct 2016 11:00:58 +0000</resolved>
                                                    <fixVersion>Log Tracer 1.0.2</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15541493" author="chetanm" created="Mon, 3 Oct 2016 04:18:37 +0000"  >&lt;p&gt;This seems to work if instead of using the pattern property we use the new std whiteboard properties&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;osgi.http.whiteboard.context.select=(osgi.http.whiteboard.context.name=*)
osgi.http.whiteboard.filter.pattern=/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;compared to earlier &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;pattern=/.*
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Is there any way to have filter make use of whiteboard pattern and be usable on older system (having older whiteboard implementation) and newer system? I can register the service with both old and new property but that causes a warning log&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;02.10.2016 22:08:04.718 *WARN* [FelixFrameworkWiring] org.apache.felix.http.whiteboard Deprecation warning: Filter registered through Apache Felix whiteboard service: [javax.servlet.Filter]. Please change your code to the OSGi Http Whiteboard Service.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or for such cases I would have to make use of &lt;tt&gt;HttpService&lt;/tt&gt; . But then I do not think old implementation provided support for registering filters. Basically I am looking for a way to have this bundle be usable on any system having whiteboard implementation (old or new)&lt;/p&gt;</comment>
                            <comment id="15542023" author="cziegeler" created="Mon, 3 Oct 2016 09:55:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; I think the best option is to use both properties, the old and the new ones. The warning can be ignored as this is actually exactly what you want &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I&apos;m personally not sure, if it is worth supporting the old whiteboard, as the new one is now out for over a year - and I guess this could be solved with a configuration as well:&lt;br/&gt;
You just use the new official properties - if someone wants to run it in an older version, an OSGi configuration for the filter, adding the pattern property would do the trick.&lt;/p&gt;</comment>
                            <comment id="15542033" author="chetanm" created="Mon, 3 Oct 2016 09:59:31 +0000"  >&lt;p&gt;I want this to be usable on older AEM setups which I believe do not have the newer implementation. So would go for simpler option now of registering with both properties now. &lt;/p&gt;

&lt;p&gt;btw just for my understanding. Earlier I had to use regex like &lt;tt&gt;/.*&lt;/tt&gt; while now &lt;tt&gt;/&lt;/tt&gt;. Are they functionally same?&lt;/p&gt;</comment>
                            <comment id="15542055" author="cziegeler" created="Mon, 3 Oct 2016 10:11:39 +0000"  >&lt;p&gt;Yes, it&apos;s the same, you can also use the regex registration property for the filter as defined in the http whiteboard.&lt;/p&gt;</comment>
                            <comment id="15542133" author="chetanm" created="Mon, 3 Oct 2016 10:55:24 +0000"  >&lt;p&gt;Another aspect - Even with warning any bundle using the older approach would not work in new setup as the filter would not cover the SlingMainServlet (original cause of this issue) and would have to use the newer approach. So a compatibility issue people need to be aware of&lt;/p&gt;</comment>
                            <comment id="15542149" author="chetanm" created="Mon, 3 Oct 2016 11:00:59 +0000"  >&lt;p&gt;Fixed with 1763153. The filter is now registered with both old and new whiteboard properties and bundle can be used with setup having anytype of whiteboard implementation&lt;/p&gt;</comment>
                            <comment id="15544670" author="bdelacretaz" created="Tue, 4 Oct 2016 07:57:18 +0000"  >&lt;p&gt;I haven&apos;t looked at your latest changes but it might be useful to have both the Sling and non-Sling filter do the same thing (setup the tracing) but only if the other filter hasn&apos;t done it yet. I think this might help cope with all possible scenarios.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34clj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6088] Distribution ITs fail on Jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-6088</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The tests give up after 60 seconds:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;60433 [main] INFO org.apache.sling.testing.tools.sling.SlingTestBase - Server not ready after 60 seconds, giving up
Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 60.479 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.distribution.it.DistributionPackageExporterImporterTemporaryFoldersTest
testAddExportImportTemp(org.apache.sling.distribution.it.DistributionPackageExporterImporterTemporaryFoldersTest)  Time elapsed: 0.006 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: Server not ready after 60 seconds, giving up
	at org.junit.Assert.fail(Assert.java:88)
	at org.apache.sling.testing.tools.sling.SlingTestBase.waitForServerReady(SlingTestBase.java:326)
	at org.apache.sling.testing.tools.sling.SlingTestBase.startServerIfNeeded(SlingTestBase.java:169)
	at org.apache.sling.testing.tools.sling.SlingTestBase.getServerBaseUrl(SlingTestBase.java:231)
	at org.apache.sling.distribution.it.DistributionIntegrationTestBase.init(DistributionIntegrationTestBase.java:87)
	at org.apache.sling.distribution.it.DistributionIntegrationTestBase.&amp;lt;init&amp;gt;(DistributionIntegrationTestBase.java:63)
	at org.apache.sling.distribution.it.DistributionIntegrationTestBase.&amp;lt;init&amp;gt;(DistributionIntegrationTestBase.java:59)
	at org.apache.sling.distribution.it.DistributionPackageExporterImporterTemporaryFoldersTest.&amp;lt;init&amp;gt;(DistributionPackageExporterImporterTemporaryFoldersTest.java:36)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The only relevant snippet that I can find in the logs is related to the health check bundles:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;01.10.2016 18:09:51.724 *ERROR* [FelixDispatchQueue] org.apache.sling.hc.webconsole FrameworkEvent ERROR (org.osgi.framework.BundleException: Unable to resolve org.apache.sling.hc.webconsole [114](R 114.0): missing requirement [org.apache.sling.hc.webconsole [114](R 114.0)] osgi.wiring.package; (&amp;amp;(osgi.wiring.package=org.apache.sling.hc.api.execution)(version&amp;gt;=1.1.0)(!(version&amp;gt;=2.0.0))) Unresolved requirements: [[org.apache.sling.hc.webconsole [114](R 114.0)] osgi.wiring.package; (&amp;amp;(osgi.wiring.package=org.apache.sling.hc.api.execution)(version&amp;gt;=1.1.0)(!(version&amp;gt;=2.0.0)))])
org.osgi.framework.BundleException: Unable to resolve org.apache.sling.hc.webconsole [114](R 114.0): missing requirement [org.apache.sling.hc.webconsole [114](R 114.0)] osgi.wiring.package; (&amp;amp;(osgi.wiring.package=org.apache.sling.hc.api.execution)(version&amp;gt;=1.1.0)(!(version&amp;gt;=2.0.0))) Unresolved requirements: [[org.apache.sling.hc.webconsole [114](R 114.0)] osgi.wiring.package; (&amp;amp;(osgi.wiring.package=org.apache.sling.hc.api.execution)(version&amp;gt;=1.1.0)(!(version&amp;gt;=2.0.0)))]
	at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:4111)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2117)
	at org.apache.felix.framework.Felix$RefreshHelper.restart(Felix.java:5063)
	at org.apache.felix.framework.Felix.refreshPackages(Felix.java:4253)
	at org.apache.felix.framework.FrameworkWiringImpl.run(FrameworkWiringImpl.java:188)
	at java.lang.Thread.run(Thread.java:745)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but I&apos;m not sure that this leads to the test failures.&lt;/p&gt;</description>
                <environment>Jenkins</environment>
        <key id="13009070">SLING-6088</key>
            <summary>Distribution ITs fail on Jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Oct 2016 18:34:58 +0000</created>
                <updated>Wed, 19 Sep 2018 12:34:43 +0000</updated>
                                                                            <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15538991" author="olli" created="Sat, 1 Oct 2016 18:40:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, HC is required:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  &amp;lt;feature name=&quot;sling-extension-distribution&quot; version=&quot;${feature.version}&quot;&amp;gt;
    &amp;lt;bundle&amp;gt;mvn:org.apache.sling/org.apache.sling.distribution.api/0.3.0&amp;lt;/bundle&amp;gt;
    &amp;lt;bundle&amp;gt;mvn:org.apache.sling/org.apache.sling.distribution.core/0.1.18&amp;lt;/bundle&amp;gt;
    &amp;lt;!-- dependencies --&amp;gt;
    &amp;lt;feature version=&quot;${feature.version}&quot;&amp;gt;sling&amp;lt;/feature&amp;gt;
    &amp;lt;feature version=&quot;${feature.version}&quot;&amp;gt;sling-jcr&amp;lt;/feature&amp;gt;
    &amp;lt;feature version=&quot;${feature.version}&quot;&amp;gt;sling-extension-event&amp;lt;/feature&amp;gt;
    &amp;lt;feature version=&quot;${feature.version}&quot;&amp;gt;sling-extension-healthcheck&amp;lt;/feature&amp;gt;
    &amp;lt;bundle dependency=&quot;true&quot;&amp;gt;mvn:org.apache.httpcomponents/httpcore-osgi/4.4.5&amp;lt;/bundle&amp;gt;
    &amp;lt;bundle dependency=&quot;true&quot;&amp;gt;mvn:org.apache.httpcomponents/httpclient-osgi/4.5.2&amp;lt;/bundle&amp;gt;
    &amp;lt;bundle dependency=&quot;true&quot;&amp;gt;mvn:org.apache.jackrabbit.vault/org.apache.jackrabbit.vault/3.1.26&amp;lt;/bundle&amp;gt;
  &amp;lt;/feature&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34c33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6085] resource.getValueMap() to unavailable in Sightly JS-code</title>
                <link>https://issues.apache.org/jira/browse/SLING-6085</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In Sightly JS-api you can&apos;t use resource.getValueMap() method, looks like it is unavailable.&lt;/p&gt;

&lt;p&gt;There you need to do this workaround to get to the properties&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;use strict&quot;&lt;/span&gt;;
use(function () {
    &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; parent = resource.getParent();
    &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; props = parent.adaptTo(Packages.org.apache.sling.api.resource.ValueMap);

    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; props.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;jcr:createdBy&quot;&lt;/span&gt;,&quot;&quot;);

});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13009058">SLING-6085</key>
            <summary>resource.getValueMap() to unavailable in Sightly JS-code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="fvisser">Feike Visser</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Oct 2016 16:43:45 +0000</created>
                <updated>Thu, 31 Aug 2017 08:27:36 +0000</updated>
                            <resolved>Thu, 31 Aug 2017 08:26:29 +0000</resolved>
                                    <version>Scripting JavaScript 2.0.2</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15538795" author="fvisser" created="Sat, 1 Oct 2016 16:44:56 +0000"  >&lt;p&gt;FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gwalt&quot; class=&quot;user-hover&quot; rel=&quot;gwalt&quot;&gt;gwalt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16148637" author="radu.cotescu" created="Thu, 31 Aug 2017 08:25:58 +0000"  >&lt;p&gt;You actually can write this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;use(&lt;span class=&quot;code-keyword&quot;&gt;function&lt;/span&gt; () {
    &lt;span class=&quot;code-quote&quot;&gt;&apos;use strict&apos;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; parent = resource.parent;
    &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; parentProperties = parent.properties;
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; parentProperties[&lt;span class=&quot;code-quote&quot;&gt;&apos;jcr:createdBy&apos;&lt;/span&gt;]; &lt;span class=&quot;code-comment&quot;&gt;// equivalent to parentProperties.get(&lt;span class=&quot;code-quote&quot;&gt;&apos;jcr:createdBy&apos;&lt;/span&gt;)
&lt;/span&gt;});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It&apos;s way cleaner and more JavaScript-like than &lt;tt&gt;resource.getValueMap()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;http://sling.apache.org/apidocs/sling9/org/apache/sling/scripting/javascript/wrapper/ScriptableResource.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/apidocs/sling9/org/apache/sling/scripting/javascript/wrapper/ScriptableResource.html&lt;/a&gt; for the exported JavaScript API.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34c0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6080] oak-server ITs fail under Java 7</title>
                <link>https://issues.apache.org/jira/browse/SLING-6080</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The oak-server build fails with Java 7 since the pax-exam config pulls in the jetty bundle ( via slingJcr &#8594; webconsole &#8594; http ).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13008716">SLING-6080</key>
            <summary>oak-server ITs fail under Java 7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Sep 2016 20:41:28 +0000</created>
                <updated>Mon, 20 Mar 2017 22:17:45 +0000</updated>
                            <resolved>Sat, 1 Oct 2016 18:05:09 +0000</resolved>
                                                    <fixVersion>JCR Oak Server 1.1.4</fixVersion>
                                    <component>JCR</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15533999" author="rombert" created="Thu, 29 Sep 2016 20:44:59 +0000"  >&lt;p&gt;I&apos;ve changed the tests to run on Java 8 only ( &lt;a href=&quot;https://svn.apache.org/r1762838&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1762838&lt;/a&gt; ), but it would be good to enable them for Java 7 as well.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; - what would you suggest here?&lt;/p&gt;</comment>
                            <comment id="15538931" author="olli" created="Sat, 1 Oct 2016 18:02:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, IMHO &lt;tt&gt;webconsole&lt;/tt&gt; should be an optional dependency, but we have bundles where it is a hard dependency unnecessarily. So using Felix HTTP bundles for Java 7 is a viable workaround.&lt;/p&gt;</comment>
                            <comment id="15538936" author="olli" created="Sat, 1 Oct 2016 18:04:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; And didn&apos;t we agree on Java 8 for Launchpad because of Jetty?&lt;/p&gt;</comment>
                            <comment id="15538937" author="rombert" created="Sat, 1 Oct 2016 18:04:17 +0000"  >&lt;p&gt;Definitely works for me. I guess at some point we will drop Java 7 so we will be able to also remove this workaround.&lt;/p&gt;</comment>
                            <comment id="15538940" author="olli" created="Sat, 1 Oct 2016 18:05:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1763025&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1763025&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15538942" author="rombert" created="Sat, 1 Oct 2016 18:06:10 +0000"  >&lt;p&gt;Yes, we did. However, the bundles are still going with Java 7 so it makes sense (IMO) to still run ITs for them with Java 7 if possible.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i349wn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6079] commons.messaging.mail build fails on Jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-6079</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The build fails on jenkins, apparently due to the same root cause as &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6704&quot; title=&quot;Migrate to R6 annotations, clean up dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6704&quot;&gt;&lt;del&gt;SLING-6704&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.io.IOException: Error resolving artifact org.apache.sling:org.apache.sling.commons.messaging:jar:0.0.1-SNAPSHOT: Could not find artifact org.apache.sling:org.apache.sling.commons.messaging:jar:0.0.1-SNAPSHOT&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, when I try the same approach:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/bundles/commons/org.apache.sling.commons.messaging.mail/src/test/java/org/apache/sling/commons/messaging/mail/MailTestSupport.java b/bundles/commons/org.apache.sling.commons.messaging.mail/src/test/java/org/apache/sling/commons/messaging/mail/MailTestSupport.java
index a1edb6c..d045f80 100644
--- a/bundles/commons/org.apache.sling.commons.messaging.mail/src/test/java/org/apache/sling/commons/messaging/mail/MailTestSupport.java
+++ b/bundles/commons/org.apache.sling.commons.messaging.mail/src/test/java/org/apache/sling/commons/messaging/mail/MailTestSupport.java
@@ -36,6 +36,7 @@ import static org.ops4j.pax.exam.CoreOptions.junitBundles;
 import static org.ops4j.pax.exam.CoreOptions.mavenBundle;
 import static org.ops4j.pax.exam.CoreOptions.options;
 import static org.ops4j.pax.exam.CoreOptions.provision;
+import static org.ops4j.pax.exam.CoreOptions.repository;
 import static org.ops4j.pax.exam.CoreOptions.wrappedBundle;
 
 public abstract class MailTestSupport {
@@ -78,6 +79,8 @@ public abstract class MailTestSupport {
     protected Option[] baseConfiguration() {
         final String filename = System.getProperty(&quot;bundle.filename&quot;);
         return options(
+            repository(&quot;https://repo.maven.apache.org/maven2/&quot;).id(&quot;central&quot;),
+            repository(&quot;https://repository.apache.org/snapshots/&quot;).id(&quot;apache-snapshots&quot;).allowSnapshots(),
             junitBundles(),
             provision(
                 wrappedBundle(mavenBundle().groupId(&quot;org.subethamail&quot;).artifactId(&quot;subethasmtp&quot;).versionAsInProject()),&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it fails to find a pax-exam bundle:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.io.IOException: Error resolving artifact org.ops4j.pax.exam:pax-exam-inject:jar:4.9.1: Could not find artifact org.ops4j.pax.exam:pax-exam-inject:jar:4.9.1&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13008697">SLING-6079</key>
            <summary>commons.messaging.mail build fails on Jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Sep 2016 20:01:59 +0000</created>
                <updated>Thu, 13 Oct 2016 08:29:59 +0000</updated>
                            <resolved>Fri, 30 Sep 2016 12:32:20 +0000</resolved>
                                                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15535866" author="olli" created="Fri, 30 Sep 2016 12:32:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1762888&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1762888&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15536565" author="olli" created="Fri, 30 Sep 2016 17:44:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, please have a look. Adding &lt;tt&gt;apache-snapshots&lt;/tt&gt; only works on my local machine (with empty &lt;tt&gt;~/.m2&lt;/tt&gt;) and on Jenkins.&lt;/p&gt;</comment>
                            <comment id="15537235" author="rombert" created="Fri, 30 Sep 2016 22:24:20 +0000"  >&lt;p&gt;Works here locally as well, not sure why it did not work before... thanks for the fix!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i349sf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6077] sling-mock: ResourceResolverFactory is registered twice</title>
                <link>https://issues.apache.org/jira/browse/SLING-6077</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;when using sling mocks the ResourceResolverFactory service is registered twice. this is not obvious because everything is well for most operations.&lt;/p&gt;

&lt;p&gt;but if an OSGi service references it like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Reference
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; ResourceResolverFactory factory;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it fails because multiple references exist (i&apos;m not sure if this is 100% correct in the osgi-mock, need to look up the DS spec).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13008568">SLING-6077</key>
            <summary>sling-mock: ResourceResolverFactory is registered twice</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                            <label>mocks</label>
                    </labels>
                <created>Thu, 29 Sep 2016 15:18:55 +0000</created>
                <updated>Mon, 10 Oct 2016 09:22:11 +0000</updated>
                            <resolved>Thu, 29 Sep 2016 16:23:15 +0000</resolved>
                                    <version>Testing Sling Mock 2.1.0</version>
                                    <fixVersion>Testing Sling Mock 2.1.2</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15533084" author="sseifert@pro-vision.de" created="Thu, 29 Sep 2016 15:27:31 +0000"  >&lt;p&gt;problem does not exist in sling-mock 1.x, added unit test to make sure in rev. 1762796 &lt;/p&gt;</comment>
                            <comment id="15533095" author="thodte" created="Thu, 29 Sep 2016 15:31:38 +0000"  >&lt;p&gt;my case can be closed?&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6069&quot; title=&quot;Error: Multiple matches found for unary reference &amp;#39;factory&amp;#39; &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6069&quot;&gt;&lt;del&gt;SLING-6069&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15533104" author="sseifert@pro-vision.de" created="Thu, 29 Sep 2016 15:34:12 +0000"  >&lt;p&gt;ah yes, missed that&lt;/p&gt;</comment>
                            <comment id="15533236" author="sseifert@pro-vision.de" created="Thu, 29 Sep 2016 16:23:15 +0000"  >&lt;p&gt;Completed: At revision: 1762809  &lt;/p&gt;

&lt;p&gt;to be precise this was not an error in sling-mock itself, but in the underlying &lt;tt&gt;org.apache.sling.resourceresolver&lt;/tt&gt; and &lt;tt&gt;org.apache.sling.jcr.resource&lt;/tt&gt; implementations that where used. fixed by updating to a slightly newer version of both.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13007897">SLING-6069</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i348zr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6074] Healthcheck ITs fail in isolated job on Jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-6074</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Since moving to per-module builds in the ASF Jenkins instance the health check ITs fail, both for Java 7 and Java 8.&lt;/p&gt;

&lt;p&gt;As far as I what happens is:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the ITs reference SNAPSHOT versions of the HC bundles&lt;/li&gt;
	&lt;li&gt;these snapshots are referenced from Pax-Exam tests&lt;/li&gt;
	&lt;li&gt;Pax-Exam tries to reference them using the default Maven settings ( ~/.m2/respository and Maven Central ).&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;But since the snapshots are deployed on repository.apache.org this does not work. This used to work when using reactor builds since the dependencies would be installed locally.&lt;/p&gt;

&lt;p&gt;The concrete error message is&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;1240 [main] WARN org.ops4j.pax.url.mvn.internal.AetherBasedResolver - Error resolving artifactorg.apache.sling:org.apache.sling.hc.samples:jar:1.0.7-SNAPSHOT:Could not find artifact org.apache.sling:org.apache.sling.hc.samples:jar:1.0.7-SNAPSHOT in central (http://repo1.maven.org/maven2/)
org.sonatype.aether.resolution.ArtifactResolutionException: Could not find artifact org.apache.sling:org.apache.sling.hc.samples:jar:1.0.7-SNAPSHOT in central (http://repo1.maven.org/maven2/)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;One possible way out is to modify the pax-exam tests to take into account repository.apache.org.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; as you know HC and respectively Pax-Exam better, how do you suggest we approach this?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13008458">SLING-6074</key>
            <summary>Healthcheck ITs fail in isolated job on Jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Sep 2016 07:20:07 +0000</created>
                <updated>Thu, 29 Sep 2016 14:10:31 +0000</updated>
                            <resolved>Thu, 29 Sep 2016 13:51:31 +0000</resolved>
                                                                    <component>Health Check</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15532131" author="bdelacretaz" created="Thu, 29 Sep 2016 08:17:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;One possible way out is to modify the pax-exam tests to take into account repository.apache.org.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I suppose the Pax Exam config described at &lt;a href=&quot;https://ops4j1.jira.com/wiki/display/paxexam/Configure+Maven+repositories&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ops4j1.jira.com/wiki/display/paxexam/Configure+Maven+repositories&lt;/a&gt; would work for that but I&apos;ve never tried it.&lt;/p&gt;</comment>
                            <comment id="15532826" author="rombert" created="Thu, 29 Sep 2016 13:51:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; - that did it, thanks!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; - you might want to pick up that change in the pax-exam supporting module as well.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1762778&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1762778&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13008540">SLING-6076</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i348bb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6073] pipe writer and additionalbindings configurations added through POST break the pipe</title>
                <link>https://issues.apache.org/jira/browse/SLING-6073</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;if POST contains protected properties (like jcr:created / jcr:createdBy), those properties shouldn&apos;t be taken in account by writer or additionalbinding, like it is done in other places&lt;/p&gt;</description>
                <environment></environment>
        <key id="13008269">SLING-6073</key>
            <summary>pipe writer and additionalbindings configurations added through POST break the pipe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Sep 2016 15:59:08 +0000</created>
                <updated>Fri, 14 Oct 2016 08:08:07 +0000</updated>
                            <resolved>Thu, 29 Sep 2016 17:47:15 +0000</resolved>
                                                    <fixVersion>Pipes 0.0.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15533478" author="olli" created="Thu, 29 Sep 2016 17:47:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1762816&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1762816&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12830913" name="SLING-6073.patch" size="2267" author="npeltier" created="Thu, 29 Sep 2016 16:21:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3475b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6072] The testing rules do not call CloseableHttpClient.close()</title>
                <link>https://issues.apache.org/jira/browse/SLING-6072</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The rules being provided by the sling testing rules do not automatically call close on the underlying &lt;tt&gt;ClosableHttpClient&lt;/tt&gt; which is necessary to close the dangling http connections being managed by the underlying connection manager (see &lt;a href=&quot;https://hc.apache.org/httpcomponents-client-ga/tutorial/html/fundamentals.html#d5e217&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hc.apache.org/httpcomponents-client-ga/tutorial/html/fundamentals.html#d5e217&lt;/a&gt;). Even custom code cannot call close, because the underlying &lt;tt&gt;ClosableHttpClient&lt;/tt&gt; is not really exposed.&lt;/p&gt;

&lt;p&gt;I guess there is also a change necessary in testing/http/client to expose such a close method as well, and also clarify under which circumstances a new HttpClient is created or when an existing one is reused.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13008026">SLING-6072</key>
            <summary>The testing rules do not call CloseableHttpClient.close()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andrei.dulvac">Andrei Dulvac</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Sep 2016 18:48:16 +0000</created>
                <updated>Mon, 15 Jan 2024 09:13:55 +0000</updated>
                            <resolved>Mon, 15 Jan 2024 09:13:55 +0000</resolved>
                                    <version>Apache Sling Testing Clients 1.0.0</version>
                    <version>Apache Sling Testing Rules 1.0.0</version>
                                    <fixVersion>Apache Sling Testing Clients 1.0.1</fixVersion>
                    <fixVersion>Apache Sling Testing Rules 1.0.1</fixVersion>
                                    <component>Apache Sling Testing Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i345nb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6071] JcrModifiableValueMap#remove(key) breaks Map&lt;String, Object&gt; contract</title>
                <link>https://issues.apache.org/jira/browse/SLING-6071</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;From the contract of Map&amp;lt;String, Object&amp;gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Returns the value to which this map previously associated the key, or null if the map contained no mapping for the key.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#remove-java.lang.Object-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#remove-java.lang.Object-&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So my expectation is that I get the value object stored in the value map, but the implementation returns an instance of JcrPropertyMapCacheEntry.&lt;/p&gt;

&lt;p&gt;Instead of returning this object the value from the internal valueCache should be returned.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13007954">SLING-6071</key>
            <summary>JcrModifiableValueMap#remove(key) breaks Map&lt;String, Object&gt; contract</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Sep 2016 15:29:13 +0000</created>
                <updated>Tue, 22 Nov 2016 10:41:55 +0000</updated>
                            <resolved>Tue, 27 Sep 2016 16:15:58 +0000</resolved>
                                    <version>JCR Resource 2.7.4</version>
                                    <fixVersion>JCR Resource 2.8.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15526525" author="githubbot" created="Tue, 27 Sep 2016 15:48:58 +0000"  >&lt;p&gt;GitHub user Buuhuu opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/175&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/175&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6071&quot; title=&quot;JcrModifiableValueMap#remove(key) breaks Map&amp;lt;String, Object&amp;gt; contract&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6071&quot;&gt;&lt;del&gt;SLING-6071&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;returned value of valueCache instead of the one from cache&lt;/li&gt;
	&lt;li&gt;added unti test for the remove method&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/Buuhuu/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Buuhuu/sling&lt;/a&gt; bugfix/&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6071&quot; title=&quot;JcrModifiableValueMap#remove(key) breaks Map&amp;lt;String, Object&amp;gt; contract&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6071&quot;&gt;&lt;del&gt;SLING-6071&lt;/del&gt;&lt;/a&gt;(2)&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/175.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/175.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #175&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9cdb8538c22af469b80aecc0076367cc71d91045&lt;br/&gt;
Author: Dirk Rudolph &amp;lt;dirk.rudolph@netcentric.biz&amp;gt;&lt;br/&gt;
Date:   2016-09-27T15:40:19Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6071&quot; title=&quot;JcrModifiableValueMap#remove(key) breaks Map&amp;lt;String, Object&amp;gt; contract&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6071&quot;&gt;&lt;del&gt;SLING-6071&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;returned value of valueCache instead of the one from cache&lt;/li&gt;
	&lt;li&gt;added unti test for the remove method&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15526615" author="kwin" created="Tue, 27 Sep 2016 16:15:58 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1762513&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1762513&lt;/a&gt;. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=diru&quot; class=&quot;user-hover&quot; rel=&quot;diru&quot;&gt;diru&lt;/a&gt; for the contribution.&lt;/p&gt;</comment>
                            <comment id="15552255" author="githubbot" created="Thu, 6 Oct 2016 15:38:25 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/175&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/175&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3457b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6069] Error: Multiple matches found for unary reference &apos;factory&apos; </title>
                <link>https://issues.apache.org/jira/browse/SLING-6069</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When starting with a simple test using a the special rs type ResourceResolverType.JCR_OAK&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FormularServiceTest {

    @Rule
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SlingContext slingContext = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlingContext(ResourceResolverType.JCR_OAK);

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testFormService() {
        FormularService formularService = slingContext.registerInjectActivateService(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FormularService());
        FormModel form = formularService.findFormByFormId(&lt;span class=&quot;code-quote&quot;&gt;&quot;331&quot;&lt;/span&gt;);
        Assert.assertNotNull(form);
    }
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I get the error &lt;/p&gt;

&lt;p&gt;org.apache.sling.testing.mock.osgi.ReferenceViolationException: Multiple matches found for unary reference &apos;factory&apos; for class de.htsolutions.formver.service.FormularService&lt;/p&gt;

&lt;p&gt;	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.injectServiceReference(OsgiServiceUtil.java:416)&lt;br/&gt;
	at org.apache.sling.testing.mock.osgi.OsgiServiceUtil.injectServices(OsgiServiceUtil.java:389)&lt;br/&gt;
	at org.apache.sling.testing.mock.osgi.MockOsgi.injectServices(MockOsgi.java:146)&lt;/p&gt;

&lt;p&gt;I debug the code and I find that the reason is that there are two resourceresolver in context not only one.&lt;/p&gt;

&lt;p&gt;What&apos;s the problem here? Is it a bug? Problem in setup?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13007897">SLING-6069</key>
            <summary>Error: Multiple matches found for unary reference &apos;factory&apos; </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="thodte">Christoph Thodte</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Sep 2016 12:03:49 +0000</created>
                <updated>Thu, 29 Sep 2016 15:34:01 +0000</updated>
                            <resolved>Thu, 29 Sep 2016 15:33:59 +0000</resolved>
                                    <version>Testing Sling Mock 2.1.0</version>
                    <version>Testing Sling Mock Oak 2.0.2</version>
                                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15533103" author="sseifert@pro-vision.de" created="Thu, 29 Sep 2016 15:34:01 +0000"  >&lt;p&gt;duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6077&quot; title=&quot;sling-mock: ResourceResolverFactory is registered twice&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6077&quot;&gt;&lt;del&gt;SLING-6077&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13008568">SLING-6077</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i344un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6064] Redirect servlet should encode url for redirecting</title>
                <link>https://issues.apache.org/jira/browse/SLING-6064</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The RedirectServlet is directly setting the location header (wondering why sendRedirect is not used instead?) however it is not encoding the URL (calling encodeRedirectURL). Therefore if query parameters are appended these are not encoded. According to the servlet spec, the url should be encoded before being passed to sendRedirect. I would assume the same applies to setting the header as it goes in there unmodified&lt;/p&gt;</description>
                <environment></environment>
        <key id="13006438">SLING-6064</key>
            <summary>Redirect servlet should encode url for redirecting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Sep 2016 09:09:06 +0000</created>
                <updated>Thu, 11 May 2017 19:33:33 +0000</updated>
                            <resolved>Fri, 24 Mar 2017 11:18:38 +0000</resolved>
                                    <version>Servlets Get 2.1.18</version>
                                    <fixVersion>Servlets Get 2.1.24</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15846877" author="ianeboston" created="Tue, 31 Jan 2017 14:13:59 +0000"  >&lt;p&gt;As agreed in very brief discussion, moving out to next version&lt;/p&gt;</comment>
                            <comment id="15940164" author="cziegeler" created="Fri, 24 Mar 2017 11:18:38 +0000"  >&lt;p&gt;Fixed in rev 1788408&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33vvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6063] plumber servlet doesn&apos;t persist changes anymore</title>
                <link>https://issues.apache.org/jira/browse/SLING-6063</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;since the writer enhancement, plumber&apos;s commit had disappeared, resulting in systematic unchanged resources&lt;/p&gt;</description>
                <environment></environment>
        <key id="13006300">SLING-6063</key>
            <summary>plumber servlet doesn&apos;t persist changes anymore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Sep 2016 20:26:39 +0000</created>
                <updated>Fri, 14 Oct 2016 08:07:50 +0000</updated>
                            <resolved>Wed, 21 Sep 2016 09:02:30 +0000</resolved>
                                                    <fixVersion>Pipes 0.0.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15507746" author="npeltier" created="Tue, 20 Sep 2016 20:45:31 +0000"  >&lt;p&gt;fixed in attached patch&lt;/p&gt;</comment>
                            <comment id="15509281" author="rombert" created="Wed, 21 Sep 2016 09:02:30 +0000"  >&lt;p&gt;Committed in &lt;a href=&quot;https://svn.apache.org/r1761699&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1761699&lt;/a&gt;, thanks for the patch!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12829446" name="SLING-6063.patch" size="7880" author="npeltier" created="Tue, 20 Sep 2016 20:45:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33v0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6055] Discovery: Use test scope for sling-mock dependency</title>
                <link>https://issues.apache.org/jira/browse/SLING-6055</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;currently the projects&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.sling.discovery.impl&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.sling.discovery.oak&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;include sling-mock oak with &quot;compile&quot; dependency. this should be &quot;test&quot; dependency.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13005154">SLING-6055</key>
            <summary>Discovery: Use test scope for sling-mock dependency</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sseifert">Stefan Seifert</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Sep 2016 12:56:40 +0000</created>
                <updated>Thu, 29 Sep 2016 15:00:14 +0000</updated>
                            <resolved>Thu, 15 Sep 2016 13:01:36 +0000</resolved>
                                    <version>Discovery Impl 1.2.8</version>
                    <version>Discovery Oak 1.2.10</version>
                                    <fixVersion>Discovery Impl 1.2.10</fixVersion>
                    <fixVersion>Discovery Oak 1.2.14</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="15493240" author="sseifert@pro-vision.de" created="Thu, 15 Sep 2016 13:01:38 +0000"  >&lt;p&gt;Completed: At revision: 1760925  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33nyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6054] JcrEventTrigger aggregation resulting in unconsistent package</title>
                <link>https://issues.apache.org/jira/browse/SLING-6054</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;JcrEventTrigger&lt;/tt&gt;&#160;aggregates generated &lt;tt&gt;DistributionRequests&lt;/tt&gt;&#160;in order to mitigate the risk of having badly ordered events result in distributions that may lead to unconsistent state of the receiving instance.&lt;br/&gt;
In case 2 nodes one of which is descendant of the others get aggregated in the same request the resulting package will only include siblings of the deep path with its names, not their properties, resulting in removing existing properties by the deep node&apos;s siblings on the receiving side.&lt;br/&gt;
I am not 100% sure this is a desired behaviour in FileVault, however since this may also affect custom serializers I think the right fix is to add the siblings&apos;s paths to such distribution requests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13005136">SLING-6054</key>
            <summary>JcrEventTrigger aggregation resulting in unconsistent package</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="teofili">Tommaso Teofili</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Sep 2016 10:17:42 +0000</created>
                <updated>Tue, 14 Feb 2017 09:30:53 +0000</updated>
                            <resolved>Tue, 18 Oct 2016 08:46:01 +0000</resolved>
                                    <version>Content Distribution Core 0.1.18</version>
                                    <fixVersion>Content Distribution Core 0.2.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15502915" author="teofili" created="Mon, 19 Sep 2016 09:53:25 +0000"  >&lt;p&gt;fixed in r1761073.&lt;/p&gt;</comment>
                            <comment id="15571978" author="teofili" created="Thu, 13 Oct 2016 13:50:14 +0000"  >&lt;p&gt;reopening as the previous fix works or not depending on the order of the incoming &lt;tt&gt;DistributionRequests&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15574959" author="teofili" created="Fri, 14 Oct 2016 10:51:19 +0000"  >&lt;p&gt;fixed the previous issue in r1764869.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33nuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6053] SlingAuthenticator identifies wrong sibling node with AuthenticationInfo</title>
                <link>https://issues.apache.org/jira/browse/SLING-6053</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Issue can be reproduced with the following steps:&lt;br/&gt;
    Create node &quot;/page&quot; &lt;br/&gt;
    Create sibling node &quot;/page1&quot;&lt;br/&gt;
    Define a protection handler for node: &quot;/page&quot;&lt;/p&gt;

&lt;p&gt;Expected: &lt;br/&gt;
            &quot;/page&quot; has AuthenticationInfo&lt;br/&gt;
             &quot;/page1&quot; does not have AuthenticationInfo (has anonymous)&lt;/p&gt;

&lt;p&gt;Actual:  &quot;/page&quot; &amp;amp; &quot;page1&quot; are both having AuthenticationInfo&lt;/p&gt;

&lt;p&gt;Reason: SlingAuthenticator.java line 726:  if (path.startsWith(holder.path)) Warning: The same check is used in 4 more places in code with similar behaviour.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13004583">SLING-6053</key>
            <summary>SlingAuthenticator identifies wrong sibling node with AuthenticationInfo</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="mkbrv">Miklos Csere</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Sep 2016 13:07:48 +0000</created>
                <updated>Mon, 15 May 2017 14:37:01 +0000</updated>
                            <resolved>Wed, 10 May 2017 09:02:01 +0000</resolved>
                                    <version>Auth Core 1.3.18</version>
                                    <fixVersion>Auth Core 1.3.26</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15487165" author="mkbrv" created="Tue, 13 Sep 2016 13:09:58 +0000"  >&lt;p&gt;From what I understand the path is checked using String.startsWith because also child nodes should be protected.&lt;/p&gt;

&lt;p&gt;This does not take into consideration the case when there is a sibling node with a path that starts the same. &lt;br/&gt;
Eg: /content/page &amp;amp;&amp;amp; /content/page1 &lt;/p&gt;

&lt;p&gt;I have created the following tests in SlingAuthenticatorTest class: &lt;a href=&quot;http://pastebin.com/8fzseKLY&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://pastebin.com/8fzseKLY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;test_siblingNodeShouldNotHaveAuthenticationInfo --&amp;gt; Fails due to reported issue&lt;br/&gt;
test_childNodeShouldHaveAuthenticationInfo         --&amp;gt; Test is ok for above presented case.&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;

   /**
     * Test is KO, not working.
     *
     * Issue can be reproduced with the following steps:
     *
     * Create node &lt;span class=&quot;code-quote&quot;&gt;&quot;/page&quot;&lt;/span&gt;
     * Create sibling node &lt;span class=&quot;code-quote&quot;&gt;&quot;/page1&quot;&lt;/span&gt;
     * Define an auth handler &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; node: &lt;span class=&quot;code-quote&quot;&gt;&quot;/page&quot;&lt;/span&gt;
     *
     * Expected: &lt;span class=&quot;code-quote&quot;&gt;&quot;/page&quot;&lt;/span&gt; has AuthenticationInfo
     *           &lt;span class=&quot;code-quote&quot;&gt;&quot;/page1&quot;&lt;/span&gt; does not have AuthenticationInfo (has anonymous)
     *
     * Actual:  &lt;span class=&quot;code-quote&quot;&gt;&quot;/page&quot;&lt;/span&gt; &amp;amp; &lt;span class=&quot;code-quote&quot;&gt;&quot;page1&quot;&lt;/span&gt; are both having AuthenticationInfo
     *
     * Reason: SlingAuthenticator.java line 726:  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path.startsWith(holder.path))
     * Warning: The same check is used in 4 more places in code with similar behaviour.
     *
     * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Throwable
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test_siblingNodeShouldNotHaveAuthenticationInfo() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Throwable {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; AUTH_TYPE = &lt;span class=&quot;code-quote&quot;&gt;&quot;AUTH_TYPE_TEST&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; PROTECTED_PATH = &lt;span class=&quot;code-quote&quot;&gt;&quot;/test&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; REQUEST_NOT_PROTECTED_PATH = &lt;span class=&quot;code-quote&quot;&gt;&quot;/test2&quot;&lt;/span&gt;;

        SlingAuthenticator slingAuthenticator = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlingAuthenticator();

        PathBasedHolderCache&amp;lt;AbstractAuthenticationHandlerHolder&amp;gt; authRequiredCache = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PathBasedHolderCache&amp;lt;AbstractAuthenticationHandlerHolder&amp;gt;();
        authRequiredCache.addHolder(buildAuthHolderForAuthTypeAndPath(AUTH_TYPE, PROTECTED_PATH));

        PrivateAccessor.setField(slingAuthenticator, &lt;span class=&quot;code-quote&quot;&gt;&quot;authHandlerCache&quot;&lt;/span&gt;, authRequiredCache);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HttpServletRequest request = context.mock(HttpServletRequest.class);
        buildExpectationsForRequestPathAndAuthPath(request, REQUEST_NOT_PROTECTED_PATH, PROTECTED_PATH);

        AuthenticationInfo authInfo = (AuthenticationInfo) PrivateAccessor.invoke(slingAuthenticator, &lt;span class=&quot;code-quote&quot;&gt;&quot;getAuthenticationInfo&quot;&lt;/span&gt;,
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;[]{HttpServletRequest.class, HttpServletResponse.class}, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[]{request, context.mock(HttpServletResponse.class)});
        /**
         * The AUTH TYPE defined aboved should not be used &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the path /test2.
         */
        assertFalse(AUTH_TYPE.equals(authInfo.getAuthType()));
    }

    /**
     * Test is OK &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; child node;
     * @&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Throwable
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void test_childNodeShouldHaveAuthenticationInfo() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Throwable {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; AUTH_TYPE = &lt;span class=&quot;code-quote&quot;&gt;&quot;AUTH_TYPE_TEST&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; PROTECTED_PATH = &lt;span class=&quot;code-quote&quot;&gt;&quot;/test&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; REQUEST_CHILD_NODE = &lt;span class=&quot;code-quote&quot;&gt;&quot;/test/childnodetest&quot;&lt;/span&gt;;

        SlingAuthenticator slingAuthenticator = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlingAuthenticator();

        PathBasedHolderCache&amp;lt;AbstractAuthenticationHandlerHolder&amp;gt; authRequiredCache = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PathBasedHolderCache&amp;lt;AbstractAuthenticationHandlerHolder&amp;gt;();
        authRequiredCache.addHolder(buildAuthHolderForAuthTypeAndPath(AUTH_TYPE, PROTECTED_PATH));

        PrivateAccessor.setField(slingAuthenticator, &lt;span class=&quot;code-quote&quot;&gt;&quot;authHandlerCache&quot;&lt;/span&gt;, authRequiredCache);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HttpServletRequest request = context.mock(HttpServletRequest.class);
        buildExpectationsForRequestPathAndAuthPath(request, REQUEST_CHILD_NODE, PROTECTED_PATH);

        AuthenticationInfo authInfo = (AuthenticationInfo) PrivateAccessor.invoke(slingAuthenticator, &lt;span class=&quot;code-quote&quot;&gt;&quot;getAuthenticationInfo&quot;&lt;/span&gt;,
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;[]{HttpServletRequest.class, HttpServletResponse.class}, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[]{request, context.mock(HttpServletResponse.class)});
        /**
         * The AUTH TYPE defined aboved should  be used &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the path /test and his children: eg /test/childnode.
         */
        assertTrue(AUTH_TYPE.equals(authInfo.getAuthType()));
    }

    /**
     * Mocks the request to accept method calls on path;
     *
     * @param request              http request
     * @param requestPath          path in the http request
     * @param authProtectedPath    path &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; by the auth handler
     */
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void buildExpectationsForRequestPathAndAuthPath(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; HttpServletRequest request,
                                                            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; requestPath,
                                                            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; authProtectedPath) {
        {
            context.checking(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Expectations() {
                {
                    allowing(request).getServletPath();
                    will(returnValue(requestPath));
                    allowing(request).getPathInfo();
                    will(returnValue(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;));
                    allowing(request).getServerName();
                    will(returnValue(&lt;span class=&quot;code-quote&quot;&gt;&quot;localhost&quot;&lt;/span&gt;));
                    allowing(request).getServerPort();
                    will(returnValue(80));
                    allowing(request).getScheme();
                    will(returnValue(&lt;span class=&quot;code-quote&quot;&gt;&quot;http&quot;&lt;/span&gt;));
                    allowing(request).getAttribute(&lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt;);
                    will(returnValue(requestPath));
                    allowing(request).setAttribute(&lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt;, requestPath);
                    allowing(request).setAttribute(&lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt;, authProtectedPath);
                }
            });
        }
    }


    /**
     * Builds an auth handler &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; a specific path;
     * @param authType             name of the auth &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; path
     * @param authProtectedPath    path &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; by the auth handler
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;
     */
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; AbstractAuthenticationHandlerHolder buildAuthHolderForAuthTypeAndPath(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; authType, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; authProtectedPath) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AbstractAuthenticationHandlerHolder(authProtectedPath, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {

            @Override
            &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; AuthenticationFeedbackHandler getFeedbackHandler() {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            }

            @Override
            &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; AuthenticationInfo doExtractCredentials(HttpServletRequest request, HttpServletResponse response) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AuthenticationInfo(authType);
            }

            @Override
            &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; doRequestCredentials(HttpServletRequest request, HttpServletResponse response) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
            }

            @Override
            &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void doDropCredentials(HttpServletRequest request, HttpServletResponse response) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {

            }
        };
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15487297" author="githubbot" created="Tue, 13 Sep 2016 14:06:12 +0000"  >&lt;p&gt;GitHub user mkbrv opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/172&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Bug/sling 6053 slingauthenticator wrong sibling node&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6053&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-6053&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mkbrv/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mkbrv/sling&lt;/a&gt; bug/&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6053&quot; title=&quot;SlingAuthenticator identifies wrong sibling node with AuthenticationInfo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6053&quot;&gt;&lt;del&gt;SLING-6053&lt;/del&gt;&lt;/a&gt;-slingauthenticator-wrong-sibling-node&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/172.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/172.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #172&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 396542fe8602f347ae257881dd6a3fa36ec688fb&lt;br/&gt;
Author: Miklos Csere &amp;lt;miklos.csere@netcentric.biz&amp;gt;&lt;br/&gt;
Date:   2016-09-13T13:18:25Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6053&quot; title=&quot;SlingAuthenticator identifies wrong sibling node with AuthenticationInfo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6053&quot;&gt;&lt;del&gt;SLING-6053&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
    SlingAuthenticator identifies wrong sibling node with AuthenticationInfo&lt;/p&gt;

&lt;p&gt;commit 424e4124a864a990ed02650b0c1993a7bce3f22f&lt;br/&gt;
Author: Miklos Csere &amp;lt;miklos.csere@netcentric.biz&amp;gt;&lt;br/&gt;
Date:   2016-09-13T14:03:54Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6053&quot; title=&quot;SlingAuthenticator identifies wrong sibling node with AuthenticationInfo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6053&quot;&gt;&lt;del&gt;SLING-6053&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
    SlingAuthenticator identifies wrong sibling node with AuthenticationInfo  - solution with test coverage.&lt;/p&gt;

&lt;p&gt;commit c9b687d4f27ea060125d666191748d86600e059f&lt;br/&gt;
Author: Miklos Csere &amp;lt;miklos.csere@netcentric.biz&amp;gt;&lt;br/&gt;
Date:   2016-09-13T14:05:38Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6053&quot; title=&quot;SlingAuthenticator identifies wrong sibling node with AuthenticationInfo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6053&quot;&gt;&lt;del&gt;SLING-6053&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
    SlingAuthenticator identifies wrong sibling node with AuthenticationInfo  - solution with test coverage.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15490193" author="kwin" created="Wed, 14 Sep 2016 11:32:38 +0000"  >&lt;p&gt;I am not sure this is the correct patch. You also have to take into account selectors and extensions. As I have said in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-4701?focusedCommentId=14987147&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14987147&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-4701?focusedCommentId=14987147&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14987147&lt;/a&gt; any changes here would be backwards incompatible. Please check the documentation in &lt;a href=&quot;https://sling.apache.org/documentation/the-sling-engine/authentication/authentication-framework.html#anonymous-login&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/the-sling-engine/authentication/authentication-framework.html#anonymous-login&lt;/a&gt; about the format. It now explicitly says:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The requests path (HttpServletRequest.getServletPath() + HttpServletRequest.getPathInfo()) is afterwards matched against the given paths. It matches if it starts with one of the given paths.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Your patch would modify that logic. I am not 100% sure the old way really is the best approach and which cases are more common. But in fact we only compare against request paths and a startsWith matching makes sense, if you want to consider all the different selectors. When we would apply your patch the documentation for sure needs to be updated as well, because it no longer is a &lt;tt&gt;startsWith&lt;/tt&gt; semantic.&lt;/p&gt;</comment>
                            <comment id="15882564" author="asanso" created="Fri, 24 Feb 2017 12:25:59 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkbrv&quot; class=&quot;user-hover&quot; rel=&quot;mkbrv&quot;&gt;mkbrv&lt;/a&gt;. I will take a look. &lt;/p&gt;</comment>
                            <comment id="15882611" author="asanso" created="Fri, 24 Feb 2017 12:53:54 +0000"  >&lt;p&gt;Thanks  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkbrv&quot; class=&quot;user-hover&quot; rel=&quot;mkbrv&quot;&gt;mkbrv&lt;/a&gt; . So far I applied your test cases in  r1784273. Putting one for now with &lt;tt&gt;@Ignore&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15885551" author="asanso" created="Mon, 27 Feb 2017 10:47:54 +0000"  >&lt;p&gt;Attaching proposing patch. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; WDYT? &lt;/p&gt;</comment>
                            <comment id="15885587" author="kwin" created="Mon, 27 Feb 2017 11:06:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asanso&quot; class=&quot;user-hover&quot; rel=&quot;asanso&quot;&gt;asanso&lt;/a&gt; The patch is only a heuristic and does not work for all cases. Just imagine the following use case&lt;br/&gt;
&lt;tt&gt;resource1&lt;/tt&gt; requires authentication&lt;br/&gt;
&lt;tt&gt;resource1.test2&lt;/tt&gt; does not require authentication&lt;br/&gt;
In that case the latter would also be covered by your logic in &lt;tt&gt;isNodeRequiresAuthHandler&lt;/tt&gt; which returns &lt;tt&gt;true&lt;/tt&gt; but in fact it should not.&lt;/p&gt;

&lt;p&gt;I am not sure, whether that behavior is better or worse than before. (Better because it will for most of the cases work as expected, worse, because it is even harder to document the behavior for resource names containing &quot;.&quot; itself).&lt;/p&gt;

&lt;p&gt;The problem is that with just having the request URL String you cannot tell, what is a selector and what belongs to the resource&apos;s name.&lt;/p&gt;

&lt;p&gt;Also the import to &lt;tt&gt;import javax.crypto.spec.OAEPParameterSpec&lt;/tt&gt; seems wrong in the patch.&lt;/p&gt;</comment>
                            <comment id="15885603" author="asanso" created="Mon, 27 Feb 2017 11:18:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; I need to check but I think that &lt;tt&gt;findApplicableHolders&lt;/tt&gt; returns a sorted &lt;tt&gt;Collection&lt;/tt&gt; ordered by length.&lt;br/&gt;
Hence the problem you mentioned should not occur right?&lt;br/&gt;
Thanks about the wrong import . I will remove it..&lt;/p&gt;</comment>
                            <comment id="15885681" author="asanso" created="Mon, 27 Feb 2017 12:19:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; I did double check and it really looks like &lt;tt&gt;findApplicableHolders&lt;/tt&gt; returns a sorted Collection ordered by length.&lt;br/&gt;
This should avoid completely the problem you describe. Unless I am missing something... Thanks so far!&lt;/p&gt;</comment>
                            <comment id="16000354" author="asanso" created="Mon, 8 May 2017 07:11:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; I&apos;d be inclined to apply this patch. Would you be fine with it ?&lt;/p&gt;</comment>
                            <comment id="16000473" author="kwin" created="Mon, 8 May 2017 09:05:43 +0000"  >&lt;p&gt;Fine by me, just don&apos;t forget to also adjust &lt;a href=&quot;https://sling.apache.org/documentation/the-sling-engine/authentication/authentication-framework.html#anonymous-login&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/the-sling-engine/authentication/authentication-framework.html#anonymous-login&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16002438" author="asanso" created="Tue, 9 May 2017 10:18:52 +0000"  >&lt;p&gt;applied patch in rev. 1794520 applied test patch from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mkbrv&quot; class=&quot;user-hover&quot; rel=&quot;mkbrv&quot;&gt;mkbrv&lt;/a&gt; in rev 1794522. Thanks!!&lt;/p&gt;</comment>
                            <comment id="16002451" author="githubbot" created="Tue, 9 May 2017 10:32:45 +0000"  >&lt;p&gt;Github user mkbrv closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/172&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16004335" author="asanso" created="Wed, 10 May 2017 08:54:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwindszus&quot; class=&quot;user-hover&quot; rel=&quot;kwindszus&quot;&gt;kwindszus&lt;/a&gt; I added a test that covers your scenario in rev. 1794688&lt;/p&gt;</comment>
                            <comment id="16004357" author="kwin" created="Wed, 10 May 2017 09:19:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asanso&quot; class=&quot;user-hover&quot; rel=&quot;asanso&quot;&gt;asanso&lt;/a&gt; IIUC then &lt;a href=&quot;https://github.com/apache/sling/commit/e78b6b0c6f3ca85d4c21440b45dca6fe02345942#diff-b4de7814d0639d73de908946d425e8f1R246&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/commit/e78b6b0c6f3ca85d4c21440b45dca6fe02345942#diff-b4de7814d0639d73de908946d425e8f1R246&lt;/a&gt; only tests where both  &lt;tt&gt;/resource1&lt;/tt&gt; and &lt;tt&gt;/resource1.test&lt;/tt&gt; have an AuthenticationInfo bound.&lt;/p&gt;

&lt;p&gt;But my use case is different. I only have set an AuthenticationInfo to &lt;tt&gt;/resource1&lt;/tt&gt; and none set on &lt;tt&gt;/resource1.test&lt;/tt&gt;. Still I assume that with your fix &lt;tt&gt;//resource1.test&lt;/tt&gt; would be covered by the AuthenticationInfo set for &lt;tt&gt;/resource1&lt;/tt&gt;. Isn&apos;t that right?&lt;/p&gt;</comment>
                            <comment id="16004373" author="asanso" created="Wed, 10 May 2017 09:27:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; well I wonder how would be the setting in your use case. If you need to have &lt;tt&gt;/resource1.test&lt;/tt&gt; that does not require authentication you need to specify (the default is that unless specified everything does require authentication)&lt;/p&gt;</comment>
                            <comment id="16004383" author="kwin" created="Wed, 10 May 2017 09:31:03 +0000"  >&lt;p&gt;Then the other way round, lets say &lt;tt&gt;/&lt;/tt&gt; requires authentication and &lt;tt&gt;resource1&lt;/tt&gt; does not require authentication. No other authentication configuration is set in the system. Then the AuthenticationHolder (not requiring authentication) applicable for &lt;tt&gt;/resource1&lt;/tt&gt; does also apply for its sibling resource &lt;tt&gt;/resource1.test&lt;/tt&gt; which is not intended.&lt;/p&gt;</comment>
                            <comment id="16004423" author="asanso" created="Wed, 10 May 2017 09:59:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;. Then the AuthenticationHolder (not requiring authentication) applicable for /resource1 does also apply for its sibling resource /resource1.test which is not intended.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;AFAIK it will not.... &lt;/p&gt;</comment>
                            <comment id="16004498" author="kwin" created="Wed, 10 May 2017 11:21:08 +0000"  >&lt;p&gt;But &lt;tt&gt;isNodeRequiresAuthHandler(&quot;/resource1.test.html&quot;, &quot;/resource1&quot;)&lt;/tt&gt; returns true, which is not intended if there is a resource named &quot;/resource1.test&quot;.&lt;/p&gt;</comment>
                            <comment id="16004521" author="asanso" created="Wed, 10 May 2017 11:40:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; you probably you might want to give a look at my previous comment &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6053?focusedCommentId=15885603&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15885603&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-6053?focusedCommentId=15885603&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15885603&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16004535" author="kwin" created="Wed, 10 May 2017 11:50:00 +0000"  >&lt;p&gt;But in my example there are only two applicable holders: &lt;br/&gt;
One which requires authentication for &quot;/&quot; and one which does not require authentication for &quot;/resource1&quot;. &lt;/p&gt;

&lt;p&gt;Therefore the longest match for &quot;/resource1.test.html&quot; is &quot;/resource1&quot;. But actually the resource &quot;/resource1&quot; and &quot;/resource1.test&quot; are siblings! Still the authentication requirement for &quot;resource1&quot; is applied which is IMHO not intended! &lt;/p&gt;

&lt;p&gt;I don&apos;t see a good way to resolve that without using the resource resolver.&lt;/p&gt;</comment>
                            <comment id="16004543" author="asanso" created="Wed, 10 May 2017 11:56:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; gotcha now. Sorry if it took so long.&lt;/p&gt;</comment>
                            <comment id="16004561" author="asanso" created="Wed, 10 May 2017 12:08:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; said that the committed patch and the current behavior are both heurstic.&lt;br/&gt;
IMHO the current behavior is way worse then the one I proposed in my patch and you seemed to agree in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6053?focusedCommentId=16000473&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16000473&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-6053?focusedCommentId=16000473&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16000473&lt;/a&gt; . &lt;/p&gt;</comment>
                            <comment id="16004565" author="asanso" created="Wed, 10 May 2017 12:11:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;on top&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Therefore the longest match for &quot;/resource1.test.html&quot; is &quot;/resource1&quot;. But actually the resource &quot;/resource1&quot; and &quot;/resource1.test&quot; are siblings! Still the authentication requirement for &quot;resource1&quot; is applied which is IMHO not intended! &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This would also happen in the current behavior. The difference is that the new behavior will save more scenarios (see my committed tests)&lt;/p&gt;</comment>
                            <comment id="16004589" author="kwin" created="Wed, 10 May 2017 12:19:51 +0000"  >&lt;p&gt;Yes right, but the current behaviour is more complicated to describe.The previous one was just a prefix (request) path matching. Now there is a heuristic which tries to determine the resource path from the request path by ignoring the parts after the first &quot;.&quot;. This is invalid (in case the resource name includes a &quot;.&quot; itself). I would propose to investigate whether the resource resolver can be leveraged here to really determine the correct resource path from the given request path.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13045979">SLING-6563</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12828021">SLING-4701</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12854870" name="SLING-6053-patch.txt" size="14319" author="asanso" created="Mon, 27 Feb 2017 10:47:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 25 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33kfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6052] Broken impersonation</title>
                <link>https://issues.apache.org/jira/browse/SLING-6052</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The fix in introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5625&quot; title=&quot;Unable to impersonate user with surrogate pair character&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5625&quot;&gt;&lt;del&gt;SLING-5625&lt;/del&gt;&lt;/a&gt; broke the impersonation in case where the username contains the @ character.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13004555">SLING-6052</key>
            <summary>Broken impersonation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Sep 2016 10:48:01 +0000</created>
                <updated>Wed, 14 Sep 2016 06:14:13 +0000</updated>
                            <resolved>Wed, 14 Sep 2016 06:14:12 +0000</resolved>
                                                    <fixVersion>Auth Core 1.3.20</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15489553" author="asanso" created="Wed, 14 Sep 2016 06:14:13 +0000"  >&lt;p&gt;fixed in r 1760635&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33k9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6047] SlingResourceTemplateResolver allows template resolution with decoupled logic enabled for non-markup template modes</title>
                <link>https://issues.apache.org/jira/browse/SLING-6047</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;decoupled logic can be used only with markup-based template modes&lt;/p&gt;</description>
                <environment></environment>
        <key id="13003710">SLING-6047</key>
            <summary>SlingResourceTemplateResolver allows template resolution with decoupled logic enabled for non-markup template modes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Sep 2016 22:32:30 +0000</created>
                <updated>Mon, 20 Mar 2017 22:19:39 +0000</updated>
                            <resolved>Thu, 8 Sep 2016 22:38:10 +0000</resolved>
                                    <version>Scripting Thymeleaf 1.0.0</version>
                                    <fixVersion>Scripting Thymeleaf 1.1.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15475225" author="olli" created="Thu, 8 Sep 2016 22:38:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1759921&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1759921&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33f1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6046] While Streaming Video to IE 11, StreamRendererServlet do not use Partial Content Response [code 206]</title>
                <link>https://issues.apache.org/jira/browse/SLING-6046</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Since IE 11 expects &quot;Accept-Ranges&quot; &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; response header to start making requests with Range header, so sling lack in streaming of video content for IE end users. We can add Accept-Ranges = bytes header to response , either selectively only for video/mp4 mimetype ( video tag on IE looks for mp4 )  or always.&lt;/p&gt;

&lt;p&gt;Without support of partial content response (206) for IE users, all large video files are being downloaded in single chunk and user need to wait for long to see video content playing. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://stackoverflow.com/questions/25654422/http-pseudo-streaming-in-ie11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/25654422/http-pseudo-streaming-in-ie11&lt;/a&gt; &lt;/p&gt;
</description>
                <environment></environment>
        <key id="13003534">SLING-6046</key>
            <summary>While Streaming Video to IE 11, StreamRendererServlet do not use Partial Content Response [code 206]</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ianeboston">Ian Boston</assignee>
                                    <reporter username="ashokpanghal">Ashok Kumar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Sep 2016 10:34:21 +0000</created>
                <updated>Tue, 14 Feb 2017 00:03:32 +0000</updated>
                            <resolved>Mon, 9 Jan 2017 13:06:01 +0000</resolved>
                                    <version>Servlets Get 2.1.18</version>
                                    <fixVersion>Servlets Get 2.1.20</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="15473516" author="ashokpanghal" created="Thu, 8 Sep 2016 10:36:37 +0000"  >&lt;p&gt;Patch attached to ensure StreamRendererServlet sends &quot;Accept-Ranges&quot; header for video/mp4 contenttype to ensure smooth streaming on IE for large files. &lt;/p&gt;</comment>
                            <comment id="15476884" author="shgupta" created="Fri, 9 Sep 2016 11:51:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; any opinion why &lt;tt&gt;Accept-Ranges:bytes&lt;/tt&gt; is not sent in response. StreamRenderServlet is capable to send content-range. &lt;/p&gt;</comment>
                            <comment id="15476897" author="reschke" created="Fri, 9 Sep 2016 11:57:58 +0000"  >&lt;p&gt;It&apos;s probably not sent because it doesn&apos;t have to.&lt;/p&gt;

&lt;p&gt;Does &quot;Microsoft Edge&quot; show the same behavior?&lt;/p&gt;</comment>
                            <comment id="15484268" author="ashokpanghal" created="Mon, 12 Sep 2016 14:25:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt; , For other browsers its not required but IE and edge both wait for this response header before making requests with Range header. Below is excerpt sent by customer &lt;br/&gt;
---------------------------------&lt;br/&gt;
&quot;and alongside I have also reproduced the problem with Microsoft Edge. That would imply a large number of browsers not supporting partial content.&quot;&lt;br/&gt;
------------------------------------&lt;/p&gt;</comment>
                            <comment id="15484292" author="reschke" created="Mon, 12 Sep 2016 14:32:18 +0000"  >&lt;p&gt;a) I&apos;d ask Microsoft for feedback, also&lt;/p&gt;

&lt;p&gt;b) I&apos;d recommend not to hardwire the type &quot;video/mp4&quot;. Why not all video types?&lt;/p&gt;</comment>
                            <comment id="15484402" author="shgupta" created="Mon, 12 Sep 2016 15:20:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;&lt;br/&gt;
&amp;gt;Why not all video types?&lt;br/&gt;
shouldn&apos;t this header is sent for all cases..&lt;/p&gt;</comment>
                            <comment id="15484477" author="ashokpanghal" created="Mon, 12 Sep 2016 15:56:24 +0000"  >&lt;p&gt;Patch I attached is just to validate the issue , so specific to video/mp4 check. Agree with Shashank, Ideally we should send this header all the time so that any (mime-type) large file download request can be broken down into partial response for IE users. if all agree , I can attach new patch file.&lt;/p&gt;</comment>
                            <comment id="15486994" author="ianeboston" created="Tue, 13 Sep 2016 11:42:37 +0000"  >&lt;p&gt;Some questions:&lt;br/&gt;
Is it just video/mp4 that matter or all large files ?&lt;br/&gt;
Does IE use the response from other resources to determine if it can send a range header on the first request for the large file ?&lt;/p&gt;

&lt;p&gt;Patch looks fine, I am wondering if serving these files via the JVM is the right thing to do and if it would not be better to have proper X-sendfile support protected by appropriate AuthZ.&lt;/p&gt;

&lt;p&gt;IIRC Sling uses Jetty that will transfer files using http chunked transfer encoding &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, provided no content-length header is sent in the response and the output stream is flushed at appropriate moments.  If the transfer encoding is chunked, how does the video play in IE11, I realise the transfer will start from the beginning and there wont be support for fast forward, but will the video start playing immediately ?&lt;/p&gt;


&lt;p&gt;1 &lt;a href=&quot;https://en.wikipedia.org/wiki/Chunked_transfer_encoding&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/Chunked_transfer_encoding&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15489975" author="ashokpanghal" created="Wed, 14 Sep 2016 09:46:36 +0000"  >&lt;p&gt;Attached is a sample html file with a video component having mp4 file get  streamed from  an S3 server with Partial Download response on IE browser.&lt;/p&gt;</comment>
                            <comment id="15490035" author="ashokpanghal" created="Wed, 14 Sep 2016 10:09:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ianeboston&quot; class=&quot;user-hover&quot; rel=&quot;ianeboston&quot;&gt;ianeboston&lt;/a&gt; We should send this header for all requests if we do not find a reason not to send it with all responses. Large File download requires download managers to support resume able downloads , only possible if sling supports true Byte Serving. E.g. sites like dropbox, google drive always sends partial response for heavy content stored in cloud. &lt;/p&gt;

&lt;p&gt;As you rightly said chunk transfer encoding does not support fast forwarding and user always end up downloading entire mp4 file but in chunks. whereas byte serving is by definition is to support streaming of area of interests , which is more powerful feature in case of videos where user wants to skip timelines. I was not sure if sending Accept-Range header with all responses from sling would be conflicting with other response-headers or not, so I did a patch only for video/mp4 format which gets played on MS browsers. I am in agreement to Julian&apos;s suggestion of putting it for all &quot;video/*&quot; as an interim relief to video consumers. &lt;/p&gt;

&lt;p&gt;CC: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shgupta&quot; class=&quot;user-hover&quot; rel=&quot;shgupta&quot;&gt;shgupta&lt;/a&gt; , &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=julian.reschke%40gmx.de&quot; class=&quot;user-hover&quot; rel=&quot;julian.reschke@gmx.de&quot;&gt;julian.reschke@gmx.de&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="15490071" author="ianeboston" created="Wed, 14 Sep 2016 10:23:23 +0000"  >&lt;p&gt;Could you share a the request and response for the very first request for the Video in IE please ?&lt;br/&gt;
In Chrome it loads the html file, and the very first response which doesnt know anything about the server is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Accept:*/*
Accept-Encoding:identity;q=1, *;q=0
Accept-Language:en-US,en;q=0.8,pt;q=0.6
Cache-Control:no-cache
Connection:keep-alive
Host:tautils.s3.amazonaws.com
Pragma:no-cache
Range:bytes=0-
User-Agent:Mozilla/5.0 ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then the response is &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Accept-Ranges:bytes
Age:1
Connection:keep-alive
Content-Length:44811898
Content-Range:bytes 0-44811897/44811898
Content-Type:video/mp4
Date:Wed, 14 Sep 2016 10:12:10 GMT
ETag:&lt;span class=&quot;code-quote&quot;&gt;&quot;48217968ec2776736bc806334f3846a0&quot;&lt;/span&gt;
Last-Modified:Tue, 06 Sep 2016 15:04:00 GMT
Server:AmazonS3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I am interested in what IE does as it won&apos;t have a Accept: bytes header when it makes its first and only request to the S3 server. Using the Chrome request saves as curl and dropping the range header indicates the S3 server will respond with the full response leaving IE in a catch 22 situation. If it does a GET first, with no range header it will get the whole file. It might be able to send a HEAD first to check or it could drop the connection early and resubmit with a range header. Which does it do ?  &lt;/p&gt;</comment>
                            <comment id="15492383" author="ashokpanghal" created="Thu, 15 Sep 2016 04:59:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ianeboston&quot; class=&quot;user-hover&quot; rel=&quot;ianeboston&quot;&gt;ianeboston&lt;/a&gt; , Attached is the network data for IE requests made for attached html file. &lt;br/&gt;
1st Request - For html file at local disk&lt;br/&gt;
2nd Request - Blank request for mp4 video url with no request method, response is aborted. No clue what kind of request this is&lt;br/&gt;
3rd request - GET request for mp4 video , response comes as 200 with Accept-Ranges header = bytes.&lt;br/&gt;
4th Request - GET request with Range request header this time and response comes as 206 &lt;br/&gt;
......... and it goes on till entire mp4 gets streamed. &lt;/p&gt;</comment>
                            <comment id="15492604" author="ianeboston" created="Thu, 15 Sep 2016 07:07:08 +0000"  >&lt;p&gt;The second request was a full GET that was aborted, probably by closing the connection, when the Accept: bytes header was sent. Although this might be a spec compliant behaviour is is a poor way of dealing with the issue. IE11 should send the Range: header in the first instance. &lt;a href=&quot;https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html&lt;/a&gt; section 14.5. states clients MAY send a Range header before the Accept: bytes header is send. Only when a Accept: none header is sent must they not send a Range header. Section 14.35 of the specification allows for a Range: 0- header to be sent which allows the server to respond with the full body if it doesn&apos;t support Range headers, or the first n bytes if it does. This is the correct behaviour. The consensus is MS wont be fixing IE11 and if the same bug exists in in Edge they wont fix it there either as the spec can be interpreted either way. &lt;/p&gt;

&lt;p&gt;From a Sling point of view the aborted request may cause problems, as, depending on the Oak DataStore in use resources may have been allocated when the request is aborted. If every large file request gets aborted first time due to the Accept: bytes header being added, and those resources are allocated through the http serving stream, then this patch as it stands may cause problems for production deployments os Sling/AEM.&lt;/p&gt;

&lt;p&gt;Section 14.35 of the spec appears to allow a Partial content (206) response with a Content-Range header to any response the server deems fit, rather than responding with Accept: range.&lt;/p&gt;

&lt;p&gt;Proposal:&lt;/p&gt;

&lt;p&gt;Sling should look at the content length of a resource. If that content length is &amp;gt; a configured size it should send a 206 partial content with a Content-Range header to all responses, even those with no Range header in the request. Where there is a Range header in the request, it should respond as that header instructs according to the specification.&lt;/p&gt;

&lt;p&gt;wdyt ? Can you do a patch to cover that ?&lt;/p&gt;

&lt;p&gt;This will avoid the first request being aborted, assuming IE11 is spec compliant to 206 responses that it did not explicitly request. You might have to experiment with the size of the first response as IE11 appears to be asking for 100K at a time which seems low.&lt;/p&gt;</comment>
                            <comment id="15492683" author="reschke" created="Thu, 15 Sep 2016 07:53:56 +0000"  >&lt;p&gt;a) RFC 2616 is truly irrelevant; you should have a look at RFC 7233.&lt;/p&gt;

&lt;p&gt;b) If we believe that Microsoft&apos;s implementation can be improved (although currently not broken), we should make the case and tell Microsoft about it.&lt;/p&gt;

&lt;p&gt;c) Sending a 206 response although the client didn&apos;t ask for partial content might work but is certainly outside the spec (support for range requests is truly optional after all). It might work with browsers in practice, but could fail with other clients.&lt;/p&gt;</comment>
                            <comment id="15492843" author="ianeboston" created="Thu, 15 Sep 2016 09:17:53 +0000"  >&lt;p&gt;a) thank you for the pointer to RFC 7233, although I can see some clarifications I can&apos;t see a significant rewrite of Range handling relative to RFC 2616 which iirc was the original http 1.1 spec. &lt;br/&gt;
b) Won&apos;t MS say its the servers problem to deal with broken streams ? imho thats true, and we need to do that as well.&lt;br/&gt;
c) I agree, just looked at the definition of 206 which states &quot;The request MUST have included a Range header field ...&quot; so would probably not work.&lt;/p&gt;

&lt;p&gt;Based on that Sling, the patch is Ok and we have to deal with the resource consumption caused by the broken stream.&lt;/p&gt;</comment>
                            <comment id="15492898" author="reschke" created="Thu, 15 Sep 2016 09:54:51 +0000"  >&lt;p&gt;a) FWIW, the original spec was RFC 2068.&lt;/p&gt;

&lt;p&gt;b) Yes, it&apos;s up to the server, but that doesn&apos;t mean that clients shouldn&apos;t avoid to break the streams in the first place... (Q: is this still relevant with HTTP/2 anyway???)&lt;/p&gt;
</comment>
                            <comment id="15515994" author="reschke" created="Fri, 23 Sep 2016 09:51:14 +0000"  >&lt;p&gt;FWIW, IE&apos;s behavior might be caused by a (misinformed) requirement from the DLNA spec:&lt;/p&gt;

&lt;p&gt;&quot;11.4.3.22.8  &lt;span class=&quot;error&quot;&gt;&amp;#91;GUIDELINE&amp;#93;&lt;/span&gt; If the Content Source does not indicate support for the Range HTTP header for a content binary (as defined in guidelines 10.1.3.20.1 and 10.1.3.28.4), then the HTTP Client Endpoint shall not issue HTTP GET and HEAD requests with the Range HTTP header.&quot;&lt;/p&gt;


</comment>
                            <comment id="15732117" author="ianeboston" created="Thu, 8 Dec 2016 12:48:29 +0000"  >&lt;p&gt;Consensus appears to indicate that the patch is not acceptable due to spec compliance reasons.&lt;/p&gt;</comment>
                            <comment id="15732131" author="reschke" created="Thu, 8 Dec 2016 12:55:09 +0000"  >&lt;p&gt;Such as?&lt;/p&gt;</comment>
                            <comment id="15732181" author="fmeschbe" created="Thu, 8 Dec 2016 13:15:05 +0000"  >&lt;p&gt;I think we should not apply the patch as is. But as discussed along the thread, adding the &lt;tt&gt;Accept-Range: bytes&lt;/tt&gt; header if the content passes a certain size-threshold such as 1MB or so (may more) sounds reasonable to me.&lt;/p&gt;

&lt;p&gt;In any case, we should not make sending the header contingent on some content type, because that is very brittle: It sounds easy for &lt;em&gt;video/*&lt;/em&gt; content types but there may be vendor content types out there which would fail setting the header.&lt;/p&gt;</comment>
                            <comment id="15734962" author="ashokpanghal" created="Fri, 9 Dec 2016 10:44:08 +0000"  >&lt;p&gt;initial Patch was not given to address the issue as is but to help us understand that such an approach can resolve the issue. If we can get a consensus on mimetype, size etc. I can work upon a new patch. &lt;/p&gt;</comment>
                            <comment id="15803983" author="fmeschbe" created="Fri, 6 Jan 2017 08:27:42 +0000"  >&lt;p&gt;Proposing following patch with a threshold size of 100KB which I think is reasonable to fully download.&lt;/p&gt;

&lt;p&gt;We can also change this threshold but there is not point in making it configurable, at least not for now, I think.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;### Eclipse Workspace Patch 1.0
#P org.apache.sling.servlets.get
Index: src/main/java/org/apache/sling/servlets/get/impl/helpers/StreamRendererServlet.java
===================================================================
--- src/main/java/org/apache/sling/servlets/get/impl/helpers/StreamRendererServlet.java	(Revision 1777535)
+++ src/main/java/org/apache/sling/servlets/get/impl/helpers/StreamRendererServlet.java	(Arbeitskopie)
@@ -73,6 +73,17 @@
      */
     &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; mimeSeparation = &lt;span class=&quot;code-quote&quot;&gt;&quot;SLING_MIME_BOUNDARY&quot;&lt;/span&gt;;
 
+    &lt;span class=&quot;code-comment&quot;&gt;// size threshold &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; sending an Accept-Ranges header back in the response (100KB)
&lt;/span&gt;+    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ACCEPT_RANGES_THRESHOLD = 100 * 1024 * 1024;
+
+    &lt;span class=&quot;code-comment&quot;&gt;// Accept-Ranges header name
&lt;/span&gt;+    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; ACCEPT_RANGES_HEADER = &lt;span class=&quot;code-quote&quot;&gt;&quot;Accept-Ranges&quot;&lt;/span&gt;;
+
+    &lt;span class=&quot;code-comment&quot;&gt;// Accept-Ranges header value
&lt;/span&gt;+    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; ACCEPT_RANGES_BYTES = &lt;span class=&quot;code-quote&quot;&gt;&quot;bytes&quot;&lt;/span&gt;;
+
+
+
     /**
      * Full range marker.
      */
@@ -393,6 +404,11 @@
         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (encoding != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
             response.setCharacterEncoding(encoding);
         }
+
+        &lt;span class=&quot;code-comment&quot;&gt;// announce support &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; ranges &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we know the size to be larger than 100KB
&lt;/span&gt;+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (meta.getContentLength() &amp;gt; ACCEPT_RANGES_THRESHOLD) {
+            response.setHeader(ACCEPT_RANGES_HEADER, ACCEPT_RANGES_BYTES);
+        }
     }
 
     /**
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15803988" author="gschneck" created="Fri, 6 Jan 2017 08:29:46 +0000"  >&lt;p&gt;Thanks a lot Felix !&lt;/p&gt;

&lt;p&gt;When do you think this could be applied ?&lt;/p&gt;</comment>
                            <comment id="15804007" author="ianeboston" created="Fri, 6 Jan 2017 08:37:51 +0000"  >&lt;p&gt;LGTM. +1. Lets wait 24h for any objections.&lt;/p&gt;</comment>
                            <comment id="15811728" author="ianeboston" created="Mon, 9 Jan 2017 13:05:45 +0000"  >&lt;p&gt;Applied patch in r1777957&lt;/p&gt;</comment>
                            <comment id="15811730" author="ianeboston" created="Mon, 9 Jan 2017 13:06:01 +0000"  >&lt;p&gt;Patch applied.&lt;/p&gt;</comment>
                            <comment id="15839776" author="ashokpanghal" created="Thu, 26 Jan 2017 14:46:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ieb%40tfd.co.uk&quot; class=&quot;user-hover&quot; rel=&quot;ieb@tfd.co.uk&quot;&gt;ieb@tfd.co.uk&lt;/a&gt; , could you please release the next version of get servlet bundle. &lt;br/&gt;
CC: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gschneck&quot; class=&quot;user-hover&quot; rel=&quot;gschneck&quot;&gt;gschneck&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15846923" author="ianeboston" created="Tue, 31 Jan 2017 14:54:42 +0000"  >&lt;p&gt;2.1.20 is released pending vote completing.&lt;/p&gt;</comment>
                            <comment id="15853730" author="ashokpanghal" created="Mon, 6 Feb 2017 09:14:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fmeschbe&quot; class=&quot;user-hover&quot; rel=&quot;fmeschbe&quot;&gt;fmeschbe&lt;/a&gt; , The patch we finally applied actually sends Range header for sling.contentlength &amp;gt;100 MB but comment says 100 KB. I believe 100 MB was the real intention or if it was 100 KB , we need to redo the patch. &lt;/p&gt;</comment>
                            <comment id="15853755" author="ashokpanghal" created="Mon, 6 Feb 2017 09:36:39 +0000"  >&lt;p&gt;To Support Range headers for 100KB and more, created a new &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12851138/StreamRendererServlet_100KB.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;patch &lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15857962" author="karlpauls" created="Wed, 8 Feb 2017 13:10:08 +0000"  >&lt;p&gt;I created a new issue (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6513&quot; title=&quot;Set ACCEPT_RANGES_THRESHOLD in StreamRendererServlet to 100KB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6513&quot;&gt;&lt;del&gt;SLING-6513&lt;/del&gt;&lt;/a&gt;) for applying the patch from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashokpanghal&quot; class=&quot;user-hover&quot; rel=&quot;ashokpanghal&quot;&gt;ashokpanghal&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15864731" author="fmeschbe" created="Tue, 14 Feb 2017 00:03:32 +0000"  >&lt;p&gt;&amp;gt; The patch we finally applied actually sends Range header for sling.contentlength &amp;gt;100 MB but comment says 100 KB. I believe 100 MB was the real intention or if it was 100 KB , we need to redo the patch.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashokpanghal&quot; class=&quot;user-hover&quot; rel=&quot;ashokpanghal&quot;&gt;ashokpanghal&lt;/a&gt; Argh. Sorry about that. I only now realize that the implementation (constant) was not according to the spec (comment) ...&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13041375">SLING-6513</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12828425" name="Accept-Range Respone Header from S3.png" size="169344" author="ashokpanghal" created="Wed, 14 Sep 2016 09:46:36 +0000"/>
                            <attachment id="12828588" name="NetworkDataS3VideoFromIE11.xml" size="33360" author="ashokpanghal" created="Thu, 15 Sep 2016 04:59:50 +0000"/>
                            <attachment id="12828424" name="S3video.html" size="240" author="ashokpanghal" created="Wed, 14 Sep 2016 09:46:36 +0000"/>
                            <attachment id="12851138" name="StreamRendererServlet_100KB.patch" size="996" author="ashokpanghal" created="Mon, 6 Feb 2017 09:36:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33dz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6030] Unscheduling Cron-Jobs does not work</title>
                <link>https://issues.apache.org/jira/browse/SLING-6030</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Unscheduling a scheduled (cron-) Job is not being persisted. Therefore old cron jobs reappear after some time. Events are fired multiple times.&lt;/p&gt;

&lt;p&gt;I encountered this bug with AEM-6.2. Cronjobs are unusable this way. I must remove corresponding nodes under /var/eventing/scheduled-jobs to get rid of them.&lt;/p&gt;

&lt;p&gt;Please notice attached simple app with two components. CronScheduler should schedule/unschedule 1 cron job on activation/deactivation. CronProcessor simply consumes the events and logs.&lt;/p&gt;

&lt;p&gt;When manually deactivating the CronScheduler-Component all seems fine in the first place, but after some time old cron-jobs reappear for they have never been removed from the repository.&lt;/p&gt;

&lt;p&gt;To reproduce deactivate/activate the CronScheduler-Component some times and you get multiple instances of the same cron-Job.&lt;/p&gt;</description>
                <environment>AEM-6.2</environment>
        <key id="13002269">SLING-6030</key>
            <summary>Unscheduling Cron-Jobs does not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="henry.k">Henry Krause</reporter>
                        <labels>
                            <label>events</label>
                    </labels>
                <created>Fri, 2 Sep 2016 07:56:25 +0000</created>
                <updated>Fri, 2 Sep 2016 16:30:06 +0000</updated>
                            <resolved>Fri, 2 Sep 2016 16:30:06 +0000</resolved>
                                    <version>Event 4.0.0</version>
                                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15457854" author="henry.k" created="Fri, 2 Sep 2016 07:57:44 +0000"  >&lt;p&gt;attached simple maven project to create a bundle to reproduce the bug.&lt;/p&gt;</comment>
                            <comment id="15458311" author="cziegeler" created="Fri, 2 Sep 2016 11:54:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=henry.k&quot; class=&quot;user-hover&quot; rel=&quot;henry.k&quot;&gt;henry.k&lt;/a&gt; Thanks for filing the issue. At first look ,this looks like &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5666&quot; title=&quot;Unscheduling a job should remove corresponding node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5666&quot;&gt;&lt;del&gt;SLING-5666&lt;/del&gt;&lt;/a&gt; to me. Could you please try Event 4.1.0?&lt;/p&gt;</comment>
                            <comment id="15458678" author="henry.k" created="Fri, 2 Sep 2016 14:25:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; I can confirm that this issue is solved in Event 4.1.0.&lt;br/&gt;
Reproduced the bug with plain sling launchpad and version Event 4.0.2. Then upgraded to Event 4.1.0 and everything was fine.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12959162">SLING-5666</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12826783" name="crontest.tar" size="16384" author="henry.k" created="Fri, 2 Sep 2016 07:57:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33667:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6027] Support existing Chunked upload functionality in streaming mode.</title>
                <link>https://issues.apache.org/jira/browse/SLING-6027</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The non streaming uploads support a  partial upload protocol implemented in request parameters that is known in Sling terms as &quot;Chunked&quot; upload and documented at &lt;a href=&quot;https://cwiki.apache.org/confluence/display/SLING/Chunked+File+Upload+Support&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/SLING/Chunked+File+Upload+Support&lt;/a&gt;  (not to be confused with Chunked Transfer encoding or the use of Http Range headers).&lt;/p&gt;

&lt;p&gt;Sling Chunked uploading sends a sequence of POSTs containing multiple parts of a file upload. When all the parts are uploaded a final request is sent that causes all the parts to be merged into a single file in the JCR. From a streaming point of view, each part can be streamed with the streaming implementation supported by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5948&quot; title=&quot;Support Streaming uploads.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5948&quot;&gt;&lt;del&gt;SLING-5948&lt;/del&gt;&lt;/a&gt;. Some additional code will be required to set the file name appropriately and the struture.&lt;/p&gt;

&lt;p&gt;However, when the upload is completed, Sling must merge all the parts. To maintain the streaming nature of the upload, this must be achieved without incurring any local IO, otherwise the benefits of a streamed upload are lost.&lt;/p&gt;

&lt;p&gt;I am not certain how to achieve the merge given the limitations of the JCR API other than by transferring all the body parts via the local JVM. That won&apos;t incur local Disk IO but will multiply the overall IO requirement by 3x.&lt;/p&gt;

&lt;p&gt;If JCR/Oak had the functionality to concatenate Binaries it could do this more efficiently depending on the DS implementation. If JCR/Oak exposed an Seekable OutputStream the Application could avoid needing to save uploads to the JCR as individual files. If JCR/Oak allowed an update to a binary to start at a known location, again this could be avoided.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13002027">SLING-6027</key>
            <summary>Support existing Chunked upload functionality in streaming mode.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ianeboston">Ian Boston</assignee>
                                    <reporter username="ianeboston">Ian Boston</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Sep 2016 11:59:34 +0000</created>
                <updated>Wed, 20 Sep 2017 12:05:28 +0000</updated>
                            <resolved>Thu, 8 Sep 2016 12:07:33 +0000</resolved>
                                    <version>Servlets Post 2.3.12</version>
                                    <fixVersion>Servlets Post 2.3.14</fixVersion>
                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15455187" author="ianeboston" created="Thu, 1 Sep 2016 12:03:59 +0000"  >&lt;p&gt;To aggregate a stream create a wrapped InputStream that reads from each chunk in turn as the commit is processed. If the DS is an S3 DS (for example) this wont incur any local Disk IO, assuming the S3 DS doesn&apos;t incur local Disk IO. If the DS is a remove FS DS all the IO may be served via the OS Disk cache.  Over a direct streamed upload there is 1 read per body part + 1 write for the final file in addition to the streaming for all the body parts.&lt;/p&gt;</comment>
                            <comment id="15455510" author="ianeboston" created="Thu, 1 Sep 2016 14:11:25 +0000"  >&lt;p&gt;Looking at how other applications address this problem, most do not rely on parameters but use headers instead. This avoids a reliance on parameter order. Most use the standard HTTP Header Content-Range  which is defined in RFC 2616 section 14.16 as:&lt;/p&gt;

&lt;p&gt;&quot;The Content-Range entity-header is sent with a partial entity-body to specify where in the full entity-body the partial body should be applied.&quot;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The Google Drive API supports partial and resumable uploads using the Content-Range header as documented at &lt;a href=&quot;https://developers.google.com/drive/v3/web/manage-uploads&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://developers.google.com/drive/v3/web/manage-uploads&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The advantage this would have over the current implementation is each part of a multipart upload would be a complete definition of the Part of the Entity body.&lt;/p&gt;

&lt;p&gt;The current Sling Specific protocol is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;POST /content/dam/folder HTTP/1.1
Authorization: Basic YWRtaW46YWRtaW4=
Transfer-Encoding: chunked
Content-Type: multipart/form-data; boundary=CbZDcL_DxJIVQqSG1WkYaIoLWqT3FGYCVe
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1 (java 1.5)
Host: localhost:4502
 
--CbZDcL_DxJIVQqSG1WkYaIoLWqT3FGYCVe
Content-Disposition: form-data; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;catalog.pdf@Length&quot;&lt;/span&gt;
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
 
1000
--CbZDcL_DxJIVQqSG1WkYaIoLWqT3FGYCVe
Content-Disposition: form-data; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;catalog.pdf@Offset&quot;&lt;/span&gt;
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
 
400
--CbZDcL_DxJIVQqSG1WkYaIoLWqT3FGYCVe
Content-Disposition: form-data; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;catalog.pdf&quot;&lt;/span&gt;; filename=&lt;span class=&quot;code-quote&quot;&gt;&quot;catalog.pdf&quot;&lt;/span&gt;
Content-Type: application/pdf
Content-Transfer-Encoding: binary
$binary-data
--CbZDcL_DxJIVQqSG1WkYaIoLWqT3FGYCVe--
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Following RFC 2616 14.16 results in 1 Part defining the upload with no reliance on order. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;POST /content/dam/folder HTTP/1.1
Authorization: Basic YWRtaW46YWRtaW4=
Transfer-Encoding: chunked
Content-Type: multipart/form-data; boundary=CbZDcL_DxJIVQqSG1WkYaIoLWqT3FGYCVe
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1 (java 1.5)
Host: localhost:4502
 
--CbZDcL_DxJIVQqSG1WkYaIoLWqT3FGYCVe
Content-Disposition: form-data; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;catalog.pdf&quot;&lt;/span&gt;; filename=&lt;span class=&quot;code-quote&quot;&gt;&quot;catalog.pdf&quot;&lt;/span&gt;
Content-Type: application/pdf
Content-Range: 400-799/1000
Content-Transfer-Encoding: binary
$binary-data
--CbZDcL_DxJIVQqSG1WkYaIoLWqT3FGYCVe--
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A Content-Length header could also be added to the Part indicating the length of the Part although this is not absolutely necessary. Content-Range can follow any valid specification of range and length supported by the RFC.&lt;/p&gt;

&lt;p&gt;This appears to be the approach adopted by the Google Drive API (and other APIs), although it uses http status codes and the Range header to indicate what was received rather than an html body.&lt;/p&gt;</comment>
                            <comment id="15455539" author="ianeboston" created="Thu, 1 Sep 2016 14:19:54 +0000"  >&lt;p&gt;The current Chunked upload mechanism does not have a way of isolating different sessions performing different uploads. It assumes that only one client will be performing an upload to an asset at the same time, and returns a 500 error if any other client tries to start an upload. For any other client to recover from this it would have to abandon the current upload and start again which would fail the first client. Since this is the only recovery route, it will be used. Other systems including the AWS S3 Multipart upload specification referenced from the Sling specification use a session ID.&lt;/p&gt;

&lt;p&gt;Note also, that the S3 Multipart upload specification aggregates the parts on completion under S3, presumably at a low level without consuming Disk IO.&lt;/p&gt;</comment>
                            <comment id="15470863" author="ianeboston" created="Wed, 7 Sep 2016 15:04:12 +0000"  >&lt;p&gt;Nothing can be done to eliminate the IO from copying chunks into the final result other than using streams directly wrapped into a containing stream. Discussion on potential improvements to Oak are being discussed on oak-dev at &lt;a href=&quot;http://markmail.org/thread/lnzkwhcsqhvxzj2p&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/thread/lnzkwhcsqhvxzj2p&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Implementing both approaches in &lt;a href=&quot;https://github.com/ieb/sling/compare/trunk...ieb:SLING-6027&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ieb/sling/compare/trunk...ieb:SLING-6027&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15473690" author="ianeboston" created="Thu, 8 Sep 2016 12:07:33 +0000"  >&lt;p&gt;Fixed in r1759789&lt;br/&gt;
Test scripts can be found in bundles/servlets/post/developer-tests/testFileUploads.sh and uptodate documentation of the protocol with differences from the published protocol discovered in the code at bundles/servlets/post/Protocols.md&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i334ov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6022] SegmentNodeStoreService and LuceneIndexProviderService configurations in oak.txt are forcing fixed relative repository directories</title>
                <link>https://issues.apache.org/jira/browse/SLING-6022</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;issue reported by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mnimer&quot; class=&quot;user-hover&quot; rel=&quot;mnimer&quot;&gt;mnimer&lt;/a&gt; on user@: &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/sling-users/201609.mbox/%3cCAO0pqsGDHvw0ir+DhuifgvBOsdtGJ+FYKRm9crDWA3MXLibiug@mail.gmail.com%3e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;setting repository.home&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13001921">SLING-6022</key>
            <summary>SegmentNodeStoreService and LuceneIndexProviderService configurations in oak.txt are forcing fixed relative repository directories</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Sep 2016 07:22:15 +0000</created>
                <updated>Thu, 1 Sep 2016 07:35:08 +0000</updated>
                            <resolved>Thu, 1 Sep 2016 07:35:07 +0000</resolved>
                                    <version>Launchpad Builder 8</version>
                                    <fixVersion>Launchpad Builder 9</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15454625" author="olli" created="Thu, 1 Sep 2016 07:35:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1758717&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1758717&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3341b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6017] Streaming Uploads detection of request parameters is wrong.</title>
                <link>https://issues.apache.org/jira/browse/SLING-6017</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The way in which a request field that is not a file upload is detected is wrong. Reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5948&quot; title=&quot;Support Streaming uploads.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5948&quot;&gt;&lt;del&gt;SLING-5948&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13001302">SLING-6017</key>
            <summary>Streaming Uploads detection of request parameters is wrong.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ianeboston">Ian Boston</assignee>
                                    <reporter username="ianeboston">Ian Boston</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Aug 2016 13:18:51 +0000</created>
                <updated>Fri, 30 Sep 2016 12:29:46 +0000</updated>
                            <resolved>Fri, 2 Sep 2016 16:10:36 +0000</resolved>
                                    <version>Engine 2.6.2</version>
                                    <fixVersion>Servlets Post 2.3.14</fixVersion>
                    <fixVersion>Engine 2.6.4</fixVersion>
                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15449035" author="ianeboston" created="Tue, 30 Aug 2016 13:37:43 +0000"  >&lt;p&gt;Reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5948&quot; title=&quot;Support Streaming uploads.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5948&quot;&gt;&lt;del&gt;SLING-5948&lt;/del&gt;&lt;/a&gt; &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl -o /dev/&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; -v -F key1=value1 -F file=@file.txt -w %{time_connect}:%{time_starttransfer}:%{time_total} http:&lt;span class=&quot;code-comment&quot;&gt;//admin:admin@localhost:8080/temp/file4?uploadmode=stream&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Causes key1=value1 to be processed as a file upload since isFormField(part) &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; returns false due to part.getSubmittedFile() being non null &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;The JavaDoc &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; indicates that getName() should be used to get the file name of submitted by the client, and not getFieldName(), although in some examples getFieldName appears to have been used incorrectly. This may be because Part.getName() is the Servlet API 3.1 equivalent of FileItem.getFiledName() and Part.getSubmittedFileName() is the Servlet API 3.1 equivalent of FileItem.getName(). see &lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;1 &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/servlets/post/src/main/java/org/apache/sling/servlets/post/impl/operations/StreamedUploadOperation.java#L95&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/servlets/post/src/main/java/org/apache/sling/servlets/post/impl/operations/StreamedUploadOperation.java#L95&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;2 &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/engine/src/main/java/org/apache/sling/engine/impl/parameters/RequestPartsIterator.java#L148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/engine/src/main/java/org/apache/sling/engine/impl/parameters/RequestPartsIterator.java#L148&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;3 &lt;br/&gt;
&lt;a href=&quot;https://commons.apache.org/proper/commons-fileupload/apidocs/org/apache/commons/fileupload/FileItemStream.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-fileupload/apidocs/org/apache/commons/fileupload/FileItemStream.html&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;4 &lt;a href=&quot;https://docs.oracle.com/javaee/7/api/javax/servlet/http/Part.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javaee/7/api/javax/servlet/http/Part.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15449164" author="ianeboston" created="Tue, 30 Aug 2016 14:29:12 +0000"  >&lt;p&gt;Also the behaviour documented here &lt;a href=&quot;https://sling.apache.org/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.html#file-uploads&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/manipulating-content-the-slingpostservlet-servlets-post.html#file-uploads&lt;/a&gt; is not followed.&lt;/p&gt;</comment>
                            <comment id="15449194" author="ianeboston" created="Tue, 30 Aug 2016 14:40:19 +0000"  >&lt;p&gt;Checked and verified with the following curl commands &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# Standard upload to create /content/test correctly.
  curl -v -H &lt;span class=&quot;code-quote&quot;&gt;&quot;X-uploadmode: stream&quot;&lt;/span&gt; -F P1060839.jpg=@/Users/ieb/Desktop/P1060839.jpg http:&lt;span class=&quot;code-comment&quot;&gt;//admin:admin@localhost:8080/content/test
&lt;/span&gt;# Streamed upload with a key value. The key is ignored.
 curl -v -H &lt;span class=&quot;code-quote&quot;&gt;&quot;Sling-uploadmode: stream&quot;&lt;/span&gt; -F key1=value1 -F P1060839.jpg=@/Users/ieb/Desktop/P1060839.jpg -F PPP1060839.jpg=@/Users/ieb/Desktop/P1060839.jpg -F key2=admin2 http:&lt;span class=&quot;code-comment&quot;&gt;//admin:admin@localhost:8080/content/test
&lt;/span&gt;# Streamed upload with a 2 key values. A warning is logged as key2 is not available when the uploads are streamed.
# 2 files are created * uses P1060839.jpg as per the Sling API and the second is PPP1060839.jpg 
curl -v -H &lt;span class=&quot;code-quote&quot;&gt;&quot;Sling-uploadmode: stream&quot;&lt;/span&gt; -F key1=value1 -F *=@/Users/ieb/Desktop/P1060839.jpg -F PPP1060839.jpg=@/Users/ieb/Desktop/P1060839.jpg -F key2=admin2 http:&lt;span class=&quot;code-comment&quot;&gt;//admin:admin@localhost:8080/content/test&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15449199" author="ianeboston" created="Tue, 30 Aug 2016 14:41:50 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk@1758401&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk@1758401&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15458155" author="satyadeep" created="Fri, 2 Sep 2016 10:26:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ianeboston&quot; class=&quot;user-hover&quot; rel=&quot;ianeboston&quot;&gt;ianeboston&lt;/a&gt;, if I use a POST request as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl -v -F key1=value1 -F file=@test.jpg http:&lt;span class=&quot;code-comment&quot;&gt;//admin:admin@localhost:4502/content/test?uploadmode=stream&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;then for the &lt;tt&gt;part&lt;/tt&gt; containing the file binary, &lt;tt&gt;part.getSubmittedFileName()&lt;/tt&gt; returns &lt;tt&gt;file&lt;/tt&gt; rather than &lt;tt&gt;test.jpg&lt;/tt&gt; . This seems incorrect as per the expected behavior of &lt;tt&gt;part.getSubmittedFileName()&lt;/tt&gt; documented at this &lt;a href=&quot;https://tomcat.apache.org/tomcat-8.0-doc/servletapi/javax/servlet/http/Part.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;link&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shgupta%40adobe.com&quot; class=&quot;user-hover&quot; rel=&quot;shgupta@adobe.com&quot;&gt;shgupta@adobe.com&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15458884" author="ianeboston" created="Fri, 2 Sep 2016 15:52:03 +0000"  >&lt;p&gt;The behaviour documented for Sling is in conflict with the behaviour in the Servlet API. Changing Part to match the Servlet API and keeping the Sling behaviour requires a patch to the POST Servlet implementation, which I will do. If you are implementing a replacement for the the Sling POST Servlet be certain to follow the documented behaviour for Sling.&lt;/p&gt;</comment>
                            <comment id="15458886" author="ianeboston" created="Fri, 2 Sep 2016 15:52:48 +0000"  >&lt;p&gt;Reopening.&lt;br/&gt;
Will make the Engine impl of Part match the Servlet API and will adjust the Sling POST Servlet bundle to match the documentation.&lt;/p&gt;</comment>
                            <comment id="15458929" author="ianeboston" created="Fri, 2 Sep 2016 16:10:36 +0000"  >&lt;p&gt;Fixed in  &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk@1758986&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk@1758986&lt;/a&gt;&lt;br/&gt;
Same curl tests mentioned earlier pass.&lt;/p&gt;</comment>
                            <comment id="15470074" author="satyadeep" created="Wed, 7 Sep 2016 08:59:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ianeboston&quot; class=&quot;user-hover&quot; rel=&quot;ianeboston&quot;&gt;ianeboston&lt;/a&gt;, I verified that  the fix works fine. Can you please release the related artifacts so that I can use the released version?&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shgupta%40adobe.com&quot; class=&quot;user-hover&quot; rel=&quot;shgupta@adobe.com&quot;&gt;shgupta@adobe.com&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15470506" author="ianeboston" created="Wed, 7 Sep 2016 12:39:35 +0000"  >&lt;p&gt;Thanks for testing. &lt;br/&gt;
I am still working on &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6027&quot; title=&quot;Support existing Chunked upload functionality in streaming mode.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6027&quot;&gt;&lt;del&gt;SLING-6027&lt;/del&gt;&lt;/a&gt; (support for the Sling Chunked Upload protocol) and think we should wait till that is fixed before doing any releases. Can you work with the Snapshots for the time being ? &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12995103">SLING-5948</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3307j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6010] Correctly include LICENSE and NOTICE files in both source and binary jars</title>
                <link>https://issues.apache.org/jira/browse/SLING-6010</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The bundle provided &lt;tt&gt;LICENSE&lt;/tt&gt; and &lt;tt&gt;NOTICE&lt;/tt&gt; files are not correctly embedded into the source and binary jars, being present only in the source code + tags.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13000050">SLING-6010</key>
            <summary>Correctly include LICENSE and NOTICE files in both source and binary jars</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Aug 2016 15:26:03 +0000</created>
                <updated>Mon, 29 Aug 2016 16:41:52 +0000</updated>
                            <resolved>Thu, 25 Aug 2016 15:29:49 +0000</resolved>
                                    <version>XSS Protection API 1.0.0</version>
                                    <fixVersion>XSS Protection API 1.0.14</fixVersion>
                                    <component>XSS Protection API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15437081" author="radu.cotescu" created="Thu, 25 Aug 2016 15:29:49 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1757708&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1757708&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32shz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6009] Log compilation warnings</title>
                <link>https://issues.apache.org/jira/browse/SLING-6009</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Compilation warnings should be logged, like in version 1.0.18.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12999725">SLING-6009</key>
            <summary>Log compilation warnings</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Aug 2016 16:36:18 +0000</created>
                <updated>Thu, 8 Sep 2016 18:27:16 +0000</updated>
                            <resolved>Wed, 24 Aug 2016 16:41:05 +0000</resolved>
                                                    <fixVersion>Scripting HTL Engine 1.0.20</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15435245" author="radu.cotescu" created="Wed, 24 Aug 2016 16:41:05 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1757549&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1757549&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32qhr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-6008] The display context cannot be overwritten for HTML attribute expressions</title>
                <link>https://issues.apache.org/jira/browse/SLING-6008</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The XSS display context cannot be overwritten any more for expressions that should generate the value of HTML attributes:&lt;/p&gt;

&lt;p&gt;Markup:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;a data-sly-use.urltype=&lt;span class=&quot;code-quote&quot;&gt;&quot;logic.js&quot;&lt;/span&gt; href=&lt;span class=&quot;code-quote&quot;&gt;&quot;${urltype.hrefValue @ context=&lt;span class=&quot;code-quote&quot;&gt;&apos;unsafe&apos;&lt;/span&gt;}&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Click&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Logic:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;use(&lt;span class=&quot;code-keyword&quot;&gt;function&lt;/span&gt; () {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; {
        hrefValue: &lt;span class=&quot;code-quote&quot;&gt;&quot;$link.category(&lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;men&apos;&lt;/span&gt;,&apos;&apos;)&quot;&lt;/span&gt;
    };
});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Current output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;a href=&lt;span class=&quot;code-quote&quot;&gt;&quot;$link.category(%27default%27,%27men%27,%27%27)&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Click&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, with &lt;tt&gt;context=&apos;unsafe&apos;&lt;/tt&gt;, the output should actually be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;a href=&lt;span class=&quot;code-quote&quot;&gt;&quot;$link.category(&lt;span class=&quot;code-quote&quot;&gt;&apos;default&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;men&apos;&lt;/span&gt;,&apos;&apos;)&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Click&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12999709">SLING-6008</key>
            <summary>The display context cannot be overwritten for HTML attribute expressions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Aug 2016 15:56:57 +0000</created>
                <updated>Wed, 14 Mar 2018 12:56:41 +0000</updated>
                            <resolved>Wed, 24 Aug 2016 16:40:25 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.18</version>
                                    <fixVersion>Scripting HTL Engine 1.0.20</fixVersion>
                    <fixVersion>Scripting HTL Compiler 1.0.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15435241" author="radu.cotescu" created="Wed, 24 Aug 2016 16:40:27 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1757548&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1757548&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12945297">SLING-5568</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32qe7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5990] [SCD] FileBackedMemoryOutputStream is 10x slower than file buffering for large files</title>
                <link>https://issues.apache.org/jira/browse/SLING-5990</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When doing performance test SDC agents and the following configuration, the distribution is ~10x slower than when using a regular file buffering method.&lt;/p&gt;

&lt;p&gt;The parameters are the following&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;fileThreashol = 1&lt;/li&gt;
	&lt;li&gt;memoryUnit = MB&lt;/li&gt;
	&lt;li&gt;useOffHeapMemory = false&lt;/li&gt;
	&lt;li&gt;tempDirectory = null&lt;/li&gt;
	&lt;li&gt;fileName = distrpck-create-&lt;/li&gt;
	&lt;li&gt;fileExtension = .default&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The size of the binary is 80MB. &lt;br/&gt;
With the setup, it takes 12-14sec to replicate&lt;br/&gt;
With a simple FileOutputStream mechanism, it takes around 1.4 sec to replicate&lt;/p&gt;</description>
                <environment></environment>
        <key id="12999245">SLING-5990</key>
            <summary>[SCD] FileBackedMemoryOutputStream is 10x slower than file buffering for large files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="11">Done</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Aug 2016 15:05:03 +0000</created>
                <updated>Tue, 14 Feb 2017 09:30:51 +0000</updated>
                            <resolved>Tue, 23 Aug 2016 15:43:27 +0000</resolved>
                                    <version>Content Distribution Core 0.2.0</version>
                                    <fixVersion>Content Distribution Core 0.2.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15432985" author="marett" created="Tue, 23 Aug 2016 15:11:44 +0000"  >&lt;p&gt;It seems that two things can be improved in order to obtain better performances&lt;/p&gt;

&lt;p&gt;1. Override the &lt;tt&gt;java.io.OutputStream#write(byte[], int, int)&lt;/tt&gt; signature in &lt;tt&gt;FileBackedMemoryOutputStream&lt;/tt&gt;. Indeed, by default the muti byte write implementation does delegate to the single byte (technically it&apos;s an &lt;tt&gt;int&lt;/tt&gt;) write method which is much slower than multi-byte write.&lt;/p&gt;

&lt;p&gt;2. It seems streaming only starts when the whole binary is completely buffered (in memory and/or file). The buffering time implies a latency which which could be avoided by streaming directly.&lt;/p&gt;</comment>
                            <comment id="15433042" author="marett" created="Tue, 23 Aug 2016 15:37:41 +0000"  >&lt;p&gt;Done 1. in &lt;tt&gt;r1757389&lt;/tt&gt;. With the patch, the performance is virtually equivalent to using a regular &lt;tt&gt;FileOutputStream&lt;/tt&gt; (env. 10x faster). &lt;/p&gt;</comment>
                            <comment id="15433056" author="marett" created="Tue, 23 Aug 2016 15:43:16 +0000"  >&lt;p&gt;Closing. Opened &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5991&quot; title=&quot;[SCD] Evaluate avoiding to buffer the whole packages before streaming&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5991&quot;&gt;&lt;del&gt;SLING-5991&lt;/del&gt;&lt;/a&gt; to track evaluating the point 2. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12999264">SLING-5991</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32njj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5989] [SCD] SimpleDistributionAgent appears inactive after enabling</title>
                <link>https://issues.apache.org/jira/browse/SLING-5989</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12999165">SLING-5989</key>
            <summary>[SCD] SimpleDistributionAgent appears inactive after enabling</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="11">Done</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Aug 2016 09:47:28 +0000</created>
                <updated>Tue, 14 Feb 2017 09:30:53 +0000</updated>
                            <resolved>Tue, 23 Aug 2016 10:16:18 +0000</resolved>
                                    <version>Content Distribution Core 0.2.0</version>
                                    <fixVersion>Content Distribution Core 0.2.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15432517" author="marett" created="Tue, 23 Aug 2016 09:49:04 +0000"  >&lt;p&gt;This seems to be a regression introduced in the refactoring commit &lt;tt&gt;r1756793&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling/commit/7679cb15dd8088434a7cae0aafbe2c38ee3be6f1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/commit/7679cb15dd8088434a7cae0aafbe2c38ee3be6f1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15432571" author="marett" created="Tue, 23 Aug 2016 10:14:35 +0000"  >&lt;p&gt;Fixed in &lt;tt&gt;r1757346&lt;/tt&gt; &lt;a href=&quot;https://github.com/apache/sling/commit/09e01829ec92a471706c92f755dbbb21bad8bdef&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/commit/09e01829ec92a471706c92f755dbbb21bad8bdef&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32n1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5987] RequestLoggerFilter is only handling a single logger</title>
                <link>https://issues.apache.org/jira/browse/SLING-5987</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The cardinality of the logger reference is mandatory it should be at least one&lt;/p&gt;</description>
                <environment></environment>
        <key id="12998920">SLING-5987</key>
            <summary>RequestLoggerFilter is only handling a single logger</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Aug 2016 15:13:28 +0000</created>
                <updated>Fri, 26 Aug 2016 05:35:49 +0000</updated>
                            <resolved>Mon, 22 Aug 2016 15:17:40 +0000</resolved>
                                    <version>Engine 2.5.0</version>
                    <version>Engine 2.6.0</version>
                                    <fixVersion>Engine 2.6.2</fixVersion>
                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15430966" author="cziegeler" created="Mon, 22 Aug 2016 15:17:40 +0000"  >&lt;p&gt;Fixed in rev 1757197&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32ljb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5985] deleting chunks of an asset deletes asset also</title>
                <link>https://issues.apache.org/jira/browse/SLING-5985</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When user deletes chunks of an asset, asset itself is getting deleted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12998833">SLING-5985</key>
            <summary>deleting chunks of an asset deletes asset also</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="igurjar">indra kumar gurjar</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Aug 2016 08:32:50 +0000</created>
                <updated>Mon, 22 Aug 2016 08:36:31 +0000</updated>
                                            <version>Servlets Post 2.3.10</version>
                                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15430306" author="igurjar" created="Mon, 22 Aug 2016 08:35:53 +0000"  >&lt;p&gt;Fix for Issue  &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5637&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-5637&lt;/a&gt; has broken the chunk deletion functionality.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://issues.apache.org/jira/browse/SLING-5637]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32kzz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5980] Duplicate Script Cache Clearing Functionality</title>
                <link>https://issues.apache.org/jira/browse/SLING-5980</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently, there are two ways to clear the scripting classloader cache, one in the &lt;span class=&quot;error&quot;&gt;&amp;#91;JSP Scripting Console&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk/bundles/scripting/jsp/src/main/java/org/apache/sling/scripting/jsp/JspScriptEngineFactory.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk/bundles/scripting/jsp/src/main/java/org/apache/sling/scripting/jsp/JspScriptEngineFactory.java&lt;/a&gt;) (&lt;a href=&quot;http://localhost:8080/system/console/slingjsp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/slingjsp&lt;/a&gt;) and on in the &lt;span class=&quot;error&quot;&gt;&amp;#91;File System ClassLoader Console&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk/bundles/commons/fsclassloader/src/main/java/org/apache/sling/commons/fsclassloader/impl/FSClassLoaderWebConsole.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk/bundles/commons/fsclassloader/src/main/java/org/apache/sling/commons/fsclassloader/impl/FSClassLoaderWebConsole.java&lt;/a&gt;) (&lt;a href=&quot;http://localhost:8080/system/console/fsclassloader&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/system/console/fsclassloader&lt;/a&gt;) &lt;br/&gt;
Unfortunately these two consoles perform slightly differently:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;JSP Scripting Console - only clears out the JSPs and also destroys the JSP Runtime Context&lt;/li&gt;
	&lt;li&gt;FS ClassLoader - Clears out all script compiled files including JSP, Sightly, etc&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;m thinking about doing the following:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Removing the JSP Scripting Console&lt;/li&gt;
	&lt;li&gt;Adding a method into the ClassLoaderWriter for scripting providers to register and unregister a listener for classloader cache flushes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Consolidating the functionality will make the use of the console clearer. With the callback, the JSP Script Engine (or any other scripting engine for that matter) could react to a cache clear and perform the appropriate actions. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12998524">SLING-5980</key>
            <summary>Duplicate Script Cache Clearing Functionality</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klcodanr">Dan Klco</assignee>
                                    <reporter username="klcodanr">Dan Klco</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Aug 2016 16:25:19 +0000</created>
                <updated>Mon, 20 Mar 2017 22:14:40 +0000</updated>
                            <resolved>Fri, 17 Mar 2017 10:05:28 +0000</resolved>
                                    <version>Scripting JSP 2.1.8</version>
                    <version>Commons ClassLoader 1.3.8</version>
                    <version>File System ClassLoader 1.0.2</version>
                                    <fixVersion>Scripting JSP 2.3.0</fixVersion>
                    <fixVersion>Commons ClassLoader 1.4.0</fixVersion>
                    <fixVersion>File System ClassLoader 1.0.6</fixVersion>
                                    <component>Commons</component>
                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15429795" author="justinedelson" created="Sun, 21 Aug 2016 16:50:58 +0000"  >&lt;p&gt;Would a whiteboard make sense for the listener instead of a new method on the ClassLoaderWriter?&lt;/p&gt;</comment>
                            <comment id="15438497" author="cziegeler" created="Fri, 26 Aug 2016 05:45:01 +0000"  >&lt;p&gt;I think adding the registration to the CLWriter is fine, as the scripting needs to get this service already anyway - a whiteboard registration would be more flexible but I don&apos;t think we need it&lt;/p&gt;</comment>
                            <comment id="15439440" author="joerghoh" created="Fri, 26 Aug 2016 17:32:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klcodanr&quot; class=&quot;user-hover&quot; rel=&quot;klcodanr&quot;&gt;klcodanr&lt;/a&gt; Could you make the cache clear functionality available via JMX as well? Although it shouldn&apos;t be required, it&apos;s benefical to have it.&lt;/p&gt;</comment>
                            <comment id="15441634" author="klcodanr" created="Sat, 27 Aug 2016 14:24:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=justinedelson&quot; class=&quot;user-hover&quot; rel=&quot;justinedelson&quot;&gt;justinedelson&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; a whiteboard would be the correct way to handle this, even if it is a somewhat limited use case. I&apos;m not sure I can come up with a case where you&apos;d need to listen for cache clears and not require the ClassLoaderWriter, but it seems prudent to follow the pattern versus creating a one-off.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joerghoh&quot; class=&quot;user-hover&quot; rel=&quot;joerghoh&quot;&gt;joerghoh&lt;/a&gt; makes sense, I&apos;m also thinking the MBean could report basic statistics such as the number of files in cache and potentially listing the contents of the cache.&lt;/p&gt;</comment>
                            <comment id="15872332" author="klcodanr" created="Fri, 17 Feb 2017 19:11:37 +0000"  >&lt;p&gt;Added in &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1783452&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Rev.1783452&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15907345" author="olli" created="Mon, 13 Mar 2017 12:11:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=klcodanr&quot; class=&quot;user-hover&quot; rel=&quot;klcodanr&quot;&gt;klcodanr&lt;/a&gt;, is it &lt;b&gt;done&lt;/b&gt; for Scripting JSP?&lt;/p&gt;</comment>
                            <comment id="15907522" author="klcodanr" created="Mon, 13 Mar 2017 14:10:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; - Yes, this is done in Scripting JSP.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 33 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32j3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5979] RequestLoggerFilter is using wrong registration property</title>
                <link>https://issues.apache.org/jira/browse/SLING-5979</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The filter is using &lt;br/&gt;
HttpWhiteboardConstants.HTTP_WHITEBOARD_SERVLET_PATTERN&lt;br/&gt;
but it should use&lt;br/&gt;
HttpWhiteboardConstants.HTTP_WHITEBOARD_FILTER_PATTERN&lt;/p&gt;</description>
                <environment></environment>
        <key id="12998445">SLING-5979</key>
            <summary>RequestLoggerFilter is using wrong registration property</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Aug 2016 09:46:52 +0000</created>
                <updated>Mon, 22 Aug 2016 10:31:13 +0000</updated>
                            <resolved>Fri, 19 Aug 2016 09:47:52 +0000</resolved>
                                    <version>Engine 2.5.0</version>
                                    <fixVersion>Engine 2.6.0</fixVersion>
                                    <component>Engine</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32ilr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5978] Make Sightly throw compilation errors when unknown data-sly-* plugins are used</title>
                <link>https://issues.apache.org/jira/browse/SLING-5978</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The current version of the &lt;tt&gt;MarkupHandler#obtainPlugin&lt;/tt&gt; [0] method throws an &lt;tt&gt;UnsupportedOperationException&lt;/tt&gt; whenever an unknown &lt;tt&gt;data-sly-*&lt;/tt&gt; plugin is used. Instead, the method should just generate an error in the AST stream.&lt;/p&gt;

&lt;p&gt;[0] - &lt;a href=&quot;https://github.com/apache/sling/blob/1aa2c8be782ecb858de9030501e67edc4aba1357/bundles/scripting/sightly/compiler/src/main/java/org/apache/sling/scripting/sightly/impl/html/dom/MarkupHandler.java#L403&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/1aa2c8be782ecb858de9030501e67edc4aba1357/bundles/scripting/sightly/compiler/src/main/java/org/apache/sling/scripting/sightly/impl/html/dom/MarkupHandler.java#L403&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12998233">SLING-5978</key>
            <summary>Make Sightly throw compilation errors when unknown data-sly-* plugins are used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Aug 2016 15:33:41 +0000</created>
                <updated>Thu, 8 Sep 2016 18:23:32 +0000</updated>
                            <resolved>Mon, 29 Aug 2016 16:25:39 +0000</resolved>
                                    <version>Scripting HTL Compiler 1.0.0</version>
                                    <fixVersion>Scripting HTL Engine 1.0.20</fixVersion>
                    <fixVersion>Scripting HTL Compiler 1.0.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15446346" author="radu.cotescu" created="Mon, 29 Aug 2016 16:25:40 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1758254&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1758254&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12990416">SLING-5863</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32han:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5975] POST fails with modern multi-value parameter names containing brackets</title>
                <link>https://issues.apache.org/jira/browse/SLING-5975</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;A POST to update a multi-valued property fails with an error message if modern parameter names with trailing brackets (i.e. &lt;tt&gt;myparam[]&lt;/tt&gt;) are used.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;cURL (resty)&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;POST /content/test -F &lt;span class=&quot;code-quote&quot;&gt;&quot;test[]=a&quot;&lt;/span&gt; -F &lt;span class=&quot;code-quote&quot;&gt;&quot;test[]=b&quot;&lt;/span&gt; -F &lt;span class=&quot;code-quote&quot;&gt;&quot;test@TypeHint=&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]&quot;&lt;/span&gt; -F &lt;span class=&quot;code-quote&quot;&gt;&quot;test@Delete=&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;error.log&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;18.08.2016 14:29:04.282 *ERROR* [0:0:0:0:0:0:0:1 [1471523344280] POST /content/test HTTP/1.1] org.apache.sling.servlets.post.impl.operations.ModifyOperation Exception during response processing.
javax.jcr.RepositoryException: Invalid name or path: test[]
	at org.apache.jackrabbit.oak.jcr.session.SessionContext.getOakPathOrThrow(SessionContext.java:359)
	at org.apache.jackrabbit.oak.jcr.session.ItemImpl.getOakPathOrThrow(ItemImpl.java:323)
	at org.apache.jackrabbit.oak.jcr.session.NodeImpl.hasProperty(NodeImpl.java:844)
	at org.apache.sling.servlets.post.impl.helper.SlingPropertyValueHandler.getType(SlingPropertyValueHandler.java:398)
	at org.apache.sling.servlets.post.impl.helper.SlingPropertyValueHandler.setPropertyAsIs(SlingPropertyValueHandler.java:284)
	at org.apache.sling.servlets.post.impl.helper.SlingPropertyValueHandler.setProperty(SlingPropertyValueHandler.java:158)
	at org.apache.sling.servlets.post.impl.operations.ModifyOperation.writeContent(ModifyOperation.java:411)
	at org.apache.sling.servlets.post.impl.operations.ModifyOperation.doRun(ModifyOperation.java:101)
	at org.apache.sling.servlets.post.AbstractPostOperation.run(AbstractPostOperation.java:92)
	at org.apache.sling.servlets.post.impl.SlingPostServlet.doPost(SlingPostServlet.java:202)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12998187">SLING-5975</key>
            <summary>POST fails with modern multi-value parameter names containing brackets</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rschaer">Roland Schaer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Aug 2016 12:43:34 +0000</created>
                <updated>Thu, 18 Aug 2016 14:33:49 +0000</updated>
                                            <version>Servlets Post 2.3.12</version>
                                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15426481" author="githubbot" created="Thu, 18 Aug 2016 13:43:52 +0000"  >&lt;p&gt;GitHub user roele opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/162&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/162&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5975&quot; title=&quot;POST fails with modern multi-value parameter names containing brackets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5975&quot;&gt;SLING-5975&lt;/a&gt; - POST fails with modern multi-value parameter names containing brackets&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/roele/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/roele/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5975&quot; title=&quot;POST fails with modern multi-value parameter names containing brackets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5975&quot;&gt;SLING-5975&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/162.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/162.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #162&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 363fd50b6a40e0e1b8de03b4770bfcbb724ec48b&lt;br/&gt;
Author: Roland Schaer &amp;lt;rschaer@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-08-18T13:42:41Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5975&quot; title=&quot;POST fails with modern multi-value parameter names containing brackets&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5975&quot;&gt;SLING-5975&lt;/a&gt; - POST fails with modern multi-value parameter names containing brackets&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15426509" author="kwin" created="Thu, 18 Aug 2016 13:56:30 +0000"  >&lt;p&gt;Why do we need to support those &quot;modern parameter names&quot;? Is there any RFC about multi-value parameter names ending withj &lt;tt&gt;[]&lt;/tt&gt;?&lt;br/&gt;
I could only find the following reference about GET multi-value parameters &lt;a href=&quot;http://stackoverflow.com/questions/24059773/correct-way-to-pass-multiple-values-for-same-parameter-name-in-get-request&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/24059773/correct-way-to-pass-multiple-values-for-same-parameter-name-in-get-request&lt;/a&gt; which is basically saying that there is no standard.&lt;/p&gt;</comment>
                            <comment id="15426545" author="rschaer" created="Thu, 18 Aug 2016 14:28:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; This is useful especially when using jQuery to modify content which i assume might be a relatively common use-case. jQuery &amp;gt;= 1.3 is submitting multi-value fields in this form by default. As of now it&apos;s possible to switch back to the old behaviour by adding a request option &lt;tt&gt;traditional: true&lt;/tt&gt; (see &lt;br/&gt;
&lt;a href=&quot;http://api.jquery.com/jquery.param/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://api.jquery.com/jquery.param/&lt;/a&gt;) but this needs to be set explicitly which is not obvious.&lt;/p&gt;

&lt;p&gt;I found a more detailed reasoning about this change at &lt;a href=&quot;http://benalman.com/news/2009/12/jquery-14-param-demystified&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://benalman.com/news/2009/12/jquery-14-param-demystified&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;As there is a workaround the type might be changed to Improvement or Wish.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32h0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5973] HTMLSerializer not handling some unicode characters (emoji, etc.)</title>
                <link>https://issues.apache.org/jira/browse/SLING-5973</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I&apos;ve noticed that when I have unicode special characters (e.g. emoji) in my sling content and the sling rewriter is enabled the characters are not output correctly to the browser. For example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;amp;#x1F601;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; becomes &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;amp;#xD83D;&amp;amp;#xDE01;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I disable the rewriter pipeline the output is as expected.&lt;/p&gt;

&lt;p&gt;I&apos;ve looked in the code and I suspect the issue is in the HTMLSerializer from the Cocoon library, however I&apos;m not sure why as it should be using the default encoding for output (which is UTF-8). My rewriter pipeline is using the default html-generator and html-serializer provided by sling.&lt;/p&gt;

&lt;p&gt;My code is available on GitHub here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/Whistlepost/emojistrip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Whistlepost/emojistrip&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It provides a very simple app/content project pair with some emoji characters in the content (see src/main/resources/SLING-INF/content/phrases.json). Many thanks.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12998121">SLING-5973</key>
            <summary>HTMLSerializer not handling some unicode characters (emoji, etc.)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fortuna">Ben Fortuna</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Aug 2016 07:21:52 +0000</created>
                <updated>Thu, 20 Oct 2016 13:12:13 +0000</updated>
                                                                            <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15426022" author="bdelacretaz" created="Thu, 18 Aug 2016 07:26:37 +0000"  >&lt;p&gt;Would you be able to narrow the problem down by (ideally) creating a JUnit test that demonstrates it? &lt;br/&gt;
Or supply a minimal failure scenario that does not require running your complete app.&lt;/p&gt;</comment>
                            <comment id="15426032" author="fortuna" created="Thu, 18 Aug 2016 07:36:22 +0000"  >&lt;p&gt;In order to create a unit test I&apos;ll probably need to do some more investigation to narrow down where the issue is - I suspect it might be in Cocoon so I&apos;ll let you know if I find anything.&lt;/p&gt;

&lt;p&gt;Another interesting aspect of this is that it appears to be outputting the &quot;surrogate pair&quot; of the unicode character, which is apparently used to represent UTF-16 characters (which incidentally is the Java internal representation charset). e.g:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://apps.timwhitlock.info/unicode/inspect/hex/1F601&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apps.timwhitlock.info/unicode/inspect/hex/1F601&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also, lower order unicode characters are output correctly: eg: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;amp;#x2602;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="15426098" author="sseifert@pro-vision.de" created="Thu, 18 Aug 2016 08:32:14 +0000"  >&lt;p&gt;i tried out your application in sling launchpad and opened the URL &lt;a href=&quot;http://localhost:8080/emojistrip/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/emojistrip/&lt;/a&gt; - what should i see if it is correct or not?&lt;/p&gt;

&lt;p&gt;looking at &lt;a href=&quot;http://localhost:8080/emojistrip/phrases/list/good-luck.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/emojistrip/phrases/list/good-luck.json&lt;/a&gt; or &lt;a href=&quot;https://github.com/Whistlepost/emojistrip/blob/master/emojistrip-content/src/main/resources/SLING-INF/content/phrases.json&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Whistlepost/emojistrip/blob/master/emojistrip-content/src/main/resources/SLING-INF/content/phrases.json&lt;/a&gt; it think the problem is the escaping you use in the JCR content.&lt;/p&gt;

&lt;p&gt;escaping in form &lt;tt&gt;&amp;amp;&amp;#35;x2602;&lt;/tt&gt; is HTML specific and not compatible with the JSON spec. you should store the UTF-8 data natively in JSON/JCR and let the HTML serializer take care of escaping the only when rendering the page. so you can either put the UTF-8 character directly into the JSON file, or escape them as definied in &quot;2.5.  Strings&quot; in [RFC4627|http://www.ietf.org/rfc/rfc4627.txt e.g. &lt;tt&gt;\u005C&lt;/tt&gt;. when storing date using JCR API or Sling API you should not do any escaping manually, just store the UTF-8 string.&lt;/p&gt;</comment>
                            <comment id="15426142" author="olli" created="Thu, 18 Aug 2016 09:25:04 +0000"  >&lt;p&gt;I&apos;ve added a test in &lt;a href=&quot;https://svn.apache.org/r1756747&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1756747&lt;/a&gt;. Feel free to adjust.&lt;/p&gt;</comment>
                            <comment id="15426178" author="bdelacretaz" created="Thu, 18 Aug 2016 09:49:09 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; - I have converted the (cute &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; emoji to unicode escapes in &lt;a href=&quot;http://svn.apache.org/r1756751&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1756751&lt;/a&gt; - I think it&apos;s safer to avoid non-ASCII chars in our source code.&lt;/p&gt;</comment>
                            <comment id="15426195" author="olli" created="Thu, 18 Aug 2016 09:58:33 +0000"  >&lt;p&gt;&#128536;&#128077;&#127995;&lt;/p&gt;</comment>
                            <comment id="15426383" author="fortuna" created="Thu, 18 Aug 2016 12:56:04 +0000"  >&lt;p&gt;Examples of rendering emoji with and without Sling rewriter bundle enabled.&lt;/p&gt;</comment>
                            <comment id="15426384" author="fortuna" created="Thu, 18 Aug 2016 12:57:02 +0000"  >&lt;p&gt;Thanks for following up so quickly. I just added two images demonstrating what I am seeing when I enable/disable Sling rewriter bundle.&lt;/p&gt;</comment>
                            <comment id="15426390" author="sseifert@pro-vision.de" created="Thu, 18 Aug 2016 12:59:54 +0000"  >&lt;p&gt;ok - as a next step please fix/remove the wrong escaping in your content as noted in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5973?focusedCommentId=15426098#comment-15426098&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;my comment&lt;/a&gt; - i assume this will solve the problem.&lt;/p&gt;</comment>
                            <comment id="15426392" author="fortuna" created="Thu, 18 Aug 2016 13:02:37 +0000"  >&lt;p&gt;Actually I did try both the html escaped and native unicode in that example (see the last two chars):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;amp;#x2602;&amp;amp;#x1F603; &amp;amp;#x1F340; &amp;amp;#x1F340; &amp;amp;#x1F340; &amp;amp;#x1F601; \ud83c\udf40&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The results are the same for both. I will update the example to only use native unicode though.&lt;/p&gt;</comment>
                            <comment id="15426918" author="olli" created="Thu, 18 Aug 2016 18:00:53 +0000"  >&lt;blockquote&gt;&lt;p&gt;escaping in form &lt;tt&gt;&amp;amp;&amp;#35;x2602;&lt;/tt&gt; is HTML specific and not compatible with the JSON spec.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt;, the HTML entities are just strings in JSON also. Why should they not be compatible? I think it&apos;s absolutely fine to put HTML in JSON strings (as long following the simple escape rules from RFC 4627 2.5).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;2.5.  Strings&lt;/p&gt;

&lt;p&gt;   The representation of strings is similar to conventions used in the C&lt;br/&gt;
   family of programming languages.  A string begins and ends with&lt;br/&gt;
   quotation marks.  All Unicode characters may be placed within the&lt;br/&gt;
   quotation marks except for the characters that must be escaped:&lt;br/&gt;
   quotation mark, reverse solidus, and the control characters (U+0000&lt;br/&gt;
   through U+001F).&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="15426931" author="olli" created="Thu, 18 Aug 2016 18:09:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fortuna&quot; class=&quot;user-hover&quot; rel=&quot;fortuna&quot;&gt;fortuna&lt;/a&gt;, when you add &lt;tt&gt;System.out.println(document.html());&lt;/tt&gt; to the test you will see the emojis in console output (OS X).&lt;/p&gt;</comment>
                            <comment id="15427630" author="fortuna" created="Fri, 19 Aug 2016 04:55:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; I&apos;m not able to run that test in my local env just now, however I have created another simple test that I believe demonstrates this issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/micronode/whistlepost/blob/master/whistlepost-rewrite-lib/src/test/groovy/org/apache/cocoon/components/serializers/encoding/XMLEncoderTest.groovy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/micronode/whistlepost/blob/master/whistlepost-rewrite-lib/src/test/groovy/org/apache/cocoon/components/serializers/encoding/XMLEncoderTest.groovy&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As these emoji characters exist above the 16bit unicode range, they can&apos;t be represented by a single unicode escape sequence in Java. However they can be represented as a &quot;surrogate pair&quot;. eg:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;U+1F340 in Java is: &lt;span class=&quot;code-quote&quot;&gt;&quot;\ud83c\udf40&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I found a good explanation of this here: &lt;a href=&quot;http://stackoverflow.com/a/26231925/163223&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/a/26231925/163223&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The Cocoon HTMLSerializer uses an XMLEncoder implementation that encodes characters &lt;b&gt;one at a time&lt;/b&gt;. Which means that it doesn&apos;t realize these two characters are a surrogate pair, and subsequently doesn&apos;t return the correct HTML escape code.&lt;/p&gt;

&lt;p&gt;So I don&apos;t think this is necessarily a Sling issue, but perhaps a workaround might be to provide a different encoder that supports surrogate pairs.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;NOTE:&lt;/b&gt; I will also raise this issue in the Cocoon project - it&apos;s interesting to search Apache.org to see this same problem in other projects (possibly with solutions):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/THRIFT-3403?jql=text%20~%20%22surrogate%20pairs%22&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/THRIFT-3403?jql=text%20~%20%22surrogate%20pairs%22&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15427712" author="olli" created="Fri, 19 Aug 2016 07:02:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fortuna&quot; class=&quot;user-hover&quot; rel=&quot;fortuna&quot;&gt;fortuna&lt;/a&gt;, please add your configuration for the &lt;tt&gt;HTMLSerializer&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15427738" author="fortuna" created="Fri, 19 Aug 2016 07:16:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; I don&apos;t have any configuration specifically for the html-serializer (i.e. just uses defaults). Here is an example of the rewriter config I am using:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;wp-link-rewriter&quot;&lt;/span&gt;: {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;generatorType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;html-generator&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;serializerType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;html-serializer&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;paths&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;/content&quot;&lt;/span&gt;],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;contentTypes&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;text/html&quot;&lt;/span&gt;],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;extensions&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;html&quot;&lt;/span&gt;],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;enabled&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;transformerTypes&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;wp-link-rewriter&quot;&lt;/span&gt;],
    &lt;span class=&quot;code-quote&quot;&gt;&quot;order&quot;&lt;/span&gt;: 0
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15427836" author="olli" created="Fri, 19 Aug 2016 08:38:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fortuna&quot; class=&quot;user-hover&quot; rel=&quot;fortuna&quot;&gt;fortuna&lt;/a&gt;, enabling the Rewriter alone doesn&apos;t cause your problems (see &lt;tt&gt;EmojiIT&lt;/tt&gt;) and I&apos;m trying to get the missing pieces. One is the configuration and another is your &lt;tt&gt;wp-link-rewriter&lt;/tt&gt;. Please add that also.&lt;/p&gt;</comment>
                            <comment id="15427858" author="fortuna" created="Fri, 19 Aug 2016 09:00:12 +0000"  >&lt;p&gt;Ah ok, so my rewriter pipeline includes a reasonably simple transformer implementation that extends from DefaultTransformer. See here for details:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/micronode/whistlepost/tree/master/whistlepost-rewrite-lib&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/micronode/whistlepost/tree/master/whistlepost-rewrite-lib&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You&apos;ll find the implementation (LinkTransformerFactory) is only concerned with rewriting links in the output to remove the /content from the path.&lt;/p&gt;

&lt;p&gt;The other references in that config (html-generator, html-serializer) are provided by Sling itself. I should also probably mention that I am using the official Sling docker container to test this, however I have confirmed the default file encoding, etc. is still UTF-8 in this environment.&lt;/p&gt;

&lt;p&gt;Now that I think of it, I guess the rewriter (and the html-serializer) is only &quot;activated&quot; on the paths specified by the transformer, which means you won&apos;t have an issue unless the path matches the transformer configuration.&lt;/p&gt;</comment>
                            <comment id="15591782" author="fortuna" created="Thu, 20 Oct 2016 13:12:13 +0000"  >&lt;p&gt;With thanks to the guys on the Cocoon project I was able to submit a patch to support HTML encoding of unicode surrogate pairs. I&apos;ve verified with my test application that emojis are now displaying correctly with the rewriter enabled.&lt;/p&gt;

&lt;p&gt;The patch will be included in the next Cocoon release, but in the meantime I was able to test with the latest snapshot build here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/content/groups/snapshots/org/apache/cocoon/cocoon-serializers-charsets/1.0.3-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/groups/snapshots/org/apache/cocoon/cocoon-serializers-charsets/1.0.3-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12998394">COCOON-2352</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12824344" name="emoji-no-sling-rewriter.png" size="36420" author="fortuna" created="Thu, 18 Aug 2016 12:56:04 +0000"/>
                            <attachment id="12824345" name="emoji-with-sling-rewriter.png" size="26550" author="fortuna" created="Thu, 18 Aug 2016 12:56:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32glr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5957] SlingPostServlet: susceptible CSRF with empty content-type</title>
                <link>https://issues.apache.org/jira/browse/SLING-5957</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;em&gt;SlingPostServlet&lt;/em&gt; creates a resource from a cross-site request like so:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;html&amp;gt;
  &amp;lt;body&amp;gt;
    &amp;lt;script&amp;gt;
      function submitRequest()
      {
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; xhr = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; XMLHttpRequest();
        xhr.open(&lt;span class=&quot;code-quote&quot;&gt;&quot;POST&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/test/csrf.txt&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/span&gt;        xhr.withCredentials = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; body = &lt;span class=&quot;code-quote&quot;&gt;&quot;This file has been uploaded via CSRF.=\r\n&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; aBody = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Uint8Array(body.length);
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; i = 0; i &amp;lt; aBody.length; i++)
          aBody[i] = body.charCodeAt(i); 
        xhr.send(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Blob([aBody]));
      }
    &amp;lt;/script&amp;gt;
    &amp;lt;form action=&lt;span class=&quot;code-quote&quot;&gt;&quot;#&quot;&lt;/span&gt;&amp;gt;
      &amp;lt;input type=&lt;span class=&quot;code-quote&quot;&gt;&quot;button&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;Submit request&quot;&lt;/span&gt; onclick=&lt;span class=&quot;code-quote&quot;&gt;&quot;submitRequest();&quot;&lt;/span&gt; /&amp;gt;
    &amp;lt;/form&amp;gt;
  &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12996932">SLING-5957</key>
            <summary>SlingPostServlet: susceptible CSRF with empty content-type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dominique.jaeggi">Dominique J&#228;ggi</reporter>
                        <labels>
                            <label>csrf</label>
                            <label>security</label>
                    </labels>
                <created>Fri, 12 Aug 2016 12:10:33 +0000</created>
                <updated>Wed, 31 Aug 2016 13:16:28 +0000</updated>
                            <resolved>Wed, 31 Aug 2016 13:16:27 +0000</resolved>
                                                                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15445835" author="cziegeler" created="Mon, 29 Aug 2016 13:11:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djaeggi&quot; class=&quot;user-hover&quot; rel=&quot;djaeggi&quot;&gt;djaeggi&lt;/a&gt; Isn&apos;t this catched by the referrer filter? Or should something be done in addition?&lt;/p&gt;</comment>
                            <comment id="15445836" author="cziegeler" created="Mon, 29 Aug 2016 13:11:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djaeggi&quot; class=&quot;user-hover&quot; rel=&quot;djaeggi&quot;&gt;djaeggi&lt;/a&gt; Isn&apos;t this catched by the referrer filter? Or should something be done in addition?&lt;/p&gt;</comment>
                            <comment id="15445843" author="dominique.jaeggi" created="Mon, 29 Aug 2016 13:12:54 +0000"  >&lt;p&gt;even though not recommended, the referrer filter can be disabled/configured. each module should be secure on its own.&lt;/p&gt;</comment>
                            <comment id="15445861" author="cziegeler" created="Mon, 29 Aug 2016 13:19:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djaeggi&quot; class=&quot;user-hover&quot; rel=&quot;djaeggi&quot;&gt;djaeggi&lt;/a&gt; I disagree - the post servlet has no referrer filter check at all - which would if we follow your opinion we would need to merge all that code into the post servlet as well.&lt;/p&gt;</comment>
                            <comment id="15445934" author="dominique.jaeggi" created="Mon, 29 Aug 2016 13:54:27 +0000"  >&lt;p&gt;however inconvenient you may think this is, if the referrer filter is disabled/misconfigured there&apos;s a vulnerability. i leave it up to you to close this issue.&lt;/p&gt;</comment>
                            <comment id="15452135" author="reschke" created="Wed, 31 Aug 2016 12:43:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; what does Sling&apos;s referrer filter to when referer is missing?&lt;/p&gt;</comment>
                            <comment id="15452182" author="cziegeler" created="Wed, 31 Aug 2016 13:02:26 +0000"  >&lt;p&gt;This is configurable, by default empty referrer is not allowed&lt;/p&gt;</comment>
                            <comment id="15452198" author="asanso" created="Wed, 31 Aug 2016 13:10:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=djaeggi&quot; class=&quot;user-hover&quot; rel=&quot;djaeggi&quot;&gt;djaeggi&lt;/a&gt; IMHO the referrer filter protection should suffice in this specific case.  &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12996931">JCR-4002</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3299j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5954] Disable non-essential features in XML parser</title>
                <link>https://issues.apache.org/jira/browse/SLING-5954</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Non-essential XML parsing features should be disabled in the XSS module&apos;s XML parser, to avoid performance hits for example.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12996225">SLING-5954</key>
            <summary>Disable non-essential features in XML parser</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Aug 2016 09:56:40 +0000</created>
                <updated>Fri, 19 Aug 2016 20:43:08 +0000</updated>
                            <resolved>Wed, 10 Aug 2016 09:57:41 +0000</resolved>
                                    <version>XSS Protection API 1.0.0</version>
                                    <fixVersion>XSS Protection API 1.0.12</fixVersion>
                                    <component>XSS Protection API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15415054" author="bdelacretaz" created="Wed, 10 Aug 2016 09:57:41 +0000"  >&lt;p&gt;Implemented in &lt;a href=&quot;http://svn.apache.org/r1755704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1755704&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i324wn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5950] Configuration inside of a bundle</title>
                <link>https://issues.apache.org/jira/browse/SLING-5950</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I can&apos;t follow this:&lt;br/&gt;
&lt;a href=&quot;https://sling.apache.org/documentation/bundles/configuration-installer-factory.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/configuration-installer-factory.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Where is the correct place in jar of the config file when I install the bundle by upload?&lt;/p&gt;

&lt;p&gt;I add the the config-file in a SLING-INF folder and create the structure apps/appname/install/filename.config&lt;/p&gt;

&lt;p&gt;and that works correctly by jcrinstaller. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12995500">SLING-5950</key>
            <summary>Configuration inside of a bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="thodte">Christoph Thodte</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Aug 2016 19:05:47 +0000</created>
                <updated>Tue, 9 Aug 2016 05:39:04 +0000</updated>
                            <resolved>Tue, 9 Aug 2016 05:39:03 +0000</resolved>
                                                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15412973" author="cziegeler" created="Tue, 9 Aug 2016 05:39:04 +0000"  >&lt;p&gt;Please don&apos;t use issues to ask questions. Please use the mailing lists for this. I&apos;m not sure I understand your question, as you indicate in the last sentence that it works correctly. If you still have a question, please follow up on the mailing list. Thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i320fr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5949] SLING-5864 breaks the i18n filter</title>
                <link>https://issues.apache.org/jira/browse/SLING-5949</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5864&quot; title=&quot;i18n: Update to org.apache.sling.commons.osgi 2.4.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5864&quot;&gt;&lt;del&gt;SLING-5864&lt;/del&gt;&lt;/a&gt; breaks the i18n implementation as the dependency to commons.osgi has been updated, but the old embedd statement is still there. Unfortunately the new 2.4.0 implementation requires additional classes&lt;/p&gt;

&lt;p&gt;Looking at the comments from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5864&quot; title=&quot;i18n: Update to org.apache.sling.commons.osgi 2.4.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5864&quot;&gt;&lt;del&gt;SLING-5864&lt;/del&gt;&lt;/a&gt; I think the embedding should be removed completely&lt;/p&gt;</description>
                <environment></environment>
        <key id="12995173">SLING-5949</key>
            <summary>SLING-5864 breaks the i18n filter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Aug 2016 10:18:39 +0000</created>
                <updated>Mon, 8 Aug 2016 11:53:59 +0000</updated>
                            <resolved>Fri, 5 Aug 2016 11:21:09 +0000</resolved>
                                    <version>i18n 2.4.8</version>
                                    <fixVersion>i18n 2.4.10</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15409304" author="cziegeler" created="Fri, 5 Aug 2016 10:40:53 +0000"  >&lt;p&gt;Removed the embed directive&lt;/p&gt;</comment>
                            <comment id="15409325" author="kwin" created="Fri, 5 Aug 2016 11:09:27 +0000"  >&lt;p&gt;Since i18n bundle is pretty widely used (even in older Sling/AEM installations) I still think embedding a new commons.osgi is the better idea than just depending on it. But instead of relying on manually to maintain inline instructions I would rather prefer the approach outlined in &lt;a href=&quot;http://njbartlett.name/2014/05/26/static-linking.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://njbartlett.name/2014/05/26/static-linking.html&lt;/a&gt; leveraging the bnd instruction &lt;tt&gt;Conditional-Package&lt;/tt&gt;. That way all the necessary classes (even transitive ones) are correctly embedded.&lt;/p&gt;</comment>
                            <comment id="15409330" author="cziegeler" created="Fri, 5 Aug 2016 11:15:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; Could you please provide a patch?&lt;/p&gt;</comment>
                            <comment id="15409333" author="kwin" created="Fri, 5 Aug 2016 11:20:32 +0000"  >&lt;p&gt;Fixed in the proposed way in &lt;a href=&quot;https://svn.apache.org/r1755289&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1755289&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31yf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5948] Support Streaming uploads.</title>
                <link>https://issues.apache.org/jira/browse/SLING-5948</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently multipart POST request made to sling use the commons file upload component that parses the request fully before processing. If uploads are small they are stored in byte[], over a configurable limit they are sent to disk. This creates additional IO overhead, increases heap usage and increases upload time.&lt;/p&gt;

&lt;p&gt;Having searched the SLing jira, and sling-dev I have failed to find an issue relating to this area, although it has been discussed in the past.&lt;/p&gt;

&lt;p&gt;I have 2 proposals.&lt;/p&gt;

&lt;p&gt;The SlingMain Servlet processes all requests, identifying the request type and parsing the request body. If the body is multipart the Commons File Upload library is used to process the request body in full when the SlingServletRequest is created or the first parameter is requested. To enable streaming of a request this behaviour needs to be modified. Unfortunately, processing a streamed request requires that the ultimate processor requests multipar parts in a the correct order to avoid non streaming, so a streaming behaviour will not be suitable for most POST requests and can only be used if the ultimate Servlet has been written to process a stream rather than a map of parameters.&lt;/p&gt;

&lt;p&gt;Both proposals need to identify requests that should be processed as a stream. This identification must happen in the headers or URI as any identification later than the headers may be too late. Something like a custom header (x-uploadmode: stream) or a query string (?uploadmode=stream) or possibly a selector (/path/to/target.stream) would work and each have advantages and disadvantages.&lt;/p&gt;

&lt;h1&gt;&lt;a name=&quot;Proposal1&quot;&gt;&lt;/a&gt;Proposal 1&lt;/h1&gt;

&lt;p&gt;When a POST request is identified as multipart and streaming, create a LazyParameterMap that uses the Commons File Upload Streaming API (&lt;a href=&quot;https://commons.apache.org/proper/commons-fileupload/streaming.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-fileupload/streaming.html&lt;/a&gt;) to process the request on demand as parameters are requested. If parameters are requested out of sequence, do something sensible attempting to maintain streaming behaviour, but if the code really breaks streaming, throw an exception to alert servlet developer early.&lt;/p&gt;

&lt;h2&gt;&lt;a name=&quot;Pros&quot;&gt;&lt;/a&gt;Pros&lt;/h2&gt;

&lt;ul&gt;
	&lt;li&gt;Follows a similar pattern to currently using the Servlet API.&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;&lt;a name=&quot;Cons&quot;&gt;&lt;/a&gt;Cons&lt;/h2&gt;

&lt;ul&gt;
	&lt;li&gt;[] params will be hard to support when the [] is out of order, and almost impossible if the [] is an upload body.&lt;/li&gt;
	&lt;li&gt;May not work when a request is routed incorrectly as getParameter requests will be out of streaming sequence.&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;&lt;a name=&quot;Proposal2&quot;&gt;&lt;/a&gt;Proposal 2&lt;/h2&gt;

&lt;p&gt;When a POST request is identified as multipart and streaming, create a NullParameterMap that returns null for all parameter get operations. In addition set a request Attribute containing a Iterator&amp;lt;Part&amp;gt; that allows access to the request stream in a similar way to the Commons File Upload Streaming API.  Servlets that process uploads streams will use the Iterator&amp;lt;Part&amp;gt; object retrieved from the request. Part is the Servlet 3 Part &lt;a href=&quot;https://tomcat.apache.org/tomcat-7.0-doc/servletapi/javax/servlet/http/Part.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tomcat.apache.org/tomcat-7.0-doc/servletapi/javax/servlet/http/Part.html&lt;/a&gt;. IIUC This API is already used in the Sling Engine and exported by a bundle.&lt;/p&gt;

&lt;h2&gt;&lt;a name=&quot;Pros&quot;&gt;&lt;/a&gt;Pros&lt;/h2&gt;

&lt;ul&gt;
	&lt;li&gt;Won&apos;t get broken by existing getParameter calls, which all return null and do no harm to the stream.&lt;/li&gt;
	&lt;li&gt;Far simpler implementation as the Servlet implementation has to get the request data in streaming order.&lt;/li&gt;
&lt;/ul&gt;


&lt;h2&gt;&lt;a name=&quot;Cons&quot;&gt;&lt;/a&gt;Cons&lt;/h2&gt;

&lt;ul&gt;
	&lt;li&gt;Needs a custom Sling Upload Operation that understand how to process the Iterator&amp;lt;Part&amp;gt;&lt;/li&gt;
	&lt;li&gt;Can&apos;t use the adaptTo mechanism on the request, as request.adaptTo(Iterator.class) doesn&apos;t make sense being too generic. Would need a new API to make this work. request.adaptTo(PartsIterator.class), which PartsIterator extends Iterator.&lt;/li&gt;
	&lt;li&gt;Supporting the full breadth of the Sling Operation protocol in the Sling Upload Operation will require wide scale duplication of code from the ModifyOperation implementation as the ModifyOperation expects RequestProperty maps and wont work with a streamed part.&lt;/li&gt;
	&lt;li&gt;Forces the Sling Post bundle to depend on Servlet 3 to get the Part API, requiring some patches to the existing test classes.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;To support both methods a standard Servlet to handle streamed uploads would be needed, connecting the file request stream to the Resource output stream. In some cases (Oak S3 DS Async Uploads, Mongo DS) this wont entirely eliminate local disk IO, although in most cases the Resource output stream wrapps the final output stream. To maintain streaming a save operation may need to be performed for each upload to cause the request stream to be read.&lt;/p&gt;

&lt;p&gt;If this is a duplicate issue, please link.&lt;/p&gt;

&lt;p&gt;If you have input, please share.&lt;/p&gt;

&lt;p&gt;Have some patches in progress, would prefer Proposal 2, as Proposal 1 looks messy at the moment.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12995103">SLING-5948</key>
            <summary>Support Streaming uploads.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ianeboston">Ian Boston</assignee>
                                    <reporter username="ianeboston">Ian Boston</reporter>
                        <labels>
                            <label>Sling-9-ReleaseNotes</label>
                    </labels>
                <created>Fri, 5 Aug 2016 05:31:18 +0000</created>
                <updated>Fri, 17 Mar 2017 10:48:05 +0000</updated>
                            <resolved>Fri, 12 Aug 2016 12:00:10 +0000</resolved>
                                    <version>Servlets Post 2.3.12</version>
                    <version>Engine 2.5.0</version>
                                    <fixVersion>Servlets Post 2.3.14</fixVersion>
                    <fixVersion>Engine 2.6.0</fixVersion>
                                    <component>Engine</component>
                    <component>Servlets</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15411469" author="ianeboston" created="Mon, 8 Aug 2016 08:21:49 +0000"  >&lt;p&gt;Attaching illustrative patch of Proposal 1, also visible at &lt;a href=&quot;https://github.com/apache/sling/compare/trunk...ieb:SLING-5948-P1?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/compare/trunk...ieb:SLING-5948-P1?expand=1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This patch illustrates the problems with proposal 1 including the inconsistencies in the values of array parameters dependent on the order in which parameters are retrieved from the stream. &lt;/p&gt;

&lt;p&gt;Sharing only for completeness, not intending on continuing to develop proposal 1.&lt;/p&gt;</comment>
                            <comment id="15411551" author="ianeboston" created="Mon, 8 Aug 2016 09:13:26 +0000"  >&lt;p&gt;Basic Implementation of proposal 2  (Iterator&amp;lt;Part&amp;gt;) also visible at &lt;a href=&quot;https://github.com/apache/sling/compare/trunk...ieb:SLING-5948-P2?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/compare/trunk...ieb:SLING-5948-P2?expand=1&lt;/a&gt;, working on this one further.&lt;/p&gt;</comment>
                            <comment id="15411962" author="ianeboston" created="Mon, 8 Aug 2016 15:36:59 +0000"  >&lt;p&gt;Implementing the upload as Sling Operation and supporting the full Sling protocol as expressed in the ModifyOperation results in a significant amount of cut and paste coding from the Modify Operation as all the calls in the ModifyOperation expect to see Sling RequestProperty(s) in a Map, hence the class hierarchy can&apos;t be extended to work with Parts, unless 80% of the methods are refactored/duplicated. To avoid creating duplicate code to support, I will implement an UploadOperation that only supports upload. If a user wants to perform a non standard upload, they should create the target Resource in advance of the upload. Although this might be an overhead, streamed uploads are generally going to take time to complete so the overhead is probably acceptable.&lt;/p&gt;</comment>
                            <comment id="15413796" author="ianeboston" created="Tue, 9 Aug 2016 16:18:05 +0000"  >&lt;p&gt;Proposal 2 patch now includes upload support via a StreamingUploadOperaiton impl.&lt;/p&gt;</comment>
                            <comment id="15417350" author="ianeboston" created="Thu, 11 Aug 2016 14:41:35 +0000"  >&lt;p&gt;Added unit test coverage and tested successfully in in Sling launchpad.&lt;/p&gt;

&lt;p&gt;Apply the patch, &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;cd bundles/engine
mvn clean install
cd ../servlets/post
mvn clean install
cd ../../launchpad/builder
mvn clean install
java -jar target/org.apache.sling.launchpad-9-SNAPSHOT.jar &amp;amp;
tail -f sling/logs/error.log
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then Test normal upload &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl -v -F file=@P1060839.jpg http:&lt;span class=&quot;code-comment&quot;&gt;//admin:admin@localhost:8080/content/test&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then test streamed upload&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl -v -F P1060839.jpg=@P1060839.jpg http:&lt;span class=&quot;code-comment&quot;&gt;//admin:admin@localhost:8080/content/test?uploadmode=stream&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl -v -H &lt;span class=&quot;code-quote&quot;&gt;&quot;X-uploadmode: stream&quot;&lt;/span&gt; -F P1060839.jpg=@P1060839.jpg http:&lt;span class=&quot;code-comment&quot;&gt;//admin:admin@localhost:8080/content/test&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="15417491" author="ianeboston" created="Thu, 11 Aug 2016 16:01:07 +0000"  >&lt;p&gt;Tested with a 6GB file for both TarMK and TarMK+FDS with a 5.6GB zip file.&lt;br/&gt;
AEM running on a SSD. Source file on a External HDD over USB3. No network involved.&lt;/p&gt;

&lt;p&gt;Streamed upload into TarMK 4m1.138s elapsed. (23MB/s)&lt;br/&gt;
Streamed upload into TarMK with FDS 2m44.614s (34MB/s)&lt;br/&gt;
Non Streamed upload into TarMK with FDS 14m33.138s (6.56MB/s)&lt;br/&gt;
Direct OS level copy (cp) between disks 2m15.823s (42MB/s)&lt;/p&gt;


&lt;p&gt;The streaming upload shows a 5x improvement in upload performance in this test.&lt;/p&gt;

&lt;p&gt;TarMK with FDS streams directly to a tmp file in the FS DS location which is moved into the DS when complete with an OS level move. CPU usage is greater perhaps due to the way Oak performs the stream transfer (ie not using native channels)&lt;/p&gt;

&lt;p&gt;TarMK without FDS must put blobs into the segment store, hence the greater cost in terms of time and GC activity. CPU is lower, perhaps because it takes longer.&lt;/p&gt;

&lt;p&gt;TarMK with DS non streaming shows 2x the IO overhead and higher CPU usage. Not certain why the high CPU usage.&lt;/p&gt;

</comment>
                            <comment id="15417510" author="bdelacretaz" created="Thu, 11 Aug 2016 16:15:34 +0000"  >&lt;p&gt;I just had a quick look and the performance improvements are impressive, thanks for this!&lt;/p&gt;

&lt;p&gt;A nitpick: could the header be named &lt;tt&gt;X-sling-uploadmode&lt;/tt&gt; to be more specific?&lt;/p&gt;</comment>
                            <comment id="15417521" author="ianeboston" created="Thu, 11 Aug 2016 16:22:07 +0000"  >&lt;p&gt;&lt;tt&gt;X-sling-uploadmode&lt;/tt&gt; yes, no problem. &lt;/p&gt;</comment>
                            <comment id="15418432" author="rombert" created="Fri, 12 Aug 2016 06:51:01 +0000"  >&lt;p&gt;I suggest dropping the &apos;X-&apos; prefix, see &lt;a href=&quot;https://tools.ietf.org/html/rfc6648&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tools.ietf.org/html/rfc6648&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15418449" author="ianeboston" created="Fri, 12 Aug 2016 07:07:35 +0000"  >&lt;p&gt;Agreed, thank you for the rfc reference. Header is now &lt;tt&gt;Sling-uploadmode&lt;/tt&gt;, patch update and git commit pending for this change.&lt;/p&gt;</comment>
                            <comment id="15418641" author="ianeboston" created="Fri, 12 Aug 2016 10:28:27 +0000"  >&lt;p&gt;Patch in Git has been updated with comments so far and some cleanup. &lt;a href=&quot;https://github.com/apache/sling/compare/trunk...ieb:SLING-5948-P2?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/compare/trunk...ieb:SLING-5948-P2?expand=1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Doing a full build prior and final testing to committing.&lt;/p&gt;</comment>
                            <comment id="15418645" author="githubbot" created="Fri, 12 Aug 2016 10:30:32 +0000"  >&lt;p&gt;GitHub user ieb opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/161&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/161&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5948&quot; title=&quot;Support Streaming uploads.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5948&quot;&gt;&lt;del&gt;SLING-5948&lt;/del&gt;&lt;/a&gt; Support Streaming.&lt;/p&gt;

&lt;p&gt;    Creating pull request to trigger builds by CI and Travis. See issue for details. Will commit to SVN if all ok.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ieb/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ieb/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5948&quot; title=&quot;Support Streaming uploads.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5948&quot;&gt;&lt;del&gt;SLING-5948&lt;/del&gt;&lt;/a&gt;-P2&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/161.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/161.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #161&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b1409a08ac8aba80a41a4588b180fbf8f49c3319&lt;br/&gt;
Author: ieb &amp;lt;ieb@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-08-08T09:11:13Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5948&quot; title=&quot;Support Streaming uploads.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5948&quot;&gt;&lt;del&gt;SLING-5948&lt;/del&gt;&lt;/a&gt; Support Streaming - Implementation of proposal 1 using a Interator&amp;lt;Part&amp;gt;&lt;/p&gt;

&lt;p&gt;commit 870dd74f8f752e27bad2d0c4dd6937573342b941&lt;br/&gt;
Author: ieb &amp;lt;ieb@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-08-09T16:15:23Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5948&quot; title=&quot;Support Streaming uploads.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5948&quot;&gt;&lt;del&gt;SLING-5948&lt;/del&gt;&lt;/a&gt; Support Streaming - Implementation of StreamingUploadOperation to work with proposal 2 implemented in previous commit (Interator&amp;lt;Part&amp;gt;)&lt;/p&gt;

&lt;p&gt;commit b15bc88e9058d4944b9755a5d1493b7ee6b6b547&lt;br/&gt;
Author: ieb &amp;lt;ieb@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-08-11T14:35:18Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5948&quot; title=&quot;Support Streaming uploads.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5948&quot;&gt;&lt;del&gt;SLING-5948&lt;/del&gt;&lt;/a&gt; Support Streaming - Added unit test coverage and tested in launchpad&lt;/p&gt;

&lt;p&gt;commit 52e09abbc9b9fd23cc010b790e328a64bc554c78&lt;br/&gt;
Author: ieb &amp;lt;ieb@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-08-12T09:52:39Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5948&quot; title=&quot;Support Streaming uploads.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5948&quot;&gt;&lt;del&gt;SLING-5948&lt;/del&gt;&lt;/a&gt; Support Streaming - Cleaned up headers, added more javadoc, incorporated feedback from RTC&lt;/p&gt;

&lt;p&gt;commit 136555a9b387e739aebbd76e36d8d8bdae1ab217&lt;br/&gt;
Author: ieb &amp;lt;ieb@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-08-12T10:06:15Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5948&quot; title=&quot;Support Streaming uploads.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5948&quot;&gt;&lt;del&gt;SLING-5948&lt;/del&gt;&lt;/a&gt; Support Streaming - fixed imports and formatting&lt;/p&gt;

&lt;p&gt;commit 0b427bceb0b7396f0563f1b51d43a5463b9bb2a8&lt;br/&gt;
Author: ieb &amp;lt;ieb@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-08-12T10:08:52Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5948&quot; title=&quot;Support Streaming uploads.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5948&quot;&gt;&lt;del&gt;SLING-5948&lt;/del&gt;&lt;/a&gt; Support Streaming - removed default javadoc on test classes&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15418729" author="ianeboston" created="Fri, 12 Aug 2016 11:56:27 +0000"  >&lt;p&gt;JDK8 builds passed. JDK7 builds failed at launchpad, as it requires JDK8. Will commit.&lt;/p&gt;</comment>
                            <comment id="15418732" author="ianeboston" created="Fri, 12 Aug 2016 12:00:10 +0000"  >&lt;p&gt;Fixed in sequence ending &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk@1756172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk@1756172&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="15448766" author="satyadeep" created="Tue, 30 Aug 2016 11:17:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ianeboston&quot; class=&quot;user-hover&quot; rel=&quot;ianeboston&quot;&gt;ianeboston&lt;/a&gt;, while trying this out, I am seeing that the form fields that I am sending are getting detected as file which is to be streamed. For e.g. , here&apos;s the curl command that I am using:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl -o /dev/&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; -v -F key1=value1 -F file=@file.txt -w %{time_connect}:%{time_starttransfer}:%{time_total} http:&lt;span class=&quot;code-comment&quot;&gt;//admin:admin@localhost:8080/temp/file4?uploadmode=stream&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While trying to debug this, I see that on the server, at (1), the part containing &lt;tt&gt;key1=value1&lt;/tt&gt; gets detected as a file. This seems to be because of the way &lt;tt&gt;RequestPartsIterator.getSubmittedFileName&lt;/tt&gt; is implemented at (2),  &lt;/p&gt;

&lt;p&gt;Should it be implemented such that it specifically searches for the &lt;tt&gt;filename&lt;/tt&gt; header for returning the submitted filename?The multipart rfc at (3) indicates that &lt;tt&gt;filename&lt;/tt&gt; is a legitimate header for the part containing the file in a multipart request. Roughly, can we implement it as below?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;//Taken from https://java.net/jira/browse/SERVLET_SPEC-57
&lt;/span&gt;       &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getSubmittedFileName() {
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; header = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getHeader(&lt;span class=&quot;code-quote&quot;&gt;&quot;content-disposition&quot;&lt;/span&gt;);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(header == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; headerPart : header.split(&lt;span class=&quot;code-quote&quot;&gt;&quot;;&quot;&lt;/span&gt;))
            {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(headerPart.trim().startsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;filename&quot;&lt;/span&gt;))
                {
                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; headerPart.substring(headerPart.indexOf(&lt;span class=&quot;code-quote&quot;&gt;&apos;=&apos;&lt;/span&gt;) + 1).trim()
                            .replace(&lt;span class=&quot;code-quote&quot;&gt;&quot;\&quot;&lt;/span&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;, &quot;&lt;/span&gt;&quot;);
                }
            }
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shgupta%40adobe.com&quot; class=&quot;user-hover&quot; rel=&quot;shgupta@adobe.com&quot;&gt;shgupta@adobe.com&lt;/a&gt;&lt;br/&gt;
(1) - &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/servlets/post/src/main/java/org/apache/sling/servlets/post/impl/operations/StreamedUploadOperation.java#L95&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/servlets/post/src/main/java/org/apache/sling/servlets/post/impl/operations/StreamedUploadOperation.java#L95&lt;/a&gt;&lt;br/&gt;
(2) - &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/engine/src/main/java/org/apache/sling/engine/impl/parameters/RequestPartsIterator.java#L148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/engine/src/main/java/org/apache/sling/engine/impl/parameters/RequestPartsIterator.java#L148&lt;/a&gt;&lt;br/&gt;
(3) - &lt;a href=&quot;https://www.ietf.org/rfc/rfc2388.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.ietf.org/rfc/rfc2388.txt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15449000" author="ianeboston" created="Tue, 30 Aug 2016 13:24:11 +0000"  >&lt;p&gt;The way in which the file name is detected my be wrong. It delegates to the Commons File Upload FileItemStream.getFieldName() as was indicated in various examples, however, the JavaDoc at &lt;a href=&quot;https://commons.apache.org/proper/commons-fileupload/apidocs/org/apache/commons/fileupload/FileItemStream.html#getName--&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-fileupload/apidocs/org/apache/commons/fileupload/FileItemStream.html#getName--&lt;/a&gt; indicates that the getName method should be used. I have opened an new issue &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6017&quot; title=&quot;Streaming Uploads detection of request parameters is wrong.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6017&quot;&gt;&lt;del&gt;SLING-6017&lt;/del&gt;&lt;/a&gt; to fix this. &lt;/p&gt;

&lt;p&gt;We should not implement header parsing in the Sling code unless the code in FileUpload contains a bug.&lt;/p&gt;</comment>
                            <comment id="15929727" author="githubbot" created="Fri, 17 Mar 2017 10:48:05 +0000"  >&lt;p&gt;Github user ieb closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/161&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/161&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13001302">SLING-6017</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12822525" name="SLING-5948-Proposal1-illustration.patch" size="12788" author="ianeboston" created="Mon, 8 Aug 2016 08:21:49 +0000"/>
                            <attachment id="12822827" name="SLING-5948-Proposal2v2.patch" size="36330" author="ianeboston" created="Tue, 9 Aug 2016 16:18:05 +0000"/>
                            <attachment id="12823285" name="SLING-5948-Proposal2v3.patch" size="56062" author="ianeboston" created="Thu, 11 Aug 2016 14:41:35 +0000"/>
                            <attachment id="12823306" name="TarMKDSNotStreamed.png" size="92279" author="ianeboston" created="Thu, 11 Aug 2016 16:01:07 +0000"/>
                            <attachment id="12823304" name="TarMKDSStreamed.png" size="92777" author="ianeboston" created="Thu, 11 Aug 2016 16:01:07 +0000"/>
                            <attachment id="12823305" name="TarMKStreamed.png" size="74415" author="ianeboston" created="Thu, 11 Aug 2016 16:01:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31xzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5947] MockSlingHttpServletRequest used with SlingRequestProcessor causes UnsupportedOperationException</title>
                <link>https://issues.apache.org/jira/browse/SLING-5947</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;getServletPath()&lt;/tt&gt; throws the UnsupportedOperationException in MockSlingHttpServletRequest&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/sling/trunk/bundles/extensions/servlet-helpers/src/main/java/org/apache/sling/servlethelpers/MockSlingHttpServletRequest.java?revision=1728734&amp;amp;view=markup#l685&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/sling/trunk/bundles/extensions/servlet-helpers/src/main/java/org/apache/sling/servlethelpers/MockSlingHttpServletRequest.java?revision=1728734&amp;amp;view=markup#l685&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It gets called from the SlingHttpServletRequestImpl constructor &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/sling/trunk/bundles/engine/src/main/java/org/apache/sling/engine/impl/SlingHttpServletRequestImpl.java?view=markup#l71&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/sling/trunk/bundles/engine/src/main/java/org/apache/sling/engine/impl/SlingHttpServletRequestImpl.java?view=markup#l71&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;causing the following stacktrace:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.UnsupportedOperationException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
        at org.apache.sling.servlethelpers.MockSlingHttpServletRequest.getServletPath(MockSlingHttpServletRequest.java:685)
        at org.apache.sling.engine.impl.SlingHttpServletRequestImpl.&amp;lt;init&amp;gt;(SlingHttpServletRequestImpl.java:71)
        at org.apache.sling.engine.impl.request.RequestData$1.createRequest(RequestData.java:700)
        at org.apache.sling.engine.impl.request.RequestData.&amp;lt;init&amp;gt;(RequestData.java:215)
        at org.apache.sling.engine.impl.SlingRequestProcessorImpl.doProcessRequest(SlingRequestProcessorImpl.java:121)
        at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processRequest(SlingRequestProcessorImpl.java:247)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12994865">SLING-5947</key>
            <summary>MockSlingHttpServletRequest used with SlingRequestProcessor causes UnsupportedOperationException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="diru">Dirk Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Aug 2016 11:14:27 +0000</created>
                <updated>Thu, 15 Jun 2017 09:45:21 +0000</updated>
                            <resolved>Fri, 5 Aug 2016 12:32:13 +0000</resolved>
                                    <version>Servlet Helpers 1.0.0</version>
                                    <fixVersion>Servlet Helpers 1.0.2</fixVersion>
                    <fixVersion>Servlet Helpers 1.1.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15409152" author="diru" created="Fri, 5 Aug 2016 08:23:55 +0000"  >&lt;p&gt;Same applies for &lt;tt&gt;getPathInfo()&lt;/tt&gt;, &lt;tt&gt;getRequestURI()&lt;/tt&gt;, &lt;tt&gt;getRequestURL()&lt;/tt&gt;, &lt;tt&gt;getAuthType()&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15409301" author="diru" created="Fri, 5 Aug 2016 10:38:26 +0000"  >&lt;p&gt;Fix Version should be 1.1.0 as this changes the API of MockSlingHttpServletRequest by adding additional setters. &lt;/p&gt;</comment>
                            <comment id="15409393" author="kwin" created="Fri, 5 Aug 2016 12:32:13 +0000"  >&lt;p&gt;Applied the PR from &lt;a href=&quot;https://github.com/apache/sling/pull/160/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/160/files&lt;/a&gt; in &lt;a href=&quot;https://svn.apache.org/r1755308&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1755308&lt;/a&gt;. Let&apos;s decide later what the next release version is, for now just set the fix version to the next planned release, which is 1.0.2.&lt;/p&gt;</comment>
                            <comment id="16050242" author="sseifert@pro-vision.de" created="Thu, 15 Jun 2017 09:45:21 +0000"  >&lt;p&gt;backporting this ticket to 1.0.x version range of servlet helpers (in this case: 1.0.2) - which is compatible with sling mocks 1.x without updating to Servlet API 3.1 (which is part of servlet helpers 1.1.0).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13078599">SLING-6947</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13080022">SLING-6962</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31win:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5946] XSSAPI#encodeForJSString is not restrictive enough</title>
                <link>https://issues.apache.org/jira/browse/SLING-5946</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Since &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5445&quot; title=&quot;XSSAPI#encodeForJSString is too restrictive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5445&quot;&gt;&lt;del&gt;SLING-5445&lt;/del&gt;&lt;/a&gt;, &lt;tt&gt;XSSAPI#encodeForJSString&lt;/tt&gt; is no longer properly encoding &lt;tt&gt;&amp;lt;/script&amp;gt;&lt;/tt&gt; and &lt;tt&gt;&amp;lt;!--&lt;/tt&gt;. We should revert to using OWASP &lt;tt&gt;Encode#forJavaScript&lt;/tt&gt; and handle - characters correctly for JSON too, by replacing them with &lt;tt&gt;\u002D&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12994605">SLING-5946</key>
            <summary>XSSAPI#encodeForJSString is not restrictive enough</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="vladb">Vlad Bailescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Aug 2016 14:40:44 +0000</created>
                <updated>Wed, 8 Feb 2023 12:01:12 +0000</updated>
                            <resolved>Thu, 4 Aug 2016 08:43:31 +0000</resolved>
                                    <version>XSS Protection API 1.0.8</version>
                                    <fixVersion>XSS Protection API 1.0.12</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15406023" author="vladb" created="Wed, 3 Aug 2016 14:54:15 +0000"  >&lt;p&gt;Added proposed patch&lt;/p&gt;</comment>
                            <comment id="15407429" author="rombert" created="Thu, 4 Aug 2016 08:43:31 +0000"  >&lt;p&gt;Applied in &lt;a href=&quot;https://svn.apache.org/r1755147&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1755147&lt;/a&gt;, thanks for the contribution!&lt;/p&gt;</comment>
                            <comment id="16988288" author="ilatypov" created="Wed, 4 Dec 2019 23:20:40 +0000"  >&lt;p&gt;Please reopen this due to an improper implementation risking exceptions in strict javascript engines.&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;return source == null ? null : Encode.forJavaScript(source).replace(&quot;&amp;#x5C;&amp;#x5C;-&quot;, &quot;&amp;#x5C;&amp;#x5C;u002D&quot;);&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&#160;&lt;br/&gt;
 Substitutes on top of the encoder&apos;s result with the intent to correct the encoder are near-sighted (i.e. suffer from the context-free approach). If &lt;tt&gt;source&lt;/tt&gt; had a backslash followed by a dash, i.e. &lt;tt&gt;raw &amp;#x5C;&amp;#x2D;&lt;/tt&gt;, the &lt;tt&gt;forJavaScript&lt;/tt&gt; call would properly change the backslash into 2 backslashes &lt;tt&gt;raw &amp;#x5C;&amp;#x5C;&amp;#x2D;&lt;/tt&gt; (this would result in the javascript engine turning the string literal back to &lt;tt&gt;raw &amp;#x5C;&amp;#x2D;&lt;/tt&gt;). But the subsequent &lt;tt&gt;replace&lt;/tt&gt; call will destroy the context of the second backslash, turning the string into &lt;tt&gt;raw &amp;#x5C;&amp;#x5C;u002D&lt;/tt&gt; which would turn to &lt;tt&gt;raw &amp;#x5C;u002D&lt;/tt&gt; in the javascript engine&apos;s variable.&lt;/p&gt;

&lt;p&gt;I argue for dropping the &lt;tt&gt;.replace()&lt;/tt&gt; call (aiming at disabling malicious comment injection) here and encoding the opening angle bracket &lt;tt&gt;raw &amp;lt;&lt;/tt&gt; as &lt;tt&gt;raw &amp;#x5C;u003C&lt;/tt&gt; in the &lt;tt&gt;Encode.forJavaScript&lt;/tt&gt; implementation. This will protect against both the malicious comment injection and the injection of closing script tags &lt;tt&gt;raw &amp;#x3C;&amp;#x5C;script&amp;gt;&lt;/tt&gt; forcing the javascript interpreter to drop out of the string literal context and drop out of the script context.&lt;/p&gt;

&lt;p&gt;The existing prefixing of forward slashes with a backslash agrees with JSON but not with Javascript. It should be removed in favour of replacing just the opening angle bracket.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SingleEscapeCharacter :: one of
&apos; &quot; \ b f n r t v
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://www.ecma-international.org/ecma-262/6.0/#sec-literals-string-literals&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.ecma-international.org/ecma-262/6.0/#sec-literals-string-literals&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String#Escape_notation&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String#Escape_notation&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16988471" author="ilatypov" created="Thu, 5 Dec 2019 05:04:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu&quot; class=&quot;user-hover&quot; rel=&quot;radu&quot;&gt;radu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vladb&quot; class=&quot;user-hover&quot; rel=&quot;vladb&quot;&gt;vladb&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16988617" author="rombert" created="Thu, 5 Dec 2019 09:57:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ilatypov&quot; class=&quot;user-hover&quot; rel=&quot;ilatypov&quot;&gt;ilatypov&lt;/a&gt; - thank you for digging this up and for providing the extra context. This issue has been closed and we can&apos;t reopen it due to how our Jira workflows are set up. Could I ask you to create a new Jira issue? Thanks&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13272535">SLING-8879</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13523760">SLING-11768</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12821844" name="SLING_5946.patch" size="2367" author="vladb" created="Wed, 3 Aug 2016 14:54:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 46 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31uwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5945] Using opening angle brackets twice in expression language leads to token recognition error</title>
                <link>https://issues.apache.org/jira/browse/SLING-5945</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The following Sightly expression leads to an exception when used inside a block element&apos;s content&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; ${&lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;{0}&amp;gt; &amp;lt;/{0}&amp;gt;&apos;&lt;/span&gt; @ format=[&lt;span class=&quot;code-quote&quot;&gt;&apos;myelement&apos;&lt;/span&gt;], context=&lt;span class=&quot;code-quote&quot;&gt;&apos;unsafe&apos;&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;.&lt;br/&gt;
The error is &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;token recognition error at: &lt;span class=&quot;code-quote&quot;&gt;&apos;&apos;&amp;lt;{0}&amp;gt;&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; expression ${&apos;&amp;lt;{0}&amp;gt;
	at org.apache.sling.scripting.sightly.impl.engine.UnitLoader.getSourceCodeForScript(UnitLoader.java:135)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;On the other hand&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; ${&lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;{0} /&amp;gt; &apos;&lt;/span&gt; @ format=[&lt;span class=&quot;code-quote&quot;&gt;&apos;myelement&apos;&lt;/span&gt;], context=&lt;span class=&quot;code-quote&quot;&gt;&apos;unsafe&apos;&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;works without any issues.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12994532">SLING-5945</key>
            <summary>Using opening angle brackets twice in expression language leads to token recognition error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Aug 2016 09:37:29 +0000</created>
                <updated>Thu, 8 Sep 2016 18:27:16 +0000</updated>
                            <resolved>Fri, 26 Aug 2016 14:21:14 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.18</version>
                                    <fixVersion>Scripting HTL Engine 1.0.20</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15438941" author="radu.cotescu" created="Fri, 26 Aug 2016 13:53:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;, can you please provide me with the full info here? You say that you&apos;re trying to use that expression inside a block element&apos;s content. Do you refer to something like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;div data-sly-text=&lt;span class=&quot;code-quote&quot;&gt;&quot;${&lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;{0}&amp;gt;&lt;/span&gt; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/{0}&amp;gt;&lt;/span&gt;&apos;&lt;/span&gt; @ format=[&lt;span class=&quot;code-quote&quot;&gt;&apos;myelement&apos;&lt;/span&gt;], context=&lt;span class=&quot;code-quote&quot;&gt;&apos;unsafe&apos;&lt;/span&gt;}&quot;&lt;/span&gt;&amp;gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This works. However, if you want this expression to be parsed from a Text Node that will not work - a script is first parsed by the HTML parser and only then by the Sightly parser.&lt;/p&gt;</comment>
                            <comment id="15439097" author="kwin" created="Fri, 26 Aug 2016 14:08:49 +0000"  >&lt;p&gt;Actually I was writing the expression directly inside a Text node. It works if there are no angle brackets being used twice there. Maybe you can at least improve the exception message. It is not obvious to me that an HTML parser is active before the Sightly parser kicks in. Is that somewhere documented? If not could you add that to &lt;a href=&quot;https://sling.apache.org/documentation/bundles/scripting/scripting-sightly.html?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/scripting/scripting-sightly.html?&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15439121" author="radu.cotescu" created="Fri, 26 Aug 2016 14:20:43 +0000"  >&lt;p&gt;Well, I&apos;m not sure how we could improve the exception&apos;s message: the HTML parser, wether that&apos;s separate or not, will see a tag end event, therefore the Sightly parser will receive this text node: &lt;tt&gt;${&apos;&amp;lt;{0}&amp;gt;&lt;/tt&gt; to process. Obviously, that&apos;s an expression start which will be processed by the Sightly parser.&lt;/p&gt;

&lt;p&gt;The HTML parser must cope with tag soup as well, the reason for this being that you could compose the actual rendering of a page using multiple files, where you could very well open a tag in one and close it into another. If you have a suggestion for the documentation page I&apos;d be happy to review it.&lt;/p&gt;

&lt;p&gt;BTW, what you&apos;ve tried to achieve here can now be done like in the following example, given that we&apos;ve fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5944&quot; title=&quot;Sightly doesn&amp;#39;t allow to overwrite the context for `data-sly-element`&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5944&quot;&gt;&lt;del&gt;SLING-5944&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;div data-sly-element=&lt;span class=&quot;code-quote&quot;&gt;&quot;${&lt;span class=&quot;code-quote&quot;&gt;&apos;custom-tag&apos;&lt;/span&gt; @ context=&lt;span class=&quot;code-quote&quot;&gt;&apos;unsafe&apos;&lt;/span&gt;}&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Hello&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15439154" author="kwin" created="Fri, 26 Aug 2016 14:33:00 +0000"  >&lt;p&gt;Ok, now I do understand. Actually I had to come up with such a weird expression only because of issue &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5944&quot; title=&quot;Sightly doesn&amp;#39;t allow to overwrite the context for `data-sly-element`&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5944&quot;&gt;&lt;del&gt;SLING-5944&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I would suggest to come up with a short introduction paragraph in &lt;a href=&quot;https://sling.apache.org/documentation/bundles/scripting/scripting-sightly.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/scripting/scripting-sightly.html&lt;/a&gt; stating that the Sightly parser is triggered after regular HTML parsing. That means that Sightly scripts always have to be valid HTML. Since that is a fundamental difference to JSP (and most people are used to JSP) it is worth mentioning that.&lt;/p&gt;

&lt;p&gt;Probably it should be mentioned even in the HTL Spec at &lt;a href=&quot;https://github.com/Adobe-Marketing-Cloud/htl-spec/blob/master/SPECIFICATION.md&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Marketing-Cloud/htl-spec/blob/master/SPECIFICATION.md&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31ugn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5944] Sightly doesn&apos;t allow to overwrite the context for `data-sly-element`</title>
                <link>https://issues.apache.org/jira/browse/SLING-5944</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;For the following Sightly script&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;a data-sly-element=&lt;span class=&quot;code-quote&quot;&gt;&quot;${&lt;span class=&quot;code-quote&quot;&gt;&apos;invalidelement&apos;&lt;/span&gt; @ context=&lt;span class=&quot;code-quote&quot;&gt;&apos;unsafe&apos;&lt;/span&gt;}&quot;&lt;/span&gt;&amp;gt;&amp;lt;/a&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the generated Servlet looks like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; var_tagvar0 = renderContext.call(&lt;span class=&quot;code-quote&quot;&gt;&quot;xss&quot;&lt;/span&gt;, renderContext.call(&lt;span class=&quot;code-quote&quot;&gt;&quot;xss&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;invalidelement&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;unsafe&quot;&lt;/span&gt;), &lt;span class=&quot;code-quote&quot;&gt;&quot;elementName&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (RenderUtils.toBoolean(var_tagvar0)) {
        out.write(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;&quot;&lt;/span&gt;);
        out.write(RenderUtils.toString(var_tagvar0));
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!RenderUtils.toBoolean(var_tagvar0)) {
        out.write(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;a&quot;&lt;/span&gt;);
    }
    out.write(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;gt;&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (RenderUtils.toBoolean(var_tagvar0)) {
        out.write(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;/&quot;&lt;/span&gt;);
        out.write(RenderUtils.toString(var_tagvar0));
        out.write(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;gt;&quot;&lt;/span&gt;);
    }
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!RenderUtils.toBoolean(var_tagvar0)) {
        out.write(&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;lt;/a&amp;gt;&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So the element name is XSS protected twice. First with &apos;unsafe&apos; (which doesn&apos;t modify the given literal) and then with &apos;elementname&apos;, which removes the literal.&lt;br/&gt;
Therefore the generated HTML from the servlet is &lt;tt&gt;&amp;lt;a&amp;gt;&amp;lt;/a&amp;gt;&lt;/tt&gt; instead of &lt;tt&gt;&amp;lt;invalidelement&amp;gt;&amp;lt;/invalidelement&amp;gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;This contradicts the documentation at &lt;a href=&quot;https://docs.adobe.com/docs/en/htl/docs/block-statements.html#element&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.adobe.com/docs/en/htl/docs/block-statements.html#element&lt;/a&gt; which says&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For security reasons, data-sly-element accepts only the following element names:&lt;br/&gt;
a abbr address article aside b bdi bdo blockquote br caption cite code col colgroup&lt;br/&gt;
data dd del dfn div dl dt em figcaption figure footer h1 h2 h3 h4 h5 h6 header i ins&lt;br/&gt;
kbd li main mark nav ol p pre q rp rt ruby s samp section small span strong sub &lt;br/&gt;
sup table tbody td tfoot th thead time tr u var wbr&lt;/p&gt;

&lt;p&gt;To set other elements, XSS security must be turned off (@context=&apos;unsafe&apos;).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The HTL spec only says&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The element name is automatically XSS-protected with the elementName context, which by the way doesn&apos;t allow elements like &amp;lt;script&amp;gt;, &amp;lt;style&amp;gt;, &amp;lt;form&amp;gt;, or &amp;lt;input&amp;gt; (see the Display Context section for the exact list).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;(&lt;a href=&quot;https://github.com/Adobe-Marketing-Cloud/htl-spec/blob/master/SPECIFICATION.md#224-element&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Adobe-Marketing-Cloud/htl-spec/blob/master/SPECIFICATION.md#224-element&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I am wondering, if it really is just impossible to give out arbitrary tag names with &lt;tt&gt;data-sly-element&lt;/tt&gt;. &lt;br/&gt;
IMHO if another context is given, that one should replace the &quot;elementName&quot; context, instead of being added on top.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12994515">SLING-5944</key>
            <summary>Sightly doesn&apos;t allow to overwrite the context for `data-sly-element`</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Aug 2016 07:56:13 +0000</created>
                <updated>Wed, 14 Mar 2018 12:56:31 +0000</updated>
                            <resolved>Fri, 19 Aug 2016 13:35:24 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.18</version>
                                    <fixVersion>Scripting HTL Engine 1.0.20</fixVersion>
                    <fixVersion>Scripting HTL Compiler 1.0.0</fixVersion>
                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="15405544" author="kwin" created="Wed, 3 Aug 2016 08:16:33 +0000"  >&lt;p&gt;Since the list of allowed element names is hard coded in &lt;a href=&quot;https://github.com/apache/sling/blob/1aa2c8be782ecb858de9030501e67edc4aba1357/bundles/scripting/sightly/engine/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/XSSRuntimeExtension.java#L168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/1aa2c8be782ecb858de9030501e67edc4aba1357/bundles/scripting/sightly/engine/src/main/java/org/apache/sling/scripting/sightly/impl/engine/extension/XSSRuntimeExtension.java#L168&lt;/a&gt; currently there is no way to output other element names through &lt;tt&gt;data-sly-element&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15426755" author="radu.cotescu" created="Thu, 18 Aug 2016 16:31:33 +0000"  >&lt;p&gt;I guess the better approach here would be to actually allow switching the context to &apos;unsafe&apos;. BTW, the source of truth is the HTL specification. I&apos;ll ask my documentation colleagues to correct the information from &lt;a href=&quot;https://docs.adobe.com/docs/en/htl/docs/block-statements.html#element&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.adobe.com/docs/en/htl/docs/block-statements.html#element&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15426765" author="kwin" created="Thu, 18 Aug 2016 16:36:47 +0000"  >&lt;p&gt;Yes, I would also like it better if Sightly would allow to explicitly switch the context. If that is possible the Adobe documentation doesn&apos;t need to be fixed.&lt;br/&gt;
Otherwise if we stick to what has been specified in the HTL spec the usage of data-sly-element is quite limited IMHO (just think about AngularJS directives which are based on an element names).&lt;/p&gt;</comment>
                            <comment id="15428191" author="radu.cotescu" created="Fri, 19 Aug 2016 13:35:25 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1756915&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1756915&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13091141">SLING-7024</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12945297">SLING-5568</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13073402">SLING-6866</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31ucv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5931] Unable to register a servlet using the R6 Http Service Whiteboard</title>
                <link>https://issues.apache.org/jira/browse/SLING-5931</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Servlets using the R6 Whiteboard properties are not registered.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12993935">SLING-5931</key>
            <summary>Unable to register a servlet using the R6 Http Service Whiteboard</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Aug 2016 12:05:00 +0000</created>
                <updated>Mon, 21 Nov 2022 15:08:55 +0000</updated>
                            <resolved>Tue, 2 Aug 2016 13:25:25 +0000</resolved>
                                                    <fixVersion>Launchpad Testing 10</fixVersion>
                                    <component>Launchpad</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15401925" author="rombert" created="Mon, 1 Aug 2016 12:06:35 +0000"  >&lt;p&gt;Added a disabled test in &lt;a href=&quot;https://svn.apache.org/r1754740&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1754740&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15401931" author="cziegeler" created="Mon, 1 Aug 2016 12:17:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; What exactly is not working? I&apos;m using whiteboarded servlets with Sling without any problems&lt;/p&gt;</comment>
                            <comment id="15401960" author="rombert" created="Mon, 1 Aug 2016 12:41:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; as mentioned on the user&apos;s list, I see that all other servlets are registered under Servlet Context &apos;org.osgi.service.http&apos;, while this one is registered under&lt;br/&gt;
Servlet Context &apos;default&apos;.&lt;/p&gt;</comment>
                            <comment id="15403955" author="rombert" created="Tue, 2 Aug 2016 13:25:26 +0000"  >&lt;p&gt;Corrected the registration and enabled the test in &lt;a href=&quot;https://svn.apache.org/r1754913&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1754913&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13502714">SLING-11677</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12978152">SLING-5782</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31qs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5920] org.apache.sling.validation.testservices.ValidationServiceTest.testValidRequestModel1 fails with server startup</title>
                <link>https://issues.apache.org/jira/browse/SLING-5920</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.AssertionError: Server not ready after 60 seconds, giving up
        at org.junit.Assert.fail(Assert.java:91)
        at org.apache.sling.testing.tools.sling.SlingTestBase.waitForServerReady(SlingTestBase.java:326)
        at org.apache.sling.testing.tools.sling.SlingTestBase.startServerIfNeeded(SlingTestBase.java:169)
        at org.apache.sling.testing.tools.sling.SlingTestBase.getRequestBuilder(SlingTestBase.java:225)
        at org.apache.sling.validation.testservices.ValidationServiceTest.testValidRequestModel1(ValidationServiceTest.java:50)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12993464">SLING-5920</key>
            <summary>org.apache.sling.validation.testservices.ValidationServiceTest.testValidRequestModel1 fails with server startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ianeboston">Ian Boston</assignee>
                                    <reporter username="ianeboston">Ian Boston</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Fri, 29 Jul 2016 06:20:30 +0000</created>
                <updated>Tue, 2 Aug 2016 10:30:35 +0000</updated>
                            <resolved>Tue, 2 Aug 2016 10:30:34 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15398793" author="ianeboston" created="Fri, 29 Jul 2016 06:21:56 +0000"  >&lt;p&gt;test output attached.&lt;/p&gt;</comment>
                            <comment id="15398795" author="ianeboston" created="Fri, 29 Jul 2016 06:22:44 +0000"  >&lt;p&gt;git log indicates you are the best person to look at this. Please re-assign if not.&lt;/p&gt;</comment>
                            <comment id="15403734" author="ianeboston" created="Tue, 2 Aug 2016 10:30:34 +0000"  >&lt;p&gt;Version of SLF4J in pom was 1.6.4 preventing the OSGi container from starting due to other jars depending on &amp;gt; 1.7.6. Now using the version defined in the parent pom. How this unit test was not failing for everyone, I don&apos;t understand.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12820887" name="TEST-org.apache.sling.validation.testservices.ValidationServiceTest.xml" size="135449" author="ianeboston" created="Fri, 29 Jul 2016 06:21:56 +0000"/>
                            <attachment id="12820888" name="org.apache.sling.validation.testservices.ValidationServiceTest.txt" size="1703" author="ianeboston" created="Fri, 29 Jul 2016 06:21:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31nvj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5919] org.apache.sling.testing.samples.modulewit.BasicTeleportedIT.testConfigAdmin times out.</title>
                <link>https://issues.apache.org/jira/browse/SLING-5919</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Timeout waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; test at http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:57998/system/sling/junit/org.apache.sling.testing.samples.modulewit.BasicTeleportedIT/testConfigAdmin.junit_result (5 seconds)&lt;span class=&quot;code-quote&quot;&gt;&quot; type=&quot;&lt;/span&gt;java.lang.AssertionError&quot;&amp;gt;java.lang.AssertionError: Timeout waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; test at http://localhost:57998/system/sling/junit/org.apache.sling.testing.samples.modulewit.BasicTeleportedIT/testConfigAdmin.junit_result (5 seconds)
&lt;/span&gt;        at org.junit.Assert.fail(Assert.java:88)
        at org.apache.sling.testing.teleporter.client.TeleporterHttpClient.runTests(TeleporterHttpClient.java:165)
        at org.apache.sling.testing.teleporter.client.ClientSideTeleporter$2.evaluate(ClientSideTeleporter.java:200)
        at org.junit.rules.RunRules.evaluate(RunRules.java:20)
        at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;XML test output to follow.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12993460">SLING-5919</key>
            <summary>org.apache.sling.testing.samples.modulewit.BasicTeleportedIT.testConfigAdmin times out.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ianeboston">Ian Boston</assignee>
                                    <reporter username="ianeboston">Ian Boston</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Fri, 29 Jul 2016 06:15:45 +0000</created>
                <updated>Mon, 1 Aug 2016 16:13:43 +0000</updated>
                            <resolved>Mon, 1 Aug 2016 16:13:43 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15398783" author="ianeboston" created="Fri, 29 Jul 2016 06:17:03 +0000"  >&lt;p&gt;failing test output.&lt;/p&gt;</comment>
                            <comment id="15398789" author="ianeboston" created="Fri, 29 Jul 2016 06:18:03 +0000"  >&lt;p&gt;git log indicates you are the best person to look at this. If not please reasign.&lt;/p&gt;</comment>
                            <comment id="15402125" author="rombert" created="Mon, 1 Aug 2016 14:31:39 +0000"  >&lt;p&gt;The interesting part is that the test consistently passes for me locally.&lt;/p&gt;</comment>
                            <comment id="15402323" author="ianeboston" created="Mon, 1 Aug 2016 16:13:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk@1754772&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk@1754772&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;by increasing the timeout from 5 to 20s. &lt;br/&gt;
Also saw failures 50% of the time in ClientSideTeleporter, increased timeout there as well.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12820885" name="TEST-org.apache.sling.testing.samples.modulewit.BasicTeleportedIT.xml" size="8278" author="ianeboston" created="Fri, 29 Jul 2016 06:17:03 +0000"/>
                            <attachment id="12820884" name="org.apache.sling.testing.samples.modulewit.BasicTeleportedIT.txt" size="2285" author="ianeboston" created="Fri, 29 Jul 2016 06:17:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31nun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5918] org.apache.sling.discovery.impl.cluster.voting.VotingHandlerTest.testFastConcurrentVotesFiveNodes fails with NPE</title>
                <link>https://issues.apache.org/jira/browse/SLING-5918</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;testFastConcurrentVotesFiveNodes fails on JDK8 build. see attached text XML output.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12993456">SLING-5918</key>
            <summary>org.apache.sling.discovery.impl.cluster.voting.VotingHandlerTest.testFastConcurrentVotesFiveNodes fails with NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="ianeboston">Ian Boston</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Fri, 29 Jul 2016 06:08:22 +0000</created>
                <updated>Fri, 5 May 2017 13:10:54 +0000</updated>
                            <resolved>Mon, 15 Aug 2016 12:33:21 +0000</resolved>
                                                    <fixVersion>Discovery Impl 1.2.10</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15398774" author="ianeboston" created="Fri, 29 Jul 2016 06:09:52 +0000"  >&lt;p&gt;Test output from failing build.&lt;/p&gt;</comment>
                            <comment id="15398777" author="ianeboston" created="Fri, 29 Jul 2016 06:11:39 +0000"  >&lt;p&gt;Based on git log you are probably the right person to fix this. Please redirect if not.&lt;/p&gt;</comment>
                            <comment id="15420915" author="egli" created="Mon, 15 Aug 2016 12:33:21 +0000"  >&lt;p&gt;fixed in rev 1756373&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12820882" name="TEST-org.apache.sling.discovery.impl.cluster.voting.VotingHandlerTest.xml" size="806115" author="ianeboston" created="Fri, 29 Jul 2016 06:09:52 +0000"/>
                            <attachment id="12820883" name="org.apache.sling.discovery.impl.cluster.voting.VotingHandlerTest.txt" size="817" author="ianeboston" created="Fri, 29 Jul 2016 06:09:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 11 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31ntr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5917] parseRawText flag in getRepoInitText() is ambiguous</title>
                <link>https://issues.apache.org/jira/browse/SLING-5917</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;b&gt;current:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    private String getRepoInitText() {
        final boolean parseRawText = modelSectionName.trim().length() &amp;gt; 0;
        if(parseRawText) {
            log.info(&quot;Reading repoinit statements from {}&quot;, textURL);
        } else {
            log.info(&quot;Extracting repoinit statements from section {} of provisioning model {}&quot;, modelSectionName, textURL);
        }
        String result = getRawRepoInitText();
        log.debug(&quot;Raw text from {}: \n{}&quot;, textURL, result);
        log.info(&quot;Got {} characters from {}&quot;, result.length(), textURL);
        if(parseRawText) {
            final StringReader r = new StringReader(result);
            try {
                final Model m = ModelReader.read(r, textURL);
                final StringBuilder b = new StringBuilder();
                for(Feature f : m.getFeatures()) {
                    for(Section s : f.getAdditionalSections(modelSectionName)) {
                        b.append(&quot;# &quot;).append(modelSectionName).append(&quot; from &quot;).append(f.getName()).append(&quot;\n&quot;);
                        b.append(&quot;# &quot;).append(s.getComment()).append(&quot;\n&quot;);
                        b.append(s.getContents()).append(&quot;\n&quot;);
                    }
                }
                result = b.toString();
            } catch (IOException e) {
                result = &quot;&quot;;
                log.warn(&quot;Error parsing provisioning model from &quot; + textURL, e);
            }
        }
        return result;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;b&gt;improved:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    private String getRepoInitText() {
        final String rawText = getRawRepoInitText();
        log.debug(&quot;Raw text from {}: \n{}&quot;, textURL, rawText);
        log.info(&quot;Got {} characters from {}&quot;, rawText.length(), textURL);
        final boolean parseRawText = modelSectionName.trim().length() == 0;
        if (parseRawText) {
            log.info(&quot;Parsing raw repoinit statements from {}&quot;, textURL);
            return rawText;
        } else {
            log.info(&quot;Extracting repoinit statements from section &apos;{}&apos; of provisioning model {}&quot;, modelSectionName, textURL);
            final StringReader reader = new StringReader(rawText);
            try {
                final Model model = ModelReader.read(reader, textURL);
                final StringBuilder sb = new StringBuilder();
                for (Feature feature : model.getFeatures()) {
                    for (Section section : feature.getAdditionalSections(modelSectionName)) {
                        sb.append(&quot;# &quot;).append(modelSectionName).append(&quot; from &quot;).append(feature.getName()).append(&quot;\n&quot;);
                        sb.append(&quot;# &quot;).append(section.getComment()).append(&quot;\n&quot;);
                        sb.append(section.getContents()).append(&quot;\n&quot;);
                    }
                }
                return sb.toString();
            } catch (IOException e) {
                log.warn(&quot;Error parsing provisioning model from &quot; + textURL, e);
                return &quot;&quot;;
            }
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12993373">SLING-5917</key>
            <summary>parseRawText flag in getRepoInitText() is ambiguous</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jul 2016 21:39:10 +0000</created>
                <updated>Mon, 22 Aug 2016 16:17:13 +0000</updated>
                            <resolved>Fri, 29 Jul 2016 07:13:46 +0000</resolved>
                                    <version>Repoinit JCR 1.0.0</version>
                                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15398857" author="olli" created="Fri, 29 Jul 2016 07:13:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1754481&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1754481&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15399036" author="bdelacretaz" created="Fri, 29 Jul 2016 09:34:33 +0000"  >&lt;p&gt;Thanks for this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt;! I have added a test for the two ways of reading the repoinit statements, in &lt;a href=&quot;http://svn.apache.org/r1754490&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1754490&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15399228" author="bdelacretaz" created="Fri, 29 Jul 2016 12:17:00 +0000"  >&lt;p&gt;FWIW I have created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5923&quot; title=&quot;Support &amp;lt;RAW&amp;gt; marker in model.section.name config param of jcr.repoinit.RepositoryInitializer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5923&quot;&gt;&lt;del&gt;SLING-5923&lt;/del&gt;&lt;/a&gt; to support &quot;&amp;lt;RAW&amp;gt;&quot; with the same meaning as an empty model.section parameter to make it more convenient to configure.&lt;/p&gt;</comment>
                            <comment id="15431105" author="bdelacretaz" created="Mon, 22 Aug 2016 16:17:12 +0000"  >&lt;p&gt;Closing this ticket and removing the fix version, as we won&apos;t released this code in the end, replaced by the more flexible &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5969&quot; title=&quot;Support multiple model/raw sources in jcr.repoinit.RepositoryInitializer configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5969&quot;&gt;&lt;del&gt;SLING-5969&lt;/del&gt;&lt;/a&gt; mechanism.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12993525">SLING-5923</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31nbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5916] Remove all usages of jobManager.findJobs in SCD</title>
                <link>https://issues.apache.org/jira/browse/SLING-5916</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Given the latest discussions on the Sling dev@ list it&apos;d be good to stop using &lt;tt&gt;JobManager#findJobs&lt;/tt&gt; API at all in the SCD code (for the jobs based queues).&lt;br/&gt;
This would require either accepting queues cannot be inspected in detail (which / how many items there are in each queue) or rely on different constructs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12993257">SLING-5916</key>
            <summary>Remove all usages of jobManager.findJobs in SCD</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="teofili">Tommaso Teofili</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jul 2016 14:47:58 +0000</created>
                <updated>Wed, 19 Sep 2018 09:13:56 +0000</updated>
                                                                            <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31mlj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5915] Fix IT failures in Content Distribution</title>
                <link>https://issues.apache.org/jira/browse/SLING-5915</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently there&apos;re the following IT failures that we should fix before releasing SDC core 0.2.0.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 13, Failures: 1, Errors: 0, Skipped: 1, Time elapsed: 215.478 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.distribution.it.DistributionAgentResourcesIntegrationTest
testAgentConfigurationResourceExtended(org.apache.sling.distribution.it.DistributionAgentResourcesIntegrationTest)  Time elapsed: 100.974 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: path /etc/distribution/sample-create-config067f89fb-b059-4fde-84c8-411130681261 doesn&apos;t exist
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.apache.sling.distribution.it.DistributionUtils.assertExists(DistributionUtils.java:198)
	at org.apache.sling.distribution.it.DistributionAgentResourcesIntegrationTest.testAgentConfigurationResourceExtended(DistributionAgentResourcesIntegrationTest.java:174)

Tests run: 4, Failures: 3, Errors: 1, Skipped: 0, Time elapsed: 46.174 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.distribution.it.MultipleForwardDistributionTest
testDeleteContent(org.apache.sling.distribution.it.MultipleForwardDistributionTest)  Time elapsed: 9.193 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: POST request to http://localhost:59247/libs/sling/distribution/services/agents/publish-multiple/queues/passivequeue1: expecting status 200 expected:&amp;lt;200&amp;gt; but was:&amp;lt;500&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:555)
	at org.apache.sling.testing.tools.http.RequestExecutor.assertStatus(RequestExecutor.java:155)
	at org.apache.sling.distribution.it.DistributionUtils.assertPostResourceWithParameters(DistributionUtils.java:96)
	at org.apache.sling.distribution.it.MultipleForwardDistributionTest.clean(MultipleForwardDistributionTest.java:103)

testAddContentCheckPassiveQueue(org.apache.sling.distribution.it.MultipleForwardDistributionTest)  Time elapsed: 9.197 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
org.apache.sling.commons.json.JSONException: JSONObject[&quot;items&quot;] not found.
	at org.apache.sling.commons.json.JSONObject.get(JSONObject.java:372)
	at org.apache.sling.commons.json.JSONObject.getJSONArray(JSONObject.java:448)
	at org.apache.sling.distribution.it.MultipleForwardDistributionTest.testAddContentCheckPassiveQueue(MultipleForwardDistributionTest.java:75)

testAddContentCheckPassiveQueue(org.apache.sling.distribution.it.MultipleForwardDistributionTest)  Time elapsed: 9.197 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: POST request to http://localhost:59247/libs/sling/distribution/services/agents/publish-multiple/queues/passivequeue1: expecting status 200 expected:&amp;lt;200&amp;gt; but was:&amp;lt;500&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:555)
	at org.apache.sling.testing.tools.http.RequestExecutor.assertStatus(RequestExecutor.java:155)
	at org.apache.sling.distribution.it.DistributionUtils.assertPostResourceWithParameters(DistributionUtils.java:96)
	at org.apache.sling.distribution.it.MultipleForwardDistributionTest.clean(MultipleForwardDistributionTest.java:103)

testAddContent(org.apache.sling.distribution.it.MultipleForwardDistributionTest)  Time elapsed: 9.197 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: POST request to http://localhost:59247/libs/sling/distribution/services/agents/publish-multiple/queues/passivequeue1: expecting status 200 expected:&amp;lt;200&amp;gt; but was:&amp;lt;500&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:555)
	at org.apache.sling.testing.tools.http.RequestExecutor.assertStatus(RequestExecutor.java:155)
	at org.apache.sling.distribution.it.DistributionUtils.assertPostResourceWithParameters(DistributionUtils.java:96)
	at org.apache.sling.distribution.it.MultipleForwardDistributionTest.clean(MultipleForwardDistributionTest.java:103)

Running org.apache.sling.distribution.it.MultipleQueueDistributionTest
Tests run: 3, Failures: 2, Errors: 0, Skipped: 0, Time elapsed: 18.963 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.distribution.it.MultipleQueueDistributionTest
testDistributeQueues(org.apache.sling.distribution.it.MultipleQueueDistributionTest)  Time elapsed: 0.18 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
junit.framework.AssertionFailedError: expected:&amp;lt;2&amp;gt; but was:&amp;lt;4&amp;gt;
	at junit.framework.Assert.fail(Assert.java:57)
	at junit.framework.Assert.failNotEquals(Assert.java:329)
	at junit.framework.Assert.assertEquals(Assert.java:78)
	at junit.framework.Assert.assertEquals(Assert.java:234)
	at junit.framework.Assert.assertEquals(Assert.java:241)
	at org.apache.sling.distribution.it.MultipleQueueDistributionTest.testDistributeQueues(MultipleQueueDistributionTest.java:72)

testQueues(org.apache.sling.distribution.it.MultipleQueueDistributionTest)  Time elapsed: 0.051 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
junit.framework.AssertionFailedError: expected:&amp;lt;2&amp;gt; but was:&amp;lt;4&amp;gt;
	at junit.framework.Assert.fail(Assert.java:57)
	at junit.framework.Assert.failNotEquals(Assert.java:329)
	at junit.framework.Assert.assertEquals(Assert.java:78)
	at junit.framework.Assert.assertEquals(Assert.java:234)
	at junit.framework.Assert.assertEquals(Assert.java:241)
	at org.apache.sling.distribution.it.MultipleQueueDistributionTest.testQueues(MultipleQueueDistributionTest.java:48)

Tests run: 4, Failures: 3, Errors: 0, Skipped: 0, Time elapsed: 220.433 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.distribution.it.SelectiveForwardDistributionTest
testDeleteContent(org.apache.sling.distribution.it.SelectiveForwardDistributionTest)  Time elapsed: 100.907 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: path /content/news/forward_del_253090736785822/dc2f58a0-cad0-4d19-8f2c-7143969420ed still exists
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.junit.Assert.assertFalse(Assert.java:64)
	at org.apache.sling.distribution.it.DistributionUtils.assertNotExists(DistributionUtils.java:206)
	at org.apache.sling.distribution.it.SelectiveForwardDistributionTest.testDeleteContent(SelectiveForwardDistributionTest.java:73)

testAddContent(org.apache.sling.distribution.it.SelectiveForwardDistributionTest)  Time elapsed: 100.957 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: path /content/news/forward_add_253204032183555/c2f0503d-d39f-4f6a-a493-638a6b953b0d doesn&apos;t exist
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.assertTrue(Assert.java:41)
	at org.apache.sling.distribution.it.DistributionUtils.assertExists(DistributionUtils.java:198)
	at org.apache.sling.distribution.it.SelectiveForwardDistributionTest.testAddContent(SelectiveForwardDistributionTest.java:58)

testAddContent(org.apache.sling.distribution.it.SelectiveForwardDistributionTest)  Time elapsed: 100.957 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:743)
	at org.junit.Assert.assertEquals(Assert.java:118)
	at org.junit.Assert.assertEquals(Assert.java:555)
	at org.junit.Assert.assertEquals(Assert.java:542)
	at org.apache.sling.distribution.it.DistributionUtils.assertEmptyFolder(DistributionUtils.java:300)
	at org.apache.sling.distribution.it.DistributionIntegrationTestBase.checkNoPackagesLeft(DistributionIntegrationTestBase.java:139)
	at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:497)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:33)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
	at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12993253">SLING-5915</key>
            <summary>Fix IT failures in Content Distribution</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="teofili">Tommaso Teofili</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jul 2016 14:22:16 +0000</created>
                <updated>Tue, 14 Feb 2017 09:30:58 +0000</updated>
                            <resolved>Thu, 19 Jan 2017 14:29:45 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.2.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13035576">SLING-6475</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31mkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5914] Provisioning model does not correctly handle floating-point configuration values</title>
                <link>https://issues.apache.org/jira/browse/SLING-5914</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The provisioning model specifies that floating-point values are encoded in the following format:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;tt&gt;D&quot;1.0&quot;&lt;/tt&gt; for doubles&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;F&quot;1.0&quot;&lt;/tt&gt; for floats&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However, the ConfigAdmin has a different idea about how these values should be stored:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; TOKEN_SIMPLE_FLOAT:
            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; TOKEN_PRIMITIVE_FLOAT:
                &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; fBits = &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.parseInt( readQuoted( pr ) );
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Float&lt;/span&gt;( &lt;span class=&quot;code-object&quot;&gt;Float&lt;/span&gt;.intBitsToFloat( fBits ) );

            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; TOKEN_SIMPLE_DOUBLE:
            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; TOKEN_PRIMITIVE_DOUBLE:
                &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; dBits = &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.parseLong( readQuoted( pr ) );
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;( &lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt;.longBitsToDouble( dBits ) );
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I assume that this is done to preserve precision when reading/writing values.&lt;/p&gt;

&lt;p&gt;The provisioning model should be updated to mediate between the user-supplied values and the configuration admin format.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12993251">SLING-5914</key>
            <summary>Provisioning model does not correctly handle floating-point configuration values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Jul 2016 14:16:24 +0000</created>
                <updated>Mon, 6 Apr 2020 12:03:26 +0000</updated>
                            <resolved>Mon, 6 Apr 2020 12:03:26 +0000</resolved>
                                                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15397578" author="rombert" created="Thu, 28 Jul 2016 14:18:09 +0000"  >&lt;p&gt;The following change demonstrates the issue&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/tooling/support/provisioning-model/src/test/java/org/apache/sling/provisioning/model/io/IOTest.java b/tooling/support/provisioning-model/src/test/java/org/apache/sling/provisioning/model/io/IOTest.java
index 6a7395a..ec1c8ef 100644
--- a/tooling/support/provisioning-model/src/test/java/org/apache/sling/provisioning/model/io/IOTest.java
+++ b/tooling/support/provisioning-model/src/test/java/org/apache/sling/provisioning/model/io/IOTest.java
@@ -93,7 +93,7 @@ public class IOTest {
             configs.add(c);
         }
 
-        assertEquals(4, configs.size());
+        assertEquals(5, configs.size());
 
         final Configuration cfgA = configs.get(0);
         assertEquals(&quot;org.apache.test.A&quot;, cfgA.getPid());
@@ -104,7 +104,7 @@ public class IOTest {
         final Configuration cfgB = configs.get(1);
         assertEquals(&quot;org.apache.test.B&quot;, cfgB.getPid());
         assertNull(cfgB.getFactoryPid());
-        assertEquals(2, cfgB.getProperties().size());
+        assertEquals(3, cfgB.getProperties().size());
         assertEquals(&quot;B&quot;, cfgB.getProperties().get(&quot;name&quot;));
         assertArrayEquals(new String[] {&quot;one&quot;, &quot;two&quot;, &quot;three&quot;}, (String[])cfgB.getProperties().get(&quot;array&quot;));
 
@@ -119,6 +119,15 @@ public class IOTest {
         assertEquals(&quot;org.apache.test.D&quot;, cfgD.getPid());
         assertEquals(&quot;Here is\na multiline\nstring&quot;, cfgD.getProperties().get(&quot;textA&quot;));
         assertEquals(&quot;Another one\nusing\nescaped newlines&quot;, cfgD.getProperties().get(&quot;textB&quot;));
+        
+        final Configuration cfgE = configs.get(4);
+        assertEquals(&quot;org.apache.test.E&quot;, cfgE.getPid());
+        assertNull(cfgE.getFactoryPid());
+        assertEquals(4, cfgE.getProperties().size());
+        assertEquals(5.5, cfgE.getProperties().get(&quot;doubleValue&quot;));
+        assertEquals(1.0f, cfgE.getProperties().get(&quot;floatValue&quot;));
+        assertArrayEquals(new Double[] { 0.0, 3.0 }, (Double[]) cfgE.getProperties().get(&quot;doubles&quot;));
+        assertArrayEquals(new Float[] { -1.0f, 1.0f }, (Double[]) cfgE.getProperties().get(&quot;floats&quot;));
     }
 
     @Test public void testAddition() throws Exception {
diff --git a/tooling/support/provisioning-model/src/test/resources/configadmin.txt b/tooling/support/provisioning-model/src/test/resources/configadmin.txt
index 9c9d6f6..d36a8e5 100644
--- a/tooling/support/provisioning-model/src/test/resources/configadmin.txt
+++ b/tooling/support/provisioning-model/src/test/resources/configadmin.txt
@@ -32,7 +32,7 @@ org.apache.test.B
       &quot;two&quot;,
       &quot;three&quot;
     ]
-    name=&quot;B&quot;    
+    name=&quot;B&quot;
 
 org.apache.test.C
     array=I[
@@ -46,4 +46,14 @@ org.apache.test.D
   textA=&quot;Here is
     a multiline
     string&quot;     
-  textB=&quot;Another one\nusing\nescaped newlines&quot;     
\ No newline at end of file
+  textB=&quot;Another one\nusing\nescaped newlines&quot;
+  
+org.apache.test.E
+    doubleValue=D&quot;5.5&quot;
+    floatValue=F&quot;1.0&quot;
+	doubles=D[&quot;0.0&quot;, &quot;3.0&quot;]
+	floats=F[
+	  &quot;-1.0&quot;,
+	  &quot;1.0&quot;
+    ]
+	 
\ No newline at end of file
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;with &lt;tt&gt;IOTest.testMultilineConfiguration&lt;/tt&gt; failing early:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.NumberFormatException: For input string: &quot;5.5&quot;
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
	at java.lang.Long.parseLong(Long.java:419)
	at java.lang.Long.parseLong(Long.java:468)
	at org.apache.felix.cm.file.ConfigurationHandler.readSimple(ConfigurationHandler.java:468)
	at org.apache.felix.cm.file.ConfigurationHandler.readValue(ConfigurationHandler.java:350)
	at org.apache.felix.cm.file.ConfigurationHandler.readInternal(ConfigurationHandler.java:304)
	at org.apache.felix.cm.file.ConfigurationHandler.read(ConfigurationHandler.java:263)
	at org.apache.sling.provisioning.model.ModelResolveUtility.getProcessedConfiguration(ModelResolveUtility.java:166)
	at org.apache.sling.provisioning.model.EffectiveModelProcessor.processConfiguration(EffectiveModelProcessor.java:59)
	at org.apache.sling.provisioning.model.ModelProcessor.process(ModelProcessor.java:71)
	at org.apache.sling.provisioning.model.ModelUtility.getEffectiveModel(ModelUtility.java:155)
	at org.apache.sling.provisioning.model.ModelUtility.getEffectiveModel(ModelUtility.java:142)
	at org.apache.sling.provisioning.model.io.IOTest.testMultilineConfiguration(IOTest.java:89)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:678)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15398923" author="bdelacretaz" created="Fri, 29 Jul 2016 08:10:43 +0000"  >&lt;p&gt;I have committed a variant of Robert&apos;s tests that demonstrates the current behavior (&lt;a href=&quot;http://svn.apache.org/r1754482&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1754482&lt;/a&gt;), those tests will need to be adapted once the parsing is fixed.&lt;/p&gt;

&lt;p&gt;The question is whether it&apos;s Felix&apos;s &lt;tt&gt;org.apache.felix.cm.file.ConfigurationHandler&lt;/tt&gt; that needs to be fixed (in a non-backwards compatible way) or if we want to bypass it and do our own parsing. &lt;/p&gt;
</comment>
                            <comment id="15398929" author="rombert" created="Fri, 29 Jul 2016 08:14:32 +0000"  >&lt;p&gt;I think changing the &lt;tt&gt;ConfigurationHandler&lt;/tt&gt; in a non backwards-compatible way will be a tough sell. Maybe we can plug in our own handler through an extension point? If not, we need to bypass it, at least for doubles/floats.&lt;/p&gt;</comment>
                            <comment id="15399204" author="cziegeler" created="Fri, 29 Jul 2016 12:01:35 +0000"  >&lt;p&gt;The Felix implementation is correct - so we should leave it as is. I seriously think the easiest is we copy the code and create our own implementation in the provisioning modul where we change the behaviour accoring to our needs.&lt;/p&gt;</comment>
                            <comment id="15399270" author="bdelacretaz" created="Fri, 29 Jul 2016 12:38:40 +0000"  >&lt;p&gt;Copying the &lt;tt&gt;ConfigurationHandler&lt;/tt&gt; sounds good to me (along with adding tests as its coverage is poor), but aren&apos;t we using that format in other places like the installer? If that&apos;s the case we need to put it in a different module than the provisioning model.&lt;/p&gt;</comment>
                            <comment id="15399273" author="bdelacretaz" created="Fri, 29 Jul 2016 12:41:27 +0000"  >&lt;p&gt;We are indeed using the &lt;tt&gt;ConfigurationHandler&lt;/tt&gt; in other places, but if that&apos;s for serializing things as opposed to humans writing configs that&apos;s probably ok (and the lossless &quot;store long bits&quot; format then makes sense).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ cd sling-source
$ find . -name *.java | xargs grep -l org.apache.felix.cm.file.ConfigurationHandler
./installer/core/src/main/java/org/apache/sling/installer/core/impl/InternalResource.java
./installer/providers/file/src/main/java/org/apache/sling/installer/provider/file/impl/FileInstaller.java
./installer/providers/jcr/src/main/java/org/apache/sling/installer/provider/jcr/impl/JcrInstaller.java
./tooling/maven/slingstart-maven-plugin/src/main/java/org/apache/sling/maven/slingstart/PreparePackageMojo.java
./tooling/support/provisioning-model/src/main/java/org/apache/sling/provisioning/model/io/ModelWriter.java
./tooling/support/provisioning-model/src/main/java/org/apache/sling/provisioning/model/ModelResolveUtility.java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15399289" author="cziegeler" created="Fri, 29 Jul 2016 12:55:48 +0000"  >&lt;p&gt;I have more and more the feeling that we should not fix this problem - we started by using an internal implementation class of the configuration admin implementation - which looked ok back then. It is still ok for 99% of the use cases, only float and double are problematic. As the usage of these is usually not really common, I suggest we simply document the behaviour and leave it as is. Creating a common module and creating a net of dependencies just for this minor use case, is not a good idea imho.&lt;/p&gt;

&lt;p&gt;I think we should rather support the YAML based format for configurations defined as part of RFC 218 (&lt;a href=&quot;https://github.com/osgi/design/blob/master/rfcs/rfc0218/rfc-0218-Configurator.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/osgi/design/blob/master/rfcs/rfc0218/rfc-0218-Configurator.pdf&lt;/a&gt;). This way we have a) a format that supports all types and b) use a specified format instead of our home brewn one. &lt;/p&gt;</comment>
                            <comment id="15399298" author="bdelacretaz" created="Fri, 29 Jul 2016 13:00:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think we should rather support the YAML based format for configurations defined as part of RFC 218&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why not but that will mean at least 3 config formats used around Sling: plain properties, this Felix ConfigAdmin format and that new one.&lt;/p&gt;

&lt;p&gt;I&apos;m not against that but we&apos;ll need clear guidance as to what is recommended.&lt;/p&gt;</comment>
                            <comment id="15399339" author="cziegeler" created="Fri, 29 Jul 2016 13:23:47 +0000"  >&lt;p&gt;Absolutely, once we have the official one, the guidance is clear: forget about the old two formats and use the spec&apos;ed one&lt;/p&gt;</comment>
                            <comment id="17076278" author="cziegeler" created="Mon, 6 Apr 2020 12:03:26 +0000"  >&lt;p&gt;The OSGi configuration resource format is the way to go, therefore resolving this as won&apos;t fix&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 29 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31mk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5910] SlingSpecificsSightlyIT fails</title>
                <link>https://issues.apache.org/jira/browse/SLING-5910</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-------------------------------------------------------------------------------
Test set: org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT
-------------------------------------------------------------------------------
Tests run: 24, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 3.065 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT
testRepositoryPojoUpdate(org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT)  Time elapsed: 1.145 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
org.junit.ComparisonFailure: expected:&amp;lt;[updated]&amp;gt; but was:&amp;lt;[original]&amp;gt;
        at org.apache.sling.scripting.sightly.it.SlingSpecificsSightlyIT.testRepositoryPojoUpdate(SlingSpecificsSightlyIT.java:186)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment>JDK8</environment>
        <key id="12992988">SLING-5910</key>
            <summary>SlingSpecificsSightlyIT fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ianeboston">Ian Boston</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Wed, 27 Jul 2016 16:47:06 +0000</created>
                <updated>Thu, 28 Jul 2016 14:25:36 +0000</updated>
                            <resolved>Thu, 28 Jul 2016 14:25:35 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15396035" author="ianeboston" created="Wed, 27 Jul 2016 17:36:35 +0000"  >&lt;p&gt;Issue is not a timing issue. Waiting 10s before uploading a new java file and after it is uploaded does not make the test pass. &lt;br/&gt;
No evidence of any errors related to this problem in the logs.&lt;br/&gt;
The file uploads return 200 in all cases as do the get requests.&lt;/p&gt;</comment>
                            <comment id="15397597" author="rombert" created="Thu, 28 Jul 2016 14:25:36 +0000"  >&lt;p&gt;Dupe of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5889&quot; title=&quot;SlingSpecificsSightlyIT.testRepositoryPojoUpdate fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5889&quot;&gt;&lt;del&gt;SLING-5889&lt;/del&gt;&lt;/a&gt;, already assigned to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12991742">SLING-5889</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31kxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5909] Path matching is not correctly applied to glob patterns</title>
                <link>https://issues.apache.org/jira/browse/SLING-5909</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;org.apache.sling.api.resource.path.Path#matches&lt;/tt&gt; does not allow matching patterns as sub-paths. With the current implementation the following test will fail:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Path path = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;);
assertTrue(path.matches(&lt;span class=&quot;code-quote&quot;&gt;&quot;glob:/apps/myproject/components&lt;span class=&quot;code-comment&quot;&gt;/**/&lt;/span&gt;*.html&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12992961">SLING-5909</key>
            <summary>Path matching is not correctly applied to glob patterns</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jul 2016 15:24:23 +0000</created>
                <updated>Wed, 7 Dec 2016 08:41:50 +0000</updated>
                            <resolved>Wed, 27 Jul 2016 15:54:03 +0000</resolved>
                                    <version>API 2.14.0</version>
                                    <fixVersion>API 2.14.2</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15395883" author="radu.cotescu" created="Wed, 27 Jul 2016 15:54:03 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1754284&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1754284&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13024591">SLING-6350</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31krr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5908] Fix travis build for Git pull requests and Git trunk</title>
                <link>https://issues.apache.org/jira/browse/SLING-5908</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The travis build has been broken for some time.&lt;/p&gt;

&lt;p&gt;Fixing it requires that&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;maven is upgraded to 3.3.9 using a maven wrapper&lt;/li&gt;
	&lt;li&gt;The heap is upped to 800MB as it fails with 512MB on JDK8&lt;/li&gt;
	&lt;li&gt;Switch to OracleJDK8, OracleJDK7 due to metrics classes and OpenJDK7 so test building is done on something other than Oracle.&lt;/li&gt;
	&lt;li&gt;Filter the output so that it is reliably &amp;lt; 4MB in size.&lt;/li&gt;
	&lt;li&gt;Filter the output in a way that ensures Travis doesn&apos;t kill the job. -q results in no output for &amp;gt; 10minutes killing the job.&lt;/li&gt;
	&lt;li&gt;Provide feedback (last 500 lines of build)&lt;/li&gt;
	&lt;li&gt;Temporarily disable all tests until they can be made more reliable with fewer false negatives.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12992875">SLING-5908</key>
            <summary>Fix travis build for Git pull requests and Git trunk</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ianeboston">Ian Boston</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jul 2016 10:23:44 +0000</created>
                <updated>Thu, 10 Nov 2016 14:44:43 +0000</updated>
                            <resolved>Wed, 27 Jul 2016 10:25:35 +0000</resolved>
                                                                    <component>CI</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15395386" author="ianeboston" created="Wed, 27 Jul 2016 10:25:26 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk@1754238&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk@1754238&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31k8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5904] SmokeIT test fails 50% of the time.</title>
                <link>https://issues.apache.org/jira/browse/SLING-5904</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The SmokeIT test fails 50% of the time. More on a slow box, less on a faster box. In a Travis build it appears to fail 100% of the time so its not possible to verify pull requests using Travis.  &lt;/p&gt;

&lt;p&gt;Appears to fail fast rather than needing a delay to fail.&lt;/p&gt;



&lt;p&gt;Stack trace&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &amp;lt;error message=&lt;span class=&quot;code-quote&quot;&gt;&quot;Connect to localhost:61754 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1, localhost/fe80:0:0:0:0:0:0:1%1] failed: Connection refused&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.http.conn.HttpHostConnectException&quot;&lt;/span&gt;&amp;gt;org.apache.http.conn.HttpHostConnectException: Connect to localhost:61754 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1, localhost/fe80:0:0:0:0:0:0:1%1] failed: Connection refused
        at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:158)
        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)
        at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)
        at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
        at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
        at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
        at org.apache.sling.launchpad.LaunchpadReadyRule.runCheck(LaunchpadReadyRule.java:76)
        at org.apache.sling.launchpad.LaunchpadReadyRule.before(LaunchpadReadyRule.java:65)
        at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:46)
        at org.junit.rules.RunRules.evaluate(RunRules.java:20)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
Caused by: java.net.ConnectException: Connection refused
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
        at java.net.Socket.connect(Socket.java:589)
        at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)
        at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:141)
        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)
        at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)
        at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)
        at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)
        at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)
        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)
        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)
        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)
        at org.apache.sling.launchpad.LaunchpadReadyRule.runCheck(LaunchpadReadyRule.java:76)
        at org.apache.sling.launchpad.LaunchpadReadyRule.before(LaunchpadReadyRule.java:65)
        at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:46)
        at org.junit.rules.RunRules.evaluate(RunRules.java:20)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)
        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)
&amp;lt;/error&amp;gt;
    &amp;lt;system-err&amp;gt;&amp;lt;![CDATA[SLF4J: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; path contains multiple SLF4J bindings.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12992636">SLING-5904</key>
            <summary>SmokeIT test fails 50% of the time.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="ianeboston">Ian Boston</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Tue, 26 Jul 2016 16:43:10 +0000</created>
                <updated>Mon, 1 Aug 2016 10:49:00 +0000</updated>
                            <resolved>Mon, 1 Aug 2016 10:49:00 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15394065" author="ianeboston" created="Tue, 26 Jul 2016 16:45:52 +0000"  >&lt;p&gt;Attaching failure.&lt;/p&gt;</comment>
                            <comment id="15395189" author="rombert" created="Wed, 27 Jul 2016 07:51:14 +0000"  >&lt;p&gt;Oops. Committed a potential fix in &lt;a href=&quot;https://svn.apache.org/r1754225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1754225&lt;/a&gt;, but I&apos;m unable to verify due to INFRA-12329. Keeping open until we can verify.&lt;/p&gt;</comment>
                            <comment id="15395309" author="rombert" created="Wed, 27 Jul 2016 09:34:26 +0000"  >&lt;p&gt;Verified locally and on Jenkins, considered resolved&lt;/p&gt;</comment>
                            <comment id="15401769" author="ianeboston" created="Mon, 1 Aug 2016 09:38:04 +0000"  >&lt;p&gt;Jenkins still reporting failures, causing downstream bundles to fail. see&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/4403/org.apache.sling$org.apache.sling.launchpad/testReport/org.apache.sling.launchpad/SmokeIT/org_apache_sling_launchpad_SmokeIT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.7/4403/org.apache.sling$org.apache.sling.launchpad/testReport/org.apache.sling.launchpad/SmokeIT/org_apache_sling_launchpad_SmokeIT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Stack trace looks identical, but might be some other cause.&lt;/p&gt;</comment>
                            <comment id="15401773" author="rombert" created="Mon, 1 Aug 2016 09:40:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ianeboston&quot; class=&quot;user-hover&quot; rel=&quot;ianeboston&quot;&gt;ianeboston&lt;/a&gt; - I think this is due to the fact that the Launchpad requires Java 8 to run from now on. If I look at the Java 7 build, all ITs fail, while only 3 fail for the Java 8 build.&lt;/p&gt;

&lt;p&gt;I don&apos;t think there&apos;s anything to be done for the SmokeIT here, but we may want to tweak the Jenkins build to not build the launchpad on Java 7.&lt;/p&gt;</comment>
                            <comment id="15401829" author="rombert" created="Mon, 1 Aug 2016 10:49:00 +0000"  >&lt;p&gt;Re-resolving based on my last comment, please reopen if you think that&apos;s not correct.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12820195" name="output.txt" size="15840" author="ianeboston" created="Tue, 26 Jul 2016 16:45:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31irj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5903] ResourceChangeListenerInfo does not expand glob patterns correctly</title>
                <link>https://issues.apache.org/jira/browse/SLING-5903</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The changes implemented in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5837&quot; title=&quot;Allow ResourceChangeListeners to define glob patterns for resource matching&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5837&quot;&gt;&lt;del&gt;SLING-5837&lt;/del&gt;&lt;/a&gt; need to be reflected in the way the &lt;tt&gt;ResourceChangeListenerInfo&lt;/tt&gt; expands the configured paths of a &lt;tt&gt;ResourceChangeListener&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Currently a glob pattern like &lt;tt&gt;glob:&amp;#42;&amp;#42;/&amp;#42;.html&lt;/tt&gt; will not have the search paths prepended correctly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12992602">SLING-5903</key>
            <summary>ResourceChangeListenerInfo does not expand glob patterns correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jul 2016 15:00:39 +0000</created>
                <updated>Fri, 26 Aug 2016 11:52:10 +0000</updated>
                            <resolved>Wed, 27 Jul 2016 15:53:28 +0000</resolved>
                                    <version>Resource Resolver 1.4.16</version>
                                    <fixVersion>Resource Resolver 1.4.18</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15395877" author="radu.cotescu" created="Wed, 27 Jul 2016 15:53:29 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1754283&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1754283&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12910040">SLING-5253</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12988729">SLING-5837</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31ijz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5902] RepositoryInitializer uses name component property instead of label</title>
                <link>https://issues.apache.org/jira/browse/SLING-5902</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12992548">SLING-5902</key>
            <summary>RepositoryInitializer uses name component property instead of label</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jul 2016 10:57:34 +0000</created>
                <updated>Fri, 21 Oct 2016 16:06:24 +0000</updated>
                            <resolved>Tue, 26 Jul 2016 11:00:22 +0000</resolved>
                                    <version>Repoinit JCR 1.0.0</version>
                                    <fixVersion>Repoinit JCR 1.0.2</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15393627" author="olli" created="Tue, 26 Jul 2016 10:59:21 +0000"  >&lt;p&gt;This is an incompatible change: PID was &lt;tt&gt;Apache Sling Repository Initializer&lt;/tt&gt; and will become &lt;tt&gt;org.apache.sling.jcr.repoinit.impl.RepositoryInitializer&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15393628" author="olli" created="Tue, 26 Jul 2016 11:00:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1754107&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1754107&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15393667" author="bdelacretaz" created="Tue, 26 Jul 2016 11:40:23 +0000"  >&lt;p&gt;Ouch, I used the wrong attribute when writing that code, thanks for spotting this!&lt;/p&gt;

&lt;p&gt;We might release the next version as 2.0 to signal the incompatible change - if people have defined configs with the current name those will not be picked up once they upgrade.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31i7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5901] Build fails with OOME (Maven Source Plugin 3.0.0)</title>
                <link>https://issues.apache.org/jira/browse/SLING-5901</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] Failed to execute goal org.apache.maven.plugins:maven-source-plugin:3.0.0:jar (attach-sources) on project org.apache.sling.testing.paxexam: Error creating source archive: Problem creating jar: Execution exception: Java heap space -&amp;gt; [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn &amp;lt;goals&amp;gt; -rf :org.apache.sling.testing.paxexam
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/MSOURCES-94&quot; title=&quot;Heap space OOM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MSOURCES-94&quot;&gt;&lt;del&gt;MSOURCES-94&lt;/del&gt;&lt;/a&gt; for details.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12992368">SLING-5901</key>
            <summary>Build fails with OOME (Maven Source Plugin 3.0.0)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jul 2016 18:45:29 +0000</created>
                <updated>Wed, 10 Aug 2016 05:36:52 +0000</updated>
                            <resolved>Tue, 9 Aug 2016 08:23:04 +0000</resolved>
                                    <version>Parent 27</version>
                                    <fixVersion>Parent 28</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15392474" author="olli" created="Mon, 25 Jul 2016 18:50:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;: the module was added a month ago and didn&apos;t break the build before, we should come up quickly with a fix and Parent 28&lt;/p&gt;</comment>
                            <comment id="15393393" author="rombert" created="Tue, 26 Jul 2016 08:01:44 +0000"  >&lt;p&gt;Do you have a suggestion about how to fix it? The build now fails in a different place, but the original error is gone when excluding the project from the reactor.&lt;/p&gt;</comment>
                            <comment id="15393414" author="olli" created="Tue, 26 Jul 2016 08:21:27 +0000"  >&lt;p&gt;It&apos;s fixed in Maven Source Plugin 3.0.1. So we can wait for Apache Parent 19 (&lt;a href=&quot;https://issues.apache.org/jira/browse/MPOM-131&quot; title=&quot;Upgrade maven-source-plugin to 3.0.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MPOM-131&quot;&gt;&lt;del&gt;MPOM-131&lt;/del&gt;&lt;/a&gt;) or add the version to Sling Parent.&lt;/p&gt;</comment>
                            <comment id="15393668" author="rombert" created="Tue, 26 Jul 2016 11:41:51 +0000"  >&lt;p&gt;Rather than go through a complete release cycle, including the 72h wait period, is there a certain pom that we can change to use the new version of the plugin?&lt;/p&gt;</comment>
                            <comment id="15393822" author="olli" created="Tue, 26 Jul 2016 13:59:07 +0000"  >&lt;p&gt;We can update 28-SNAPSHOT to use Apache Parent 19-SNAPSHOT and use that instead of 27. Or add the version (&lt;tt&gt;3.0.1&lt;/tt&gt;) to all projects using Parent 27 already.&lt;/p&gt;</comment>
                            <comment id="15395231" author="rombert" created="Wed, 27 Jul 2016 08:31:34 +0000"  >&lt;p&gt;I think adding the new version temporarily to projects using parent 27 is the safest bet.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ git log --format=oneline  --grep &apos;[p|P]arent 27&apos; | wc -l
8&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Edit&lt;/em&gt;: formatting&lt;/p&gt;</comment>
                            <comment id="15395600" author="olli" created="Wed, 27 Jul 2016 12:41:19 +0000"  >&lt;p&gt;Let&apos;s try with Testing PaxExam. I will add Maven Source Plugin 3.0.1 and add Testing PaxExam back to build. However we should do a release of Parent 28 as soon as Apache Parent 19 is available.&lt;/p&gt;</comment>
                            <comment id="15395610" author="olli" created="Wed, 27 Jul 2016 12:49:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1754267&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1754267&lt;/a&gt; and &lt;a href=&quot;https://svn.apache.org/r1754268&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1754268&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15395941" author="olli" created="Wed, 27 Jul 2016 16:32:11 +0000"  >&lt;p&gt;That fixed it. No build errors with Testing PaxExam anymore.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                                                <inwardlinks description="is superceded by">
                                        <issuelink>
            <issuekey id="12995835">SLING-5953</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31h3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5900] Improve create agents API handling of duplicate IDs</title>
                <link>https://issues.apache.org/jira/browse/SLING-5900</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The distribution agent creation API has the wrong results in the following scenarios:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Scenario 1:
	&lt;ul&gt;
		&lt;li&gt;create agent with id Bob and type Forward&lt;/li&gt;
		&lt;li&gt;create agent with id Bob and type Reverse&lt;/li&gt;
		&lt;li&gt;the first agent is now replaced by the second one. I think this should be an error case (i.e. if there&apos;s already an agent with the same ID and a different type, the API should return an error).&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Scenario 2
	&lt;ul&gt;
		&lt;li&gt;create agent with id Bob and type Forward&lt;/li&gt;
		&lt;li&gt;create agent with id Bob and type Forward&lt;/li&gt;
		&lt;li&gt;the properties of the first agent are overwritten by what we inputted at step 2&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I am using the API from a create / update UI context, so one solution would be to add an &quot;:operation&quot; parameter to distinguish between the two cases.&lt;/p&gt;

&lt;p&gt;So a &quot;create&quot; on an existing agent resource should fail, regardless of agent type, but an &quot;update&quot; should work. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12992298">SLING-5900</key>
            <summary>Improve create agents API handling of duplicate IDs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="ana.vinatoru">Ana Vinatoru</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jul 2016 14:31:39 +0000</created>
                <updated>Tue, 14 Feb 2017 09:30:50 +0000</updated>
                            <resolved>Tue, 4 Oct 2016 06:32:06 +0000</resolved>
                                    <version>Content Distribution Core 0.1.18</version>
                                    <fixVersion>Content Distribution Core 0.2.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15535971" author="simone.tripodi" created="Fri, 30 Sep 2016 13:16:54 +0000"  >&lt;p&gt;Hi there &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt;,&lt;br/&gt;
please find in attachment a first proposal to handle conflicts with IDs: it is a simple HTTP filter which intercepts all &lt;tt&gt;POST /libs/sling/distribution/settings/agents/.*&lt;/tt&gt; request and look in the OSGi registry if there is a &lt;tt&gt;org.apache.sling.distribution.agent.DistributionAgent&lt;/tt&gt; service already registered with the same &lt;tt&gt;name&lt;/tt&gt; but different &lt;tt&gt;type&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Please let me know if more stuff need to be implemented, I&apos;d be more than glad to provide my help!&lt;/p&gt;</comment>
                            <comment id="15544517" author="teofili" created="Tue, 4 Oct 2016 06:32:06 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=simone.tripodi&quot; class=&quot;user-hover&quot; rel=&quot;simone.tripodi&quot;&gt;simone.tripodi&lt;/a&gt;, I&apos;ve applied your patch in r1763231.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12990924">SLING-5872</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12831107" name="SLING-5900.patch" size="5571" author="simone.tripodi" created="Fri, 30 Sep 2016 13:16:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31gof:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5899] &quot;Guages&quot; Typo in Sling metrics console </title>
                <link>https://issues.apache.org/jira/browse/SLING-5899</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There is a small typo in the /system/console/slingmetrics console - &quot;Guages&quot; instead of &quot;Gauges&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12992262">SLING-5899</key>
            <summary>&quot;Guages&quot; Typo in Sling metrics console </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="ana.vinatoru">Ana Vinatoru</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jul 2016 13:00:07 +0000</created>
                <updated>Tue, 13 Dec 2016 06:36:32 +0000</updated>
                            <resolved>Mon, 25 Jul 2016 14:12:41 +0000</resolved>
                                    <version>Commons Metrics 1.0.0</version>
                                    <fixVersion>Commons Metrics 1.2.0</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15391961" author="rombert" created="Mon, 25 Jul 2016 14:12:41 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1754008&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1754008&lt;/a&gt; , thanks for spotting this!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31ggf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5889] SlingSpecificsSightlyIT.testRepositoryPojoUpdate fails</title>
                <link>https://issues.apache.org/jira/browse/SLING-5889</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Running mvn clean install in &lt;tt&gt;bundles/scripting/sightly/testing&lt;/tt&gt; :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Failed tests: 
  SlingSpecificsSightlyIT.testRepositoryPojoUpdate:186 expected:&amp;lt;[updated]&amp;gt; but was:&amp;lt;[original]&amp;gt;

Tests run: 388, Failures: 1, Errors: 0, Skipped: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tentatively assigning to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt;, svn says you were there a lot &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12991742">SLING-5889</key>
            <summary>SlingSpecificsSightlyIT.testRepositoryPojoUpdate fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Fri, 22 Jul 2016 09:05:18 +0000</created>
                <updated>Thu, 18 Aug 2016 15:11:58 +0000</updated>
                            <resolved>Thu, 18 Aug 2016 15:11:58 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15426610" author="radu.cotescu" created="Thu, 18 Aug 2016 15:11:29 +0000"  >&lt;p&gt;Cannot reproduce any more - I think it was a side-effect of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5253&quot; title=&quot;Remove getAdministrativeResourceResolver() from the Sightly engine&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5253&quot;&gt;&lt;del&gt;SLING-5253&lt;/del&gt;&lt;/a&gt; while we were still working on &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5830&quot; title=&quot;Allow required providers to be referenced through name (instead of PID)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5830&quot;&gt;&lt;del&gt;SLING-5830&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5838&quot; title=&quot;ResourceChangeListenerInfo does not expand relative paths correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5838&quot;&gt;&lt;del&gt;SLING-5838&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5930&quot; title=&quot;Provide repoinit statements as bundle resource&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5930&quot;&gt;&lt;del&gt;SLING-5930&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12992988">SLING-5910</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31d8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5887] OSGi Installer: configuration factory instances and regular configuration instances differ in terms of overwrite behaviour</title>
                <link>https://issues.apache.org/jira/browse/SLING-5887</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In case an OSGi configuration contributed through the JCR Installer is overwritten manually in the Felix Web Console, this new version takes precedence over the version in the repository. Even if the configuration in the repository is modified afterwards (i.e. the EventListener is being triggered) the manually overwritten configuration will not replaced with the version from the repository. Only explicitly deleting the manually overwritten configuration will lead to the repository version of it becoming active again.&lt;/p&gt;

&lt;p&gt;In contrast for OSGi configuration factories, every manually overwritten instance is automatically reverted to the repository version, in case the according configuration in the repository is updated. &lt;/p&gt;

&lt;p&gt;So it seems that the OSGi installer in that case does not detect, that this configuration instance was deliberately overwritten by the user.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12991737">SLING-5887</key>
            <summary>OSGi Installer: configuration factory instances and regular configuration instances differ in terms of overwrite behaviour</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Jul 2016 08:19:01 +0000</created>
                <updated>Wed, 4 Sep 2019 08:04:33 +0000</updated>
                                            <version>Installer Core 3.6.4</version>
                    <version>JCR Installer 3.1.16</version>
                                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16922264" author="cziegeler" created="Wed, 4 Sep 2019 08:04:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; Could you please check whether this still is an issue with latest versions?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13166289">SLING-7736</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13022178">SLING-6313</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31d7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5885] ResourceResolverFactory might not get correctly re-registered if configuration is changed</title>
                <link>https://issues.apache.org/jira/browse/SLING-5885</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If the resource resolver factory gets reregistered, the old instance is not correctly removed which then in turn is used by components. But it will return null for the resource resolver factory service as it is deactivated. Therefore the system becomes useless&lt;/p&gt;</description>
                <environment></environment>
        <key id="12991495">SLING-5885</key>
            <summary>ResourceResolverFactory might not get correctly re-registered if configuration is changed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Jul 2016 14:53:31 +0000</created>
                <updated>Mon, 25 Jul 2016 22:22:25 +0000</updated>
                            <resolved>Thu, 21 Jul 2016 14:57:50 +0000</resolved>
                                    <version>Resource Resolver 1.4.12</version>
                    <version>Resource Resolver 1.4.14</version>
                                    <fixVersion>Resource Resolver 1.4.16</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15387838" author="cziegeler" created="Thu, 21 Jul 2016 14:57:50 +0000"  >&lt;p&gt;Fixed this in rev 1753699 by implementing modified and reusing the same component. Added also some better clean up&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31bpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5882] ThreadExpiringThreadPoolTest fails 8% of time</title>
                <link>https://issues.apache.org/jira/browse/SLING-5882</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The unit tests fail 8% of the time due to a) methods not being able to complete in time on slower (2.53 GHz 2 core) boxes, and b) the ThreadFactory using an unstable method of determining if a thread is in the pool or not. It relies on the thread being alive, however the thread that should be dead may have removed itself from the pool but not yet died when the test checks.&lt;/p&gt;

&lt;p&gt;Increasing the thread lifetime to 90ms from 15ms and pausing for 15ms to ensure that threads that expired have really removed themselves from the pool reduces the failure rate to below 0.1%.  Making that 0% would need introspection of the pool rather than relying on the thread being alive as a proxy for being in the pool.&lt;/p&gt;

&lt;p&gt;commit pending.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12991409">SLING-5882</key>
            <summary>ThreadExpiringThreadPoolTest fails 8% of time</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ianeboston">Ian Boston</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Jul 2016 11:04:35 +0000</created>
                <updated>Thu, 21 Jul 2016 11:10:51 +0000</updated>
                            <resolved>Thu, 21 Jul 2016 11:10:51 +0000</resolved>
                                    <version>Commons Threads 3.2.6</version>
                                    <fixVersion>Commons Threads 3.2.10</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15387527" author="ianeboston" created="Thu, 21 Jul 2016 11:10:51 +0000"  >&lt;p&gt;fixed in &lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk@1753662&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk@1753662&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31b6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5879] StatementCache interceptor configured by default causes ResultSets to remain open</title>
                <link>https://issues.apache.org/jira/browse/SLING-5879</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Configuring &lt;tt&gt;StatementCache&lt;/tt&gt; interceptor in &lt;tt&gt;org.apache.sling.datasource&lt;/tt&gt;, prevents the RDBDocumentStore to correctly start up due to a bug in the StatementCache interceptor (see &lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=59850&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bz.apache.org/bugzilla/show_bug.cgi?id=59850&lt;/a&gt;). &lt;/p&gt;

&lt;p&gt;Recommended solution is to update the tomcat pool to a fixed version (7.0.71) once it&apos;s out. Until that is the case we can&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;recommend not to turn on the StatementCache, or&lt;/li&gt;
	&lt;li&gt;use a recent Oak version which works around the bug (&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-4583&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;OAK-4559&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12991372">SLING-5879</key>
            <summary>StatementCache interceptor configured by default causes ResultSets to remain open</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="adulceanu">Andrei Dulceanu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Jul 2016 08:21:44 +0000</created>
                <updated>Mon, 24 Oct 2016 10:48:46 +0000</updated>
                            <resolved>Thu, 13 Oct 2016 08:54:01 +0000</resolved>
                                                    <fixVersion>DataSource Provider 1.0.2</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15388054" author="reschke" created="Thu, 21 Jul 2016 17:08:13 +0000"  >&lt;p&gt;I don&apos;t think that &quot;using a different Oak version&quot; helps here, as the datasource provider doesn&apos;t rely on Oak; it&apos;s the other way around.&lt;/p&gt;

&lt;p&gt;So here the options are:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;document not to use the StatementCache interceptor with broken versions of the jdbc pool (in particular, not make it the default), and&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;also update the dependency once the fixed version is out.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15506525" author="reschke" created="Tue, 20 Sep 2016 13:28:45 +0000"  >&lt;p&gt;proposed patch; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; can you check, apply, and release?&lt;/p&gt;</comment>
                            <comment id="15571312" author="chetanm" created="Thu, 13 Oct 2016 08:51:29 +0000"  >&lt;p&gt;Tomcat jdbc-pool changelog can be found at &lt;a href=&quot;https://tomcat.apache.org/tomcat-7.0-doc/changelog.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tomcat.apache.org/tomcat-7.0-doc/changelog.html&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="15571317" author="chetanm" created="Thu, 13 Oct 2016 08:53:49 +0000"  >&lt;p&gt;Updatded tomcat-jdbc dependency 7.0.53 -&amp;gt; 7.0.72 with 1764629&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12989433">OAK-4559</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12991344">OAK-4583</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12829391" name="SLING-5879.diff" size="512" author="reschke" created="Tue, 20 Sep 2016 13:28:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31ayn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5878] Intermittent NPE in QuartzSchedulerTest</title>
                <link>https://issues.apache.org/jira/browse/SLING-5878</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Running the &lt;tt&gt;bundles/commons/scheduler&lt;/tt&gt; build several times with Java 1.8, me and a colleague got one or more of the following errors from time to time:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;QuartzSchedulerTest.testThreadPools:275 &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
QuartzSchedulerTest.testNameAcrossPools:291 &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
QuartzJobExecutorTest.testJobNotExecuted:119 &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12991074">SLING-5878</key>
            <summary>Intermittent NPE in QuartzSchedulerTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Wed, 20 Jul 2016 10:01:13 +0000</created>
                <updated>Wed, 20 Jul 2016 11:00:59 +0000</updated>
                            <resolved>Wed, 20 Jul 2016 10:58:00 +0000</resolved>
                                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15385669" author="bdelacretaz" created="Wed, 20 Jul 2016 10:58:01 +0000"  >&lt;p&gt;Looks like Carsten fixed this in &lt;a href=&quot;http://svn.apache.org/r1753479&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1753479&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15385675" author="cziegeler" created="Wed, 20 Jul 2016 11:00:59 +0000"  >&lt;p&gt;I&apos;m not 100% sure about the last one QuartzJobExecutorTest.testJobNotExecuted, but I made the boolean flag volatile. If it&apos;s still failing, let me now&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3194n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5877] ThreadExpiringThreadPoolTest fails semi-randomly on Jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-5877</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;For example at &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; , and the actual count varies between failed runs, so far I&apos;ve values 4 and 5.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;rg.apache.sling.commons.threads.impl.ThreadExpiringThreadPoolTest.shouldLetMultipleThreadsDieAfterExpiry
Failing &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the past 1 build (Since Unstable#4328 )
Took 0.1 sec.
Error Message

Expected: is &amp;lt;3&amp;gt;
     but: was &amp;lt;4&amp;gt;

Stacktrace

java.lang.AssertionError: 
Expected: is &amp;lt;3&amp;gt;
     but: was &amp;lt;4&amp;gt;
	at org.hamcrest.MatcherAssert.assertThat(MatcherAssert.java:20)
	at org.junit.Assert.assertThat(Assert.java:956)
	at org.junit.Assert.assertThat(Assert.java:923)
	at org.apache.sling.commons.threads.impl.ThreadExpiringThreadPoolTest.shouldLetMultipleThreadsDieAfterExpiry(ThreadExpiringThreadPoolTest.java:115)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.commons.threads/4329/testReport/junit/org.apache.sling.commons.threads.impl/ThreadExpiringThreadPoolTest/shouldLetMultipleThreadsDieAfterExpiry/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.commons.threads/4329/testReport/junit/org.apache.sling.commons.threads.impl/ThreadExpiringThreadPoolTest/shouldLetMultipleThreadsDieAfterExpiry/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12991066">SLING-5877</key>
            <summary>ThreadExpiringThreadPoolTest fails semi-randomly on Jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Wed, 20 Jul 2016 09:45:51 +0000</created>
                <updated>Mon, 19 Dec 2016 11:36:15 +0000</updated>
                            <resolved>Mon, 19 Dec 2016 11:36:14 +0000</resolved>
                                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15760928" author="rombert" created="Mon, 19 Dec 2016 11:36:15 +0000"  >&lt;p&gt;Considering fixed, did not fail since we moved to per-module jobs.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3192v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5876] ChaosTest frequently times out on Jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-5876</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;org.apache.sling.event.it.ChaosTest.testDoChaos&lt;/tt&gt; frequently fails, for example at &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;test timed out after 960000 milliseconds
java.lang.Exception: test timed out after 960000 milliseconds
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(Native Method)
	at org.apache.sling.event.it.AbstractJobHandlingTest.sleep(AbstractJobHandlingTest.java:209)
	at org.apache.sling.event.it.ChaosTest.testDoChaos(ChaosTest.java:390)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/4330/org.apache.sling$org.apache.sling.event/testReport/org.apache.sling.event.it/ChaosTest/testDoChaos/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/4330/org.apache.sling$org.apache.sling.event/testReport/org.apache.sling.event.it/ChaosTest/testDoChaos/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12991065">SLING-5876</key>
            <summary>ChaosTest frequently times out on Jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Wed, 20 Jul 2016 09:43:22 +0000</created>
                <updated>Mon, 19 Dec 2016 11:36:36 +0000</updated>
                            <resolved>Mon, 19 Dec 2016 11:36:34 +0000</resolved>
                                                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15385634" author="cziegeler" created="Wed, 20 Jul 2016 09:57:06 +0000"  >&lt;p&gt;I assume we can simply increate the timeout for jenkins as those machines are really slow&lt;/p&gt;</comment>
                            <comment id="15389248" author="bdelacretaz" created="Fri, 22 Jul 2016 09:57:07 +0000"  >&lt;p&gt;I&apos;ve reduced the test duration (as it took a long time anyway) and increased the timeout by a factor 4 in &lt;a href=&quot;http://svn.apache.org/r1753773&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1753773&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note that the test outputs lots of error messages like these, not sure what that means as it still passes - but there are very few assertions in it, at a glance it looks like it&apos;s only concerned about all threads finishing in a decent amount of time.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;22.07.2016 11:44:47.328 *WARN* [Apache Sling JCR Resource Event Queue Processor] org.apache.sling.jcr.resource.internal.JcrResourceListener processOsgiEventQueue: Unexpected problem processing event {path=/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/eventing/jobs/assigned/4cf67edc-ddb2-401e-92d4-374440780a0d/sling.chaos.parallel.4/2016/7/22/11/44/4cf67edc-ddb2-401e-92d4-374440780a0d_1131, resourceAddedAttributes=[Ljava.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;@255633ec, userid=admin}
org.apache.sling.api.SlingException: Problem retrieving node based resource /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/eventing/jobs/assigned/4cf67edc-ddb2-401e-92d4-374440780a0d/sling.chaos.parallel.4/2016/7/22/11/44/4cf67edc-ddb2-401e-92d4-374440780a0d_1131
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProvider.getResource(JcrResourceProvider.java:156)
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProvider.getResource(JcrResourceProvider.java:143)
	at org.apache.sling.resourceresolver.impl.tree.ResourceProviderFactoryHandler.getResource(ResourceProviderFactoryHandler.java:113)
	at ...
...
Caused by: javax.jcr.PathNotFoundException: /&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/eventing/jobs/assigned/4cf67edc-ddb2-401e-92d4-374440780a0d/sling.chaos.parallel.4/2016/7/22/11/44/4cf67edc-ddb2-401e-92d4-374440780a0d_1131
	at org.apache.jackrabbit.core.ItemManager.getItem(ItemManager.java:552)
...
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProvider.getResource(JcrResourceProvider.java:154)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15389333" author="cziegeler" created="Fri, 22 Jul 2016 11:13:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; The exceptions you see are actually exceptions from JCR, which is not able to cope with the concurrency created through that test. However, although these exceptions occur, the job handling is still successful and the test does not only check whether all threads finish but also that the number of processed jobs matches the number of created jobs. &lt;/p&gt;</comment>
                            <comment id="15398769" author="ianeboston" created="Fri, 29 Jul 2016 06:02:49 +0000"  >&lt;p&gt;Example ChaosTest failiure. xml file contains full output&lt;/p&gt;</comment>
                            <comment id="15404615" author="ianeboston" created="Tue, 2 Aug 2016 19:08:35 +0000"  >&lt;p&gt;Still failing locally. Tried increasing the timeout to 30 minutes. No activity from the OSGi container after 20 minutes. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Anything I can do to fix it ?&lt;/p&gt;</comment>
                            <comment id="15405500" author="rombert" created="Wed, 3 Aug 2016 07:30:13 +0000"  >&lt;p&gt;I have a hunch that &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5870&quot; title=&quot;Switch event ITs to use Oak&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5870&quot;&gt;&lt;del&gt;SLING-5870&lt;/del&gt;&lt;/a&gt; would help with the IT stability. Two caveats:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;It&apos;s a hunch based on the assumption that the repository&apos;s stability/ability to cope with what the IT does leads to the IT issues&lt;/li&gt;
	&lt;li&gt;I&apos;ve given up trying to move the ITs on Oak due to the tests failing&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="15405571" author="ianeboston" created="Wed, 3 Aug 2016 08:32:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt; agreed. Symptoms are the same. I was not aware the tests were not using Oak. Obviously they should be as the behaviour may happen in production.&lt;/p&gt;</comment>
                            <comment id="15760930" author="rombert" created="Mon, 19 Dec 2016 11:36:36 +0000"  >&lt;p&gt;Considering fixed, did not fail since we moved to per-module jobs.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12990752">SLING-5870</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12820878" name="TEST-org.apache.sling.event.it.ChaosTest.xml" size="328775" author="ianeboston" created="Fri, 29 Jul 2016 06:02:49 +0000"/>
                            <attachment id="12820879" name="org.apache.sling.event.it.ChaosTest.txt" size="695" author="ianeboston" created="Fri, 29 Jul 2016 06:02:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 45 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3192n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5875] Distribution resource configuration manager does update resources</title>
                <link>https://issues.apache.org/jira/browse/SLING-5875</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description></description>
                <environment></environment>
        <key id="12991023">SLING-5875</key>
            <summary>Distribution resource configuration manager does update resources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Jul 2016 07:07:29 +0000</created>
                <updated>Tue, 14 Feb 2017 09:30:56 +0000</updated>
                            <resolved>Wed, 20 Jul 2016 13:57:39 +0000</resolved>
                                    <version>Content Distribution Core 0.1.18</version>
                                    <fixVersion>Content Distribution Core 0.2.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15385470" author="githubbot" created="Wed, 20 Jul 2016 07:13:09 +0000"  >&lt;p&gt;GitHub user tmaret opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/155&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/155&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5875&quot; title=&quot;Distribution resource configuration manager does update resources&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5875&quot;&gt;&lt;del&gt;SLING-5875&lt;/del&gt;&lt;/a&gt; - Distribution resource configuration manager does update resources&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Use the content resource node if it exists already&lt;/li&gt;
	&lt;li&gt;Fix the infinite recursion of commit calls&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tmaret/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tmaret/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5875&quot; title=&quot;Distribution resource configuration manager does update resources&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5875&quot;&gt;&lt;del&gt;SLING-5875&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/155.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/155.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #155&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 419d686f1ab0828171e0a9eb245a026e5b443875&lt;br/&gt;
Author: tmaret &amp;lt;tmaret@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-07-20T07:11:58Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5875&quot; title=&quot;Distribution resource configuration manager does update resources&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5875&quot;&gt;&lt;del&gt;SLING-5875&lt;/del&gt;&lt;/a&gt; - Distribution resource configuration manager does update resources&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Use the content resource node if it exists already&lt;/li&gt;
	&lt;li&gt;Fix the infinite recursion of commit calls&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15385471" author="marett" created="Wed, 20 Jul 2016 07:13:33 +0000"  >&lt;p&gt;PR is at &lt;a href=&quot;https://github.com/apache/sling/pull/155&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/155&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt; could you have a look/merge ?&lt;/p&gt;</comment>
                            <comment id="15385889" author="teofili" created="Wed, 20 Jul 2016 13:57:24 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;! I&apos;ve committed your PR in r1753517.&lt;/p&gt;</comment>
                            <comment id="15385891" author="githubbot" created="Wed, 20 Jul 2016 13:57:49 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/155&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/155&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i318tb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5872] Management of agent configurations must identify configurations by name </title>
                <link>https://issues.apache.org/jira/browse/SLING-5872</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently, the configurations are identified by the tuple &lt;tt&gt;(name,kind)&lt;/tt&gt;.&lt;br/&gt;
As a consequence, it is possible to create two configurations with the same name but different kind, using the Sling POST servlet on path&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/libs/sling/distribution/settings/agents/&amp;lt;agentName&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This breaks the concept of having a single resource type (and thus a single agent) for a given type.&lt;/p&gt;

&lt;p&gt;This is somewhat related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5742&quot; title=&quot;Do not allow registration of agents/exporters/importers with duplicate names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5742&quot;&gt;&lt;del&gt;SLING-5742&lt;/del&gt;&lt;/a&gt;, however it does not cover creation of agents via the OSGI consoles (only via the Sling POST servlet).&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12990924">SLING-5872</key>
            <summary>Management of agent configurations must identify configurations by name </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jul 2016 21:14:54 +0000</created>
                <updated>Thu, 16 Feb 2017 13:30:03 +0000</updated>
                            <resolved>Wed, 20 Jul 2016 14:47:12 +0000</resolved>
                                    <version>Content Distribution Core 0.1.18</version>
                                    <fixVersion>Content Distribution Core 0.2.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15385464" author="githubbot" created="Wed, 20 Jul 2016 07:04:31 +0000"  >&lt;p&gt;GitHub user tmaret opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/154&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/154&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5872&quot; title=&quot;Management of agent configurations must identify configurations by name &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5872&quot;&gt;&lt;del&gt;SLING-5872&lt;/del&gt;&lt;/a&gt; - Management of agent configurations must identify configurations by name&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Remove the agents with the same name wich are not bind to the same factory&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tmaret/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tmaret/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5872&quot; title=&quot;Management of agent configurations must identify configurations by name &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5872&quot;&gt;&lt;del&gt;SLING-5872&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/154.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/154.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #154&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d24ef381afdc4d4c93378694772c9afe53e45ba9&lt;br/&gt;
Author: tmaret &amp;lt;tmaret@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-07-20T07:02:52Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5872&quot; title=&quot;Management of agent configurations must identify configurations by name &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5872&quot;&gt;&lt;del&gt;SLING-5872&lt;/del&gt;&lt;/a&gt; - Management of agent configurations must identify configurations by name&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Remove the agents with the same name wich are not bind to the same factory&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15385465" author="marett" created="Wed, 20 Jul 2016 07:05:50 +0000"  >&lt;p&gt;PR is at &lt;a href=&quot;https://github.com/apache/sling/pull/154&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/154&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt; could you have a look ?&lt;/p&gt;</comment>
                            <comment id="15385971" author="teofili" created="Wed, 20 Jul 2016 14:47:12 +0000"  >&lt;p&gt;thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, I&apos;ve merged your PR in r1753527.&lt;/p&gt;</comment>
                            <comment id="15385973" author="githubbot" created="Wed, 20 Jul 2016 14:48:12 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/154&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/154&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12972043">SLING-5742</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12972043">SLING-5742</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12992298">SLING-5900</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3187b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5869] htl doesn&apos;t escape &apos;%&apos; character in uri context</title>
                <link>https://issues.apache.org/jira/browse/SLING-5869</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;% char in an href will not be escaped by sightly. This will cause an issue in case a space is immediately after it, e.g.&lt;br/&gt;
&quot;?message=5% fat only&quot; will be escaped like &quot;5%%20fat%20only&quot;, and %%20 will crash some servers&apos; request processing, at least it crashes sling&apos;s with something like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.sling.engine.impl.parameters.ParameterSupport getRequestParameterMapInternal: Error parsing request
java.lang.IllegalArgumentException: Bad escape sequence: %=l
at org.apache.sling.engine.impl.parameters.Util.parseNVPairString(Util.java:330)
at org.apache.sling.engine.impl.parameters.Util.parseQueryString(Util.java:215)
at org.apache.sling.engine.impl.parameters.ParameterSupport.getRequestParameterMapInternal(ParameterSupport.java:247)
at org.apache.sling.engine.impl.parameters.ParameterSupport.getParameter(ParameterSupport.java:
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12990729">SLING-5869</key>
            <summary>htl doesn&apos;t escape &apos;%&apos; character in uri context</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="npeltier">Nicolas Peltier</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jul 2016 11:23:58 +0000</created>
                <updated>Tue, 30 Aug 2016 16:20:09 +0000</updated>
                            <resolved>Tue, 30 Aug 2016 16:18:17 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.2</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15426662" author="radu.cotescu" created="Thu, 18 Aug 2016 15:40:18 +0000"  >&lt;p&gt;What version of the Sightly engine did you use?&lt;/p&gt;</comment>
                            <comment id="15426684" author="npeltier" created="Thu, 18 Aug 2016 15:54:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=radu.cotescu&quot; class=&quot;user-hover&quot; rel=&quot;radu.cotescu&quot;&gt;radu.cotescu&lt;/a&gt; AEM 6.1&apos;s 1.0.2&lt;/p&gt;</comment>
                            <comment id="15449428" author="radu.cotescu" created="Tue, 30 Aug 2016 16:18:18 +0000"  >&lt;p&gt;After a chat with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=npeltier&quot; class=&quot;user-hover&quot; rel=&quot;npeltier&quot;&gt;npeltier&lt;/a&gt;, I&apos;ve found out that the issue was more or less similar to something like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;div data-sly-use.l=&lt;span class=&quot;code-quote&quot;&gt;&quot;logic.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;a href=&lt;span class=&quot;code-quote&quot;&gt;&quot;/search.html?q=${l.interest}&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Click&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-javascript&quot;&gt;use(&lt;span class=&quot;code-keyword&quot;&gt;function&lt;/span&gt; () {
   &lt;span class=&quot;code-quote&quot;&gt;&apos;use strict&apos;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; {
        interest: &lt;span class=&quot;code-quote&quot;&gt;&apos;0% APR&apos;&lt;/span&gt;
    };
});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this context percent encoding should be performed by the developer and not by Sightly / the XSS bundle, because the latter cannot make a difference between &lt;tt&gt;nhttp://www.example.org/search.html?q=0%25%20APR&lt;/tt&gt; and &lt;tt&gt;&lt;a href=&quot;http://www.example.org/search.html?q=0%&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.example.org/search.html?q=0%&lt;/a&gt; APR&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15449437" author="npeltier" created="Tue, 30 Aug 2016 16:20:08 +0000"  >&lt;p&gt;closing (as discussed and summed up above)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i316zz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5867] SlingRequestStatusHealthCheck should add timeout support</title>
                <link>https://issues.apache.org/jira/browse/SLING-5867</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently &lt;tt&gt;o.a.s.hc.support.impl.SlingRequestStatusHealthCheck&lt;/tt&gt; just synchronously calls &lt;tt&gt;SlingRequestProcessor.processResponse&lt;/tt&gt;.&lt;br/&gt;
That means in case of a non-returning response (e.g. caused by a deadlock like &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5847&quot; title=&quot;Deadlock in JcrResourceBundleProvider.getResourceBundleInternal when preloading is enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5847&quot;&gt;&lt;del&gt;SLING-5847&lt;/del&gt;&lt;/a&gt;) the health check will just timeout but never actually really fail (even after a very long time).&lt;/p&gt;

&lt;p&gt;In this case it is good to create a dedicated timeout handling within the &lt;tt&gt;SlingRequestStatusHealthCheck&lt;/tt&gt; (separate from the timeout in &lt;tt&gt;HealthCheckExecutorImpl&lt;/tt&gt;) because for each individual request health check configuration you might want to set different timeouts.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12990673">SLING-5867</key>
            <summary>SlingRequestStatusHealthCheck should add timeout support</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="henzlerg">Georg Henzler</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jul 2016 07:11:20 +0000</created>
                <updated>Mon, 24 Oct 2016 18:04:27 +0000</updated>
                                            <version>Health Check Support 1.0.4</version>
                                                    <component>Health Check</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15384034" author="henzlerg" created="Tue, 19 Jul 2016 12:13:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;... in case of a non-returning response ... the health check will just timeout but never actually really fail (even after a very long time).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This should not be true: &lt;a href=&quot;https://github.com/apache/sling/blob/eecc7e401a0894984a5eaa8992dedfcb5a18e0e5/bundles/extensions/healthcheck/core/src/main/java/org/apache/sling/hc/core/impl/executor/HealthCheckExecutorImpl.java#L432&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/eecc7e401a0894984a5eaa8992dedfcb5a18e0e5/bundles/extensions/healthcheck/core/src/main/java/org/apache/sling/hc/core/impl/executor/HealthCheckExecutorImpl.java#L432&lt;/a&gt; should make it fail eventually after 5 minutes (configurable via &lt;a href=&quot;https://github.com/apache/sling/blob/eecc7e401a0894984a5eaa8992dedfcb5a18e0e5/bundles/extensions/healthcheck/core/src/main/java/org/apache/sling/hc/core/impl/executor/HealthCheckExecutorImpl.java#L88&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/eecc7e401a0894984a5eaa8992dedfcb5a18e0e5/bundles/extensions/healthcheck/core/src/main/java/org/apache/sling/hc/core/impl/executor/HealthCheckExecutorImpl.java#L88&lt;/a&gt;)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;... create a dedicated timeout handling within the SlingRequestStatusHealthCheck (separate from the timeout in HealthCheckExecutorImpl) because for each individual request health check configuration you might want to set different timeouts.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think the maximum time you can wait for a response depends a lot more on from where you are calling (e.g. load balancer or human for a dashboard) than to a fixed set of tags or a particular check (hence configuring this per check or tag does not make much sense IMHO). So at the moment, timeout handling is done by using&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;a global default&lt;/li&gt;
	&lt;li&gt;a per call setting when using the HC Executor (e.g. the request param &quot;timeout&quot; of the HC servlet that set the HC executor option at &lt;a href=&quot;https://github.com/apache/sling/blob/eecc7e401a0894984a5eaa8992dedfcb5a18e0e5/bundles/extensions/healthcheck/core/src/main/java/org/apache/sling/hc/api/execution/HealthCheckExecutionOptions.java#L26&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/eecc7e401a0894984a5eaa8992dedfcb5a18e0e5/bundles/extensions/healthcheck/core/src/main/java/org/apache/sling/hc/api/execution/HealthCheckExecutionOptions.java#L26&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="15384075" author="kwin" created="Tue, 19 Jul 2016 12:25:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;This should not be true: &lt;a href=&quot;https://github.com/apache/sling/blob/eecc7e401a0894984a5eaa8992dedfcb5a18e0e5/bundles/extensions/healthcheck/core/src/main/java/org/apache/sling/hc/core/impl/executor/HealthCheckExecutorImpl.java#L432&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/eecc7e401a0894984a5eaa8992dedfcb5a18e0e5/bundles/extensions/healthcheck/core/src/main/java/org/apache/sling/hc/core/impl/executor/HealthCheckExecutorImpl.java#L432&lt;/a&gt; should make it fail eventually after 5 minutes (configurable via &lt;a href=&quot;https://github.com/apache/sling/blob/eecc7e401a0894984a5eaa8992dedfcb5a18e0e5/bundles/extensions/healthcheck/core/src/main/java/org/apache/sling/hc/core/impl/executor/HealthCheckExecutorImpl.java#L88&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/eecc7e401a0894984a5eaa8992dedfcb5a18e0e5/bundles/extensions/healthcheck/core/src/main/java/org/apache/sling/hc/core/impl/executor/HealthCheckExecutorImpl.java#L88&lt;/a&gt;)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Actually the underlying thread is never killed deliberately, please also compare with &lt;a href=&quot;https://github.com/apache/sling/blob/eecc7e401a0894984a5eaa8992dedfcb5a18e0e5/bundles/extensions/healthcheck/core/src/main/java/org/apache/sling/hc/core/impl/executor/HealthCheckExecutorImpl.java#L422&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/eecc7e401a0894984a5eaa8992dedfcb5a18e0e5/bundles/extensions/healthcheck/core/src/main/java/org/apache/sling/hc/core/impl/executor/HealthCheckExecutorImpl.java#L422&lt;/a&gt;, therefore the HC times out but the underlying thread is still running indefinitely.&lt;/p&gt;</comment>
                            <comment id="15385447" author="henzlerg" created="Wed, 20 Jul 2016 06:38:47 +0000"  >&lt;p&gt;Correct, stopping/interrupting a HC thread can potentially be dangerous (e.g. corrupting the repository), that&apos;s why this is never done. But the HC executor ensures that per HC there is at most one thread running even if that one threat hangs indefinitely (if for one particular thread there is already an existing future, this is always reused). &lt;/p&gt;

&lt;p&gt;But to come back to the initial issue: It could be useful to make maximum execution time thresholds configurable for the request status health check (e.g. &lt;tt&gt;maxExecutionTimeThresholdWarnInMs&lt;/tt&gt; and &lt;tt&gt;maxExecutionTimeThresholdCriticalInMs&lt;/tt&gt;). The setting in theory could be per line of config &lt;tt&gt;paths&lt;/tt&gt;, but to benefit from parallel execution and since SlingRequestStatusHealthCheck has &lt;tt&gt;configurationFactory=true&lt;/tt&gt; it would be more useful to have this as root level configuration values of SlingRequestStatusHealthCheck. If   &lt;tt&gt;maxExecutionTimeThresholdCriticalInMs&lt;/tt&gt; is longer than the timeout as set in the executor for a particular request status config, it can always be set to async to avoid timeouts. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; What about renaming this issue to &quot;SlingRequestStatusHealthCheck should support WARN/CRITICAL thresholds for maximum execution time&quot;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i316nj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5855] Update slf4j dependency to 1.7.6</title>
                <link>https://issues.apache.org/jira/browse/SLING-5855</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We should udpate the dependency to slf4j to at least 1.7.6&lt;/p&gt;</description>
                <environment></environment>
        <key id="12990305">SLING-5855</key>
            <summary>Update slf4j dependency to 1.7.6</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jul 2016 08:52:38 +0000</created>
                <updated>Sun, 24 Jul 2016 06:33:18 +0000</updated>
                            <resolved>Mon, 18 Jul 2016 08:53:08 +0000</resolved>
                                                    <fixVersion>Parent 27</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15381921" author="cziegeler" created="Mon, 18 Jul 2016 08:53:08 +0000"  >&lt;p&gt;Updated in rev 1753179&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i314dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5849] Inconsistent event handling between local package importer and its factory</title>
                <link>https://issues.apache.org/jira/browse/SLING-5849</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;LocalDistributionPackageImporterFactory&lt;/tt&gt; factory sends events &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; which are not sent by the &lt;tt&gt;LocalDistributionPackageImporter&lt;/tt&gt;. As the two classes are used (depending on the configuration) this creates an inconsistent handling of events.&lt;/p&gt;



&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&#160;&lt;a href=&quot;https://github.com/apache/sling/blob/006f9d1601c7b3dec1cd3ab303bc34e26a4870a3/contrib/extensions/distribution/core/src/main/java/org/apache/sling/distribution/packaging/impl/importer/LocalDistributionPackageImporterFactory.java#L94&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/006f9d1601c7b3dec1cd3ab303bc34e26a4870a3/contrib/extensions/distribution/core/src/main/java/org/apache/sling/distribution/packaging/impl/importer/LocalDistributionPackageImporterFactory.java#L94&lt;/a&gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12989806">SLING-5849</key>
            <summary>Inconsistent event handling between local package importer and its factory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="marett">Timothee Maret</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jul 2016 14:06:28 +0000</created>
                <updated>Tue, 14 Feb 2017 09:30:49 +0000</updated>
                            <resolved>Tue, 19 Jul 2016 07:21:11 +0000</resolved>
                                    <version>Content Distribution Core 0.1.18</version>
                                    <fixVersion>Content Distribution Core 0.2.0</fixVersion>
                                    <component>Content Distribution</component>
                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15379502" author="githubbot" created="Fri, 15 Jul 2016 14:45:50 +0000"  >&lt;p&gt;GitHub user tmaret opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/152&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5849&quot; title=&quot;Inconsistent event handling between local package importer and its factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5849&quot;&gt;&lt;del&gt;SLING-5849&lt;/del&gt;&lt;/a&gt; - Inconsistent event handling between local package importer and its factory&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Generate Package Events in the package importer instead of the factory&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tmaret/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tmaret/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5849&quot; title=&quot;Inconsistent event handling between local package importer and its factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5849&quot;&gt;&lt;del&gt;SLING-5849&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/152.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/152.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #152&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4151cda6cb741ceaa0975ec0180fedf7ce75434c&lt;br/&gt;
Author: tmaret &amp;lt;tmaret@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-07-15T14:42:35Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5849&quot; title=&quot;Inconsistent event handling between local package importer and its factory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5849&quot;&gt;&lt;del&gt;SLING-5849&lt;/del&gt;&lt;/a&gt; - Inconsistent event handling between local package importer and its factory&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Generate Package Events in the package importer instead of the factory&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15379503" author="marett" created="Fri, 15 Jul 2016 14:46:03 +0000"  >&lt;p&gt;Opened PR &lt;a href=&quot;https://github.com/apache/sling/pull/152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/152&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15379509" author="marett" created="Fri, 15 Jul 2016 14:49:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt; could you review/apply this ?&lt;/p&gt;</comment>
                            <comment id="15379564" author="teofili" created="Fri, 15 Jul 2016 15:30:55 +0000"  >&lt;p&gt;sure, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="15383705" author="teofili" created="Tue, 19 Jul 2016 07:21:11 +0000"  >&lt;p&gt;applied Timothee&apos;s patch in r1753341&lt;/p&gt;</comment>
                            <comment id="15383706" author="githubbot" created="Tue, 19 Jul 2016 07:21:14 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/152&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/152&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12818177" name="SLING-5849.diff" size="15108" author="marett" created="Fri, 15 Jul 2016 14:48:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i311b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5847] Deadlock in JcrResourceBundleProvider.getResourceBundleInternal when preloading is enabled</title>
                <link>https://issues.apache.org/jira/browse/SLING-5847</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Under particular timing situations the &lt;tt&gt;reloadBundle&lt;/tt&gt; job and a parallel call to &lt;tt&gt;JcrResourceBundleProvider.getResourceBundleInternal()&lt;/tt&gt; might block each other and also all new threads calling &lt;tt&gt;JcrResourceBundleProvider.getResourceBundleInternal()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The thread dump in that situation looks like follows&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;0:0:0:0:0:0:0:1 [1468492407436] GET &amp;lt;some request url&amp;gt; HTTP/1.1&quot;&lt;/span&gt; - &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; t@69826
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: BLOCKED
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.registerResourceBundle(JcrResourceBundleProvider.java:458)
	- waiting to lock &amp;lt;19c60354&amp;gt; (a org.apache.sling.i18n.impl.JcrResourceBundleProvider) owned by &lt;span class=&quot;code-quote&quot;&gt;&quot;pool-8-thread-5&quot;&lt;/span&gt; t@111
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.getResourceBundleInternal(JcrResourceBundleProvider.java:437)
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.createResourceBundle(JcrResourceBundleProvider.java:480)
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.getResourceBundleInternal(JcrResourceBundleProvider.java:435)
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.getResourceBundle(JcrResourceBundleProvider.java:185)
	at org.apache.sling.i18n.impl.I18NFilter$CombinedBundleProvider.getResourceBundle(I18NFilter.java:217)
	at org.apache.sling.i18n.impl.I18NFilter$BaseI18NSlingHttpServletRequest.getResourceBundle(I18NFilter.java:311)
	at org.apache.sling.api.wrappers.SlingHttpServletRequestWrapper.getResourceBundle(SlingHttpServletRequestWrapper.java:115)
	at org.apache.sling.api.wrappers.SlingHttpServletRequestWrapper.getResourceBundle(SlingHttpServletRequestWrapper.java:115)
	at org.apache.sling.api.wrappers.SlingHttpServletRequestWrapper.getResourceBundle(SlingHttpServletRequestWrapper.java:115)
	at org.apache.sling.api.wrappers.SlingHttpServletRequestWrapper.getResourceBundle(SlingHttpServletRequestWrapper.java:115)
	at org.apache.sling.api.wrappers.SlingHttpServletRequestWrapper.getResourceBundle(SlingHttpServletRequestWrapper.java:115)
	at ...

&lt;span class=&quot;code-quote&quot;&gt;&quot;pool-8-thread-5&quot;&lt;/span&gt; - &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; t@111
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &amp;lt;69b06467&amp;gt; (a java.util.concurrent.Semaphore$NonfairSync)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:997)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1304)
	at java.util.concurrent.Semaphore.acquire(Semaphore.java:312)
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.getResourceBundleInternal(JcrResourceBundleProvider.java:429)
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.createResourceBundle(JcrResourceBundleProvider.java:480)
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.getResourceBundleInternal(JcrResourceBundleProvider.java:435)
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.getResourceBundle(JcrResourceBundleProvider.java:185)
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.reloadBundle(JcrResourceBundleProvider.java:357)
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider.reloadBundle(JcrResourceBundleProvider.java:352)
	at org.apache.sling.i18n.impl.JcrResourceBundleProvider$2.run(JcrResourceBundleProvider.java:320)
	- locked &amp;lt;19c60354&amp;gt; (a org.apache.sling.i18n.impl.JcrResourceBundleProvider)
	at org.apache.sling.commons.scheduler.impl.QuartzJobExecutor.execute(QuartzJobExecutor.java:115)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is what happens internally:&lt;/p&gt;

&lt;p&gt;Thread 1 has acquired a semaphore for a specific key and now waits for the lock hold by thread 2 in &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void registerResourceBundle(Key key, JcrResourceBundle resourceBundle) {
        Dictionary&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; serviceProps = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Hashtable&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (key.baseName != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            serviceProps.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;baseName&quot;&lt;/span&gt;, key.baseName);
        }
        serviceProps.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;locale&quot;&lt;/span&gt;, key.locale.toString());
        ServiceRegistration serviceReg = bundleContext.registerService(ResourceBundle.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(),
                resourceBundle, serviceProps);
-&amp;gt;        &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;) {
            bundleServiceRegistrations.put(key, serviceReg);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thread 2 holds that lock in&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void scheduleReloadBundle(JcrResourceBundle bundle) {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; baseName = bundle.getBaseName();
        Locale locale = bundle.getLocale();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Key key = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Key(baseName, locale);

        &lt;span class=&quot;code-comment&quot;&gt;// defer &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; job
&lt;/span&gt;        ScheduleOptions options = scheduler.AT(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Date(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.currentTimeMillis() + invalidationDelay));
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; jobName = &lt;span class=&quot;code-quote&quot;&gt;&quot;JcrResourceBundleProvider: reload bundle with key &quot;&lt;/span&gt; + key.toString();
        scheduledJobNames.add(jobName);
        options.name(jobName);
        scheduler.schedule(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt;() {
            @Override
            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
                &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt;(JcrResourceBundleProvider.&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;) {
-&amp;gt;                    reloadBundle(key);
                }
                scheduledJobNames.remove(jobName);
            }
        }, options);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and now waits for the same semaphore that is being hold by thread 1 during the preloading.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12989696">SLING-5847</key>
            <summary>Deadlock in JcrResourceBundleProvider.getResourceBundleInternal when preloading is enabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jul 2016 06:56:04 +0000</created>
                <updated>Fri, 5 Aug 2016 08:37:40 +0000</updated>
                            <resolved>Fri, 15 Jul 2016 08:17:25 +0000</resolved>
                                    <version>i18n 2.4.4</version>
                                    <fixVersion>i18n 2.4.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15379004" author="kwin" created="Fri, 15 Jul 2016 08:16:55 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1752795&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1752795&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexander.klimetschek&quot; class=&quot;user-hover&quot; rel=&quot;alexander.klimetschek&quot;&gt;alexander.klimetschek&lt;/a&gt; Could you have a look?&lt;/p&gt;</comment>
                            <comment id="15382131" author="cziegeler" created="Mon, 18 Jul 2016 11:52:12 +0000"  >&lt;p&gt;Lgtm&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i310mn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5841] Self closing DIV when using &apos;html&apos; context in Sightly</title>
                <link>https://issues.apache.org/jira/browse/SLING-5841</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When I do:&lt;br/&gt;
${&apos;&amp;lt;div&amp;gt;&amp;lt;/div&amp;gt;&apos; @context=&apos;html&apos;}&lt;/p&gt;

&lt;p&gt;It outputs invalid HTML, it self-closes the element:&lt;br/&gt;
&amp;lt;div/&amp;gt;&lt;/p&gt;

&lt;p&gt;Only a set number of elements are permitted to self-close - &lt;a href=&quot;http://xahlee.info/js/html5_non-closing_tag.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://xahlee.info/js/html5_non-closing_tag.html&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12989392">SLING-5841</key>
            <summary>Self closing DIV when using &apos;html&apos; context in Sightly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="danchapman-pearson">Dan Chapman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jul 2016 09:07:00 +0000</created>
                <updated>Wed, 31 Aug 2016 16:09:04 +0000</updated>
                            <resolved>Tue, 30 Aug 2016 16:47:51 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.0</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15426622" author="radu.cotescu" created="Thu, 18 Aug 2016 15:18:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danchapman-pearson&quot; class=&quot;user-hover&quot; rel=&quot;danchapman-pearson&quot;&gt;danchapman-pearson&lt;/a&gt;, how can I reproduce this? You haven&apos;t provided any details regarding the platform you&apos;re using.&lt;/p&gt;</comment>
                            <comment id="15449498" author="radu.cotescu" created="Tue, 30 Aug 2016 16:47:51 +0000"  >&lt;p&gt;This is due to the AntiSamy &lt;tt&gt;useXHTML&lt;/tt&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/org.apache.sling.xss-1.0.0/src/main/resources/SLING-INF/content/config.xml#L28&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;directive&lt;/a&gt;, which is set to &lt;tt&gt;true&lt;/tt&gt;. The reason for this is that when filtering self-closing tags we don&apos;t want to append a closing tag (the reverse of your example).&lt;/p&gt;

&lt;p&gt;However, for your use-case you could do:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-html&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;custom-tag data-sly-element=&lt;span class=&quot;code-quote&quot;&gt;&quot;${&lt;span class=&quot;code-quote&quot;&gt;&apos;div&apos;&lt;/span&gt; @ context=&lt;span class=&quot;code-quote&quot;&gt;&apos;html&apos;&lt;/span&gt;}&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/custom-tag&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This should work fine since &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5944&quot; title=&quot;Sightly doesn&amp;#39;t allow to overwrite the context for `data-sly-element`&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5944&quot;&gt;&lt;del&gt;SLING-5944&lt;/del&gt;&lt;/a&gt; has been fixed.&lt;/p&gt;</comment>
                            <comment id="15449726" author="jebailey" created="Tue, 30 Aug 2016 18:18:07 +0000"  >&lt;p&gt;Can you clarify a bit on closing this? It sounds like your saying that slightly doesn&apos;t support HTML5? Is there a time period where this is going to change?&lt;/p&gt;</comment>
                            <comment id="15451744" author="radu.cotescu" created="Wed, 31 Aug 2016 09:38:43 +0000"  >&lt;p&gt;Sightly does support HTML5. That expression however (&lt;tt&gt;${&apos;&amp;lt;div&amp;gt;&amp;lt;/div&amp;gt;&apos; @context=&apos;html&apos;&lt;/tt&gt;}) is passed to the XSS API for validation, with the &lt;tt&gt;html&lt;/tt&gt; context. The filtering will be performed by the AntiSamy library, which by default is configured to use XHTML for filtering, in order to not automatically append closing tags to self-closing ones. For that empty &lt;tt&gt;div&lt;/tt&gt;, AntiSamy will convert the tag to &lt;tt&gt;&amp;lt;div/&amp;gt;&lt;/tt&gt;. There are two workarounds:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;${&apos;&amp;lt;div&amp;gt; &amp;lt;/div&amp;gt;&apos; @context=&apos;html&apos;&lt;/tt&gt;}&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;&amp;lt;custom-tag data-sly-element=&quot;${&apos;div&apos; @ context=&apos;html&apos;}&quot;&amp;gt;&amp;lt;/custom-tag&amp;gt;&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30yr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5839] Implementation must not rely on SERVICE_PID</title>
                <link>https://issues.apache.org/jira/browse/SLING-5839</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The current implementation is relying in some places on the existince of the SERVICE_PID service property. However this is optional and an implementation detail.&lt;br/&gt;
And the code currently only works as there is a long time bug in the maven scr plugin (&lt;a href=&quot;https://issues.apache.org/jira/browse/FELIX-5304&quot; title=&quot;SERVICE_PID property should not be created&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FELIX-5304&quot;&gt;&lt;del&gt;FELIX-5304&lt;/del&gt;&lt;/a&gt;) which wrongly adds the SERVICE_PID to every component. &lt;br/&gt;
Therefore we must not rely on SERVICE_PID &lt;/p&gt;</description>
                <environment></environment>
        <key id="12988976">SLING-5839</key>
            <summary>Implementation must not rely on SERVICE_PID</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Jul 2016 04:22:02 +0000</created>
                <updated>Wed, 8 Mar 2017 08:41:02 +0000</updated>
                            <resolved>Wed, 13 Jul 2016 05:00:48 +0000</resolved>
                                                    <fixVersion>Health Check Core 1.2.6</fixVersion>
                                    <component>Health Check</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15374349" author="cziegeler" created="Wed, 13 Jul 2016 05:00:48 +0000"  >&lt;p&gt;I&apos;ve replaced the usage of SERVICE_PID in the composite health check, removed it as a property from the jmx bean and added the service id to the name of the meta data&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12987632">SLING-5827</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30w6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5838] ResourceChangeListenerInfo does not expand relative paths correctly</title>
                <link>https://issues.apache.org/jira/browse/SLING-5838</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;ResourceChangeListenerInfo&lt;/tt&gt; is supposed to correctly expand relative paths and append them to the current search paths for the stored path set. However this does not work for relative paths like &lt;tt&gt;./folder/resource&lt;/tt&gt;, resulting in absolute paths like &lt;tt&gt;/libs/./folder/resource&lt;/tt&gt; which are not normalised when performing path matching.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12988757">SLING-5838</key>
            <summary>ResourceChangeListenerInfo does not expand relative paths correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="radu">Radu Cotescu</assignee>
                                    <reporter username="radu">Radu Cotescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jul 2016 15:39:39 +0000</created>
                <updated>Thu, 21 Jul 2016 15:27:11 +0000</updated>
                            <resolved>Wed, 13 Jul 2016 10:04:58 +0000</resolved>
                                    <version>Resource Resolver 1.4.12</version>
                                    <fixVersion>Resource Resolver 1.4.14</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15373119" author="radu.cotescu" created="Tue, 12 Jul 2016 15:51:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, can you please review &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12817456/12817456_SLING-5838.patch&quot; title=&quot;SLING-5838.patch attached to SLING-5838&quot;&gt;SLING-5838.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;?&lt;/p&gt;</comment>
                            <comment id="15374749" author="cziegeler" created="Wed, 13 Jul 2016 09:52:25 +0000"  >&lt;p&gt;Lgtm, thanks&lt;/p&gt;</comment>
                            <comment id="15374766" author="radu.cotescu" created="Wed, 13 Jul 2016 10:04:58 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1752383&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1752383&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12817456" name="SLING-5838.patch" size="5794" author="radu" created="Tue, 12 Jul 2016 15:51:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30uu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5836] RepoInit ITs fail - 5 bundles stuck in installed state</title>
                <link>https://issues.apache.org/jira/browse/SLING-5836</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The repoinit ITs fail on Jenkins ( sling-trunk-1.7 and sling-trunk-1.8 ) and locally as well.&lt;/p&gt;

&lt;p&gt;5 bundles fail to start due to missing exported packages ( see full log attached ).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; FYI&lt;/p&gt;</description>
                <environment></environment>
        <key id="12988708">SLING-5836</key>
            <summary>RepoInit ITs fail - 5 bundles stuck in installed state</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="olli">Oliver Lietz</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Tue, 12 Jul 2016 13:06:19 +0000</created>
                <updated>Tue, 16 Aug 2016 11:55:11 +0000</updated>
                            <resolved>Tue, 12 Jul 2016 17:36:42 +0000</resolved>
                                                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15372873" author="olli" created="Tue, 12 Jul 2016 13:30:42 +0000"  >&lt;p&gt;That is strange... the Launchpad ITs do not fail on my local system with repoinit releases and the latest dependencies under vote on Karaf (preparing a feature for repoinit).&lt;/p&gt;</comment>
                            <comment id="15372878" author="rombert" created="Tue, 12 Jul 2016 13:32:46 +0000"  >&lt;p&gt;These are not the default Launchpad ITs, but a set of separate ITs living under &lt;tt&gt;bundles/extensions/repoinit/it&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="15372888" author="olli" created="Tue, 12 Jul 2016 13:36:59 +0000"  >&lt;p&gt;Launchpad builder is using outdated repoinit bundles and should be updated.&lt;/p&gt;</comment>
                            <comment id="15373310" author="olli" created="Tue, 12 Jul 2016 17:36:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/r1752322&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1752322&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12817411" name="error.log" size="500354" author="rombert" created="Tue, 12 Jul 2016 13:07:13 +0000"/>
                            <attachment id="12817412" name="repoinit-5-bundles-installed.png" size="21696" author="rombert" created="Tue, 12 Jul 2016 13:09:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30ujb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5829] Fix handling of SERVICE_PID</title>
                <link>https://issues.apache.org/jira/browse/SLING-5829</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The value of the service property SERVICE_PID can either be String or String[]. We should guard against String[].&lt;/p&gt;

&lt;p&gt;The resource resolver uses the PID for configuring required resource providers&lt;/p&gt;</description>
                <environment></environment>
        <key id="12987764">SLING-5829</key>
            <summary>Fix handling of SERVICE_PID</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jul 2016 11:49:56 +0000</created>
                <updated>Thu, 21 Jul 2016 15:27:10 +0000</updated>
                            <resolved>Fri, 8 Jul 2016 11:50:54 +0000</resolved>
                                                    <fixVersion>Resource Resolver 1.4.14</fixVersion>
                                    <component>ResourceResolver</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15367578" author="cziegeler" created="Fri, 8 Jul 2016 11:50:54 +0000"  >&lt;p&gt;I&apos;ve adjusted the PID handling in rev 1751888&lt;/p&gt;</comment>
                            <comment id="15367639" author="steven.walters" created="Fri, 8 Jul 2016 13:01:58 +0000"  >&lt;p&gt;I have concerns regarding the changes made here in FactoryPreconditions.java:&lt;/p&gt;

&lt;p&gt;the code doesn&apos;t actually seem to handle the scenario of a ResourceProvider having multiple SERVICE_PIDs, instead such a provider is ignored in any String-based PID matching checks as &lt;tt&gt;String.equals(String[])&lt;/tt&gt; will always be &lt;tt&gt;false&lt;/tt&gt; (such as possibly occurring on &lt;a href=&quot;http://svn.apache.org/viewvc/sling/trunk/bundles/resourceresolver/src/main/java/org/apache/sling/resourceresolver/impl/FactoryPreconditions.java?revision=1751888&amp;amp;view=markup&amp;amp;pathrev=1751888#l99&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;line 99&lt;/a&gt; and &lt;a href=&quot;http://svn.apache.org/viewvc/sling/trunk/bundles/resourceresolver/src/main/java/org/apache/sling/resourceresolver/impl/FactoryPreconditions.java?revision=1751888&amp;amp;view=markup&amp;amp;pathrev=1751888#l106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;line 106&lt;/a&gt;)&lt;br/&gt;
Instead the change appears to only avoid the associated ClassCastException on attempting to cast a String[] or Collection to String.&lt;/p&gt;

&lt;p&gt;so as it is currently, the Filter matching approach appears to be the only route in which this scenario will function as intended, using the PID for declaring requiredness will always fail for provider implementations that have multiple SERVICE_PIDs (which is likely to cause frustration sometime in the future).&lt;/p&gt;

&lt;p&gt;It seems like if the SERVICE_PID is an array or collection, you would need to see if the PID string being compared is contained in the array/collection here to be truly functional.&lt;/p&gt;

&lt;p&gt;The other changes to avoid the ClassCastException in ResourceProviderTracker.java in ignoring non String SERVICE_PIDS (making them always &lt;tt&gt;null&lt;/tt&gt;) seem to come back to FactoryPreconditions again through &lt;tt&gt;ChangeListener.providerRemoved&lt;/tt&gt; causing the FactoryPreconditions line 99 logic to always be false, though I&apos;m not sure what the consequences of this would actually be yet... maybe just some wasted computations to see that a possibly required provider is not available?&lt;/p&gt;</comment>
                            <comment id="15367642" author="cziegeler" created="Fri, 8 Jul 2016 13:05:33 +0000"  >&lt;p&gt;It&apos;s correct this fix is just avoiding the ClassCastException - the whole mechanism for configuring which providers are required based on a PID is a wrong approach. So I don&apos;t want to put more effort into it than is necessary. We should base this on the provider name property, which is much more stable&lt;/p&gt;</comment>
                            <comment id="15367644" author="cziegeler" created="Fri, 8 Jul 2016 13:07:21 +0000"  >&lt;p&gt;Of course if there is someone using a provider implementation with multiple pids (we don&apos;t have them in Sling) &lt;b&gt;and&lt;/b&gt; wants to have this provider required, I&apos;m happy to apply a patch. But in the past years, there was clearly no such use case&lt;/p&gt;</comment>
                            <comment id="15367653" author="steven.walters" created="Fri, 8 Jul 2016 13:14:02 +0000"  >&lt;p&gt;Fair enough I suppose, though I&apos;m not currently seeing such a ticket or discussion related to transitioning from SERVICE_PID to ResourceProvider.PROPERTY_NAME as mentioned here. (e.g. don&apos;t want this necessity to be lost)&lt;br/&gt;
Such a change would also break existing configurations that utilize the matching behavior on SERVICE_PID, possibly requiring configuration updates to be made on upgrade, so will likely need mentioning in any such release notes for higher tier applications, such as AEM.&lt;/p&gt;</comment>
                            <comment id="15367660" author="cziegeler" created="Fri, 8 Jul 2016 13:20:14 +0000"  >&lt;p&gt;Good point, I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5830&quot; title=&quot;Allow required providers to be referenced through name (instead of PID)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5830&quot;&gt;&lt;del&gt;SLING-5830&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12987751">SLING-5828</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30p7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5828] Support multi-valued Constants.SERVICE_PID</title>
                <link>https://issues.apache.org/jira/browse/SLING-5828</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As shown by &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5827&quot; title=&quot;HealthCheckMetadata wrongly assumes (String) SERVICE_PID &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5827&quot;&gt;&lt;del&gt;SLING-5827&lt;/del&gt;&lt;/a&gt; it is possible for the Constants.SERVICE_PID property of an OSGi service to be an array or a Collection of String.&lt;/p&gt;

&lt;p&gt;Quoting &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, &lt;em&gt;The value of this property must be of type String, String[], or Collection of String&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;We have several places in our code that assume the value to be just a String, I&apos;ll attach an initial list and confirm on our dev list that we need to fix them.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://osgi.org/javadoc/r4v43/core/org/osgi/framework/Constants.html#SERVICE_PID&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://osgi.org/javadoc/r4v43/core/org/osgi/framework/Constants.html#SERVICE_PID&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12987751">SLING-5828</key>
            <summary>Support multi-valued Constants.SERVICE_PID</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Jul 2016 10:36:13 +0000</created>
                <updated>Fri, 8 Jul 2016 11:56:08 +0000</updated>
                                                                            <component>General</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15367511" author="bdelacretaz" created="Fri, 8 Jul 2016 10:40:37 +0000"  >&lt;p&gt;Attached string-pid.txt, rough analysis of where our code assumes just a String (that&apos;s 6 modules)&lt;/p&gt;</comment>
                            <comment id="15367537" author="cziegeler" created="Fri, 8 Jul 2016 11:10:09 +0000"  >&lt;p&gt;I think in general, replacing SERVICE_PID - which is not really reliable - with SERVICE_ID is the best option. But I guess we have to carefully look into the different use cases&lt;/p&gt;

&lt;p&gt;I don&apos;t see a need for an utility method somewhere as code in general should not rely on the PID&lt;/p&gt;</comment>
                            <comment id="15367548" author="cziegeler" created="Fri, 8 Jul 2016 11:17:50 +0000"  >&lt;p&gt;From that list the resourceresolver is looking for required components based on the SERVICE_PID - so in that case, we just need to check whether the value is a String or an array. If it is an array with more than one value, we can treat it as null&lt;/p&gt;</comment>
                            <comment id="15367552" author="cziegeler" created="Fri, 8 Jul 2016 11:19:00 +0000"  >&lt;p&gt;The Sling event bundle is ok. It&apos;s internal usage&lt;/p&gt;</comment>
                            <comment id="15367553" author="cziegeler" created="Fri, 8 Jul 2016 11:19:47 +0000"  >&lt;p&gt;installer/factories/configuration is fine as well as this is an internal data structure, just using the same constant&lt;/p&gt;</comment>
                            <comment id="15367575" author="bdelacretaz" created="Fri, 8 Jul 2016 11:48:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;in general, replacing SERVICE_PID - which is not really reliable - with SERVICE_ID is the best option.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s probably the key indeed - I wrongly assumed SERVICE_PID to be a unique service ID String and I suppose others have had the same assumption.&lt;/p&gt;</comment>
                            <comment id="15367579" author="cziegeler" created="Fri, 8 Jul 2016 11:56:08 +0000"  >&lt;p&gt;The &apos;P&apos; is important &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; But yes, I think initially we made this assumption in various places&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12987764">SLING-5829</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12987632">SLING-5827</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12816800" name="string-pid.txt" size="2273" author="bdelacretaz" created="Fri, 8 Jul 2016 10:40:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30p4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5827] HealthCheckMetadata wrongly assumes (String) SERVICE_PID </title>
                <link>https://issues.apache.org/jira/browse/SLING-5827</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I&apos;m getting a classcastexception in the healthcheck component. This is happenning only for my components (don&apos;t know why :-S).&lt;/p&gt;

&lt;p&gt;I have looked at the source code and in my case at the AsyncHelthCheckExecutor the code passes the lines bellow&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;AsyncHelthCheckExecutor.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ServiceReference serviceReference = event.getServiceReference();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isHealthCheck = serviceReference.isAssignableTo(bundleContext.getBundle(), HealthCheck.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName());

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isHealthCheck) {
            &lt;span class=&quot;code-comment&quot;&gt;// True at my &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;
&lt;/span&gt;        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Later in the method getHealthCheckTitle of the class HealthCheckMetadata at the line bellow:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;HealthCheckMetadata.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (StringUtils.isBlank(name)) {
            name = (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) ref.getProperty(Constants.SERVICE_PID);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ref.getProperty(Constants.SERVICE_PID) is returning an ArrayList and I have the stacktrace bellow as a result&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Stacktrace&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.ClassCastException: java.util.ArrayList cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;
	at org.apache.sling.hc.util.HealthCheckMetadata.getHealthCheckTitle(HealthCheckMetadata.java:146)
	at org.apache.sling.hc.util.HealthCheckMetadata.&amp;lt;init&amp;gt;(HealthCheckMetadata.java:53)
	at org.apache.sling.hc.core.impl.executor.AsyncHealthCheckExecutor.serviceChanged(AsyncHealthCheckExecutor.java:114)
	at org.apache.felix.framework.util.EventDispatcher.invokeServiceListenerCallback(EventDispatcher.java:991)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:839)
	at org.apache.felix.framework.util.EventDispatcher.fireServiceEvent(EventDispatcher.java:546)
	at org.apache.felix.framework.Felix.fireServiceEvent(Felix.java:4557)
	at org.apache.felix.framework.Felix.registerService(Felix.java:3549)
	at org.apache.felix.framework.BundleContextImpl.registerService(BundleContextImpl.java:348)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:869)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager$3.register(AbstractComponentManager.java:857)
	at org.apache.felix.scr.impl.manager.RegistrationManager.changeRegistration(RegistrationManager.java:133)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.registerService(AbstractComponentManager.java:915)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.activateInternal(AbstractComponentManager.java:715)
	at org.apache.felix.scr.impl.manager.AbstractComponentManager.enable(AbstractComponentManager.java:399)
	at org.apache.felix.scr.impl.config.ConfigurableComponentHolder.enableComponents(ConfigurableComponentHolder.java:676)
	at org.apache.felix.scr.impl.BundleComponentActivator.initialEnable(BundleComponentActivator.java:339)
	at org.apache.felix.scr.impl.Activator.loadComponents(Activator.java:360)
	at org.apache.felix.scr.impl.Activator.access$000(Activator.java:53)
	at org.apache.felix.scr.impl.Activator$ScrExtension.start(Activator.java:260)
	at org.apache.felix.utils.extender.AbstractExtender.createExtension(AbstractExtender.java:259)
	at org.apache.felix.utils.extender.AbstractExtender.modifiedBundle(AbstractExtender.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:482)
	at org.osgi.util.tracker.BundleTracker$Tracked.customizerModified(BundleTracker.java:415)
	at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:232)
	at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:444)
	at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:916)
	at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:835)
	at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:517)
	at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4541)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2172)
	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998)
	at aQute.launcher.Launcher.update(Launcher.java:482)
	at aQute.launcher.Launcher.activate(Launcher.java:381)
	at aQute.launcher.Launcher.run(Launcher.java:275)
	at aQute.launcher.Launcher.main(Launcher.java:132)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12987632">SLING-5827</key>
            <summary>HealthCheckMetadata wrongly assumes (String) SERVICE_PID </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="ivoleitao">Ivo Leit&#227;o</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jul 2016 22:53:39 +0000</created>
                <updated>Wed, 8 Mar 2017 08:40:54 +0000</updated>
                            <resolved>Fri, 14 Oct 2016 12:12:55 +0000</resolved>
                                    <version>Health Check Core 1.2.4</version>
                                    <fixVersion>Health Check Core 1.2.6</fixVersion>
                                    <component>Health Check</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15367436" author="bdelacretaz" created="Fri, 8 Jul 2016 09:18:10 +0000"  >&lt;p&gt;Thanks for your detailed report!&lt;/p&gt;

&lt;p&gt;I&apos;m not sure why SERVICE_PID can be an ArrayList (will ask on our dev list) but it make sense to be more defensive when converting those properties, I have changed that in &lt;a href=&quot;http://svn.apache.org/r1751873&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1751873&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please cross-check and mark this issue resolved if ok.&lt;/p&gt;</comment>
                            <comment id="15367440" author="bdelacretaz" created="Fri, 8 Jul 2016 09:23:16 +0000"  >&lt;p&gt;I checked the OSGi spec (R4, but that shouldn&apos;t have changed) and it says that the service.pid property must be a String. Any idea why it&apos;s an ArrayList if your case? Are you doing anything special with that SERVICE_PID value in your code?&lt;/p&gt;</comment>
                            <comment id="15367474" author="ivoleitao" created="Fri, 8 Jul 2016 09:57:35 +0000"  >&lt;p&gt;Hi !&lt;/p&gt;

&lt;p&gt;I was little confused also but I suspect the problem is the way I have made my declarative component. In my case I have two configuration pids. Also, I&apos;m using the newer version of the specification i.e. R6&lt;/p&gt;

&lt;p&gt;This is my component configuration header:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Component.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Component(
	configurationPid = {
		WSConstants.CPID_WS,
		WSConstants.XXX
	},
	configurationPolicy = ConfigurationPolicy.REQUIRE,
	reference = {
		@Reference(
			name = WSConstants.CONTEXT_SERVICE_REF, 
			service = DataContext.class,
			cardinality = ReferenceCardinality.MANDATORY)
		})
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The component annotation&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;Configuration.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@ObjectClassDefinition(pid = WSConstants.XXXX, name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%name&quot;&lt;/span&gt;, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%description&quot;&lt;/span&gt;, localization = &lt;span class=&quot;code-quote&quot;&gt;&quot;OSGI-INF/l10n/ws/xxxx/xxx&quot;&lt;/span&gt;, icon = @Icon(resource = &lt;span class=&quot;code-quote&quot;&gt;&quot;OSGI-INF/icon/ws.png&quot;&lt;/span&gt;, size = 32))
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; @&lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; Configuration {
	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%name.name&quot;&lt;/span&gt;, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%name.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;;

	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%namespaceUri.name&quot;&lt;/span&gt;, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%namespaceUri.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; namespaceUri() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;;

	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%serviceName.name&quot;&lt;/span&gt;, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%serviceName.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; serviceName() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;;

	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%wsdlLocation.name&quot;&lt;/span&gt;, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%wsdlLocation.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; wsdlLocation() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;;

	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%address.name&quot;&lt;/span&gt;, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%address.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; address() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;;

	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%userName.name&quot;&lt;/span&gt;, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%userName.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; userName() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;;

	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%password.name&quot;&lt;/span&gt;, type = AttributeType.PASSWORD, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%password.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; password() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;;

	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%connectionTimeout.name&quot;&lt;/span&gt;, type = AttributeType.LONG, min = &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%connectionTimeout.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; connectionTimeout() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; 10000;

	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%receiveTimeout.name&quot;&lt;/span&gt;, type = AttributeType.LONG, min = &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%receiveTimeout.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; receiveTimeout() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; 180000;

	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%proxyEnabled.name&quot;&lt;/span&gt;, type = AttributeType.BOOLEAN, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%proxyEnabled.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; proxyEnabled() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;

	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%proxyHost.name&quot;&lt;/span&gt;, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%proxyHost.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; proxyHost() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;localhost&quot;&lt;/span&gt;;

	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%proxyPort.name&quot;&lt;/span&gt;, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%proxyPort.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; proxyPort() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; 8888;

	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%startDateFormat.name&quot;&lt;/span&gt;, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%startDateFormat.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; startDateFormat() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;dd.MM.yyyy HH:mm:ss&quot;&lt;/span&gt;;

	@AttributeDefinition(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;%successStatusCodes.name&quot;&lt;/span&gt;, description = &lt;span class=&quot;code-quote&quot;&gt;&quot;%successStatusCodes.description&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] successStatusCodes() &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; { WSConstants.DEFAULT_SUCCESS_STATUS_CODE, &lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;5650&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;5651&quot;&lt;/span&gt; };
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The component configuration file obtained via file install or similar&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;configuration.config&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;name=&lt;span class=&quot;code-quote&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;
proxyEnabled=B&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;
serviceName=&lt;span class=&quot;code-quote&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;
wsdlLocation=&lt;span class=&quot;code-quote&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;
successStatusCodes=[&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;5650&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;5651&quot;&lt;/span&gt;]
receiveTimeout=L&lt;span class=&quot;code-quote&quot;&gt;&quot;180000&quot;&lt;/span&gt;
namespaceUri=&lt;span class=&quot;code-quote&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;
proxyHost=&lt;span class=&quot;code-quote&quot;&gt;&quot;localhost&quot;&lt;/span&gt;
userName=&lt;span class=&quot;code-quote&quot;&gt;&quot;SSO&quot;&lt;/span&gt;
connectionTimeout=L&lt;span class=&quot;code-quote&quot;&gt;&quot;10000&quot;&lt;/span&gt;
address=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//xxx.com&quot;&lt;/span&gt;
&lt;/span&gt;password=&lt;span class=&quot;code-quote&quot;&gt;&quot;xxxx&quot;&lt;/span&gt;
startDateFormat=&lt;span class=&quot;code-quote&quot;&gt;&quot;dd.MM.yyyy\ HH:mm:ss&quot;&lt;/span&gt;
proxyPort=I&lt;span class=&quot;code-quote&quot;&gt;&quot;8888&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is a webservice proxy component and I have several each with multiple configuration pids. I suspect this is the problem but I&apos;m not completely sure&lt;/p&gt;</comment>
                            <comment id="15367494" author="bdelacretaz" created="Fri, 8 Jul 2016 10:17:54 +0000"  >&lt;p&gt;Ok, I was not aware that you can have multiple configuration PIDs but indeed the @Component annotation javadocs show that change:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;In &lt;a href=&quot;https://osgi.org/javadoc/r5/enterprise/org/osgi/service/component/annotations/Component.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://osgi.org/javadoc/r5/enterprise/org/osgi/service/component/annotations/Component.html&lt;/a&gt; configurationPid is a String&lt;/li&gt;
	&lt;li&gt;In &lt;a href=&quot;https://osgi.org/javadoc/r6/enterprise/org/osgi/service/component/annotations/Component.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://osgi.org/javadoc/r6/enterprise/org/osgi/service/component/annotations/Component.html&lt;/a&gt; it&apos;s an array of String&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll ask our OSGi gurus on our dev list about the potential impact of this as I suppose we have several cases where we assume a ServiceReference&apos;s pid to be single valued.&lt;/p&gt;

&lt;p&gt;For now if my fix works for you we can resolve this issue, thanks very much for your input!&lt;/p&gt;</comment>
                            <comment id="15367501" author="bdelacretaz" created="Fri, 8 Jul 2016 10:22:22 +0000"  >&lt;p&gt;Reading more javadocs, &lt;a href=&quot;https://osgi.org/javadoc/r6/enterprise/org/osgi/service/event/EventConstants.html#SERVICE_PID&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://osgi.org/javadoc/r6/enterprise/org/osgi/service/event/EventConstants.html#SERVICE_PID&lt;/a&gt; says &quot;The type of the value for this event property is String or Collection of String&quot; so it looks like we need to review our code for that.&lt;/p&gt;</comment>
                            <comment id="15367505" author="bdelacretaz" created="Fri, 8 Jul 2016 10:28:10 +0000"  >&lt;p&gt;And reading even more (and the correct javadoc this time &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; it looks like already in OSGi R4 the SERVICE_PID value is defined to be &quot;a String, String[], or Collection of String&quot;. So we might have other places to fix in our code.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://osgi.org/javadoc/r4v43/core/org/osgi/framework/Constants.html#SERVICE_PID&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://osgi.org/javadoc/r4v43/core/org/osgi/framework/Constants.html#SERVICE_PID&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15367509" author="ivoleitao" created="Fri, 8 Jul 2016 10:36:43 +0000"  >&lt;p&gt;Darn &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I was not aware that this could have such implications. I use this to apply global configurations to multiple components. &lt;br/&gt;
I&apos;m going off now for an extended weekend now but as soon as I return I&apos;m going to try your fix and give you feedback. Thank your very much for the fast response.&lt;/p&gt;</comment>
                            <comment id="15367576" author="bdelacretaz" created="Fri, 8 Jul 2016 11:49:28 +0000"  >&lt;p&gt;You&apos;re welcome, see also &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5828&quot; title=&quot;Support multi-valued Constants.SERVICE_PID&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5828&quot;&gt;SLING-5828&lt;/a&gt; where we&apos;ll look for more general guidelines.&lt;/p&gt;</comment>
                            <comment id="15369691" author="ivoleitao" created="Sun, 10 Jul 2016 15:30:43 +0000"  >&lt;p&gt;Hi Bertrand,&lt;/p&gt;

&lt;p&gt;I confirm the fix. The error no longer appears in the logs.&lt;/p&gt;

&lt;p&gt;Thanks once again.&lt;/p&gt;</comment>
                            <comment id="15575172" author="kwin" created="Fri, 14 Oct 2016 12:18:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; Shouldn&apos;t this be rather fixed by relying on the SERVICE_ID instead (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5828?focusedCommentId=15367537&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15367537)?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/SLING-5828?focusedCommentId=15367537&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15367537)?&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15576600" author="henzlerg" created="Fri, 14 Oct 2016 21:47:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;&apos;s changes for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5839&quot; title=&quot;Implementation must not rely on SERVICE_PID&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5839&quot;&gt;&lt;del&gt;SLING-5839&lt;/del&gt;&lt;/a&gt; fixed it to use SERVICE_ID instead of SERVICE_PID (although the SERVICE_PID is still used to derive a more speaking HC name if available). Generally it&apos;s best to explicitly set the service property &quot;hc.name&quot; (the use of SERVICE_ID/SERVICE_PID in getHealthCheckTitle() is only a fallback mechanism)&lt;/p&gt;</comment>
                            <comment id="15577964" author="kwin" created="Sat, 15 Oct 2016 12:01:50 +0000"  >&lt;p&gt;Thanks, I linked the issue now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12987751">SLING-5828</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12988976">SLING-5839</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30of3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5823] Kryo instance should not be cached</title>
                <link>https://issues.apache.org/jira/browse/SLING-5823</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;KryoDistributionContentSerializer&lt;/tt&gt; should not cache the &lt;tt&gt;Kryo&lt;/tt&gt;&#160;instance as it seems it&apos;s not thread safe (fails serialization when used concurrently).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12986807">SLING-5823</key>
            <summary>Kryo instance should not be cached</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="teofili">Tommaso Teofili</assignee>
                                    <reporter username="teofili">Tommaso Teofili</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Jul 2016 13:04:03 +0000</created>
                <updated>Tue, 5 Jul 2016 13:05:00 +0000</updated>
                            <resolved>Tue, 5 Jul 2016 13:04:59 +0000</resolved>
                                                    <fixVersion>Content Distribution Extensions 0.1.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15362457" author="teofili" created="Tue, 5 Jul 2016 13:05:00 +0000"  >&lt;p&gt;fixed in r1751462.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30jbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5822] Kryo and Avro serializers should honour request.getFilters(path)</title>
                <link>https://issues.apache.org/jira/browse/SLING-5822</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently Avro and Kryo &lt;tt&gt;DistributionContentSerializer&lt;/tt&gt;&#160;implementations do not take into account information hold in &lt;tt&gt;DistributionRequest#getFilters(path)&lt;/tt&gt;, and therefore content aggregation may not be correct.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12986786">SLING-5822</key>
            <summary>Kryo and Avro serializers should honour request.getFilters(path)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="teofili">Tommaso Teofili</assignee>
                                    <reporter username="teofili">Tommaso Teofili</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Jul 2016 11:20:29 +0000</created>
                <updated>Tue, 5 Jul 2016 12:30:11 +0000</updated>
                            <resolved>Tue, 5 Jul 2016 12:30:10 +0000</resolved>
                                                    <fixVersion>Content Distribution Extensions 0.1.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15362421" author="teofili" created="Tue, 5 Jul 2016 12:30:11 +0000"  >&lt;p&gt;fixed in r1751459.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30j73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5821] Fix javadoc errors and warnings</title>
                <link>https://issues.apache.org/jira/browse/SLING-5821</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;mvn release:prepare -DdryRun=true&lt;/tt&gt; fails with javadoc errors and warnings:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[...]
[INFO] 51 errors
[INFO] 100 warnings
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] BUILD FAILURE
[INFO] [INFO] ------------------------------------------------------------------------
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>Java 1.8.0_74-b02</environment>
        <key id="12986749">SLING-5821</key>
            <summary>Fix javadoc errors and warnings</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="olli">Oliver Lietz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Jul 2016 08:46:00 +0000</created>
                <updated>Sat, 9 Jul 2016 16:51:24 +0000</updated>
                            <resolved>Tue, 5 Jul 2016 11:14:45 +0000</resolved>
                                    <version>API 2.11.0</version>
                                    <fixVersion>API 2.12.0</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15362369" author="cziegeler" created="Tue, 5 Jul 2016 11:14:45 +0000"  >&lt;p&gt;Fixed all errors and warnings&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30iyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5820] AvroContentSerializer&apos;s DataFileWriter should not be cached</title>
                <link>https://issues.apache.org/jira/browse/SLING-5820</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;tt&gt;AvroContentSerializer&lt;/tt&gt;&#160;is caching a &lt;tt&gt;DataFileWriter&lt;/tt&gt; as instance fields, this can lead to errors when exporting the stream as the writer may already be opened while serving concurrent exportStream requests.&lt;br/&gt;
Such objects should be created at runtime, closed and garbage collected.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12986645">SLING-5820</key>
            <summary>AvroContentSerializer&apos;s DataFileWriter should not be cached</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="teofili">Tommaso Teofili</assignee>
                                    <reporter username="teofili">Tommaso Teofili</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jul 2016 16:53:00 +0000</created>
                <updated>Mon, 4 Jul 2016 16:54:45 +0000</updated>
                            <resolved>Mon, 4 Jul 2016 16:54:45 +0000</resolved>
                                                    <fixVersion>Content Distribution Extensions 0.1.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15361594" author="teofili" created="Mon, 4 Jul 2016 16:54:45 +0000"  >&lt;p&gt;fixed in r1751343&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 17 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30ibz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5819] repoinit JCR module should not export visitor + initializer classes</title>
                <link>https://issues.apache.org/jira/browse/SLING-5819</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As noted during the failed repoinit.oak-jcr vote, this module (now renamed to jcr.repoinit) should not export the &lt;tt&gt;JcrRepoInitOpVisitor&lt;/tt&gt; and &lt;tt&gt;RepositoryInitializer&lt;/tt&gt; classes, as there&apos;s no good reason to use those outside of this bundle.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12986576">SLING-5819</key>
            <summary>repoinit JCR module should not export visitor + initializer classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jul 2016 11:37:40 +0000</created>
                <updated>Tue, 16 Aug 2016 11:55:10 +0000</updated>
                            <resolved>Mon, 4 Jul 2016 11:39:09 +0000</resolved>
                                                    <fixVersion>Repoinit JCR 1.0.0</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15361198" author="bdelacretaz" created="Mon, 4 Jul 2016 11:39:09 +0000"  >&lt;p&gt;Fixed in revision 1751251&lt;/p&gt;</comment>
                            <comment id="15361216" author="olli" created="Mon, 4 Jul 2016 11:57:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, module is now named &lt;tt&gt;org.apache.sling.jcr.repoinit&lt;/tt&gt; but package is &lt;tt&gt;org.apache.sling.repoinit.jcr&lt;/tt&gt;. Shouldn&apos;t they match if possible to not confuse users?&lt;/p&gt;</comment>
                            <comment id="15361234" author="bdelacretaz" created="Mon, 4 Jul 2016 12:21:36 +0000"  >&lt;p&gt;Good point - I have renamed that package in revision 1751260&lt;/p&gt;</comment>
                            <comment id="15367582" author="sseifert@pro-vision.de" created="Fri, 8 Jul 2016 12:06:26 +0000"  >&lt;p&gt;cosmetic: just wondering why the package name for the JCR part is &lt;tt&gt;org.apache.sling.jcr.repoinit&lt;/tt&gt; and not &lt;tt&gt;org.apache.sling.repoinit.jcr&lt;/tt&gt; - in this case i would search for it at &lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk/bundles/jcr&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk/bundles/jcr&lt;/a&gt;&lt;br/&gt;
and not at&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/repos/asf/sling/trunk/bundles/extensions/repoinit&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/sling/trunk/bundles/extensions/repoinit&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;but i&apos;m fine with it if you think it makes sense.&lt;/p&gt;</comment>
                            <comment id="15370886" author="bdelacretaz" created="Mon, 11 Jul 2016 14:35:45 +0000"  >&lt;p&gt;Good point, I have moved the jcr.repoinit module under bundle/jcr in &lt;a href=&quot;http://svn.apache.org/r1752162&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1752162&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30hwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5816] Support both lower and upper case language and country code</title>
                <link>https://issues.apache.org/jira/browse/SLING-5816</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As specified in &lt;a href=&quot;http://sling.apache.org/documentation/bundles/internationalization-support-i18n.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://sling.apache.org/documentation/bundles/internationalization-support-i18n.html&lt;/a&gt; both lower and uppercase language and country codes should be supported.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12984344">SLING-5816</key>
            <summary>Support both lower and upper case language and country code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jun 2016 12:00:46 +0000</created>
                <updated>Wed, 29 Mar 2017 13:36:34 +0000</updated>
                            <resolved>Wed, 29 Jun 2016 05:47:15 +0000</resolved>
                                    <version>i18n 2.4.6</version>
                                    <fixVersion>i18n 2.4.8</fixVersion>
                                    <component>i18n</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15354597" author="kwin" created="Wed, 29 Jun 2016 05:47:15 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1750599&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1750599&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3093r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5814] CVE 2015-7501 : Upgrade commons-collection jar version to 3.2.2</title>
                <link>https://issues.apache.org/jira/browse/SLING-5814</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There is a critical security issue filed against the commons-collection jar version 3.2.1, related to deserialization of untrusted data. Please refer to the below URL&apos;s&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://access.redhat.com/security/vulnerabilities/2059393&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://access.redhat.com/security/vulnerabilities/2059393&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://www.kb.cert.org/vuls/id/576313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.kb.cert.org/vuls/id/576313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The latest version of sling webapp, version 8, bundles the vulnerable version of commons-collection 3.2.1. &lt;br/&gt;
We should consider upgrading the version of the jar to 3.2.2&lt;/p&gt;</description>
                <environment></environment>
        <key id="12983764">SLING-5814</key>
            <summary>CVE 2015-7501 : Upgrade commons-collection jar version to 3.2.2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pguggila">Prakash Guggilam</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jun 2016 13:04:37 +0000</created>
                <updated>Mon, 27 Jun 2016 14:10:39 +0000</updated>
                            <resolved>Mon, 27 Jun 2016 14:10:38 +0000</resolved>
                                                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15351073" author="olli" created="Mon, 27 Jun 2016 14:10:39 +0000"  >&lt;p&gt;Launchpad 9-SNAPSHOT is using 3.2.2 already&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i306lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5810] [HApi] Add support for a collection of types</title>
                <link>https://issues.apache.org/jira/browse/SLING-5810</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;In order to have existing types and their parameters (url, fqdn, etc) discovered by the client, we need a support for a types collection that can also be rendered.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12982662">SLING-5810</key>
            <summary>[HApi] Add support for a collection of types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andrei.dulvac">Andrei Dulvac</assignee>
                                    <reporter username="andrei.dulvac">Andrei Dulvac</reporter>
                        <labels>
                            <label>hapi</label>
                    </labels>
                <created>Fri, 24 Jun 2016 12:07:39 +0000</created>
                <updated>Thu, 29 Jun 2017 12:57:00 +0000</updated>
                            <resolved>Fri, 24 Jun 2016 13:42:10 +0000</resolved>
                                    <version>HApi 1.0.0</version>
                                    <fixVersion>HApi 1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15348277" author="andrei.dulvac" created="Fri, 24 Jun 2016 13:42:10 +0000"  >&lt;p&gt;Fixed in rev 1750096&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30133:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5806] No service returned if several services for same type</title>
                <link>https://issues.apache.org/jira/browse/SLING-5806</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;If there is more than one plugin service (generator, transformer, serializer, processor) for the same type, and just one of them is unregistered, the factory cache will return null - although there are still other services for the same type.&lt;/p&gt;

&lt;p&gt;In addition, there is no rule on which service to pick if there are multiple for the same type&lt;/p&gt;</description>
                <environment></environment>
        <key id="12982234">SLING-5806</key>
            <summary>No service returned if several services for same type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Jun 2016 07:33:36 +0000</created>
                <updated>Sun, 26 Jun 2016 08:52:58 +0000</updated>
                            <resolved>Thu, 23 Jun 2016 07:35:03 +0000</resolved>
                                    <version>Rewriter 1.1.2</version>
                                    <fixVersion>Rewriter 1.1.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15345968" author="cziegeler" created="Thu, 23 Jun 2016 07:35:03 +0000"  >&lt;p&gt;The services of the same type are now ordered by service ranking (highest wins)&lt;br/&gt;
Refactored the code and moved the tracker customizers into separate classes for easier testing&lt;br/&gt;
I&apos;ve also added a test which shows that the old code was broken, and succeeds with the new code&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zyfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5805] Eventing: NPE in JobSchedulerImpl when shutting down instance</title>
                <link>https://issues.apache.org/jira/browse/SLING-5805</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;when shutting down a sling instance (part of a cluster) with ~30.000 scheduled jobs, i get thousands of error logs like this in the logs:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;22.06.2016 17:25:07.174 *ERROR* [sling-default-593-org.apache.sling.event.jobs.Job:03eb3d10-952e-4b1b-83c8-e7e092495c09-0] org.apache.sling.commons.scheduler.impl.QuartzScheduler Exception during job execution of org.apache.sling.event.impl.jobs.scheduling.JobSchedulerImpl@407bb6e7 : null
java.lang.NullPointerException: null
	at org.apache.sling.event.impl.jobs.JobManagerImpl.addJobInteral(JobManagerImpl.java:537)
	at org.apache.sling.event.impl.jobs.JobManagerImpl.addJob(JobManagerImpl.java:704)
	at org.apache.sling.event.impl.jobs.JobManagerImpl.addJob(JobManagerImpl.java:267)
	at org.apache.sling.event.impl.jobs.scheduling.JobSchedulerImpl.execute(JobSchedulerImpl.java:280)
	at org.apache.sling.commons.scheduler.impl.QuartzJobExecutor.execute(QuartzJobExecutor.java:116)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12981925">SLING-5805</key>
            <summary>Eventing: NPE in JobSchedulerImpl when shutting down instance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Jun 2016 15:38:34 +0000</created>
                <updated>Wed, 29 Jun 2016 05:21:29 +0000</updated>
                            <resolved>Wed, 29 Jun 2016 05:21:28 +0000</resolved>
                                    <version>Event 4.0.2</version>
                                    <fixVersion>Event 4.1.0</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15347093" author="sseifert@pro-vision.de" created="Thu, 23 Jun 2016 20:15:34 +0000"  >&lt;p&gt;it seems that &lt;tt&gt;this.configuration&lt;/tt&gt; (JobManagerConfiguration) in &lt;tt&gt;JobManagerImpl&lt;/tt&gt; is null - this leads to the NPE when shutting down the instance.&lt;/p&gt;</comment>
                            <comment id="15347696" author="cziegeler" created="Fri, 24 Jun 2016 04:50:32 +0000"  >&lt;p&gt;There is a problem with deactivate of the JobSchedulerImpl and stopScheduledJob. deactivate first sets the active flag to false and then calls stopScheduledJob which checks the active flag and therefore does not unschedule&lt;/p&gt;</comment>
                            <comment id="15347702" author="cziegeler" created="Fri, 24 Jun 2016 04:53:55 +0000"  >&lt;p&gt;I think the fix in rev 1750042 should solve the problem. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; Can you give this a try?&lt;/p&gt;</comment>
                            <comment id="15347929" author="sseifert@pro-vision.de" created="Fri, 24 Jun 2016 07:52:40 +0000"  >&lt;p&gt;thanks! we will test it.&lt;/p&gt;</comment>
                            <comment id="15348715" author="sseifert@pro-vision.de" created="Fri, 24 Jun 2016 21:41:05 +0000"  >&lt;p&gt;i did not see the problem again on the next test run.&lt;/p&gt;</comment>
                            <comment id="15349504" author="cziegeler" created="Sat, 25 Jun 2016 08:27:11 +0000"  >&lt;p&gt;Thanks, so let&apos;s resolve this&lt;/p&gt;</comment>
                            <comment id="15349580" author="sseifert@pro-vision.de" created="Sat, 25 Jun 2016 09:56:26 +0000"  >&lt;p&gt;oh, it&apos;s happened again.&lt;/p&gt;

&lt;p&gt;yesterday it did not happen with ~2.000 scheduled jobs on shutting down the cluster master.&lt;br/&gt;
today there were ~10.000 schedules jobs, and this error happened ~2.000 times on shutdown.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;25.06.2016 10:46:47.765 *ERROR* [sling-rrd-sling-scheduler-275-org.apache.sling.event.jobs.Job:c5335a20-2a70-46f4-81cb-d7700cd89b60-0] org.apache.sling.commons.scheduler.impl.QuartzScheduler Exception during job execution of org.apache.sling.event.impl.jobs.scheduling.JobSchedulerImpl@5aaa164c : null
java.lang.NullPointerException: null
	at org.apache.sling.event.impl.jobs.JobManagerImpl.addJobInteral(JobManagerImpl.java:537)
	at org.apache.sling.event.impl.jobs.JobManagerImpl.addJob(JobManagerImpl.java:704)
	at org.apache.sling.event.impl.jobs.JobManagerImpl.addJob(JobManagerImpl.java:267)
	at org.apache.sling.event.impl.jobs.scheduling.JobSchedulerImpl.execute(JobSchedulerImpl.java:289)
	at org.apache.sling.commons.scheduler.impl.QuartzJobExecutor.execute(QuartzJobExecutor.java:116)
	at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(yes, its not ideal to have 10.000 or 30.000 scheduled jobs, but this is another issue we are currently investigating)&lt;/p&gt;</comment>
                            <comment id="15349721" author="cziegeler" created="Sat, 25 Jun 2016 16:53:36 +0000"  >&lt;p&gt;Ok, I guess the easiest is to check the active flag in the execute method&lt;/p&gt;</comment>
                            <comment id="15350453" author="cziegeler" created="Mon, 27 Jun 2016 05:57:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt; I&apos;ve added a check for active in execute() (which I think is a good thing to do anyways). Could you please give this version another run?&lt;/p&gt;</comment>
                            <comment id="15353768" author="sseifert@pro-vision.de" created="Tue, 28 Jun 2016 21:53:17 +0000"  >&lt;p&gt;tested this again on a cluster with &amp;gt;50.000 scheduled jobs - did not see this error again on shutdown. so i assume it is fixed.&lt;/p&gt;

&lt;p&gt;p.s. - i&apos;ve just spotted a type in the internal method name &quot;JobManagerImpl.addJobInteral&quot; (missing &quot;n&quot;)&lt;/p&gt;</comment>
                            <comment id="15354564" author="cziegeler" created="Wed, 29 Jun 2016 05:21:29 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert%40pro-vision.de&quot; class=&quot;user-hover&quot; rel=&quot;sseifert@pro-vision.de&quot;&gt;sseifert@pro-vision.de&lt;/a&gt;&lt;br/&gt;
(I&apos;ve also fixed the typo in the method name)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zws7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5803] FilterRuleExcludeCategoryIgnoreIfTest fails on Jenkins</title>
                <link>https://issues.apache.org/jira/browse/SLING-5803</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;These tests are consistently failing on Jenkins as in &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; for example:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;FilterRuleExcludeCategoryIgnoreIfTest.testExcludedCategoryExists&lt;/li&gt;
	&lt;li&gt;FilterRuleExcludeCategoryTest.testExcludedCategoryExists&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;both with &quot;java.lang.AssertionError: Test should be Ignored&quot;&lt;/p&gt;

&lt;p&gt;Andrei, as you wrote those tests, could you have a look?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/4145/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-trunk-1.7/4145/&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12981836">SLING-5803</key>
            <summary>FilterRuleExcludeCategoryIgnoreIfTest fails on Jenkins</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="andrei.dulvac">Andrei Dulvac</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Wed, 22 Jun 2016 09:59:07 +0000</created>
                <updated>Wed, 23 Aug 2017 20:47:42 +0000</updated>
                                                                            <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15345985" author="andrei.dulvac" created="Thu, 23 Jun 2016 07:43:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, sorry for that. Thing is they pass locally just fine and the jenkins logs don&apos;t tell me enough about what&apos;s going on. I&apos;ll try and run with the same openjdk version on the slaves. Could I possibly have access to inspect/configure the jenkins job? &lt;/p&gt;</comment>
                            <comment id="15346202" author="bdelacretaz" created="Thu, 23 Jun 2016 10:02:41 +0000"  >&lt;p&gt;As per &lt;a href=&quot;http://wiki.apache.org/general/Jenkins&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.apache.org/general/Jenkins&lt;/a&gt; you need to ask the Sling PMC chair (that&apos;s Carsten) to request access, just ask on our dev list.&lt;/p&gt;</comment>
                            <comment id="15374720" author="bdelacretaz" created="Wed, 13 Jul 2016 09:40:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrei.dulvac&quot; class=&quot;user-hover&quot; rel=&quot;andrei.dulvac&quot;&gt;andrei.dulvac&lt;/a&gt;, I see that you marked this resolved, can you briefly explain what was wrong? That might help for other similar cases.&lt;/p&gt;</comment>
                            <comment id="15374946" author="andrei.dulvac" created="Wed, 13 Jul 2016 12:59:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt;, sorry. I actually deleted the test. It passes locally on all versions of Java I could find. And the way that unit test was asserting that a method shouldn&apos;t run was probably the issue. I will re-enable it once we replace those unit tests with a Junit Computer or something of the sorts. Is that ok?&lt;/p&gt;</comment>
                            <comment id="15376468" author="bdelacretaz" created="Thu, 14 Jul 2016 07:18:02 +0000"  >&lt;p&gt;I first thought &lt;em&gt;JUnit Computer&lt;/em&gt; was a typo but there is actually such a thing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://junit.org/junit4/javadoc/4.12/org/junit/runner/Computer.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://junit.org/junit4/javadoc/4.12/org/junit/runner/Computer.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m fine with re-adding those tests but shouldn&apos;t this ticket stay open then, so that we don&apos;t forget? Or maybe create a different ticket. Thanks for explaining what you did.&lt;/p&gt;</comment>
                            <comment id="15376529" author="andrei.dulvac" created="Thu, 14 Jul 2016 08:01:50 +0000"  >&lt;p&gt;Ok, makes sense, I&apos;ve reopened the issue. &lt;/p&gt;</comment>
                            <comment id="15384037" author="rombert" created="Tue, 19 Jul 2016 12:14:30 +0000"  >&lt;p&gt;I&apos;ve excluded FilterRuleExcludeCategoryIgnoreIfTest.testExcludedCategoryExists as it consistently fails on Jenkins - &lt;a href=&quot;https://svn.apache.org/r1753373&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/r1753373&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16138967" author="rombert" created="Wed, 23 Aug 2017 19:51:24 +0000"  >&lt;p&gt;Re-enabled the test in &lt;a href=&quot;https://svn.apache.org/r1805950&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1805950&lt;/a&gt;, hoping that switching to per-module build job fixes the problem.&lt;/p&gt;</comment>
                            <comment id="16139056" author="rombert" created="Wed, 23 Aug 2017 20:46:41 +0000"  >&lt;p&gt;Nope, still fails on Jenkins - &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-testing-junit-rules-1.8/13/org.apache.sling$org.apache.sling.testing.rules/testReport/org.apache.sling.testing.junit.rules.util.filterrule/FilterRuleExcludeCategoryIgnoreIfTest/testExcludedCategoryExists/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/S-Z/view/Sling/job/sling-testing-junit-rules-1.8/13/org.apache.sling$org.apache.sling.testing.rules/testReport/org.apache.sling.testing.junit.rules.util.filterrule/FilterRuleExcludeCategoryIgnoreIfTest/testExcludedCategoryExists/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And still passes locally, no idea what is going on.&lt;/p&gt;</comment>
                            <comment id="16139063" author="rombert" created="Wed, 23 Aug 2017 20:47:42 +0000"  >&lt;p&gt;Test is ignored again in &lt;a href=&quot;https://svn.apache.org/r1805958&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1805958&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zw8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5802] TeleporterHttpClientTest should use random ports</title>
                <link>https://issues.apache.org/jira/browse/SLING-5802</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;That test sometimes fails on our Jenkins setup with &quot;java.net.BindException: Address already in use&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12981834">SLING-5802</key>
            <summary>TeleporterHttpClientTest should use random ports</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bdelacretaz">Bertrand Delacretaz</assignee>
                                    <reporter username="bdelacretaz">Bertrand Delacretaz</reporter>
                        <labels>
                            <label>sling-IT</label>
                    </labels>
                <created>Wed, 22 Jun 2016 09:56:02 +0000</created>
                <updated>Wed, 14 Sep 2016 21:14:39 +0000</updated>
                            <resolved>Wed, 22 Jun 2016 10:23:42 +0000</resolved>
                                                    <fixVersion>JUnit Tests Teleporter 1.0.8</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15344085" author="bdelacretaz" created="Wed, 22 Jun 2016 10:23:42 +0000"  >&lt;p&gt;Implemented in revision 1749646&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zw7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5794] NPE in BundleTestProvider#getTestClasses()</title>
                <link>https://issues.apache.org/jira/browse/SLING-5794</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;An NPE is thrown in BundleTestProvider#getTestClasses(), see attached screenshot&lt;/p&gt;</description>
                <environment></environment>
        <key id="12979816">SLING-5794</key>
            <summary>NPE in BundleTestProvider#getTestClasses()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andrei.dulvac">Andrei Dulvac</assignee>
                                    <reporter username="ahanikel">Axel Hanikel</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jun 2016 13:09:49 +0000</created>
                <updated>Wed, 14 Sep 2016 21:13:48 +0000</updated>
                            <resolved>Fri, 17 Jun 2016 13:51:21 +0000</resolved>
                                                    <fixVersion>JUnit Core 1.0.18</fixVersion>
                                    <component>Testing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15333751" author="ahanikel" created="Thu, 16 Jun 2016 13:22:41 +0000"  >&lt;p&gt;It looks like this code hasn&apos;t changed in a long time so I&apos;m not sure why this happens right now and hasn&apos;t appeared earlier already. The bundle that&apos;s currently being processed does not contain a &lt;tt&gt;Sling-Test-Regexp&lt;/tt&gt; header. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bdelacretaz&quot; class=&quot;user-hover&quot; rel=&quot;bdelacretaz&quot;&gt;bdelacretaz&lt;/a&gt; WDYT?&lt;/p&gt;</comment>
                            <comment id="15335883" author="ahanikel" created="Fri, 17 Jun 2016 11:19:01 +0000"  >&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12811347/12811347_0001-SLING-5794-Check-for-null-when-getting-Sling-Test-Re.patch&quot; title=&quot;0001-SLING-5794-Check-for-null-when-getting-Sling-Test-Re.patch attached to SLING-5794&quot;&gt;0001-SLING-5794-Check-for-null-when-getting-Sling-Test-Re.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; seems to fix the issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andrei.dulvac&quot; class=&quot;user-hover&quot; rel=&quot;andrei.dulvac&quot;&gt;andrei.dulvac&lt;/a&gt; Could you have a look? Thanks!&lt;/p&gt;</comment>
                            <comment id="15335987" author="andrei.dulvac" created="Fri, 17 Jun 2016 13:00:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ahanikel&quot; class=&quot;user-hover&quot; rel=&quot;ahanikel&quot;&gt;ahanikel&lt;/a&gt;, Your patch looks absolutely correct. Applied it in rev 1748852.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12811347" name="0001-SLING-5794-Check-for-null-when-getting-Sling-Test-Re.patch" size="2106" author="ahanikel" created="Fri, 17 Jun 2016 11:19:01 +0000"/>
                            <attachment id="12811100" name="Screen Shot 2016-06-16 at 14.56.13 .png" size="488382" author="ahanikel" created="Thu, 16 Jun 2016 13:11:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zkbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5781] [i18n] generating locale from a string is incorrect</title>
                <link>https://issues.apache.org/jira/browse/SLING-5781</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;As per sling document here &lt;br/&gt;
&lt;a href=&quot;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/internationalization-support-i18n.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;parts of locale string are separated by hyphen (&quot;-&quot;) like de-DE-MAC but in JCRResourceBundleProvider while extracting locale from a String we are separating parts with underscore (&quot;_&quot;) as done here &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java#L586&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/i18n/src/main/java/org/apache/sling/i18n/impl/JcrResourceBundleProvider.java#L586&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Should this be change to separate string on &quot;-&quot; basis ?&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12978124">SLING-5781</key>
            <summary>[i18n] generating locale from a string is incorrect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="anagarwa">Ankit Agarwal</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Jun 2016 11:24:31 +0000</created>
                <updated>Fri, 5 Aug 2016 08:37:46 +0000</updated>
                            <resolved>Tue, 28 Jun 2016 11:52:40 +0000</resolved>
                                    <version>i18n 2.4.6</version>
                                    <fixVersion>i18n 2.4.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15327191" author="githubbot" created="Mon, 13 Jun 2016 11:35:19 +0000"  >&lt;p&gt;GitHub user anagarwa opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/146&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/146&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5781&quot; title=&quot;[i18n] generating locale from a string is incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5781&quot;&gt;&lt;del&gt;SLING-5781&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;i18n&amp;#93;&lt;/span&gt; generating locale from a string is incorrect&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/anagarwa/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/anagarwa/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5781&quot; title=&quot;[i18n] generating locale from a string is incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5781&quot;&gt;&lt;del&gt;SLING-5781&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/146.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/146.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #146&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 28a74f458219e5c5f1db0714969925ccbe8fc6a8&lt;br/&gt;
Author: Ankit Agarwal &amp;lt;anagarwa@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-06-13T11:34:13Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5781&quot; title=&quot;[i18n] generating locale from a string is incorrect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5781&quot;&gt;&lt;del&gt;SLING-5781&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;i18n&amp;#93;&lt;/span&gt; generating locale from a string is incorrect&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15327192" author="anagarwa" created="Mon, 13 Jun 2016 11:36:37 +0000"  >&lt;p&gt;pull request &lt;a href=&quot;https://github.com/apache/sling/pull/146&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/146&lt;/a&gt; created for this bug.&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitgupt&quot; class=&quot;user-hover&quot; rel=&quot;amitgupt&quot;&gt;amitgupt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15352385" author="kwin" created="Tue, 28 Jun 2016 05:32:29 +0000"  >&lt;p&gt;Actually in the documentation it states the following:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;These language nodes have a jcr:language property naming the language of the resources. In the context of the JCR based ResourceBundleProvider this is of course expected to be the string value of respective Locale. The format may either be the format as described in Locale.toString or as described in RFC4646 (both formats are also accepted in lower-case).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So actually both separators should be supported IMHO.&lt;/p&gt;</comment>
                            <comment id="15352447" author="kwin" created="Tue, 28 Jun 2016 06:26:55 +0000"  >&lt;p&gt;So basically in the past &lt;tt&gt;jcr:language&lt;/tt&gt; only supported &lt;tt&gt;Locale.toString()&lt;/tt&gt; compliant strings (while it should have supported BCP 47 compliant strings as well).&lt;/p&gt;

&lt;p&gt;To support BCP 47 as well all &apos;-&apos; characters should be replaced by &apos;_&apos; first.&lt;/p&gt;</comment>
                            <comment id="15352853" author="kwin" created="Tue, 28 Jun 2016 11:52:40 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://svn.apache.org/r1750489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1750489&lt;/a&gt;.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anagarwa&quot; class=&quot;user-hover&quot; rel=&quot;anagarwa&quot;&gt;anagarwa&lt;/a&gt; Thanks for reporting.&lt;/p&gt;</comment>
                            <comment id="15352862" author="anagarwa" created="Tue, 28 Jun 2016 12:00:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; as per your earlier comment both format are accepted in lower-case . But as per this change Country Code will be accepted only in upper case. Can country code be accepted in lower case ?  &lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;</comment>
                            <comment id="15352869" author="kwin" created="Tue, 28 Jun 2016 12:03:15 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5816&quot; title=&quot;Support both lower and upper case language and country code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5816&quot;&gt;&lt;del&gt;SLING-5816&lt;/del&gt;&lt;/a&gt; to track that bug.&lt;/p&gt;</comment>
                            <comment id="15354680" author="githubbot" created="Wed, 29 Jun 2016 06:49:53 +0000"  >&lt;p&gt;Github user anagarwa closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/146&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/146&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zdk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5779] Packaged OSGi config intermittently do not get installed before bundle start</title>
                <link>https://issues.apache.org/jira/browse/SLING-5779</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;(Setting version to Launchpad for now until we find out the root cause).&lt;/p&gt;

&lt;p&gt;From time to time I see the launchpad failing to start properly. The first error that is visible is &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;10.06.2016 18:18:48.826 *ERROR* [OsgiInstallerImpl] org.apache.jackrabbit.oak-lucene [org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexProviderService(31)] The activate method has thrown an exception (java.lang.NullPointerException: Index directory cannot be determined as neither index directory path [localIndexDir] nor repository home [repository.home] defined)
java.lang.NullPointerException: Index directory cannot be determined as neither index directory path [localIndexDir] nor repository home [repository.home] defined
        at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:236)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That&apos;s weird since the provisioning model holds all the configurations and the relevant bundles are present in the &lt;tt&gt;:boot&lt;/tt&gt; feature &#8594; Start Level 1.&lt;/p&gt;

&lt;p&gt;My launchpad jar was built from r1747733 ( but of course SNAPSHOT dependencies mean that someone else building the launchpad will not get the same exact output ).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12977642">SLING-5779</key>
            <summary>Packaged OSGi config intermittently do not get installed before bundle start</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jun 2016 15:25:31 +0000</created>
                <updated>Tue, 19 Feb 2019 12:24:42 +0000</updated>
                            <resolved>Mon, 31 Oct 2016 10:05:50 +0000</resolved>
                                                    <fixVersion>Installer Core 3.8.0</fixVersion>
                    <fixVersion>Installer Configuration Factory 1.2.0</fixVersion>
                                    <component>Installer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15327630" author="chetanm" created="Mon, 13 Jun 2016 15:41:05 +0000"  >&lt;p&gt;Looking at logs it appears following sequence is happening&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;System starts and launchpad installer registers the config collected from launchpad jar
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;10.06.2016 18:18:46.919 *INFO* [OsgiInstallerImpl] org.apache.sling.installer.core.impl.OsgiInstallerImpl Apache Sling OSGi Installer Service started.
10.06.2016 18:18:46.919 *INFO* [FelixStartLevel] org.apache.sling.launchpad.installer Service [Apache Sling Launchpad Startup Listener,36, [org.apache.sling.installer.api.event.InstallationListener]] ServiceEvent REGISTERED
10.06.2016 18:18:46.920 *INFO* [FelixStartLevel] org.apache.sling.launchpad.installer.impl.LaunchpadConfigInstaller Activating launchpad config installer, configuration path=resources/config, install path=resources/install
10.06.2016 18:18:47.003 *INFO* [FelixStartLevel] org.apache.sling.launchpad.installer.impl.LaunchpadConfigInstaller 138 resources registered with OsgiInstaller
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;ConfigTaskCreator gets registered
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;10.06.2016 18:18:47.018 *INFO* [FelixStartLevel] org.apache.sling.installer.factory.configuration Service [Apache Sling Configuration Install Task Factory,37, [org.apache.sling.installer.api.tasks.InstallTaskFactory, org.osgi.service.cm.ConfigurationListener, org.apache.sling.installer.api.tasks.ResourceTransformer]] ServiceEvent REGISTERED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;oak-lucene starts
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;10.06.2016 18:18:48.784 *INFO* [OsgiInstallerImpl] org.apache.jackrabbit.oak-lucene BundleEvent RESOLVED
10.06.2016 18:18:48.784 *INFO* [OsgiInstallerImpl] org.apache.jackrabbit.oak-lucene BundleEvent STARTING
10.06.2016 18:18:48.792 *INFO* [OsgiInstallerImpl] org.apache.jackrabbit.oak-lucene Service [org.apache.jackrabbit.oak.plugins.index.lucene.IndexAugmentorFactory,150, [org.apache.jackrabbit.oak.plugins.index.lucene.IndexAugmentorFactory]] ServiceEvent REGISTERED
10.06.2016 18:18:48.824 *INFO* [OsgiInstallerImpl] org.apache.jackrabbit.oak-lucene Service [152, [org.apache.jackrabbit.oak.api.jmx.CacheStatsMBean]] ServiceEvent REGISTERED
10.06.2016 18:18:48.824 *INFO* [OsgiInstallerImpl] org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexProviderService Extracted text caching enabled with maxSize 20 MB, expiry time 300 secs
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;li&gt;Sometime later the config gets delivered
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;10.06.2016 18:18:49.836 *INFO* [OsgiInstallerImpl] org.apache.sling.audit.osgi.installer Installed configuration org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexProviderService from resource TaskResource(url=launchpad:resources/config/org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexProviderService.config, entity=config:org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexProviderService, state=INSTALL, attributes=[org.apache.sling.installer.api.tasks.ResourceTransformer=:24:34:37:, service.pid=org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexProviderService], digest=d241243dc9632e2cef550e2cea5b860c)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Comparing it with other setups I think difference here is that &lt;tt&gt;ConfigTaskCreator&lt;/tt&gt; gets registered &lt;b&gt;after&lt;/b&gt; configs were registered. In normal startups configs gets registered after &lt;tt&gt;ConfigTaskCreator&lt;/tt&gt; gets activated hence they get registered with ConfigAdmin immediately. While in current case configs get registered after all the bundles get installed.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Probably OSGiInstaller should handle this case better where ConfigInstaller gets activated later. It should probably check for existing registered config and install them &lt;/p&gt;</comment>
                            <comment id="15328940" author="cziegeler" created="Tue, 14 Jun 2016 05:01:41 +0000"  >&lt;p&gt;OSGi is dynamic and therefore the order must not matter. If the configuration is set later, the system should still work as expected.&lt;br/&gt;
The OSGi Installer has no knowledge of the artifacts it&apos;s handling (if we neglect the fact that it knows about the built-in bundle support), so this is delegated to plugins - whenever those plugins are available.&lt;br/&gt;
If your app really needs ordering, make sure that config admin and the configuration support is started before the bundles which require them. &lt;/p&gt;</comment>
                            <comment id="15328947" author="chetanm" created="Tue, 14 Jun 2016 05:06:50 +0000"  >&lt;blockquote&gt;&lt;p&gt;If your app really needs ordering, make sure that config admin and the configuration support is started before the bundles which require them. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Problem here is not of ordering but of ensuring that component must start be any provided configuration if possible without a restart. Felix ConfigAdmin bundle gets started at level #1 while Oak bundles start at #15. Its just that the provided config is not picked up by ConfigAdmin before Oak related components get activated which causes the components to get activated twice, once with default config and second with updated config. &lt;/p&gt;

&lt;p&gt;The default config is not suitable for current setup hence its required if and when the component gets activated it gets activated with provided OSGi config&lt;/p&gt;</comment>
                            <comment id="15329038" author="rombert" created="Tue, 14 Jun 2016 07:47:54 +0000"  >&lt;p&gt;I think there&apos;s also an argument to be made about reducing the number of needless component reconfigurations. While there should be no harm in deactivating/activating a component during startup, it does tend to:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;slow down startup, due to components being reconfigured and possibly triggering a chain of other components being reconfigured&lt;/li&gt;
	&lt;li&gt;make debugging harder, due to more events being triggered and TBH is was counter-intuitive to me that the component was reconfigured this early in the process&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15329186" author="cziegeler" created="Tue, 14 Jun 2016 09:37:04 +0000"  >&lt;p&gt;If the component is not usable with the default configuration, then it should require one and not run with a suitable configuration.&lt;br/&gt;
And keep in mind that a configuration can be  changed at run time, so you need to handle this case anyway.&lt;/p&gt;</comment>
                            <comment id="15329189" author="cziegeler" created="Tue, 14 Jun 2016 09:38:16 +0000"  >&lt;p&gt;Agree, I think we should really strieve for a system which runs without any additional configuration simply providing sensible default setups&lt;/p&gt;</comment>
                            <comment id="15329198" author="chetanm" created="Tue, 14 Jun 2016 09:46:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;If the component is not usable with the default configuration, then it should require one and not run with a suitable configuration.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not sure. The component is designed to work with sensible default say connect to Mongo with default uri &lt;a href=&quot;http://localhost&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost&lt;/a&gt; and use db as &apos;oak&apos;. This works fine for dev setup. However for production we would like to configure it to use a different db. In current case this result in an exception first and later once new config is detected it connects to correct db. Note this is just an example (probably bad one as DocumentNodeStore is having config required). The idea to convey is that some aspects may be enabled depending on setup&lt;/p&gt;

&lt;p&gt;So in the end it would work fine but it leads to some exception in log and hence cause some instability if the component is a core part of system where it getting restarted leads to lot of churn. So it would be desirable to make use of any provided config since starting itself!&lt;/p&gt;</comment>
                            <comment id="15329202" author="olli" created="Tue, 14 Jun 2016 09:48:17 +0000"  >&lt;p&gt;Why is &lt;tt&gt;org.apache.jackrabbit.oak-lucene&lt;/tt&gt; starting a component without configuration at all? A configuration is required by &lt;tt&gt;DocumentNodeStoreService&lt;/tt&gt; and &lt;tt&gt;SegmentNodeStoreService&lt;/tt&gt; and &lt;tt&gt;LuceneIndexProviderService&lt;/tt&gt; should do also. Oak should not start &lt;b&gt;any&lt;/b&gt; component without configuration (would allow use of Oak bundles as libraries in OSGi with DS).&lt;/p&gt;</comment>
                            <comment id="15329210" author="chetanm" created="Tue, 14 Jun 2016 09:55:16 +0000"  >&lt;p&gt;Depends on usecase. We have certain features which we do not enable by default in Oak. However for certain apps which we run on Oak we need to enable those features. So I do not see a requirement to make config as required.&lt;/p&gt;
</comment>
                            <comment id="15329217" author="olli" created="Tue, 14 Jun 2016 10:04:51 +0000"  >&lt;p&gt;IMHO the applications &quot;running on&quot; (using) Oak should be in charge for configuring Oak.&lt;/p&gt;</comment>
                            <comment id="15329223" author="chetanm" created="Tue, 14 Jun 2016 10:09:59 +0000"  >&lt;p&gt;Oak has upwards of 20 component exposing OSGi configuration. I do not think it would be good to make all such components have configuration policy of required. We ship with some sensible defaults for most cases and expect the application to tweak as per there needs&lt;/p&gt;</comment>
                            <comment id="15329251" author="olli" created="Tue, 14 Jun 2016 10:21:40 +0000"  >&lt;p&gt;I&apos;m counting 14 in AEM 6.1 and Sling provides configuration for 10.&lt;/p&gt;</comment>
                            <comment id="15329271" author="chetanm" created="Tue, 14 Jun 2016 10:30:49 +0000"  >&lt;p&gt;Oops looks like then I miscalculated it! However point I want to convey is its better to ship component which can work with sensible defaults but then allow application to change them as per need and have that change applied/made avialable in stable way&lt;/p&gt;</comment>
                            <comment id="15329297" author="cziegeler" created="Tue, 14 Jun 2016 10:52:07 +0000"  >&lt;p&gt;I&apos;ve discussed this with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; offline a little bit. Now, the issue here is that the support for configurations is available after the OSGi installer already started its work. The installer is happily installing bundles and only once that is done completely it picks up the configuration support which was registered while it was installing the bundles. This then results in unnecessary restarts of components. I see this point, we can optimize here:&lt;/p&gt;

&lt;p&gt;We could add a (framework) configuration to the OSGi installer which lists required plugins - similar to what we do with the resource resolver factory and the jcr provider. So the OSGi installer can be configured to wait for the configuration support and only start actions once everything is in place. I think this makes sense as it avoid churn in the system.&lt;/p&gt;

&lt;p&gt;However, the general statement applies that components should be prepared for configurations arriving &quot;later&quot; or being changed at runtime. There are various mechanisms to deal with these situations (require policy, implementing modified etc.)&lt;/p&gt;</comment>
                            <comment id="15621532" author="cziegeler" created="Mon, 31 Oct 2016 07:47:52 +0000"  >&lt;p&gt;Added support for a NAME property on transformers and factories in rev 1767223&lt;br/&gt;
added the name property to configuration support in 1767224&lt;/p&gt;</comment>
                            <comment id="15621779" author="cziegeler" created="Mon, 31 Oct 2016 10:05:51 +0000"  >&lt;p&gt;The installer now checks for a framework property &quot;sling.installer.requiredservices&quot;&lt;br/&gt;
The value is a comma separated list&lt;br/&gt;
If a value starts with &quot;resourcetransformer:&quot; the installer waits for such a resource transformer, if the value starts with &quot;installtaskfactory:&quot; it waits for the corresponding install task factory. The postfix after this key is used as a name which is then searched in the service registration properties.&lt;/p&gt;

&lt;p&gt;The configuration support sets the name to &quot;org.osgi.service.cm&quot;&lt;/p&gt;

&lt;p&gt;The IT tests check this property&lt;/p&gt;</comment>
                            <comment id="16771871" author="kwin" created="Tue, 19 Feb 2019 12:24:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Could you document this property in &lt;a href=&quot;https://sling.apache.org/documentation/bundles/osgi-installer.html?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/osgi-installer.html?&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12809468" name="error.log.gz" size="84202" author="rombert" created="Fri, 10 Jun 2016 15:26:09 +0000"/>
                            <attachment id="12809469" name="stdout.log.gz" size="1960" author="rombert" created="Fri, 10 Jun 2016 15:26:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zal3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5778] o.a.s.repoinit.oak-jcr does not start due to missing org.apache.sling.provisioning.model package</title>
                <link>https://issues.apache.org/jira/browse/SLING-5778</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;10.06.2016 17:59:25.220 *INFO* [OsgiInstallerImpl] org.apache.sling.installer.core.impl.tasks.BundleStartTask Could not start bundle org.apache.sling.repoinit.oak-jcr [129]. Reason: {}. Will retry.
org.osgi.framework.BundleException: Unable to resolve org.apache.sling.repoinit.oak-jcr [129](R 129.0): missing requirement [org.apache.sling.repoinit.oak-jcr [129](R 129.0)] osgi.wiring.package; (&amp;amp;(osgi.wiring.package=org.apache.sling.provisioning.model)(version&amp;gt;=1.5.0)(!(version&amp;gt;=2.0.0))) Unresolved requirements: [[org.apache.sling.repoinit.oak-jcr [129](R 129.0)] osgi.wiring.package; (&amp;amp;(osgi.wiring.package=org.apache.sling.provisioning.model)(version&amp;gt;=1.5.0)(!(version&amp;gt;=2.0.0)))]
        at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:4111)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:2117)
        at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998)
        at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:984)
        at org.apache.sling.installer.core.impl.tasks.BundleStartTask.execute(BundleStartTask.java:93)
        at org.apache.sling.installer.core.impl.OsgiInstallerImpl.doExecuteTasks(OsgiInstallerImpl.java:847)
        at org.apache.sling.installer.core.impl.OsgiInstallerImpl.executeTasks(OsgiInstallerImpl.java:689)
        at org.apache.sling.installer.core.impl.OsgiInstallerImpl.run(OsgiInstallerImpl.java:265)
        at java.lang.Thread.run(Thread.java:745)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12977639">SLING-5778</key>
            <summary>o.a.s.repoinit.oak-jcr does not start due to missing org.apache.sling.provisioning.model package</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jun 2016 15:11:44 +0000</created>
                <updated>Mon, 26 Aug 2024 08:39:38 +0000</updated>
                            <resolved>Fri, 10 Jun 2016 15:17:40 +0000</resolved>
                                                    <fixVersion>Launchpad Builder 9</fixVersion>
                                    <component>Repoinit</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15324613" author="rombert" created="Fri, 10 Jun 2016 15:17:40 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1747733&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1747733&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zakf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5777] Stop embedding oak-jcr in the o.a.s.jcr.oak.server bundle</title>
                <link>https://issues.apache.org/jira/browse/SLING-5777</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;We should no longer embed the oak-jcr bundle, as it makes upgrading new Oak version harder, since we need to update both the oak-server bundle and the launchpad.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12977587">SLING-5777</key>
            <summary>Stop embedding oak-jcr in the o.a.s.jcr.oak.server bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rombert">Robert Munteanu</assignee>
                                    <reporter username="rombert">Robert Munteanu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jun 2016 12:14:51 +0000</created>
                <updated>Wed, 17 Aug 2016 19:30:14 +0000</updated>
                            <resolved>Fri, 10 Jun 2016 13:56:46 +0000</resolved>
                                                    <fixVersion>JCR Oak Server 1.1.0</fixVersion>
                                    <component>Oak</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15324491" author="rombert" created="Fri, 10 Jun 2016 13:56:46 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://svn.apache.org/r1747710&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1747710&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=olli&quot; class=&quot;user-hover&quot; rel=&quot;olli&quot;&gt;olli&lt;/a&gt; - I updated the Karaf feature as well, but some tests failed for me ( not sure when they started failing )&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  SlingLaunchpadOakTarIT.testAnonymousHasReadAccess &#187; ClassNotFound de.flapdoodl...
  SlingLaunchpadOakTarIT.testAnonymousLoginA &#187; ClassNotFound de.flapdoodle.embed...
  SlingLaunchpadOakTarIT.testAnonymousLoginB &#187; ClassNotFound de.flapdoodle.embed...
  SlingLaunchpadOakTarIT.testCreateRetrieveNode &#187; ClassNotFound de.flapdoodle.em...
  SlingLaunchpadOakTarIT.testCreateRetrieveSlingFolder &#187; ClassNotFound de.flapdo...
  SlingLaunchpadOakTarIT.testExplicitAdminLogin &#187; ClassNotFound de.flapdoodle.em...
  SlingLaunchpadOakTarIT.testLoginAdministrative &#187; ClassNotFound de.flapdoodle.e...
  SlingLaunchpadOakTarIT.testMultiValueInputStream &#187; ClassNotFound de.flapdoodle...
  SlingLaunchpadOakTarIT.testNodetypeObservation &#187; ClassNotFound de.flapdoodle.e...
  SlingLaunchpadOakTarIT.testRepositoryPresent &#187; ClassNotFound de.flapdoodle.emb...
  SlingLaunchpadOakTarIT.testSingleValueInputStream &#187; ClassNotFound de.flapdoodl...
  SlingLaunchpadOakTarIT.testSlingRepository &#187; ClassNotFound de.flapdoodle.embed...
  SlingLaunchpadOakTarIT.testSqlQuery &#187; ClassNotFound de.flapdoodle.embed.mongo....
  SlingLaunchpadOakTarIT.testVarSlingExists &#187; ClassNotFound de.flapdoodle.embed....
  SlingLaunchpadOakTarIT.testWrongLogin &#187; ClassNotFound de.flapdoodle.embed.mong...
  SlingLaunchpadOakTarIT.testXpathQueryWithMixin &#187; ClassNotFound de.flapdoodle.e...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;They don&apos;t seem related to my changes though but feel free to reopen and point out what I missed.&lt;/p&gt;</comment>
                            <comment id="15325198" author="olli" created="Fri, 10 Jun 2016 20:07:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rombert&quot; class=&quot;user-hover&quot; rel=&quot;rombert&quot;&gt;rombert&lt;/a&gt;, Bootstrap ITs are successful here: &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] Apache Sling Launchpad Karaf - Integration Tests ... SUCCESS [11:05 min]
[INFO] Apache Sling Launchpad Karaf - Launchpad Oak Tar Integration Tests FAILURE [02:20 min]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Let&apos;s see if build &lt;a href=&quot;https://builds.apache.org/view/S-Z/view/Sling/job/sling-contrib-1.7/947/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;947&lt;/a&gt; will succeed (&lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5780&quot; title=&quot;Remove org.apache.sling.auth.openid from build&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5780&quot;&gt;&lt;del&gt;SLING-5780&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Will investigate what&apos;s going wrong with Launchpad ITs (again) in &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3821&quot; title=&quot;Run launchpad integration tests against Sling on Karaf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3821&quot;&gt;&lt;del&gt;SLING-3821&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Tests run: 511, Failures: 490, Errors: 18, Skipped: 2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15325293" author="olli" created="Fri, 10 Jun 2016 21:13:07 +0000"  >&lt;p&gt;Bootstrap ITs are successful on Jenkins also.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2za93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5773] NonExistingResource.getParent() must consider the resource resolver mapping</title>
                <link>https://issues.apache.org/jira/browse/SLING-5773</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Consider the case you have a resource resolver mapping from &quot;/content/&quot; to &quot;/&quot;. In the underlying repository you have a resource in &quot;/content/existingParent&quot;.&lt;/p&gt;

&lt;p&gt;Now it might happen that a NonExistingResource is resolved for path &quot;/existingParent/nonExistingResource&quot;. Since this is pointing towards a non-existing resource the mapping is not active (i.e. the path will not contain &quot;/content&quot;). So you end up with a NonExistingResource with path  &quot;/existingParent/nonExistingResource&quot;.&lt;br/&gt;
Now you call getParent() on this resource.&lt;/p&gt;

&lt;p&gt;You would expect to end up with an existing resource in &quot;/content/existingParent&quot; (because that path does exist in the repository). Unfortunately due to the logic in AbstractResource.getParent() this just calls ResourceResolver.getParent() which will not use ResourceResolver.resolve(...) but rather ResourceResolver.getResource(...) internally. So the mapping is not considered here. Therefore no resource is found at &quot;/existingParent&quot;, although it does exist at &quot;/content/existingParent&quot;.&lt;/p&gt;

&lt;p&gt;This is unexpected and wrong in my opinion. So the NonExistingResource should not rely on AbstractResource.getParent() at all, but rather use its own implementation relying on ResourceResolver.resolve(...). &lt;/p&gt;

&lt;p&gt;See also &lt;a href=&quot;http://www.mail-archive.com/dev@sling.apache.org/msg56405.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/dev@sling.apache.org/msg56405.html&lt;/a&gt;.&lt;br/&gt;
and the related ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5757&quot; title=&quot;NonExistingResource.getParent() should not return null in case the parent is non-existing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5757&quot;&gt;&lt;del&gt;SLING-5757&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12977519">SLING-5773</key>
            <summary>NonExistingResource.getParent() must consider the resource resolver mapping</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jun 2016 07:20:30 +0000</created>
                <updated>Thu, 28 Oct 2021 05:36:47 +0000</updated>
                            <resolved>Thu, 28 Oct 2021 05:36:46 +0000</resolved>
                                    <version>API 2.11.0</version>
                                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17435154" author="cziegeler" created="Thu, 28 Oct 2021 04:58:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; It seems we didn&apos;t really come to a conclusion, on the other hand this issue is now open for 5 years; should we rather resolve as won&apos;t fix?&lt;/p&gt;</comment>
                            <comment id="17435162" author="kwin" created="Thu, 28 Oct 2021 05:36:47 +0000"  >&lt;p&gt;Agree, let&apos;s close as Won&apos;t Fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12975147">SLING-5757</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13175505">SLING-7792</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z9tz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5772] Wrong Java Doc in Adaption.class for usage sample</title>
                <link>https://issues.apache.org/jira/browse/SLING-5772</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;Adaption.class&lt;/tt&gt; has a wrong javadoc&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; * A usage sample is
 * 
 * &amp;lt;code&amp;gt;@Reference(referenceInterface=Adaptation.&lt;span class=&quot;code-keyword&quot;&gt;class,&lt;/span&gt;target=&lt;span class=&quot;code-quote&quot;&gt;&quot;(&amp;amp;(adaptable=com.myco.MyClass)(adaptable=org.apache.sling.api.Resource), name = &quot;&lt;/span&gt;ignore&lt;span class=&quot;code-quote&quot;&gt;&quot;, strategy = ReferenceStrategy.LOOKUP)&quot;&lt;/span&gt;)&amp;lt;/code&amp;gt;
 *
 */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;should rather be&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; * A usage sample is
A usage sample is
 * 
 * &amp;lt;code&amp;gt;@Reference(referenceInterface=Adaption.&lt;span class=&quot;code-keyword&quot;&gt;class,&lt;/span&gt;target=&lt;span class=&quot;code-quote&quot;&gt;&quot;(&amp;amp;(adaptables=com.myco.MyClass)(adapters=org.apache.sling.api.Resource))&quot;&lt;/span&gt;, name = &lt;span class=&quot;code-quote&quot;&gt;&quot;ignore&quot;&lt;/span&gt;, strategy = ReferenceStrategy.LOOKUP)&amp;lt;/code&amp;gt;
 *
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12977183">SLING-5772</key>
            <summary>Wrong Java Doc in Adaption.class for usage sample</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Jun 2016 10:24:40 +0000</created>
                <updated>Tue, 28 Jun 2016 11:26:39 +0000</updated>
                            <resolved>Thu, 9 Jun 2016 10:34:09 +0000</resolved>
                                                    <fixVersion>Adapter 2.1.8</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15322326" author="asanso" created="Thu, 9 Jun 2016 10:34:09 +0000"  >&lt;p&gt;fixed in &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1747529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1747529&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z7rb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5771] Wrong Java Doc in Adaption.class for usage sample</title>
                <link>https://issues.apache.org/jira/browse/SLING-5771</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The &lt;tt&gt;Adaption.class&lt;/tt&gt; has a wrong javadoc&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; * A usage sample is
 * 
 * &amp;lt;code&amp;gt;@Reference(referenceInterface=Adaptation.&lt;span class=&quot;code-keyword&quot;&gt;class,&lt;/span&gt;target=&lt;span class=&quot;code-quote&quot;&gt;&quot;(&amp;amp;(adaptable=com.myco.MyClass)(adaptable=org.apache.sling.api.Resource), name = &quot;&lt;/span&gt;ignore&lt;span class=&quot;code-quote&quot;&gt;&quot;, strategy = ReferenceStrategy.LOOKUP)&quot;&lt;/span&gt;)&amp;lt;/code&amp;gt;
 *
 */
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;should rather be&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; * A usage sample is
A usage sample is
 * 
 * &amp;lt;code&amp;gt;@Reference(referenceInterface=Adaption.&lt;span class=&quot;code-keyword&quot;&gt;class,&lt;/span&gt;target=&lt;span class=&quot;code-quote&quot;&gt;&quot;(&amp;amp;(adaptables=com.myco.MyClass)(adapters=org.apache.sling.api.Resource))&quot;&lt;/span&gt;, name = &lt;span class=&quot;code-quote&quot;&gt;&quot;ignore&quot;&lt;/span&gt;, strategy = ReferenceStrategy.LOOKUP)&amp;lt;/code&amp;gt;
 *
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12977182">SLING-5771</key>
            <summary>Wrong Java Doc in Adaption.class for usage sample</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="asanso">Antonio Sanso</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Jun 2016 10:24:32 +0000</created>
                <updated>Thu, 9 Jun 2016 10:24:32 +0000</updated>
                                                                            <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z7r3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5765] No way to remove an artifact from a special runmode</title>
                <link>https://issues.apache.org/jira/browse/SLING-5765</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;For example if a bundle is defined in the :standalone runmode, it&apos;s not possible to remove it&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;artifacts runModes=:remove,:standalone&amp;#93;&lt;/span&gt; results in an error as only one special run mode is allowed&lt;/p&gt;</description>
                <environment></environment>
        <key id="12976057">SLING-5765</key>
            <summary>No way to remove an artifact from a special runmode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cziegeler">Carsten Ziegeler</assignee>
                                    <reporter username="cziegeler">Carsten Ziegeler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Jun 2016 12:48:47 +0000</created>
                <updated>Fri, 10 Jun 2016 08:40:08 +0000</updated>
                            <resolved>Mon, 6 Jun 2016 13:29:55 +0000</resolved>
                                    <version>Sling Provisioning Model 1.4.2</version>
                                    <fixVersion>Sling Provisioning Model 1.4.4</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15316490" author="cziegeler" created="Mon, 6 Jun 2016 13:29:55 +0000"  >&lt;p&gt;Fixed in rev 1746993, added some tests &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z0tb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5764] No metatype name and description for SlingRequestStatusHealthCheck and DefaultLoginsHealthCheck</title>
                <link>https://issues.apache.org/jira/browse/SLING-5764</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently the Felix Web Console exposes&lt;br/&gt;
&lt;tt&gt;org.apache.sling.hc.support.DefaultLoginsHealthCheck.name&lt;/tt&gt; and &lt;tt&gt;org.apache.sling.hc.support.DefaultLoginsHealthCheck.description&lt;/tt&gt; as well as&lt;br/&gt;
&lt;tt&gt;org.apache.sling.hc.support.DefaultLoginsHealthCheck.name&lt;/tt&gt; and &lt;tt&gt;org.apache.sling.hc.support.DefaultLoginsHealthCheck.description&lt;/tt&gt; instead of decent values.&lt;/p&gt;

&lt;p&gt;This is due to wrong keys in the &lt;tt&gt;src/main/resources/OSGI-INF/metatype/metatype.properties&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12976039">SLING-5764</key>
            <summary>No metatype name and description for SlingRequestStatusHealthCheck and DefaultLoginsHealthCheck</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Jun 2016 12:02:55 +0000</created>
                <updated>Mon, 6 Jun 2016 12:06:49 +0000</updated>
                            <resolved>Mon, 6 Jun 2016 12:06:29 +0000</resolved>
                                    <version>Health Check Support 1.0.4</version>
                                    <fixVersion>Health Check Support 1.0.6</fixVersion>
                                    <component>Health Check</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15316401" author="kwin" created="Mon, 6 Jun 2016 12:06:11 +0000"  >&lt;p&gt;This was fixed quite some time ago by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; in &lt;a href=&quot;https://svn.apache.org/r1557739&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1557739&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z0pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5763] ClassFormatException when using java 8 lambda expressions</title>
                <link>https://issues.apache.org/jira/browse/SLING-5763</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When i try to jsp:useBean with Java 8 lambda expression jspc plugin throws following exception:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.eclipse.jdt.internal.compiler.classfmt.ClassFormatException
	at org.eclipse.jdt.internal.compiler.classfmt.ClassFileReader.&amp;lt;init&amp;gt;(ClassFileReader.java:329)
	at org.apache.sling.scripting.jsp.jasper.compiler.JDTCompiler$1.findType(JDTCompiler.java:204)
	at org.apache.sling.scripting.jsp.jasper.compiler.JDTCompiler$1.findType(JDTCompiler.java:176)
	at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(LookupEnvironment.java:123)
	at org.eclipse.jdt.internal.compiler.lookup.PackageBinding.getTypeOrPackage(PackageBinding.java:178)
	at org.eclipse.jdt.internal.compiler.lookup.Scope.getPackage(Scope.java:2046)
	at org.eclipse.jdt.internal.compiler.ast.QualifiedTypeReference.getTypeBinding(QualifiedTypeReference.java:69)
	at org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveType(TypeReference.java:130)
	at org.eclipse.jdt.internal.compiler.ast.LocalDeclaration.resolve(LocalDeclaration.java:138)
	at org.eclipse.jdt.internal.compiler.ast.Block.resolveUsing(Block.java:115)
	at org.eclipse.jdt.internal.compiler.ast.TryStatement.resolve(TryStatement.java:751)
	at org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolveStatements(AbstractMethodDeclaration.java:432)
	at org.eclipse.jdt.internal.compiler.ast.MethodDeclaration.resolveStatements(MethodDeclaration.java:190)
	at org.eclipse.jdt.internal.compiler.ast.AbstractMethodDeclaration.resolve(AbstractMethodDeclaration.java:403)
	at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1047)
	at org.eclipse.jdt.internal.compiler.ast.TypeDeclaration.resolve(TypeDeclaration.java:1094)
	at org.eclipse.jdt.internal.compiler.ast.CompilationUnitDeclaration.resolve(CompilationUnitDeclaration.java:353)
	at org.eclipse.jdt.internal.compiler.&lt;span class=&quot;code-object&quot;&gt;Compiler&lt;/span&gt;.process(&lt;span class=&quot;code-object&quot;&gt;Compiler&lt;/span&gt;.java:596)
	at org.eclipse.jdt.internal.compiler.&lt;span class=&quot;code-object&quot;&gt;Compiler&lt;/span&gt;.compile(&lt;span class=&quot;code-object&quot;&gt;Compiler&lt;/span&gt;.java:411)
	at org.apache.sling.scripting.jsp.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:410)
	at org.apache.sling.scripting.jsp.jasper.compiler.&lt;span class=&quot;code-object&quot;&gt;Compiler&lt;/span&gt;.compile(&lt;span class=&quot;code-object&quot;&gt;Compiler&lt;/span&gt;.java:313)
	at org.apache.sling.maven.jspc.JspcMojo.processFile(JspcMojo.java:367)
	at org.apache.sling.maven.jspc.JspcMojo.executeInternal(JspcMojo.java:321)
	at org.apache.sling.maven.jspc.JspcMojo.execute(JspcMojo.java:240)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:134)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:207)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:116)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:80)
	at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:128)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:307)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:193)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:106)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:863)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:288)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:199)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:289)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:229)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:415)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:356)
	at org.codehaus.classworlds.Launcher.main(Launcher.java:47)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:144)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.intellij.rt.execution.CommandLineWrapper.main(CommandLineWrapper.java:46)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12975806">SLING-5763</key>
            <summary>ClassFormatException when using java 8 lambda expressions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bobi">Andrey Bardashevsky</reporter>
                        <labels>
                    </labels>
                <created>Sun, 5 Jun 2016 13:46:06 +0000</created>
                <updated>Wed, 7 Jun 2017 08:49:06 +0000</updated>
                            <resolved>Wed, 7 Jun 2017 08:48:47 +0000</resolved>
                                    <version>Maven JSPC Plugin 2.0.8</version>
                                                    <component>Maven Plugins and Archetypes</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15316282" author="rombert" created="Mon, 6 Jun 2016 07:41:25 +0000"  >&lt;p&gt;What version of the &lt;tt&gt;org.apache.sling.scripting.jsp&lt;/tt&gt; bundle do you use?&lt;/p&gt;</comment>
                            <comment id="15316459" author="bobi" created="Mon, 6 Jun 2016 13:07:13 +0000"  >&lt;p&gt;i&apos;,m using default org.apache.sling.scripting.jsp 2.0.18, tried to use 2.1.6, but received following exception:&lt;/p&gt;

&lt;p&gt;An API incompatibility was encountered while executing org.apache.sling:maven-jspc-plugin:2.0.8:jspc: java.lang.NoSuchMethodError: org.apache.sling.scripting.jsp.jasper.compiler.JspRuntimeContext.&amp;lt;init&amp;gt;(Ljavax/servlet/ServletContext;Lorg/apache/sling/scripting/jsp/jasper/Options;)V&lt;/p&gt;</comment>
                            <comment id="15316465" author="rombert" created="Mon, 6 Jun 2016 13:11:13 +0000"  >&lt;p&gt;Hm, that version is pretty old. Could you quickly try the latest 9-SNAPSHOT version of the Sling Launchpad and see if that fixes your problem? Looking at the commit log for the `scripting.jsp` bundle I can spot at least &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3405&quot; title=&quot;Support Java 8 for compiling scripts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3405&quot;&gt;&lt;del&gt;SLING-3405&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-3724&quot; title=&quot;Provide option to always use current vm version for source and target&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-3724&quot;&gt;&lt;del&gt;SLING-3724&lt;/del&gt;&lt;/a&gt; as related to your problem.&lt;/p&gt;</comment>
                            <comment id="15316710" author="bobi" created="Mon, 6 Jun 2016 16:18:59 +0000"  >&lt;p&gt;same issue:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.NoSuchMethodError: org.apache.sling.scripting.jsp.jasper.compiler.JspRuntimeContext.&amp;lt;init&amp;gt;(Ljavax/servlet/ServletContext;Lorg/apache/sling/scripting/jsp/jasper/Options;)V
	at org.apache.sling.maven.jspc.JspcMojo.initServletContext(JspcMojo.java:440)
	at org.apache.sling.maven.jspc.JspcMojo.executeInternal(JspcMojo.java:284)
	at org.apache.sling.maven.jspc.JspcMojo.execute(JspcMojo.java:240)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:134)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15316790" author="bobi" created="Mon, 6 Jun 2016 17:14:20 +0000"  >&lt;p&gt;just in case you need my configuration with which i tried to compile&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                &amp;lt;plugin&amp;gt;
                    &amp;lt;groupId&amp;gt;org.apache.sling&amp;lt;/groupId&amp;gt;
                    &amp;lt;artifactId&amp;gt;maven-jspc-plugin&amp;lt;/artifactId&amp;gt;
                    &amp;lt;version&amp;gt;2.0.9-SNAPSHOT&amp;lt;/version&amp;gt;
                    &amp;lt;executions&amp;gt;
                        &amp;lt;execution&amp;gt;
                            &amp;lt;phase&amp;gt;compile&amp;lt;/phase&amp;gt;
                            &amp;lt;goals&amp;gt;
                                &amp;lt;goal&amp;gt;jspc&amp;lt;/goal&amp;gt;
                            &amp;lt;/goals&amp;gt;
                        &amp;lt;/execution&amp;gt;
                    &amp;lt;/executions&amp;gt;
                    &amp;lt;dependencies&amp;gt;
                        &amp;lt;dependency&amp;gt;
                            &amp;lt;groupId&amp;gt;org.apache.sling&amp;lt;/groupId&amp;gt;
                            &amp;lt;artifactId&amp;gt;org.apache.sling.scripting.jsp&amp;lt;/artifactId&amp;gt;
                            &amp;lt;version&amp;gt;2.1.9-SNAPSHOT&amp;lt;/version&amp;gt;
                        &amp;lt;/dependency&amp;gt;
                    &amp;lt;/dependencies&amp;gt;
                &amp;lt;/plugin&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15318461" author="rombert" created="Tue, 7 Jun 2016 13:28:13 +0000"  >&lt;p&gt;Ah, sorry, I completely misread your report. I though this was happening at runtime and mistook the component as &apos;it happened on a project generated using the Maven archetype&apos;.&lt;/p&gt;</comment>
                            <comment id="15318467" author="rombert" created="Tue, 7 Jun 2016 13:35:14 +0000"  >&lt;p&gt;It seems that there have been some API changes between version 2.0 and 2.1 of the `org.apache.sling.scripting.jsp` bundle, namely in how the wrapper classes from `org.apache.sling.scripting.jsp.jasper` are configured and used.&lt;/p&gt;

&lt;p&gt;So a straight upgrade does not work and I am not sure after a first glance how to update the code.&lt;/p&gt;

&lt;p&gt;Would you be interested in supplying a patch? To get started, just upgrade the dependency to `org.apache.sling.scripting.jsp` in the `maven-jspc-plugin/pom.xml` file and see what does not compile &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16040050" author="tripod" created="Wed, 7 Jun 2017 02:47:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bobi&quot; class=&quot;user-hover&quot; rel=&quot;bobi&quot;&gt;bobi&lt;/a&gt; I fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-6923&quot; title=&quot;Update JSPC plugin to support java 1.8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-6923&quot;&gt;&lt;del&gt;SLING-6923&lt;/del&gt;&lt;/a&gt;. can you test again if it now works with the latest changes?&lt;/p&gt;</comment>
                            <comment id="16040523" author="bobi" created="Wed, 7 Jun 2017 08:47:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tripod&quot; class=&quot;user-hover&quot; rel=&quot;tripod&quot;&gt;tripod&lt;/a&gt; thank you, issue resolved inlatest SNAPSHOT (maven-jspc-plugin-2.0.9-20170602.130204-1726)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13076062">SLING-6923</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yzzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5759] Distribution agents cannot be created via API</title>
                <link>https://issues.apache.org/jira/browse/SLING-5759</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The IT tes &lt;tt&gt;DistributionAgentResourcesIntegrationTest.testAgentConfigurationResourceCreate&lt;/tt&gt; fails and should be fixed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12975394">SLING-5759</key>
            <summary>Distribution agents cannot be created via API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="mpetria">Marius Petria</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Jun 2016 06:46:18 +0000</created>
                <updated>Tue, 14 Feb 2017 09:30:50 +0000</updated>
                            <resolved>Thu, 19 Jan 2017 14:25:06 +0000</resolved>
                                                    <fixVersion>Content Distribution Core 0.2.0</fixVersion>
                                    <component>Content Distribution</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15313879" author="mpetria" created="Fri, 3 Jun 2016 09:05:50 +0000"  >&lt;p&gt;Committed revision 1746692.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yxgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5757] NonExistingResource.getParent() should not return null in case the parent is non-existing</title>
                <link>https://issues.apache.org/jira/browse/SLING-5757</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Currently &lt;tt&gt;NonExistingResource.getParent()&lt;/tt&gt; returns &lt;tt&gt;null&lt;/tt&gt; in case the parent does not exist either. According to the javadoc of &lt;tt&gt;Resource.getParent()&lt;/tt&gt;  &lt;tt&gt;null&lt;/tt&gt; should only be returned when the current resource is already the root resource. &lt;br/&gt;
Therefore &lt;tt&gt;NonExistingResource.getParent()&lt;/tt&gt; should rather return a &lt;tt&gt;NonExistingResource&lt;/tt&gt; as well, in case the parent does not exist.&lt;/p&gt;

&lt;p&gt;Compare with the discussion at &lt;a href=&quot;http://www.mail-archive.com/dev@sling.apache.org/msg56294.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/dev@sling.apache.org/msg56294.html&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12975147">SLING-5757</key>
            <summary>NonExistingResource.getParent() should not return null in case the parent is non-existing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jun 2016 12:44:36 +0000</created>
                <updated>Sat, 9 Jul 2016 16:52:24 +0000</updated>
                            <resolved>Fri, 3 Jun 2016 06:46:25 +0000</resolved>
                                    <version>API 2.11.0</version>
                                    <fixVersion>API 2.12.0</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15312346" author="kwin" created="Thu, 2 Jun 2016 13:59:43 +0000"  >&lt;p&gt;Attached is a patch which fixes the NonExistingResource.getParent(). In addition I created some tests for NonExistingResource.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt; Can you have a look? &lt;/p&gt;</comment>
                            <comment id="15313626" author="cziegeler" created="Fri, 3 Jun 2016 05:55:34 +0000"  >&lt;p&gt;Patch looks good, I&apos;m not so happy with adding a dependency on the mock implementation. I think using some plain mocks should do the trick&lt;/p&gt;</comment>
                            <comment id="15313746" author="kwin" created="Fri, 3 Jun 2016 06:46:25 +0000"  >&lt;p&gt;I applied the patch with a different testing approach (just leveraging JMock) in &lt;a href=&quot;https://svn.apache.org/r1746673&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1746673&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12977519">SLING-5773</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12807721" name="SLING-5757-v01.patch" size="4796" author="kwin" created="Thu, 2 Jun 2016 13:59:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yvxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5756] Async appender is not started upon reattach in case of log config change</title>
                <link>https://issues.apache.org/jira/browse/SLING-5756</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Link to discussion on the mailing list:&lt;br/&gt;
&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/sling-users/201606.mbox/browser&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/sling-users/201606.mbox/browser&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;While appending an appender to Async appender and doing a change in the logger level of any of the loggers, LogbackManager.java resets the complete logger context. After the reset, for any async appenders, it detaches any appenders attached to them.&lt;/p&gt;

&lt;p&gt;Thanks and Regards&lt;br/&gt;
Piyush Goyal&lt;/p&gt;</description>
                <environment></environment>
        <key id="12975113">SLING-5756</key>
            <summary>Async appender is not started upon reattach in case of log config change</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="piyush.goyal">Piyush Goyal</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jun 2016 10:27:10 +0000</created>
                <updated>Mon, 24 Oct 2016 10:35:56 +0000</updated>
                            <resolved>Thu, 13 Oct 2016 15:29:18 +0000</resolved>
                                    <version>Commons Log 4.0.2</version>
                                    <fixVersion>Commons Log 5.0.0</fixVersion>
                                    <component>Commons</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15572254" author="chetanm" created="Thu, 13 Oct 2016 15:29:20 +0000"  >&lt;p&gt;Done the fix with r1764709&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yvqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[SLING-5754] Sightly renders form attributes always in lowercase</title>
                <link>https://issues.apache.org/jira/browse/SLING-5754</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;Sightly always renders all HTML attributes of a &amp;lt;form&amp;gt; element in lowercase:&lt;/p&gt;

&lt;p&gt;HTML source:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;form [ngFormModel]=&lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt; someAttribute=&lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt;&amp;gt;&amp;lt;/form&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Actual output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;form [ngformmodel]=&lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt; someattribute=&lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt;&amp;gt;&amp;lt;/form&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Expected output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;form [ngFormModel]=&lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt; someAttribute=&lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt;&amp;gt;&amp;lt;/form&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For other HTML tags like &amp;lt;div&amp;gt;, &amp;lt;p&amp;gt;, &amp;lt;h1&amp;gt;, etc. it works fine.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12974264">SLING-5754</key>
            <summary>Sightly renders form attributes always in lowercase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="erik.grijzen">Erik Grijzen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 May 2016 15:53:13 +0000</created>
                <updated>Tue, 7 Jun 2016 08:48:35 +0000</updated>
                            <resolved>Tue, 7 Jun 2016 08:48:35 +0000</resolved>
                                    <version>Scripting Sightly Engine 1.0.2</version>
                                                    <component>Scripting</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15318124" author="henzlerg" created="Tue, 7 Jun 2016 08:27:26 +0000"  >&lt;p&gt;As it turned out this is not a Sightly problem, but rather happens in com.day.cq.rewriter.htmlparser.TagTokenizer#attributeEnded(...) for all tags that are configured to be rewritten via includeTags configuration. The standard sling generator (org.apache.sling.rewriter.impl.components.HtmlGeneratorFactory) does not do this. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; Please close as invalid (as I don&apos;t have permissions to do so).  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yquv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>