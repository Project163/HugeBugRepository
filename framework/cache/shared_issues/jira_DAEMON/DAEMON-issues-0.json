<!--
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Thu Oct 23 09:39:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<!-- If you wish to do custom client-side styling of RSS, uncomment this:
<?xml-stylesheet href="https://issues.apache.org/jira/styles/jiraxml2html.xsl" type="text/xsl"?>
-->
<rss version="0.92">
    <channel>
        <title>ASF JIRA</title>
        <link>https://issues.apache.org/jira/issues/?jql=project+%3D+%22DAEMON%22+AND+issuetype+%3D+Bug+ORDER+BY+key+DESC</link>
        <description>An XML representation of a search request</description>
                <language>en-uk</language>
                        <issue start="0" end="200" total="335"/>
                <build-info>
            <version>8.20.10</version>
            <build-number>820010</build-number>
            <build-date>22-06-2022</build-date>
        </build-info>

<item>
            <title>[DAEMON-474] Logging doesn&apos;t work on 1.40./1.4.1 - Regression of 1.3.4 (worked perfectly)</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-474</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Building a windows servcie (exe mode), logging (StdOutput amd StdError) doesn&apos;t work on 1.40./1.4.1. Both files are never initilizaed.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;With older version 1.3.4, StdOutput amd StdError were genreated. Files were initializated and filled:&#160; &quot;Apache Commons Daemon procrun stdout/stderror initialized.&quot;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I attach a small test with my results (StdOutput and StdError files are 0 bytes for 1.4x branch).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;To reproduce, uncompress and locate everythig in C:\Temp :&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Install_TestServices.bat&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;To test different versions change DAEMON_FOLDER variable:&lt;/p&gt;

&lt;p&gt;set &quot;DAEMON_FOLDER=C:\Temp\commons-daemon-1.4.1-bin-windows&quot; for&lt;/p&gt;

&lt;p&gt;set &quot;DAEMON_FOLDER=C:\Temp\commons-daemon-1.3.4-bin-windows&quot;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;start/stop the service to test&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Please let me know if&#160; you need more information.&#160;&lt;/p&gt;

&lt;p&gt;Thanks a lot.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Server 2022 (virtualized VMware)&#160;&lt;/p&gt;</environment>
        <key id="13631924">DAEMON-474</key>
            <summary>Logging doesn&apos;t work on 1.40./1.4.1 - Regression of 1.3.4 (worked perfectly)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kfeina">kfeina</reporter>
                        <labels>
                            <label>logging</label>
                    </labels>
                <created>Sun, 19 Oct 2025 11:43:55 +0000</created>
                <updated>Sun, 19 Oct 2025 11:43:55 +0000</updated>
                                            <version>1.4.0</version>
                    <version>1.4.1</version>
                                    <fixVersion>1.3.4</fixVersion>
                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                            <attachment id="13078878" name="TestService.zip" size="762411" author="kfeina" created="Sun, 19 Oct 2025 11:38:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1y7jk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-473] Migration from procrun 1.0.15 to 1.4.1 is getting failed</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-473</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I am currently using Procrun version 1.0.15 for my Java application on a Windows 10 machine. We want to upgrade the Procrun binary to version 1.4.1 due to some security issues present in 1.0.15.&lt;/p&gt;

&lt;p&gt;However, after updating, the process is not working with version 1.4.1. The same script works correctly with version 1.0.15.&lt;/p&gt;

&lt;p&gt;Please provide the necessary steps, parameters, or configuration changes required to resolve this issue with Procrun 1.4.1.&lt;/p&gt;

&lt;p&gt;Below is the script we are using to install the service&lt;/p&gt;
&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Installation_script.bat&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;set SERVICE_NAME=testService&lt;br/&gt;
set PR_INSTALL=%~dp0%Procrun.exe&lt;br/&gt;
set PR_DESCRIPTION=Windows test Service&lt;br/&gt;
&#160;&lt;br/&gt;
REM Service log configuration&lt;br/&gt;
set PR_LOGPREFIX=test-Procrun&lt;br/&gt;
set PR_LOGPATH=%PARENT_DIR%\log\&lt;br/&gt;
set PR_STDOUTPUT=%PARENT_DIR%\log\test-Procrun.out&lt;br/&gt;
set PR_STDERROR=%PARENT_DIR%\log\test-Procrun.err&lt;br/&gt;
set PR_LOGLEVEL=Error&lt;br/&gt;
&#160;&lt;br/&gt;
REM Path to java installation&lt;br/&gt;
set PR_JVM=%PARENT_DIR%\jdk\bin\server\jvm.dll&lt;br/&gt;
set PR_CLASSPATH=%PARENT_DIR%\vprobe\lib*;%PARENT_DIR%\bin*;%PARENT_DIR%\conf*&lt;br/&gt;
&#160;&lt;br/&gt;
REM Startup configuration&lt;br/&gt;
set PR_STARTUP=auto&lt;br/&gt;
set PR_STARTMODE=jvm&lt;br/&gt;
set PR_STARTCLASS=com..core.test&lt;br/&gt;
set PR_STARTMETHOD=start&lt;br/&gt;
&#160;&lt;br/&gt;
REM Shutdown configuration&lt;br/&gt;
set PR_STOPMODE=jvm&lt;br/&gt;
set PR_STOPCLASS=com.core.test&lt;br/&gt;
set PR_STOPMETHOD=stop&lt;br/&gt;
&#160;&lt;br/&gt;
REM JVM configuration&lt;br/&gt;
set PR_JVMMS=128&lt;br/&gt;
set PR_JVMMX=2048&lt;br/&gt;
set PR_JVMSS=128&lt;/p&gt;

&lt;p&gt;set PR_JVMOPTIONS=-Duser.language=EN;-Duser.region=en;-Dhttps.protocols=TLSv1,TLSv1.1,TLSv1.2,SSLv3;-Djdk.tls.client.protocols=TLSv1,TLSv1.1,TLSv1.2,SSLv3;-Xss256k&lt;br/&gt;
REM this is need for take arguments&lt;br/&gt;
set SERVICE_CMD=%1&lt;br/&gt;
shift&lt;/p&gt;

&lt;p&gt;REM checking first argument having data or not&lt;br/&gt;
if &quot;x%1x&quot; == &quot;xx&quot; goto checkServiceCmd&lt;br/&gt;
:checkServiceCmd&lt;br/&gt;
if /i %SERVICE_CMD% == install goto doInstall&lt;br/&gt;
if /i %SERVICE_CMD% == uninstall goto doRemove&lt;br/&gt;
if /i %SERVICE_CMD% == runservice goto doStart&lt;/p&gt;

&lt;p&gt;:doInstall&lt;br/&gt;
REM Install service&lt;br/&gt;
Procrun.exe //IS//%SERVICE_NAME%&lt;br/&gt;
REM Procrun.exe //ES//%SERVICE_NAME%&lt;br/&gt;
goto end&lt;/p&gt;

&lt;p&gt;:doRemove&lt;br/&gt;
Procrun.exe //SS//%SERVICE_NAME%&lt;br/&gt;
Procrun.exe //DS//%SERVICE_NAME%&lt;br/&gt;
goto end&lt;/p&gt;

&lt;p&gt;:doStart&lt;br/&gt;
Procrun.exe //ES//%SERVICE_NAME%&lt;br/&gt;
goto end&lt;/p&gt;

&lt;p&gt;:end&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13628079">DAEMON-473</key>
            <summary>Migration from procrun 1.0.15 to 1.4.1 is getting failed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vinayreddy">vinay reddy</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Sep 2025 06:24:39 +0000</created>
                <updated>Thu, 4 Sep 2025 06:25:40 +0000</updated>
                                            <version>1.4.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1xjtc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-470] Service Stop Returns True, but the service is still running in the background</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-470</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Tomcat uses common-daemon to install services.&lt;/p&gt;

&lt;p&gt;We installed a tomcat service using&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
tomcat9.exe &lt;span class=&quot;code-comment&quot;&gt;//US//TomcatService &amp;lt;-options&amp;gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When we run&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
net stop TomcatService&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;we get a response&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
The Apache Tomcat 9.0 TomcatService service was stopped successfully.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However, if we check the currently running process we see that tomcat.exe is still running in the background. As can be seen from the attached tomcat logs as below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.tuckey.web.filters.urlrewrite.UrlRewriteFilter INFO: destroy called
08:51:12,069 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_APPLICATION] - Worker thread will flush remaining events before exiting.
08:51:12,070 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_APPLICATION] - Queue flush finished successfully within timeout.
08:51:12,070 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_COMMUNICATION] - Worker thread will flush remaining events before exiting.
08:51:12,071 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_COMMUNICATION] - Queue flush finished successfully within timeout.
08:51:12,071 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_DATABASE] - Worker thread will flush remaining events before exiting.
08:51:12,071 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_DATABASE] - Queue flush finished successfully within timeout.
08:51:12,071 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_CONFIGURATION] - Worker thread will flush remaining events before exiting.
08:51:12,071 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_CONFIGURATION] - Queue flush finished successfully within timeout.
08:51:12,071 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_SCRIPT_ERROR] - Worker thread will flush remaining events before exiting.
08:51:12,071 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_SCRIPT_ERROR] - Queue flush finished successfully within timeout.
08:51:12,071 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_SCRIPT] - Worker thread will flush remaining events before exiting.
08:51:12,071 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_SCRIPT] - Queue flush finished successfully within timeout.
08:51:12,072 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_SECURITY] - Worker thread will flush remaining events before exiting.
08:51:12,072 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_SECURITY] - Queue flush finished successfully within timeout.
08:51:12,072 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_ERROR] - Worker thread will flush remaining events before exiting.
08:51:12,072 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_ERROR] - Queue flush finished successfully within timeout.
08:51:12,072 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_AUTH] - Worker thread will flush remaining events before exiting.
08:51:12,072 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_AUTH] - Queue flush finished successfully within timeout.
08:51:12,073 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_AKKA] - Worker thread will flush remaining events before exiting.
08:51:12,073 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_APPENDER_AKKA] - Queue flush finished successfully within timeout.
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; TERMINATING JVM &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; CALLING SYSTEM EXIT &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the service stopped at 8:51:12,&lt;br/&gt;
however after repeatedly checking for any running tomcat.exe process, we see that the service was actually stopped at 8:51:24 -&amp;gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Thu Apr 3 08:51:23 CUT 2025
tomcat9.exe 1364 Services 0 1,417,944 K
Thu Apr 3 08:51:24 CUT 2025
tomcat9.exe 1364 Services 0 901,252 K
Thu Apr 3 08:51:24 CUT 2025
tomcat9.exe 1364 Services 0 355,456 K&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Below are the common-daemons logs when stopped successfully and when it fails:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
When stopped successfully:
[2025-04-03 08:49:58] [2025-04-03 08:50:01] [info] &#160;[ 5840] Apache Commons Daemon procrun (1.4.1.0 64-bit) started.
[2025-04-03 08:50:01] [info] &#160;[ 5840] Running Service &lt;span class=&quot;code-quote&quot;&gt;&apos;ThingWorx-Foundation&apos;&lt;/span&gt;...
[2025-04-03 08:50:01] [info] &#160;[ 3484] Starting service...
[2025-04-03 08:50:02] [info] &#160;[ 3484] Service started in 1290 milliseconds.
[2025-04-03 08:50:33] [info] &#160;[ 5840] Service SERVICE_CONTROL_STOP signalled.
[2025-04-03 08:50:33] [info] &#160;[ 2740] Stopping service...
[2025-04-03 08:50:35] [error] [ 5732] Failed to set service status.
[2025-04-03 08:50:36] [error] [ 5732] The handle is invalid.
[2025-04-03 08:50:36] [2025-04-03 08:50:38] [info] &#160;[ 7056] Apache Commons Daemon procrun (1.4.1.0 64-bit) started.
When not stopped properly (process running)
[2025-04-03 08:50:36] [2025-04-03 08:50:38] [info] &#160;[ 7056] Apache Commons Daemon procrun (1.4.1.0 64-bit) started.
[2025-04-03 08:50:38] [info] &#160;[ 7056] Running Service &lt;span class=&quot;code-quote&quot;&gt;&apos;ThingWorx-Foundation&apos;&lt;/span&gt;...
[2025-04-03 08:50:38] [info] &#160;[ 6912] Starting service...
[2025-04-03 08:50:40] [info] &#160;[ 6912] Service started in 1436 milliseconds.
[2025-04-03 08:51:09] [info] &#160;[ 7056] Service SERVICE_CONTROL_STOP signalled.
[2025-04-03 08:51:09] [info] &#160;[ &#160;376] Stopping service...
[2025-04-03 08:51:12] [error] [ 3000] Failed to set service status.
[2025-04-03 08:51:12] [info] &#160;[ 7056] Run service finished.
[2025-04-03 08:51:12] [info] &#160;[ 7056] Apache Commons Daemon procrun finished.
[2025-04-03 08:51:24] [info] &#160;[ 7300] Apache Commons Daemon procrun (1.4.1.0 64-bit) started.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We&apos;ve already created this issue in the tomcat forum:&lt;br/&gt;
&lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=69642&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;69642 - net stop tomcat service returns turn but tomcat.exe is still running in the background&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Where we were guided to report the issue here.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Server 2019 Datacenter&lt;br/&gt;
tomcat9 -&amp;gt; This issue is intermittent for version 9.0.102+ up to tomcat11&lt;/p&gt;

&lt;p&gt;tomcat issue created: &lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=69642&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;69642 - net stop tomcat service returns turn but tomcat.exe is still running in the background&lt;/a&gt;&lt;/p&gt;</environment>
        <key id="13614794">DAEMON-470</key>
            <summary>Service Stop Returns True, but the service is still running in the background</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dbhatia">Dhruva Madhukar Bhatia</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Apr 2025 05:15:12 +0000</created>
                <updated>Thu, 15 May 2025 09:21:59 +0000</updated>
                                            <version>1.3.3</version>
                    <version>1.3.4</version>
                                                    <component>Procrun</component>
                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17942410" author="garydgregory" created="Thu, 10 Apr 2025 08:53:05 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dbhatia&quot; class=&quot;user-hover&quot; rel=&quot;dbhatia&quot;&gt;dbhatia&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;What happens if you try this use case with Commons Daemon 1.4.1 (the current version)?&lt;/p&gt;</comment>
                            <comment id="17945021" author="JIRAUSER309288" created="Wed, 16 Apr 2025 09:53:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; We are using tomcat version 11.0.5, here the Common Daemon version is 1.3.4.&#160;&lt;br/&gt;
I shall check what happens with later versions of tomcat.&lt;/p&gt;</comment>
                            <comment id="17945070" author="garydgregory" created="Wed, 16 Apr 2025 13:23:55 +0000"  >&lt;p&gt;FYI, Tomcat 11.0.6 ships with Commons Daemon 1.4.1&apos;s native apps.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17951651" author="jfclere" created="Thu, 15 May 2025 09:10:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dbhatia&quot; class=&quot;user-hover&quot; rel=&quot;dbhatia&quot;&gt;dbhatia&lt;/a&gt; Would it be possible to start the service in debug mode add to the&#160;&amp;lt;-options&amp;gt; :&lt;/p&gt;

&lt;p&gt;--LogPath=place_where_service_can_write --LogLevel=Debug&lt;/p&gt;

&lt;p&gt;a file will be created something like&lt;br/&gt;
commons-daemon.2025-05-14.log&lt;/p&gt;

&lt;p&gt;Please attach it to the JIRA (make sure to remove user/password in case you use it).&lt;/p&gt;

&lt;p&gt;Also attach the output of tomcat9.exe //SS//ThingWorx-Foundation and tomcat9.exe //PS//ThingWorx-Foundation to the JIRA.&lt;br/&gt;
&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13075912" name="common-daemonlog-relevant" size="1575" author="dbhatia" created="Thu, 10 Apr 2025 05:10:17 +0000"/>
                            <attachment id="13075911" name="serviceNotStoppedMemoryRiseCropped.PNG" size="60944" author="dbhatia" created="Thu, 10 Apr 2025 05:12:57 +0000"/>
                            <attachment id="13075913" name="tomcatLogsFile" size="2999" author="dbhatia" created="Thu, 10 Apr 2025 05:10:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1va6w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-467] prunsrv stop service not able to find springboot package class</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-467</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Hi,&#160;&lt;/p&gt;

&lt;p&gt;I have a apache camel in java springboot application and need to manage windows service stop/start using prunsrv.&#160; For start is okay as I configured to use the JarLauncher class. However during service stop, it&apos;s not working and it failed to find the stop class. I tried already to use a classifier so the class will not be under BOOT-INF package but still not working.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-12-05 07:48:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:419 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10720&amp;#93;&lt;/span&gt; Loaded JVM DLL &apos;D:\LINKRELAYPST\jre\bin\server\jvm.dll&apos;, home &apos;D:\LINKRELAYPST\jre&apos;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-12-05 07:48:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:424 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10720&amp;#93;&lt;/span&gt; JNI_GetCreatedJavaVMs...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-12-05 07:48:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( javajni.c:983 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10656&amp;#93;&lt;/span&gt; FindClass com/link/mftagent/daemon/AgentDaemon failed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-12-05 07:48:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1092) &lt;span class=&quot;error&quot;&gt;&amp;#91;10656&amp;#93;&lt;/span&gt; Java worker thread finished com/link/mftagent/daemon/AgentDaemon:stop with status = 3&lt;/p&gt;

&lt;p&gt;Just wondering how to properly configure it.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;@echo off&lt;br/&gt;
call set_environment.bat&lt;br/&gt;
set PRUNSRV=%BASE_PATH%\commons-daemon\amd64\prunsrv.exe&lt;br/&gt;
&#160;&lt;br/&gt;
@echo on&lt;br/&gt;
%PRUNSRV% //IS//%Service_name% ^&lt;br/&gt;
--DisplayName=&quot;%Service_display_name%&quot; ^&lt;br/&gt;
--Description=&quot;%Service_description%&quot; ^&lt;br/&gt;
--StartPath=%BASE_PATH% ^&lt;br/&gt;
--LogPath=%LOG_PATH%^&lt;br/&gt;
--Jvm=%JVM% ^&lt;br/&gt;
--JavaHome=%JAVA_HOME_% ^&lt;br/&gt;
--Classpath=&quot;%JVM_CLS_PATH%&quot; ^&lt;br/&gt;
--StartMode=jvm ^&lt;br/&gt;
--StopMode=jvm ^&lt;br/&gt;
--Startup=auto ^&lt;br/&gt;
++JvmOptions=%JVM_OPTION% ^&lt;br/&gt;
--StartClass=org.springframework.boot.loader.JarLauncher ^&lt;br/&gt;
--StopClass=com.dhl.link.mftagent.daemon.AgentDaemon ^&lt;br/&gt;
--StopMethod=stop ^&lt;br/&gt;
--StopTimeout=30 ^&lt;br/&gt;
--ServiceUser=LocalSystem ^&lt;br/&gt;
--LogLevel=debug&lt;/p&gt;</environment>
        <key id="13600971">DAEMON-467</key>
            <summary>prunsrv stop service not able to find springboot package class</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ronitscbj">Ron</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Dec 2024 06:51:24 +0000</created>
                <updated>Tue, 10 Dec 2024 15:25:59 +0000</updated>
                            <resolved>Tue, 10 Dec 2024 15:25:59 +0000</resolved>
                                    <version>1.4.0</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17904546" author="markt" created="Tue, 10 Dec 2024 15:25:59 +0000"  >&lt;p&gt;This appears to be a configuration issue. Please uses the users mailing list for assistance. When you post there make sure you provide:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the full class path you are passing to the service&lt;/li&gt;
	&lt;li&gt;the fully qualified name of the stop class&lt;/li&gt;
	&lt;li&gt;the full path to where that class is located (include the path inside any JAR file)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12312720" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Docs Text</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>[2024-12-05 07:47:43] [debug] ( prunsrv.c:2068) [11216] Apache Commons Daemon procrun log initialized.&lt;br/&gt;
[2024-12-05 07:47:43] [info]  ( prunsrv.c:2076) [11216] Apache Commons Daemon procrun (1.4.0.0 64-bit) started.&lt;br/&gt;
[2024-12-05 07:47:43] [info]  ( prunsrv.c:1922) [11216] Running Service &amp;#39;LINK_Relay_Agent_Service_PST&amp;#39;...&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:1681) [ 4084] Inside serviceMain()...&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:1127) [ 4084] reportServiceStatusE: dwCurrentState = 2 (SERVICE_START_PENDING), dwWin32ExitCode = 0, dwWaitHint = 3000 milliseconds, dwServiceSpecificExitCode = 0.&lt;br/&gt;
[2024-12-05 07:47:43] [info]  ( prunsrv.c:1426) [ 4084] Starting service...&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:499 ) [ 4084] Checking Java options for environment variable requirements&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-Dapp.home=D:\LINKRELAYPST&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-Dconsole.url=&lt;a href=&quot;https://link.mft.com/mft-console/rest/camel_agent&amp;#39;&quot;&gt;https://link.mft.com/mft-console/rest/camel_agent&amp;amp;#39;&lt;/a&gt;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-Djavax.net.ssl.keyStore=D:\LINKRELAYPST\certs\mft-keystore.jks&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-Djavax.net.ssl.keyStorePassword=****&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-Djavax.net.ssl.trustStore=D:\LINKRELAYPST\certs\mft-truststore.jks&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-Djavax.net.ssl.trustStorePassword=***&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-Xms512m&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-Xmx2g&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-XX:+UseG1GC&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-XX:InitiatingHeapOccupancyPercent=50&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-XX:G1HeapRegionSize=8m&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-XX:G1ReservePercent=15&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-XX:+HeapDumpOnOutOfMemoryError&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-XX:ParallelGCThreads=2&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( prunsrv.c:503 ) [ 4084] Checking environment variable requirements for &amp;#39;-XX:ConcGCThreads=1&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:216 ) [ 4084] Explicit RuntimeLib specified &amp;#39;D:\LINKRELAYPST\jre\bin\server\jvm.dll&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:285 ) [ 4084] Adding Java bin path to the PATH to fix loading of awt.dll: &amp;#39;D:\LINKRELAYPST\jre\bin&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:291 ) [ 4084] Loading JVM DLL &amp;#39;D:\LINKRELAYPST\jre\bin\server\jvm.dll&amp;#39;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:419 ) [ 4084] Loaded JVM DLL &amp;#39;D:\LINKRELAYPST\jre\bin\server\jvm.dll&amp;#39;, home &amp;#39;D:\LINKRELAYPST\jre&amp;#39;.&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:424 ) [ 4084] JNI_GetCreatedJavaVMs...&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[0] -Dapp.home=D:\LINKRELAYPST&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[1] -Dconsole.url=&lt;a href=&quot;https://link-mft.com/mft-console/rest/camel_agent&quot;&gt;https://link-mft.com/mft-console/rest/camel_agent&lt;/a&gt;&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[2] -Djavax.net.ssl.keyStore=D:\LINKRELAYPST\certs\mft-keystore.jks&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[3] -Djavax.net.ssl.keyStorePassword=***&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[4] -Djavax.net.ssl.trustStore=D:\LINKRELAYPST\certs\mft-truststore.jks&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[5] -Djavax.net.ssl.trustStorePassword=**&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[6] -Xms512m&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[7] -Xmx2g&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[8] -XX:+UseG1GC&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[9] -XX:InitiatingHeapOccupancyPercent=50&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[10] -XX:G1HeapRegionSize=8m&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[11] -XX:G1ReservePercent=15&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[12] -XX:+HeapDumpOnOutOfMemoryError&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[13] -XX:ParallelGCThreads=2&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[14] -XX:ConcGCThreads=1&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[15] -Djava.class.path=D:\LINKRELAYPST\mft.jar&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[16] exit&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:822 ) [11000] JVM Option[17] abort&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:1067) [11000] Java worker thread started for org/springframework/boot/loader/JarLauncher:main&lt;br/&gt;
[2024-12-05 07:47:43] [debug] ( javajni.c:1073) [11000] JNI calling static void method org/springframework/boot/loader/JarLauncher:main&lt;br/&gt;
[2024-12-05 07:47:44] [debug] ( prunsrv.c:1490) [ 4084] Java started &amp;#39;org/springframework/boot/loader/JarLauncher&amp;#39;.&lt;br/&gt;
[2024-12-05 07:47:44] [info]  ( prunsrv.c:1589) [ 4084] Service started in 1312 milliseconds.&lt;br/&gt;
[2024-12-05 07:47:44] [debug] ( prunsrv.c:1127) [ 4084] reportServiceStatusE: dwCurrentState = 4 (SERVICE_RUNNING), dwWin32ExitCode = 0, dwWaitHint = 0 milliseconds, dwServiceSpecificExitCode = 0.&lt;br/&gt;
[2024-12-05 07:47:44] [debug] ( prunsrv.c:1836) [ 4084] Waiting for worker to finish...&lt;br/&gt;
[2024-12-05 07:47:44] [debug] ( javajni.c:1167) [ 4084] apxJavaWait -&amp;gt; WaitForSingleObject (0x0000000000000218, 2000 milliseconds) (-1=INFINITE)...&lt;br/&gt;
[2024-12-05 07:47:46] [debug] ( javajni.c:1170) [ 4084] apxJavaWait &amp;lt;- WaitForSingleObject (0x0000000000000218, 2000 milliseconds) = 258&lt;br/&gt;
[2024-12-05 07:47:46] [debug] ( javajni.c:1167) [ 4084] apxJavaWait -&amp;gt; WaitForSingleObject (0x0000000000000218, 2000 milliseconds) (-1=INFINITE)...&lt;br/&gt;
[2024-12-05 07:47:48] [debug] ( javajni.c:1170) [ 4084] apxJavaWait &amp;lt;- WaitForSingleObject (0x0000000000000218, 2000 milliseconds) = 258&lt;br/&gt;
[2024-12-05 07:47:48] [debug] ( javajni.c:1167) [ 4084] apxJavaWait -&amp;gt; WaitForSingleObject (0x0000000000000218, 2000 milliseconds) (-1=INFINITE)...&lt;br/&gt;
[2024-12-05 07:47:49] [debug] ( javajni.c:1092) [11000] Java worker thread finished org/springframework/boot/loader/JarLauncher:main with status = 0&lt;br/&gt;
[2024-12-05 07:47:49] [debug] ( javajni.c:1170) [ 4084] apxJavaWait &amp;lt;- WaitForSingleObject (0x0000000000000218, 2000 milliseconds) = 0&lt;br/&gt;
[2024-12-05 07:48:47] [info]  ( prunsrv.c:1610) [11216] Service SERVICE_CONTROL_STOP signalled.&lt;br/&gt;
[2024-12-05 07:48:47] [debug] ( prunsrv.c:1127) [11216] reportServiceStatusE: dwCurrentState = 3 (SERVICE_STOP_PENDING), dwWin32ExitCode = 0, dwWaitHint = 30000 milliseconds, dwServiceSpecificExitCode = 0.&lt;br/&gt;
[2024-12-05 07:48:47] [debug] ( prunsrv.c:1846) [ 4084] waiting 30 sec... shutdown: 1&lt;br/&gt;
[2024-12-05 07:48:47] [debug] ( prunsrv.c:1851) [ 4084] Worker finished.&lt;br/&gt;
[2024-12-05 07:48:47] [debug] ( prunsrv.c:1880) [ 4084] Waiting for all threads to exit.&lt;br/&gt;
[2024-12-05 07:48:47] [info]  ( prunsrv.c:1227) [10720] Stopping service...&lt;br/&gt;
[2024-12-05 07:48:47] [debug] ( javajni.c:419 ) [10720] Loaded JVM DLL &amp;#39;D:\LINKRELAYPST\jre\bin\server\jvm.dll&amp;#39;, home &amp;#39;D:\LINKRELAYPST\jre&amp;#39;.&lt;br/&gt;
[2024-12-05 07:48:47] [debug] ( javajni.c:424 ) [10720] JNI_GetCreatedJavaVMs...&lt;br/&gt;
[2024-12-05 07:48:47] [error] ( javajni.c:983 ) [10656] FindClass com/link/mftagent/daemon/AgentDaemon failed&lt;br/&gt;
[2024-12-05 07:48:47] [debug] ( javajni.c:1092) [10656] Java worker thread finished com/link/mftagent/daemon/AgentDaemon:stop with status = 3&lt;br/&gt;
[2024-12-05 07:48:47] [error] ( prunsrv.c:1267) [10720] Failed starting Java.&lt;br/&gt;
[2024-12-05 07:48:47] [debug] ( prunsrv.c:1127) [10720] reportServiceStatusE: dwCurrentState = 3 (SERVICE_STOP_PENDING), dwWin32ExitCode = 0, dwWaitHint = 30000 milliseconds, dwServiceSpecificExitCode = 0.&lt;br/&gt;
[2024-12-05 07:48:47] [debug] ( prunsrv.c:1390) [10720] Waiting for worker to die naturally...&lt;br/&gt;
[2024-12-05 07:48:47] [debug] ( prunsrv.c:1401) [10720] Worker finished gracefully in 0 milliseconds.&lt;br/&gt;
[2024-12-05 07:48:47] [info]  ( prunsrv.c:1411) [10720] Service stop thread completed.&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1sxfs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-466] Service crashes with 1067 when stopping</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-466</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Starting with 1.4.0 the service crashes with &quot;Error 1067: The process terminated unexpectedly&quot; when stopping&lt;br/&gt;
&#160;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-10-17 17:09:39&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; ( prunsrv.c:1227) [ 1944] Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-10-17 17:09:39&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:424 ) [ 1944] JNI_GetCreatedJavaVMs...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-10-17 17:09:39&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1067) [ 8388] Java worker thread started for agent/Agent:stop&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-10-17 17:09:39&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1073) [ 8388] JNI calling static void method agent/Agent:stop&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-10-17 17:09:40&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1277) [ 1944] Waiting for Java JNI stop worker to finish for agent/Agent:stop...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-10-17 17:09:40&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1167) [ 1944] apxJavaWait -&amp;gt; WaitForSingleObject (0x0000000000000660, -1 milliseconds) (-1=INFINITE)...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-10-17 17:09:41&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:571 ) [ 5476] Exit hook with exit code 0&lt;br/&gt;
&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
In previous versions (tested on 1.3.3 and 1.3.4) there are two additional logs after the exit hook which are &lt;b&gt;not&lt;/b&gt; present in 1.4.0:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-10-17 17:09:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:571 ) [ 6576] Exit hook with exit code 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-10-17 17:09:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1194) [ 6576] Stop exit hook called...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-10-17 17:09:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1127) [ 6576] reportServiceStatusE: dwCurrentState = 1 (SERVICE_STOPPED), dwWin32ExitCode = 0, dwWaitHint = 0 milliseconds, dwServiceSpecificExitCode = 0.&lt;br/&gt;
&#160;&lt;br/&gt;
Also found this issue reported here &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-435&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DAEMON-435&lt;/a&gt; but it is closed&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Server 2019 (version 1809)&lt;br/&gt;
Java 17.0.11&lt;/p&gt;</environment>
        <key id="13596628">DAEMON-466</key>
            <summary>Service crashes with 1067 when stopping</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pavloasf">Pavlo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 24 Oct 2024 16:24:13 +0000</created>
                <updated>Tue, 10 Dec 2024 15:20:03 +0000</updated>
                            <resolved>Tue, 10 Dec 2024 15:20:03 +0000</resolved>
                                    <version>1.4.0</version>
                                    <fixVersion>1.4.1</fixVersion>
                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17892564" author="garydgregory" created="Thu, 24 Oct 2024 17:03:49 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pavloasf&quot; class=&quot;user-hover&quot; rel=&quot;pavloasf&quot;&gt;pavloasf&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Would you please include your OS and Java version details?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17892569" author="JIRAUSER307504" created="Thu, 24 Oct 2024 17:18:42 +0000"  >&lt;p&gt;Added&lt;/p&gt;</comment>
                            <comment id="17892703" author="michael-o" created="Fri, 25 Oct 2024 08:07:47 +0000"  >&lt;p&gt;Rant: Why is Windows such a pain to run?&lt;/p&gt;</comment>
                            <comment id="17892729" author="markt" created="Fri, 25 Oct 2024 09:32:34 +0000"  >&lt;p&gt;What we need to investigate this is the simplest Java program that recreates the issue, the commands you used to install the service and steps to reproduce the issue.&lt;/p&gt;</comment>
                            <comment id="17892775" author="garydgregory" created="Fri, 25 Oct 2024 12:33:27 +0000"  >&lt;p&gt;WRT rant, fwiw, we&apos;ve been using Daemon at work for a long time and it works like a champ! &#128512; &lt;/p&gt;</comment>
                            <comment id="17893641" author="JIRAUSER307504" created="Mon, 28 Oct 2024 22:56:58 +0000"  >&lt;p&gt;//IS//DemoAgent --Startup=auto --ServiceUser=LocalSystem --Jvm &quot;${installdir}\jre\bin\server\jvm.dll&quot; --Classpath &quot;${installdir}\demo\agent.jar&quot; --JavaHome &quot;${installdir}\jre&quot; --StartPath &quot;${installdir}&quot; --JvmOptions &quot;-XX:+HeapDumpOnOutOfMemoryError&quot; --StartMode=jvm --StartClass=com.demo.Agent --StartMethod=main --StopMode=jvm --StopClass=com.demo.Agent --StopMethod=stop&lt;br/&gt;
I was able to reproduce the bug with the minimal java program:&lt;/p&gt;

&lt;p&gt;public class Agent implements Runnable {&lt;/p&gt;

&lt;p&gt;public static void main(String[] args) {&lt;br/&gt;
try &lt;/p&gt;
{
Thread.sleep(600000);
}
&lt;p&gt; catch (InterruptedException e) &lt;/p&gt;
{
throw new RuntimeException(e);
}
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;public static void stop(String[] args) &lt;/p&gt;
{
System.exit(0);
}

&lt;p&gt;@Override&lt;br/&gt;
public void run() {&lt;br/&gt;
}&lt;br/&gt;
}&lt;br/&gt;
&#160;&lt;br/&gt;
The service was started and stopped manually. When stopping it throws the error.&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17904545" author="markt" created="Tue, 10 Dec 2024 15:20:03 +0000"  >&lt;p&gt;As best I can tell, this was an issue with the build environment.&lt;/p&gt;

&lt;p&gt;I can reproduce this issue with the 64-bit prunsrv.exe from 1.4.0. If I rebuild that binary from the 1.4.0 tag then I don&apos;t see the issue. I even tried with a signed version in case that was triggering the issue (I couldn&apos;t see how it could be).&lt;/p&gt;

&lt;p&gt;A binary diff indicates that the files are very different. There has definitely been at least one visual studio update since I build 1.4.0.&lt;/p&gt;

&lt;p&gt;Sorry I can&apos;t be specific about what the issue is but it does appear to be resolved with the current build environment.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1s6y0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-465] prunsrv.exe (Tomcat10.exe) crash in certain cases</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-465</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Tomcat service in Windows crashes when certain java code is executed. This seems to be a Commons Daemon issue in conjunction with specific java code. The problem does occur when the code attached is executed, but not only with it. This is just the simplest way I found to recreate the problem.&lt;/p&gt;

&lt;p&gt;The same code works with Tomcat 10.1.24 (which uses Commons Daemon 1.3.4, if I&apos;m not wrong), but crashes both with 10.1.25 and 10.1.26 (both using Commons Daemon 1.4.0).&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;

&lt;p&gt;1. Download 10.1.25 or 10.1.26 Windows Installer from &lt;a href=&quot;https://tomcat.apache.org/download-10.cgi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tomcat.apache.org/download-10.cgi&lt;/a&gt; and install it.&lt;br/&gt;
2. Uncompress and build the attached maven project (helloworldsvg.zip).&lt;br/&gt;
3. Deploy the war file generated in step 2 onto the Tomcat installed in 1.&lt;br/&gt;
4. Visit &lt;a href=&quot;http://localhost:8080/helloworldsvg&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/helloworldsvg&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;No significant messages are written in the log files, and the error shown in the event viewer shows the following information:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Faulting application name: Tomcat10125.exe, version: 1.4.0.0, time stamp: 0x664770c7&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting module name: ntdll.dll, version: 10.0.22621.3733, time stamp: 0x67ca8829&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Exception code: 0xc0000409&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Fault offset: 0x000000000006d915&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting process id: 0x0xCF60&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting application start time: 0x0x1DAD29C07116CFB&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting application path: C:\Program Files\Apache Software Foundation\Tomcat 10.1_Tomcat10125\bin\Tomcat10125.exe&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting module path: C:\WINDOWS\SYSTEM32\ntdll.dll&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Report Id: 59f71851-e580-428b-84ce-d1ac220970f4&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting package full name:&#160;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting package-relative application ID:&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Based on my research, the issue seems to be related to this commit&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-daemon/commit/fed36896cbac1c7b524a047f4e973228d2d41ab7&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/commit/fed36896cbac1c7b524a047f4e973228d2d41ab7&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The tests I performed:&lt;/p&gt;

&lt;p&gt;I built prunsrv.exe in debug mode, replaced Tomcat10.exe by it, and it does not crash.&lt;/p&gt;

&lt;p&gt;I built prunsrv.exe in release mode, replaced Tomcat10.exe by it, and it does crash.&lt;/p&gt;

&lt;p&gt;I built prunsrv.exe in release mode &lt;b&gt;commenting out&lt;/b&gt; the Control Flow Guard flag introduced in that commit, and it does not crash.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For your reference, I first reported the bug in Tomcat&apos;s bugzilla: &lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=69180&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bz.apache.org/bugzilla/show_bug.cgi?id=69180&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 11 (but also occurs with Windows Server 2019)&lt;br/&gt;
JRE: IBM Semeru Runtime Open Edition (JDK) 17.0.7+7 (also occurs with 17.0.11+9)&lt;/p&gt;</environment>
        <key id="13585932">DAEMON-465</key>
            <summary>prunsrv.exe (Tomcat10.exe) crash in certain cases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="qooalt">Qoo Alt</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jul 2024 07:12:02 +0000</created>
                <updated>Fri, 19 Jul 2024 13:50:49 +0000</updated>
                            <resolved>Tue, 16 Jul 2024 16:45:31 +0000</resolved>
                                    <version>1.4.0</version>
                                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17866288" author="markt" created="Tue, 16 Jul 2024 07:58:24 +0000"  >&lt;p&gt;Thanks for the report and all the effort you have put into both debugging this and producing a simple reproducible test case. It is much appreciated.&lt;/p&gt;

&lt;p&gt;The Control Flow Guard flag was added in response to &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-429&quot; title=&quot;prunsrv.exe, and prunmgr.exe improper binary protection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-429&quot;&gt;&lt;del&gt;DAEMON-429&lt;/del&gt;&lt;/a&gt;. It is useful that you mentioned there are other triggers for this problem. That suggests the right course of action is going to depend on the JRE&apos;s compatibility with Control Flow Guard. I plan to look into that before deciding what to do here.&lt;/p&gt;</comment>
                            <comment id="17866464" author="markt" created="Tue, 16 Jul 2024 16:25:04 +0000"  >&lt;p&gt;The provided test case does not recreate the issue with Windows 2022 and Temurin 22.0.1. Next steps are to figure out which combination of OS version, Java version and Java vendor trigger this issue.&lt;/p&gt;</comment>
                            <comment id="17866472" author="markt" created="Tue, 16 Jul 2024 16:45:31 +0000"  >&lt;p&gt;Windows 2022 + Temurin 17.0.11 works.&lt;/p&gt;

&lt;p&gt;Windows 2022 + IBM 17.0.11 fails.&lt;/p&gt;

&lt;p&gt;Therefore, this looks like an issue with the IBM JRE. I suggest you raise an issue with IBM.&lt;/p&gt;

&lt;p&gt;If this issue affected multiple JREs, we&apos;d consider removing the Control Flow Guard support but since this appears to be a vendor specific issue, the expectation is that it will be addressed by the vendor.&lt;/p&gt;</comment>
                            <comment id="17867330" author="JIRAUSER306167" created="Fri, 19 Jul 2024 13:24:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt;, I&apos;ve experienced a similar problem with Temurin 17.0.11 in my Tomcat app. Unfortunately, it seems to occur randomly, so I haven&apos;t been able to recreate the issue consistently, and the message in the event viewer this time is much less verbose (see screenshot below, please).&lt;/p&gt;

&lt;p&gt;I honestly think this Control Flow Guard flag is resulting in unreliability. It&apos;s not a big deal for me, as I can just compile it from source without the flag, or just pick the former 1.3.4 Tomcat10.exe and pack and ship it with my Tomcat.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13070307/13070307_image-2024-07-19-15-18-39-984.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17867339" author="markt" created="Fri, 19 Jul 2024 13:33:34 +0000"  >&lt;p&gt;That might be unrelated. I&apos;d want to see more evidence that this issue isn&apos;t limited to IBM JREs before reverting the patch.&lt;/p&gt;</comment>
                            <comment id="17867348" author="JIRAUSER306167" created="Fri, 19 Jul 2024 13:50:49 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt; . Agreed that it might be unrelated. If I can build a reproducible case, I&apos;ll post it here, but unfortunately I can&apos;t spend much more time on it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13070184" name="helloworldsvg.zip" size="7884" author="qooalt" created="Tue, 16 Jul 2024 07:01:41 +0000"/>
                            <attachment id="13070307" name="image-2024-07-19-15-18-39-984.png" size="6290" author="qooalt" created="Fri, 19 Jul 2024 13:18:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 13 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1qd14:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-464] struct sigaction function pointer causes build failures on LLVM 15+</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-464</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Issue on FreeBSD and macOS:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;svc-unix.c:1311:20: error: incompatible function pointer types assigning to &apos;void (*)(int)&apos; from &apos;void (int, siginfo_t *, void *)&apos; (aka &apos;void (int, struct __siginfo *, void *)&apos;) [-Wincompatible-function-pointer-types]    90  act.sa_handler = controller;    91  ^ ~~~~~~~~~~ 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13579183">DAEMON-464</key>
            <summary>struct sigaction function pointer causes build failures on LLVM 15+</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="michael-o">Michael Osipov</assignee>
                                    <reporter username="michael-o">Michael Osipov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 May 2024 07:14:02 +0000</created>
                <updated>Wed, 15 May 2024 08:59:12 +0000</updated>
                            <resolved>Wed, 15 May 2024 08:59:12 +0000</resolved>
                                    <version>1.3.4</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17846375" author="michael-o" created="Tue, 14 May 2024 16:52:28 +0000"  >&lt;p&gt;This issue was created on purpose to document that the issue is not macOS specific but appear everywhere with LLVM 15+.&lt;/p&gt;</comment>
                            <comment id="17846555" author="markt" created="Wed, 15 May 2024 08:59:12 +0000"  >&lt;p&gt;It would have been sufficient to add a comment to &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-463&quot; title=&quot;Daemon fails to build on macOS with XCode 15.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-463&quot;&gt;&lt;del&gt;DAEMON-463&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13578785">DAEMON-463</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13578785">DAEMON-463</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1p7gg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-463] Daemon fails to build on macOS with XCode 15.3</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-463</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When building jsvc on macOS with XCode 15.3 (for Homebrew), the build fails with the following error:&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 jsvc-unix.c:1311:20: error: incompatible function pointer types assigning to &lt;span class=&quot;code-quote&quot;&gt;&apos;void (*)(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)&apos;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&apos;void (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, siginfo_t *, void *)&apos;&lt;/span&gt; (aka &lt;span class=&quot;code-quote&quot;&gt;&apos;void (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, struct __siginfo *, void *)&apos;&lt;/span&gt;) [-Wincompatible-function-pointer-types]    90  act.sa_handler = controller;    91  ^ ~~~~~~~~~~ &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;For more details see: &lt;a href=&quot;https://github.com/Homebrew/homebrew-core/actions/runs/8967899390/job/24626304630&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Homebrew/homebrew-core/actions/runs/8967899390/job/24626304630&lt;/a&gt;&lt;br/&gt;
&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;&#160;&lt;br/&gt;
Clang: 15.0.0 build 1500&lt;br/&gt;
macOS: 14.4.1-arm64 &lt;br/&gt;
CLT: 15.3.0.0.1.1708646388 &lt;br/&gt;
Xcode: 15.3 &lt;br/&gt;
Rosetta 2: false&lt;/p&gt;</environment>
        <key id="13578785">DAEMON-463</key>
            <summary>Daemon fails to build on macOS with XCode 15.3</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="michael-o">Michael Osipov</assignee>
                                    <reporter username="smillernl">Sean Molenaar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 May 2024 17:50:33 +0000</created>
                <updated>Wed, 15 May 2024 09:04:28 +0000</updated>
                            <resolved>Wed, 15 May 2024 09:04:28 +0000</resolved>
                                    <version>1.3.4</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17845279" author="michael-o" created="Fri, 10 May 2024 09:54:54 +0000"  >&lt;p&gt;I can confirm the issue on:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ make
(cd native; make  all)
cc -g -O2 -DOS_FREEBSD -DDSO_DLFCN -D_THREAD_SAFE -pthread -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/local/openjdk8/include -I/usr/local/openjdk8/include/freebsd -c jsvc-unix.c -o jsvc-unix.o
jsvc-unix.c:1311:20: error: incompatible function pointer types assigning to &apos;void (*)(int)&apos; from &apos;void (int, siginfo_t *, void *)&apos; (aka &apos;void (int, struct __siginfo *, void *)&apos;) [-Wincompatible-function-pointer-types]
 1311 |     act.sa_handler = controller;
      |                    ^ ~~~~~~~~~~
1 error generated.
*** Error code 1

Stop.
make[1]: stopped in /tmp/commons-daemon/src/native/unix/native
*** Error code 1

Stop.
make: stopped in /tmp/commons-daemon/src/native/unix
osipovmi@deblndw011x:/tmp/commons-daemon/src/native/unix (master =)
$ cc --version
FreeBSD clang version 17.0.6 (https://github.com/llvm/llvm-project.git llvmorg-17.0.6-0-g6009708b4367)
Target: x86_64-unknown-freebsd13.3
Thread model: posix
InstalledDir: /usr/bin
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17845280" author="michael-o" created="Fri, 10 May 2024 09:56:33 +0000"  >&lt;p&gt;Temporary fix: &lt;a href=&quot;https://github.com/freebsd/freebsd-ports/blob/e8c3e827f61838b8bd8509e3d4a6d39dfbadfdd1/devel/apache-commons-daemon/Makefile#L32-L34&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/freebsd/freebsd-ports/blob/e8c3e827f61838b8bd8509e3d4a6d39dfbadfdd1/devel/apache-commons-daemon/Makefile#L32-L34&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17845281" author="michael-o" created="Fri, 10 May 2024 10:06:54 +0000"  >&lt;p&gt;This does work:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ git diff
diff --git a/src/native/unix/native/jsvc-unix.c b/src/native/unix/native/jsvc-unix.c
index e331a0f..187e404 100644
--- a/src/native/unix/native/jsvc-unix.c
+++ b/src/native/unix/native/jsvc-unix.c
@@ -1308,7 +1308,7 @@ static int run_controller(arg_data *args, home_data *data, uid_t uid, gid_t gid)
      * These will be replaced in the child process.
      */
     memset(&amp;amp;act, &apos;\0&apos;, sizeof(act));
-    act.sa_handler = controller;
+    act.sa_sigaction = controller;
     sigemptyset(&amp;amp;act.sa_mask);
     act.sa_flags = SA_RESTART | SA_NOCLDSTOP | SA_SIGINFO;
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but I have no clue how to test/comply with: If the SA_SIGINFO flag is set in the sa_flags field, and the implementation supports the Realtime Signals Extension option or the XSI Extension option, the sa_sigaction field specifies a signal-catching function. &lt;span class=&quot;error&quot;&gt;&amp;#91;Option End&amp;#93;&lt;/span&gt;&lt;br/&gt;
from &lt;a href=&quot;https://pubs.opengroup.org/onlinepubs/009696699/functions/sigaction.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pubs.opengroup.org/onlinepubs/009696699/functions/sigaction.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17845282" author="michael-o" created="Fri, 10 May 2024 10:12:00 +0000"  >&lt;p&gt;Looking at the definition of &lt;tt&gt;siginfo_t&lt;/tt&gt; from &lt;a href=&quot;https://pubs.opengroup.org/onlinepubs/009696699/basedefs/signal.h.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pubs.opengroup.org/onlinepubs/009696699/basedefs/signal.h.html&lt;/a&gt; we already use &lt;tt&gt;si_pid&lt;/tt&gt; from the extended runtime code, so maybe it is already safe to use it?&lt;/p&gt;</comment>
                            <comment id="17846213" author="michael-o" created="Tue, 14 May 2024 07:50:39 +0000"  >&lt;p&gt;FYI: &lt;a href=&quot;https://github.com/apache/commons-daemon/pull/170&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/pull/170&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13579183">DAEMON-464</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13579183">DAEMON-464</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/Homebrew/homebrew-core/pull/168294]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1p508:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-459] Restart only works once (regression)</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-459</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;For certain functions, especially code updates, we rely on the ability to restart the child process. This seems to work only once. On the subsequent attempt, the child process hangs.&lt;/p&gt;

&lt;p&gt;I tracked down the problem and found out that the problem is within the &lt;tt&gt;jsvc-unix.c&lt;/tt&gt; file. The &lt;tt&gt;main_reload&lt;/tt&gt; function is called to send the signal to itself, but this does not happen. In the first restart, the &lt;tt&gt;controlled&lt;/tt&gt; variable holds the value of 0. This works by chance, as the signal is sent to the parent, which sends it back to the child. In the second attempt, the variable holds the PID of the previous child, thus the signal is sent to a no longer existing process.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;controlled&lt;/tt&gt; variable is used both by the parent and the child process. In earlier versions of the file, the child process determines its own PID by using the &lt;tt&gt;getpid&lt;/tt&gt; system function. This call has been &#8211; likely accidentally &#8211; removed in version 1.3.3 or earlier. Thus, the variable contains the parent&apos;s value before the fork which has created the child.&lt;/p&gt;

&lt;p&gt;The solution is simple: in the function &lt;tt&gt;child&lt;/tt&gt;, add&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160;&#160;&#160; controlled = getpid ();&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;between the &lt;tt&gt;sigaction&lt;/tt&gt; calls and the &lt;tt&gt;log_debug (&quot;Waiting for a signal to be delivered&quot;)&lt;/tt&gt; call (line 913 in my copy of the file), i.e.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160;&#160;&#160; ...&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; memset(&amp;amp;act, &apos;\0&apos;, sizeof(act));&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; act.sa_handler = handler;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; sigemptyset(&amp;amp;act.sa_mask);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; act.sa_flags = SA_RESTART | SA_NOCLDSTOP;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; sigaction(SIGHUP, &amp;amp;act, NULL);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; sigaction(SIGUSR1, &amp;amp;act, NULL);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; sigaction(SIGUSR2, &amp;amp;act, NULL);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; sigaction(SIGTERM, &amp;amp;act, NULL);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; sigaction(SIGINT, &amp;amp;act, NULL);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160;&#160;&#160; &lt;b&gt;controlled = getpid ();&lt;/b&gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; log_debug(&quot;Waiting for a signal to be delivered&quot;);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; create_tmp_file(args);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160; &#160; while (!stopping) {&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&#160;&#160;&#160; ...&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13533260">DAEMON-459</key>
            <summary>Restart only works once (regression)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="demonti">Klaus Malorny</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Apr 2023 15:43:00 +0000</created>
                <updated>Thu, 4 May 2023 19:10:32 +0000</updated>
                            <resolved>Thu, 4 May 2023 19:10:32 +0000</resolved>
                                    <version>1.3.3</version>
                                    <fixVersion>1.3.4</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17715512" author="garydgregory" created="Sun, 23 Apr 2023 19:43:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=demonti&quot; class=&quot;user-hover&quot; rel=&quot;demonti&quot;&gt;demonti&lt;/a&gt; Feel free to provide a PR on GitHub unless someone else gets to it first. @markt?&lt;/p&gt;</comment>
                            <comment id="17716140" author="JIRAUSER299952" created="Tue, 25 Apr 2023 07:33:08 +0000"  >&lt;p&gt;Come on, this is a single line to add! I&apos;ve done a few PRs in the past for other projects, but for me as a GIT novice (and hater, to say &#8211; SVN rules!), it is really a hassle.&lt;/p&gt;</comment>
                            <comment id="17716861" author="markt" created="Wed, 26 Apr 2023 18:40:01 +0000"  >&lt;p&gt;The regression appears to have been introduced in the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-339&quot; title=&quot;Patch for commons-daemon 1.0.15 to avoid shutdown failures&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-339&quot;&gt;&lt;del&gt;DAEMON-339&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/commons-daemon/commit/718787b4068f1419bf24e6851ff8138e92ddb7cb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/commit/718787b4068f1419bf24e6851ff8138e92ddb7cb&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17717125" author="markt" created="Thu, 27 Apr 2023 11:12:48 +0000"  >&lt;p&gt;I&apos;m testing this with Tomcat and I am unable to repeat the problem described. `kill -HUP &amp;lt;child-pid&amp;gt;` works as expected for repeated invocations. Note that if you request a restart within 60s of the last start, there will be a delay of 60s between the service stopping and it restarting (to prevent looping).&lt;/p&gt;

&lt;p&gt;Please provide the steps to recreate this issue using the current source code.&lt;/p&gt;

&lt;p&gt;Running with -debug is useful to see exactly what is going on during a restart.&lt;/p&gt;</comment>
                            <comment id="17717230" author="JIRAUSER299952" created="Thu, 27 Apr 2023 13:30:23 +0000"  >&lt;p&gt;Hi Mark,&lt;/p&gt;

&lt;p&gt;you cannot trigger the problem by sending signals from outside to the process. The problem is that the code tries to send a signal to itself, but fails to do so as the variable allegedly holding the own process ID simply does not. The first time it works as the variable contains 0, which sends the signal to all processes of the process group (in which the child process is contained). In the second attempt, it contains the process ID of the previous child, which no longer exists. I guess that the kill function returns an error, but it is not checked.&lt;/p&gt;

&lt;p&gt;You can alter the &lt;tt&gt;main_reload&lt;/tt&gt; function in line 1408 (et seqq.) and print out the &lt;tt&gt;controlled&lt;/tt&gt; variable, and, if you like, print the result of the kill to see what&apos;s happening. You need to trigger the call of this function from within the application, i.e.{{ DaemonController.reload () }}method in Java. I don&apos;t know whether Tomcat can be somehow prompted to do so.&lt;/p&gt;</comment>
                            <comment id="17717239" author="JIRAUSER299952" created="Thu, 27 Apr 2023 14:08:01 +0000"  >&lt;p&gt;As an attachment to this issue, I have added a small test program to reproduce the effect. It contains both the source code and the compiled classes. Go the the &quot;app&quot; directory and start it as follows:&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#000000&quot;&gt;jsvc -debug -cp &quot;build/install/app/lib/*&quot; -cwd `pwd` -pidfile /tmp/jsvc.pid Main&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;After 5 seconds, the app tries to restart itself. It only succeeds once. If anything is still unclear, please let me know.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17719501" author="markt" created="Thu, 4 May 2023 19:10:32 +0000"  >&lt;p&gt;Thanks for the test case.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13057661" name="ApacheDaemonBug.zip" size="119988" author="demonti" created="Thu, 27 Apr 2023 14:04:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1he8g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-458] The changes in DAEMON-446 cause existing DependsOn values to be removed</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-458</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-446&quot; title=&quot;Update service (//US) does not change DependsOn&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-446&quot;&gt;&lt;del&gt;DAEMON-446&lt;/del&gt;&lt;/a&gt; a regression was introduced that causes existing service DependsOn services to be removed when working with the //US option.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Replication:&lt;/p&gt;

&lt;p&gt;Run:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
prunsrv.exe &lt;span class=&quot;code-comment&quot;&gt;//IS/MyService --Startup=auto --Description=MyService --DisplayName=MyService
&lt;/span&gt;sc config MyService depend=Tcpip/Afd/Dhcp &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;View the services and note that &lt;b&gt;MyService&lt;/b&gt; depends on Dhcp (the sc config command is being used to represent a separate script call)&lt;/p&gt;

&lt;p&gt;Now run:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
prunsrv.exe &lt;span class=&quot;code-comment&quot;&gt;//US/MyService --Startup=manual &lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;View the services and note that MyService no longer depends on Dhcp&lt;/p&gt;

&lt;p&gt;The offending code appears to be the following in service.c:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;/* Add the mandatory dependencies */&lt;/span&gt;
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lpDependencies) {
&#160; &#160; &#160; &#160; lpDependencies = apxMultiSzCombine(NULL, lpDependencies,
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;L&lt;span class=&quot;code-quote&quot;&gt;&quot;Tcpip\0Afd\0&quot;&lt;/span&gt;, NULL);
&#160; &#160; } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
&#160; &#160; &#160; &#160; lpDependencies = L&lt;span class=&quot;code-quote&quot;&gt;&quot;Tcpip\0Afd\0&quot;&lt;/span&gt;;
&#160; &#160; }&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which means if DependsOn isn&apos;t defined we&apos;ll always pass down Tcpip and Afd, vs the NULL that happened before. Wiping existing custom dependancies out.&lt;/p&gt;

&lt;p&gt;I didn&apos;t test it but this code may not work properly with the &#8211; vs ++ logic defined under &lt;a href=&quot;https://commons.apache.org/proper/commons-daemon/procrun.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-daemon/procrun.html&lt;/a&gt; The &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-446&quot; title=&quot;Update service (//US) does not change DependsOn&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-446&quot;&gt;&lt;del&gt;DAEMON-446&lt;/del&gt;&lt;/a&gt; ticket talks about --DependsOn (full replace) although I only see ++Depends on documented, so maybe &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-446&quot; title=&quot;Update service (//US) does not change DependsOn&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-446&quot;&gt;&lt;del&gt;DAEMON-446&lt;/del&gt;&lt;/a&gt; was actually invalid to begin with?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13532386">DAEMON-458</key>
            <summary>The changes in DAEMON-446 cause existing DependsOn values to be removed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="brianandle">Brian Andle</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Apr 2023 17:39:05 +0000</created>
                <updated>Fri, 12 May 2023 13:37:32 +0000</updated>
                            <resolved>Thu, 20 Apr 2023 18:32:02 +0000</resolved>
                                    <version>1.3.2</version>
                    <version>1.3.3</version>
                                    <fixVersion>1.3.4</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17714527" author="markt" created="Thu, 20 Apr 2023 10:43:07 +0000"  >&lt;p&gt;Thanks for the report. I can repeat this issue. Procrun isn&apos;t taking into account any changes that may have been made to the service configuration outside of Procrun. I&apos;ll see if it is possible to do anything about that although part of me is thinking that the service should either be managed using procrun or externally to procrun and that a mix of both approaches is asking for trouble to some extent.&lt;br/&gt;
Note that the &apos;++&apos; and &apos;--&apos; variations of &apos;DependsOn&apos; both work as expected.&lt;/p&gt;</comment>
                            <comment id="17714583" author="markt" created="Thu, 20 Apr 2023 12:50:43 +0000"  >&lt;p&gt;It is fairly simple to fix things so dependencies can be managed either via &apos;sc config ...&apos; or via &apos;DependsOn&apos;. I&apos;l commit a fix shortly that does that. Note that once &apos;DependsOn&apos; has been used with a service, any value set will override anything set via `sc config` the next time &apos;//US&apos; is used.&lt;/p&gt;

&lt;p&gt;Being able to &apos;sc config ...&apos; and &apos;DependsOn&apos; interchangeably looks to be a lot trickier. I&apos;m not at the point yet where I think the solution is documenting that this isn&apos;t supported but it is certainly a possibility.&lt;/p&gt;</comment>
                            <comment id="17714590" author="JIRAUSER287474" created="Thu, 20 Apr 2023 13:09:39 +0000"  >&lt;p&gt;Can we tell if DependsOn has been passed in on the command line? I.e. pass NULL to the existing method if the the DependsOn isn&apos;t explicitly passed in when //US is used? Since //US didn&apos;t used to impact values that weren&apos;t explicitly passed.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Not supporting the ++DependsOn and sc makes complete sense to me, should be documented, but modifying attributes not passed in the command doesn&apos;t make sense to me.&lt;/p&gt;</comment>
                            <comment id="17714708" author="markt" created="Thu, 20 Apr 2023 18:32:02 +0000"  >&lt;p&gt;It turns out pretty much all of the plumbing to get this working was in place, I just had to switch the code to use the existing service dependencies in the registry rather than maintaining its own, separate registry entry.&lt;/p&gt;</comment>
                            <comment id="17714718" author="JIRAUSER287474" created="Thu, 20 Apr 2023 19:03:08 +0000"  >&lt;p&gt;Cool. Thanks for digging into, and fixing, this Mark.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1h8vc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-457] Tomcat9.exe crash in windows server 2016 and 2019 while updating service.</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-457</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Tomcat9.exe crash in windows server 2016 and 2019 while updating service. We have observer issue from Tomcat 9 version 9.0.70 and above. It was working fine with Tomcat version 9.0.69.&lt;/p&gt;

&lt;p&gt;Environment details:&lt;br/&gt;
OS: Windows server 2016 and 2019&lt;br/&gt;
Disk space: More than 80 GB&lt;br/&gt;
RAM: 8GB and more&lt;/p&gt;

&lt;p&gt;VC Redist x64: 14.29.30139.0&lt;/p&gt;

&lt;p&gt;Tomcat service details:&lt;br/&gt;
JvmMs=512&lt;br/&gt;
JvmMx=3076&lt;/p&gt;

&lt;p&gt;After creating tomcat service, We run below command to update service with JavaOption9&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Tomcat9 &lt;span class=&quot;code-comment&quot;&gt;//US//Tomcat9 ++JvmOptions9 --add-opens=java.base/java.lang.reflect=ALL-UNNAMED#--add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED#--add-opens=java.base/java.lang.annotation=ALL-UNNAMED#--add-opens=java.base/java.util.Date=ALL-UNNAMED#--add-opens=java.base/java.io=ALL-UNNAMED#--add-opens=java.base/java.util=ALL-UNNAMED#--add-opens=java.base/java.util.concurrent=ALL-UNNAMED#--add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED#--add-opens=java.base/java.math=ALL-UNNAMED#--add-opens=java.base/java.text=ALL-UNNAMED#--add-opens=java.base/javax.net.ssl=ALL-UNNAMED#--add-opens=java.base/java.time=ALL-UNNAMED&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Above command fails with below crash in EventViewer:&lt;/p&gt;

&lt;p&gt;Faulting application name: tomcat9.exe, version: 1.3.3.0, time stamp: 0x637e7ca5&lt;br/&gt;
Faulting module name: ntdll.dll, version: 10.0.17763.2237, time stamp: 0x65420ea4&lt;br/&gt;
Exception code: 0xc0000374&lt;br/&gt;
Fault offset: 0x00000000000fa979&lt;br/&gt;
Faulting process id: 0x298&lt;br/&gt;
Faulting application start time: 0x01d967f65ac00dce&lt;br/&gt;
Faulting application path: C:\Program Files\DELL\WMS\Tomcat-9\bin\tomcat9.exe&lt;br/&gt;
Faulting module path: C:\Windows\SYSTEM32\ntdll.dll&lt;br/&gt;
Report Id: 28b620b5-f3a0-40c3-99ae-962cab71bab8&lt;br/&gt;
Faulting package full name:&#160;&lt;/p&gt;

&lt;p&gt;Please let me know if you need any more details.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Server 2016 and 2019&lt;/p&gt;</environment>
        <key id="13531838">DAEMON-457</key>
            <summary>Tomcat9.exe crash in windows server 2016 and 2019 while updating service.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dmkothadiya">Denish Kothadiya</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Apr 2023 08:34:32 +0000</created>
                <updated>Fri, 10 May 2024 10:56:48 +0000</updated>
                            <resolved>Fri, 10 May 2024 10:56:48 +0000</resolved>
                                    <version>1.3.3</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17709704" author="garydgregory" created="Fri, 7 Apr 2023 14:49:15 +0000"  >&lt;p&gt;Are you reporting against 1.3.2 or 1.3.3?&lt;/p&gt;</comment>
                            <comment id="17710380" author="JIRAUSER299740" created="Tue, 11 Apr 2023 03:04:49 +0000"  >&lt;p&gt;I am reporting against 1.3.3. I have corrected version.&#160;&lt;/p&gt;</comment>
                            <comment id="17710388" author="garydgregory" created="Tue, 11 Apr 2023 03:46:48 +0000"  >&lt;p&gt;A debug or trace log for Commons Daemon would help.&lt;/p&gt;</comment>
                            <comment id="17710848" author="JIRAUSER299740" created="Tue, 11 Apr 2023 09:33:03 +0000"  >&lt;p&gt;This issue observed before starting service. Once we create service using service.bat file then we run command to update service. While executing update service command it through above error and command fails to update service.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Please find attached entire log folder.&lt;/p&gt;</comment>
                            <comment id="17714221" author="markt" created="Wed, 19 Apr 2023 17:20:09 +0000"  >&lt;p&gt;This works for me with Tomcat 9.0.74.&lt;/p&gt;

&lt;p&gt;Please provide detailed steps to reproduce this issue from a clean install of the latest version of any currently supported version of Tomcat.&lt;/p&gt;

&lt;p&gt;Without steps to reproduce, this issue will eventually gets resolved as &quot;Cannot reproduce&quot;.&lt;/p&gt;</comment>
                            <comment id="17714693" author="JIRAUSER299740" created="Thu, 20 Apr 2023 17:29:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt; It is not reproducible on each machine. When we install tomcat service and then execute service update command crash tomcat. If you want then I can setup a call to show you the issue.&lt;/p&gt;</comment>
                            <comment id="17718446" author="JIRAUSER299740" created="Tue, 2 May 2023 06:23:24 +0000"  >&lt;p&gt;Steps to reproduce:&#160;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Copy tomcat 9.0.70 or higher version binaries on system.&lt;/li&gt;
	&lt;li&gt;Open command prompt and CD Tomcat9\bin directory&lt;/li&gt;
	&lt;li&gt;SET JAVA_HOME and CATALINA_HOME in command prompt&lt;/li&gt;
	&lt;li&gt;Install tomcat service from command prompt using service.bat command: Serivce.bat Install&lt;/li&gt;
	&lt;li&gt;Update service using below command from same command prompt:&#160;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Tomcat9 //US//Tomcat9 ++JvmOptions9 &lt;del&gt;{&lt;/del&gt;}add-opens=java.base/java.lang.reflect=ALL-UNNAMED#&lt;del&gt;{&lt;/del&gt;}add-opens=java.base/jdk.internal.reflect=ALL-UNNAMED#&lt;del&gt;{&lt;/del&gt;}add-opens=java.base/java.lang.annotation=ALL-UNNAMED#&lt;del&gt;{&lt;/del&gt;}add-opens=java.base/java.util.Date=ALL-UNNAMED#&lt;del&gt;{&lt;/del&gt;}add-opens=java.base/java.io=ALL-UNNAMED#&lt;del&gt;{&lt;/del&gt;}add-opens=java.base/java.util=ALL-UNNAMED#&lt;del&gt;{&lt;/del&gt;}add-opens=java.base/java.util.concurrent=ALL-UNNAMED#&lt;del&gt;{&lt;/del&gt;}add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED#&lt;del&gt;{&lt;/del&gt;}add-opens=java.base/java.math=ALL-UNNAMED#&lt;del&gt;{&lt;/del&gt;}add-opens=java.base/java.text=ALL-UNNAMED#&lt;del&gt;{&lt;/del&gt;}add-opens=java.base/javax.net.ssl=ALL-UNNAMED#{-}-add-opens=java.base/java.time=ALL-UNNAMED&lt;/p&gt;</comment>
                            <comment id="17719457" author="markt" created="Thu, 4 May 2023 17:54:02 +0000"  >&lt;p&gt;I have followed the provided steps and am unable to recreate the issue on a fully patched Windows 2019 server. I also tried running the same command multiple times (~20) and generated a really long list of Java 9 options in the registry without any error being reported.&lt;/p&gt;

&lt;p&gt;It looks very much like there is something else about the environment on the affected machines that is triggering the issue.&lt;/p&gt;

&lt;p&gt;More detail about the issue when it happens (Does it happen for any option? Is it related to the length of the added value? Is it related to the total length of the new value? etc.) may help us narrow down where the problem may be.&lt;/p&gt;</comment>
                            <comment id="17845293" author="markt" created="Fri, 10 May 2024 10:56:48 +0000"  >&lt;p&gt;This can be re-opened if steps are provided to recreate this issue on a clean install of any currently supported Windows OS.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13057187" name="logs.zip" size="10755" author="dmkothadiya" created="Tue, 11 Apr 2023 09:59:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1h5i0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-456] Prunsrv.exe delete service doesn&apos;t work from the batch script</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-456</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I have been using prunsrv 1.0.15 on a Windows Server, and the delete service command worked perfectly. However, after upgrading to version 1.3.3, the same command has stopped functioning when executed from a script.&lt;/p&gt;

&lt;p&gt;Although the delete command works as expected when run from an admin CMD terminal, I checked the 1.3.3 documentation and found no changes in the delete syntax. This makes me wonder if the issue stems from new security checks added in version 1.3.3 or if there are other reasons for this problem. I would appreciate any assistance or insights on this issue. Thanks in advance!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13530986">DAEMON-456</key>
            <summary>Prunsrv.exe delete service doesn&apos;t work from the batch script</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10009">Works for Me</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="yichunzhao">YICHUN ZHAO</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Mar 2023 14:29:40 +0000</created>
                <updated>Wed, 19 Apr 2023 10:16:56 +0000</updated>
                            <resolved>Wed, 19 Apr 2023 10:16:56 +0000</resolved>
                                    <version>1.3.3</version>
                                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17708539" author="garydgregory" created="Tue, 4 Apr 2023 18:48:40 +0000"  >&lt;p&gt;Please post a debug log.&lt;/p&gt;</comment>
                            <comment id="17714039" author="markt" created="Wed, 19 Apr 2023 10:16:56 +0000"  >&lt;p&gt;The Tomcat service.bat script happily adds and deletes the service. This looks like a configuration (permissions?) issue. Please use the Commons users@ mailing list if you require further support.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1h09c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-455] Windows executable prunsrv.exe has an expired certificate</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-455</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The Windows executable file named prunsrv.exe has an expired certificate as seen in the attached image.&#160; The certificate was valid from 1/13/2022 to 1/14/2023.&#160; One thing I noticed is that the Windows executable file named prunmgr.exe has a certificate that is valid from 9/30/2022 to 11/21/2033.&#160; If possible it would be great to use the same certificate, or set the expiry of the one in prunsrv.exe to be 10 years out as well.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows server&lt;/p&gt;</environment>
        <key id="13527666">DAEMON-455</key>
            <summary>Windows executable prunsrv.exe has an expired certificate</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="krmurphy">Kristin Murphy</reporter>
                        <labels>
                            <label>certificate</label>
                            <label>prunsrv</label>
                    </labels>
                <created>Wed, 8 Mar 2023 16:30:41 +0000</created>
                <updated>Thu, 9 Mar 2023 04:09:14 +0000</updated>
                            <resolved>Wed, 8 Mar 2023 16:50:56 +0000</resolved>
                                    <version>1.3.3</version>
                                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17698008" author="markt" created="Wed, 8 Mar 2023 16:50:56 +0000"  >&lt;p&gt;The signatures are valid. The expiry date of the certificate does not affect the validity of the signature.&lt;/p&gt;

&lt;p&gt;Further the prunmgr.exe and prunsrv.exe binaries from 1.3.3 are signed with the exactly the same certificate.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13056170" name="prunsrv-expired-certificate.png" size="52719" author="krmurphy" created="Wed, 8 Mar 2023 16:23:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>english</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1gfsg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-454] Error 1084 in windows safe mode</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-454</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Hi , I was trying to run a windows service under safe mode of windows. Unfortunately I got 1084 error. I added my java project as jnaReg.rar . I tried commenting out this part in my code but no avail:&lt;/p&gt;

&lt;p&gt;```&lt;br/&gt;
// public static void registerHandler(){&lt;br/&gt;
// Winsvc.SERVICE_STATUS_HANDLE service_status_handle = Advapi32.INSTANCE.RegisterServiceCtrlHandlerEx(&quot;hvldlpxpa&quot;, new Winsvc.HandlerEx() {&lt;br/&gt;
// @Override&lt;br/&gt;
// public int callback(int i, int i1, Pointer pointer, Pointer pointer1) {&lt;br/&gt;
// System.out.println&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
// if(i == 1)&lt;/p&gt;
{
// return 1;
// }
&lt;p&gt;// return 120;&lt;br/&gt;
// }&lt;br/&gt;
// }, Pointer.NULL);&lt;br/&gt;
// }&lt;br/&gt;
```&lt;br/&gt;
Using java 19, prunsrv 1.3.3 .&#160;&lt;br/&gt;
My typical register command is :&lt;br/&gt;
````&lt;br/&gt;
prunsrv.exe //IS/Test --DisplayName=xpa --Description=h --Startup=manual --Jvm=&quot;pathToJvmDll&quot; --Classpath=C:\Users\bunsal\IdeaProjects\jnaReg\target\JNA-jar-with-dependencies.jar --StartClass=Main --StopClass=Main --StartMode=jvm --StopMode=jvm --StopMethod=stopService --StartMethod=main --LogLevel=Debug --ServiceUser=LocalSystem&#160;&lt;br/&gt;
````&lt;br/&gt;
(Looks like default service user is changed from localsystem to local service (compared to v1.1))&lt;br/&gt;
Added commons-daemon log, and video of nothing being changed on windows event viewer.&#160;&lt;br/&gt;
What should I do?&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 19.0.2&lt;/p&gt;

&lt;p&gt;prunsrv 1.3.3&#160;&lt;/p&gt;

&lt;p&gt;Windows 10 19043.928&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</environment>
        <key id="13527639">DAEMON-454</key>
            <summary>Error 1084 in windows safe mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lapaz17">Baris</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Mar 2023 12:49:32 +0000</created>
                <updated>Wed, 8 Mar 2023 16:57:01 +0000</updated>
                            <resolved>Wed, 8 Mar 2023 16:57:01 +0000</resolved>
                                    <version>1.3.3</version>
                                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17698011" author="markt" created="Wed, 8 Mar 2023 16:57:01 +0000"  >&lt;p&gt;You&apos;ll need to configure your service to start in safe mode. See &lt;a href=&quot;https://superuser.com/questions/1497924/how-to-disable-certain-services-from-running-in-safe-mode-but-run-in-normal-boot&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://superuser.com/questions/1497924/how-to-disable-certain-services-from-running-in-safe-mode-but-run-in-normal-boot&lt;/a&gt; for an example of how to do this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13056162" name="2023-03-08 15-32-14.mkv" size="955208" author="lapaz17" created="Wed, 8 Mar 2023 12:36:38 +0000"/>
                            <attachment id="13056160" name="Untitled.png" size="883809" author="lapaz17" created="Wed, 8 Mar 2023 12:40:30 +0000"/>
                            <attachment id="13056159" name="WinverUntitled.png" size="932078" author="lapaz17" created="Wed, 8 Mar 2023 12:49:30 +0000"/>
                            <attachment id="13056161" name="commons-daemon.2023-03-08.log" size="19765" author="lapaz17" created="Wed, 8 Mar 2023 12:38:45 +0000"/>
                            <attachment id="13056163" name="jnaReg.rar" size="8006" author="lapaz17" created="Wed, 8 Mar 2023 12:34:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 33 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1gfmg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-451] Prunsrv does not use configured stack size for the main thread in jvm mode</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-451</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;This issue was originally reported for Apache Tomcat, see&lt;br/&gt;
&lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=66327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bz.apache.org/bugzilla/show_bug.cgi?id=66327&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;A user provided a sample web application (see BZ 66327 attachment 38426). This web application was deployed on Apache Tomcat 9.0.70 (uses Commons Daemon 1.3.3), configured as a Windows Service.&lt;/p&gt;

&lt;p&gt;The sample application performs a deep recursion at startup, that prints numbers from 1 up to 25000. In the default configuration it fails with a StackOverflowError.&lt;/p&gt;

&lt;p&gt;To reproduce:&lt;br/&gt;
1. Build the sample web application:&lt;br/&gt;
1.1. Download it from BZ 66327 (attachment 38426).&lt;br/&gt;
1.2. Change its pom.xml file, removing &quot;jersey-container-servlet&quot; from dependencies. I do not know why it is there, it is not needed.&lt;br/&gt;
1.3. Build it with Apache Maven (`mvn package`). The result is target/TestStack-1.0-SNAPSHOT.war&lt;/p&gt;

&lt;p&gt;2. Install Apache Tomcat 9 on Windows as a service:&lt;br/&gt;
2.1. Download and run the &quot;32-bit/64-bit Windows Service Installer&quot; (*.exe) from&lt;br/&gt;
&lt;a href=&quot;https://tomcat.apache.org/download-90.cgi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tomcat.apache.org/download-90.cgi&lt;/a&gt;&lt;br/&gt;
2.2. Run it. Use default options, but once installation finishes choose to do not start the service.&lt;/p&gt;

&lt;p&gt;3. Deploy the web appplication on Tomcat:&lt;br/&gt;
3.1. Copy the war file into webapps directory of Tomcat.&lt;/p&gt;

&lt;p&gt;4. Go into the bin directory of Tomcat and run prunmgr (tomcat9w.exe).&lt;/p&gt;

&lt;p&gt;5. Start Tomcat service, from the first page of prunmgr dialog.&lt;/p&gt;

&lt;p&gt;6. See the files in the logs directory of Tomcat.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;See the localhost.2022-&lt;b&gt;{&lt;/b&gt;}-{&lt;b&gt;}&lt;/b&gt;.log file for a StackOverflowError&lt;/li&gt;
	&lt;li&gt;See the tomcat9-stdout.2022-&lt;b&gt;-&lt;/b&gt;*.log file for recursion counter.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If the web application starts successfully, there will be no StackOverflowError, and the counter will go up to 25000.&lt;/p&gt;

&lt;p&gt;If the web application fails to start, there will be a StackOverflowError, and the recursion counter will stop at some value, usually somewhere around 15000.&lt;/p&gt;

&lt;p&gt;7. Try to increase the stack size:&lt;br/&gt;
7.1. Stop the service. Clear the files in the logs directory.&lt;br/&gt;
7.2. In prunmgr dialog (page &quot;Java&quot;) change &quot;Thread stack size&quot; to a higher value, e.g. 3072.&lt;br/&gt;
7.3. Do not forget to press the &quot;Apply&quot; button.&lt;br/&gt;
7.4. Start the service.&lt;/p&gt;

&lt;p&gt;Expected behaviour:&lt;br/&gt;
It is expected that changing the &quot;Thread stack size&quot; value to a higher value would eventually allow the web application to start successfully.&lt;/p&gt;

&lt;p&gt;Actual behaviour:&lt;br/&gt;
It makes no difference.&lt;/p&gt;

&lt;p&gt;If I reconfigure Tomcat to use a thread pool when starting web applications, instead of using the main thread, the behaviour changes to the expected one.  E.g. if you add startStopThreads=&quot;3&quot; to a Host element in its conf/server.xml file. See Configuration Reference here:&lt;br/&gt;
&lt;a href=&quot;https://tomcat.apache.org/tomcat-9.0-doc/config/host.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tomcat.apache.org/tomcat-9.0-doc/config/host.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note: procrun here runs in jvm mode. The configuration for Tomcat is as follows (see bin/service.bat file):&lt;/p&gt;

&lt;p&gt;--StartMode jvm&lt;br/&gt;
--StopMode jvm&lt;br/&gt;
--StartClass org.apache.catalina.startup.Bootstrap&lt;br/&gt;
--StopClass org.apache.catalina.startup.Bootstrap&lt;br/&gt;
--StartParams start&lt;br/&gt;
--StopParams stop&lt;/p&gt;</description>
                <environment></environment>
        <key id="13510687">DAEMON-451</key>
            <summary>Prunsrv does not use configured stack size for the main thread in jvm mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kkolinko">Konstantin Kolinko</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Dec 2022 02:33:59 +0000</created>
                <updated>Wed, 19 Apr 2023 09:48:49 +0000</updated>
                            <resolved>Wed, 19 Apr 2023 09:48:49 +0000</resolved>
                                    <version>1.3.3</version>
                                    <fixVersion>1.3.4</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17644580" author="kkolinko" created="Thu, 8 Dec 2022 02:51:06 +0000"  >&lt;p&gt;Attached a patch (0001-Fix-&lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-451&quot; title=&quot;Prunsrv does not use configured stack size for the main thread in jvm mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-451&quot;&gt;&lt;del&gt;DAEMON-451&lt;/del&gt;&lt;/a&gt;.-Honor-the-stack-size-option-when-cre.patch). Not tested.&lt;/p&gt;</comment>
                            <comment id="17644587" author="garydgregory" created="Thu, 8 Dec 2022 03:26:49 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkolinko&quot; class=&quot;user-hover&quot; rel=&quot;kkolinko&quot;&gt;kkolinko&lt;/a&gt; and all,&lt;/p&gt;

&lt;p&gt;Thank you for your report and patch.&lt;/p&gt;

&lt;p&gt;I wonder if the patch should guard against ridiculously large stack size requests.&lt;/p&gt;</comment>
                            <comment id="17644804" author="kkolinko" created="Thu, 8 Dec 2022 13:17:33 +0000"  >&lt;p&gt;&amp;gt; I wonder if the patch should guard against ridiculously large stack size requests.&lt;/p&gt;

&lt;p&gt;1. Documentation for CreateThread &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; does not mention any limit.&lt;/p&gt;

&lt;p&gt;2. It looks that it makes sense to add &quot;STACK_SIZE_PARAM_IS_A_RESERVATION&quot; flag to the CreateThread call at few lines below the patch, in addition to the CREATE_SUSPENDED flag that is already used there.&lt;/p&gt;

&lt;p&gt;The &quot;STACK_SIZE_PARAM_IS_A_RESERVATION&quot; flag, as documented in &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, allows to reserve the memory instead of allocating (&quot;committing&quot;) it immediately, and thus will allow to run with larger values. See also &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;I think that adding this flag may help with statring the &quot;stop&quot; thread, as it may to run in limited memory conditions.&lt;/p&gt;

&lt;p&gt;I wonder whether JRE uses this flag when creating its own threads.&lt;/p&gt;

&lt;p&gt;Other mentions of this flag:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; A discussion of how this flag was added to Mozilla&apos;s NSPR (Netscape Portable Runtime) 8 years ago, and mentions that it exists since Windows NT.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; An example of using this flag in Apache Http Server.&lt;/p&gt;

&lt;p&gt;3. The default for szStackSize was capped at 2Mb with r997298 &lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt;. I wonder whether it was seen as the limit of being &quot;ridiculously large&quot; 10 years ago. And now we have a user who likes to use 3Mb.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://learn.microsoft.com/en-us/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://learn.microsoft.com/en-us/windows/win32/procthread/thread-stack-size&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://learn.microsoft.com/en-us/windows/win32/procthread/thread-stack-size&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=958796&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugzilla.mozilla.org/show_bug.cgi?id=958796&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://svn.apache.org/viewvc/httpd/httpd/trunk/server/mpm/winnt/mpm_winnt.c?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/viewvc/httpd/httpd/trunk/server/mpm/winnt/mpm_winnt.c?view=markup&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/commons-daemon/commit/42a805aa&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/commit/42a805aa&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=997298&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/viewvc?view=revision&amp;amp;revision=997298&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17714025" author="markt" created="Wed, 19 Apr 2023 09:48:49 +0000"  >&lt;p&gt;Thanks for the research and the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13053648" name="0001-Fix-DAEMON-451.-Honor-the-stack-size-option-when-cre.patch" size="1239" author="kkolinko" created="Thu, 8 Dec 2022 02:50:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1djjk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-450] Invoked &quot;bin\tomcat9 //US/Tomcat9&quot;, logs directory will be inserted unwanted two ACLs</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-450</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Invoked &quot;bin\tomcat9 //US/Tomcat9&quot;, logs directory will be inserted unwanted two ACLs.&lt;/p&gt;

&lt;p&gt;Repro at Tomcat9 directory on Admin Command Prompt (not Admin PowerShell).&lt;/p&gt;

&lt;p&gt;&amp;gt; ren logs logs1&lt;/p&gt;

&lt;p&gt;&amp;gt; md logs&lt;/p&gt;

&lt;p&gt;&amp;gt; icacls logs&lt;/p&gt;

&lt;p&gt;logs NT AUTHORITY\Authenticated Users:(I)(OI)(CI)(M)&lt;br/&gt;
     NT AUTHORITY\SYSTEM:(I)(OI)(CI)(F)&lt;br/&gt;
     BUILTIN\Administrators:(I)(OI)(CI)(F)&lt;br/&gt;
     BUILTIN\Users:(I)(OI)(CI)(M)&lt;/p&gt;

&lt;p&gt;&amp;gt; bin\tomcat9.exe //US/Tomcat9&lt;/p&gt;

&lt;p&gt;&amp;gt; icacls logs&lt;/p&gt;

&lt;p&gt;logs NT AUTHORITY\LOCAL SERVICE:(RX,W)&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(OI)(CI)(IO)(GR,GW,GE)&lt;br/&gt;
     NT AUTHORITY\Authenticated Users:(I)(OI)(CI)(M)&lt;br/&gt;
     NT AUTHORITY\SYSTEM:(I)(OI)(CI)(F)&lt;br/&gt;
     BUILTIN\Administrators:(I)(OI)(CI)(F)&lt;br/&gt;
     BUILTIN\Users:(I)(OI)(CI)(M)&lt;/p&gt;

&lt;p&gt;&amp;gt; bin\tomcat9.exe //US/Tomcat9&lt;/p&gt;

&lt;p&gt;&amp;gt; icacls logs&lt;/p&gt;

&lt;p&gt;logs NT AUTHORITY\LOCAL SERVICE:(RX,W)&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(OI)(CI)(IO)(GR,GW,GE)&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(RX,W)&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(OI)(CI)(IO)(GR,GW,GE)&lt;br/&gt;
     NT AUTHORITY\Authenticated Users:(I)(OI)(CI)(M)&lt;br/&gt;
     NT AUTHORITY\SYSTEM:(I)(OI)(CI)(F)&lt;br/&gt;
     BUILTIN\Administrators:(I)(OI)(CI)(F)&lt;br/&gt;
     BUILTIN\Users:(I)(OI)(CI)(M)&lt;/p&gt;

&lt;p&gt;&amp;gt; for /l %i in (1,0,1) do bin\tomcat9.exe //US/Tomcat9&lt;/p&gt;

&lt;p&gt;  : (...after 1000-2000 times...)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2022-11-18 17:46:20&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;warn&amp;#93;&lt;/span&gt;  [ 2456] Failed to grant service user &apos;NT AUTHORITY\LocalService&apos; write permissions to log path &apos;&amp;lt;full/path/to/tomcat9&amp;gt;\logs&apos; due to error &apos;1340: The inherited access control list (ACL) or access control entry (ACE) could not be built.&apos;&lt;br/&gt;
  :&lt;/p&gt;

&lt;p&gt;&amp;gt; icacls logs&lt;br/&gt;
logs NT AUTHORITY\LOCAL SERVICE:(RX,W)&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(OI)(CI)(IO)(GR,GW,GE)&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(RX,W)&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(OI)(CI)(IO)(GR,GW,GE)&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(RX,W)&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(OI)(CI)(IO)(GR,GW,GE)&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(RX,W)&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(OI)(CI)(IO)(GR,GW,GE)&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(RX,W)&lt;br/&gt;
  :&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(RX,W)&lt;br/&gt;
     NT AUTHORITY\LOCAL SERVICE:(OI)(CI)(IO)(GR,GW,GE)&lt;br/&gt;
     NT AUTHORITY\Authenticated Users:(I)(OI)(CI)(M)&lt;br/&gt;
     NT AUTHORITY\SYSTEM:(I)(OI)(CI)(F)&lt;br/&gt;
     BUILTIN\Administrators:(I)(OI)(CI)(F)&lt;br/&gt;
     BUILTIN\Users:(I)(OI)(CI)(M)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 SP1 x64&lt;/p&gt;

&lt;p&gt;Apache Tomcat 9.0.69 x86 (zip-dist)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</environment>
        <key id="13503601">DAEMON-450</key>
            <summary>Invoked &quot;bin\tomcat9 //US/Tomcat9&quot;, logs directory will be inserted unwanted two ACLs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="norimy">Norimasa Yamamoto</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Nov 2022 13:52:00 +0000</created>
                <updated>Thu, 24 Nov 2022 22:53:31 +0000</updated>
                            <resolved>Tue, 22 Nov 2022 19:10:10 +0000</resolved>
                                    <version>1.3.2</version>
                                    <fixVersion>1.3.3</fixVersion>
                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17637016" author="JIRAUSER298397" created="Tue, 22 Nov 2022 06:31:21 +0000"  >&lt;p&gt;Easy fix for above. (only changing GRANT_ACCESS to SET_ACCESS in src\native\windows\src\security.c)&lt;/p&gt;

&lt;p&gt;However, still have two leaks at GetNamedSecurityInfoW&apos;s pSD and SetEntriesInAcl&apos;s pNewDACL.&lt;br/&gt;
They will need to free by LocalFree. see C++ sample.&lt;br/&gt;
&lt;a href=&quot;https://learn.microsoft.com/en-us/windows/win32/secauthz/modifying-the-acls-of-an-object-in-c--&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://learn.microsoft.com/en-us/windows/win32/secauthz/modifying-the-acls-of-an-object-in-c--&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
--- security.c &#160; &#160;Sun Sep 18 13:49:42 2022
+++ security.c &#160; &#160;Tue Nov 22 14:15:13 2022
@@ -81,5 +81,5 @@
&#160; &#160; &#160;ZeroMemory(&amp;amp;ea, sizeof(EXPLICIT_ACCESS));
&#160; &#160; &#160;ea.grfAccessPermissions = GENERIC_EXECUTE + GENERIC_READ + GENERIC_WRITE;
- &#160; &#160;ea.grfAccessMode = GRANT_ACCESS;
+ &#160; &#160;ea.grfAccessMode = SET_ACCESS;
&#160; &#160; &#160;ea.grfInheritance = CONTAINER_INHERIT_ACE + OBJECT_INHERIT_ACE;
&#160; &#160; &#160;ea.Trustee.TrusteeForm = TRUSTEE_IS_NAME;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17637393" author="markt" created="Tue, 22 Nov 2022 18:01:18 +0000"  >&lt;p&gt;The original report was for Windows 7 which is no longer supported.&lt;/p&gt;

&lt;p&gt;This behaviour is not observed with a fully patched Windows 8.1 or fully patched Windows 10. I can repeat this with Windows Server 2012.&lt;/p&gt;

&lt;p&gt;I&apos;ll take a look at the proposed patch.&lt;/p&gt;</comment>
                            <comment id="17637426" author="markt" created="Tue, 22 Nov 2022 19:10:10 +0000"  >&lt;p&gt;Thanks for the proposed patch and the information on the leaks.&lt;/p&gt;</comment>
                            <comment id="17638429" author="JIRAUSER298397" created="Thu, 24 Nov 2022 22:53:31 +0000"  >&lt;p&gt;I red the diff.&lt;/p&gt;

&lt;p&gt;It will be missing the NULL iinitialization for doing &#8221;cleanup&#8221; block.&lt;/p&gt;

&lt;p&gt;Sorry if you were already fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 47 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1cbuw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-449] Prunsrv fails to stop Open Liberty Windows service</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-449</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;&amp;lt; &lt;b&gt;Update&lt;/b&gt; . The reason the stop fails is because the start hasn&apos;t finished.&#160; Prunsrv isn&apos;t waiting for the start to finish.&#160; So in the Windows services panel, the service appears to be started.&#160; If you then click stop, it hangs for a few minutes and fails to stop.&#160; The state at this point in the Windows services is &quot;Stopping&quot;.&#160; So you have to manually stop the process. &amp;gt;&lt;/p&gt;

&lt;p&gt;When Prunsrv is used to register Open Liberty (&lt;a href=&quot;https://openliberty.io/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://openliberty.io&lt;/a&gt;) as a Windows Service, stopping the service hangs randomly.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;To recreate the problem:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160; 1) Download open liberty&#160; ~300MB&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; &#160; &#160;&lt;a href=&quot;https://public.dhe.ibm.com/ibmdl/export/pub/software/openliberty/runtime/release/22.0.0.10/openliberty-22.0.0.10.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://public.dhe.ibm.com/ibmdl/export/pub/software/openliberty/runtime/release/22.0.0.10/openliberty-22.0.0.10.zip&lt;/a&gt;&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160; Alternatively, you could use just the liberty kernel ~10MB&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; &#160; &lt;a href=&quot;https://public.dhe.ibm.com/ibmdl/export/pub/software/openliberty/runtime/release/22.0.0.10/openliberty-kernel-22.0.0.10.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://public.dhe.ibm.com/ibmdl/export/pub/software/openliberty/runtime/release/22.0.0.10/openliberty-kernel-22.0.0.10.zip&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160; 2) md C:\temp\openliberty&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160; unzip openliberty-22.0.0.10.zip into C:\temp\openliberty&lt;/p&gt;

&lt;p&gt;&#160; 3) cd C:\temp\openliberty\wlp\bin&lt;/p&gt;

&lt;p&gt;&#160; 4) Run these two commands to make sure the server runs and to initialize the environment:&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160; server start&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160; server stop&lt;/p&gt;

&lt;p&gt;&#160;&#160; 5) Register liberty as a service (parameter is case sensitive).&#160; The following command is used to invoke prunsrv to register the service using the default name of defaultServer&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; server registerWinService&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160; 6)&#160; Open the windows &quot;services&quot; app (services.msc).&#160;&#160; Start and stop the service until the stop hangs.&#160; It usually doesn&apos;t take more than a couple of tries.&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
&lt;b&gt;Details&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;The &lt;b&gt;server.bat&lt;/b&gt; script registers the service like this:&lt;/p&gt;

&lt;p&gt;&quot;C:\temp\openliberty\wlp\bin\tools\win\prunsrv.exe&quot; &#160;//IS//defaultServer --Startup=manual --DisplayName=&quot;defaultServer&quot; --Description=&quot;Open Liberty&quot; ++DependsOn=Tcpip --LogPath=&quot;C:\temp\openliberty\wlp\usr\servers\defaultServer\logs&quot; --StdOutput=auto --StdError=auto --StartMode=exe --StartPath=&quot;C:\temp\openliberty\wlp&quot; --StartImage=&quot;C:\temp\openliberty\wlp\bin\server.bat&quot; ++StartParams=start#defaultServer --StopMode=exe --StopPath=&quot;C:\temp\openliberty\wlp&quot; --StopImage=&quot;C:\temp\wlp\bin\server.bat&quot; ++StopParams=stop#defaultServer --ServiceUser=LocalSystem&lt;/p&gt;

&lt;p&gt;After registering the service you can look at its properties.&#160; You will see:&lt;/p&gt;

&lt;p&gt;&#160;&#160; Path to executable:&lt;br/&gt;
&#160;&#160; C:\temp\openliberty\wlp\bin\tools\win\prunsrv.exe //RS//defaultServer&lt;/p&gt;

&lt;p&gt;When I (and many of our customers) try to stop the service, it hangs.&#160;&#160; At that point, the server, named defaultServer is still up and running.&#160; I can send commands to the server.&#160; For instance, I can execute a &quot;server dump&quot; command. This sends the &quot;dump&quot; command to the server, and the server writes information to a file.&#160; I can also stop the server by executing &quot;server stop&quot;.&#160; This sends the &quot;stop&quot; command to the server which causes the server to stop.&#160; When the server stops, the hanging Windows service stops as well.&lt;/p&gt;

&lt;p&gt;I have attached a &lt;b&gt;server.bat&lt;/b&gt; which adds --LogLevel Debug to the prunsrv commands and also &lt;b&gt;commons-daemon.2022-09-28.log&lt;/b&gt; which demonstrates the problem. It shows registering, starting, and stopping the service.&#160; Finally, I uploaded &lt;b&gt;commons-daemon.2022-09-28_afterKillingServer.log&lt;/b&gt;, which is a continuation of the other log file which shows the result of issuing the server stop command to stop the server.&lt;/p&gt;

&lt;p&gt;Thanks for looking at this.&lt;br/&gt;
Jim Blye&lt;/p&gt;</description>
                <environment>&lt;p&gt;I don&apos;t think the Windows version matters, but I am using:&lt;br/&gt;
Microsoft Windows &lt;span class=&quot;error&quot;&gt;&amp;#91;Version 10.0.19044.2006&amp;#93;&lt;/span&gt;&lt;/p&gt;</environment>
        <key id="13483734">DAEMON-449</key>
            <summary>Prunsrv fails to stop Open Liberty Windows service</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jimblye">Jim Blye</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Sep 2022 22:19:11 +0000</created>
                <updated>Fri, 10 May 2024 10:58:24 +0000</updated>
                            <resolved>Fri, 10 May 2024 10:58:24 +0000</resolved>
                                    <version>1.2.2</version>
                                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17612763" author="markt" created="Tue, 4 Oct 2022 19:32:00 +0000"  >&lt;p&gt;You could try updating to the latest version but I doubt that will help.&lt;/p&gt;

&lt;p&gt;Enabling debug logging, particularly with the latest version, might provide some additional information.&lt;/p&gt;

&lt;p&gt;If you can show that Daemon isn&apos;t calling stop then there would be a bug here but the logs indicate that stop is being called and Open Liberty isn&apos;t responding.&lt;/p&gt;

&lt;p&gt;I suspect the issues is in Open Liberty rather than Commons Daemon. The different exit code (20 vs 0) might be a clue.&lt;/p&gt;</comment>
                            <comment id="17634389" author="jimblye" created="Tue, 15 Nov 2022 14:41:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt; , the root cause actually seems to be happening on &lt;b&gt;start&lt;/b&gt; rather than &lt;b&gt;stop&lt;/b&gt;.&#160; When the service is started, it invokes server.bat.&#160; The server.bat script starts a jvm (the liberty server) and then starts another jvm which waits for the status of the server to indicate that the server is all the way up.&#160; &#160;The problem seems to be that prunsrv does not wait for the server.bat script to finish.&#160; In the Windows &quot;services&quot; panel, the service start seems to be completed, though the server.bat file is still running waiting for the liberty server to come up.&#160; If I try to stop the service too early, the stop fails as described above.&lt;/p&gt;

&lt;p&gt;I discovered this by adding some logging to server.bat.&#160; Before and after the starting of the jvms, I added logging statements.&#160; &#160;Then I recreate the problem by starting the server and then immediately stopping the server as soon as the Windows &quot;services&quot; panel will let me.&#160; &#160;What I find in the log file is that the server is starting and then I see that is stopping.&#160; I don&apos;t see the message that it finished starting.&lt;/p&gt;

&lt;p&gt;Is there a way to make prunsrv wait for server.bat to complete?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2022-11-14 15:04:18] [debug] ( prunsrv.c:1763) [11932] Apache Commons Daemon procrun log initialized.
[2022-11-14 15:04:18] [info] &#160;( prunsrv.c:1767) [11932] Apache Commons Daemon procrun (1.2.2.0 32-bit) started.
[2022-11-14 15:04:18] [info] &#160;( prunsrv.c:1677) [11932] Running Service &lt;span class=&quot;code-quote&quot;&gt;&apos;defaultServer&apos;&lt;/span&gt;...
[2022-11-14 15:04:18] [debug] ( prunsrv.c:1448) [ 6136] Inside ServiceMain...
[2022-11-14 15:04:18] [debug] ( prunsrv.c:910 ) [ 6136] reportServiceStatusE: dwCurrentState = 2, dwWin32ExitCode = 0, dwWaitHint = 3000, dwServiceSpecificExitCode = 0.
[2022-11-14 15:04:18] [info] &#160;( prunsrv.c:1203) [ 6136] Starting service...
[2022-11-14 15:04:18] [debug] (rprocess.c:519 ) [ 6136] Apache Commons Daemon apxProcessExecute()
[2022-11-14 15:04:18] [debug] (rprocess.c:258 ) [ 6136] Apache Commons Daemon procrun __apxProcCreateChildPipes()
[2022-11-14 15:04:18] [debug] (rprocess.c:535 ) [ 6136] Apache Commons Daemon AplZeroMemory()
[2022-11-14 15:04:18] [debug] (rprocess.c:550 ) [ 6136] Apache Commons Daemon GetEnvironmentStringsW()
[2022-11-14 15:04:18] [debug] (rprocess.c:572 ) [ 6136] Apache Commons Daemon CreateProcessW()
[2022-11-14 15:04:18] [debug] (rprocess.c:594 ) [ 6136] Apache Commons Daemon CreateThread()
[2022-11-14 15:04:18] [debug] (rprocess.c:597 ) [ 6136] Apache Commons Daemon CreateThread()
[2022-11-14 15:04:18] [debug] (rprocess.c:600 ) [ 6136] Apache Commons Daemon ResumeThread()
[2022-11-14 15:04:19] [debug] (rprocess.c:602 ) [ 6136] Apache Commons Daemon CreateThread()
[2022-11-14 15:04:19] [debug] (rprocess.c:608 ) [ 6136] Apache Commons Daemon apxProcessExecute() returning TRUE
[2022-11-14 15:04:19] [info] &#160;( prunsrv.c:1359) [ 6136] Service started in 249 milliseconds.
[2022-11-14 15:04:19] [debug] ( prunsrv.c:910 ) [ 6136] reportServiceStatusE: dwCurrentState = 4, dwWin32ExitCode = 0, dwWaitHint = 0, dwServiceSpecificExitCode = 0.
[2022-11-14 15:04:19] [debug] ( prunsrv.c:1603) [ 6136] Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; worker to finish...
[2022-11-14 15:04:22] [debug] ( prunsrv.c:910 ) [11932] reportServiceStatusE: dwCurrentState = 3, dwWin32ExitCode = 0, dwWaitHint = 3000, dwServiceSpecificExitCode = 0.
[2022-11-14 15:04:22] [info] &#160;( prunsrv.c:1010) [ 7488] Stopping service...
[2022-11-14 15:04:22] [debug] (rprocess.c:519 ) [ 7488] Apache Commons Daemon apxProcessExecute()
[2022-11-14 15:04:22] [debug] (rprocess.c:258 ) [ 7488] Apache Commons Daemon procrun __apxProcCreateChildPipes()
[2022-11-14 15:04:22] [debug] (rprocess.c:535 ) [ 7488] Apache Commons Daemon AplZeroMemory()
[2022-11-14 15:04:22] [debug] (rprocess.c:550 ) [ 7488] Apache Commons Daemon GetEnvironmentStringsW()
[2022-11-14 15:04:22] [debug] (rprocess.c:572 ) [ 7488] Apache Commons Daemon CreateProcessW()
[2022-11-14 15:04:22] [debug] (rprocess.c:594 ) [ 7488] Apache Commons Daemon CreateThread()
[2022-11-14 15:04:22] [debug] (rprocess.c:597 ) [ 7488] Apache Commons Daemon CreateThread()
[2022-11-14 15:04:22] [debug] (rprocess.c:600 ) [ 7488] Apache Commons Daemon ResumeThread()
[2022-11-14 15:04:22] [debug] (rprocess.c:602 ) [ 7488] Apache Commons Daemon CreateThread()
[2022-11-14 15:04:22] [debug] (rprocess.c:608 ) [ 7488] Apache Commons Daemon apxProcessExecute() returning TRUE
[2022-11-14 15:04:22] [debug] ( prunsrv.c:1131) [ 7488] Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; stop worker to finish...
[2022-11-14 15:04:24] [debug] (rprocess.c:122 ) [ 4872] Child process exit code 21
[2022-11-14 15:04:24] [debug] ( prunsrv.c:1133) [ 7488] Stop worker finished.
[2022-11-14 15:04:24] [debug] ( prunsrv.c:910 ) [ 7488] reportServiceStatusE: dwCurrentState = 3, dwWin32ExitCode = 0, dwWaitHint = 300000, dwServiceSpecificExitCode = 0.
[2022-11-14 15:04:24] [debug] ( prunsrv.c:1167) [ 7488] Waiting &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; worker to die naturally...
[2022-11-14 15:04:26] [debug] (rprocess.c:122 ) [ 4136] Child process exit code 0 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I think where it says &lt;b&gt;Service started in 249 milliseconds,&lt;/b&gt; the service appears to be started in the Windows Services panel (guessing).&#160; But then I see &lt;b&gt;Waiting for worker to finish...&lt;/b&gt;&#160; &#160;I assume that means it is still waiting for server.bat to finish, but it has already reported that the service is running?&lt;/p&gt;

&lt;p&gt;Ultimately the service stop fails because the server.bat cannot communicate with the liberty server, because the liberty server isn&apos;t up yet.&#160;&#160;&lt;/p&gt;</comment>
                            <comment id="17634413" author="markt" created="Tue, 15 Nov 2022 15:43:00 +0000"  >&lt;p&gt;I think you are mis-reading the logs.&lt;/p&gt;

&lt;p&gt;The line&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2022-11-14 15:04:19&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1603) [ 6136] Waiting for worker to finish...&lt;br/&gt;
shows that the service has started and the service wrapper is now waiting for the service to end before that thread will continue.&lt;/p&gt;

&lt;p&gt;I suspect what is happening is that server.bat is returning before the service has fully started. Try adding some debug logging to show when server.bat exits.&lt;/p&gt;</comment>
                            <comment id="17634439" author="garydgregory" created="Tue, 15 Nov 2022 16:27:29 +0000"  >&lt;p&gt;Hi All,&lt;/p&gt;

&lt;p&gt;What would be a better log event message to avoid this type of confusion in the future?&lt;/p&gt;</comment>
                            <comment id="17845294" author="markt" created="Fri, 10 May 2024 10:58:24 +0000"  >&lt;p&gt;Given the lack of update for an extended period of time, I am assuming the issue was indeed that the batch file was exiting before the service was fully started.&lt;/p&gt;

&lt;p&gt;If this is not the case, feel free to re-open but you&apos;ll need to provide a minimal test case that demonstrates the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13049897" name="commons-daemon.2022-09-28.log" size="6463" author="jimblye" created="Wed, 28 Sep 2022 22:09:27 +0000"/>
                            <attachment id="13049895" name="commons-daemon.2022-09-28_afterKillingServer.log" size="9313" author="jimblye" created="Wed, 28 Sep 2022 22:15:01 +0000"/>
                            <attachment id="13049896" name="server.bat" size="29790" author="jimblye" created="Wed, 28 Sep 2022 22:09:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>English</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z18xk0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-448] Service start fails with default Eclipse Temurin install</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-448</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When installing Eclipse Temurin JRE version 11, notice &lt;em&gt;Set JAVA_HOME variable&lt;/em&gt; and &lt;em&gt;JavaSoft (Oracle) registry keys&lt;/em&gt; options are disabled in the default setup:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13049376/13049376_image-2022-09-16-14-49-32-981.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;prunsrv.exe successfully installs the service, but when trying to start it prunsrv.exe crashes:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Faulting application name: xxx.exe, version: 1.3.1.0, time stamp: 0x6271349d&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting module name: xxx.exe, version: 1.3.1.0, time stamp: 0x6271349d&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Exception code: 0xc0000005&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Fault offset: 0x0000000000007130&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting process id: 0x1ddc&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting application start time: 0x01d8c9ca012bfb46&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting application path: C:\Program Files\xxx\xxx.exe&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting module path: C:\Program Files\xxx\xxx.exe&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Report Id: a35b4a6a-63a3-4426-8061-495550439a97&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting package full name:&#160;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;Faulting package-relative application ID:&#160;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;However when the default options are overridden and &lt;em&gt;Set JAVA_HOME variable&lt;/em&gt; and &lt;em&gt;JavaSoft (Oracle) registry keys&lt;/em&gt; options are enabled:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13049374/13049374_image-2022-09-16-15-02-53-131.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;br/&gt;
prunsrv.exe works correctly.&lt;/p&gt;

&lt;p&gt;Having prunsrv.exe work correctly or at least not die with an 0xc0000005 (Access Denied) exception would improve user experience.&lt;/p&gt;</description>
                <environment>&lt;ul&gt;
	&lt;li&gt;Windows 10 Pro 21H2 (OS Build 19044.1889) 64 bit&lt;/li&gt;
	&lt;li&gt;Eclipse Temurin Windows x64 JRE 11 (jdk-11.0.16.1+1) x64
	&lt;ul&gt;
		&lt;li&gt;Screenshot from website, no direct link possible:&lt;/li&gt;
		&lt;li&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13049375/13049375_image-2022-09-16-14-53-28-807.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</environment>
        <key id="13481886">DAEMON-448</key>
            <summary>Service start fails with default Eclipse Temurin install</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="GlennMatthys">Glenn Matthys</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Sep 2022 13:06:11 +0000</created>
                <updated>Tue, 4 Oct 2022 19:20:04 +0000</updated>
                            <resolved>Tue, 4 Oct 2022 19:20:04 +0000</resolved>
                                    <version>1.3.1</version>
                                    <fixVersion>1.3.2</fixVersion>
                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17605859" author="garydgregory" created="Fri, 16 Sep 2022 14:32:22 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=GlennMatthys&quot; class=&quot;user-hover&quot; rel=&quot;GlennMatthys&quot;&gt;GlennMatthys&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;Did you happen to capture a stack trace?&lt;/p&gt;</comment>
                            <comment id="17606450" author="glennmatthys" created="Mon, 19 Sep 2022 06:50:45 +0000"  >&lt;p&gt;Is there a build with debug symbols available somewhere? I tried running it with gdb, but I only got this:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;New Thread 7200.0x1d94&amp;#93;&lt;/span&gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;New Thread 7200.0x1d84&amp;#93;&lt;/span&gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;warning: Can not parse XML library list; XML support was disabled at compile time&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Thread 7200.0x1d78 exited with code 4&amp;#93;&lt;/span&gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Thread 7200.0x1d94 exited with code 4&amp;#93;&lt;/span&gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Inferior 1 (process 7200) exited with code 04&amp;#93;&lt;/span&gt;&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;(gdb)&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17612688" author="markt" created="Tue, 4 Oct 2022 17:01:10 +0000"  >&lt;p&gt;If JAVA_HOME isn&apos;t defined and there is no Java defined in the expected registry locations then you are going to have to explicitly define the JVM you want the service to use.&lt;/p&gt;

&lt;p&gt;What we should be able to do is handle the situation better and fail to start with a useful error message rather than crashing.&lt;/p&gt;</comment>
                            <comment id="17612760" author="markt" created="Tue, 4 Oct 2022 19:20:04 +0000"  >&lt;p&gt;Fixed. It was a NULL pointer de-reference when no JVM was configured.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13049376" name="image-2022-09-16-14-49-32-981.png" size="23853" author="GlennMatthys" created="Fri, 16 Sep 2022 12:49:32 +0000"/>
                            <attachment id="13049375" name="image-2022-09-16-14-53-28-807.png" size="5613" author="GlennMatthys" created="Fri, 16 Sep 2022 12:53:28 +0000"/>
                            <attachment id="13049374" name="image-2022-09-16-15-02-53-131.png" size="21422" author="GlennMatthys" created="Fri, 16 Sep 2022 13:02:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z18mag:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-446] Update service (//US) does not change DependsOn</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-446</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When installing a service, I can set dependency on other services using the --DependsOn parameter. But when a try to add this dependency using //US directive, nothing happens.&lt;/p&gt;

&lt;p&gt;I know we don&apos;t use the latest version of procrun but I checked source codes and if I don&apos;t misread it, the //US directive still does not chage DependsOn parameter of the service.&lt;/p&gt;

&lt;p&gt;Is that a purspose? If not, can this be repaired?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10, Windows Server several versions&lt;/p&gt;</environment>
        <key id="13479114">DAEMON-446</key>
            <summary>Update service (//US) does not change DependsOn</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pavelrund">Pavel Rund</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Aug 2022 13:29:48 +0000</created>
                <updated>Tue, 4 Oct 2022 14:30:41 +0000</updated>
                            <resolved>Tue, 4 Oct 2022 14:30:41 +0000</resolved>
                                    <version>1.2.2</version>
                                    <fixVersion>1.3.2</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17612633" author="markt" created="Tue, 4 Oct 2022 14:30:41 +0000"  >&lt;p&gt;Thanks for the report. That looks like an oversight to me. Now fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z185dk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-445] Changes of DAEMON-441 cause trouble with empty env vars</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-445</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The changes done via &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-441&quot; title=&quot;When installing a Windows service using Commons Daemon 1.3.0 the errorlevel is -1073741819&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-441&quot;&gt;&lt;del&gt;DAEMON-441&lt;/del&gt;&lt;/a&gt;, namely &lt;a href=&quot;https://github.com/apache/commons-daemon/commit/97b31058ecf5e4dc202188d8e8917f6caa90dcfc#diff-e7f9bbe0d9947378640c1e1c91d8dc72c93e6d1034218458158a1cc43f2f3b9fR278&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/commit/97b31058ecf5e4dc202188d8e8917f6caa90dcfc#diff-e7f9bbe0d9947378640c1e1c91d8dc72c93e6d1034218458158a1cc43f2f3b9fR278&lt;/a&gt; lead to a failing service installation in case the environment variable exists but has no value.&#160;&lt;/p&gt;

&lt;p&gt;In my use case the supported environment variables are explicitly set empty if defaults shall be used. This is done to avoid interference with environment variables which may be set by the caling process.&#160;&lt;/p&gt;

&lt;p&gt;In such a case example output is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2022-06-29 11:32:11] [error] [10552] Error getting environment variable PR_LibraryPath
[2022-06-29 11:32:11] [warn]  [10552] Failed to grant service user &apos;.\user&apos; write permissions to log path &apos;C:\Windows\system32\LogFiles\Apache&apos; due to error &apos;19: The media is write protected.&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;while the environment is set&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;PR_DESCRIPTION: tomcat-service description
PR_DISPLAYNAME: tomcat-service
PR_INSTALL: C:\apache-tomcat\bin\tomcat9.exe
PR_SERVICEUSER: .\hidden
PR_SERVICEPASSWORD: hidden
PR_STARTUP: auto
PR_CLASSPATH: C:\apache-tomcat/bin/bootstrap.jar;C:\apache-tomcat/bin/tomcat-juli.jar;
PR_JAVA_HOME: C:\jdk
PR_JVM: C:\jdk\bin\server\jvm.dll
PR_JVMMS: 256
PR_JVMMX: 3072
PR_JVMOPTIONS: -Dcatalina.base=C:\tomcat-service;-Dcatalina.home=C:\apache-tomcat;-Djava.io.tmpdir=C:\tomcat-service/temp;
PR_ENVIRONMENT: PATH=&apos;C:\Windows;C:\Windows\System32;C:\Windows\System32\Wbem;C:\apache-tomcat\bin&apos;
PR_LIBRARYPATH: C:\apache-tomcat/bin
PR_STARTCLASS: org.apache.catalina.startup.Bootstrap
PR_STARTMETHOD: 
PR_STARTPARAMS: start
PR_STARTMODE: jvm
PR_STARTPATH: C:\tomcat-service
PR_STOPCLASS: org.apache.catalina.startup.Bootstrap
PR_STOPMETHOD: 
PR_STOPPARAMS: stop
PR_STOPMODE: jvm
PR_STOPPATH: C:\tomcat-service
PR_STOPTIMEOUT: 60
PR_LOGJNIMESSAGES: 0
PR_LOGLEVEL: Info
PR_LOGPATH: C:\Logs\tomcat-service
PR_LOGPREFIX: tomcat-service
PR_STDERROR: auto
PR_STDOUTPUT: auto
PR_DEPENDSON: postgresql-x64-11;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Means, the environment variables PR_STOPMETHOD, PR_LIBRARYPATH and PR_STARTMETHOD are defined but empty.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13469089">DAEMON-445</key>
            <summary>Changes of DAEMON-441 cause trouble with empty env vars</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="slackfan">Alexander Fischer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Jun 2022 11:58:17 +0000</created>
                <updated>Wed, 26 Apr 2023 18:13:55 +0000</updated>
                            <resolved>Wed, 26 Apr 2023 18:13:55 +0000</resolved>
                                    <version>1.3.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17612610" author="markt" created="Tue, 4 Oct 2022 12:58:02 +0000"  >&lt;p&gt;How are you setting an empty environment variable in Windows. Generally, trying to do that deletes the environment variable.&lt;/p&gt;</comment>
                            <comment id="17637922" author="markt" created="Wed, 23 Nov 2022 19:19:40 +0000"  >&lt;p&gt;Without an explanation of how to recreate the problem described here, this issue will be resolved as WORKSFORME or similar.&lt;/p&gt;</comment>
                            <comment id="17644559" author="kkolinko" created="Thu, 8 Dec 2022 00:45:23 +0000"  >&lt;p&gt;&amp;gt; How are you setting an empty environment variable in Windows.&lt;/p&gt;

&lt;p&gt;I do not know how OP does it, but&lt;br/&gt;
StackOverflow mentions, that such value can be created by manually editing the registry, &lt;a href=&quot;https://stackoverflow.com/a/38851495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/a/38851495&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17644563" author="kkolinko" created="Thu, 8 Dec 2022 01:17:52 +0000"  >&lt;p&gt;Regarding how the changes done by &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-441&quot; title=&quot;When installing a Windows service using Commons Daemon 1.3.0 the errorlevel is -1073741819&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-441&quot;&gt;&lt;del&gt;DAEMON-441&lt;/del&gt;&lt;/a&gt; (commit 97b31058) triggered this issue:&lt;br/&gt;
My guess is that in the case of an empty env variable the GetEnvironmentVariableW method returns 0, but does not update the LastError.&lt;/p&gt;

&lt;p&gt;So the LastError value remained as ERROR_ENVVAR_NOT_FOUND from previous iterations and masked the behaviour.&lt;/p&gt;</comment>
                            <comment id="17644564" author="kkolinko" created="Thu, 8 Dec 2022 01:27:21 +0000"  >&lt;p&gt;Attached a patch (0001-Fix-&lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-445&quot; title=&quot;Changes of DAEMON-441 cause trouble with empty env vars&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-445&quot;&gt;&lt;del&gt;DAEMON-445&lt;/del&gt;&lt;/a&gt;.-Fix-processing-of-environment-variab.patch). Not tested.&lt;/p&gt;</comment>
                            <comment id="17648926" author="garydgregory" created="Sat, 17 Dec 2022 17:46:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkolinko&quot; class=&quot;user-hover&quot; rel=&quot;kkolinko&quot;&gt;kkolinko&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;It would be best if you could provide the patch as a.PR on GitHub. TY.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17716852" author="markt" created="Wed, 26 Apr 2023 18:13:55 +0000"  >&lt;p&gt;I have tried the registry approach to create an empty environment variable on all currently supported versions of Windows without success. I am therefore resolving this issue as cannot reproduce.&lt;/p&gt;

&lt;p&gt;I have no objections to this issue being re-opened if steps are provided to recreate it on a fully patched installation of any currently supported (by Microsoft) Windows operating system.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13053642" name="0001-Fix-DAEMON-445.-Fix-processing-of-environment-variab.patch" size="1260" author="kkolinko" created="Thu, 8 Dec 2022 01:26:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z16goo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-443] prunsrv writes gigabytes of null bytes to stderr</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-443</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When trying to start a non-existent service, procrun will write an enormous amount of null bytes to stderr. Since these are not printable, the problem is not normally seen in a terminal. However, if a wrapper script is used that captures stdout/stderr, the output file is over 8 GB.&lt;/p&gt;

&lt;p&gt;Reproducing is quite simple:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;prunsrv.exe //ES/my-dummy-service 2&amp;gt; test.err&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;The file test.err then has 8589934985 bytes. The printable characters are only a few lines of warn/error log messages.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13444493">DAEMON-443</key>
            <summary>prunsrv writes gigabytes of null bytes to stderr</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rjernst">Ryan Ernst</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 May 2022 21:18:08 +0000</created>
                <updated>Thu, 12 May 2022 03:12:06 +0000</updated>
                            <resolved>Thu, 12 May 2022 01:02:18 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17535141" author="garydgregory" created="Thu, 12 May 2022 00:01:05 +0000"  >&lt;p&gt;Is this with 1.3.1?&lt;/p&gt;</comment>
                            <comment id="17535799" author="rjernst" created="Thu, 12 May 2022 01:02:11 +0000"  >&lt;p&gt;:facepalm:&lt;/p&gt;

&lt;p&gt;I had thought we were on the latest version, but we weren&apos;t even close (1.1.0). This is fixed when I run with 1.3.1. Apologies for the noise.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z12a8g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-442] ProcRun classpath limitation of 1010 characters truncates the classpath string for many libraries on the classpath</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-442</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When installing a service and it has a long java class path, it truncates of the remainder of the class path which seems to have a 1010 character limit when specifying a big amount of jars.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;See here where the JVM option shows the classpath being truncated:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2022-04-06 16:31:57&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:817 ) [ 3228] JVM Option&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; -Djava.class.path=C:\\Postilion\\eSocket.POS\\java;C:\\Postilion\\eSocket.POS\\CXPI\\lib\\commons-configuration-1.10.jar;C:\\Postilion\\eSocket.POS\\CXPI\\lib\\commons-lang-2.6.jar;C:\\Postilion\\eSocket.POS\\CXPI\\lib\\commons-logging-1.2.jar;C:\\Postilion\\eSocket.POS\\bin\\bcpkix-jdk15.jar;C:\\Postilion\\eSocket.POS\\bin\\bcprov-jdk15.jar;C:\\Postilion\\eSocket.POS\\bin\\comm.jar;C:\\Postilion\\eSocket.POS\\bin\\esocket-tools-log4j.jar;C:\\Postilion\\eSocket.POS\\bin\\esocket-tools.jar;C:\\Postilion\\eSocket.POS\\bin\\hsqldb-2.3.4.jar;C:\\Postilion\\eSocket.POS\\bin\\log4j-api-2.13.3.jar;C:\\Postilion\\eSocket.POS\\bin\\log4j-core-2.13.3.jar;C:\\Postilion\\eSocket.POS\\bin\\mssql-jdbc-8.2.2.jre8.jar;C:\\Postilion\\eSocket.POS\\bin\\postespos-sdk.jar;C:\\Postilion\\eSocket.POS\\bin\\commons-daemon.jar;C:\\Postilion\\eSocket.POS\\bin\\endorsed\\xercesImpl.jar;C:\\Postilion\\eSocket.POS\\bin\\endorsed\\xml-apis.jar;C:\\Postilion\\eSocket.POS\\bin\\jai_codec.jar;C:\\Postilion\\eSocket.POS\\bin&lt;br class=&quot;atl-forced-newline&quot; /&gt;j&lt;/p&gt;

&lt;p&gt;See the service log attached.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13438533">DAEMON-442</key>
            <summary>ProcRun classpath limitation of 1010 characters truncates the classpath string for many libraries on the classpath</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="japie.vdlinde">Japie vd Linde</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Apr 2022 08:41:59 +0000</created>
                <updated>Wed, 27 Apr 2022 12:38:10 +0000</updated>
                            <resolved>Wed, 27 Apr 2022 12:38:10 +0000</resolved>
                                    <version>1.2.3</version>
                                    <fixVersion>1.3.1</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17519432" author="michael-o" created="Fri, 8 Apr 2022 08:51:29 +0000"  >&lt;p&gt;Maybe this is a Windows problem?&lt;/p&gt;</comment>
                            <comment id="17528694" author="markt" created="Wed, 27 Apr 2022 09:45:15 +0000"  >&lt;p&gt;Windows version ?&lt;/p&gt;</comment>
                            <comment id="17528724" author="markt" created="Wed, 27 Apr 2022 10:37:37 +0000"  >&lt;p&gt;This is just log truncation. The full class path will still be available to the Java process.&lt;/p&gt;</comment>
                            <comment id="17528748" author="garydgregory" created="Wed, 27 Apr 2022 11:52:37 +0000"  >&lt;p&gt;You can also ask Windows to accept longer path names: &lt;a href=&quot;https://garygregory.wordpress.com/2019/09/13/enabling-long-path-names-on-windows/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://garygregory.wordpress.com/2019/09/13/enabling-long-path-names-on-windows/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In our end, maybe we could log the current limit at the trace or debug level.&lt;/p&gt;</comment>
                            <comment id="17528755" author="markt" created="Wed, 27 Apr 2022 12:04:39 +0000"  >&lt;p&gt;This has nothing to do with Windows path name limits.&lt;/p&gt;</comment>
                            <comment id="17528763" author="markt" created="Wed, 27 Apr 2022 12:38:10 +0000"  >&lt;p&gt;The size limit on the message component of the log entry has been increased from 1024 characters to 4096.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13042144" name="Service-Service-Log.2022-04-06.log" size="5621" author="japie.vdlinde" created="Fri, 8 Apr 2022 08:41:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z11a28:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-441] When installing a Windows service using Commons Daemon 1.3.0 the errorlevel is -1073741819</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-441</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When attempting to use prunsrv.exe on Windows 2016 to create a service a Windows Event error is logged and the errorlevel is returned as -1073741819&lt;/p&gt;

&lt;p&gt;Running the following command:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
prunsrv.exe &lt;span class=&quot;code-comment&quot;&gt;//IS/MyService --Startup=auto --Description=My Service --DisplayName=My Service &lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Results in the following Windows Event Log entry&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Faulting application name: prunsrv.exe, version: 1.3.0.0, time stamp: 0x622b3ac0
Faulting module name: prunsrv.exe, version: 1.3.0.0, time stamp: 0x622b3ac0
Exception code: 0xc0000005
Fault offset: 0x0000000000006e70
Faulting process id: 0x1d88
Faulting application start time: 0x01d845f90eb4351a
Faulting application path: C:\myfolder\prunsrv.exe
Faulting module path: C:\myfolder\prunsrv.exe
Report Id: 409b7098-42bd-4036-aa61-b19eecdb1bd7
Faulting &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; full name:&#160;
Faulting &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;-relative application ID: &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Doing an echo %errorlevel% shows -1073741819 instead of the expected 0&lt;/p&gt;

&lt;p&gt;Version 1.2.4.0 works correctly on both Windows 10 and 2016&lt;/p&gt;

&lt;p&gt;&lt;b&gt;NOTE:&lt;/b&gt; The service does appear to actually install on 2016, however most deploy scripts will expect an error level of 0 and will fail if a non 0 value it returned.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;Workaround&quot;&gt;&lt;/a&gt;Workaround&lt;/h3&gt;

&lt;p&gt;Define a &lt;b&gt;--LogPath&lt;/b&gt; value and do not use the default %SystemRoot%\System32\LogFiles\Apache path&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 2016 Datacenter&lt;/p&gt;</environment>
        <key id="13437314">DAEMON-441</key>
            <summary>When installing a Windows service using Commons Daemon 1.3.0 the errorlevel is -1073741819</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="brianandle">Brian Andle</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Apr 2022 19:00:34 +0000</created>
                <updated>Fri, 29 Apr 2022 16:31:36 +0000</updated>
                            <resolved>Fri, 29 Apr 2022 16:31:36 +0000</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17516082" author="markt" created="Fri, 1 Apr 2022 19:10:26 +0000"  >&lt;p&gt;I suspect Daemon is failing to configure the permissions correctly for the log directory. Are there are log messages and/or console messages reporting problems?&lt;/p&gt;</comment>
                            <comment id="17516083" author="garydgregory" created="Fri, 1 Apr 2022 19:11:06 +0000"  >&lt;p&gt;Running with trace level logging for prunsrv might show useful information. You might need more access rights.&lt;/p&gt;</comment>
                            <comment id="17516088" author="JIRAUSER287474" created="Fri, 1 Apr 2022 19:24:35 +0000"  >&lt;p&gt;When actually running the command nothing shows up in the Command Prompt. Attached image as example and showing errorlevel.&lt;/p&gt;

&lt;p&gt;I found this because Tomcat 8.5.78 was just released and includes commons-daemon 1.3.0 and our scripting is looking at the errorlevel.&lt;/p&gt;</comment>
                            <comment id="17516090" author="JIRAUSER287474" created="Fri, 1 Apr 2022 19:32:25 +0000"  >&lt;p&gt;Based on the documentation it looks like the following should give additionally logging:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
prunsrv.exe &lt;span class=&quot;code-comment&quot;&gt;//IS/MyService --Startup=auto --Description=My Service --DisplayName=My Service --LogLevel=Trace &lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Looking at the log under C:\Windows\System32\LogFiles\Apache I only see the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2022-04-01 12:30:51] [info] &#160;[ 8960] Apache Commons Daemon procrun (1.3.0.0 64-bit) started.
[2022-04-01 12:30:51] [info] &#160;[ 8960] Installing service &lt;span class=&quot;code-quote&quot;&gt;&apos;MyService&apos;&lt;/span&gt; name &apos;&apos;. &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17516095" author="JIRAUSER287474" created="Fri, 1 Apr 2022 19:47:11 +0000"  >&lt;p&gt;For contrast 1.2.4 shows, on the same system, the following in commons-daemon.2022-04-01.log:&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2022-04-01 12:44:50] [info] &#160;[ 6512] Apache Commons Daemon procrun (1.2.4.0 64-bit) started.
[2022-04-01 12:44:50] [info] &#160;[ 6512] Installing service &lt;span class=&quot;code-quote&quot;&gt;&apos;MyService&apos;&lt;/span&gt; name &apos;&apos;.
[2022-04-01 12:44:50] [info] &#160;[ 6512] Service &lt;span class=&quot;code-quote&quot;&gt;&apos;MyService&apos;&lt;/span&gt; installed.
[2022-04-01 12:44:50] [info] &#160;[ 6512] Apache Commons Daemon procrun finished. &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17516138" author="JIRAUSER287474" created="Fri, 1 Apr 2022 21:19:49 +0000"  >&lt;p&gt;Okay so it permissions causing the issue. The following works:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
prunsrv.exe &lt;span class=&quot;code-comment&quot;&gt;//IS/MyService --Startup=auto --Description=&lt;span class=&quot;code-quote&quot;&gt;&quot;My Service&quot;&lt;/span&gt; --DisplayName=&lt;span class=&quot;code-quote&quot;&gt;&quot;My Service&quot;&lt;/span&gt; --LogLevel=Trace --LogPath &lt;span class=&quot;code-quote&quot;&gt;&quot;C:\myfolder&quot;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The issue appears to be that the default LogPath is %SystemRoot%\System32\LogFiles\Apache and so the changes &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-437&quot; title=&quot;prunsrv: Better not to redirect stdout/stderr during service installation?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-437&quot;&gt;&lt;del&gt;DAEMON-437&lt;/del&gt;&lt;/a&gt; made are going to cause, I would think, most Windows installs to fail because it&apos;s &lt;em&gt;trying&lt;/em&gt; to give write access to the service user to %SystemRoot%\System32\LogFiles\Apache. At the very least I would expect A/V&apos;s to block that.&lt;/p&gt;</comment>
                            <comment id="17516140" author="JIRAUSER287474" created="Fri, 1 Apr 2022 21:21:33 +0000"  >&lt;p&gt;And from what I can tell the OS is blocking the attempt (killing the application) before the logging can occur to indicate what the issue is.&lt;/p&gt;</comment>
                            <comment id="17516144" author="JIRAUSER287474" created="Fri, 1 Apr 2022 21:40:23 +0000"  >&lt;p&gt;Added Workaround of:&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
Define a&#160;&lt;b&gt;--LogPath&lt;/b&gt;&#160;value and do not use the default %SystemRoot%\System32\LogFiles\Apache path&lt;/p&gt;</comment>
                            <comment id="17524415" author="markt" created="Tue, 19 Apr 2022 16:17:29 +0000"  >&lt;p&gt;My current thinking is we need to improve the error handling so the cause of the failure is clear.&lt;/p&gt;

&lt;p&gt;We might also want to consider switching the default log file location. The old location made sense if running as LocalSystem but as of 1.2.0 the service runs as LocalService by default.&#160; That said, I&apos;m a little reluctant to change the defaults. Simply reporting the error - with a suggestion to specify a location for the log files - might be the better approach.&lt;/p&gt;</comment>
                            <comment id="17528244" author="markt" created="Tue, 26 Apr 2022 15:27:26 +0000"  >&lt;p&gt;I found a handful of errors looking in to this. The root cause of the specific issue was attempting to set permissions on a null path when there wasn&apos;t a specific LogPath defined.&lt;/p&gt;

&lt;p&gt;It would be helpful if you can confirm the fix before I do the release. Are you able to build procrun from source or do you want me to provide you with some binaries to test?&lt;/p&gt;</comment>
                            <comment id="17528280" author="JIRAUSER287474" created="Tue, 26 Apr 2022 16:30:54 +0000"  >&lt;p&gt;I don&apos;t have an environment setup to build this code so if we have binaries I can/will try them out.&lt;/p&gt;</comment>
                            <comment id="17528689" author="markt" created="Wed, 27 Apr 2022 09:33:06 +0000"  >&lt;p&gt;You can find a development build of 1.3.1 at &lt;a href=&quot;https://people.apache.org/~markt/dev/commons-daemon-1.3.1-dev/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://people.apache.org/~markt/dev/commons-daemon-1.3.1-dev/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It is probably stating the obvious but:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;this isn&apos;t an official release&lt;/li&gt;
	&lt;li&gt;these binaries are intended for testing only&lt;/li&gt;
	&lt;li&gt;use them at your own risk&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Also, because they aren&apos;t official releases, they aren&apos;t signed. You&apos;ll likely see a few more warnings as a result.&lt;/p&gt;</comment>
                            <comment id="17529145" author="JIRAUSER287474" created="Thu, 28 Apr 2022 01:38:40 +0000"  >&lt;p&gt;I was able to test the 64bit version of the 1.3.1 dev build on both Win 10 and Win 2016.&lt;/p&gt;

&lt;p&gt;Win 10. No LogPath. I tested trying to install a second time just to see what would happen.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
C:\Temp&amp;gt;prunsrv.exe &lt;span class=&quot;code-comment&quot;&gt;//IS/MyService --Startup=auto --Description=&lt;span class=&quot;code-quote&quot;&gt;&quot;My Service&quot;&lt;/span&gt; --DisplayName=&lt;span class=&quot;code-quote&quot;&gt;&quot;My Service&quot;&lt;/span&gt;
&lt;/span&gt;[2022-04-27 18:03:45] [warn] &#160;[19764] Failed to grant service user &lt;span class=&quot;code-quote&quot;&gt;&apos;NT AUTHORITY\LocalService&apos;&lt;/span&gt; write permissions to log path &lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&amp;gt;&apos;&lt;/span&gt; due to error &lt;span class=&quot;code-quote&quot;&gt;&apos;19&apos;&lt;/span&gt;

C:\Temp&amp;gt;echo %ERRORLEVEL%
0

C:\Temp&amp;gt;prunsrv.exe &lt;span class=&quot;code-comment&quot;&gt;//IS/MyService --Startup=auto --Description=&lt;span class=&quot;code-quote&quot;&gt;&quot;My Service&quot;&lt;/span&gt; --DisplayName=&lt;span class=&quot;code-quote&quot;&gt;&quot;My Service&quot;&lt;/span&gt;
&lt;/span&gt;[2022-04-27 18:03:26] [error] [13632] The specified service already exists.
[2022-04-27 18:03:26] [error] [13632] Failed installing service &lt;span class=&quot;code-quote&quot;&gt;&apos;MyService&apos;&lt;/span&gt;.
[2022-04-27 18:03:26] [error] [13632] Apache Commons Daemon procrun failed with exit value: 8 (failed to install service).Failed to install service.

C:\Temp&amp;gt;echo %ERRORLEVEL% 8

C:\Temp&amp;gt;sc delete MyService [SC] DeleteService SUCCESS &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Win 10. LogPath defined&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
C:\Temp&amp;gt;prunsrv.exe &lt;span class=&quot;code-comment&quot;&gt;//IS/MyService2 --Startup=auto --Description=&lt;span class=&quot;code-quote&quot;&gt;&quot;My Service&quot;&lt;/span&gt; --DisplayName=&lt;span class=&quot;code-quote&quot;&gt;&quot;My Service&quot;&lt;/span&gt; --LogPath=C:\Temp
&lt;/span&gt;
C:\Temp&amp;gt;echo %ERRORLEVEL%
0 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Windows 2016:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Microsoft Windows [Version 10.0.14393]
(c) 2016 Microsoft Corporation. All rights reserved.

C:\Windows\system32&amp;gt;cd\

C:\&amp;gt;cd tempC:\Temp&amp;gt;prunsrv.exe &lt;span class=&quot;code-comment&quot;&gt;//IS/MyService --Startup=auto --Description=&lt;span class=&quot;code-quote&quot;&gt;&quot;My Service&quot;&lt;/span&gt; --DisplayName=&lt;span class=&quot;code-quote&quot;&gt;&quot;My Service&quot;&lt;/span&gt;
&lt;/span&gt;[2022-04-27 18:19:54] [warn] &#160;[ &#160;472] Failed to grant service user &lt;span class=&quot;code-quote&quot;&gt;&apos;NT AUTHORITY\LocalService&apos;&lt;/span&gt; write permissions to log path &lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&amp;gt;&apos;&lt;/span&gt; due to error &lt;span class=&quot;code-quote&quot;&gt;&apos;19&apos;&lt;/span&gt;

C:\Temp&amp;gt;echo %ERRORLEVEL%
0&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;While the service is installing in my test cases and the errorlevel is 0, I&apos;m no longer seeing a commons-daemon.yyyy-mm-dd.log file being created even if I specify LogPath:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
prunsrv.exe &lt;span class=&quot;code-comment&quot;&gt;//IS/MyService2 --Startup=auto --Description=&lt;span class=&quot;code-quote&quot;&gt;&quot;My Service&quot;&lt;/span&gt; --DisplayName=&lt;span class=&quot;code-quote&quot;&gt;&quot;My Service&quot;&lt;/span&gt; --LogPath=&lt;span class=&quot;code-quote&quot;&gt;&quot;C:\Temp&quot;&lt;/span&gt; &lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17529360" author="markt" created="Thu, 28 Apr 2022 10:39:36 +0000"  >&lt;p&gt;Thanks for those tests. That is what I expected to see which is good.&lt;/p&gt;

&lt;p&gt;1.3.0 made some changes to stdout and stderr redirection. This was a fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-437&quot; title=&quot;prunsrv: Better not to redirect stdout/stderr during service installation?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-437&quot;&gt;&lt;del&gt;DAEMON-437&lt;/del&gt;&lt;/a&gt;. The issue was that the output files could be used both by a running service and by the separate process that starts / stops / updates the running service. Multiple processes trying to write to the same file is generally a cause of problems. The solution chosen was to only redirect stdout and stderr for a running service. Hence why you see log messages on the console rather than a redirected file being created.&lt;/p&gt;

&lt;p&gt;There was some discussion of alternative approaches in &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-437&quot; title=&quot;prunsrv: Better not to redirect stdout/stderr during service installation?&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-437&quot;&gt;&lt;del&gt;DAEMON-437&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;m still thinking about reporting the actual log path rather than &amp;lt;default&amp;gt; when no explicit path is set. I&apos;d be interested in your views on that.&lt;/p&gt;</comment>
                            <comment id="17529366" author="garydgregory" created="Thu, 28 Apr 2022 10:52:50 +0000"  >&lt;p&gt;Showing &quot;&amp;lt;default&amp;gt;&quot; is really unhelpful IMO because it purposely hides where I can go look for information. I feel it is best to always show the full (absolute) path, whether that&apos;s the default value or not is additional information that can be interesting.&lt;/p&gt;</comment>
                            <comment id="17529394" author="JIRAUSER287474" created="Thu, 28 Apr 2022 12:07:28 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt; for the explanation, and that makes sense to me.&lt;/p&gt;

&lt;p&gt;As for the &quot;&amp;lt;default&amp;gt;&quot; I don&apos;t see any harm in showing the actual path since it&apos;s documented on what that would be on the wiki.&lt;/p&gt;

&lt;p&gt;Normally I would not suggest including paths at all at the default logging level as that can expose sensitive information. However, this is being run from a command line or batch file and so any console level logging would already be showing the pathing such as the path passed into the command.&lt;/p&gt;</comment>
                            <comment id="17530093" author="markt" created="Fri, 29 Apr 2022 16:31:20 +0000"  >&lt;p&gt;I&apos;ve updated the error message to show the path.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13041924" name="Command_Prompt.png" size="38745" author="brianandle" created="Fri, 1 Apr 2022 19:23:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z112mw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-439] prunsrv &apos;--Startup=delayed&apos; sets manual mode instead</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-439</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Trying to replace AUTO for DELAYED in my long used custom service installation script, defaults to MANUAL. It seems auto and manual are set as expected but delayed is never set!&lt;/p&gt;

&lt;p&gt;c:\prunsrv.exe //IS//MyServer --DisplayName=&quot;My Server&quot; --Description=&quot;My application server&quot; --Install=&quot;c:\prunsrv.exe&quot; --Startup=delayed --StartMode=exe --StartImage=&quot;c:\app\myexe.exe&quot; --StartPath=&quot;c:\app&quot; --StartParams=start --StopMode=exe --StopImage=&quot;c:\app\myexe.exe&quot; --StopPath=&quot;c:\app&quot; --StopParams=stop --LogPath=&quot;c:\app&quot; --LogPrefix=myserver --LogLevel=info --StdOutput=auto --StdError=auto&lt;/p&gt;</description>
                <environment></environment>
        <key id="13432823">DAEMON-439</key>
            <summary>prunsrv &apos;--Startup=delayed&apos; sets manual mode instead</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gregkotsaftis">Gregory Kotsaftis</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Mar 2022 09:57:49 +0000</created>
                <updated>Tue, 20 May 2025 08:35:41 +0000</updated>
                                            <version>1.2.4</version>
                                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17504575" author="markt" created="Thu, 10 Mar 2022 20:46:57 +0000"  >&lt;p&gt;Support was implemented for update for not for initial install. It now works for both.&lt;/p&gt;</comment>
                            <comment id="17504816" author="JIRAUSER286341" created="Fri, 11 Mar 2022 09:16:30 +0000"  >&lt;p&gt;Thnx! Waiting for the new binary release!&lt;/p&gt;

&lt;p&gt;For now i use this trick after my installation cmd:&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#de350b&quot;&gt;sc config &quot;MyServer&quot; start= delayed-auto&lt;/font&gt;&lt;/p&gt;</comment>
                            <comment id="17819796" author="JIRAUSER296221" created="Thu, 22 Feb 2024 20:18:34 +0000"  >&lt;p&gt;Is it possible that this is not actually fixed for the 64-bit version?&#160; I have just downloaded 1.3.4 and observe the same behavior as OP: auto and manual work fine, but delayed results in the service being set for manual.&#160; This is true for both update and install.&lt;/p&gt;

&lt;p&gt;Also, if I manually set the service to Automatic (Delayed Start) in the Windows service manager, and then use &lt;tt&gt;print&lt;/tt&gt;, it does nor print out anything for --Startup.&#160; Although, on further investigation, it doesn&apos;t print any value for --Startup for &lt;tt&gt;auto&lt;/tt&gt; either.&lt;/p&gt;</comment>
                            <comment id="17820197" author="garydgregory" created="Fri, 23 Feb 2024 20:19:32 +0000"  >&lt;p&gt;A quick glance at git master shows something has been implemented... look for &quot;PRSRV_DELAYED&quot;.&lt;/p&gt;

&lt;p&gt;What command line are you using &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=AG_Choc&quot; class=&quot;user-hover&quot; rel=&quot;AG_Choc&quot;&gt;AG_Choc&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17820204" author="JIRAUSER296221" created="Fri, 23 Feb 2024 20:55:38 +0000"  >&lt;p&gt;Well, I&apos;ve tried it again and it&apos;s working fine now, although the &lt;tt&gt;print&lt;/tt&gt; command doesn&apos;t include the --Startup flag.&#160; The only thing I can think of that I changed was to move the --Startup flag earlier in the list of command-line parameters.&#160; Previously, I had it near the end, and now I have it near the beginning.&#160;&#160;&lt;/p&gt;

&lt;p&gt;Thanks for your quick response.&lt;/p&gt;</comment>
                            <comment id="17825847" author="JIRAUSER296221" created="Tue, 12 Mar 2024 22:17:13 +0000"  >&lt;p&gt;FYI, I have figured out how to repro the problem.&#160; &#160;&lt;/p&gt;

&lt;p&gt;Setting &lt;tt&gt;--Startup=delayed&lt;/tt&gt; works correctly for an &lt;tt&gt;install&lt;/tt&gt; command.&#160;&#160;&lt;/p&gt;

&lt;p&gt;Setting &lt;tt&gt;--&lt;/tt&gt;&lt;tt&gt;Startup=delayed&lt;/tt&gt; for an &lt;tt&gt;update&lt;/tt&gt; command changes the service to Manual startup.&#160; &lt;tt&gt;-Startup=auto&lt;/tt&gt; works correctly, however.&lt;/p&gt;</comment>
                            <comment id="17933937" author="JIRAUSER286341" created="Mon, 10 Mar 2025 14:59:44 +0000"  >&lt;p&gt;So maybe this issue should be reopened again? My script also reverts AUTO to MANUAL startup when updating...&lt;/p&gt;</comment>
                            <comment id="17952685" author="jfclere" created="Mon, 19 May 2025 16:36:14 +0000"  >&lt;p&gt;Looking to the logic: The APXCMDOPT_SRV options are not displayed with //PS// only the registry is read.&lt;br/&gt;
The APXCMDOPT_SRV options belong to the service itself, only Startup and DependsOn make sense to change, probably ServiceUser/ServicePassword should NOT be displayed. None of those are displayed for the moment.&lt;/p&gt;</comment>
                            <comment id="17952795" author="markt" created="Tue, 20 May 2025 08:35:41 +0000"  >&lt;p&gt;The purpose of the PS command was to enable recreating the service so we should include all necessary parameters. If any are security sensitive (I&apos;d argue only the password) then it should probably be masked.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10bfs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-438] prunsrv: stdout/stderr redirection does not work if log directory didn&apos;t exist</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-438</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;If you enable stdout/stderr redirection (auto) and the log directory (given by LogPath) does not exist then Procrun will create the missing directory and will create the files commons-daemon-xxxx-xx-xx.log, ...-stdout-xxxx-xx-xx.log, and ...-stderr-xxxx-xx-xx.log, but the two latter files won&apos;t be populated (filesizes stay at 0).&lt;/p&gt;

&lt;p&gt;Instead of fixing this issue in Procrun itself, imho, it might be sufficient to state this limitation in the documentation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13426790">DAEMON-438</key>
            <summary>prunsrv: stdout/stderr redirection does not work if log directory didn&apos;t exist</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hansili">Hansi</reporter>
                        <labels>
                    </labels>
                <created>Sun, 6 Feb 2022 13:35:08 +0000</created>
                <updated>Mon, 28 Feb 2022 16:24:12 +0000</updated>
                            <resolved>Mon, 28 Feb 2022 16:24:12 +0000</resolved>
                                    <version>1.2.4</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13424635">DAEMON-437</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 37 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0zafc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-437] prunsrv: Better not to redirect stdout/stderr during service installation?</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-437</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I observed the following behavior when using prunsrv:&lt;/p&gt;

&lt;p&gt;I call it with //IS//MyService and more arguments to install a Tomcat service. Especially I use the default LocalSystem user as the user who will run the installed service and the arguments:&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160; --StdOutput auto ^&lt;br/&gt;
&#160;&#160;&#160; --StdError auto ^&lt;/p&gt;

&lt;p&gt;to redirect stdout and stderr to the default files.&lt;/p&gt;

&lt;p&gt;To install the service I use a user with Administrator privileges. Running prunsrv to install the service now already creates the redirected stdout and stderr files, but only writable by Administrator.&lt;/p&gt;

&lt;p&gt;When I start the service after this service installation, it can not write to the redirected stdout and stderr files, because it runs as a lower privileged LocalSystem account.&lt;/p&gt;

&lt;p&gt;Before calling redirectStdStreams() in apps/prunsrv/prunsrv.c, there is already a special case if prunsrv was called with //TS (Run Service as console application):&lt;/p&gt;

&lt;p&gt;1692&#160;&#160;&#160;&#160; /* In debug mode allways use console */&lt;br/&gt;
1693&#160;&#160;&#160;&#160; if (lpCmdline-&amp;gt;dwCmdIndex != 1)&lt;br/&gt;
1694&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; gStdwrap.szStdOutFilename = SO_STDOUTPUT;&lt;br/&gt;
1695&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; gStdwrap.szStdErrFilename = SO_STDERROR;&lt;br/&gt;
1696&#160;&#160;&#160;&#160; }&lt;/p&gt;

&lt;p&gt;I wonder, whether it wouldn&apos;t be better to not set the redirection file names for other dwCmdIndex values as well. Here&apos;s the list of indexes from the source code:&lt;/p&gt;

&lt;p&gt;&#160; 76&#160;&#160;&#160;&#160; L&quot;RS&quot;,&#160;&#160;&#160;&#160;&#160; /* 2 Run Service */&lt;br/&gt;
&#160; 77&#160;&#160;&#160;&#160; L&quot;ES&quot;,&#160;&#160;&#160;&#160;&#160; /* 3 Execute start */&lt;br/&gt;
&#160; 78&#160;&#160;&#160;&#160; L&quot;SS&quot;,&#160;&#160;&#160;&#160;&#160; /* 4 Stop Service */&lt;br/&gt;
&#160; 79&#160;&#160;&#160;&#160; L&quot;US&quot;,&#160;&#160;&#160;&#160;&#160; /* 5 Update Service parameters */&lt;br/&gt;
&#160; 80&#160;&#160;&#160;&#160; L&quot;IS&quot;,&#160;&#160;&#160;&#160;&#160; /* 6 Install Service */&lt;br/&gt;
&#160; 81&#160;&#160;&#160;&#160; L&quot;DS&quot;,&#160;&#160;&#160;&#160;&#160; /* 7 Delete Service */&lt;br/&gt;
&#160; 82&#160;&#160;&#160;&#160; L&quot;?&quot;,&#160;&#160;&#160;&#160;&#160;&#160; /* 8 Help */&lt;br/&gt;
&#160; 83&#160;&#160;&#160;&#160; L&quot;VS&quot;,&#160;&#160;&#160;&#160;&#160; /* 9 Version */&lt;/p&gt;

&lt;p&gt;IMHO 5-9 are candidates, maybe 4 and 3 as well. At least for those I would expect that they were executed on the console and stdout/stderr would also be expected there. But I might not be aware of use cases with other needs.&lt;/p&gt;

&lt;p&gt;The normal prunsrv log file does have the same permission problem. But since it contains log info about what action had been done, I am not so sure, whether one can simply write that to stdout instead. But maybe one could use a different default file name line MyService.manage.2021-12-07.log instead of MyService.2021-12-07.log for the above indexes. Not nice, but I don&apos;t have a better idea yet.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13424635">DAEMON-437</key>
            <summary>prunsrv: Better not to redirect stdout/stderr during service installation?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rainer.jung@kippdata.de">Rainer Jung</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Jan 2022 09:17:01 +0000</created>
                <updated>Thu, 10 Mar 2022 17:30:04 +0000</updated>
                            <resolved>Thu, 10 Mar 2022 17:30:04 +0000</resolved>
                                    <version>1.2.4</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17482569" author="markt" created="Wed, 26 Jan 2022 15:30:40 +0000"  >&lt;p&gt;I&apos;m currently thinking the same as you. Anything other than RS shouldn&apos;t redirect. Assuming we make this change, we can clarify the behaviour in the documentation as well.&lt;/p&gt;</comment>
                            <comment id="17483278" author="markt" created="Thu, 27 Jan 2022 17:14:06 +0000"  >&lt;p&gt;Another reason to limit this to RS occurred to me. It we keep the redirection enabled for any other commands and the service is running we&apos;ll have two processes trying to write to the same file which is never a good idea.&lt;/p&gt;

&lt;p&gt;I am going to proceed with limiting this to just RS along with documentation updates as appropriate.&lt;/p&gt;</comment>
                            <comment id="17483384" author="markt" created="Thu, 27 Jan 2022 18:58:38 +0000"  >&lt;p&gt;FYI - a review of the docs didn&apos;t identify any updates required.&lt;/p&gt;</comment>
                            <comment id="17484641" author="markt" created="Mon, 31 Jan 2022 12:30:47 +0000"  >&lt;p&gt;Re-open to discuss what to do with the prunsrv log file&lt;/p&gt;</comment>
                            <comment id="17484647" author="markt" created="Mon, 31 Jan 2022 12:42:17 +0000"  >&lt;p&gt;Looking at the source code, the issue of multiple processes writing to the prunsrv log file shouldn&apos;t be an issue unless multiple users are trying to run commands at the same time. The changes to handle that use case would be significant and I&apos;m not proposing we support that.&lt;/p&gt;

&lt;p&gt;So, think we have two choices. Drop the prunsrv log entirely and just use stdout/stderr. That would mean losing the log of actions taken which I think would be a step backwards. The other option is to configure the log file to allow the service user to write to it. I think that is the way to go.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="17484656" author="rainer.jung@kippdata.de" created="Mon, 31 Jan 2022 13:07:03 +0000"  >&lt;p&gt;I do like the log as an action protocol. And I do not think it would be important to make it safe for concurrent use.&lt;br/&gt;
But: there is a conceptional problem when using configuration flags in combination with the //IS action to install a service. Those flags IMHO are getting used for the service AND also for the execution of the //IS action itself. That doesn&apos;t matter for most switches, unfortunately for the --Log* flags it dies matter. I see no way of setting the log for the //IS action different from what the service used - except for editing the service manually after the //IS execution. That&apos;s why I thought about using a different default log file name for service execution versus the interactive actions. But that still doesn&apos;t solve the conflicting uses of the --Log* flags for interactive commands versus the installed service &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17501259" author="markt" created="Fri, 4 Mar 2022 10:53:55 +0000"  >&lt;p&gt;I am currently working on the permissions issue. It turned out to be a little more complex that I first thought. I am currently implementing a solution that grants the specified user read, write &amp;amp; execute permissions to the logs directory (with inheritance enabled) any time the service user is specified/changed. That should address the permissions issues as best we can.&lt;/p&gt;

&lt;p&gt;Separating logs for configuration changes and starting/stopping the service is a separate issue and probably needs to be discussed as such. I&apos;m not sure it makes sense to separate these. The service will log using whatever mechanism the daemonized Java app is configured to use. I&apos;m beginning to think having all the Commons Daemon specific logging (installation, configuration, start,&#160; stop) in a single log makes more sense. I&apos;m thinking of the following sequence:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;install&lt;/li&gt;
	&lt;li&gt;configure&lt;/li&gt;
	&lt;li&gt;fail to start due to config error&lt;/li&gt;
	&lt;li&gt;fix config&lt;/li&gt;
	&lt;li&gt;start&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think having the daemon logs for all of that in one log file would be easier to follow.&lt;/p&gt;

&lt;p&gt;I intend to resolve this issue once the permissions issue is addressed. The separating logs issue should move to a new issue.&lt;/p&gt;</comment>
                            <comment id="17501368" author="garydgregory" created="Fri, 4 Mar 2022 14:56:08 +0000"  >&lt;p&gt;I do like the idea of one log file. &lt;/p&gt;</comment>
                            <comment id="17504466" author="markt" created="Thu, 10 Mar 2022 17:30:04 +0000"  >&lt;p&gt;I&apos;ve fixed the permissions issues. Setting / changing the service user will grant that user access to the logging directory.&lt;/p&gt;

&lt;p&gt;The issue of separate log files should be raised as an enhancement in a new issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13426790">DAEMON-438</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0yx7k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-436] jsvc Boot failure</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-436</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;java&#24212;&#29992;&#65292;&#22312;aix7.1.3&#19978;&#21551;&#21160;jsvc&#24212;&#29992;&#22833;&#36133;&#65292;&#20986;&#29616;&#19968;&#19979;&#38382;&#39064;&#65306;&lt;/p&gt;

&lt;p&gt;Switching umask from 022 to 022&lt;br/&gt;
Using default JVM in /usr/java8_64/jre/lib/ppc64/j9vm/libjvm.so&lt;br/&gt;
Attemtping to load library /usr/java8_64/jre/lib/ppc64/j9vm/libjvm.so&lt;br/&gt;
Cannot dynamically link to /usr/java8_64/jre/lib/ppc64/j9vm/libjvm.so&lt;br/&gt;
Could not load module /usr/java8_64/jre/lib/ppc64/j9vm/libjvm.so.&lt;br/&gt;
System error: Exec format error&lt;br/&gt;
java_init failed&lt;br/&gt;
remove_pid_file: open /home/minion/cc-product-minion/temp/miniond.pid: fd=3&lt;br/&gt;
Service exit with a return value of 1&lt;/p&gt;

&lt;p&gt;&#36825;&#26159;&#21551;&#21160;&#33050;&#26412;&#65306;&#35831;&#30475;&#38468;&#20214;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;&#22312;aix7.1.3&#29615;&#22659;&#19978;&#32534;&#35793;jsvc&#36890;&#36807;&#20102;&#65292;&#20294;&#26159;&#21551;&#21160;&#30340;&#26102;&#20505;&#20986;&#29616;&#22312;Cannot dynamically link to /usr/java8_64/jre/lib/ppc64/j9vm/libjvm.so&#65292;&#25105;&#20351;&#29992;&#30340;java version &quot;1.8.0_311&quot;&#65292;IBM J9 VM (build 2.9, JRE 1.8.0 AIX ppc64-64-Bit Compressed References 20211022_15212 (JIT enabled, AOT enabled)&lt;/p&gt;</environment>
        <key id="13418780">DAEMON-436</key>
            <summary>jsvc Boot failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="1615096842@qq.com">sunly</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Tue, 21 Dec 2021 08:30:15 +0000</created>
                <updated>Thu, 23 Dec 2021 07:26:27 +0000</updated>
                            <resolved>Thu, 23 Dec 2021 07:26:27 +0000</resolved>
                                    <version>1.2.4</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="43200">12h</timeoriginalestimate>
                            <timeestimate seconds="43200">12h</timeestimate>
                                        <comments>
                            <comment id="17463097" author="michael-o" created="Tue, 21 Dec 2021 09:56:16 +0000"  >&lt;p&gt;Write in English or I will close the issue.&lt;/p&gt;</comment>
                            <comment id="17463149" author="markt" created="Tue, 21 Dec 2021 10:48:26 +0000"  >&lt;p&gt;There is no need for that sort of attitude. Not everyone speaks English. Google translate usually provides a good enough translation to figure out what the problem is.&lt;/p&gt;</comment>
                            <comment id="17463151" author="markt" created="Tue, 21 Dec 2021 10:52:05 +0000"  >&lt;p&gt;Translation of the description:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
For java applications, the jsvc application fails to start on aix7.1.3, and the following problems occur:
Switching umask from 022 to 022
Using &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; JVM in /usr/java8_64/jre/lib/ppc64/j9vm/libjvm.so
Attemtping to load library /usr/java8_64/jre/lib/ppc64/j9vm/libjvm.so
Cannot dynamically link to /usr/java8_64/jre/lib/ppc64/j9vm/libjvm.so
Could not load module /usr/java8_64/jre/lib/ppc64/j9vm/libjvm.so.
&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt; error: Exec format error
java_init failed
remove_pid_file: open /home/minion/cc-product-minion/temp/miniond.pid: fd=3
Service exit with a &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value of 1
This is the startup script: please see the attachment &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17463157" author="michael-o" created="Tue, 21 Dec 2021 10:58:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt;, no doubt, but we can expect people at least tell that they barely or don&apos;t speak English.&lt;/p&gt;</comment>
                            <comment id="17463158" author="michael-o" created="Tue, 21 Dec 2021 11:01:30 +0000"  >&lt;p&gt;It is every likely, but jvsc and the JVM are in different arch formats.&lt;/p&gt;

&lt;p&gt;Please provide the output of:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ file jsvc
$ file /usr/java8_64/jre/lib/ppc64/j9vm/libjvm.so
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17463556" author="JIRAUSER282374" created="Wed, 22 Dec 2021 03:00:53 +0000"  >&lt;p&gt;Please see this is my output following your guidance&#65306;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;file jsvc&lt;br/&gt;
jsvc: executable (RISC System/6000) or object module not stripped&lt;/li&gt;
	&lt;li&gt;file /usr/java8_64/jre/lib/ppc64/j9vm/libjvm.so&lt;br/&gt;
/usr/java8_64/jre/lib/ppc64/j9vm/libjvm.so: 64-bit XCOFF executable or object module not stripped&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17463559" author="JIRAUSER282374" created="Wed, 22 Dec 2021 03:07:34 +0000"  >&lt;p&gt;Thank you very much for your help. I&apos;m sorry that I can&apos;t speak English. Now I will use the translation software to translate it. thank you&lt;/p&gt;</comment>
                            <comment id="17463611" author="michael-o" created="Wed, 22 Dec 2021 07:13:47 +0000"  >&lt;p&gt;As I have assumed you have obtained  a stoneage executable from somewhere. You must compile from source on the same platform your JVM runs. Additional questions go to the mailing list. &lt;/p&gt;</comment>
                            <comment id="17463753" author="markt" created="Wed, 22 Dec 2021 11:28:18 +0000"  >&lt;p&gt;Typo &quot;compare&quot; -&amp;gt; &quot;compile&quot;.&#160;&lt;/p&gt;</comment>
                            <comment id="17463754" author="michael-o" created="Wed, 22 Dec 2021 11:34:46 +0000"  >&lt;p&gt;Thanks, there seems no edit button for this project. Weird.&lt;/p&gt;</comment>
                            <comment id="17464229" author="JIRAUSER282374" created="Thu, 23 Dec 2021 02:52:19 +0000"  >&lt;p&gt;The problem has not been solved yet&lt;/p&gt;</comment>
                            <comment id="17464231" author="JIRAUSER282374" created="Thu, 23 Dec 2021 02:56:49 +0000"  >&lt;p&gt;Sorry, I don&apos;t quite understand what you mean. Could you tell me more about it?&lt;/p&gt;</comment>
                            <comment id="17464337" author="michael-o" created="Thu, 23 Dec 2021 07:26:11 +0000"  >&lt;p&gt;There is no bug here. Your setup is wrong. Engage with the mailing list to get help. Find a colleague who knows how to compile software in C.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13037761" name="minion_jsvc.sh" size="1744" author="1615096842@qq.com" created="Tue, 21 Dec 2021 08:15:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>ADT00008_L</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xx60:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-435] While stopping service, service crashed with error 1067</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-435</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When stopping the service, service crashes with Error 1067: The process terminated unexpectedly.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;When enabled the debug mode for prunsrv, following messages are seen&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1892) [ 1816] Apache Commons Daemon procrun log initialized.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;&#160; ( prunsrv.c:1896) [ 1816] Apache Commons Daemon procrun (1.2.4.0 64-bit) started.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;&#160; ( prunsrv.c:945 ) [ 1816] Updating service...&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;warn&amp;#93;&lt;/span&gt;&#160; ( service.c:143 ) [ 1816] Failed to obtain service description&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;&#160; ( prunsrv.c:1007) [ 1816] Updated service &apos;OracleAVAgent&apos;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;&#160; ( prunsrv.c:1014) [ 1816] Finished updating service &apos;OracleAVAgent&apos;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;&#160; ( prunsrv.c:1980) [ 1816] Apache Commons Daemon procrun finished.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1032) &lt;span class=&quot;error&quot;&gt;&amp;#91;12208&amp;#93;&lt;/span&gt; reportServiceStatusE: dwCurrentState = 4, dwWin32ExitCode = 0, dwWaitHint = 0, dwServiceSpecificExitCode = 0.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1032) &lt;span class=&quot;error&quot;&gt;&amp;#91;12208&amp;#93;&lt;/span&gt; reportServiceStatusE: dwCurrentState = 3, dwWin32ExitCode = 0, dwWaitHint = 3000, dwServiceSpecificExitCode = 0.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;&#160; ( prunsrv.c:1132) &lt;span class=&quot;error&quot;&gt;&amp;#91;10076&amp;#93;&lt;/span&gt; Stopping service...&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:414 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10076&amp;#93;&lt;/span&gt; Loaded JVM DLL &apos;&apos;, home &apos;&apos;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:419 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10076&amp;#93;&lt;/span&gt; JNI_GetCreatedJavaVMs...&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1039) [ 8808] DLL search path set to &apos;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1003) [ 8808] argv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; = STOP&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1003) [ 8808] argv&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; = -l&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1003) [ 8808] argv&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; = WARNING&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1062) [ 8808] Java worker thread started for oracle/av/platform/agent/AgentController:main&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1068) [ 8808] JNI calling static void method oracle/av/platform/agent/AgentController:main&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-10-29 12:34:54&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:566 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;12220&amp;#93;&lt;/span&gt; Exit hook with exit code 0&lt;/p&gt;</description>
                <environment></environment>
        <key id="13410871">DAEMON-435</key>
            <summary>While stopping service, service crashed with error 1067</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kavig">Kaviarasi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Nov 2021 14:55:10 +0000</created>
                <updated>Mon, 12 Aug 2024 13:07:29 +0000</updated>
                            <resolved>Tue, 4 Oct 2022 12:38:28 +0000</resolved>
                                    <version>1.2.4</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17442361" author="garydgregory" created="Thu, 11 Nov 2021 17:03:17 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kavig&quot; class=&quot;user-hover&quot; rel=&quot;kavig&quot;&gt;kavig&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;It would help to get logging from the Java app you are managing, which might be the most revealing of all.&lt;/p&gt;

&lt;p&gt;You could also clone our git repo and build the current version of prunsrv.exe which provides more debug logging. See in src\native\windows\README.txt for build instructions.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17528764" author="markt" created="Wed, 27 Apr 2022 12:40:04 +0000"  >&lt;p&gt;Without steps to reproduce this failure, this issue will eventually get resolved as unable to reproduce.&lt;/p&gt;</comment>
                            <comment id="17612596" author="markt" created="Tue, 4 Oct 2022 12:38:28 +0000"  >&lt;p&gt;No further information provided by OP.&lt;/p&gt;</comment>
                            <comment id="17872921" author="JIRAUSER306524" created="Mon, 12 Aug 2024 13:07:29 +0000"  >&lt;p&gt;We have been getting similar error when we upgraded the from 1.2.4 to 1.4.0. This is reproducible when you try to stop the application from the windows service manager. Once I downgraded the library back to 1.2.4, the issue was resolved.&#160;&lt;/p&gt;

&lt;p&gt;1. It shows up as a 1067 windows error and in the event viewers it shows as: The service terminated unexpectedly (nothing informative in the details except the key word&#160;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;Event xmlns=&quot;http://schemas.microsoft.com/win/2004/08/events/event&quot;&amp;gt;&#160;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;System&amp;gt;&#160;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&amp;lt;Provider Name=&quot;&lt;b&gt;Service Control Manager&lt;/b&gt;&quot; Guid=&quot;{*}&lt;/p&gt;
{555908d1-a6d7-4695-8e1e-26931d2012f4}
&lt;p&gt;&lt;b&gt;&quot; EventSourceName=&quot;&lt;/b&gt;Service Control Manager{*}&quot; /&amp;gt;&#160;&lt;/p&gt;

&lt;p&gt;&amp;lt;EventID Qualifiers=&quot;&lt;b&gt;49152&lt;/b&gt;&quot;&amp;gt;7034&amp;lt;/EventID&amp;gt;&#160;&lt;/p&gt;

&lt;p&gt;&amp;lt;Version&amp;gt;0&amp;lt;/Version&amp;gt;&#160;&lt;/p&gt;

&lt;p&gt;&amp;lt;Level&amp;gt;2&amp;lt;/Level&amp;gt;&#160;&lt;/p&gt;

&lt;p&gt;&amp;lt;Task&amp;gt;0&amp;lt;/Task&amp;gt;&#160;&lt;/p&gt;

&lt;p&gt;&amp;lt;Opcode&amp;gt;0&amp;lt;/Opcode&amp;gt;&#160;&lt;/p&gt;

&lt;p&gt;&amp;lt;Keywords&amp;gt;0x8080000000000000&amp;lt;/Keywords&amp;gt;&#160;&lt;/p&gt;

&lt;p&gt;&amp;lt;TimeCreated SystemTime=&quot;&lt;b&gt;2024-08-12T12:29:27.6741625Z&lt;/b&gt;&quot; /&amp;gt;&#160;&lt;/p&gt;

&lt;p&gt;&amp;lt;EventRecordID&amp;gt;3484&amp;lt;/EventRecordID&amp;gt;&#160;&lt;/p&gt;

&lt;p&gt;&amp;lt;Correlation /&amp;gt;&#160;&lt;/p&gt;

&lt;p&gt;&amp;lt;Execution ProcessID=&quot;&lt;b&gt;800&lt;/b&gt;&quot; ThreadID=&quot;&lt;b&gt;9896&lt;/b&gt;&quot; /&amp;gt;&lt;/p&gt;


&lt;p&gt;&lt;font color=&quot;#0747a6&quot;&gt;The debug logs of the prunsrv:&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:06&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; &#160;( prunsrv.c:1610) [ 4300] Service SERVICE_CONTROL_STOP signalled.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:06&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1127) [ 4300] reportServiceStatusE: dwCurrentState = 3 (SERVICE_STOP_PENDING), dwWin32ExitCode = 0, dwWaitHint = 3000 milliseconds, dwServiceSpecificExitCode = 0.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; &#160;( prunsrv.c:1227) [ 9116] Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:419 ) [ 9116] Loaded JVM DLL &apos;C:\Program Files\framework\runtime\jre\bin\server\jvm.dll&apos;, home &apos;C:\Program Files\ArcGIS\Portal\framework\runtime\jre&apos;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:424 ) [ 9116] JNI_GetCreatedJavaVMs...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1067) &lt;span class=&quot;error&quot;&gt;&amp;#91;12016&amp;#93;&lt;/span&gt; Java worker thread started for com/impl/Main:stop&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1073) &lt;span class=&quot;error&quot;&gt;&amp;#91;12016&amp;#93;&lt;/span&gt; JNI calling static void method com/impl/Main:stop&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:08&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1277) [ 9116] Waiting for Java JNI stop worker to finish for com/impl/Main:stop...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:08&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1167) [ 9116] apxJavaWait -&amp;gt; WaitForSingleObject (0x0000000000000C78, -1 milliseconds) (-1=INFINITE)...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:24&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1092) &lt;span class=&quot;error&quot;&gt;&amp;#91;12016&amp;#93;&lt;/span&gt; Java worker thread finished com/impl/Main:stop with status = 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:24&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:1170) [ 9116] apxJavaWait &amp;lt;- WaitForSingleObject (0x0000000000000C78, -1 milliseconds) = 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:24&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1282) [ 9116] Java JNI stop worker finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:24&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1127) [ 9116] reportServiceStatusE: dwCurrentState = 3 (SERVICE_STOP_PENDING), dwWin32ExitCode = 0, dwWaitHint = 300000 milliseconds, dwServiceSpecificExitCode = 0.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:24&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1390) [ 9116] Waiting for worker to die naturally...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:24&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1401) [ 9116] Worker finished gracefully in 0 milliseconds.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:24&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; &#160;( prunsrv.c:1411) [ 9116] Service stop thread completed.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2024-08-12 05:29:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:571 ) [ 5200] Exit hook with exit code 0&lt;/p&gt;


&lt;p&gt;The service actually stops, but the windows throws the error.&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 10 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0wkw8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-434] The data area passed to a system call is too small</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-434</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Batch file:&lt;/p&gt;

&lt;p&gt;REM hSQLdb Windows Service Batch File.&lt;br/&gt;
REM Install hSQLdb as Service Using Apache Commons Daemon Programs.&lt;br/&gt;
REM The command below will install hSQLdb as a Service using list of Databases from server.properties.&lt;br/&gt;
prunsrv update hSQLdb -&lt;del&gt;DisplayName=&quot;hSQLdb Database&quot; --Description=&quot;hSQLdb Database Service&quot; --Startup=automatic --StartMode=Java --StopMode=Java --JvmMx=128 --StartPath=C:\hSQLdb --Classpath=C:\hSQLdb\lib\hsqldb.jar --StartClass=org.hsqldb.server.Server --StartParams=&lt;/del&gt;-props ++StartParams=C:/hSQLdb/server.properties&lt;br/&gt;
REM Start The Service.&lt;br/&gt;
prunsrv start hSQLdb&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The service is installed properly but, when trying to start it, the subject error is returned.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Server 2019&lt;/p&gt;

&lt;p&gt;OpenJDK 11&lt;/p&gt;

&lt;p&gt;hSQLdb&#160; 2.6&lt;/p&gt;</environment>
        <key id="13399639">DAEMON-434</key>
            <summary>The data area passed to a system call is too small</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="DickHildreth">Dick Hildreth</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Sep 2021 01:03:43 +0000</created>
                <updated>Fri, 11 Mar 2022 11:30:53 +0000</updated>
                            <resolved>Fri, 11 Mar 2022 11:30:53 +0000</resolved>
                                    <version>1.2.4</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17412033" author="garydgregory" created="Wed, 8 Sep 2021 15:55:15 +0000"  >&lt;p&gt;Do you have the full error reported? Does the Windows Event Viewer provide any more information?&#160;&lt;/p&gt;</comment>
                            <comment id="17412073" author="dickhildreth" created="Wed, 8 Sep 2021 16:43:00 +0000"  >&lt;p&gt;I&apos;m sorry I hadn&apos;t done that.  The most succinct representation from the&lt;br/&gt;
Event Viewer is the XML:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;Event xmlns=&quot;http://schemas.microsoft.com/win/2004/08/events/event&quot;&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;System&amp;gt;&lt;br/&gt;
  &amp;lt;Provider Name=&quot;Service Control Manager&quot;&lt;br/&gt;
Guid=&quot;
{555908d1-a6d7-4695-8e1e-26931d2012f4}
&lt;p&gt;&quot; EventSourceName=&quot;Service&lt;br/&gt;
Control Manager&quot; /&amp;gt;&lt;br/&gt;
  &amp;lt;EventID Qualifiers=&quot;49152&quot;&amp;gt;7034&amp;lt;/EventID&amp;gt;&lt;br/&gt;
  &amp;lt;Version&amp;gt;0&amp;lt;/Version&amp;gt;&lt;br/&gt;
  &amp;lt;Level&amp;gt;2&amp;lt;/Level&amp;gt;&lt;br/&gt;
  &amp;lt;Task&amp;gt;0&amp;lt;/Task&amp;gt;&lt;br/&gt;
  &amp;lt;Opcode&amp;gt;0&amp;lt;/Opcode&amp;gt;&lt;br/&gt;
  &amp;lt;Keywords&amp;gt;0x8080000000000000&amp;lt;/Keywords&amp;gt;&lt;br/&gt;
  &amp;lt;TimeCreated SystemTime=&quot;2021-09-08T16:38:34.902082700Z&quot; /&amp;gt;&lt;br/&gt;
  &amp;lt;EventRecordID&amp;gt;10894&amp;lt;/EventRecordID&amp;gt;&lt;br/&gt;
  &amp;lt;Correlation /&amp;gt;&lt;br/&gt;
  &amp;lt;Execution ProcessID=&quot;660&quot; ThreadID=&quot;3912&quot; /&amp;gt;&lt;br/&gt;
  &amp;lt;Channel&amp;gt;System&amp;lt;/Channel&amp;gt;&lt;br/&gt;
  &amp;lt;Computer&amp;gt;WIN-L5KSPUB8IFL&amp;lt;/Computer&amp;gt;&lt;br/&gt;
  &amp;lt;Security /&amp;gt;&lt;br/&gt;
  &amp;lt;/System&amp;gt;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;EventData&amp;gt;&lt;br/&gt;
  &amp;lt;Data Name=&quot;param1&quot;&amp;gt;hSQLdb Database&amp;lt;/Data&amp;gt;&lt;br/&gt;
  &amp;lt;Data Name=&quot;param2&quot;&amp;gt;1&amp;lt;/Data&amp;gt;&lt;br/&gt;
  &amp;lt;Binary&amp;gt;6800530051004C00640062000000&amp;lt;/Binary&amp;gt;&lt;br/&gt;
  &amp;lt;/EventData&amp;gt;&lt;br/&gt;
  &amp;lt;/Event&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks,&lt;br/&gt;
Dick&lt;/p&gt;

&lt;p&gt;On Wed, Sep 8, 2021 at 10:56 AM Gary D. Gregory (Jira) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;
</comment>
                            <comment id="17423659" author="garydgregory" created="Sun, 3 Oct 2021 12:35:53 +0000"  >&lt;p&gt;Who returns &quot;The data area passed to a system call is too small&quot;? May you get a stack trace?&lt;/p&gt;</comment>
                            <comment id="17426724" author="dickhildreth" created="Sun, 10 Oct 2021 00:49:00 +0000"  >&lt;p&gt;Gary,&lt;/p&gt;

&lt;p&gt;The response came from Windows when the attempt was made to create the&lt;br/&gt;
Service using the Daemon from Tomcat.&lt;/p&gt;

&lt;p&gt;I dropped the effort when I found that the Yet Another Java Service Wrapper&lt;br/&gt;
(yajsw.sourceforge.io) worked beautifully.&lt;/p&gt;

&lt;p&gt;Please close the ticket for lack of further interest.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Dick&lt;/p&gt;



&lt;p&gt;On Sun, Oct 3, 2021 at 7:36 AM Gary D. Gregory (Jira) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0unrk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-432] StopTimeout flag not applied when using ProcRun</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-432</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Problem steps&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Create a service using Apache Commons Daemon (include &apos;StopTimeout=30&apos;) as parameter when installing the service with PRUNSRV&lt;/li&gt;
	&lt;li&gt;Let the service class have a Thread that never closes properly&lt;/li&gt;
	&lt;li&gt;Shut down service&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Observe that the service cannot be stopped and waits indefinitely, until prunsrv.exe is killed using Task Manager.&lt;/p&gt;

&lt;p&gt;Could this please be improved in the next version of Apache Commons Daemon? This problem&#160; does not help where applications may require forceful exit, due to coding bugs, making the service experience degraded as closing the service never times out.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 2019 x64&lt;/p&gt;</environment>
        <key id="13364298">DAEMON-432</key>
            <summary>StopTimeout flag not applied when using ProcRun</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="japie.vdlinde">Japie vd Linde</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Mar 2021 11:30:59 +0000</created>
                <updated>Tue, 22 Jun 2021 13:29:50 +0000</updated>
                            <resolved>Tue, 22 Jun 2021 13:29:50 +0000</resolved>
                                    <version>1.2.3</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17300561" author="garydgregory" created="Fri, 12 Mar 2021 19:11:30 +0000"  >&lt;p&gt;Looks like a duplicate of&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-430&quot; title=&quot;prunsrv stop timeout not honored&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-430&quot;&gt;&lt;del&gt;DAEMON-430&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="17301410" author="japie.vdlinde" created="Mon, 15 Mar 2021 06:14:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;- yes marked duplicate of&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-430&quot; title=&quot;prunsrv stop timeout not honored&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-430&quot;&gt;&lt;del&gt;DAEMON-430&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;How do I know when will version 1.2.5 be released?&lt;/p&gt;</comment>
                            <comment id="17302535" author="garydgregory" created="Tue, 16 Mar 2021 13:43:48 +0000"  >&lt;p&gt;You can subscribe to the dev or announcement mailing list.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13357099">DAEMON-430</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0omrc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-431] prunsrv crashes when stopping most windows versions</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-431</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Crashes when stopping every time. This is from win10 fully patched, but also crashes on server 2012 and 2016 older patched.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Faulting application name: wildfly-service.exe, version: 1.2.4.0, time stamp: 0x600011df&lt;br/&gt;
Faulting module name: ntdll.dll, version: 10.0.19041.789, time stamp: 0x4f929756&lt;br/&gt;
Exception code: 0xc0000374&lt;br/&gt;
Fault offset: 0x00000000000ff099&lt;br/&gt;
Faulting process id: 0x14d4&lt;br/&gt;
Faulting application start time: 0x01d6ff2eb6330c32&lt;br/&gt;
Faulting application path: C:\web\bin\service\amd64\wildfly-service.exe&lt;br/&gt;
Faulting module path: C:\WINDOWS\SYSTEM32\ntdll.dll&lt;br/&gt;
Report Id: f2389cdb-df37-4a9c-b862-4399161457ea&lt;br/&gt;
Faulting package full name: &lt;br/&gt;
Faulting package-relative application ID:&lt;/p&gt;</description>
                <environment>&lt;p&gt;windows 10 fully patched.&lt;/p&gt;</environment>
        <key id="13357846">DAEMON-431</key>
            <summary>prunsrv crashes when stopping most windows versions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sw508">scott williams</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Feb 2021 23:16:51 +0000</created>
                <updated>Fri, 10 May 2024 10:59:51 +0000</updated>
                            <resolved>Fri, 10 May 2024 10:59:51 +0000</resolved>
                                    <version>1.2.4</version>
                                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17282131" author="garydgregory" created="Wed, 10 Feb 2021 00:21:26 +0000"  >&lt;p&gt;Can you capture a stack trace? You can also try with debug logging which might show us how far we get.&lt;/p&gt;</comment>
                            <comment id="17282192" author="sw508" created="Wed, 10 Feb 2021 03:08:14 +0000"  >&lt;p&gt;I can capture a stack trace if you can point me to the steps. I have java tools installed, but can install anything MS if needed to do it, just not sure what I would need to do.&lt;/p&gt;

&lt;p&gt;Debug logs below. Startup works fine. When I stop the service, it does the right thing and will reach out to wildfly and it will issue the stop command. This one here:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[2021-02-09 18:59:11] [debug] (rprocess.c:554 ) [ 9144] Apache Commons Daemon Command line: cmd.exe &lt;span class=&quot;code-quote&quot;&gt;&quot;/c jboss-cli.bat --controller=localhost:9990 --connect --user=admin --password=ff@aaaaaa@bb@dd --command=:shutdown&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;does in fact stop wildfly. But then the service just shows stopping for a while. About a minute like we see in the logs. At 19:00:15, we record the application event log crash I pasted above.&lt;/p&gt;

&lt;p&gt;Older versions of prunsrv (1.0.15) would throw this fault on both start and stop for server 2012 but not win10. But this 1.2.4 crashes on all of my test machines when stopping. It does stop, but makes it appear to be very slow when in fact looks like we are waiting on a timeout of some type.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1892) [ 2408] Apache Commons Daemon procrun log initialized.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; ( prunsrv.c:1896) [ 2408] Apache Commons Daemon procrun (1.2.4.0 64-bit) started.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; ( prunsrv.c:1806) [ 2408] Running Service &apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1577) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Inside ServiceMain...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1032) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; reportServiceStatusE: dwCurrentState = 2, dwWin32ExitCode = 0, dwWaitHint = 3000, dwServiceSpecificExitCode = 0.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; ( prunsrv.c:1325) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:519 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Apache Commons Daemon apxProcessExecute()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:258 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Apache Commons Daemon procrun __apxProcCreateChildPipes()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:535 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Apache Commons Daemon AplZeroMemory()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:550 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Apache Commons Daemon GetEnvironmentStringsW()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:553 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Apache Commons Daemon Application name: cmd.exe&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:554 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Apache Commons Daemon Command line: cmd.exe /c set NOPAUSE=Y &amp;amp;&amp;amp; standalone.bat -Djboss.server.base.dir=C:\web\standalone --server-config=standalone.xml&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:555 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Apache Commons Daemon Working path: C:\web\bin&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:573 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Apache Commons Daemon CreateProcessW()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:595 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Apache Commons Daemon CreateThread()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:598 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Apache Commons Daemon CreateThread()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:601 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Apache Commons Daemon ResumeThread()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:603 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Apache Commons Daemon CreateThread()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:609 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Apache Commons Daemon apxProcessExecute() returning TRUE&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; ( prunsrv.c:1488) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Service started in 11 milliseconds.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1032) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; reportServiceStatusE: dwCurrentState = 4, dwWin32ExitCode = 0, dwWaitHint = 0, dwServiceSpecificExitCode = 0.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:58:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1732) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Waiting for worker to finish...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1032) [ 2408] reportServiceStatusE: dwCurrentState = 3, dwWin32ExitCode = 0, dwWaitHint = 3000, dwServiceSpecificExitCode = 0.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; ( prunsrv.c:1132) [ 9144] Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:519 ) [ 9144] Apache Commons Daemon apxProcessExecute()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:258 ) [ 9144] Apache Commons Daemon procrun __apxProcCreateChildPipes()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:535 ) [ 9144] Apache Commons Daemon AplZeroMemory()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:550 ) [ 9144] Apache Commons Daemon GetEnvironmentStringsW()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:553 ) [ 9144] Apache Commons Daemon Application name: cmd.exe&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:554 ) [ 9144] Apache Commons Daemon Command line: cmd.exe &quot;/c jboss-cli.bat --controller=localhost:9990 --connect --user=admin --password=ff@aaaaaa@bb@dd --command=:shutdown&quot;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:555 ) [ 9144] Apache Commons Daemon Working path: C:\web\bin&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:573 ) [ 9144] Apache Commons Daemon CreateProcessW()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:595 ) [ 9144] Apache Commons Daemon CreateThread()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:598 ) [ 9144] Apache Commons Daemon CreateThread()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:601 ) [ 9144] Apache Commons Daemon ResumeThread()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:603 ) [ 9144] Apache Commons Daemon CreateThread()&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:609 ) [ 9144] Apache Commons Daemon apxProcessExecute() returning TRUE&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1253) [ 9144] Waiting for stop worker to finish...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:122 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;13864&amp;#93;&lt;/span&gt; Apache Commons Daemon Child process exit code 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1737) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Worker finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1746) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Waiting for ShutdownEvent.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 18:59:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1032) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; reportServiceStatusE: dwCurrentState = 3, dwWin32ExitCode = 0, dwWaitHint = 60000, dwServiceSpecificExitCode = 0.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 19:00:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1749) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; ShutdownEvent signaled.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 19:00:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1755) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; Waiting 1 minute for all threads to exit.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 19:00:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1032) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; reportServiceStatusE: dwCurrentState = 3, dwWin32ExitCode = 0, dwWaitHint = 60000, dwServiceSpecificExitCode = 0.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 19:00:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1768) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; JVM destroyed.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 19:00:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1032) &lt;span class=&quot;error&quot;&gt;&amp;#91;28268&amp;#93;&lt;/span&gt; reportServiceStatusE: dwCurrentState = 1, dwWin32ExitCode = 0, dwWaitHint = 0, dwServiceSpecificExitCode = 0.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 19:00:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; ( prunsrv.c:1808) [ 2408] Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2021-02-09 19:00:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; ( prunsrv.c:1980) [ 2408] Apache Commons Daemon procrun finished.&lt;/p&gt;</comment>
                            <comment id="17284712" author="garydgregory" created="Mon, 15 Feb 2021 13:44:33 +0000"  >&lt;p&gt;Maybe start here &lt;a href=&quot;https://techcommunity.microsoft.com/t5/ask-the-performance-team/basic-debugging-of-an-application-crash/ba-p/372392&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://techcommunity.microsoft.com/t5/ask-the-performance-team/basic-debugging-of-an-application-crash/ba-p/372392&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17845296" author="markt" created="Fri, 10 May 2024 10:59:51 +0000"  >&lt;p&gt;No further information provided after an extended period of time.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0njmg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-430] prunsrv stop timeout not honored</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-430</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;From &lt;a href=&quot;https://commons.apache.org/proper/commons-daemon/procrun.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;procrun&lt;/a&gt; , --StopTimeout can be used to define the time that procrun waits for service to exit.&lt;/p&gt;

&lt;p&gt;But it waits forever even setting --StopTimeout when&#160; apxServiceControl(SERVICE_CONTROL_STOP) hangs.&lt;br/&gt;
1105            apxLogWrite(APXLOG_MARK_DEBUG &quot;Waiting for stop worker to finish...&quot;);&lt;br/&gt;
1106            apxHandleWait(hWorker, INFINITE, FALSE);&lt;br/&gt;
1107            apxLogWrite(APXLOG_MARK_DEBUG &quot;Stop worker finished.&quot;);&lt;/p&gt;</description>
                <environment></environment>
        <key id="13357099">DAEMON-430</key>
            <summary>prunsrv stop timeout not honored</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jfclere">Jean-Frederic Clere</assignee>
                                    <reporter username="jfclere">Jean-Frederic Clere</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Feb 2021 14:21:13 +0000</created>
                <updated>Mon, 15 Mar 2021 06:13:41 +0000</updated>
                            <resolved>Fri, 12 Mar 2021 19:12:25 +0000</resolved>
                                    <version>1.2.3</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17300562" author="garydgregory" created="Fri, 12 Mar 2021 19:12:25 +0000"  >&lt;p&gt;In git master.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13364298">DAEMON-432</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nf0o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-429] prunsrv.exe, and prunmgr.exe improper binary protection</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-429</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The PESecurity utility identified the specified (prunsrv.exe, and prunmgr.exe) does not have Control Flow Guard enabled causing it to fail our software security check. We would like to request that these (prunsrv.exe, and prunmgr.exe) to be compiled with the Control Flow Guard enabled in the next Apache commons-daemon release.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13354979">DAEMON-429</key>
            <summary>prunsrv.exe, and prunmgr.exe improper binary protection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Garidi Sambasiva Rao">Sambasivarao Garidi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Jan 2021 16:44:13 +0000</created>
                <updated>Tue, 14 May 2024 13:49:53 +0000</updated>
                            <resolved>Tue, 14 May 2024 13:49:53 +0000</resolved>
                                    <version>1.2.3</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>Procrun</component>
                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17272988" author="garydgregory" created="Wed, 27 Jan 2021 16:47:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Garidi+Sambasiva+Rao&quot; class=&quot;user-hover&quot; rel=&quot;Garidi Sambasiva Rao&quot;&gt;Garidi Sambasiva Rao&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please test our current version: 1.2.4.&lt;/p&gt;

&lt;p&gt;Patches are welcome on GitHub &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17273084" author="markt" created="Wed, 27 Jan 2021 18:46:03 +0000"  >&lt;p&gt;It is likely that this will get resolved as WONTFIX.&lt;/p&gt;

&lt;p&gt;Commons Daemon release builds jump through a bunch of hoops to make sure that the resulting binaries will work on a clean install of any currently supported version of Windows. We do not wish it to be a requirement to install one of the Microsoft Visual Studio run-times in order for Commons Daemon to work. In short, we use a tool-chain based in Visual Studio 2008 as that is the latest version of Visual Studio that will create binaries without additional dependencies.&lt;/p&gt;

&lt;p&gt;Control Flow Guard requires at least Visual Studio 15. I&apos;ll do some tests but I am all but certain that this would then require the installation of an additional runtime. If we can limit the dependencies to the UCRT then once Windows 8.1 is out of support (another 2 years) then we&apos;ll be able to switch to a newer version of Visual Studio since Windows 10 onwards includes UCRT.&lt;/p&gt;

&lt;p&gt;I&apos;ll also note that we provide source and you are, of course, free to build your own binaries with any version of Visual Studio and any additional compilation options you wish.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17846320" author="markt" created="Tue, 14 May 2024 13:49:53 +0000"  >&lt;p&gt;This is now possible since Windows 10 is the earliest supported version&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 23 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n1y8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-428]  apxMultiSzToArrayW has incorrect use of IS_INVALID_HANDLE</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-428</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The same issue as reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-163&quot; title=&quot;__apxMultiSzToJvmOptions has odd use of IS_INVALID_HANDLE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-163&quot;&gt;&lt;del&gt;DAEMON-163&lt;/del&gt;&lt;/a&gt; is also present in the apxMultiSzToArrayW() method in src/native/windows/src/utils.c.&lt;/p&gt;

&lt;p&gt;Patch to fix is attached.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13350543">DAEMON-428</key>
            <summary> apxMultiSzToArrayW has incorrect use of IS_INVALID_HANDLE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="madscientist">Paul Smith</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Jan 2021 23:06:04 +0000</created>
                <updated>Wed, 6 Jan 2021 11:57:41 +0000</updated>
                            <resolved>Wed, 6 Jan 2021 11:57:41 +0000</resolved>
                                    <version>1.0.8</version>
                                    <fixVersion>1.2.4</fixVersion>
                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17259302" author="madscientist" created="Wed, 6 Jan 2021 00:01:01 +0000"  >&lt;p&gt;Note I added Affects Version because I know this issue has been present at least that long, but I checked the latest Git HEAD and it&apos;s still present there as well.&lt;/p&gt;</comment>
                            <comment id="17259582" author="markt" created="Wed, 6 Jan 2021 10:32:47 +0000"  >&lt;p&gt;Thanks for the report. A search of the code base found a second instance just above the one you reported in&#160;apxSetEnvironmentVariable. I have a fix fro both and should be committing it shortly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13018203" name="prunsrv.patch" size="710" author="madscientist" created="Tue, 5 Jan 2021 23:05:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mal4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-427] Lack of JvmOptions causes crash</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-427</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When --JvmOptions parameter is not specified, a NULL pointer is passed to setInprocEnvironmentOptions(). The function doesn&apos;t check for NULL pointer and tries to dereference it.&lt;/p&gt;

&lt;p&gt;From the documentation I guess JvmOptions is not a mandatory parameter. It says the parameter has default value and the parameter is not mentioned in the install example. prunsrv should work without this parameter. Now it crashes and Windows returns an error: &lt;em&gt;Error 1067&lt;/em&gt;: The process terminated unexpectedly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13346057">DAEMON-427</key>
            <summary>Lack of JvmOptions causes crash</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="grzegorz">Grzegorz Niemirowski</reporter>
                        <labels>
                            <label>documentation</label>
                    </labels>
                <created>Tue, 15 Dec 2020 09:00:16 +0000</created>
                <updated>Wed, 6 Jan 2021 09:54:48 +0000</updated>
                            <resolved>Wed, 6 Jan 2021 09:54:48 +0000</resolved>
                                    <version>1.2.3</version>
                                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17249664" author="garydgregory" created="Tue, 15 Dec 2020 12:42:54 +0000"  >&lt;p&gt;What happens if you try version 1.2.3?&lt;/p&gt;</comment>
                            <comment id="17250011" author="grzegorz" created="Tue, 15 Dec 2020 23:43:36 +0000"  >&lt;p&gt;My mistake. The affected version is the latest one - 1.2.3.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13338665">DAEMON-425</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 45 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0liq8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-426] CAP_DAC_READ_SEARCH not allowed in containers by default</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-426</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;jsvc tries to get &lt;tt&gt;CAP_DAC_READ_SEARCH&lt;/tt&gt; capabilities.&#160; The code says&#160;&lt;a href=&quot;https://github.com/apache/commons-daemon/commit/2090bd1586f30f4a72ab192df6b7e7f9f5548922#diff-71c2181bdc541da57b93eb9c43851baa9457ca97e6cf1e9f8ee1c280d273ca5a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Fix DAEMON-16 by adding CAP_DAC_READ_SEARCH to allow reading /proc/self&lt;/a&gt; but does anyone still need this? It fails on docker containers in kubernetes unless admins allow that capability to be requested.&lt;/p&gt;

&lt;p&gt;I tried compiling it without this flag and it seems to run everything just fine - but to not break anyone who might really need this CAP, perhaps some command line switch could be added to adjust what capabilities are requested generally, or at the very least specifically whether to not alter that&#160;CAP_DAC_READ_SEARCH cap.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Redhat 7; jsvc 1.2.3&lt;/p&gt;</environment>
        <key id="13343478">DAEMON-426</key>
            <summary>CAP_DAC_READ_SEARCH not allowed in containers by default</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="scr-oath">Sheridan Rawlins</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2020 07:07:22 +0000</created>
                <updated>Thu, 14 Jan 2021 09:22:56 +0000</updated>
                            <resolved>Thu, 14 Jan 2021 09:22:56 +0000</resolved>
                                    <version>1.2.2</version>
                                    <fixVersion>1.2.4</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17242765" author="garydgregory" created="Wed, 2 Dec 2020 22:06:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Is this something that warrants a command line option or can it removed?&lt;/p&gt;</comment>
                            <comment id="17243002" author="markt" created="Thu, 3 Dec 2020 08:30:45 +0000"  >&lt;p&gt;A quick look at the source suggests that that capability is required. It may be we can move the logic around to not request the capability when it is not required. The full command line used by the OP to call jsvc in the docker container would be helpful.&lt;/p&gt;

&lt;p&gt;As an aside, it also looks like there is some code for compatibility with very old Linux kernels that we could remove now.&lt;/p&gt;</comment>
                            <comment id="17245997" author="markt" created="Tue, 8 Dec 2020 17:03:44 +0000"  >&lt;p&gt;After some digging I think I figured out what is going on.&lt;/p&gt;

&lt;p&gt;The -procname option is implemented using execve and that needs the path to the binary.&lt;/p&gt;

&lt;p&gt;The path to the binary is obtained from /proc/self/exe falling back to argv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; if that fails.&lt;/p&gt;

&lt;p&gt;CAP_DAC_READ_SEARCH is required in order to read&#160;/proc/self/exe&lt;/p&gt;

&lt;p&gt;jsvc fails if any requested capability isn&apos;t available.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So jsvc fails on docker because&#160;CAP_DAC_READ_SEARCH isn&apos;t available.&lt;/p&gt;

&lt;p&gt;Commenting out&#160;CAP_DAC_READ_SEARCH causes the read of&#160;/proc/self/exe to fail so jsvc falls back to argv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; which works.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;ve re-worked the capability code to try and request&#160;CAP_DAC_READ_SEARCH but to fall back to trying without that capability if the initial request fails.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;If you could test the current code that would be very helpful.&lt;/p&gt;</comment>
                            <comment id="17264709" author="markt" created="Thu, 14 Jan 2021 09:22:56 +0000"  >&lt;p&gt;No response from original reporter. Assuming the proposed fix is sufficient.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 41 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l2u0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-425] Crash if Java Options parameter is missing</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-425</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Earlier versions of procrun will start without the parameter &quot;Java/Options&quot; in the registry (see example). With &quot;Options&quot; prunsrv will start, without it crashes.&lt;/p&gt;

&lt;p&gt;Our setup (WiX based) should not create the registry key &quot;Options&quot;, only the user should add some values here. We dont want to override the old value.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Example (with Options):&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Apache Software Foundation\Procrun 2.0\MyService\Parameters\Java&amp;#93;&lt;/span&gt;&lt;br/&gt;
&quot;Classpath&quot;=&quot;d:\\MyService\\lib&lt;br class=&quot;atl-forced-newline&quot; /&gt;*&quot;&lt;br/&gt;
&quot;Jvm&quot;=&quot;d:\\MyService\\jre\\bin\\server&lt;br class=&quot;atl-forced-newline&quot; /&gt;jvm.dll&quot;&lt;br/&gt;
&quot;JvmMx&quot;=dword:00000800&lt;br/&gt;
&quot;Options&quot;=hex(7):2d,00,44,00,6b,00,65,00,79,00,3d,00,76,00,61,00,6c,00,75,00,\&lt;br/&gt;
 65,00,00,00,00,00&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10 (16xx, 1809, 2004), Windows Server 2016, 2019&lt;/p&gt;</environment>
        <key id="13338665">DAEMON-425</key>
            <summary>Crash if Java Options parameter is missing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Rainer Schnitker">Rainer Schnitker</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Nov 2020 14:52:48 +0000</created>
                <updated>Wed, 6 Jan 2021 09:54:48 +0000</updated>
                            <resolved>Fri, 13 Nov 2020 11:16:35 +0000</resolved>
                                    <version>1.2.3</version>
                                    <fixVersion>1.2.4</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17225489" author="garydgregory" created="Tue, 3 Nov 2020 15:30:53 +0000"  >&lt;p&gt;What does &quot;crash&quot; mean here? Do you have a stack trace? A JVM dump?&lt;/p&gt;</comment>
                            <comment id="17225896" author="rainer schnitker" created="Wed, 4 Nov 2020 06:46:14 +0000"  >&lt;p&gt;Unhandled exception in the native code. See attachment.&lt;/p&gt;

&lt;p&gt;Logfile:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2020-11-04 07:41:57] [debug] ( prunsrv.c:1890) [16740] Apache Commons Daemon procrun log initialized.
[2020-11-04 07:41:57] [info]  ( prunsrv.c:1894) [16740] Apache Commons Daemon procrun (1.2.3.0 64-bit) started.
[2020-11-04 07:41:57] [info]  ( prunsrv.c:1785) [16740] Debugging &apos;RenditionServer&apos; service...
[2020-11-04 07:41:57] [debug] ( prunsrv.c:1575) [16740] Inside ServiceMain...
[2020-11-04 07:41:57] [debug] ( prunsrv.c:1032) [16740] reportServiceStatusE: dwCurrentState = 2, dwWin32ExitCode = 0, dwWaitHint = 3000, dwServiceSpecificExitCode = 0.
[2020-11-04 07:41:57] [info]  ( prunsrv.c:1325) [16740] Starting service...
[2020-11-04 07:41:57] [debug] ( prunsrv.c:496 ) [16740] Checking Java options for environment variable requirements
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17231391" author="markt" created="Fri, 13 Nov 2020 11:16:35 +0000"  >&lt;p&gt;Thanks for the report. This has been fixed for the next release.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13346057">DAEMON-427</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13014677" name="screenshot.png" size="19145" author="Rainer Schnitker" created="Wed, 4 Nov 2020 06:46:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0k96o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-424] stderr logfile is corrupted when running Tomcat 8.5 as Windows service</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-424</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;&lt;em&gt;Note: This issue has originally been reported under &lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=64863&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bz.apache.org/bugzilla/show_bug.cgi?id=64863&lt;/a&gt; for the Tomcat 8 project.&lt;/em&gt;&lt;/p&gt;

&lt;h3&gt;&lt;a name=&quot;Description&quot;&gt;&lt;/a&gt;Description&lt;/h3&gt;
&lt;p&gt;When Tomcat is running as a Windows Service, output written to System.err may be overwritten again in the tomcat8-stderr*.log file.&lt;/p&gt;

&lt;p&gt;This includes messages about uncaught exceptions. As a consequence, the occurrence of an uncaught exception may remain undetected since it appears in no log file.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;Stepstoreproduce&quot;&gt;&lt;/a&gt;Steps to reproduce&lt;/h3&gt;
&lt;ol&gt;
	&lt;li&gt;Install Tomcat as a Windows Service with default settings&lt;/li&gt;
	&lt;li&gt;Build attached Maven project &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13014485/13014485_uncaught-exception-sample.zip&quot; title=&quot;uncaught-exception-sample.zip attached to DAEMON-424&quot;&gt;uncaught-exception-sample.zip&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; and deploy WAR file into Tomcat&lt;/li&gt;
	&lt;li&gt;Restart Tomcat&lt;/li&gt;
	&lt;li&gt;Inspect file logs/tomcat8-stderr-&amp;lt;date&amp;gt;.log every few seconds&lt;/li&gt;
&lt;/ol&gt;


&lt;h3&gt;&lt;a name=&quot;Expectedbehavior&quot;&gt;&lt;/a&gt;Expected behavior&lt;/h3&gt;
&lt;p&gt;When startup is finished, the file should contain:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;30-Oct-2020 14:46:12.669 INFORMATION [main] org.apache.catalina.core.StandardEngine.startInternal Starting Servlet Engine: Apache Tomcat/8.5.59
30-Oct-2020 14:46:12.810 INFORMATION [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [C:\Program Files\Apache Software Foundation\Tomcat
8.5\webapps\uncaught-exception-sample-1.0-SNAPSHOT.war]
Message 0 from localhost-start-stop thread
Message 1 from localhost-start-stop thread
Message 2 from localhost-start-stop thread
Message 3 from localhost-start-stop thread
Message 4 from localhost-start-stop thread
Message 5 from localhost-start-stop thread
Message 6 from localhost-start-stop thread
Message 7 from localhost-start-stop thread
Message 8 from localhost-start-stop thread
Message 9 from localhost-start-stop thread
Exception in thread &quot;Thread-4&quot; java.lang.RuntimeException: exception thrown from temporary thread
	at org.example.ContextLoaderListener.lambda$contextInitialized$0(ContextLoaderListener.java:17)
	at java.lang.Thread.run(Thread.java:748)
Message 10 from localhost-start-stop thread
Message 11 from localhost-start-stop thread
Message 12 from localhost-start-stop thread
Message 13 from localhost-start-stop thread
Message 14 from localhost-start-stop thread
Message 15 from localhost-start-stop thread
Message 16 from localhost-start-stop thread
Message 17 from localhost-start-stop thread
Message 18 from localhost-start-stop thread
Message 19 from localhost-start-stop thread
30-Oct-2020 14:47:01.449 INFORMATION [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\uncaught-exception-sample-1.0-SNAPSHOT.war] has finished in [48.637] ms
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a name=&quot;Actualbehavior&quot;&gt;&lt;/a&gt;Actual behavior&lt;/h3&gt;
&lt;p&gt;The custom messages and the uncaught exception message are written to the file and remain there for five seconds, then they are overwritten by subsequent log messages. When startup is finished, the file contains:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;30-Oct-2020 14:46:12.669 INFORMATION [main] org.apache.catalina.core.StandardEngine.startInternal Starting Servlet Engine: Apache Tomcat/8.5.59
30-Oct-2020 14:46:12.810 INFORMATION [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [C:\Program Files\Apache Software Foundation\Tomcat
8.5\webapps\uncaught-exception-sample-1.0-SNAPSHOT.war]
30-Oct-2020 14:47:01.449 INFORMATION [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\uncaught-exception-sample-1.0-SNAPSHOT.war] has finished in [48.637] ms
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The message about the uncaught exception is gone.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;RootCause&quot;&gt;&lt;/a&gt;Root Cause&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;(as far as I can tell)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;The file is opened twice during startup (by the prunsrv), and both file descriptors are being used in the Java application.&lt;/p&gt;

&lt;p&gt;Startup sequence:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;In prunsrv.c, redirectStdStreams():
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;Log file is opened using _wfsopen() with sharing mode _SH_DENYNO (Permits read and write access)&lt;/li&gt;
		&lt;li&gt;then _dup2() to reassign the existing stderr file descriptor&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;In javajni.c, __apxJavaWorkerThread():
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;the main class org.apache.catalina.startup.Bootstrap is loaded&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;In javajni.c, apxJavaSetOut():
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;Log file is opened again and System.err is adjusted, via reflection (Java code):
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;System.setErr(new PrintStream(new FileOutputStream(filename, true)));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Problem: When the main class is loaded in step 2, it initializes the java.util.logging.ConsoleHandler. This class remembers the current System.err (from step 1) in a private field.&lt;/p&gt;

&lt;p&gt;Result:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ConsoleHandler uses file descriptor from step 1 (via FileOutputStream with append == false)&lt;/li&gt;
	&lt;li&gt;System.err uses file descriptor from step 3 (via FileOutputStream with append == true)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Therefore messages written to System.err appear at the end of the log file, but are overwritten by subsequent messages written by ConsoleHandler.&lt;/p&gt;</description>
                <environment>&lt;ul&gt;
	&lt;li&gt;Windows 10 Version 1909&lt;/li&gt;
	&lt;li&gt;Apache Tomcat 8.5.59&lt;/li&gt;
	&lt;li&gt;Adopt OpenJDK 1.8.0_222&lt;/li&gt;
&lt;/ul&gt;
</environment>
        <key id="13338214">DAEMON-424</key>
            <summary>stderr logfile is corrupted when running Tomcat 8.5 as Windows service</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="scholzb-hb">Bernhard Scholz</reporter>
                        <labels>
                    </labels>
                <created>Sat, 31 Oct 2020 14:18:15 +0000</created>
                <updated>Wed, 30 Dec 2020 16:48:32 +0000</updated>
                            <resolved>Fri, 13 Nov 2020 11:57:33 +0000</resolved>
                                    <version>1.2.3</version>
                                    <fixVersion>1.2.4</fixVersion>
                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17224114" author="garydgregory" created="Sat, 31 Oct 2020 16:38:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=scholzb-hb&quot; class=&quot;user-hover&quot; rel=&quot;scholzb-hb&quot;&gt;scholzb-hb&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you for the report.&#160;&lt;/p&gt;

&lt;p&gt;May you provide PR?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17225209" author="scholzb-hb" created="Tue, 3 Nov 2020 07:54:13 +0000"  >&lt;p&gt;Actually I would like to clarify if there is reason to do the stream redirection twice. As far as I can see, it has been like that since &lt;a href=&quot;https://github.com/apache/commons-daemon/commit/8acfd2ecdc07199325000ac45e9cc65cb6da2330&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/commit/8acfd2ecdc07199325000ac45e9cc65cb6da2330&lt;/a&gt; (more than 16 years ago).&lt;/p&gt;

&lt;p&gt;My naive approach would be just changing the order of step 2 and 3 of the startup sequence, so that the Java application will only &quot;see&quot; the stderr file descriptor &lt;b&gt;after&lt;/b&gt; the second redirection.&lt;/p&gt;

&lt;p&gt;Patch: &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13014616/13014616_DAEMON-424_scholzb-hb.patch&quot; title=&quot;DAEMON-424_scholzb-hb.patch attached to DAEMON-424&quot;&gt;DAEMON-424_scholzb-hb.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Tested with the above steps to reproduce&lt;br/&gt;
-&amp;gt; The output is now as expected &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/check.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17227021" author="scholzb-hb" created="Thu, 5 Nov 2020 21:50:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-daemon/pull/21&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/pull/21&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17231410" author="markt" created="Fri, 13 Nov 2020 11:57:34 +0000"  >&lt;p&gt;Thanks for the analysis and for the patch. The fix will be in the next release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13014616" name="DAEMON-424_scholzb-hb.patch" size="1208" author="scholzb-hb" created="Tue, 3 Nov 2020 07:54:17 +0000"/>
                            <attachment id="13014485" name="uncaught-exception-sample.zip" size="2651" author="scholzb-hb" created="Sat, 31 Oct 2020 14:11:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0k6eg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-423] space character in StopImage path not supported</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-423</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;In exe mode with an stop image command like:&lt;/p&gt;

&lt;p&gt;--StopImage &quot;C:\Program Files\scripts\service\stop.cmd&quot;&lt;/p&gt;

&lt;p&gt;procrun is unable to stop the service.&lt;/p&gt;

&lt;p&gt;The stderr just shows:&lt;br/&gt;
&quot;Der Befehl &quot;C:\Program&quot; ist entweder falsch geschrieben oder&lt;br/&gt;
konnte nicht gefunden werden.&quot;&lt;/p&gt;

&lt;p&gt;which translates to:&lt;br/&gt;
The command &quot;C: \Program&quot; is either misspelled or&lt;br/&gt;
could not be found.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Having a space on StartImage path is working.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13321474">DAEMON-423</key>
            <summary>space character in StopImage path not supported</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10009">Works for Me</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Indi">Ralf Sieger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Aug 2020 08:51:30 +0000</created>
                <updated>Mon, 24 Aug 2020 10:18:01 +0000</updated>
                            <resolved>Mon, 24 Aug 2020 10:18:01 +0000</resolved>
                                    <version>1.1.0</version>
                    <version>1.2.2</version>
                                                    <component>prunsrv</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17173153" author="garydgregory" created="Fri, 7 Aug 2020 13:54:05 +0000"  >&lt;p&gt;We welcome PRs on GitHub &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17183134" author="markt" created="Mon, 24 Aug 2020 10:18:01 +0000"  >&lt;p&gt;This works for me testing with Apache Tomcat 10.0.0-M8-dev (procrun 1.2.2) with spaces in both&#160; the path and the script name.&lt;/p&gt;

&lt;p&gt;Maybe an issue with the stop script rather than procrun?&lt;/p&gt;

&lt;p&gt;If this is still an issue please re-open this issue and provide the steps to reproduce the problem. If you can do this using the latest Apache Tomcat 10.0.x, 9.0.x or 8.5.x release then it will be easier to ensure we are looking at the same thing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0hk74:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-420] SHA-512 checksums</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-420</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The checksums are not matching those provided on the downloads page&lt;/p&gt;</description>
                <environment></environment>
        <key id="13315546">DAEMON-420</key>
            <summary>SHA-512 checksums</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="seancjdoyle">Sean Doyle</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jul 2020 04:46:47 +0000</created>
                <updated>Mon, 13 Jul 2020 09:01:39 +0000</updated>
                            <resolved>Mon, 13 Jul 2020 09:01:39 +0000</resolved>
                                    <version>1.2.2</version>
                                    <fixVersion>1.2.2</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17153367" author="markt" created="Wed, 8 Jul 2020 08:51:00 +0000"  >&lt;p&gt;I&apos;ve just checked the SHA512 checksums and they are correct. Either you are using a broken mirror or have corrupted downloads. Which mirror were you using?&lt;/p&gt;</comment>
                            <comment id="17154010" author="seancjdoyle" created="Wed, 8 Jul 2020 21:02:13 +0000"  >&lt;p&gt;Hi Mark, I&apos;ve tried several;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://commons.apache.org/proper/commons-daemon/download_daemon.cgi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-daemon/download_daemon.cgi&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://commons.apache.org/proper/commons-daemon/download_daemon.cgi?Preferred=https%3A%2F%2Fdownloads.apache.org%2F&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-daemon/download_daemon.cgi?Preferred=https%3A%2F%2Fdownloads.apache.org%2F&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://apache.mirror.amaze.com.au/commons/daemon/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache.mirror.amaze.com.au/commons/daemon/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17154022" author="markt" created="Wed, 8 Jul 2020 21:28:02 +0000"  >&lt;p&gt;The files I&apos;ve checked on that mirror are correct.&lt;/p&gt;

&lt;p&gt;Please provide:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The full URL of a Commons Daemon package you have downloaded that you believe has an incorrect sha512 checksum&lt;/li&gt;
	&lt;li&gt;The sha512 checksum for the file you have downloaded&lt;/li&gt;
	&lt;li&gt;The full URL of the file you are using to validate the sha512 checksum&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17156391" author="seancjdoyle" created="Sun, 12 Jul 2020 21:33:02 +0000"  >&lt;p&gt;Hi Mark,&lt;/p&gt;

&lt;p&gt;URL of the downloaded package&lt;/p&gt;

&lt;p&gt;&lt;b&gt;&lt;a href=&quot;https://downloads.apache.org/commons/daemon/binaries/commons-daemon-1.2.2-bin.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://downloads.apache.org//commons/daemon/binaries/commons-daemon-1.2.2-bin.tar.gz&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;The generated checksum for that file;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;a419d4757bd4bed911bd22e03116db3095fcaaf7bc4da2b986f5e4bd171cc5b6851af8c2b87bf4c2c6c6e7dee4d2e7af4cef81c5fee7904365611f40fb8fc21d&#160;/Users/sdoyle/Downloads/commons-daemon-1.2.2-bin.tar&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Full URL of the validation file;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.apache.org/dist/commons/daemon/binaries/commons-daemon-1.2.2-bin.tar.gz.sha512&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.apache.org/dist/commons/daemon/binaries/commons-daemon-1.2.2-bin.tar.gz.sha512&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="17156574" author="markt" created="Mon, 13 Jul 2020 09:01:39 +0000"  >&lt;p&gt;You are generating the checksum for the .tar file rather than the .tar.gz file.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0gjrk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-417] default umask for tomcat</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-417</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;hello there,&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I am not sure fi this is bug or on purpose.&lt;/p&gt;

&lt;p&gt;tomcat document says like below.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://tomcat.apache.org/tomcat-8.5-doc/security-howto.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tomcat.apache.org/tomcat-8.5-doc/security-howto.html&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;29) Security Considerations -&amp;gt; Non Tomcat settings&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 Tomcat runs with a &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; umask of 0027 to maintain
    these permissions &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; files created &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; Tomcat is running (e.g. log files,
    expanded WARs, etc.).&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I can also check the default value of umask in the catalina.sh&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# Set UMASK unless it has been overridden
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; [ -z &lt;span class=&quot;code-quote&quot;&gt;&quot;$UMASK&quot;&lt;/span&gt; ]; then
    UMASK=&lt;span class=&quot;code-quote&quot;&gt;&quot;0027&quot;&lt;/span&gt;
fi
umask $UMASK &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;however, if i run the tomcat using by jsvc, 0077 is applied by default.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;unix/native/arguments.c : 176&lt;/li&gt;
	&lt;li&gt;args-&amp;gt;umask = 0077;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;does jsvc conform the default value described in the docment?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13294177">DAEMON-417</key>
            <summary>default umask for tomcat</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="John Kang">John Kang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Mar 2020 11:25:55 +0000</created>
                <updated>Thu, 26 Mar 2020 15:19:32 +0000</updated>
                            <resolved>Thu, 26 Mar 2020 15:10:36 +0000</resolved>
                                    <version>1.2.2</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17067754" author="michael-o" created="Thu, 26 Mar 2020 15:10:36 +0000"  >&lt;p&gt;This isn&apos;t a JSVC issue, there is support: &lt;a href=&quot;https://github.com/apache/commons-daemon/blob/master/src/native/unix/native/arguments.c#L283-L287&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/blob/master/src/native/unix/native/arguments.c#L283-L287&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/tomcat/blob/master/bin/daemon.sh&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tomcat/blob/master/bin/daemon.sh&lt;/a&gt; is not passing the umask to jsvc.&lt;/p&gt;

&lt;p&gt;Raise this issue with Tomcat in the Bugzilla.&lt;/p&gt;</comment>
                            <comment id="17067757" author="michael-o" created="Thu, 26 Mar 2020 15:11:31 +0000"  >&lt;p&gt;Here is a counter example: &lt;a href=&quot;https://github.com/freebsd/freebsd-ports/blob/master/www/tomcat85/files/tomcat85.in#L129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/freebsd/freebsd-ports/blob/master/www/tomcat85/files/tomcat85.in#L129&lt;/a&gt;&lt;br/&gt;
FreeBSD port&apos;s startup script supports umask.&lt;/p&gt;</comment>
                            <comment id="17067764" author="john kang" created="Thu, 26 Mar 2020 15:19:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michael-o&quot; class=&quot;user-hover&quot; rel=&quot;michael-o&quot;&gt;michael-o&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;thanks for making me understand&lt;/p&gt;

&lt;p&gt;let me ask tomcat.&lt;/p&gt;

&lt;p&gt;take care &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0cxnk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-416] prunsrv.exe adding special character while executing in windows 2019</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-416</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;While executing&#160;&lt;tt&gt;prunsrv.exe&lt;/tt&gt;&#160;from an earlier version of Windows, (like 2016), the below command was working. But upon introducing the same statement for Windows 2019, it&apos;s not starting the service.&lt;/p&gt;

&lt;p&gt;I inspected the registry to check the path in which the process was created. It seems to add a random special character before the path, which is why it&apos;s not able to start.&lt;/p&gt;

&lt;p&gt;Observed Path:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;C:\&amp;lt;SOME_PATH&amp;gt;/prunsrv.exe ^E//RS//&amp;lt;SOME_PROCESS&amp;gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Here near&#160;&lt;tt&gt;//RS&lt;/tt&gt;,&#160;&lt;tt&gt;^E&lt;/tt&gt;&#160;is prepended and it&apos;s random special character is generated for every execution.&lt;/p&gt;

&lt;p&gt;Expected Path:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;C:\&amp;lt;SOME_PATH&amp;gt;/prunsrv.exe //RS//&amp;lt;SOME_PROCESS&amp;gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;This is the line which is responsible to initiate the process which is triggered from&#160;&lt;tt&gt;.bat&lt;/tt&gt;&#160;file:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&quot;%SOMEPATH%/bin/prunsrv.exe&quot; //IS//%SERVICE_NAME%&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;I need some help on how to remove this special character before the process is started.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 2019&lt;/p&gt;</environment>
        <key id="13290156">DAEMON-416</key>
            <summary>prunsrv.exe adding special character while executing in windows 2019</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rajivnitb">rajiv devaraj</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Mar 2020 18:21:36 +0000</created>
                <updated>Mon, 24 Aug 2020 09:45:32 +0000</updated>
                            <resolved>Mon, 24 Aug 2020 09:45:32 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17053735" author="markt" created="Fri, 6 Mar 2020 19:59:24 +0000"  >&lt;p&gt;You are going to need to provide the steps to recreate this from a clean install of the latest DAEMON version (1.2.2 as I type this).&lt;/p&gt;</comment>
                            <comment id="17053741" author="rajivnitb" created="Fri, 6 Mar 2020 20:18:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt;&#160;, The version we are using in production is of the version 1.0.12.0 , will it&#160; be compatible with 2019 windows ? and by the way if i correct the entry of //RS by removing the random value which is generated before it and start it will start the service so i believe while invoking //IS %ServiceName%, it appends random value with //RS %ServiceName% which can be seen Services listing where clicking on the properties of the service shows the above mentioned malformed path , hence service is not getting started&lt;/p&gt;</comment>
                            <comment id="17053753" author="rajivnitb" created="Fri, 6 Mar 2020 21:10:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt;&#160;,&#160;&lt;/p&gt;

&lt;p&gt;Image Path is being set with random value for example :&#160;&lt;/p&gt;

&lt;p&gt;C:\&amp;lt;SOME_PATH&amp;gt;\prunsrv.exe &#26656;G//RS//&amp;lt;SERVICE_NAME&amp;gt;&lt;/p&gt;

&lt;p&gt;the above observed , on running the following command&#160;&lt;/p&gt;

&lt;p&gt;C:\&amp;lt;SOME_PATH&amp;gt;\prunsrv.exe //IS//&amp;lt;SERVICE_NAME&amp;gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17053942" author="markt" created="Sat, 7 Mar 2020 08:24:00 +0000"  >&lt;p&gt;Please re-test with the latest DAEMON release (1.2.2 as I type this).&lt;/p&gt;</comment>
                            <comment id="17053944" author="markt" created="Sat, 7 Mar 2020 08:30:01 +0000"  >&lt;p&gt;See also &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-413&quot; title=&quot;[prunsrv] Registry entry for HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\LdeService ImagePath contains a junk character&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-413&quot;&gt;&lt;del&gt;DAEMON-413&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="17055019" author="rajivnitb" created="Mon, 9 Mar 2020 14:30:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt;&#160;, on installing with new 1.2.2 ,&#160; the above mentioned issue is resolved but the service is not starting up , below log is what i find&#160; out of that jdk path is not valid but even correcting the path is not fixing the issue&lt;/p&gt;

&lt;p&gt;&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 5892] %1 is not a valid Win32 application.&lt;br/&gt;
 &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 5892] Failed creating Java &apos;C:\&amp;lt;SOME_PATH&amp;gt;\jdk1.8.0_221/jre/bin/server/jvm.dll&apos;.&lt;br/&gt;
 &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 5892] %1 is not a valid Win32 application.&lt;br/&gt;
 &#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 5892] ServiceStart returned 1.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 5676] Apache Commons Daemon procrun failed with exit value: 8 (failed to install service).&lt;/p&gt;

&lt;p&gt;note : I have installed win32 procrun&lt;/p&gt;</comment>
                            <comment id="17055107" author="rajivnitb" created="Mon, 9 Mar 2020 15:49:10 +0000"  >&lt;p&gt;after using amd64 , this is the error i&apos;m getting ,&#160;&lt;/p&gt;

&lt;p&gt;below is the command is used to install the service&lt;/p&gt;

&lt;p&gt;prunsrv //IS//NEW_SERVICE --Install=C:\commons-daemon-1.2.2-bin-windows\amd64\prunsrv.exe --Jvm=C:\&amp;lt;SOME_PATH&amp;gt;\jdk1.8.0_221\jre\bin\server\jvm.dll --StartMode=jvm --StopMode=jvm \&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-09 21:23:22&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; [ 1104] Apache Commons Daemon procrun (1.2.2.0 64-bit) started.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-09 21:23:23&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; [ 1104] Installing service &apos;NEW_SERVICE&apos; name &apos;&apos;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-09 21:23:23&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; [ 1104] Service &apos;NEW_SERVICE&apos; installed.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-09 21:23:23&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; [ 1104] Apache Commons Daemon procrun finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-09 21:27:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; [ 4336] Apache Commons Daemon procrun (1.2.2.0 64-bit) started.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-09 21:27:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; [ 4336] Running Service &apos;NEW_SERVICE&apos;...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-09 21:27:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 4336] StartServiceCtrlDispatcher for &apos;NEW_SERVICE&apos; failed.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-09 21:27:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 4336] The service process could not connect to the service controller.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-09 21:27:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 4336] Apache Commons Daemon procrun failed with exit value: 4 (failed to run service).&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2020-03-09 21:27:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 4336] The service process could not connect to the service controller.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17055127" author="garydgregory" created="Mon, 9 Mar 2020 16:07:11 +0000"  >&lt;p&gt;If you build Dameon from master, you might get more logging, especially at the debug level. This might be an opportunity for us to improve logging in this specific area.&lt;/p&gt;</comment>
                            <comment id="17055329" author="rajivnitb" created="Mon, 9 Mar 2020 19:41:26 +0000"  >&lt;p&gt;I&apos;m able to fix this issue , by updating the JVM PATH &amp;amp; using procrun.exe (64 bit), but on fixing this the below service is responsible to connect activemq which is not able to connect , the same jar i.e) activemq was able to connect to the peer with the service being hosted with the older version prunsrv.exe&lt;/p&gt;</comment>
                            <comment id="17183108" author="markt" created="Mon, 24 Aug 2020 09:39:33 +0000"  >&lt;p&gt;That is probably a permissions issue as the default user for the service has changed.&lt;/p&gt;</comment>
                            <comment id="17183110" author="markt" created="Mon, 24 Aug 2020 09:45:32 +0000"  >&lt;p&gt;I&apos;m resolving this as fixed as the original issue appears to be a bug fixed in an earlier release and subsequent issues appear to be configuration issues.&lt;/p&gt;

&lt;p&gt;If you are still having difficulties, first ask on the users list and, if the discussion there concludes that there is a bug, please open a Jira issue and provide the minimal steps to reproduce the issue from a clean install of the latest Commons-Daemon version.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0c9hs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-415] Log is not written to stdout and stderr Logfiles</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-415</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I updated my Procrun Version from 1.0.15 to 1.2.2.&lt;/p&gt;

&lt;p&gt;After Installing and starting the Service, logfiles where created at the desired location but stayed empty during run. Loglevel is set to &apos;debug&apos; like in the version before. I rechecked the configuration documentation, but did not find any changeable issues.&#160; &#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Server 2016 Standard&lt;/p&gt;

&lt;p&gt;64 Bit - OS&lt;/p&gt;

&lt;p&gt;x64 processor&lt;/p&gt;

&lt;p&gt;Intel(R) Xeon(R) CPU E5-2603 v4 @ 1.70 GHz&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</environment>
        <key id="13279119">DAEMON-415</key>
            <summary>Log is not written to stdout and stderr Logfiles</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alexander.behrend@arcor.de">Alexander Behrend</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Jan 2020 16:13:56 +0000</created>
                <updated>Wed, 15 Jan 2020 09:00:44 +0000</updated>
                            <resolved>Wed, 15 Jan 2020 09:00:44 +0000</resolved>
                                    <version>1.2.2</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17015729" author="alexander.behrend@arcor.de" created="Wed, 15 Jan 2020 08:46:29 +0000"  >&lt;p&gt;After rewatching other tickets i found out this issue has to do with ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-398&quot; title=&quot;Java 11 jvm.dll startup messages not available on stdout/stderr using Windows 10/2016&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-398&quot;&gt;DAEMON-398&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13225510">DAEMON-398</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13225510">DAEMON-398</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0age8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-412] Tomcat started as windows service does not support Java Native Memory Tracking feature probably because of improper JVM initialization by Procrun</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-412</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;In the case the user specifies some from the the NativeMemoryTracking parameters (see &lt;br/&gt;
&lt;a href=&quot;https://docs.oracle.com/en/java/javase/11/vm/native-memory-tracking.html#GUID-0DB3B8D1-8D7D-447F-B6FF-15620103EE47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/en/java/javase/11/vm/native-memory-tracking.html#GUID-0DB3B8D1-8D7D-447F-B6FF-15620103EE47&#160;&lt;/a&gt;&lt;br/&gt;
) like &lt;/p&gt;

&lt;p&gt;-XX:NativeMemoryTracking=summary&lt;/p&gt;

&lt;p&gt;in Windows service registry, restarts the service, so the option can be seen in the log file by the startup options (for example in Tomcat logs like catalina.log), then the Native memory tracking is still disabled and does not work. If you try with&lt;/p&gt;

&lt;p&gt;jcmd &amp;lt;pid&amp;gt; VM.native_memory summary&lt;/p&gt;

&lt;p&gt;to get the information about the native JVM memory in the tomcats JVM, the jcmd call fails with the message&lt;/p&gt;

&lt;p&gt;&amp;lt;pid&amp;gt;:&lt;br/&gt;
Native memory tracking is not enabled&lt;/p&gt;

&lt;p&gt;and in the Tomcat&apos;s log file can be found following error message:&lt;/p&gt;

&lt;p&gt;Java HotSpot(TM) 64-Bit Server VM warning: Native Memory Tracking did not setup properly, using wrong launcher? &lt;/p&gt;

&lt;p&gt;The problem seems to be in the JVM launcher Procrun, which dies not initialize the JVM properly - as far as I have understood from this blog: &lt;br/&gt;
&lt;a href=&quot;https://blogs.oracle.com/poonam/using-nmt-with-custom-jvm-launcher&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://blogs.oracle.com/poonam/using-nmt-with-custom-jvm-launcher &lt;/a&gt;&lt;br/&gt;
The Procrun.exe has to define some environment variable before the start of JVM, etc. to get the native memory tracking to work.&lt;/p&gt;

&lt;p&gt;Known workaround is the start of Tomcat from the command line, but this is no option in the productive environment, where you have to let the service run for longer time to collect the proper result and maybe also as some different user because of security concerns, then such option is simply out of possible scenarios. So the Tomcat service JVM cannot be in such circumstances tracked by NMT at all, what is the problem in the mission-critical applications.&lt;/p&gt;

&lt;p&gt;The Procrun should be modified in the way it enables the NMT in the windows service by the startup, by setting the environment variable &lt;br/&gt;
NMT_LEVEL_&amp;lt;pid&amp;gt; to the value &quot;detail&quot; or &quot;summary&quot; (or &quot;off&quot; if unspecified) in the dependency on the specified or unspecified option of &lt;br/&gt;
-XX:NativeMemoryTracking&lt;br/&gt;
like done normally by java.exe&lt;br/&gt;
Remark: Also change of the startup mode from &quot;jvm&quot; to &quot;exe&quot; or &quot;java&quot; does not help,. then the windows service does not start at all.&lt;/p&gt;

&lt;p&gt;See also the Tomcat bug &lt;br/&gt;
&lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=63922&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bz.apache.org/bugzilla/show_bug.cgi?id=63922&lt;/a&gt;&lt;br/&gt;
which has been qualified as invalid because the problem seems to be in is in PROCRUN.&lt;/p&gt;

&lt;p&gt;See also the bug &lt;a href=&quot;https://issues.apache.org/jira/browse/TOMEE-2738&quot; title=&quot;TomEE windows service does not support Java Native Memory Tracking feature&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TOMEE-2738&quot;&gt;TOMEE-2738&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This will probably affect every java app handled by the Procrun Daemon, if installed and started as Windows service, not only Tomcat.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows generally (tested on Windows Server 2012 R2 but the problem occurs probably, like the user in the internet write, on every Windows version)&lt;/p&gt;</environment>
        <key id="13268058">DAEMON-412</key>
            <summary>Tomcat started as windows service does not support Java Native Memory Tracking feature probably because of improper JVM initialization by Procrun</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="goodwin">Artur Linhart</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Nov 2019 15:31:10 +0000</created>
                <updated>Mon, 3 May 2021 16:09:36 +0000</updated>
                            <resolved>Mon, 24 Aug 2020 21:07:49 +0000</resolved>
                                                    <fixVersion>1.2.3</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16980799" author="markt" created="Sat, 23 Nov 2019 16:07:29 +0000"  >&lt;p&gt;You can use native memory tracking with procrun if you use the Java start mode rather than jvm. exe mode should also work as well.&lt;/p&gt;

&lt;p&gt;procrun in jvm mode and jsvc will need some changes to get this to work.&lt;/p&gt;</comment>
                            <comment id="16980858" author="goodwin" created="Sat, 23 Nov 2019 19:40:34 +0000"  >&lt;p&gt;Thank you for pointer - but I have tried the exe mode and was unable to start the service at all... I had same problem also with java mode - we do not use JDK in production (only JRE), this is possibly the problem why are both exe and java mode unavailable to us...&lt;/p&gt;</comment>
                            <comment id="17183513" author="markt" created="Mon, 24 Aug 2020 18:07:12 +0000"  >&lt;p&gt;Just to (re-)confirm (tested with latest Apache Tomcat) that NMT does work when starting in java mode. If an application doesn&apos;t start in Java mode that is a separate, unrelated issue.&lt;/p&gt;

&lt;p&gt;It is jvm mode where changes are required. I am working on this now.&lt;/p&gt;</comment>
                            <comment id="17183599" author="markt" created="Mon, 24 Aug 2020 21:07:49 +0000"  >&lt;p&gt;This has been implemented (and tested) for Procrun and jsvc.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13376144">DAEMON-433</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z08khc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-411] Services can&apos;t be installed as Type=Interactive anymore</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-411</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Installing a service with the parameter --Type=interactive no longer works. prunsrv.exe outputs:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
prunsrv.exe &lt;span class=&quot;code-comment&quot;&gt;//IS//MyService --Install=&lt;span class=&quot;code-quote&quot;&gt;&quot;C:\service\commons-daemon-1.2.2-bin\windows\amd64\prunsrv.exe&quot;&lt;/span&gt; --Type=interactive --ServiceUser=&lt;span class=&quot;code-quote&quot;&gt;&quot;LocalSystem&quot;&lt;/span&gt;
&lt;/span&gt;The parameter is incorrect.
Failed to install service.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;No other log is output, even with Debug level. As a workaround the service can be installed without the type interactive and then updated to use the flag.&lt;/p&gt;

&lt;p&gt;The same call still worked in 1.1.0.&lt;/p&gt;</description>
                <environment>&lt;p&gt;openjdk version &quot;1.8.0_222&quot;&lt;br/&gt;
 OpenJDK Runtime Environment (Zulu 8.40.0.25-CA-win64) (build 1.8.0_222-b10)&lt;br/&gt;
 OpenJDK 64-Bit Server VM (Zulu 8.40.0.25-CA-win64) (build 25.222-b10, mixed mode)&lt;/p&gt;

&lt;p&gt;Tested on Windows 10 1607 and Windows 7 7601.&lt;/p&gt;</environment>
        <key id="13264829">DAEMON-411</key>
            <summary>Services can&apos;t be installed as Type=Interactive anymore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="11">Done</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="markus.adelsberger">Markus Adelsberger</reporter>
                        <labels>
                            <label>windows</label>
                    </labels>
                <created>Mon, 28 Oct 2019 14:22:01 +0000</created>
                <updated>Fri, 30 Jul 2021 14:43:37 +0000</updated>
                            <resolved>Fri, 30 Jul 2021 14:43:37 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.3</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16961153" author="garydgregory" created="Mon, 28 Oct 2019 15:21:09 +0000"  >&lt;p&gt;Note that Windows Server (2012) no longer has interactive services enabled by default as opposed to Windows Server 2008.&lt;/p&gt;</comment>
                            <comment id="16961854" author="markus.adelsberger" created="Tue, 29 Oct 2019 09:46:29 +0000"  >&lt;p&gt;Hi Gary, thanks for your input, but the problem is happening on Windows 7 and 10.&lt;/p&gt;</comment>
                            <comment id="16979414" author="markt" created="Thu, 21 Nov 2019 16:45:38 +0000"  >&lt;p&gt;OK. I&apos;ve figured out why this is. You have to be running as LocalSystem to be interactive and the default user changed to LocalService. This requirement is documented but even with the correct --ServiceUser this won&apos;t work.&lt;/p&gt;

&lt;p&gt;The error handling needs some improvement and I&apos;ll fix the start-up so you can use --Type=interactive if you specify the correct user. I&apos;ll also look at the Manager app to ensure it enforces the same requirement.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16979639" author="markt" created="Thu, 21 Nov 2019 21:50:39 +0000"  >&lt;p&gt;This has been fixed. There were multiple issues (all have been fixed):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;No error message if specified with wrong user (has to be LocalSystem)&lt;/li&gt;
	&lt;li&gt;Didn&apos;t configure option when set when installing new service&lt;/li&gt;
	&lt;li&gt;Made option available with wrong users in GUI&lt;/li&gt;
	&lt;li&gt;Failed to save option correctly when setting option was only change&lt;br/&gt;
 made in GUI&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17390448" author="mturk@apache.org" created="Fri, 30 Jul 2021 09:39:14 +0000"  >&lt;p&gt;Setting default service user to&#160;&quot;NT Authority&lt;br class=&quot;atl-forced-newline&quot; /&gt;LocalService&quot; breaks Tomcat installs due to limited ACL. Default service user should be NULL unless explicitly set by &quot;&#8211;ServiceUser foo&lt;br class=&quot;atl-forced-newline&quot; /&gt;bar&quot; parameter.&lt;/p&gt;</comment>
                            <comment id="17390455" author="markt" created="Fri, 30 Jul 2021 09:46:19 +0000"  >&lt;p&gt;Breaks which version of Tomcat, on which version of Windows, how? I haven&apos;t noticed any issues in my local testing. Also this patch has been in place for 2+ years and I don&apos;t recall Tomcat users reporting this as an issue.&lt;/p&gt;

&lt;p&gt;I would very strongly against changing the default user back to LocalSystem because of the security implications.&lt;/p&gt;</comment>
                            <comment id="17390467" author="mturk@apache.org" created="Fri, 30 Jul 2021 10:10:54 +0000"  >&lt;p&gt;By default every service is created using LocalSystem account unless explicitly different &quot;Log On&quot; account is given.&lt;br/&gt;
Switching to &quot;LocalService&quot; account as default changes ACL, so Tomcat cannot access files created&lt;br/&gt;
by users that are only members of local/global Administrator groups&#160;&lt;/p&gt;</comment>
                            <comment id="17390470" author="markt" created="Fri, 30 Jul 2021 10:14:40 +0000"  >&lt;p&gt;The Tomcat Installer for Windows was updated at the same time as the switch to Daemon 1.2.0 to set the correct permissions. See &lt;a href=&quot;https://github.com/apache/tomcat/commit/e110331129&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/tomcat/commit/e110331129&lt;/a&gt;&lt;br/&gt;
 It appears that the installer you are using hasn&apos;t made the same update.&lt;/p&gt;</comment>
                            <comment id="17390482" author="mturk@apache.org" created="Fri, 30 Jul 2021 10:29:08 +0000"  >&lt;p&gt;Using LocalService as default instead LocalSystem is regression IMHO.&lt;br/&gt;
Everything works fine if you edit existing installed web.xml, but LocalService&lt;br/&gt;
account cannot access web.xml created (not edited) by Adminisistrator account after install.&lt;/p&gt;</comment>
                            <comment id="17390624" author="mturk@apache.org" created="Fri, 30 Jul 2021 14:43:37 +0000"  >&lt;p&gt;Closing the issue since v 1.2.4 already contains the patch, so reverting it would be counter-productive&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12984174" name="prunsrv.png" size="32751" author="markus.adelsberger" created="Mon, 28 Oct 2019 14:18:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z080js:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-410] jsvc fails to find OpenJDK11 libjvm.so on a raspberry 4 (buster)</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-410</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;This is the log part of the JVM discovery:&lt;/p&gt;

&lt;p&gt;Attempting to locate Java Home in /usr/lib/jvm/default-java&lt;br/&gt;
Attempting to locate VM configuration file /usr/lib/jvm/default-java/jre/lib/jvm.cfg&lt;br/&gt;
Attempting to locate VM configuration file /usr/lib/jvm/default-java/lib/jvm.cfg&lt;br/&gt;
Found VM configuration file at /usr/lib/jvm/default-java/lib/jvm.cfg&lt;br/&gt;
Found VM server definition in configuration&lt;br/&gt;
Checking library /usr/lib/jvm/default-java/jre/lib/arm/server/libjvm.so&lt;br/&gt;
Checking library /usr/lib/jvm/default-java/lib/arm/server/libjvm.so&lt;br/&gt;
Cannot locate library for VM server (skipping)&lt;br/&gt;
Found VM client definition in configuration&lt;br/&gt;
Checking library /usr/lib/jvm/default-java/jre/lib/arm/client/libjvm.so&lt;br/&gt;
Checking library /usr/lib/jvm/default-java/lib/arm/client/libjvm.so&lt;br/&gt;
Cannot locate library for VM client (skipping)&lt;br/&gt;
Found VM zero definition in configuration&lt;br/&gt;
Checking library /usr/lib/jvm/default-java/jre/lib/arm/zero/libjvm.so&lt;br/&gt;
Checking library /usr/lib/jvm/default-java/lib/arm/zero/libjvm.so&lt;br/&gt;
Cannot locate library for VM zero (skipping)&lt;br/&gt;
Java Home located in /usr/lib/jvm/default-java&lt;br/&gt;
+-- DUMPING JAVA HOME STRUCTURE ------------------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Java Home:       &quot;/usr/lib/jvm/default-java&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Java VM Config.: &quot;/usr/lib/jvm/default-java/lib/jvm.cfg&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Found JVMs:      0&lt;br/&gt;
+-------------------------------------------------------&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;The real path is the following:&lt;br/&gt;
/usr/lib/jvm/default-java/lib/server/libjvm.so&lt;/p&gt;

&lt;p&gt;Using Java 8 works fine:&lt;br/&gt;
openjdk version &quot;1.8.0_212&quot;&lt;br/&gt;
OpenJDK Runtime Environment (build 1.8.0_212-8u212-b01-1+rpi1-b01)&lt;br/&gt;
OpenJDK Client VM (build 25.212-b01, mixed mode)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java version:&lt;/p&gt;

&lt;p&gt;openjdk version &quot;11.0.3&quot; 2019-04-16&lt;br/&gt;
OpenJDK Runtime Environment (build 11.0.3+7-post-Raspbian-5)&lt;br/&gt;
OpenJDK Server VM (build 11.0.3+7-post-Raspbian-5, mixed mode)&lt;/p&gt;

&lt;p&gt;Java home:&lt;/p&gt;

&lt;p&gt;/usr/lib/jvm/java-11-openjdk-armhf&lt;/p&gt;</environment>
        <key id="13262329">DAEMON-410</key>
            <summary>jsvc fails to find OpenJDK11 libjvm.so on a raspberry 4 (buster)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="b.jemine@drc.lu">Jemine</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Oct 2019 10:03:52 +0000</created>
                <updated>Fri, 22 Nov 2019 13:30:14 +0000</updated>
                            <resolved>Fri, 22 Nov 2019 13:30:14 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.2.3</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16978338" author="rmorrell" created="Wed, 20 Nov 2019 11:44:48 +0000"  >&lt;p&gt;I have also had this issue on RedHat 7u7&lt;/p&gt;

&lt;p&gt;See attached location.patch&lt;/p&gt;</comment>
                            <comment id="16980145" author="markt" created="Fri, 22 Nov 2019 13:30:14 +0000"  >&lt;p&gt;Thanks for the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12986324" name="location.patch" size="449" author="rmorrell" created="Wed, 20 Nov 2019 11:43:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07llc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-409] Faulting application name: prunsrv.exe crashes on Windows 10</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-409</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When attempting to start the Service it crashes on startup and provides this entry in the Windows application log:&#160;&lt;/p&gt;

&lt;p&gt;Faulting application name: prunsrv.exe, version: 1.1.0.0, time stamp: 0x5a022d06&lt;/p&gt;

&lt;p&gt;Faulting module name: ntdll.dll, version: 10.0.17763.719, time stamp: 0x6071cf9dException code: 0xc0000005&lt;/p&gt;

&lt;p&gt;Fault offset: 0x000465b8&lt;/p&gt;

&lt;p&gt;Faulting process id: 0x22b0&lt;/p&gt;

&lt;p&gt;Faulting application start time: 0x01d5636553896926&lt;/p&gt;

&lt;p&gt;Faulting application path: &amp;lt;..&amp;gt;\prunsrv.exe&lt;/p&gt;

&lt;p&gt;Faulting module path: C:\WINDOWS\SYSTEM32\ntdll.dll&lt;/p&gt;

&lt;p&gt;Report Id: ba99f326-ea99-4272-b388-cd1b9e9f1cea&lt;/p&gt;

&lt;p&gt;Faulting package full name:&lt;/p&gt;

&lt;p&gt;Faulting package-relative application ID:&lt;/p&gt;</description>
                <environment>&lt;p&gt;Upgraded&#160;Windows 2016 to Windows 2019&lt;/p&gt;</environment>
        <key id="13260506">DAEMON-409</key>
            <summary>Faulting application name: prunsrv.exe crashes on Windows 10</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10009">Works for Me</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="manju.r@hpe.com">Manju</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Oct 2019 06:10:51 +0000</created>
                <updated>Wed, 10 Feb 2021 00:20:25 +0000</updated>
                            <resolved>Thu, 21 Nov 2019 14:47:29 +0000</resolved>
                                    <version>1.1.0</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16944292" author="markt" created="Fri, 4 Oct 2019 07:39:22 +0000"  >&lt;p&gt;Please update to the recently released 1.2.2 and re-test.&lt;/p&gt;

&lt;p&gt;If you still see the crash please provide a minimal test case that reproduces the issue.&lt;/p&gt;</comment>
                            <comment id="16944328" author="manju.r@hpe.com" created="Fri, 4 Oct 2019 08:51:36 +0000"  >&lt;p&gt;Hi Mark,&lt;/p&gt;

&lt;p&gt;Thanks for replying, issue is seen in production environment of customer . We would replace and check if issue is fixed&#160;else can you let us know if needed any logs to be collected from environment for debug.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Manju&lt;/p&gt;</comment>
                            <comment id="16947665" author="manju.r@hpe.com" created="Wed, 9 Oct 2019 13:31:16 +0000"  >&lt;p&gt;Hi Mark,&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We are still facing issue however not with same error.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting application name: prunsrv.exe, version: 1.2.2.0, time stamp: 0x5d922315&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting module name: ntdll.dll, version: 10.0.17763.737, time stamp: 0xd7315be6&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Exception code: 0xc0000005&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Fault offset: 0x000465b8&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting process id: 0xb8f8&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting application start time: 0x01d57ea37f386967&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting application path: &amp;lt;C:\Program Files\HPESCVMMSupport\Server\jetty-distribution-9.4.11.v20180605\prunsrv.exe&amp;gt;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting module path: C:\WINDOWS\SYSTEM32\ntdll.dll&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Report Id: eb6c03cd-517c-4ad1-982b-8b7309430e06&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting package full name:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting package-relative application ID:&lt;/b&gt; &#160;&lt;/p&gt;

&lt;p&gt;Its very critical issue as customer waiting for the fix, please let us know we can get someone from your team for check the environment.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16947670" author="garydgregory" created="Wed, 9 Oct 2019 13:43:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=manju.r%40hpe.com&quot; class=&quot;user-hover&quot; rel=&quot;manju.r@hpe.com&quot;&gt;manju.r@hpe.com&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Can you get a stack trace?&lt;/p&gt;</comment>
                            <comment id="16947677" author="manju.r@hpe.com" created="Wed, 9 Oct 2019 13:47:35 +0000"  >&lt;p&gt;Please share steps to get the same?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16947769" author="manju.r@hpe.com" created="Wed, 9 Oct 2019 14:51:12 +0000"  >&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12982589/12982589_SCVMMAddInServer.2019-10-09.log&quot; title=&quot;SCVMMAddInServer.2019-10-09.log attached to DAEMON-409&quot;&gt;SCVMMAddInServer.2019-10-09.log&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;logs.&lt;/p&gt;</comment>
                            <comment id="16947776" author="markt" created="Wed, 9 Oct 2019 15:02:04 +0000"  >&lt;p&gt;As per my previous request, please provide a minimal test case that reproduces this issue.&lt;/p&gt;</comment>
                            <comment id="16947782" author="manju.r@hpe.com" created="Wed, 9 Oct 2019 15:10:45 +0000"  >&lt;p&gt;Environment&#160; details :&lt;/p&gt;

&lt;p&gt;Windows 2019 Operating server&lt;/p&gt;

&lt;p&gt;Jetty server - 9.4.11&lt;/p&gt;

&lt;p&gt;Following are steps from batch file executed to get jetty server up and running&lt;/p&gt;

&lt;p&gt;@echo off&lt;br/&gt;
set SERVICE_NAME=SCVMMAddInServer&lt;br/&gt;
REM set INSTALL_DIR=%~1&lt;br/&gt;
set JETTY_HOME=%INSTALL_DIR%\Server\jetty-distribution-9.4.11.v20180605&lt;br/&gt;
set JETTY_BASE=%INSTALL_DIR%\Server\jetty-distribution-9.4.11.v20180605&lt;br/&gt;
set STOPKEY=secret&lt;br/&gt;
set STOPPORT=50001&lt;/p&gt;

&lt;p&gt;set PR_INSTALL=%INSTALL_DIR%\Server\jetty-distribution-9.4.11.v20180605\prunsrv.exe&lt;/p&gt;

&lt;p&gt;@REM Service Log Configuration&lt;br/&gt;
set PR_LOGPREFIX=%SERVICE_NAME%&lt;br/&gt;
set PR_LOGPATH=%INSTALL_DIR%\Server\jetty-distribution-9.4.11.v20180605\logs&lt;br/&gt;
set PR_STDOUTPUT=auto&lt;br/&gt;
set PR_STDERROR=auto&lt;br/&gt;
set PR_LOGLEVEL=Debug&lt;/p&gt;

&lt;p&gt;@REM Path to Java Installation&lt;br/&gt;
set JAVA_HOME=%INSTALL_DIR%\JVM&lt;br/&gt;
set PR_JVM=%JAVA_HOME%\bin\server\jvm.dll&lt;br/&gt;
set PR_CLASSPATH=%JETTY_HOME%\start.jar;%JAVA_HOME%\lib\tools.jar&lt;/p&gt;

&lt;p&gt;@REM JVM Configuration&lt;br/&gt;
set PR_JVMMS=128&lt;br/&gt;
set PR_JVMMX=512&lt;br/&gt;
set PR_JVMSS=4000&lt;br/&gt;
set PR_JVMOPTIONS=-Duser.dir=&quot;%JETTY_BASE%&quot;;-Djava.io.tmpdir=&quot;%temp%&quot;;-Djetty.home=&quot;%JETTY_HOME%&quot;;-Djetty.base=&quot;%JETTY_BASE%&quot;&lt;br/&gt;
@REM Startup Configuration&lt;br/&gt;
set JETTY_START_CLASS=org.eclipse.jetty.start.Main&lt;/p&gt;

&lt;p&gt;set PR_STARTUP=auto&lt;br/&gt;
set PR_STARTMODE=java&lt;br/&gt;
set PR_STARTCLASS=%JETTY_START_CLASS%&lt;br/&gt;
set PR_STARTPARAMS=STOP.KEY=&quot;%STOPKEY%&quot;;STOP.PORT=%STOPPORT%;-Dinstall.dir=%INSTALL_DIR%&lt;/p&gt;

&lt;p&gt;@REM Shutdown Configuration&lt;br/&gt;
set PR_STOPMODE=java&lt;br/&gt;
set PR_STOPCLASS=%JETTY_START_CLASS%&lt;br/&gt;
set PR_STOPPARAMS=--stop;STOP.KEY=&quot;%STOPKEY%&quot;;STOP.PORT=%STOPPORT%;STOP.WAIT=10&lt;/p&gt;

&lt;p&gt;&quot;%PR_INSTALL%&quot; //IS/%SERVICE_NAME% ^&lt;br/&gt;
&#160; --DisplayName=&quot;%SERVICE_NAME%&quot; ^&lt;br/&gt;
&#160; --Install=&quot;%PR_INSTALL%&quot; ^&lt;br/&gt;
&#160; --Startup=&quot;%PR_STARTUP%&quot; ^&lt;br/&gt;
&#160; --LogPath=&quot;%PR_LOGPATH%&quot; ^&lt;br/&gt;
&#160; --LogPrefix=&quot;%PR_LOGPREFIX%&quot; ^&lt;br/&gt;
&#160; --LogLevel=&quot;%PR_LOGLEVEL%&quot; ^&lt;br/&gt;
&#160; --StdOutput=&quot;%PR_STDOUTPUT%&quot; ^&lt;br/&gt;
&#160; --StdError=&quot;%PR_STDERROR%&quot; ^&lt;br/&gt;
&#160; --JavaHome=&quot;%JAVA_HOME%&quot; ^&lt;br/&gt;
&#160; --Jvm=&quot;%PR_JVM%&quot; ^&lt;br/&gt;
&#160; --JvmMs=&quot;%PR_JVMMS%&quot; ^&lt;br/&gt;
&#160; --JvmMx=&quot;%PR_JVMMX%&quot; ^&lt;br/&gt;
&#160; --JvmSs=&quot;%PR_JVMSS%&quot; ^&lt;br/&gt;
&#160; --JvmOptions=&quot;%PR_JVMOPTIONS%&quot; ^&lt;br/&gt;
&#160; --Classpath=&quot;%PR_CLASSPATH%&quot; ^&lt;br/&gt;
&#160; --StartMode=&quot;%PR_STARTMODE%&quot; ^&lt;br/&gt;
&#160; --StartClass=&quot;%JETTY_START_CLASS%&quot; ^&lt;br/&gt;
&#160; --StartParams=&quot;%PR_STARTPARAMS%&quot; ^&lt;br/&gt;
&#160; --StopMode=&quot;%PR_STOPMODE%&quot; ^&lt;br/&gt;
&#160; --StopClass=&quot;%PR_STOPCLASS%&quot; ^&lt;br/&gt;
&#160; --StopParams=&quot;%PR_STOPPARAMS%&quot;&lt;/p&gt;

&lt;p&gt;if not errorlevel 1 goto installed&lt;br/&gt;
echo Failed to install &quot;%SERVICE_NAME%&quot; service.&#160; Refer to log in %PR_LOGPATH%&lt;br/&gt;
goto end&lt;/p&gt;

&lt;p&gt;:installed&lt;br/&gt;
echo The Service &quot;%SERVICE_NAME%&quot; has been installed&lt;/p&gt;

&lt;p&gt;:end&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Service gets installed but does not start.&lt;/p&gt;</comment>
                            <comment id="16948215" author="manju.r@hpe.com" created="Thu, 10 Oct 2019 05:27:20 +0000"  >&lt;p&gt;Hi ,&lt;/p&gt;

&lt;p&gt;Any other information needed ? Please let us know status of same.&lt;/p&gt;</comment>
                            <comment id="16951737" author="manju.r@hpe.com" created="Tue, 15 Oct 2019 08:53:02 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Any update on the issue? Please share some information as this is critical issue.&lt;/p&gt;</comment>
                            <comment id="16952280" author="garydgregory" created="Tue, 15 Oct 2019 20:49:33 +0000"  >&lt;p&gt;I wonder if the Windows Event viewer would have any additional information?&lt;/p&gt;</comment>
                            <comment id="16952525" author="manju.r@hpe.com" created="Wed, 16 Oct 2019 05:41:22 +0000"  >&lt;p&gt;Event ID information&#160; are provided earlier, sending the same.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting application name: prunsrv.exe, version: 1.2.2.0, time stamp: 0x5d922315&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting module name: ntdll.dll, version: 10.0.17763.737, time stamp: 0xd7315be6&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Exception code: 0xc0000005&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Fault offset: 0x000465b8&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting process id: 0xb8f8&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting application start time: 0x01d57ea37f386967&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting application path: &amp;lt;C:\Program Files\HPESCVMMSupport\Server\jetty-distribution-9.4.11.v20180605\prunsrv.exe&amp;gt;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting module path: C:\WINDOWS\SYSTEM32\ntdll.dll&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Report Id: eb6c03cd-517c-4ad1-982b-8b7309430e06&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting package full name:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Faulting package-relative application ID:&lt;/b&gt; &#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16955905" author="manju.r@hpe.com" created="Mon, 21 Oct 2019 09:34:05 +0000"  >&lt;p&gt;Can I know Status?&lt;/p&gt;</comment>
                            <comment id="16956037" author="garydgregory" created="Mon, 21 Oct 2019 13:01:19 +0000"  >&lt;p&gt;No progress from me, no time sadly. On your end, I encourage you to get some kind of stack trace &lt;em&gt;if possible&lt;/em&gt; to see who called who called who to get to root of the issue. OTOH, if this whole issue is reproducible from the information you gave for Tomcat, then someone should be able to reproduce it, assuming this is not dependent on a specific OS version, which it very well may be. I still encourage you to reproduce this and capture a stack trace, this may involve catching the fault in a debugger.&lt;/p&gt;</comment>
                            <comment id="16956174" author="manju.r@hpe.com" created="Mon, 21 Oct 2019 14:56:25 +0000"  >&lt;p&gt;Hi Gary,&lt;/p&gt;

&lt;p&gt;Server trying to get up is Jetty , When we tried to run the Jetty from command line it was successful. However the issue is related to when Prunsrv,exe invoked to install and run as window service. Let us know if any steps to get more stack trace of application related.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16956179" author="garydgregory" created="Mon, 21 Oct 2019 15:01:15 +0000"  >&lt;p&gt;Sorry, I meant Jetty, not Tomcat.&lt;/p&gt;</comment>
                            <comment id="16962733" author="manju.r@hpe.com" created="Wed, 30 Oct 2019 06:17:52 +0000"  >&lt;p&gt;Hi ,&lt;/p&gt;

&lt;p&gt;Any update on the issue?&lt;/p&gt;</comment>
                            <comment id="16979337" author="markt" created="Thu, 21 Nov 2019 14:47:29 +0000"  >&lt;p&gt;I&apos;ve installed Jetty 9.4.11 on a fully patched Windows Server 2019 and then run the provided install script. There were a few issues that required fixing (pick up JAVA_HOME from the environment, not the value set in the script; a few paths needed &quot;C:&quot; added to make them absolute) but once they was fixed (and there were suitable error messages in the logs for each issue) the service started without error.&lt;/p&gt;

&lt;p&gt;Please do not re-open this issue unless you can provide the steps to reproduce it on a fully patched Windows 2019 server with the latest Commons Daemon (currently 1.2.2)&lt;/p&gt;</comment>
                            <comment id="17282106" author="sw508" created="Tue, 9 Feb 2021 23:13:59 +0000"  >&lt;p&gt;Still seeing this with 1.2.4 when stopping. Any ideas? We&apos;re using it with wildfly but we just renamed prunsrv.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Crashes on server 2012, 2016, olderversions, and fully patched win10.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Faulting application name: wildfly-service.exe, version: 1.2.4.0, time stamp: 0x600011df&lt;br/&gt;
Faulting module name: ntdll.dll, version: 10.0.19041.789, time stamp: 0x4f929756&lt;br/&gt;
Exception code: 0xc0000374&lt;br/&gt;
Fault offset: 0x00000000000ff099&lt;br/&gt;
Faulting process id: 0x14d4&lt;br/&gt;
Faulting application start time: 0x01d6ff2eb6330c32&lt;br/&gt;
Faulting application path: C:\web\bin\service\amd64\wildfly-service.exe&lt;br/&gt;
Faulting module path: C:\WINDOWS\SYSTEM32\ntdll.dll&lt;br/&gt;
Report Id: f2389cdb-df37-4a9c-b862-4399161457ea&lt;br/&gt;
Faulting package full name: &lt;br/&gt;
Faulting package-relative application ID:&lt;/p&gt;</comment>
                            <comment id="17282127" author="garydgregory" created="Wed, 10 Feb 2021 00:18:27 +0000"  >&lt;p&gt;Can you capture a stack trace? Also running with debug logging might (maybe) show us how far we get.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12982589" name="SCVMMAddInServer.2019-10-09.log" size="1216" author="manju.r@hpe.com" created="Wed, 9 Oct 2019 14:51:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z07acg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-408] PROCRUN 1.2.x x64 crash on Windows Server 2008 R2</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-408</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Since procrun version 1.2.0 the application crashes when executed on Windows Server 2008 R2:&lt;br/&gt;
 Problemsignatur:&lt;br/&gt;
Problem Event Name: BEX64&#160; &lt;br/&gt;
 Application Name: procrun.exe&#160; &lt;br/&gt;
 Application Version: 1.2.1.0&#160; &lt;br/&gt;
 Application Timestamp: 5d6fdd78&#160; &lt;br/&gt;
Fault&#160;Module Name: StackHash_25f1&#160; &lt;br/&gt;
Fault&#160;Module Version: 0.0.0.0&#160; &lt;br/&gt;
Fault Module Timestamp: 00000000&#160; &lt;br/&gt;
Exception Offset: 00000000004f8aa2&#160; &lt;br/&gt;
Exception Code: c0000005&#160; &lt;br/&gt;
Exception Data: 0000000000000008&#160; &lt;br/&gt;
 OS Version: 6.1.7600.2.0.0.1296.17&#160; &lt;br/&gt;
 Additional Information 1: 25f1&#160; &lt;br/&gt;
 Additional Information 2: 25f1bf9a72a93f5658ee9429e86c7409&#160; &lt;br/&gt;
 Additional Information 3: f2ca&#160; &lt;br/&gt;
 Additional Information 4: f2ca14b6934ede5b7e664f76bc87ba68&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I also have a crash dump available but for security/sensitive reasons I will only provide it privately when necessary.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;With version 1.1.0 I can&apos;t reproduce the issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13257665">DAEMON-408</key>
            <summary>PROCRUN 1.2.x x64 crash on Windows Server 2008 R2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="swimmesberger">Simon Wimmesberger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Sep 2019 13:04:21 +0000</created>
                <updated>Wed, 25 Sep 2019 11:34:48 +0000</updated>
                            <resolved>Wed, 25 Sep 2019 11:34:48 +0000</resolved>
                                    <version>1.2.0</version>
                    <version>1.2.1</version>
                                    <fixVersion>1.2.2</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16937644" author="markt" created="Wed, 25 Sep 2019 11:30:31 +0000"  >&lt;p&gt;This looks to be the same as&#160;&lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=63767&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bz.apache.org/bugzilla/show_bug.cgi?id=63767&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The workaround is to install all currently available updates in Windows Update. Or at least one that results in the UCRT being installed.&lt;/p&gt;

&lt;p&gt;I have a fix that I&apos;ll apply shortly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06t7s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-407] Prunmgr displays incorrect logging level.</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-407</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;After installing Tomcat8, Logging Level is registered as &quot;Info&quot; in registry. But Tomcat8w(prunmgr) displays Level &quot;Warn&quot; on Logging tab.&lt;/p&gt;

&lt;p&gt;There is a mismatch of LOGL_xxx order in prunmgr.c#945-960&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                  ComboBox_AddStringW(GetDlgItem(hDlg, IDC_PPLGLEVEL), LOGL_ERROR);
                  ComboBox_AddStringW(GetDlgItem(hDlg, IDC_PPLGLEVEL), LOGL_WARN);
                  ComboBox_AddStringW(GetDlgItem(hDlg, IDC_PPLGLEVEL), LOGL_INFO);
                  ComboBox_AddStringW(GetDlgItem(hDlg, IDC_PPLGLEVEL), LOGL_DEBUG);
                  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((b = apxRegistryGetStringW(hRegserv, APXREG_PARAMSOFTWARE,
                                                 _s_log, L&lt;span class=&quot;code-quote&quot;&gt;&quot;Level&quot;&lt;/span&gt;)) != NULL) {
                      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!lstrcmpiW(b, LOGL_ERROR))
                          ComboBox_SetCurSel(GetDlgItem(hDlg, IDC_PPLGLEVEL), 0);
                      &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!lstrcmpiW(b, LOGL_INFO))
                          ComboBox_SetCurSel(GetDlgItem(hDlg, IDC_PPLGLEVEL), 1);
                      &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!lstrcmpiW(b, LOGL_WARN))
                          ComboBox_SetCurSel(GetDlgItem(hDlg, IDC_PPLGLEVEL), 2);
                      &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
                          ComboBox_SetCurSel(GetDlgItem(hDlg, IDC_PPLGLEVEL), 3);
                      apxFree(b);
                  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ComboBox_AddStringW&apos;s order&#160; is LOGL_WARN, LOGL_INFO, but ComboBox_SetCurSel&apos;s order is LOGL_INFO, LOG_WARN.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13253600">DAEMON-407</key>
            <summary>Prunmgr displays incorrect logging level.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hagami">hagami</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Aug 2019 01:24:42 +0000</created>
                <updated>Wed, 4 Sep 2019 10:15:05 +0000</updated>
                            <resolved>Wed, 4 Sep 2019 10:15:05 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.1</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16918393" author="hagami" created="Thu, 29 Aug 2019 08:18:11 +0000"  >&lt;p&gt;Also, if Logging Level not found (case of default) in registry, prunmgr displays &quot;Warn&quot; because of prunmgr.c#962&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                 &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
                     ComboBox_SetCurSel(GetDlgItem(hDlg, IDC_PPLGLEVEL), 1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16922358" author="markt" created="Wed, 4 Sep 2019 10:15:05 +0000"  >&lt;p&gt;Thanks for the report.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0650g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-406] Is jsvc compatible with OpenJDK 12?</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-406</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Does jsvc work with OpenJDK 12?&lt;/p&gt;

&lt;p&gt;OS: Fedora, CentOS 7.4&lt;br/&gt;
 Java: OpenJDK 12&lt;br/&gt;
 jsvc version: 1.2.0&lt;br/&gt;
 Tomcat: 8.5.38&lt;/p&gt;

&lt;p&gt;Issue:&lt;br/&gt;
 Our application currently uses jsvc to run Tomcat 8.5.38 with jre 1.8.xx &lt;br/&gt;
 We are trying to migrate our java application from Oracle jre 1.8 to OpenJDK 12. &lt;br/&gt;
 We upgraded jsvc to 1.2.0. When trying to launch tomcat 8 with jsvc using OpenJDK 12, we get below error&lt;/p&gt;

&lt;p&gt;Cannot find any VM in Java Home /opt/java&lt;/p&gt;

&lt;p&gt;From debug trace, jsvc appears to be searching for libjvm.so in /opt/java/lib/amd64/server/libjvm.so (JAVA_HOME is /opt/java)&lt;/p&gt;

&lt;p&gt;But with OpenJDK 12, path to libjvm.so is /opt/java/lib/server/libjvm.so&lt;/p&gt;

&lt;p&gt;Is there a way to make jsvc look for libjvm.so in correct path?&lt;/p&gt;

&lt;p&gt;Below is debug trace when trying to start tomcat using jsvc&lt;/p&gt;

&lt;p&gt;+-- DUMPING PARSED COMMAND LINE ARGUMENTS --------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Detach: False&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Show Version: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Show Help: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Check Only: Disabled&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Stop: False&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Wait: 0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Run as service: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Install service: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Remove service: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;JVM Name: &quot;server&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Java Home: &quot;/opt/java&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;PID File: &quot;/var/run/jsvc.pid&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;User Name: &quot;tomcat&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Extra Options: 27&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Xms128M&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Xmx580M&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:MaxMetaspaceSize=128M&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:+UseConcMarkSweepGC&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:+CMSClassUnloadingEnabled&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Xdebug&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:+PrintClassHistogram&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:+HeapDumpOnOutOfMemoryError&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:HeapDumpPath=/var/corefiles&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:ErrorFile=/var/corefiles/hs_err_pid&amp;lt;&amp;gt;.log&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dfile.encoding=UTF8&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dhttps.protocols=TLSv1,TLSv1.1,TLSv1.2&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Djava.class.path=/opt/apache-tomcat-8.5.38/bin/bootstrap.jar:/opt/apache-tomcat-8.5.38/bin/commons-daemon.jar:/opt/apache-tomcat-8.5.38/bin/tomcat-juli.jar&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dcatalina.home=/opt/apache-tomcat-8.5.38&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dcatalina.base=/opt/tomcat&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Djava.io.tmpdir=/tmp&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Djdk.tls.rejectClientInitiatedRenegotiation=true&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dorg.terracotta.quartz.skipUpdateCheck=true&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dsun.reflect.noInflation=false&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dsun.reflect.inflationThreshold=16000&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Class Invoked: &quot;org.apache.catalina.startup.Bootstrap&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Class Arguments: 0&lt;br/&gt;
 +-------------------------------------------------------&lt;br/&gt;
 user changed to &apos;tomcat&apos;&lt;br/&gt;
 User &apos;tomcat&apos; validated&lt;br/&gt;
 Attempting to locate Java Home in /opt/java&lt;br/&gt;
 Attempting to locate VM configuration file /opt/java/jre/lib/jvm.cfg&lt;br/&gt;
 Attempting to locate VM configuration file /opt/java/lib/jvm.cfg&lt;br/&gt;
 Found VM configuration file at /opt/java/lib/jvm.cfg&lt;br/&gt;
 Found VM server definition in configuration&lt;br/&gt;
 Checking library /opt/java/jre/lib/amd64/server/libjvm.so&lt;br/&gt;
 Checking library /opt/java/lib/amd64/server/libjvm.so&lt;br/&gt;
 Cannot locate library for VM server (skipping)&lt;br/&gt;
 Found VM client definition in configuration&lt;br/&gt;
 Checking library /opt/java/jre/lib/amd64/client/libjvm.so&lt;br/&gt;
 Checking library /opt/java/lib/amd64/client/libjvm.so&lt;br/&gt;
 Cannot locate library for VM client (skipping)&lt;br/&gt;
 Java Home located in /opt/java&lt;br/&gt;
 +-- DUMPING JAVA HOME STRUCTURE ------------------------&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Java Home: &quot;/opt/java&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Java VM Config.: &quot;/opt/java/lib/jvm.cfg&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Found JVMs: 0&lt;br/&gt;
 +-------------------------------------------------------&lt;br/&gt;
 Cannot find any VM in Java Home /opt/java&lt;br/&gt;
 +-- DUMPING PARSED COMMAND LINE ARGUMENTS --------------&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Detach: False&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Show Version: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Show Help: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Check Only: Disabled&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Stop: False&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Wait: 0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Run as service: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Install service: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Remove service: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;JVM Name: &quot;auto&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Java Home: &quot;/opt/java&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;PID File: &quot;/var/run/jsvc.pid&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;User Name: &quot;tomcat&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Extra Options: 27&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Xms128M&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Xmx580M&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:MaxMetaspaceSize=128M&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:+UseConcMarkSweepGC&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:+CMSClassUnloadingEnabled&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Xdebug&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:+PrintClassHistogram&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:+HeapDumpOnOutOfMemoryError&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:HeapDumpPath=/var/corefiles&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-XX:ErrorFile=/var/corefiles/hs_err_pid&amp;lt;&amp;gt;.log&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dfile.encoding=UTF8&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dhttps.protocols=TLSv1,TLSv1.1,TLSv1.2&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dorg.apache.catalina.loader.WebappClassLoader.ENABLE_CLEAR_REFERENCES=false&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Djava.class.path=/opt/apache-tomcat-8.5.38/bin/bootstrap.jar:/opt/apache-tomcat-8.5.38/bin/commons-daemon.jar:/opt/apache-tomcat-8.5.38/bin/tomcat-juli.jar&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dcatalina.home=/opt/apache-tomcat-8.5.38&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dcatalina.base=/opt/tomcat&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Djava.io.tmpdir=/tmp&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Djdk.tls.rejectClientInitiatedRenegotiation=true&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dorg.terracotta.quartz.skipUpdateCheck=true&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dsun.reflect.noInflation=false&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dsun.reflect.inflationThreshold=16000&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&quot;-Dsun.security.krb5.debug=true&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Class Invoked: &quot;org.apache.catalina.startup.Bootstrap&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Class Arguments: 0&lt;br/&gt;
 +-------------------------------------------------------&lt;br/&gt;
 user changed to &apos;tomcat&apos;&lt;br/&gt;
 User &apos;tomcat&apos; validated&lt;br/&gt;
 Attempting to locate Java Home in /opt/java&lt;br/&gt;
 Attempting to locate VM configuration file /opt/java/jre/lib/jvm.cfg&lt;br/&gt;
 Attempting to locate VM configuration file /opt/java/lib/jvm.cfg&lt;br/&gt;
 Found VM configuration file at /opt/java/lib/jvm.cfg&lt;br/&gt;
 Found VM server definition in configuration&lt;br/&gt;
 Checking library /opt/java/jre/lib/amd64/server/libjvm.so&lt;br/&gt;
 Checking library /opt/java/lib/amd64/server/libjvm.so&lt;br/&gt;
 Cannot locate library for VM server (skipping)&lt;br/&gt;
 Found VM client definition in configuration&lt;br/&gt;
 Checking library /opt/java/jre/lib/amd64/client/libjvm.so&lt;br/&gt;
 Checking library /opt/java/lib/amd64/client/libjvm.so&lt;br/&gt;
 Cannot locate library for VM client (skipping)&lt;br/&gt;
 Java Home located in /opt/java&lt;br/&gt;
 +-- DUMPING JAVA HOME STRUCTURE ------------------------&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Java Home: &quot;/opt/java&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Java VM Config.: &quot;/opt/java/lib/jvm.cfg&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Found JVMs: 0&lt;br/&gt;
 +-------------------------------------------------------&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13248929">DAEMON-406</key>
            <summary>Is jsvc compatible with OpenJDK 12?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Pendse">Atul</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Aug 2019 17:05:38 +0000</created>
                <updated>Wed, 4 Sep 2019 14:01:26 +0000</updated>
                            <resolved>Wed, 4 Sep 2019 14:01:26 +0000</resolved>
                                    <version>1.0.10</version>
                    <version>1.2.0</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16922352" author="markt" created="Wed, 4 Sep 2019 10:13:07 +0000"  >&lt;p&gt;Thanks for the report.&lt;/p&gt;</comment>
                            <comment id="16922356" author="markt" created="Wed, 4 Sep 2019 10:14:18 +0000"  >&lt;p&gt;Sorry.&#160;Issues changed order in the GUI and edited the wrong one.&lt;/p&gt;</comment>
                            <comment id="16922512" author="markt" created="Wed, 4 Sep 2019 14:01:26 +0000"  >&lt;p&gt;This works for me with OpenJDK 12.0.2 and adopt-OpenJDK 12.0.2.&lt;/p&gt;

&lt;p&gt;Checking the source code, jsvc will look in the correct locations.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05cc0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-405] On Windows 10, an exe service starts but its status stops being shown as Running and service stop doesn&apos;t work</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-405</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I have a Windows 10 x64 service created with this command (run in a command window which says &quot;Administrator: Command Prompt&quot;):&lt;/p&gt;

&lt;p&gt;prunsrv //IS//IBMJL --Startup=manual --DisplayName=&quot;IBM Jazz on Liberty&quot; --Description=&quot;IBM Jazz on Liberty&quot; ++DependsOn=Tcpip --LogPath=C:\IBM\JazzTeamServer\server\logs --StdOutput=auto --StdError=auto --StartMode=exe --StartPath=C:\IBM\JazzTeamServer\server --StartImage=C:\IBM\JazzTeamServer\server\server.startup.bat --StopMode=exe --StopPath=C:\IBM\JazzTeamServer\server --StopImage=C:\IBM\JazzTeamServer\server\server.shutdown.bat&lt;/p&gt;

&lt;p&gt;The two batch files start/stop IBM Jazz running in Websphere Liberty Profile.&lt;/p&gt;

&lt;p&gt;The service can be succesfully started by&lt;/p&gt;

&lt;p&gt;NET START IBMJL&lt;/p&gt;

&lt;p&gt;And in the Windows Services this is initially shown as Running but then that status disappears (which I think means that Services doesn&apos;t think the IBMJL is running, but Liberty is still active and usable), and using&lt;/p&gt;

&lt;p&gt;NET STOP IBMJL&lt;/p&gt;

&lt;p&gt;doesn&apos;t work at all, says the service isn&apos;t running. I can force Liberty to stop manually by running the server.shutdown.bat.&lt;/p&gt;

&lt;p&gt;The generated logs show the startup, but there is nothing at all for the attempted shutdown of the service.&lt;/p&gt;

&lt;p&gt;This &lt;b&gt;precise&lt;/b&gt; same service definition works fine (and has done for a long time) on Server 2012R2 and on Server 2016.&lt;/p&gt;

&lt;p&gt;I tried both 1.1.0 and 1.2.0, and I tried both x32 and x64 builds of prunsrv, no better.&lt;/p&gt;

&lt;p&gt;I don&apos;t know how to debug this - I don&apos;t have a workaround which lets me run this my service on Windows 10, but for my particular deployment that doesn&apos;t actually matter, so I set this bug to Minor.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13246794">DAEMON-405</key>
            <summary>On Windows 10, an exe service starts but its status stops being shown as Running and service stop doesn&apos;t work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="barny451">Ian Barnard</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jul 2019 11:35:06 +0000</created>
                <updated>Wed, 4 Sep 2019 13:21:38 +0000</updated>
                            <resolved>Wed, 4 Sep 2019 13:21:38 +0000</resolved>
                                    <version>1.1.0</version>
                    <version>1.2.0</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16922477" author="markt" created="Wed, 4 Sep 2019 13:21:38 +0000"  >&lt;p&gt;I&apos;ve tested this with Tomcat 9 and I can&apos;t reproduce it. Looking at the source code, the issue may be related to a different return code from the batch file used to start the process. Setting the log level to debug may also be helpful. Further assistance. if required,&#160; is available via the users mailing list.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04z68:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-404] Crash: Openjdk not detected from registry</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-404</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I have openjdk 12 installed and &lt;tt&gt;Jvm=auto&lt;/tt&gt; set. When I start procrun 1.2.0 the service crashes with an access violation. With procrun 1.1.0 the service doesn&apos;t find the dll at all.&lt;/p&gt;

&lt;p&gt;Openjdk is from&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ojdkbuild/ojdkbuild/releases/download/12.0.1-1/java-12-openjdk-12.0.1.12-1.windows.ojdkbuild.x86_64.msi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ojdkbuild/ojdkbuild/releases/download/12.0.1-1/java-12-openjdk-12.0.1.12-1.windows.ojdkbuild.x86_64.msi&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and installed such that it only sets the keys under &lt;tt&gt;HKLM\JavaSoft\JDK&lt;/tt&gt; and updates &lt;tt&gt;PATH&lt;/tt&gt;. No &lt;tt&gt;JAVA_HOME&lt;/tt&gt; set. There are no other Java installations besides OpenJdk.&lt;/p&gt;

&lt;p&gt;If I change &lt;tt&gt;HKLM\SOFTWARE\WOW6432Node\Apache Software Foundation\Procrun 2.0\servicename\Parameters\Java&lt;/tt&gt; from &lt;tt&gt;auto&lt;/tt&gt; to the actual path of the OpenJdk jvm.dll the service starts just fine.&lt;/p&gt;

&lt;p&gt;The situation is the same with the OpenJdk build from AdoptOpenJDK. The keys created under &lt;tt&gt;HKLM\JavaSoft&lt;/tt&gt; are slightly different, though.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Server 2016 / 1607&lt;/p&gt;</environment>
        <key id="13246362">DAEMON-404</key>
            <summary>Crash: Openjdk not detected from registry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lemkemch">Michael Lemke</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Jul 2019 16:33:12 +0000</created>
                <updated>Wed, 4 Sep 2019 11:45:56 +0000</updated>
                            <resolved>Wed, 4 Sep 2019 11:45:56 +0000</resolved>
                                    <version>1.1.0</version>
                    <version>1.2.0</version>
                                    <fixVersion>1.2.1</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16922403" author="markt" created="Wed, 4 Sep 2019 11:45:56 +0000"  >&lt;p&gt;Newer versions of Java do not install a separate JRE. The search algorithm used by procrun only looked in the registry for the runtime lib and the JRE. It did not look for the JDK. I&apos;ve added the JDK to the search and updated the docs to document the search order used when looking for jvm.dll.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04wig:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-403] umask log is wrong</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-403</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The following log is wrong in&#160; jsvc-unix.c since the following bug&#160; fix has been fixed:&lt;/p&gt;

&lt;p&gt;fixed: &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-318&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DAEMON-318&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;l. 1271&#160;log_debug(&quot;Switching umask back to %03o from %03o&quot;, envmask, args-&amp;gt;umask);&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Indeed the umask is never set back to the initial umask.&lt;/p&gt;

&lt;p&gt;The log may show something like this instead:&lt;/p&gt;

&lt;p&gt;l. 1271&#160;log_debug(&quot;Switching umask&#160;from&#160;%03o&#160;to&#160;%03o&quot;, envmask, args-&amp;gt;umask);&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13245951">DAEMON-403</key>
            <summary>umask log is wrong</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ch29">Charles</reporter>
                        <labels>
                            <label>usability</label>
                    </labels>
                <created>Fri, 19 Jul 2019 09:08:22 +0000</created>
                <updated>Mon, 22 Jul 2019 09:58:19 +0000</updated>
                            <resolved>Mon, 22 Jul 2019 09:58:19 +0000</resolved>
                                    <version>1.1.0</version>
                    <version>1.2.0</version>
                                    <fixVersion>1.2.1</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="43200">12h</timeoriginalestimate>
                            <timeestimate seconds="43200">12h</timeestimate>
                                        <comments>
                            <comment id="16890047" author="markt" created="Mon, 22 Jul 2019 09:58:19 +0000"  >&lt;p&gt;Thanks for reporting this. I have applied your proposed fix to master and it will be in the next release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://issues.apache.org/jira/browse/DAEMON-318]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04tz4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-402] frequent crash in prunsrv when stopping service in &apos;java&apos; mode</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-402</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I see frequent crashes in prunsrv.exe on Windows 10.&lt;/p&gt;

&lt;p&gt;I have the impression that the WM_CLOSE windows message is sent multiple times - and the code does not expect that, resulting in an attempt to free memory that was already freed.&lt;/p&gt;


&lt;p&gt;Here is a stack trace from a minidump:&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160; ntdll.dll!00007ff903af6e1e()&#160;&#160;&#160; Unknown&lt;br/&gt;
&#160;&#160;&#160;&#160; AcLayers.dll!00007ff87cd77a56()&#160;&#160;&#160; Unknown&lt;br/&gt;
&#160;&#160;&#160;&#160; prunsrv.exe!HeapFREE(void * hHeap, unsigned long dwFlags, void * lpMem) Line 71&#160;&#160;&#160; C&lt;br/&gt;
&#160;&#160;&#160;&#160; prunsrv.exe!__apxPoolFreeCore(void * lpMem) Line 133&#160;&#160;&#160; C&lt;br/&gt;
&#160;&#160;&#160;&#160; prunsrv.exe!apxFree(void * lpMem) Line 402&#160;&#160;&#160; C&lt;br/&gt;
&#160;&#160;&#160;&#160; prunsrv.exe!__apxProcessCallback(stAPXHANDLE * hObject, unsigned int uMsg, unsigned __int64 wParam, __int64 lParam) Line 396&#160;&#160;&#160; C&lt;br/&gt;
&#160;&#160;&#160;&#160; prunsrv.exe!apxCloseHandle(stAPXHANDLE * hObject) Line 498&#160;&#160;&#160; C&lt;br/&gt;
&#160;&#160;&#160;&#160; prunsrv.exe!__apxPoolCallback(stAPXHANDLE * hObject, unsigned int uMsg, unsigned __int64 wParam, __int64 lParam) Line 190&#160;&#160;&#160; C&lt;br/&gt;
&#160;&#160;&#160;&#160; prunsrv.exe!__apxPoolCallback(stAPXHANDLE * hObject, unsigned int uMsg, unsigned __int64 wParam, __int64 lParam) Line 184&#160;&#160;&#160; C&lt;br/&gt;
&#160;&#160;&#160;&#160; prunsrv.exe!apxCloseHandle(stAPXHANDLE * hObject) Line 498&#160;&#160;&#160; C&lt;br/&gt;
&#160;&#160;&#160;&#160; prunsrv.exe!apxHandleManagerDestroy(...) Line 291&#160;&#160;&#160; C&lt;br/&gt;
&#160;&#160;&#160;&#160; prunsrv.exe!main(int argc, char * * argv) Line 1830&#160;&#160;&#160; C&lt;/p&gt;</description>
                <environment>&lt;p&gt;windows 10&lt;/p&gt;</environment>
        <key id="13235748">DAEMON-402</key>
            <summary>frequent crash in prunsrv when stopping service in &apos;java&apos; mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lleroy">lode leroy</reporter>
                        <labels>
                            <label>easyfix</label>
                            <label>patch</label>
                            <label>windows</label>
                    </labels>
                <created>Mon, 27 May 2019 08:35:38 +0000</created>
                <updated>Tue, 11 Jun 2019 09:33:49 +0000</updated>
                            <resolved>Tue, 11 Jun 2019 09:33:49 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.1.1</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16849857" author="markt" created="Tue, 28 May 2019 15:41:24 +0000"  >&lt;p&gt;Can you provide some more details about the circumstances under which you observe these crashes?&#160;&lt;/p&gt;

&lt;p&gt;To what extent has this patch been tested?&lt;/p&gt;

&lt;p&gt;I am concerned that the patch is addressing a symptom rather than the root cause.&lt;/p&gt;</comment>
                            <comment id="16850597" author="lleroy" created="Wed, 29 May 2019 07:56:31 +0000"  >&lt;p&gt;I have a service running in java mode (with openjdk8) and when the java code is updated it is stopped (net stop ...; update ; net start ...), then we see that the process prunsrv frequently crashes. (The java process has a jni dll in use, so it needs to be stopped before it&apos;s possible to update the dependencies of that dll after the nightly build)&lt;/p&gt;

&lt;p&gt;There are actually multiple services using the same prunsrv.exe binary and the underlying java process is somewhat slow to shut down. This runs on multiple test servers, and we see the crashes on several. I also have the problem if I run &quot;net start ...; net stop ...&quot; in a loop - with minidumps enabled, I see about 1 crash in 5)&lt;/p&gt;

&lt;p&gt;On my machine I see no more crashes at all (hundreds of stop/start cycles), nor on the test machines that have this fix included.&lt;/p&gt;

&lt;p&gt;I think the root cause is that the WM_CLOSE message is sent multiple times. (I thought the WM_CLOSE was sent by Windows - so yeah, maybe the code should not call the same callback twice. Unfortunately, I do not know the code enough to understand how it works)&lt;/p&gt;

&lt;p&gt;I would like to see this fix included in 1.1.1 so we can run the official prunsrv binary instead of a patched-and-self-compiled one.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16860740" author="markt" created="Tue, 11 Jun 2019 09:33:49 +0000"  >&lt;p&gt;Thanks for the additional information. I have applied your patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12969868" name="fix-crash-on-repeated_wmclose.diff" size="575" author="lleroy" created="Mon, 27 May 2019 08:49:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z033rk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-401] Environment variables set on service not available in JNI dll</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-401</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I have a JNI dll loaded by a Java process running as a Windows service on Windows 2019 using prunsrv. The JNI library is built with VC14, and makes calls to getenv(), which is imported from&#160;ucrtbase.dll.&lt;/p&gt;

&lt;p&gt;This call to getenv does not pick up environment variables that are set on the service via&#160;//US//Service&#160;++Environment &quot;key=value&quot;. Commons Daemon is setting these environment variables using _wputenv(), which is imported from msvcrt.dll.&lt;/p&gt;

&lt;p&gt;I started a discussion on the mailing list regarding this. I have patch which dynamically loads ucrtbase.dll and calls its _wputenv method as well, if it is available.&lt;/p&gt;

&lt;p&gt;I&apos;m happy to provide changes or further patches, and work on this issue, but feedback would be useful and very much appreciated.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13228864">DAEMON-401</key>
            <summary>Environment variables set on service not available in JNI dll</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jgallimore">Jonathan Gallimore</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Apr 2019 13:41:14 +0000</created>
                <updated>Tue, 3 Sep 2019 21:32:41 +0000</updated>
                            <resolved>Tue, 3 Sep 2019 21:32:40 +0000</resolved>
                                                    <fixVersion>1.1.1</fixVersion>
                    <fixVersion>1.2.1</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16825565" author="markt" created="Wed, 24 Apr 2019 23:15:01 +0000"  >&lt;p&gt;Do you see the same issue if you use the Windows binaries provided by Apache Commons?&lt;/p&gt;

&lt;p&gt;We deliberately do no build directly from Visual Studio since that creates dependencies on runtime libraries that may not be present on the target system and we&apos;d like to avoid the added complexity of shipping those runtime dependencies.&lt;/p&gt;

&lt;p&gt;We haven&apos;t done a great job documenting the build process. That is something we can look to improve in the next release. The build environment is essentially the same as Apache Tomcat:&lt;br/&gt;
 &lt;a href=&quot;https://cwiki.apache.org/confluence/display/TOMCAT/Building+the+native+Tomcat+components+for+Windows&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/TOMCAT/Building+the+native+Tomcat+components+for+Windows&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Once that is set up, building is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
C:\cmsc\setenv.bat /x64
nmake -f Makefile&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16831654" author="markt" created="Thu, 2 May 2019 14:07:41 +0000"  >&lt;p&gt;This issue does not&#160;occur when the Windows binaries are&#160;built with the&#160;intended build tools. (See my previous comment for details.)&lt;/p&gt;</comment>
                            <comment id="16831657" author="jgallimore" created="Thu, 2 May 2019 14:19:36 +0000"  >&lt;p&gt;Hi Mark&lt;/p&gt;

&lt;p&gt;Thanks for the followup and apologies for my delayed reply. Thanks for the build environment information; I should be able to replicate that setup on my hardware, and I&apos;m happy to expand on any documentation.&lt;/p&gt;

&lt;p&gt;Did you manage to test the issue? Reproducing it is tricky - I did try the binaries from the project. I&apos;m able to set the environment variables, and they are picked up in Java code in the JVM - everything is good there.&lt;/p&gt;

&lt;p&gt;If the JVM then calls out to a JNI&#160;library that is built with a later version of Visual Studio (MSVC 14 in my case), and that JNI dll uses getenv(), the issue is visible.&#160;Using a JNI library compiled with earlier versions of Visual Studio, or MinGW doesn&apos;t show the issue.&lt;/p&gt;

&lt;p&gt;In an ideal world, I&apos;d recompile the JNI library, but I don&apos;t have control over that or its dependencies.&lt;/p&gt;

&lt;p&gt;If I produce a test case, could I get some pointers with regard to my patch, or discuss some potential work-arounds?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Jon&lt;/p&gt;</comment>
                            <comment id="16831902" author="markt" created="Thu, 2 May 2019 19:35:01 +0000"  >&lt;p&gt;Re-opening&#160;in light of new&#160;information.&lt;/p&gt;

&lt;p&gt;The patch looks reasonable. The only change I&apos;d request is that you use LoadLibraryExA and limit the search path to the system32 directory.&lt;/p&gt;</comment>
                            <comment id="16832019" author="jgallimore" created="Thu, 2 May 2019 21:53:10 +0000"  >&lt;p&gt;Thank you Mark! I&apos;ll update the patch and attach a test case. I really appreciate the feedback.&lt;/p&gt;</comment>
                            <comment id="16839279" author="jgallimore" created="Tue, 14 May 2019 10:01:26 +0000"  >&lt;p&gt;I&apos;ve attached an updated patch for this - this checks that the function &quot;SetDefaultDllDirectories&quot; is available in kernel32.dll before attempting to use&#160;LOAD_LIBRARY_SEARCH_SYSTEM32 in LoadLibraryExA.&lt;/p&gt;

&lt;p&gt;If this isn&apos;t available, it still checks for ucrtbase.dll by using the full path name to the System32 directory - I guess its possible that ucrtbase.dll could be present while&#160;KB2533623 might not be installed. Happy to remove this though.&lt;/p&gt;

&lt;p&gt;I included the constant for&#160;LOAD_LIBRARY_SEARCH_SYSTEM32 in apxwin.h, as it didn&apos;t appear to be in the standard build setup (or I&apos;ve missed it!).&lt;/p&gt;

&lt;p&gt;Also attached is my test case - a simple webapp with a JSP that accesses a class with a native method that calls getenv(). The nativeenv.dll is X64, built with VC14 and shows the issue. The JNI source code is in there too. I&apos;ve tried the exes I&apos;ve built with Windows XP x64 and Windows Server 2019. Happy to test with other flavours as well, particularly if there is a standard set of tests that we run.&lt;/p&gt;

&lt;p&gt;PS - the build setup instructions were great - they worked an absolute treat. I believe I&apos;m reproducing the executable in the same way as the common build - the headers from dumpbin seem to confirm that.&lt;/p&gt;</comment>
                            <comment id="16846177" author="markt" created="Wed, 22 May 2019 19:28:20 +0000"  >&lt;p&gt;Many thanks for the research on this issue and the patch.&lt;/p&gt;

&lt;p&gt;I applied a slightly simplified variation&#160;after testing it on Windows 7,&#160;Server 2016 and Server 2019.&lt;/p&gt;</comment>
                            <comment id="16846608" author="jgallimore" created="Thu, 23 May 2019 10:18:01 +0000"  >&lt;p&gt;Thank you very much for the reviews, feedback and applying the patch!&lt;/p&gt;</comment>
                            <comment id="16918340" author="markt" created="Thu, 29 Aug 2019 07:03:45 +0000"  >&lt;p&gt;I&apos;m re-opening this because this fix is triggering crashes on 32-bit platforms.&lt;/p&gt;

&lt;p&gt;See&#160;&lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=63625&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bz.apache.org/bugzilla/show_bug.cgi?id=63625&lt;/a&gt;&#160;for more info.&lt;/p&gt;

&lt;p&gt;Need to dig into exactly what memory is corrupted and how it is corrupted for some clues as to what is going on.&lt;/p&gt;</comment>
                            <comment id="16918468" author="jgallimore" created="Thu, 29 Aug 2019 10:06:59 +0000"  >&lt;p&gt;Thanks for re-opening. I&apos;ll take a look here as well.&lt;/p&gt;</comment>
                            <comment id="16919467" author="jgallimore" created="Fri, 30 Aug 2019 11:46:49 +0000"  >&lt;p&gt;In a debugger here, the `dllJvmPath` pointer appears to get corrupted during the call to `wputenv_ucrt`. The knock from that is that the call to `LoadLibraryExW` then fails. I can&apos;t see anything obviously wrong in `apxAddToPathW` at the moment, but I&apos;ll keep digging.&lt;/p&gt;</comment>
                            <comment id="16921736" author="markt" created="Tue, 3 Sep 2019 21:32:41 +0000"  >&lt;p&gt;Fixed. See&#160;&lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=63625&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bz.apache.org/bugzilla/show_bug.cgi?id=63625&lt;/a&gt;&#160;for analysis of root cause.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12968662" name="daemon-1.diff" size="3154" author="jgallimore" created="Tue, 14 May 2019 09:49:56 +0000"/>
                            <attachment id="12966370" name="daemon-env.diff" size="1308" author="jgallimore" created="Thu, 18 Apr 2019 13:44:49 +0000"/>
                            <attachment id="12968663" name="simple-jni.zip" size="24997" author="jgallimore" created="Tue, 14 May 2019 09:50:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01xd4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-399] apxStrUnQuoteInplaceA removes needed quotes</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-399</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When trying to pass the following argument to the jvm&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-Xlog:gc:file=&lt;span class=&quot;code-quote&quot;&gt;&quot;d:\logs\gc.log&quot;&lt;/span&gt;::filecount=5,filesize=20000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;the method apxStrUnQuoteInplaceA removes &quot; from it and the resulting command looks like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-Xlog:gc:file=d:\logs\gc.log::filecount=5,filesize=2000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which is an invalid jvm argument.&lt;/p&gt;

&lt;p&gt;Workaround for version 1.1.0 is to add a space into the log filename.&lt;/p&gt;

&lt;p&gt;IMHO the proper fix would be not too use apxStrUnQuoteInplaceA at all.&lt;/p&gt;

&lt;p&gt;Another possible fix would be to replace utils.c:571 with&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (*p == &lt;span class=&quot;code-quote&quot;&gt;&apos; &apos;&lt;/span&gt; || *p == &lt;span class=&quot;code-quote&quot;&gt;&apos;:&apos;&lt;/span&gt;) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13226947">DAEMON-399</key>
            <summary>apxStrUnQuoteInplaceA removes needed quotes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="spjoe">Camillo Dell&apos;mour</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Apr 2019 13:01:51 +0000</created>
                <updated>Thu, 4 Jul 2019 13:12:50 +0000</updated>
                            <resolved>Tue, 11 Jun 2019 15:34:45 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16813387" author="garydgregory" created="Tue, 9 Apr 2019 13:16:54 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spjoe&quot; class=&quot;user-hover&quot; rel=&quot;spjoe&quot;&gt;spjoe&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;It would be best if you could offer your change via a PR on GitHub.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="16861145" author="markt" created="Tue, 11 Jun 2019 15:34:45 +0000"  >&lt;p&gt;I agree with the view that the quotes should not be&#160;removed. That functionality has been removed and I have confirmed that the provided test case now works as expected.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01ll4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-398] Java 11 jvm.dll startup messages not available on stdout/stderr using Windows 10/2016</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-398</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;&lt;b&gt;Steps to reproduce&lt;/b&gt;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Install Java 11&lt;/li&gt;
	&lt;li&gt;Install prunsrv.exe using jvm.dll and specify stdout and stderr file.&lt;/li&gt;
	&lt;li&gt;Using prunmgr, add a Java Option &apos;-invalid&apos;&lt;/li&gt;
	&lt;li&gt;Start the service&lt;/li&gt;
	&lt;li&gt;stdout and stderr files are empty!&lt;/li&gt;
	&lt;li&gt;Install Java 10&lt;/li&gt;
	&lt;li&gt;Using prunmgr, switch the Java Virtual Machine to Java 10&lt;/li&gt;
	&lt;li&gt;Start the service&lt;/li&gt;
	&lt;li&gt;&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;stderr&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
Java HotSpot(TM) 64-Bit Server VM warning: Ignoring option MaxPermSize; support was removed in 8.0
Unrecognized option: -invalid
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&lt;b&gt;Analysis&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;It works for Java 8, 9 and 10, fails for 11, 12 and 13-ea.&lt;/li&gt;
	&lt;li&gt;I followed this guide: &lt;a href=&quot;https://jdebp.eu/FGA/redirecting-standard-io.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Redirecting standard I/O from within a program&lt;/a&gt; (see &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12964570/12964570_set-stdout.patch&quot; title=&quot;set-stdout.patch attached to DAEMON-398&quot;&gt;set-stdout.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;), but it didn&apos;t help.&lt;/li&gt;
	&lt;li&gt;Even when I compile prunsrv with Visual Studio 2017 15.9 (linker 14.16) and test with Java 13-ea, which is also compiled with the same version (hence using the same C-runtime library) it does not work.&lt;/li&gt;
	&lt;li&gt;The guide ends with what the probably causing the issue:
&lt;blockquote&gt;&lt;p&gt;... the one problem that remains with redirecting Win32 file handles:&lt;br/&gt;
 It doesn&apos;t affect anything in the program using a different C runtime library (such as a third-party DLL, for example).&lt;/p&gt;&lt;/blockquote&gt;&lt;/li&gt;
	&lt;li&gt;Setting registry value Log/LogJniMessages=1, which is using the &lt;tt&gt;vfprintf&lt;/tt&gt; option of the &lt;a href=&quot;https://docs.oracle.com/en/java/javase/11/docs/specs/jni/invocation.html#jni_createjavavm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JNI_CreateJavaVM&lt;/a&gt; does not help. Maybe because is is added after the user-specified Java Options?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Ideas&lt;/b&gt;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Make &lt;tt&gt;vfprintf&lt;/tt&gt; the first parameter&lt;br/&gt;
 Downside of &lt;tt&gt;vfprintf&lt;/tt&gt; is that it is hard to distinct between stdout and stderr. Maybe make a JNI call to &lt;tt&gt;System.out&lt;/tt&gt; and &lt;tt&gt;System.err&lt;/tt&gt; to be able to recognize the &lt;tt&gt;*File&lt;/tt&gt; pointer and map to stdout and stderr accordingly.&lt;br/&gt;
 And I think that &lt;tt&gt;javajni.c/apxJavaSetOut()&lt;/tt&gt; should not be required.&lt;/li&gt;
	&lt;li&gt;Log a bug for OpenJDK and try to get it fixed.&lt;/li&gt;
&lt;/ol&gt;


&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;OS&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Daemon version (built with)&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Java vendor and version (built with)&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Result&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Windows 7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1.1.x HEAD (9.00)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;AdoptOpenJDK 11.0.3+7 (14.15)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OK&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Windows 2008R2&#160;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1.1.x HEAD (9.00)&#160;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;AdoptOpenJDK 11.0.3+7 (14.15)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OK&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Windows 2012R2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1.1.x HEAD (9.00)&#160;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;AdoptOpenJDK 11.0.3+7 (14.15)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OK&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Windows 2016&#160;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1.1.x HEAD (9.00)&#160;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;AdoptOpenJDK 11.0.2+9 (12.00)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OK&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Windows 2016&#160;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1.1.x HEAD (9.00)&#160;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;AdoptOpenJDK 11.0.3+7 (14.15)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Fail&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Note: It is assumed the OS is fully patched unless otherwise stated.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows&lt;/p&gt;</environment>
        <key id="13225510">DAEMON-398</key>
            <summary>Java 11 jvm.dll startup messages not available on stdout/stderr using Windows 10/2016</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="3" iconUrl="https://issues.apache.org/jira/images/icons/statuses/inprogress.png" description="This issue is being actively worked on at the moment by the assignee.">In Progress</status>
                    <statusCategory id="4" key="indeterminate" colorName="yellow"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="jfclere">Jean-Frederic Clere</assignee>
                                    <reporter username="gerwin84">Gerwin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Apr 2019 13:49:51 +0000</created>
                <updated>Fri, 23 May 2025 16:25:13 +0000</updated>
                                            <version>1.1.1</version>
                                                    <component>Procrun</component>
                    <component>prunsrv</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16831650" author="markt" created="Thu, 2 May 2019 13:59:17 +0000"  >&lt;p&gt;I don&apos;t see this with the AdoptOpenJDK binaries and the latest Commons daemon&#160;code from master built using the release build environment (whcih is essentially the same as the one used for the Tomcat native components:&#160;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/TOMCAT/Common+Native+Build+Environment&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/TOMCAT/Common+Native+Build+Environment&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="16834782" author="gerwin84" created="Tue, 7 May 2019 13:49:55 +0000"  >&lt;p&gt;I tried with &lt;a href=&quot;https://adoptopenjdk.net/archive.html?variant=openjdk11&amp;amp;jvmVariant=hotspot&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;AdoptOpenJDK 11.0.2+9&lt;/a&gt; and there it works fine.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
C:\&amp;gt;dumpbin /headers &quot;c:\Program Files\Java\adoptopenjdk11.0.2_9\bin\server\jvm.dll&quot;
Microsoft (R) COFF/PE Dumper Version 14.16.27027.1
Copyright (C) Microsoft Corporation.  All rights reserved.

OPTIONAL HEADER VALUES
           12.00 linker version
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It is compiled with Visual Studio 2013 (&lt;a href=&quot;http://mariusbancila.ro/blog/2015/08/12/version-history-of-vc-mfc-and-atl/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ref&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I tried with &lt;a href=&quot;https://adoptopenjdk.net/archive.html?variant=openjdk11&amp;amp;jvmVariant=hotspot&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;AdoptOpenJDK 11.0.3+7&lt;/a&gt; and there it is broken again.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
C:\&amp;gt;dumpbin /headers &quot;C:\Program Files\Java\adoptopenjdk11.0.3_7\bin\server\jvm.dll&quot;
OPTIONAL HEADER VALUES
           14.15 linker version
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;They seem to have upgraded their build environment, because this is compiled with Visual Studio 2017 15.8.&lt;/p&gt;

&lt;p&gt;Apart from that, Oracle JDK 11 (both openjdk.java.net and commercial) is compiled with Visual Studio 2017 15.5.&lt;br/&gt;
I assume the Oracle binaries are also supported by commons-daemon.&lt;/p&gt;</comment>
                            <comment id="16834792" author="markt" created="Tue, 7 May 2019 14:08:17 +0000"  >&lt;p&gt;My testing was with AdoptOpenJDK 11.0.3+7 where this issue is not reproducible.&lt;/p&gt;

&lt;p&gt;It looks like the issue is that the Commons Daemon being testing is being built with a later version of Visual Studio than intended. The build tools we use for Commons Daemon&#160;might be rather on the old side but they are deliberately chosen to avoid issues like this.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;A patch that enables this to work when compiling with a later version of Visual Studio&#160;would certainly be accepted. That would fall under an enhancement rather than a bug so I&apos;ll adjust this issue accordingly.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16834830" author="gerwin84" created="Tue, 7 May 2019 14:54:03 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
C:\&amp;gt;dumpbin /headers &quot;c:\Program Files\TomEE\bin\TomEE.amd64.exe&quot;
OPTIONAL HEADER VALUES
            9.00 linker version
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Mine is compiled with VS2008.&lt;/p&gt;

&lt;p&gt;To be complete, I downloaded &lt;a href=&quot;http://apache.40b.nl//commons/daemon/binaries/windows/commons-daemon-1.1.0-bin-windows.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;commons-daemon-1.1.0-bin-windows.zip&lt;/a&gt; and extracted amd64/prunsrv.exe to TomEE.amd64.exe and tried again: still fails, no error message in std files.&lt;br/&gt;
And it is compiled with same VS2008.&lt;/p&gt;

&lt;p&gt;But I have some more information: I can only reproduce this on Windows 2016 / Windows 10. Not on Windows 2008R2 or Windows 2012R2.&lt;br/&gt;
Which version are you using?&lt;/p&gt;</comment>
                            <comment id="16834893" author="markt" created="Tue, 7 May 2019 15:43:48 +0000"  >&lt;p&gt;I was using Windows 7.&lt;/p&gt;

&lt;p&gt;I think it&#160;would be useful to add a table to the&#160;issue description to track which&#160;combinations work and which do not. That should help us track down exactly where the problem lies. I&apos;ll get something set-up. Help populating it would be much appreciated. I&apos;m not looking to populate all&#160;possible combinations - just enough to figure out where we should be looking for a root cause.&#160;&lt;/p&gt;</comment>
                            <comment id="16834934" author="markt" created="Tue, 7 May 2019 16:23:40 +0000"  >&lt;p&gt;Looking at the table, I think we have enough info already in terms of&#160;combinations. There appears to be both an OS and compiler component to this.&lt;/p&gt;

&lt;p&gt;There error message for the combination that fails in the main&#160;daemon log is: &quot;CreateJavaVM Failed&quot;, &quot;The system cannot find the file specified.&quot;. I&apos;d like to dig into that second message a little more to see&#160;exactly which file cannot be found.&lt;/p&gt;</comment>
                            <comment id="16835119" author="markt" created="Tue, 7 May 2019 21:09:59 +0000"  >&lt;p&gt;Assuming I am reading the Mercurial logs correctly, there were no native code changes&#160;for either&#160;the shared or Windows code between Java 11.0.2 and 11.0.3. It looks like I&apos;m going to&#160;need to set up a Windows built environment for Java 11.&lt;/p&gt;</comment>
                            <comment id="16835463" author="gerwin84" created="Wed, 8 May 2019 09:30:30 +0000"  >&lt;p&gt;This is similar characteristics as &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-396&quot; title=&quot;LibraryPath is broken for Java 11 using Windows 10/2016&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-396&quot;&gt;&lt;del&gt;DAEMON-396 LibraryPath is broken for Java 11 using Windows 10/2016&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The only difference I see is that the LibraryPath problem is solved after compiling prunsrv.exe with VS2017, but that does not solve the stdout/stderr problem.&lt;/p&gt;</comment>
                            <comment id="16835963" author="markt" created="Wed, 8 May 2019 23:32:26 +0000"  >&lt;p&gt;Compilation with VS2017 isn&apos;t an option I am keen on at this point.&lt;/p&gt;

&lt;p&gt;My investigations have made progress but not reached any conclusion. It appears that all writes to stderr from jvm.dll are lost until Daemon calls System.setErr().&#160;As too are writes to stdout. I don&apos;t think I am much closer to finding the root cause.&#160;&lt;/p&gt;</comment>
                            <comment id="16844264" author="markt" created="Mon, 20 May 2019 20:22:05 +0000"  >&lt;p&gt;I spent a little time trying to re-create this in a simple test case but failed. I&apos;ve reached out to&#160;the developer who put together the build system (to avoid issues like this) for advice.&lt;/p&gt;

&lt;p&gt;If all else fails, making&#160;vfprintf the first&#160;parameter looks like the best available workaround.&lt;/p&gt;</comment>
                            <comment id="16862078" author="markt" created="Wed, 12 Jun 2019 13:04:38 +0000"  >&lt;p&gt;I&apos;ve made vfprintf the first parameter as a workaround but I&apos;m leaving this issue open while the search for a complete fix continues.&lt;/p&gt;</comment>
                            <comment id="17952599" author="jfclere" created="Mon, 19 May 2025 13:21:49 +0000"  >&lt;p&gt;Proposed fix: &lt;a href=&quot;https://github.com/apache/commons-daemon/pull/264&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/pull/264&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13225523">TOMEE-2505</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13279119">DAEMON-415</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13206000">DAEMON-396</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13279119">DAEMON-415</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12964570" name="set-stdout.patch" size="2709" author="gerwin84" created="Tue, 2 Apr 2019 13:10:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01d1c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-396] LibraryPath is broken for Java 11 using Windows 10/2016</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-396</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;My application which runs on TomEE is broken when running on Java 11 with Windows 10/2016. I&apos;m getting this error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
java.lang.UnsatisfiedLinkError: no xmlForJava in java.library.path: [C:\Program Files\TomEE\bin, &amp;lt;&amp;lt;more paths here&amp;gt;&amp;gt;, .]
                at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2660)
                at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:829)
                at java.base/java.lang.System.loadLibrary(System.java:1867)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It works for Java 8 and 10, but fails for both Oracle JDK 11 and OpenJDK 11.&lt;/p&gt;

&lt;p&gt;The application installs the service with the &lt;tt&gt;-&lt;del&gt;LibraryPath&lt;/tt&gt; option and &lt;tt&gt;&lt;/del&gt;-StartMode jvm&lt;/tt&gt;. When inspecting the &lt;tt&gt;java.library.path&lt;/tt&gt; using JMX, I observe this:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;With Java 8 &lt;tt&gt;java.library.path&lt;/tt&gt; contains the value specified in the LibraryPath&lt;/li&gt;
	&lt;li&gt;With Java 11 &lt;tt&gt;java.library.path&lt;/tt&gt; contains the value of the PATH environment variable&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;From the sourcecode I see that procrun is executing code in this order:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
_wputenv(&quot;PATH=;C:\\application\\lib&quot;);
LoadLibraryW(&quot;jvm.dll&quot;)
JNI_CreateJavaVM()
SetDllDirectoryW(&quot;;C:\\application\\lib&quot;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The JVM is supposed to take the value of the PATH variable into account when loaded, but it doesn&apos;t.&lt;br/&gt;
I found these articles:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Stackoverflow: &lt;a href=&quot;https://stackoverflow.com/questions/9634905/program-uses-outdated-not-current-env-variable-value&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Program uses outdated (not current) env variable value&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Microsoft Docs: &lt;a href=&quot;https://docs.microsoft.com/en-us/cpp/c-runtime-library/potential-errors-passing-crt-objects-across-dll-boundaries?view=vs-2017#example-1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Potential Errors Passing CRT Objects Across DLL Boundaries#This example passes environment variables across a DLL boundary&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So the C-Runtime library has its own copy of the environment variables and behavior depends on how the binaries are compiled.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/MD means they share a single copy of the C-Runtime library.&lt;/li&gt;
	&lt;li&gt;/MT means that they use separate copies of the C-Runtime library.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I expect that Java 11 is build differently, which causes this bug.&lt;/p&gt;

&lt;p&gt;Give this quote...&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Normally when Java is launched and a library path is not specified, the JVM will default to using the system PATH on Windows and the LD_LIBRARY_PATH on UNIX systems to locate any native libraries loaded by the application. This is akin to what happens with the CLASSPATH environment variable when a specific classpath is not specified when launching the JVM. The use of the CLASSPATH environment variable has fallen out of style because of all the conflict problems which can arise when multiple Java applications are installed on the same machine. The same issues are all there with the library path as well.&lt;br/&gt;
In general, it is advised that you avoid potential problems when your application is deployed by being conservative about which directories will be included in the Java library path.&lt;br/&gt;
&lt;a href=&quot;https://wrapper.tanukisoftware.com/doc/english/prop-java-library-path-append-system-path.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wrapper.tanukisoftware.com/doc/english/prop-java-library-path-append-system-path.html&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;.. I think it would be better to change the implementation of &lt;tt&gt;--LibraryPath&lt;/tt&gt; to set the JVM option &lt;tt&gt;-Djava.library.path&lt;/tt&gt; instead of the PATH env var.&lt;br/&gt;
This will make procrun independent of how the jvm.dll is build.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13206000">DAEMON-396</key>
            <summary>LibraryPath is broken for Java 11 using Windows 10/2016</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gerwin84">Gerwin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Dec 2018 15:36:31 +0000</created>
                <updated>Wed, 22 May 2019 21:45:11 +0000</updated>
                            <resolved>Wed, 22 May 2019 21:45:11 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.1.1</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16805097" author="gerwin84" created="Fri, 29 Mar 2019 15:20:39 +0000"  >&lt;p&gt;I have analyzed this a bit more, and I found 3 problems in total:&lt;br/&gt;
 &lt;b&gt;1. LibraryPath is not set for Java 11 jvm.dll&lt;/b&gt;&lt;br/&gt;
 When I execute this command&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
dumpbin /headers &amp;lt;path to binary&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;it gives me these results&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;binary&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;linker version&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;a href=&quot;http://mariusbancila.ro/blog/2015/08/12/version-history-of-vc-mfc-and-atl/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Visual Studio version&lt;/a&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;TomEE.amd64.exe&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9.00&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Visual Studio 2008&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;jvm.dll (6)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;8.00&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Visual Studio 2005&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;jvm.dll (7)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10.00&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Visual Studio 2010&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;jvm.dll (8)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10.00&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Visual Studio 2010&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;jvm.dll (9)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;12.00&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Visual Studio 2013&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;jvm.dll (10)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;12.00&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Visual Studio 2013&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;jvm.dll (11)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14.12&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Visual Studio 2017 15.5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;jvm.dll (12)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14.12&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Visual Studio 2017 15.5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;jvm.dll (13)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14.16&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Visual Studio 2017 15.9&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;Now, when I compile TomEE.amd64.exe with VS2017(15.9), the environment variable is picked up again! Works both for Java 8 and 11.&lt;br/&gt;
 So my proposal is to make a new release of commons-deamon compiled with VS2017(15.9).&lt;/p&gt;

&lt;p&gt;&lt;b&gt;2. LibraryPath does replace PATH instead of append.&lt;/b&gt;&lt;br/&gt;
This functionality is required e.g. for MS SQL Server JDBC integrated windows authentication using &lt;tt&gt;sqljdbc_auth.dll&lt;/tt&gt;. This DLL is added to the PATH, but not picked up by TomEE.&lt;br/&gt;
 I found a problem in the call to &lt;tt&gt;GetEnvironmentVariableW()&lt;/tt&gt; in &lt;tt&gt;utils.c&lt;/tt&gt;. The provided buffer size &apos;rc - al&apos; is too small, hence the existing PATH is not copied to the buffer. And that results in the PATH being replaced instead of appended. Here is the patch: &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12964203/12964203_apxAddToPathW.patch&quot; title=&quot;apxAddToPathW.patch attached to DAEMON-396&quot;&gt;apxAddToPathW.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;3 PATH does not include JAVA_HOME/bin&lt;/b&gt;&lt;br/&gt;
 I get this error when I use AWT:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
java.lang.UnsatisfiedLinkError: C:\Program Files\Java\jdk-11.0.2\bin\awt.dll: Can&apos;t find dependent libraries
 at java.base/java.lang.ClassLoader$NativeLibrary.load0(Native Method)
 at java.base/java.lang.ClassLoader$NativeLibrary.load(ClassLoader.java:2430)
 at java.base/java.lang.ClassLoader$NativeLibrary.loadLibrary(ClassLoader.java:2487)
 at java.base/java.lang.ClassLoader.loadLibrary0(ClassLoader.java:2684)
 at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2638)
 at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:829)
 at java.base/java.lang.System.loadLibrary(System.java:1867)
 at java.desktop/java.awt.Toolkit$3.run(Toolkit.java:1395)
 at java.desktop/java.awt.Toolkit$3.run(Toolkit.java:1393)
 at java.base/java.security.AccessController.doPrivileged(Native Method)
 at java.desktop/java.awt.Toolkit.loadLibraries(Toolkit.java:1392)
 at java.desktop/java.awt.Toolkit.&amp;lt;clinit&amp;gt;(Toolkit.java:1425)
 at java.desktop/java.awt.Color.&amp;lt;clinit&amp;gt;(Color.java:275)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Reason is that JAVA_HOME/bin is not on the PATH &lt;b&gt;and&lt;/b&gt; the the directory of the binary (TomEE.amd64.exe) is TomEE/bin &lt;b&gt;and&lt;/b&gt; the working directory is TomEE/bin. So dependent DLLs are not found.&lt;br/&gt;
 I fixed this by adding JAVA_HOME/bin explicitly to the PATH when using jvm.dll. See &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12964204/12964204_JAVA_HOME-bin-to-PATH.patch&quot; title=&quot;JAVA_HOME-bin-to-PATH.patch attached to DAEMON-396&quot;&gt;JAVA_HOME-bin-to-PATH.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;</comment>
                            <comment id="16807809" author="gerwin84" created="Tue, 2 Apr 2019 14:31:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;: can you help here?&lt;br/&gt;
This ticket is required for &lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=63310&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Tomcat 63310&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/TOMEE-2505&quot; title=&quot;Update Commons Daemon for improved Java 11 support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TOMEE-2505&quot;&gt;&lt;del&gt;TOMEE-2505&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16807893" author="garydgregory" created="Tue, 2 Apr 2019 16:06:41 +0000"  >&lt;p&gt;This would be easier to review (for me) with a github PR.&lt;/p&gt;</comment>
                            <comment id="16808393" author="markt" created="Wed, 3 Apr 2019 05:59:09 +0000"  >&lt;p&gt;This is on my TODO list.&lt;/p&gt;

&lt;p&gt;I&apos;m not a fan of the solution to the first problem as it tends (always?) adds a dependency on one of the .Net runtimes which aren&apos;t always installed. We have had issues in the past along these lines. I&apos;d like to understand what is going on and see if there is an alternative solution that works with the current build chain.&lt;/p&gt;

&lt;p&gt;The other two patches look OK at first glance but I haven&apos;t reviewed them in detail. I&apos;ll try and get to this during April.&lt;/p&gt;</comment>
                            <comment id="16831564" author="markt" created="Thu, 2 May 2019 11:53:34 +0000"  >&lt;p&gt;Tomee&#160;appears to be using the (renamed) Windows&#160;binary provided by the Commons Daemon project.&#160;It is version 1.0.14.&lt;/p&gt;

&lt;p&gt;I have&#160;tested with the latest release (1.1.0) and I&#160;am unable to recreate the&#160;first of the issues. java.library.path is correctly set with both Java 8 and Java 11.&lt;/p&gt;</comment>
                            <comment id="16831587" author="markt" created="Thu, 2 May 2019 12:31:32 +0000"  >&lt;p&gt;Problem 2 confirmed.&#160;As is the patch that fixes it. Thanks. That has been applied to master to 1.1.1 onwards.&lt;/p&gt;</comment>
                            <comment id="16831642" author="markt" created="Thu, 2 May 2019 13:51:29 +0000"  >&lt;p&gt;Problem&#160;3 confirmed.&#160;As is the patch that fixes it. Thanks. That has been applied to master to 1.1.1 onwards.&lt;/p&gt;</comment>
                            <comment id="16834786" author="gerwin84" created="Tue, 7 May 2019 14:00:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;I have&#160;tested with the latest release (1.1.0) and I&#160;am unable to recreate the&#160;first of the issues. java.library.path is correctly set with both Java 8 and Java 11.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Which JDK binaries did you use? I just figured out that AdoptOpenJDK 11.0.2 is compiled with VS2013, and that will work.&lt;/p&gt;

&lt;p&gt;But Oracle binaries (both openjdk.java.net and commercial) and AdoptOpenJDK 11.0.3 are compiled with VS2017. And then it is broken.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;m not a fan of the solution to the first problem as it tends (always?) adds a dependency on one of the .Net runtimes which aren&apos;t always installed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Alternative is to redistribute the dependencies (e.g. msvcp140.dll) with commons-daemon. Tomcat and OpenJDK are doing this too.&lt;/p&gt;</comment>
                            <comment id="16834802" author="markt" created="Tue, 7 May 2019 14:14:24 +0000"  >&lt;p&gt;My testing was with AdoptOpenJDK 11.0.3+7 where this issue is not reproducible when using a Commons Daemon binary built with the release build environment (which is essentially the same as the one used for the Tomcat native components: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/TOMCAT/Common+Native+Build+Environment&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/TOMCAT/Common+Native+Build+Environment&lt;/a&gt;)&lt;/p&gt;



&lt;p&gt;It looks like the issue is that the Commons Daemon being testing is being built with a later version of Visual Studio than intended. The build tools we use for Commons Daemon might be rather on the old side but they are deliberately chosen to avoid issues like this.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Tomcat is not distributing the dependencies. Tomcat is using the official Commons Daemon Windows binaries that do not require them.&lt;/p&gt;</comment>
                            <comment id="16835457" author="gerwin84" created="Wed, 8 May 2019 09:24:35 +0000"  >&lt;p&gt;I&apos;m using the original prunsrv.exe provided by commons-daemon project, compiled with VS2013.&lt;/p&gt;

&lt;p&gt;I have more information: I can only reproduce this on Windows 10 / 2016 using a JDK that is compiled with VS2017.&lt;br/&gt;
This is similar characteristics as &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-398&quot; title=&quot;Java 11 jvm.dll startup messages not available on stdout/stderr using Windows 10/2016&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-398&quot;&gt;DAEMON-398 Java 11 jvm.dll startup messages not available on stdout/stderr using Windows 10/2016&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The only difference I see is that the &lt;tt&gt;java.library.path&lt;/tt&gt; problem is solved after compiling prunsrv.exe with VS2017, but that does not solve the stdout/stderr problem.&lt;/p&gt;</comment>
                            <comment id="16846240" author="markt" created="Wed, 22 May 2019 21:45:11 +0000"  >&lt;p&gt;Problem 1 is a variation of &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-401&quot; title=&quot;Environment variables set on service not available in JNI dll&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-401&quot;&gt;&lt;del&gt;DAEMON-401&lt;/del&gt;&lt;/a&gt; and has been fixed in a similar way.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13225523">TOMEE-2505</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13182653">DAEMON-390</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13225510">DAEMON-398</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12964204" name="JAVA_HOME-bin-to-PATH.patch" size="5576" author="gerwin84" created="Fri, 29 Mar 2019 15:17:45 +0000"/>
                            <attachment id="12964203" name="apxAddToPathW.patch" size="963" author="gerwin84" created="Fri, 29 Mar 2019 15:08:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|u008lc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-394] Monitor application will update multi-string values in Windows registry with blank lines</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-394</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The Procrun Monitor application does not prevent a user from accidentally inserting blank lines into the Java Options or Java 9 Options text areas. If a blank line is introduced into either text area and the changes are applied (by hitting the Apply or OK button), the changes are committed to the associating multi-string value in the Windows registry.&lt;/p&gt;

&lt;p&gt;If a user were to relaunch the Monitor application and view the Java or Java 9 Options again, they would see that the content has been truncated. Individual options above the blank line remain; any below are not present. If the Windows Registry editor were used to view the associating multi-string value, the user would see all of the content including the blank line.&lt;/p&gt;

&lt;p&gt;Changing the options again from within the Monitor application will succeed but when the options are committed to the registry multi-string value, any options that existed below the blank line will be removed.&lt;/p&gt;

&lt;p&gt;Note that the Windows registry editor will display an error dialog if a user attempts to save a multi-string value with an empty line present. The message is: &quot;Data of type REG_MULTI_SZ cannot contain empty strings. Registry Editor will remove all empty strings found.&quot;&lt;/p&gt;

&lt;p&gt;Steps to Reproduce:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Download latest Commons Daemon distribution for windows (1.1.0).&lt;/li&gt;
	&lt;li&gt;Run prunsrv.exe to install a test service (TestService).&lt;/li&gt;
	&lt;li&gt;Run prunmgr.exe //ES/TestService to start the monitor application to edit the same TestService.&lt;/li&gt;
	&lt;li&gt;Switch to the Java tab and edit either the Java Options or Java 9 Options. Insert a bunch of options and then Insert a blank line somewhere in-between those options. Click OK&lt;/li&gt;
	&lt;li&gt;Run prunmgr again. Look at the Java Options or Java 9 Options where the blank line was inserted. Notice that all options below the blank line are not visible.&lt;/li&gt;
	&lt;li&gt;Open up the registry editor and navigate to the multi-string value associated with the Java Options text area: HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Apache Software Foundation\Procrun 2.0\TestService\Parameters\Java&lt;/li&gt;
	&lt;li&gt;Notice that all content is present (including the blank line) in the registry value.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment>&lt;p&gt;OS: Windows 7 Pro, Service Pack 1&lt;/p&gt;</environment>
        <key id="13195969">DAEMON-394</key>
            <summary>Monitor application will update multi-string values in Windows registry with blank lines</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="White">Brandon</reporter>
                        <labels>
                            <label>windows</label>
                    </labels>
                <created>Fri, 2 Nov 2018 20:19:58 +0000</created>
                <updated>Thu, 4 Jul 2019 13:12:27 +0000</updated>
                            <resolved>Tue, 11 Jun 2019 10:58:42 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16673627" author="white" created="Fri, 2 Nov 2018 20:21:53 +0000"  >&lt;p&gt;For reference, I initially made the mistake of submitting a &lt;a href=&quot;https://bz.apache.org/bugzilla/show_bug.cgi?id=62873&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Bugzilla bug&lt;/a&gt; against the Apache Tomcat project.  An admin from that project pointed me here.&lt;/p&gt;</comment>
                            <comment id="16674078" author="garydgregory" created="Sat, 3 Nov 2018 15:24:59 +0000"  >&lt;p&gt;PRs on GitHub are welcome &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;a href=&quot;https://github.com/apache/commons-daemon&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16860921" author="markt" created="Tue, 11 Jun 2019 10:58:42 +0000"  >&lt;p&gt;Thanks for the report. This has been fixed by ignoring blank lines when saving to the registry. The end result is, after a round-trip to the registry, that the blank lines are removed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s002ts:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-393] Revered code comments for JRE and JDK locations in the registry</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-393</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;According to the description in &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-376&quot; title=&quot;Update Daemon to also search registry for JRE with Java 9 JRE location&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-376&quot;&gt;&lt;del&gt;DAEMON-376&lt;/del&gt;&lt;/a&gt; (and to my experience) these two comments (same file and same ticket) should be the other way round:&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160; L&quot;SOFTWARE\\JavaSoft&lt;br class=&quot;atl-forced-newline&quot; /&gt;JRE&lt;br/&gt;
&quot;,&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /* Oracle Java 8 and earlier */&lt;br/&gt;
 &#160;&#160;&#160; L&quot;SOFTWARE&lt;br class=&quot;atl-forced-newline&quot; /&gt;JavaSoft&lt;br/&gt;
Java Runtime Environment&lt;br/&gt;
&quot;,&#160; /* Oracle Java 9 (and hopefully later) */&lt;/p&gt;

&lt;p&gt;&#160;The correct comments should be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/* Predefined Java keys
 * The code below assumes the JRE and JDK arrays are the same length
 */
&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; LPCWSTR JRE_REGKEYS[] = {
    L&lt;span class=&quot;code-quote&quot;&gt;&quot;SOFTWARE\\JavaSoft\\JRE\\&quot;&lt;/span&gt;,                       &lt;span class=&quot;code-comment&quot;&gt;/* Oracle Java 9 (and hopefully later) */&lt;/span&gt;
    L&lt;span class=&quot;code-quote&quot;&gt;&quot;SOFTWARE\\JavaSoft\\Java &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment\\&quot;&lt;/span&gt;,  &lt;span class=&quot;code-comment&quot;&gt;/* Oracle Java 8 (and older) */&lt;/span&gt;
    L&lt;span class=&quot;code-quote&quot;&gt;&quot;SOFTWARE\\IBM\\Java2 &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment\\&quot;&lt;/span&gt;,      &lt;span class=&quot;code-comment&quot;&gt;/* IBM */&lt;/span&gt;
    NULL
};
&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; LPCWSTR JDK_REGKEYS[] = {
    L&lt;span class=&quot;code-quote&quot;&gt;&quot;SOFTWARE\\JavaSoft\\JDK\\&quot;&lt;/span&gt;,                       &lt;span class=&quot;code-comment&quot;&gt;/* Oracle Java 9 and (and hopefully later) */&lt;/span&gt;
    L&lt;span class=&quot;code-quote&quot;&gt;&quot;SOFTWARE\\JavaSoft\\Java Development Kit\\&quot;&lt;/span&gt;,      &lt;span class=&quot;code-comment&quot;&gt;/* Oracle Java 8 (and older) */&lt;/span&gt;
    L&lt;span class=&quot;code-quote&quot;&gt;&quot;SOFTWARE\\IBM\\Java2 Development Kit\\&quot;&lt;/span&gt;,          &lt;span class=&quot;code-comment&quot;&gt;/* IBM */&lt;/span&gt;
    NULL
};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13186122">DAEMON-393</key>
            <summary>Revered code comments for JRE and JDK locations in the registry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="hofmandl">Daniel Hofmann</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Sep 2018 18:13:13 +0000</created>
                <updated>Thu, 20 Sep 2018 00:51:17 +0000</updated>
                            <resolved>Thu, 20 Sep 2018 00:51:17 +0000</resolved>
                                                    <fixVersion>1.1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="13186089">DAEMON-392</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y9lz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-392] Undefined behaviour in registry.c dwRegKey = dwRegKey++</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-392</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;in the code added when fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-376&quot; title=&quot;Update Daemon to also search registry for JRE with Java 9 JRE location&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-376&quot;&gt;&lt;del&gt;DAEMON-376&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-311&quot; title=&quot;Commons Daemon procrun failed with exit value: 5 (Failed to start service)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-311&quot;&gt;&lt;del&gt;DAEMON-311&lt;/del&gt;&lt;/a&gt; undefined behaviour and a wrong comment was introduced. See &lt;a href=&quot;https://stackoverflow.com/questions/4968854/is-i-i-truly-a-undefined-behavior&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/4968854/is-i-i-truly-a-undefined-behavior&lt;/a&gt; for the undefined behaviour.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13186089">DAEMON-392</key>
            <summary>Undefined behaviour in registry.c dwRegKey = dwRegKey++</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="hofmandl">Daniel Hofmann</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Sep 2018 16:10:31 +0000</created>
                <updated>Wed, 19 Sep 2018 18:50:13 +0000</updated>
                            <resolved>Wed, 19 Sep 2018 18:50:13 +0000</resolved>
                                                    <fixVersion>1.1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16621039" author="garydgregory" created="Wed, 19 Sep 2018 18:50:13 +0000"  >&lt;p&gt;Thank you for your report. In SVN. Please verify and close. See also&#160;.&lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-393&quot; title=&quot;Revered code comments for JRE and JDK locations in the registry&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-393&quot;&gt;&lt;del&gt;DAEMON-393&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13186122">DAEMON-393</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y9en:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-391] Log level set by Tomcat-GUI under Windows not recognized.</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-391</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I&apos;m using Tomcat7 which provides a GUI to configure various aspects of the Windows-service, like log level and such, which seem to be managed by &quot;prunmgr&quot; of your project in the end. If I set the log level to &quot;Warning&quot; using that GUI, I still get logged lines using &quot;info&quot; in the default log file:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2018-09-10 09:45:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;12744&amp;#93;&lt;/span&gt; Commons Daemon procrun (1.1.0.0 64-bit) started&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I used ProcMon to check that the correct settings were read from the registry, which was the case:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;09:45:47,6441892 Tomcat7.exe 8764 RegQueryValue HKLM\SOFTWARE\WOW6432Node\Apache Software Foundation\Procrun 2.0\Tomcat7\Parameters\Log\Level SUCCESS Type: REG_SZ, Length: 16, Data: Warning&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Your docs mention the following values for the log level:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Defines the logging level and can be either Error, Info, Warn or&lt;br/&gt;
Debug. (Case insensitive).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://commons.apache.org/proper/commons-daemon/procrun.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-daemon/procrun.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So I&apos;ve tested using &quot;--LogLevel=WARN&quot; at the command line and changed the value in the registry from &quot;Warning&quot; to &quot;Warn&quot; as well. Both succeeded, I don&apos;t get any log messages anymore. But the GUI is unable to recognize the value &quot;Warn&quot; now and instead falls back to &quot;Debug&quot;, so there&apos;s most likely some naming mismatch.&lt;/p&gt;

&lt;p&gt;I think the underlying problem is that &quot;prunmgr&quot; uses the phrase &quot;Warning&quot;, while the logging logic is mapping &quot;warn&quot; only instead:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;#define LOGL_WARN           L&quot;Warning&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-daemon/blob/trunk/src/native/windows/apps/prunmgr/prunmgr.c#L49&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/blob/trunk/src/native/windows/apps/prunmgr/prunmgr.c#L49&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;else if (!lstrcmpiW(szLevel, L&quot;warn&quot;))&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-daemon/blob/trunk/src/native/windows/src/log.c#L276&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/blob/trunk/src/native/windows/src/log.c#L276&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I guess &quot;Warning&quot; could simply be changed to &quot;Warn&quot; to make things work and am attaching a patch doing so. This is untested, though!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/commons-dev/201809.mbox/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/commons-dev/201809.mbox/&lt;/a&gt;&amp;lt;161449685.20180910102700%40am-soft.de&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13184012">DAEMON-391</key>
            <summary>Log level set by Tomcat-GUI under Windows not recognized.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tschoening">Thorsten Sch&#246;ning</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Sep 2018 11:11:04 +0000</created>
                <updated>Thu, 2 May 2019 15:27:20 +0000</updated>
                            <resolved>Thu, 2 May 2019 15:27:20 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.1.1</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16621421" author="garydgregory" created="Thu, 20 Sep 2018 02:24:39 +0000"  >&lt;p&gt;So we need someone to test this...&lt;/p&gt;</comment>
                            <comment id="16831689" author="markt" created="Thu, 2 May 2019 15:27:20 +0000"  >&lt;p&gt;Thanks for the patch. I can confirm the issue and the fix.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12939068" name="LOGL_WARN.patch" size="704" author="tschoening" created="Mon, 10 Sep 2018 11:09:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xwp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-390] PATH environment variable is not properly set if using LibraryPath option</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-390</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The PATH environment variable is not properly set if command line option LibraryPath&#160;is used. It shall extend the existing PATH variable with additional directories defined as library path. In the current implementation the wrong buffer size for the retrieved environment variable is passed during the call to GetEnvironmentVariableW&#160;from&#160;utility function apxAddToPathW (utils.c). Attached a patch that contains the fix for this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13182653">DAEMON-390</key>
            <summary>PATH environment variable is not properly set if using LibraryPath option</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="krezemin">Robert Krzeminski</reporter>
                        <labels>
                            <label>easyfix</label>
                            <label>patch</label>
                            <label>windows</label>
                    </labels>
                <created>Mon, 3 Sep 2018 13:57:39 +0000</created>
                <updated>Thu, 2 May 2019 14:01:24 +0000</updated>
                            <resolved>Thu, 2 May 2019 14:01:24 +0000</resolved>
                                    <version>1.1.0</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16603598" author="sebb@apache.org" created="Tue, 4 Sep 2018 21:04:17 +0000"  >&lt;p&gt;The size of the wsAdd buffer is al + rc + 1&lt;/p&gt;

&lt;p&gt;So I would expect the method call at line 73 to use the buffer length&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
al + rc +1 - al
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;i.e.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
rc + 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or am I missing something here?&lt;/p&gt;

&lt;p&gt;Note: the return from GetEnvironmentVariable is the length (excluding terminating null) if it succeeds, and length +1 (for terminating null) if the buffer is too short. &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
Since the call that sets up rc uses a buffer length of 0, it will fail and thus return the length +1, i.e. the code does not need to add + 1 at line 68.&lt;br/&gt;
However having done so, logically line 73 should include the + 1 in the buffer length.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://docs.microsoft.com/en-us/windows/desktop/api/winbase/nf-winbase-getenvironmentvariable&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.microsoft.com/en-us/windows/desktop/api/winbase/nf-winbase-getenvironmentvariable&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16603664" author="sebb@apache.org" created="Tue, 4 Sep 2018 22:09:35 +0000"  >&lt;p&gt;Added alternate patch which drops the unnecessary +1 and adds some comments&lt;/p&gt;</comment>
                            <comment id="16621043" author="garydgregory" created="Wed, 19 Sep 2018 18:55:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sebb%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;sebb@apache.org&quot;&gt;sebb@apache.org&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krezemin&quot; class=&quot;user-hover&quot; rel=&quot;krezemin&quot;&gt;krezemin&lt;/a&gt;: Did either of you apply and test this patch? Regressions and all... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16621366" author="sebb@apache.org" created="Thu, 20 Sep 2018 00:49:39 +0000"  >&lt;p&gt;I am unable to test either patch.&lt;/p&gt;</comment>
                            <comment id="16831652" author="markt" created="Thu, 2 May 2019 14:01:24 +0000"  >&lt;p&gt;This was issue 2 in &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-396&quot; title=&quot;LibraryPath is broken for Java 11 using Windows 10/2016&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-396&quot;&gt;&lt;del&gt;DAEMON-396&lt;/del&gt;&lt;/a&gt;. I&#160;confirmed the issue was present and that the&#160;patch there fixed the issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13206000">DAEMON-396</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12938139" name="apxAddToPathW-1-1-1-0.patch" size="565" author="krezemin" created="Mon, 3 Sep 2018 13:38:49 +0000"/>
                            <attachment id="12938371" name="utils.patch" size="1550" author="sebb" created="Tue, 4 Sep 2018 22:08:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xohj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-389] JnaPCSCException when using jnasmartcardio</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-389</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The following code works properly when running the JAR directly in console. The connection to the smart card reader works fine and the card info is printer on screen.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; CardException, GPException, NoSuchAlgorithmException {
		GlobalPlatform gp;
		Card card;
		CardTerminal terminal = TerminalManager.getTheReader(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
		card = terminal.connect(&lt;span class=&quot;code-quote&quot;&gt;&quot;*&quot;&lt;/span&gt;);
		card.beginExclusive();
		gp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GlobalPlatform(card.getBasicChannel());
		gp.select(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
		&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] info = gp.getCPLC();
		&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; cardInfo = HexUtils.encodeHexString_imp(info);
		card.disconnect(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Hexa Card Info: &quot;&lt;/span&gt; + cardInfo);
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, when using JSVC to launch the JAR as a daemon, I get a JnaPCSCException (SCardEstablishContext got response 0x8010001d (SCARD_E_NO_SERVICE: The Smart card resource manager is not running.)&lt;/p&gt;

&lt;p&gt;The full code is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; com.st.simple.card.client;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.security.NoSuchAlgorithmException;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.smartcardio.Card;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.smartcardio.CardException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.smartcardio.CardTerminal;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.daemon.Daemon;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.daemon.DaemonContext;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.daemon.DaemonInitException;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; apdu4j.HexUtils;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; apdu4j.TerminalManager;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; pro.javacard.gp.GPException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; pro.javacard.gp.GlobalPlatform;



&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Client &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Daemon {
	
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; CardException, GPException, NoSuchAlgorithmException {
		GlobalPlatform gp;
		Card card;
		CardTerminal terminal = TerminalManager.getTheReader(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
		card = terminal.connect(&lt;span class=&quot;code-quote&quot;&gt;&quot;*&quot;&lt;/span&gt;);
		card.beginExclusive();
		gp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GlobalPlatform(card.getBasicChannel());
		gp.select(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
		&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] info = gp.getCPLC();
		&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; cardInfo = HexUtils.encodeHexString_imp(info);
		card.disconnect(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Hexa Card Info: &quot;&lt;/span&gt; + cardInfo);
	}

	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void destroy() {
		&lt;span class=&quot;code-comment&quot;&gt;// TODO Auto-generated method stub
&lt;/span&gt;		
	}

	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void init(DaemonContext arg0) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; DaemonInitException, Exception {
		&lt;span class=&quot;code-comment&quot;&gt;// TODO Auto-generated method stub
&lt;/span&gt;	}

	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void start() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		&lt;span class=&quot;code-comment&quot;&gt;// TODO Auto-generated method stub
&lt;/span&gt;		main(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
	}

	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void stop() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		&lt;span class=&quot;code-comment&quot;&gt;// TODO Auto-generated method stub
&lt;/span&gt;		
	}

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;MacOS Sierra 10.12.4&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</environment>
        <key id="13162455">DAEMON-389</key>
            <summary>JnaPCSCException when using jnasmartcardio</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="qprotex">Miguel Febres</reporter>
                        <labels>
                            <label>newbie</label>
                    </labels>
                <created>Mon, 28 May 2018 23:13:42 +0000</created>
                <updated>Thu, 25 Apr 2019 19:30:32 +0000</updated>
                            <resolved>Thu, 25 Apr 2019 19:30:32 +0000</resolved>
                                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16826392" author="markt" created="Thu, 25 Apr 2019 19:30:32 +0000"  >&lt;p&gt;There is insufficient&#160;information in this bug report to enable&#160;the problem to be reproduced.&lt;/p&gt;

&lt;p&gt;It appears you are using the GlobalPlatform library. That library requires native DLLs. It appears these are not&#160;correctly configured in the Daemon case.&lt;/p&gt;

&lt;p&gt;The users list is the place to get help.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3u8k7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-388] jsvc does not play nice with JMX</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-388</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;ul&gt;
	&lt;li&gt;Installed Commons Daemon through Ports, installed Tomcat 8.5 (uses JSVC) through Ports.&lt;/li&gt;
	&lt;li&gt;Started Tomcat&lt;/li&gt;
	&lt;li&gt;Launched JConsole locally to attach to VM&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The VM does not display with its PID. After some search, I figured out that &lt;tt&gt;com.sun.management.jmxremote&lt;/tt&gt; is not set, but enabled by &lt;tt&gt;java(1)&lt;/tt&gt; since version 6. I&apos;d expect the same behavior. After setting it, the VM is visible in JConsole, but the startup class is not visible.&lt;/p&gt;</description>
                <environment>&lt;p&gt;FreeBSD 10.4-STABLE #22 r333394: Wed May  9 08:53:46 CEST 2018 i386&lt;/p&gt;</environment>
        <key id="13160999">DAEMON-388</key>
            <summary>jsvc does not play nice with JMX</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="michael-o">Michael Osipov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 May 2018 09:19:06 +0000</created>
                <updated>Tue, 28 May 2019 09:15:38 +0000</updated>
                            <resolved>Fri, 3 May 2019 12:43:51 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.1.1</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16831900" author="markt" created="Thu, 2 May 2019 19:31:17 +0000"  >&lt;p&gt;That you need to set&#160;com.sun.management.jmxremote is not a Commons Daemon nor a Tomcat issue.&#160;You&apos;d need to take that up with your JVM vendor.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The empty name column in jvm mode is a result of how JConsole obtains the name and Daemon starts Java.&#160;After some digging into the JRE source, it appears that setting the sun.java.command system property will&#160;cause the name column in JConsole to be populated. That should be possible to do when&#160;creating the&#160;JVM.&lt;/p&gt;</comment>
                            <comment id="16831910" author="michael-o" created="Thu, 2 May 2019 19:49:58 +0000"  >&lt;p&gt;The whole point is that the behavior is different to the one in java directly. I&apos;d expect this to be as  similar as possible or properly documented.&lt;/p&gt;</comment>
                            <comment id="16832380" author="markt" created="Fri, 3 May 2019 09:11:58 +0000"  >&lt;p&gt;When running Java&#160;apps in jvm mode with jsvc&#160;on&#160;other platforms, there is no need to set&#160;com.sun.management.jmxremote for the process to be visible to jconsole. That you need to do that on FreeBSD points to an issue with the Java vendor / build / configuration you are using on FreeBSD.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The blank name is arguably a bug in JConsole that assumes all Java processes are started from the command line and ignores the possibility of&#160;using the invocation API. It looks like we can workaround it but the workaround is going to be&#160;fragile.&lt;/p&gt;</comment>
                            <comment id="16832471" author="markt" created="Fri, 3 May 2019 12:43:51 +0000"  >&lt;p&gt;jconsole now shows the&#160;class name, as it does when starting normally.&lt;/p&gt;</comment>
                            <comment id="16848792" author="michael-o" created="Mon, 27 May 2019 10:04:18 +0000"  >&lt;p&gt;Do you think it is worthwile to add &lt;a href=&quot;https://github.com/dmlloyd/openjdk/blob/c9f3c7dda232dabcfe297486d8d2f341bcb1e901/hotspot/src/share/vm/prims/jvm.cpp#L3791-L3793&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;these&lt;/a&gt; too?&lt;/p&gt;</comment>
                            <comment id="16849447" author="markt" created="Tue, 28 May 2019 07:59:43 +0000"  >&lt;p&gt;What problem are you trying to solve by adding the additional properties?&lt;/p&gt;</comment>
                            <comment id="16849513" author="michael-o" created="Tue, 28 May 2019 09:15:38 +0000"  >&lt;p&gt;No real problem, but I&apos;d expect the deamon to look like &lt;tt&gt;java(1)&lt;/tt&gt; for external tools like jconsole, jps, etc.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tzlr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-387] &quot;not a valid win 32 application&quot; after Windows 10 Update</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-387</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;After Windows 10 Update my installed java service with ACD does not start with &quot;not a valid win 32 application&quot; (error 193).&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10&lt;/p&gt;</environment>
        <key id="13160994">DAEMON-387</key>
            <summary>&quot;not a valid win 32 application&quot; after Windows 10 Update</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="e_pluribus_unum">Attila Moln&#225;r</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 May 2018 09:04:13 +0000</created>
                <updated>Mon, 28 May 2018 06:23:04 +0000</updated>
                            <resolved>Mon, 28 May 2018 06:23:04 +0000</resolved>
                                                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16492313" author="e_pluribus_unum" created="Mon, 28 May 2018 06:23:04 +0000"  >&lt;p&gt;I was using an older version. With the latest 1.1 version, it&apos;s OK.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 22 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tzkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-385] commons-daemon-1.1.0 not supported with AIX 7</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-385</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;when run .cofigure script to created JSVC getting error&#160; &lt;b&gt;configure: error: Unsupported operating system &quot;aix7.1.4.0&quot;.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;./configure&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Current host ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;checking build system type... powerpc-ibm-aix7.1.4.0&lt;/p&gt;

&lt;p&gt;checking host system type... powerpc-ibm-aix7.1.4.0&lt;/p&gt;

&lt;p&gt;checking cached host system type... ok&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;C-Language compilation tools ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;checking for gcc... gcc&lt;/p&gt;

&lt;p&gt;checking whether the C compiler works... yes&lt;/p&gt;

&lt;p&gt;checking for C compiler default output file name... a.out&lt;/p&gt;

&lt;p&gt;checking for suffix of executables...&lt;/p&gt;

&lt;p&gt;checking whether we are cross compiling... no&lt;/p&gt;

&lt;p&gt;checking for suffix of object files... o&lt;/p&gt;

&lt;p&gt;checking whether we are using the GNU C compiler... yes&lt;/p&gt;

&lt;p&gt;checking whether gcc accepts -g... yes&lt;/p&gt;

&lt;p&gt;checking for gcc option to accept ISO C89... none needed&lt;/p&gt;

&lt;p&gt;checking for ranlib... ranlib&lt;/p&gt;

&lt;p&gt;checking for strip... strip&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Host support ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;checking C flags dependant on host system type... failed&lt;/p&gt;

&lt;p&gt;configure: error: Unsupported operating system &quot;aix7.1.4.0&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13157451">DAEMON-385</key>
            <summary>commons-daemon-1.1.0 not supported with AIX 7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vikram06">vikram</reporter>
                        <labels>
                    </labels>
                <created>Sun, 6 May 2018 18:56:29 +0000</created>
                <updated>Thu, 2 May 2019 16:36:37 +0000</updated>
                            <resolved>Thu, 2 May 2019 16:36:37 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.1.1</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16465800" author="michael-o" created="Mon, 7 May 2018 11:19:15 +0000"  >&lt;p&gt;We can only support systems we have access to. You can provide patches for AIX.&lt;/p&gt;</comment>
                            <comment id="16831744" author="markt" created="Thu, 2 May 2019 16:36:37 +0000"  >&lt;p&gt;I&apos;ve updated config.guess and config.sub to the latest versions.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3te6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-384] prunsrv stopping with error due to hardcoded timeout</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-384</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Due to the fact that in the function&#160;&lt;b&gt;service_ctrl_handler,&lt;/b&gt; from&#160;&lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/daemon/trunk/src/native/windows/apps/prunsrv/prunsrv.c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/commons/proper/daemon/trunk/src/native/windows/apps/prunsrv/prunsrv.c&lt;/a&gt;, the timeout for the case SERVICE_STOP_TIMEOUT is hardcoded to 3 seconds ( 3 * 1000 ms), which in the case of servers with big and multiple deployed application, the actual stopping time of the server might take for sure longer that 3 seconds, and in this case the Windows service will crash with an exception, because it&apos;s unable to wait enough so that the server is stopped.&lt;/p&gt;

&lt;p&gt;The resolution is rather simple, just use SO_STOPTIMEOUT * 1000 if SO_STOPTIMEOUT &amp;gt; 0. This way the user that creates the service with procrun/prunsrv can configure the timeout with --StopTimeout=xxx seconds.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 (x64)&lt;/p&gt;</environment>
        <key id="13149807">DAEMON-384</key>
            <summary>prunsrv stopping with error due to hardcoded timeout</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="blassmegod">blassmegod</reporter>
                        <labels>
                            <label>easyfix</label>
                            <label>windows</label>
                    </labels>
                <created>Tue, 3 Apr 2018 18:34:03 +0000</created>
                <updated>Tue, 10 Apr 2018 08:42:33 +0000</updated>
                            <resolved>Sun, 8 Apr 2018 17:16:16 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.1.1</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="16424456" author="garydgregory" created="Tue, 3 Apr 2018 19:08:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=blassmegod&quot; class=&quot;user-hover&quot; rel=&quot;blassmegod&quot;&gt;blassmegod&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;Please feel free to provide a PR on GitHub: &lt;a href=&quot;https://github.com/apache/commons-daemon&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16426856" author="blassmegod" created="Thu, 5 Apr 2018 12:48:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;PR created: &lt;a href=&quot;https://github.com/apache/commons-daemon/pull/5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/pull/5&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you,&lt;/p&gt;</comment>
                            <comment id="16429815" author="garydgregory" created="Sun, 8 Apr 2018 17:16:16 +0000"  >&lt;p&gt;Fixed in svn trunk. Please verify and close this ticket.&lt;/p&gt;</comment>
                            <comment id="16431935" author="blassmegod" created="Tue, 10 Apr 2018 08:42:33 +0000"  >&lt;p&gt;Tested the issue with fix, it works, maybe the only drawback is that that even if the application wrapped by the procrun service exits before the timeout set on --StopTimeout, the service stays up (in Stopping mode) until the --StopTimeout set timeout finishes, but it&apos;s no blocker or real issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 29 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3s3on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-382] High memory consumption</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-382</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Memory consumption of procsrv.exe is much higher than&#160;requested by JvmMx.&lt;/p&gt;

&lt;p&gt;I&apos;ve set the --JvmMX=4096 but the .exe process is consuming nearly 7GB of memory dispite the fact that the JVM only consumed the requested 4GM. The remaining 3GB seems to be consumed by procsrv.exe&lt;/p&gt;

&lt;p&gt;Please see the attached screenshot&lt;/p&gt;</description>
                <environment>&lt;p&gt;C:\ReportLoq\ReportLoqService.exe //IS/ReportLoq --DisplayName=&quot;ReportLoq Server&quot; --Startup=auto --StartPath=C:\ReportLoq --StartMode=jvm --StopMode=jvm --Jvm=&quot;C:\Program Files\Java\jdk1.8.0_151\jre\bin\server\jvm.dll&quot; --StartClass=dk.flsmidth.sitecalculator.Launcher --StartMethod=start --StopClass=dk.flsmidth.sitecalculator.Launcher --StopMethod=stop --Classpath c:\ReportLoq\site-calc.jar --JvmOptions=-Duser.timezone=UTC ++JvmOptions=-Dcom.sun.management.jmxremote.port=8686 ++JvmOptions=-Dcom.sun.management.jmxremote.authenticate=false ++JvmOptions=-Dcom.sun.management.jmxremote.ssl=false --JvmMx=4096 --JvmMs=2048 --StartParams=-headless --Description=&quot;FLSmidth&quot; --StdOutput=C:\ReportLoq\logs\service-out.txt --StdError=C:\ReportLoq\logs\service-err.txt --LogPath=&quot;c:\ReportLoq\logs&quot;&lt;/p&gt;</environment>
        <key id="13146144">DAEMON-382</key>
            <summary>High memory consumption</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kvin">Kenneth Vindum</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Mar 2018 07:58:22 +0000</created>
                <updated>Mon, 19 Mar 2018 08:18:44 +0000</updated>
                            <resolved>Mon, 19 Mar 2018 08:04:23 +0000</resolved>
                                    <version>1.1.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16404469" author="markt" created="Mon, 19 Mar 2018 08:04:23 +0000"  >&lt;p&gt;Java heap allocation != maximum process memory usage.&lt;/p&gt;

&lt;p&gt;There are lots of factors that can account for the additional memory usage and the situation you describe is not abnormal. The users list is the place to get help if you need further advice.&lt;/p&gt;</comment>
                            <comment id="16404479" author="kvin" created="Mon, 19 Mar 2018 08:18:44 +0000"  >&lt;p&gt;Will do that. Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12915100" name="Capture.PNG" size="153102" author="kvin" created="Mon, 19 Mar 2018 07:54:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 32 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rh6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-381] StopTimeout not working</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-381</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;With the stopTimeout set to 5 seconds, and a test application that sleeps for 30 seconds after given the stop command, one would expect the prunsrv process to be killed after 5 seconds.&lt;/p&gt;

&lt;p&gt;The process stays alive for 30 seconds before terminating.&lt;/p&gt;

&lt;p&gt;Based on the documentation I feel I am using this parameter correctly.&#160; The daemon&#160;should wait 5 seconds for the wrapped java process to terminate gracefully, then terminate it.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10, JDK 1.8.0_161, Spring Boot 1.3.6.RELEASE&lt;/p&gt;</environment>
        <key id="13140809">DAEMON-381</key>
            <summary>StopTimeout not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dwebb">David Webb</reporter>
                        <labels>
                    </labels>
                <created>Sun, 25 Feb 2018 21:08:30 +0000</created>
                <updated>Thu, 2 May 2019 15:31:44 +0000</updated>
                            <resolved>Thu, 2 May 2019 15:31:44 +0000</resolved>
                                    <version>1.0.14</version>
                    <version>1.0.15</version>
                    <version>1.1.0</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16377225" author="garydgregory" created="Mon, 26 Feb 2018 17:38:50 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dwebb&quot; class=&quot;user-hover&quot; rel=&quot;dwebb&quot;&gt;dwebb&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;Would you provide a PR on GitHub?&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16379315" author="dwebb" created="Tue, 27 Feb 2018 21:35:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; - A PR with what? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160; The fix or an example to reproduce? Thanks.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16379393" author="garydgregory" created="Tue, 27 Feb 2018 22:20:20 +0000"  >&lt;p&gt;Well, ideally both.&lt;/p&gt;</comment>
                            <comment id="16831692" author="markt" created="Thu, 2 May 2019 15:31:44 +0000"  >&lt;p&gt;The timeout is only how long the manager service waits for the service to&#160;terminate. Like the standard Windows GUI for&#160;service management, if the service does not stop in that time control is returned to the user but the service is not forcibly stopped.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qkr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-380] VM not found when using Oracle Java 9</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-380</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Oracle Java 9 seems to use another folder layout than for example OpenJDK 9, which results in JSVC not being able to find libjvm.so.&lt;/p&gt;

&lt;p&gt;I&apos;ve installed Java 9 via PPA and found that the libjvm.so is located at /lib/server/libjvm.so in the $JAVA_HOME dir, but JSVC does not look for the shared object at this location.&lt;/p&gt;

&lt;p&gt;Instead,&#160;JSVC tries to access /jre/lib/amd64/server/libjvm.so and /lib/amd64/server/libjvm.so and then fails saying &quot;Cannot find any VM in Java Home&quot;.&lt;/p&gt;

&lt;p&gt;As a workaround I&#160;created a symlink in amd64 dir, but probably the path used by Oracle Java 9 should be specified in location.c file, too?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 16.04.3 LTS&lt;/p&gt;

&lt;p&gt;Oracle Java 9.0.1&lt;br/&gt;
 Java(TM) SE Runtime Environment (build 9.0.1+11)&lt;br/&gt;
 Java HotSpot(TM) 64-Bit Server VM (build 9.0.1+11, mixed mode)&lt;/p&gt;

&lt;p&gt;(installed via PPA, as described &lt;a href=&quot;http://www.webupd8.org/2015/02/install-oracle-java-9-in-ubuntu-linux.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;)&lt;/p&gt;</environment>
        <key id="13131238">DAEMON-380</key>
            <summary>VM not found when using Oracle Java 9</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ZwoCa">Sebastian Schmid</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jan 2018 13:44:15 +0000</created>
                <updated>Thu, 2 May 2019 16:09:50 +0000</updated>
                            <resolved>Thu, 2 May 2019 16:09:50 +0000</resolved>
                                    <version>1.1.0</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16831723" author="markt" created="Thu, 2 May 2019 16:09:50 +0000"  >&lt;p&gt;This works for me with the Oracle JDK installed from an Oracle distribution. I suspect a packaging issue in the PPA.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3oydj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-379] Unable to build with Java 9 using Ant</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-379</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Build of commons-dameon with java-9 using Ant fails with the following errors :&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [javac] Compiling 10 source files to /tmp/SeB/commons-daemon-1.1.0-src/target/classes
    [javac] warning: [options] bootstrap class path not set in conjunction with -source 1.5
    [javac] error: Source option 1.5 is no longer supported. Use 1.6 or later.
    [javac] error: Target option 1.5 is no longer supported. Use 1.6 or later.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The patch below fixes that issue :&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;--- build.xml.orig	2017-12-06 10:54:59.570231291 +0100
+++ build.xml	2017-12-06 10:57:14.879237328 +0100
@@ -93,10 +93,10 @@
 
 
   &amp;lt;!-- compiler source JDK version --&amp;gt;
-  &amp;lt;property name=&quot;compile.source&quot;          value=&quot;1.5&quot;/&amp;gt;
+  &amp;lt;property name=&quot;compile.source&quot;          value=&quot;1.6&quot;/&amp;gt;
 
   &amp;lt;!-- compiler target JDK version --&amp;gt;
-  &amp;lt;property name=&quot;compile.target&quot;          value=&quot;1.5&quot;/&amp;gt;
+  &amp;lt;property name=&quot;compile.target&quot;          value=&quot;1.6&quot;/&amp;gt;
 
   &amp;lt;!-- Should Java compilations set the &apos;debug&apos; compiler option? --&amp;gt;
   &amp;lt;property name=&quot;compile.debug&quot;           value=&quot;true&quot;/&amp;gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment>&lt;p&gt;slackware-64 14.2&lt;br/&gt;
openjdk 9.0.0.15&lt;br/&gt;
Apache Ant 1.10.1&lt;/p&gt;
</environment>
        <key id="13123152">DAEMON-379</key>
            <summary>Unable to build with Java 9 using Ant</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="phenixia2003">S&#233;bastien Ballet</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Dec 2017 10:21:11 +0000</created>
                <updated>Fri, 8 Dec 2017 16:26:24 +0000</updated>
                            <resolved>Fri, 8 Dec 2017 16:24:55 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>1.1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16280281" author="sebb@apache.org" created="Wed, 6 Dec 2017 15:05:26 +0000"  >&lt;p&gt;The Maven POM uses 1.6 - &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-371&quot; title=&quot;Update Java requirement from version 5 to 6.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-371&quot;&gt;&lt;del&gt;DAEMON-371&lt;/del&gt;&lt;/a&gt; - so it should be OK to update the Ant build file accordingly.&lt;/p&gt;

&lt;p&gt;However, does it make sense to continue to maintain both Ant and Maven build files?&lt;/p&gt;</comment>
                            <comment id="16280292" author="markt" created="Wed, 6 Dec 2017 15:10:18 +0000"  >&lt;p&gt;As much as it pains me to say it, probably not. I didn&apos;t even look at build.xml when I was preparing the recent release.&lt;/p&gt;</comment>
                            <comment id="16280338" author="sebb@apache.org" created="Wed, 6 Dec 2017 15:46:54 +0000"  >&lt;p&gt;The Maven build obviously works; I see no point keeping the Ant build as well.&lt;/p&gt;

&lt;p&gt;Most other Commons components no longer have Ant builds.&lt;/p&gt;</comment>
                            <comment id="16283796" author="sebb@apache.org" created="Fri, 8 Dec 2017 16:24:55 +0000"  >&lt;p&gt;Author: sebb&lt;br/&gt;
Date: Fri Dec  8 16:23:49 2017&lt;br/&gt;
New Revision: 1817525&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1817525&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1817525&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-379&quot; title=&quot;Unable to build with Java 9 using Ant&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-379&quot;&gt;&lt;del&gt;DAEMON-379&lt;/del&gt;&lt;/a&gt; - Unable to build with java-9 using ant; dropped Ant build files&lt;/p&gt;

&lt;p&gt;Removed:&lt;br/&gt;
    commons/proper/daemon/trunk/build.properties.sample&lt;br/&gt;
    commons/proper/daemon/trunk/build.xml&lt;br/&gt;
Modified:&lt;br/&gt;
    commons/proper/daemon/trunk/src/changes/changes.xml&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nlhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-378] &quot;Cannot find any VM&quot; with Java 9 on Arch</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-378</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;/usr/bin/jsvc -debug -nodetach -java-home /usr/lib/jvm/java-9/openjdk Some.Class&lt;/p&gt;

&lt;p&gt;fails with &quot;Cannot find any VM in Java Home /usr/lib/jvm/java-9-openjdk&quot;. The exact same command, replacing java-9-openjdk with java-8-openjdk works just fine.&lt;/p&gt;

&lt;p&gt;Chances are that jsvc does not recognize the rather-differently structured JDK9 directory layout?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Arch Linux current x86_64, jre9-openjdk 9.u181-4  and jre8-openjdk 8.u144-1 both installed.&lt;/p&gt;</environment>
        <key id="13117713">DAEMON-378</key>
            <summary>&quot;Cannot find any VM&quot; with Java 9 on Arch</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="j12t">Johannes Ernst</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Nov 2017 05:54:37 +0000</created>
                <updated>Wed, 15 Nov 2017 11:09:25 +0000</updated>
                            <resolved>Wed, 15 Nov 2017 11:09:25 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13104553">DAEMON-373</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mo2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-377] Race in PID file handing in jsvc resulting in Tomcat running without a pidfile</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-377</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;This issue is reproducible in FreeBSD under moderate load during a restart of Tomcat 8 running via jsvc.&lt;/p&gt;

&lt;p&gt;The old jsvc controller process exits &lt;em&gt;after&lt;/em&gt; the new process is started, deleting the new pid file with it. As a result, the jsvc starter process fails with a timeout since it is waiting on the pid file to be created, which never happens. The Tomcat process itself is &lt;b&gt;started without a pid file&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;Example: (35659/35660 is the old jsvc process, 56362/56363 is the new jsvc process):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2017-11-08 09:36:59 35660 jsvc debug: Daemon destroyed successfully
2017-11-08 09:36:59 35660 jsvc debug: Calling System.exit(0)
2017-11-08 09:36:59 56362 jsvc debug: Switching umask back to 022 from 077
(((/var/run/tomcat8.pid is written by 56362 here)))
2017-11-08 09:36:59 56363 jsvc debug: Using specific JVM in /usr/local/openjdk8/jre/lib/amd64/server/libjvm.so
2017-11-08 09:36:59 56363 jsvc debug: Attemtping to load library /usr/local/openjdk8/jre/lib/amd64/server/libjvm.so
(((/var/run/tomcat8.pid is deleted by 35659 here)))
2017-11-08 09:36:59 35659 jsvc debug: Service shut down
2017-11-08 09:36:59 56363 jsvc debug: JVM library /usr/local/openjdk8/jre/lib/amd64/server/libjvm.so loaded
2017-11-08 09:36:59 56363 jsvc debug: JVM library entry point found (0x019DE640)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Restart script eventually times out:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt;/usr/local/etc/rc.d/tomcat8 restart
Stopping tomcat8.
Waiting for PIDS: 35660.
Starting tomcat8.
/usr/local/etc/rc.d/tomcat8: WARNING: failed to start tomcat8
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;No PID file:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt;ls -l /var/run/tomcat8.pid
ls: /var/run/tomcat8.pid: No such file or directory
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Yet Tomcat is running:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt;ps ax|grep java|grep -v grep
56362  -  Is      0:00.00 /usr/local/bin/jsvc -java-home /usr/local/openjdk8 -server -user www -pidfile /var/run/tomcat8.pid -wait 300 -outfile /u
56363  -  I       0:57.25 /usr/local/bin/jsvc -java-home /usr/local/openjdk8 -server -user www -pidfile /var/run/tomcat8.pid -wait 300 -outfile /u
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The issue is that the pidfile contains the PID of the &lt;em&gt;child&lt;/em&gt;, but is being deleted by the &lt;em&gt;parent&lt;/em&gt; process (the controller), in the &lt;tt&gt;run_controller&lt;/tt&gt; function which looks like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; run_controller(arg_data *args, home_data *data, uid_t uid,
                          gid_t gid)
  . . .
  waitpid(pid, &amp;amp;status, 0);
  unlink(args-&amp;gt;pidf);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the controller process is paged out (which happens often because it is dormant while inside &lt;tt&gt;waitpid&lt;/tt&gt;), then considerable amount of time can pass between the time the child terminates and the call to &lt;tt&gt;unlink(args-&amp;gt;pidf)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;The issue can be reproduced reliably by adding &lt;tt&gt;sleep(1);&lt;/tt&gt; before &lt;tt&gt;unlink(args-&amp;gt;pidf)&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13116911">DAEMON-377</key>
            <summary>Race in PID file handing in jsvc resulting in Tomcat running without a pidfile</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rustamabd">Rustam Abdullaev</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Nov 2017 08:57:04 +0000</created>
                <updated>Wed, 15 Nov 2017 11:51:42 +0000</updated>
                            <resolved>Wed, 15 Nov 2017 11:51:42 +0000</resolved>
                                                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16248980" author="rustamabd" created="Sun, 12 Nov 2017 20:13:43 +0000"  >&lt;p&gt;Attaching a patch that fixes a couple of races with pid file handling (including this issue).&lt;/p&gt;

&lt;p&gt;Now the controller will lock and check that the pid file hasn&apos;t changed before deleting it.&lt;/p&gt;

&lt;p&gt;Also fixed an issue with the version check that creates a pid file unnecessarily and never removes one.&lt;/p&gt;</comment>
                            <comment id="16253335" author="markt" created="Wed, 15 Nov 2017 11:51:42 +0000"  >&lt;p&gt;Thanks for the analysis and the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12897258" name="daemon-377.patch" size="2574" author="rustamabd" created="Sun, 12 Nov 2017 20:10:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mj5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-376] Update Daemon to also search registry for JRE with Java 9 JRE location</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-376</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Java 9:&lt;br/&gt;
HKLM\SOFTWARE\JavaSoft\JRE&lt;/p&gt;

&lt;p&gt;Java 8 and earlier:&lt;br/&gt;
HKLM\SOFTWARE\JavaSoft\Java Runtime Environment&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows only&lt;/p&gt;</environment>
        <key id="13107963">DAEMON-376</key>
            <summary>Update Daemon to also search registry for JRE with Java 9 JRE location</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="markt">Mark Thomas</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Oct 2017 12:49:07 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:08 +0000</updated>
                            <resolved>Tue, 31 Oct 2017 17:27:47 +0000</resolved>
                                                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16197250" author="garydgregory" created="Mon, 9 Oct 2017 16:33:04 +0000"  >&lt;p&gt;Patches welcome! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16227157" author="markt" created="Tue, 31 Oct 2017 17:27:47 +0000"  >&lt;p&gt;Fixed by switching to using a list of registry keys to look in. Adding a new one is fairly simple should we ever need to.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3l0zj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-375] Contradictory prunsrv --StartMethod documentation</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-375</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The Procrun documentation at &lt;a href=&quot;http://commons.apache.org/proper/commons-daemon/procrun.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-daemon/procrun.html&lt;/a&gt; contradicts itself in describing &lt;tt&gt;Prunsrv&lt;/tt&gt;&apos;s &lt;tt&gt;--StartMethod&lt;/tt&gt; parameter. In the table of parameters, there is a note that the start method shouldn&apos;t return until the stop method is called, but the &lt;a href=&quot;http://commons.apache.org/proper/commons-daemon/procrun.html#Using_Procrun_in_jvm_mode&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;section&lt;/a&gt; headed &quot;Using Procrun in jvm mode&quot; contains the following sentence:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Note that the method handling service start should create and start a separate thread to carry out the processing, and then return.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I don&apos;t see how it could be both at once, so which is correct?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13107150">DAEMON-375</key>
            <summary>Contradictory prunsrv --StartMethod documentation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="JavaBadger">Aidan Pitt-Brooke</reporter>
                        <labels>
                            <label>consistency</label>
                            <label>documentation</label>
                            <label>prunsrv</label>
                    </labels>
                <created>Thu, 5 Oct 2017 07:32:45 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:02 +0000</updated>
                            <resolved>Fri, 20 Oct 2017 20:56:29 +0000</resolved>
                                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12675019">DAEMON-309</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kwhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-374] Add support for Java 9 command-line arguments</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-374</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Add support for new command-line arguments&lt;br/&gt;
--add-modules&lt;br/&gt;
--add-exports&lt;br/&gt;
--add-opens&lt;br/&gt;
--patch-module&lt;br/&gt;
and others.&lt;/p&gt;

&lt;p&gt;For example, Apache Tomcat cannot clean memory buffers without&lt;br/&gt;
--add-exports java.base/jdk.internal.ref=ALL-UNNAMED&lt;br/&gt;
and assorted additional parameters are required for some existing web applications.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13104555">DAEMON-374</key>
            <summary>Add support for Java 9 command-line arguments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="katzyn">Evgenij Ryazanov</reporter>
                        <labels>
                    </labels>
                <created>Sun, 24 Sep 2017 07:09:43 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:05 +0000</updated>
                            <resolved>Thu, 2 Nov 2017 11:41:28 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16199532" author="garydgregory" created="Tue, 10 Oct 2017 23:04:30 +0000"  >&lt;p&gt;Patches welcome! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16201500" author="mohanty.rrm" created="Thu, 12 Oct 2017 06:02:39 +0000"  >&lt;p&gt;Attaching patch for adding java 9 options to jsvc. Options added are&lt;br/&gt;
--add-modules&lt;br/&gt;
--module-path&lt;br/&gt;
--upgrade-module-path&lt;br/&gt;
--add-reads&lt;br/&gt;
--add-exports&lt;br/&gt;
--add-opens&lt;br/&gt;
--limit-modules&lt;br/&gt;
--patch-module&lt;br/&gt;
--illegal-access&lt;/p&gt;

&lt;p&gt;Feel free to suggest/change help descriptions for the above options.&lt;/p&gt;

&lt;p&gt;The patch also contains the change to search java 9 libjvm library location. libjvm location is changed in java 9 compared to previous versions. &lt;/p&gt;


</comment>
                            <comment id="16235597" author="markt" created="Thu, 2 Nov 2017 11:41:28 +0000"  >&lt;p&gt;Patch to add the options applied. (The Java 9 jvm location issue was already fixed)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12891642" name="java9.patch" size="6006" author="mohanty.rrm" created="Thu, 12 Oct 2017 05:56:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kglj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-373] Daemon does not start with JDK9</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-373</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Jsvc cannot find Java VM if JDK9 is installed and logs the following message:&lt;/p&gt;

&lt;p&gt;Cannot find any VM in Java Home /path/to/jdk9&lt;/p&gt;</description>
                <environment></environment>
        <key id="13104553">DAEMON-373</key>
            <summary>Daemon does not start with JDK9</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="katzyn">Evgenij Ryazanov</reporter>
                        <labels>
                    </labels>
                <created>Sun, 24 Sep 2017 07:00:10 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:06 +0000</updated>
                            <resolved>Fri, 20 Oct 2017 09:47:28 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16212432" author="markt" created="Fri, 20 Oct 2017 09:47:29 +0000"  >&lt;p&gt;Fixed for OSX and Linux.&lt;/p&gt;

&lt;p&gt;Additional fixes may be required for other platforms. To fix them we&apos;ll need to know:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the platform&lt;/li&gt;
	&lt;li&gt;path(s) to libjvm.so under JAVA_HOME&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13117713">DAEMON-378</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kgl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-372] create shutdown event for shutdown process</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-372</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;On Windows, when using Java or exe modes, if the service process ends before the stop process, prunsrv starts clean up.&lt;br/&gt;
When the stop process finishes, the handles might be freed and all sorts of illegal access errors may happen.&lt;br/&gt;
The solution is to make the service execution to wait on the shutdown event.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-daemon/pull/4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/pull/4&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows&lt;/p&gt;</environment>
        <key id="13096873">DAEMON-372</key>
            <summary>create shutdown event for shutdown process</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="serozaki">S&#233;rgio Ozaki</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Aug 2017 23:37:17 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:06 +0000</updated>
                            <resolved>Fri, 20 Oct 2017 20:33:35 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16213188" author="markt" created="Fri, 20 Oct 2017 20:33:35 +0000"  >&lt;p&gt;Thanks for the patch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12844914">DAEMON-336</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j5yv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-367] Windows service fails to start after Windows 10 Creators Update</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-367</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I have been running windows services via prunsrv for quite a long time without any problem. Since updating my PC (Windows 10 Home) recently with the Creators Update version of Windows 10 any new service that I install will not start. Similar services that were installed prior to the update work ok as before. When I try to start a new service, the system event log contains the message &quot;The BSS2SRVB2 service terminated with the following service-specific error: Incorrect function&quot;. The service was initially configured with PR_LOGLEVEL set to &quot;Error&quot; and no log files were created. When I set the level to &quot;Debug&quot;, the following log files were created,&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;stderrb2.txt contains,&lt;br/&gt;
2017-06-29 08:45:34 Commons Daemon procrun stderr initialized&lt;/li&gt;
	&lt;li&gt;stdoutb2.txt contains,&lt;br/&gt;
2017-06-29 08:45:34 Commons Daemon procrun stdout initialized&lt;/li&gt;
	&lt;li&gt;commons-daemon.2017-06-29.log contains,&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-29 08:45:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1679) &lt;span class=&quot;error&quot;&gt;&amp;#91;20104&amp;#93;&lt;/span&gt; Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-29 08:45:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1683) &lt;span class=&quot;error&quot;&gt;&amp;#91;20104&amp;#93;&lt;/span&gt; Commons Daemon procrun (1.0.15.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-29 08:45:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1596) &lt;span class=&quot;error&quot;&gt;&amp;#91;20104&amp;#93;&lt;/span&gt; Running &apos;BSS2SRVB2&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-29 08:45:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1374) &lt;span class=&quot;error&quot;&gt;&amp;#91;19220&amp;#93;&lt;/span&gt; Inside ServiceMain...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-29 08:45:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;19220&amp;#93;&lt;/span&gt; reportServiceStatusE: 2, 0, 3000, 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-29 08:45:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1127) &lt;span class=&quot;error&quot;&gt;&amp;#91;19220&amp;#93;&lt;/span&gt; Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-29 08:45:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:1190) &lt;span class=&quot;error&quot;&gt;&amp;#91;19220&amp;#93;&lt;/span&gt; Missing service ImageFile&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-29 08:45:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:1536) &lt;span class=&quot;error&quot;&gt;&amp;#91;19220&amp;#93;&lt;/span&gt; ServiceStart returned 1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-29 08:45:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;19220&amp;#93;&lt;/span&gt; reportServiceStatusE: 1, 1066, 0, 1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-29 08:45:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1598) &lt;span class=&quot;error&quot;&gt;&amp;#91;20104&amp;#93;&lt;/span&gt; Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-29 08:45:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1764) &lt;span class=&quot;error&quot;&gt;&amp;#91;20104&amp;#93;&lt;/span&gt; Commons Daemon procrun finished&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The service processes have been written by myself in Java. &lt;/p&gt;

&lt;p&gt;I have also seen the same problem on another PC (Windows 10 Pro) so this suggests that it is not specific to my PC.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10 Home and Pro after Creators Update. Windows version 10.0.15063 Build 15063&lt;/p&gt;</environment>
        <key id="13083386">DAEMON-367</key>
            <summary>Windows service fails to start after Windows 10 Creators Update</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dave53">Dave Bennett</reporter>
                        <labels>
                            <label>prunsrv</label>
                            <label>windows10</label>
                    </labels>
                <created>Thu, 29 Jun 2017 08:11:26 +0000</created>
                <updated>Tue, 14 Nov 2017 14:25:00 +0000</updated>
                            <resolved>Tue, 14 Nov 2017 14:25:00 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16068836" author="b.eckenfels" created="Thu, 29 Jun 2017 19:35:42 +0000"  >&lt;p&gt;Can you show us the command line you used to install the service or a dump of the Registry? What start time and ImageFile parameters do you have? What service user?&lt;/p&gt;</comment>
                            <comment id="16069590" author="dave53" created="Fri, 30 Jun 2017 06:36:37 +0000"  >&lt;p&gt;I haven&apos;t used an ImageFile parameter as I don&apos;t know how that might be used, and I don&apos;t understand what you mean by a &apos;start time&apos; parameter. The service logs-on with a &apos;Local System Account&apos;. &lt;/p&gt;

&lt;p&gt;I installed the service via the following .bat file as I had learnt to do when I first used this method.&lt;/p&gt;

&lt;p&gt;set SERVICE_NAME=BSS2SRVB2&lt;br/&gt;
set PR_INSTALL=C:\Data\Eclipse_Projects\BSS2\BSS2_01.07\jar\prunsrv.exe&lt;br/&gt;
REM Service log configuration&lt;br/&gt;
set PR_LOGPREFIX=BSS2SRVB2&lt;br/&gt;
set PR_LOGPATH=C:\Data\Eclipse_Projects\BSS2\BSS2_01.07\jar\logs&lt;br/&gt;
set PR_STDOUTPUT=C:\Data\Eclipse_Projects\BSS2\BSS2_01.07\jar\logs\stdoutb2.txt&lt;br/&gt;
set PR_STDERROR=C:\Data\Eclipse_Projects\BSS2\BSS2_01.07\jar\logs\stderrb2.txt&lt;br/&gt;
set PR_LOGLEVEL=Error&lt;br/&gt;
REM Path to java installation&lt;br/&gt;
set PR_JVM=C:\Program Files (x86)\Java\jdk1.7.0_13\jre\bin\server\jvm.dll&lt;br/&gt;
set PR_CLASSPATH=BSS2SRVB2.jar&lt;br/&gt;
REM Startup configuration (manual or auto)&lt;br/&gt;
set PR_STARTUP=auto&lt;br/&gt;
set PR_STARTMODE=jvm&lt;br/&gt;
set PR_STARTCLASS=uk.co.parkthorn.services.Basic2Service&lt;br/&gt;
set PR_STARTMETHOD=startService&lt;br/&gt;
REM Shutdown configuration&lt;br/&gt;
set PR_STOPMODE=jvm&lt;br/&gt;
set PR_STOPCLASS=uk.co.parkthorn.services.Basic2Service&lt;br/&gt;
set PR_STOPMETHOD=stopService&lt;br/&gt;
REM JVM configuration&lt;br/&gt;
set PR_JVMMS=256&lt;br/&gt;
set PR_JVMMX=1024&lt;br/&gt;
set PR_JVMSS=4000&lt;br/&gt;
set PR_JVMOPTIONS=-Duser.language=EN;-Duser.region=gb&lt;br/&gt;
REM Install service&lt;br/&gt;
C:\Data\Eclipse_Projects\BSS2\BSS2_01.07\jar\prunsrv.exe //IS//BSS2SRVB2&lt;br/&gt;
C:\Data\Eclipse_Projects\BSS2\BSS2_01.07\jar\prunsrv.exe //US//BSS2SRVB2 --Description &quot;BSS2 Basic2 Service&quot;&lt;/p&gt;</comment>
                            <comment id="16079509" author="dave53" created="Sun, 9 Jul 2017 08:52:48 +0000"  >&lt;p&gt;I found what the problem was, eventually. After performing the windows update, the new service was installed via a command prompt that was NOT in administrator mode. When repeated in admin mode, the service started successfully.&lt;/p&gt;

&lt;p&gt;Prior to the windows update, I always opened the command prompt via the File Explorer, ie. from the &apos;Open Command Prompt as Administrator&apos; on the File menu. After the update, the Command Prompt options have disappeared and replaced by the equivalent Powershell options. I used another way to open the Command Prompt (entering &apos;cmd&apos; in the search box) but I hadn&apos;t realised that it wasn&apos;t opened in admin mode. Interestingly, if you right-click on the Command Prompt option that shows and select &apos;Run as Adminitrator&apos; nothing happens. The only way that I found to run the Command Propmpt in admin mode was via CTL+ALT+DEL, select Task Manager, select &apos;File&apos;, select &apos;run new task&apos;, enter &apos;cmd&apos;, tick &apos;create this task with administrative privileges&apos;.&lt;/p&gt;</comment>
                            <comment id="16079584" author="b.eckenfels" created="Sun, 9 Jul 2017 12:13:06 +0000"  >&lt;p&gt;Thanks for the feedback. I wonder why the install was partial and produced no error. There might be room for improvement.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gvrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-366] Windows service fails to stop with error code 1053 (using Windows 7 service manager)</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-366</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Using Windows services manager (services.msc) to start/stop service.&lt;br/&gt;
Service installed with the following start/stop settings.&lt;br/&gt;
--StartMode=jvm --StartClass=com.myorg.MyClass --StartMethod=start &lt;br/&gt;
--StopMode=jvm --StopClass=com.myorg.MyClass --StopMethod=stop &lt;/p&gt;

&lt;p&gt;Service starts OK.&lt;/p&gt;

&lt;p&gt;When I use services manager to stop the service, the application stops running but the prunsrv.exe process does not terminate.&lt;br/&gt;
Eventually the services manager reports that:&lt;br/&gt;
&quot;Windows could not stop the &amp;lt;MyServiceName&amp;gt; service on Local Computer.  Error 1053: The service did not respond to the start or control request in a timely fashion.&quot;&lt;/p&gt;

&lt;p&gt;The service then stays at status &quot;stopping&quot; &amp;amp; cannot be restarted without first killing the prunsrv.exe process.&lt;/p&gt;

&lt;p&gt;Looking at the application logs I can see that the application&apos;s stop() method gets called - the final line in this method is a logging call which is executing OK.&lt;/p&gt;

&lt;p&gt;The commons-daemon-&amp;lt;date&amp;gt;.log file has the following entries:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-05-09 17:18:02&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;10944&amp;#93;&lt;/span&gt; Commons Daemon procrun (1.0.15.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-05-09 17:18:02&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;10944&amp;#93;&lt;/span&gt; Running &apos;&amp;lt;MyServiceName&amp;gt;&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-05-09 17:18:02&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 9224] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-05-09 17:18:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 9224] Service started in 9202 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-05-09 17:18:23&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;10780&amp;#93;&lt;/span&gt; Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-05-09 17:18:24&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;10780&amp;#93;&lt;/span&gt; Service stop thread completed.&lt;/p&gt;


&lt;p&gt;This problem does not occur in daemon versions 11-&amp;gt;14.&lt;br/&gt;
I have only seen it in daemon-1.0.15&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 64bit - using 64-bit prunsrv.exe in jvm mode&lt;br/&gt;
Using 64-bit Java JRE 1.8.0_73&lt;/p&gt;</environment>
        <key id="13081974">DAEMON-366</key>
            <summary>Windows service fails to stop with error code 1053 (using Windows 7 service manager)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="gchauvet">Guillaume Chauvet</assignee>
                                    <reporter username="consultantleon">Consultant Leon</reporter>
                        <labels>
                            <label>prunsrv</label>
                            <label>stop</label>
                            <label>windows</label>
                    </labels>
                <created>Fri, 23 Jun 2017 02:15:19 +0000</created>
                <updated>Thu, 2 Nov 2017 11:03:40 +0000</updated>
                            <resolved>Thu, 2 Nov 2017 11:03:40 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16060327" author="consultantleon" created="Fri, 23 Jun 2017 02:22:49 +0000"  >&lt;p&gt;as with all other reporters confirming this bug it&apos;s exactly as stated and easy to reproduce for me.&lt;br/&gt;
The moment we upgraded to a &amp;gt; 1.0.14 tomcat8.exe or tomcat7.exe from a tomcat &amp;gt; 7.0.39 , the shutdown of the service failed.&lt;br/&gt;
The java process terminated nicely and the console reports thread ended but tomcat7/8 .exe remains running.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-23 04:18:27&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 9392] Commons Daemon procrun (1.0.15.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-23 04:18:27&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 9392] Running &apos;HelloWorld6&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-23 04:18:27&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 1500] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-23 04:18:28&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 1500] Service started in 1270 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-23 04:18:36&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;12796&amp;#93;&lt;/span&gt; Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-23 04:18:37&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;12796&amp;#93;&lt;/span&gt; Service stop thread completed.&lt;/p&gt;

&lt;p&gt;... D:\application\bin\win\AMD64                                 &lt;br/&gt;
$ sc queryex HelloWorld6                                                                        &lt;/p&gt;

&lt;p&gt;SERVICE_NAME: HelloWorld6                                                                       &lt;br/&gt;
        TYPE               : 10  WIN32_OWN_PROCESS                                              &lt;br/&gt;
        STATE              : 1  STOPPED                                                         &lt;br/&gt;
        WIN32_EXIT_CODE    : 0  (0x0)                                                           &lt;br/&gt;
        SERVICE_EXIT_CODE  : 0  (0x0)                                                           &lt;br/&gt;
        CHECKPOINT         : 0x0                                                                &lt;br/&gt;
        WAIT_HINT          : 0x0                                                                &lt;br/&gt;
        PID                : 0                                                                  &lt;br/&gt;
        FLAGS              :                                                                    &lt;/p&gt;

&lt;p&gt;... D:\application\bin\win\AMD64                                 &lt;br/&gt;
$ sc start HelloWorld6                                                                          &lt;/p&gt;

&lt;p&gt;SERVICE_NAME: HelloWorld6                                                                       &lt;br/&gt;
        TYPE               : 10  WIN32_OWN_PROCESS                                              &lt;br/&gt;
        STATE              : 2  START_PENDING                                                   &lt;br/&gt;
                                (NOT_STOPPABLE, NOT_PAUSABLE, IGNORES_SHUTDOWN)                 &lt;br/&gt;
        WIN32_EXIT_CODE    : 0  (0x0)                                                           &lt;br/&gt;
        SERVICE_EXIT_CODE  : 0  (0x0)                                                           &lt;br/&gt;
        CHECKPOINT         : 0x0                                                                &lt;br/&gt;
        WAIT_HINT          : 0x7d0                                                              &lt;br/&gt;
        PID                : 11384                                                              &lt;br/&gt;
        FLAGS              :                                                                    &lt;/p&gt;

&lt;p&gt;... D:\application\bin\win\AMD64                                 &lt;br/&gt;
$ sc queryex HelloWorld6                                                                        &lt;/p&gt;

&lt;p&gt;SERVICE_NAME: HelloWorld6                                                                       &lt;br/&gt;
        TYPE               : 10  WIN32_OWN_PROCESS                                              &lt;br/&gt;
        STATE              : 4  RUNNING                                                         &lt;br/&gt;
                                (STOPPABLE, NOT_PAUSABLE, ACCEPTS_SHUTDOWN)                     &lt;br/&gt;
        WIN32_EXIT_CODE    : 0  (0x0)                                                           &lt;br/&gt;
        SERVICE_EXIT_CODE  : 0  (0x0)                                                           &lt;br/&gt;
        CHECKPOINT         : 0x0                                                                &lt;br/&gt;
        WAIT_HINT          : 0x0                                                                &lt;br/&gt;
        PID                : 11384                                                              &lt;br/&gt;
        FLAGS              :                                                                    &lt;/p&gt;

&lt;p&gt;... D:\application\bin\win\AMD64                                 &lt;br/&gt;
$ sc stop HelloWorld6                                                                           &lt;/p&gt;

&lt;p&gt;SERVICE_NAME: HelloWorld6                                                                       &lt;br/&gt;
        TYPE               : 10  WIN32_OWN_PROCESS                                              &lt;br/&gt;
        STATE              : 3  STOP_PENDING                                                    &lt;br/&gt;
                                (NOT_STOPPABLE, NOT_PAUSABLE, IGNORES_SHUTDOWN)                 &lt;br/&gt;
        WIN32_EXIT_CODE    : 0  (0x0)                                                           &lt;br/&gt;
        SERVICE_EXIT_CODE  : 0  (0x0)                                                           &lt;br/&gt;
        CHECKPOINT         : 0x2                                                                &lt;br/&gt;
        WAIT_HINT          : 0xbb8                                                              &lt;/p&gt;

&lt;p&gt;... D:\application\bin\win\AMD64                                 &lt;br/&gt;
$ sc queryex HelloWorld6                                                                        &lt;/p&gt;

&lt;p&gt;SERVICE_NAME: HelloWorld6                                                                       &lt;br/&gt;
        TYPE               : 10  WIN32_OWN_PROCESS                                              &lt;br/&gt;
        STATE              : 3  STOP_PENDING                                                    &lt;br/&gt;
                                (NOT_STOPPABLE, NOT_PAUSABLE, IGNORES_SHUTDOWN)                 &lt;br/&gt;
        WIN32_EXIT_CODE    : 0  (0x0)                                                           &lt;br/&gt;
        SERVICE_EXIT_CODE  : 0  (0x0)                                                           &lt;br/&gt;
        CHECKPOINT         : 0x3                                                                &lt;br/&gt;
        WAIT_HINT          : 0x493e0                                                            &lt;br/&gt;
        PID                : 11384                                                              &lt;br/&gt;
        FLAGS              :                                                                    &lt;/p&gt;

&lt;p&gt;... D:\application\bin\win\AMD64                                 &lt;br/&gt;
$ sc queryex HelloWorld6                                                                        &lt;/p&gt;

&lt;p&gt;SERVICE_NAME: HelloWorld6                                                                       &lt;br/&gt;
        TYPE               : 10  WIN32_OWN_PROCESS                                              &lt;br/&gt;
        STATE              : 3  STOP_PENDING                                                    &lt;br/&gt;
                                (NOT_STOPPABLE, NOT_PAUSABLE, IGNORES_SHUTDOWN)                 &lt;br/&gt;
        WIN32_EXIT_CODE    : 0  (0x0)                                                           &lt;br/&gt;
        SERVICE_EXIT_CODE  : 0  (0x0)                                                           &lt;br/&gt;
        CHECKPOINT         : 0x3                                                                &lt;br/&gt;
        WAIT_HINT          : 0x493e0                                                            &lt;br/&gt;
        PID                : 11384                                                              &lt;br/&gt;
        FLAGS              :                                                                    &lt;/p&gt;
</comment>
                            <comment id="16060329" author="consultantleon" created="Fri, 23 Jun 2017 02:28:19 +0000"  >&lt;p&gt;Service is installed with the following settings:&lt;br/&gt;
 //IS//%SERVICE_NAME% ^&lt;br/&gt;
    --Description=&quot;FusionFabric Connect (%APP_CONF%)&quot; ^&lt;br/&gt;
    --DisplayName=&quot;%SERVICE_NAME%&quot; ^&lt;br/&gt;
    --LogPath=&quot;%APP_LOGDIR%&quot; ^&lt;br/&gt;
    --StdOutput=auto ^&lt;br/&gt;
    --StdError=auto ^&lt;br/&gt;
    --Jvm=&quot;%JAVA_DLL_PATH%&quot; ^&lt;br/&gt;
	--JvmMs=512 ^&lt;br/&gt;
	--JvmMx=8192 ^&lt;br/&gt;
	++JvmOptions=-XX:+UseConcMarkSweepGC ^&lt;br/&gt;
	++JvmOptions=-XX:MaxGCPauseMillis=2000 ^&lt;br/&gt;
	++JvmOptions=-XX:GCTimeRatio=10 ^&lt;br/&gt;
	++JvmOptions=-XX:+CMSIncrementalMode ^&lt;br/&gt;
	++JvmOptions=-XX:+CMSIncrementalPacing ^&lt;br/&gt;
	++JvmOptions=-XX:+DisableExplicitGC ^&lt;br/&gt;
    ++JvmOptions=&quot;-DAPP.LOG_DIR=%APP_LOGDIR%&quot; ^&lt;br/&gt;
    ++JvmOptions=&quot;-DAPP.DATA_DIR=%APP_DATA%&quot; ^&lt;br/&gt;
    --StartMode=jvm ^&lt;br/&gt;
    --StopMode=jvm ^&lt;br/&gt;
    --StartClass=com.misys.tools.integration.director.WindowsServiceWrapper ^&lt;br/&gt;
    --StopClass=com.misys.tools.integration.director.WindowsServiceWrapper ^&lt;br/&gt;
	--StartPath=&quot;%APP_CONF%&quot; ^&lt;br/&gt;
	--StartParams=&quot;%SERVICE_NAME%&quot; ^&lt;br/&gt;
	++StartParams=&quot;%APP_LOGDIR%&quot; ^&lt;br/&gt;
	++StartParams=director.properties ^&lt;br/&gt;
	%ARGS% ^&lt;br/&gt;
    --StartMethod=start ^&lt;br/&gt;
	--StopParams=%SERVICE_NAME% ^&lt;br/&gt;
    --StopMethod=stop&lt;/p&gt;</comment>
                            <comment id="16061454" author="b.eckenfels" created="Fri, 23 Jun 2017 20:21:09 +0000"  >&lt;p&gt;Imguess the VM does not terminate when/after the stop() method is called. Have you tried to add a System.exit() or dump all non-daemon threads? Can you provide use with a (forced) jstack output of the pending VM (PId).&lt;/p&gt;</comment>
                            <comment id="16061483" author="consultantleon" created="Fri, 23 Jun 2017 20:52:58 +0000"  >&lt;p&gt;indeed that was my first suspicision so I checked with task manager: the jvm is no longer running! &lt;/p&gt;

&lt;p&gt;Only the procrun exe is still running without child process.&lt;/p&gt;

&lt;p&gt;That&apos;s why I&apos;m so convinced this is a bug introduced in 1.0.15 as 1.0.14 downgrade immediately resolves the problem and shutsdown cleanly in 2 seconds every time.&lt;/p&gt;</comment>
                            <comment id="16061515" author="b.eckenfels" created="Fri, 23 Jun 2017 21:21:36 +0000"  >&lt;p&gt;In `startmode=JVM` there is no child process, the VM is loaded via DLL, the procure.exe is the JVM host process. You can use System.exit() to terminate it (however Windows Service Manager won&apos;t like it)&lt;/p&gt;</comment>
                            <comment id="16061572" author="consultantleon" created="Fri, 23 Jun 2017 22:09:23 +0000"  >&lt;p&gt;Hi Bernd,&lt;br/&gt;
that&apos;s interesting to know indeed and thanks for trying to find us a workaround.&lt;br/&gt;
How to do a jstack then, on the procrun exe? Let me see what processes I do see during runtime, not quite clear.&lt;/p&gt;

&lt;p&gt;I&apos;m not happy to have to call System.exit(0), this will cause more shutdown issues than it solves and our shutdown process has been carefully rewritten not to need such call.&lt;/p&gt;

&lt;p&gt;Calling System.exit from a shutdown handler can call jvm shutdown handler to hang for example.&lt;/p&gt;

&lt;p&gt;Our code review tools will flag it as bad practise/critical issue as well.&lt;br/&gt;
So please , don&apos;t let everyone have to redesign their code to be able to hack around the introduced bug in procrun and let&apos;s try to make it work properly as it used to. &lt;/p&gt;

&lt;p&gt;I&apos;m not looking forward to have to offer support for our application to install as a service being forced to use outdated procrun binary 1.0.14 and losing support on other issues that may get fixed now our in the future.&lt;/p&gt;</comment>
                            <comment id="16061728" author="consultantleon" created="Sat, 24 Jun 2017 01:48:00 +0000"  >&lt;p&gt;I did find some irregularities in our latest version, it seems the wrong shutdown methods were invoked which probably left some threads running.&lt;br/&gt;
Building a new package and do some more tests this weekend to confirm - but it would be good that this then is the root cause; still curious why procrun 1.0.14 still shutsdown swiftly and 1.0.15 &apos;hangs&apos; (1.0.14 uses more force to kill off remaining threads maybe?)&lt;/p&gt;</comment>
                            <comment id="16062038" author="b.eckenfels" created="Sat, 24 Jun 2017 15:52:22 +0000"  >&lt;p&gt;I just diffed the releases and there is a change in this area, the global shutdown event which terminates the main service loop is set a bit later:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/daemon/tags/COMMONS_DAEMON_1_0_15/src/native/windows/apps/prunsrv/prunsrv.c?r1=1460101&amp;amp;r2=1461070&amp;amp;diff_format=h&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/commons/proper/daemon/tags/COMMONS_DAEMON_1_0_15/src/native/windows/apps/prunsrv/prunsrv.c?r1=1460101&amp;amp;r2=1461070&amp;amp;diff_format=h&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is I guess a bugfix for a similiar issue (&lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-288&quot; title=&quot;Hang while stopping procrun service&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-288&quot;&gt;&lt;del&gt;DAEMON-288&lt;/del&gt;&lt;/a&gt;) to allow a clean shutdown.&lt;/p&gt;

&lt;p&gt;However this does not look directly like the issue, but It might be possible that the shutdown event might be missed and the shutdown wont be forcefully.  &lt;/p&gt;

&lt;p&gt;Can you provide us with a debug-level logfile of procrun? (--LogLevel=Debug)&lt;/p&gt;

&lt;p&gt;This is expected:&lt;br/&gt;
  &quot;Waiting 1 minute for all threads to exit&quot;&lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/daemon/branches/1.0.x/src/native/windows/apps/prunsrv/prunsrv.c?diff_format=h&amp;amp;revision=1461070&amp;amp;view=markup#l1559&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/commons/proper/daemon/branches/1.0.x/src/native/windows/apps/prunsrv/prunsrv.c?diff_format=h&amp;amp;revision=1461070&amp;amp;view=markup#l1559&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;this would block:&lt;br/&gt;
  &quot;Waiting for all threads to exit&quot; &lt;br/&gt;
  &lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/daemon/branches/1.0.x/src/native/windows/apps/prunsrv/prunsrv.c?diff_format=h&amp;amp;revision=1461070&amp;amp;view=markup#l1559&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/commons/proper/daemon/branches/1.0.x/src/native/windows/apps/prunsrv/prunsrv.c?diff_format=h&amp;amp;revision=1461070&amp;amp;view=markup#l1559&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16062098" author="consultantleon" created="Sat, 24 Jun 2017 19:12:14 +0000"  >&lt;p&gt;Firstly I&apos;ve now managed to resolve the shutdown problem by fixing our application and ensure it properly terminates all threads - this is confirmed as one solution.&lt;/p&gt;

&lt;p&gt;Secondly I&apos;m not sure what the best behaviour should be for procrun when a process does not behave so I created the debug log to help you to determine if this is really a 1.0.15 procrun issue as well. I do not see the &apos;waiting 1 minute message&apos;.&lt;/p&gt;

&lt;p&gt;So I reinstalled the service with option --LogLevel=Debug&lt;/p&gt;

&lt;p&gt;Then perform sc stop TestC (TestC is the name of my service at this point)&lt;/p&gt;

&lt;p&gt;Once I shutdown I see our own application log:&lt;br/&gt;
2017-06-24_20:43:07.711- INFO-&lt;span class=&quot;error&quot;&gt;&amp;#91;FileExportDestination-HelloWorld.OutputDest&amp;#93;&lt;/span&gt;-rename/move temporary file ...&lt;br/&gt;
2017-06-24_20:43:07.711- INFO-&lt;span class=&quot;error&quot;&gt;&amp;#91;FileExportDestination-HelloWorld.OutputDest&amp;#93;&lt;/span&gt;-consume done &lt;span class=&quot;error&quot;&gt;&amp;#91;FileSource_15cdb6a2ca3_1&amp;#93;&lt;/span&gt;, status=PROCESSING &lt;br/&gt;
2017-06-24_20:43:54.466- INFO-&lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3                                &amp;#93;&lt;/span&gt;-Stopping APP service &apos;TestC&apos;... &lt;br/&gt;
2017-06-24_20:43:54.466- INFO-&lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3                                &amp;#93;&lt;/span&gt;-HelloWorld-SYSTEM: pause all sources configured with pause.before.shutdown=true, request remaining sources to stop &lt;br/&gt;
2017-06-24_20:43:54.482- INFO-&lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3                                &amp;#93;&lt;/span&gt;-HelloWorld-SYSTEM: all sources set to pause &apos;before shutdown&apos; have now paused, other sources have stopped &lt;br/&gt;
2017-06-24_20:43:54.482- INFO-&lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3                                &amp;#93;&lt;/span&gt;-HelloWorld-SYSTEM: wait max 30 seconds for queues to flush &lt;br/&gt;
2017-06-24_20:43:54.482- INFO-&lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3                                &amp;#93;&lt;/span&gt;-HelloWorld-SYSTEM: all queues are flushed &lt;br/&gt;
2017-06-24_20:43:54.482- INFO-&lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3                                &amp;#93;&lt;/span&gt;-HelloWorld-SYSTEM: pause all components configured with pause.on.shutdown=true... &lt;br/&gt;
2017-06-24_20:43:54.482- INFO-&lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3                                &amp;#93;&lt;/span&gt;-HelloWorld-SYSTEM: all components set to pause &apos;on shutdown&apos; have now paused &lt;br/&gt;
2017-06-24_20:43:54.482- INFO-&lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3                                &amp;#93;&lt;/span&gt;-ServiceResponder: close service connection &lt;br/&gt;
2017-06-24_20:43:54.482- INFO-&lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3                                &amp;#93;&lt;/span&gt;-all services stopped timely &lt;br/&gt;
2017-06-24_20:43:54.482- INFO-&lt;span class=&quot;error&quot;&gt;&amp;#91;Thread-3                                &amp;#93;&lt;/span&gt;-APP service &apos;TestC&apos; stopped. &lt;/p&gt;

&lt;p&gt;So at 20:43:54.482 the main java application shutdown is complete.&lt;/p&gt;

&lt;p&gt;I then run jstack -F &amp;lt;pid&amp;gt; and see many threads left running indeed:&lt;br/&gt;
$ sc queryex TestC&lt;/p&gt;

&lt;p&gt;SERVICE_NAME: TestC&lt;br/&gt;
        TYPE               : 10  WIN32_OWN_PROCESS&lt;br/&gt;
        STATE              : 3  STOP_PENDING&lt;br/&gt;
                                (NOT_STOPPABLE, NOT_PAUSABLE, IGNORES_SHUTDOWN)&lt;br/&gt;
        WIN32_EXIT_CODE    : 0  (0x0)&lt;br/&gt;
        SERVICE_EXIT_CODE  : 0  (0x0)&lt;br/&gt;
        CHECKPOINT         : 0x3&lt;br/&gt;
        WAIT_HINT          : 0x493e0&lt;br/&gt;
        PID                : 11088&lt;br/&gt;
        FLAGS              :&lt;/p&gt;

&lt;p&gt;&amp;gt; D:\app_home\app-2.0.0.0.0-5145\etc&lt;br/&gt;
$ jstack -F 11088&lt;/p&gt;

&lt;p&gt;Then now a good 20 minutes later the service is still in STATE STOP_PENDING:&lt;/p&gt;

&lt;p&gt;The only other logs are from the proc daemon:&lt;br/&gt;
commons-daemon.2017-06-24.log&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1679) &lt;span class=&quot;error&quot;&gt;&amp;#91;10484&amp;#93;&lt;/span&gt; Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1683) &lt;span class=&quot;error&quot;&gt;&amp;#91;10484&amp;#93;&lt;/span&gt; Commons Daemon procrun (1.0.15.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:561 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10484&amp;#93;&lt;/span&gt; Installing service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:600 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10484&amp;#93;&lt;/span&gt; Service TestC name TestC&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:616 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10484&amp;#93;&lt;/span&gt; Setting service description FusionFabric Connect (D:\APP_home\APP-2.0.0.0.0-5145\config\samples\HelloWorld)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:634 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10484&amp;#93;&lt;/span&gt; Service &apos;TestC&apos; installed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1764) &lt;span class=&quot;error&quot;&gt;&amp;#91;10484&amp;#93;&lt;/span&gt; Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1679) [ 7180] Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1683) [ 7180] Commons Daemon procrun (1.0.15.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1596) [ 7180] Running &apos;TestC&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1374) [ 8884] Inside ServiceMain...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) [ 8884] reportServiceStatusE: 2, 0, 3000, 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1127) [ 8884] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:233 ) [ 8884] loading jvm &apos;C:\Program Files\Java\jdk1.8.0_73\jre\bin\server\jvm.dll&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 2824] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; -XX:+UseConcMarkSweepGC&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 2824] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; -XX:MaxGCPauseMillis=2000&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 2824] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; -XX:GCTimeRatio=10&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 2824] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; -XX:+CMSIncrementalMode&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 2824] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; -XX:+CMSIncrementalPacing&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 2824] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; -XX:+DisableExplicitGC&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 2824] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt; -DAPP.LOG_DIR=D:\APP_home\APP-2.0.0.0.0-5145\config\samples\HelloWorld\logs&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 2824] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;7&amp;#93;&lt;/span&gt; -DAPP.DATA_DIR=D:\APP_home\APP-2.0.0.0.0-5145\config\samples\HelloWorld\data&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 2824] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;8&amp;#93;&lt;/span&gt; -Djava.class.path=.;D:\APP_home\APP-2.0.0.0.0-5145\bin\APP-api-2.0.0-00_00-RELEASE.jar;...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 2824] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;9&amp;#93;&lt;/span&gt; exit&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 2824] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;10&amp;#93;&lt;/span&gt; -Xms512m&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 2824] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;11&amp;#93;&lt;/span&gt; -Xmx8192m&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:888 ) [ 2824] argv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; = TestC&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:888 ) [ 2824] argv&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; = D:\APP_home\APP-2.0.0.0.0-5145\config\samples\HelloWorld\logs&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:888 ) [ 2824] argv&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; = director.properties&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:941 ) [ 2824] Java Worker thread started com/COMPANY/tools/integration/director/WindowsServiceWrapper:start&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:56&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1186) [ 8884] Java started com/COMPANY/tools/integration/director/WindowsServiceWrapper&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:56&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1284) [ 8884] Service started in 1453 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:56&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) [ 8884] reportServiceStatusE: 4, 0, 0, 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:56&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1528) [ 8884] Waiting for worker to finish...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:58&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:964 ) [ 2824] Java Worker thread finished com/COMPANY/tools/integration/director/WindowsServiceWrapper:start with status=0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:58&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1533) [ 8884] Worker finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:40:58&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1559) [ 8884] Waiting for all threads to exit&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:43:54&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) [ 7180] reportServiceStatusE: 3, 0, 3000, 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:43:54&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:943 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10688&amp;#93;&lt;/span&gt; Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:43:54&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:888 ) [ 9936] argv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; = TestC&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:43:54&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:941 ) [ 9936] Java Worker thread started com/COMPANY/tools/integration/director/WindowsServiceWrapper:stop&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:43:54&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:964 ) [ 9936] Java Worker thread finished com/COMPANY/tools/integration/director/WindowsServiceWrapper:stop with status=0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:43:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:990 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10688&amp;#93;&lt;/span&gt; Waiting for java jni stop worker to finish...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:43:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:992 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10688&amp;#93;&lt;/span&gt; Java jni stop worker finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:43:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10688&amp;#93;&lt;/span&gt; reportServiceStatusE: 3, 0, 300000, 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:43:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1093) &lt;span class=&quot;error&quot;&gt;&amp;#91;10688&amp;#93;&lt;/span&gt; Waiting for worker to die naturally...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:43:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1104) &lt;span class=&quot;error&quot;&gt;&amp;#91;10688&amp;#93;&lt;/span&gt; Worker finished gracefully in 0 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2017-06-24 20:43:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1114) &lt;span class=&quot;error&quot;&gt;&amp;#91;10688&amp;#93;&lt;/span&gt; Service stop thread completed.&lt;/p&gt;

&lt;p&gt;So you see that prunsrv.c reports stop thread completed while the process is still running with pid 11088&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12874379/12874379_screenshot-1.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16235552" author="markt" created="Thu, 2 Nov 2017 11:03:40 +0000"  >&lt;p&gt;Based on the logs there appears to be enough going on here that the end result doesn&apos;t strike me as unreasonable.&lt;/p&gt;

&lt;p&gt;I see two issues being demonstrated by the test application:&lt;br/&gt;
a) the main thread finishes before stop is called&lt;br/&gt;
b) additional threads are started but as not stopped&lt;/p&gt;

&lt;p&gt;I&apos;m satisfied that the failure of the service to stop is a sufficient warning to the user that something isn&apos;t right that they can then investigate.&lt;/p&gt;

&lt;p&gt;It may be possible for Daemon to handle this better but that would be an enhancement request for which patches would be welcome.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12646828">DAEMON-298</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12874379" name="screenshot-1.png" size="5521" author="consultantleon" created="Sat, 24 Jun 2017 19:12:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gn2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-365] Jsvc &quot;Service killed by signal 11&quot;</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-365</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Jsvc is working fine on my machine and on other machines, however on a&lt;br/&gt;
particular one, it is not working.&lt;/p&gt;

&lt;p&gt;In the logs I get &quot;Service killed by signal 11&quot;.&lt;/p&gt;

&lt;p&gt;I am using a simple daemon for tests&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. I compiled it&lt;br/&gt;
with javac -cp /usr/share/java/commons-daemon.jar MyDaemon.java. Jsvc&lt;br/&gt;
is installed on Ubuntu 16.04 LTS with apt-get and it is version&lt;br/&gt;
1.0.15-dev.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/commons-user/201706.mbox/raw/%3CCABxFBzGfNVFOzySFT1CTTwb56GXr1gLsdmU4vnJYKUUrexBzxQ%40mail.gmail.com%3E/3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/commons-user/201706.mbox/raw/%3CCABxFBzGfNVFOzySFT1CTTwb56GXr1gLsdmU4vnJYKUUrexBzxQ%40mail.gmail.com%3E/3&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When I run it in the logs I only get &quot;Service killed by signal 11&quot;. I am using&lt;br/&gt;
/usr/bin/jsvc -home /usr/lib/jvm/java-8-oracle/ -cp&lt;br/&gt;
/usr/share/java/commons-daemon.jar:$PWD/ -user myuser -pidfile&lt;br/&gt;
/tmp/mydaemon.pid -outfile /tmp/test.out.log -errfile &apos;&amp;amp;1&apos;  MyDaemon&lt;br/&gt;
-one -two&lt;/p&gt;

&lt;p&gt;Starting it with -debug, I get no much more&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/commons-user/201706.mbox/raw/%3CCABxFBzGfNVFOzySFT1CTTwb56GXr1gLsdmU4vnJYKUUrexBzxQ%40mail.gmail.com%3E/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/commons-user/201706.mbox/raw/%3CCABxFBzGfNVFOzySFT1CTTwb56GXr1gLsdmU4vnJYKUUrexBzxQ%40mail.gmail.com%3E/2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I cannot stop it with -stop and I have to kill -9 it.&lt;/p&gt;

&lt;p&gt;What should I do?&lt;br/&gt;
Do you have any idea?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</description>
                <environment>&lt;p&gt;$ cat /etc/lsb-release &lt;br/&gt;
DISTRIB_ID=Ubuntu&lt;br/&gt;
DISTRIB_RELEASE=16.04&lt;br/&gt;
DISTRIB_CODENAME=xenial&lt;br/&gt;
DISTRIB_DESCRIPTION=&quot;Ubuntu 16.04 LTS&quot;&lt;/p&gt;

&lt;p&gt;$ uname -a&lt;br/&gt;
Linux server 4.4.0-81-generic #104-Ubuntu SMP Wed Jun 14 08:17:06 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux&lt;/p&gt;

&lt;p&gt;$ jsvc --help&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;br/&gt;
jsvc (Apache Commons Daemon) 1.0.15-dev&lt;/p&gt;
</environment>
        <key id="13081684">DAEMON-365</key>
            <summary>Jsvc &quot;Service killed by signal 11&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alopumo">Andrea</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Jun 2017 07:48:12 +0000</created>
                <updated>Fri, 23 Jun 2017 09:57:19 +0000</updated>
                            <resolved>Thu, 22 Jun 2017 17:08:38 +0000</resolved>
                                                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16059314" author="alopumo" created="Thu, 22 Jun 2017 13:09:02 +0000"  >&lt;p&gt;I debugged with gdb and found that the child process goes in segmentation fault in src/native/unix/native/java.c line 307, java_init function.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;bool java_init(arg_data *args, home_data *data)&lt;br/&gt;
{&lt;br/&gt;
     ...&lt;br/&gt;
     symb = (jvm_create_t)dso_symbol(libh, &quot;JNI_CreateJavaVM&quot;);&lt;br/&gt;
     ...&lt;br/&gt;
     ret = (*symb) (&amp;amp;jvm, &amp;amp;env, &amp;amp;arg);   &amp;lt;---- line 307&lt;/p&gt;&lt;/blockquote&gt;

&lt;blockquote&gt;
&lt;p&gt;(gdb) print jvm&lt;br/&gt;
$14 = (JavaVM *) 0x0&lt;br/&gt;
(gdb) print env&lt;br/&gt;
$15 = (JNIEnv *) 0x0&lt;br/&gt;
(gdb) print arg&lt;br/&gt;
$16  =  version = 65540, nOptions = 5, options = 0x613b80, ignoreUnrecognized = 0 &apos;\000&apos;&lt;br/&gt;
(gdb) print arg.options&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;br/&gt;
$3 =  optionString = 0x613be0 &quot;-Djava.class.path=/usr/share/java/commons-daemon.jar:/home/myuser/commons-daemon-1.0.15-src/src/native/unix/native/&quot;,  extraInfo = 0x0 &lt;br/&gt;
(gdb) print arg.options&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
$4 optionString = 0x613c60 &quot;-Dcommons.daemon.process.id=9448&quot;, extraInfo = 0x0&lt;br/&gt;
(gdb) print arg.options&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&lt;br/&gt;
$5 optionString = 0x613c90 &quot;-Dcommons.daemon.process.parent=9447&quot;, extraInfo = 0x0&lt;br/&gt;
(gdb) print arg.options&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;&lt;br/&gt;
$6 optionString = 0x613cc0 &quot;-Dcommons.daemon.version=1.0.15-dev&quot;, extraInfo = 0x0&lt;br/&gt;
(gdb) print arg.options&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt;&lt;br/&gt;
$7 optionString = 0x613cf0 &quot;abort&quot;, extraInfo = 0x405730 &amp;lt;java_abort123&amp;gt;&lt;br/&gt;
(gdb) print arg.nOptions&lt;br/&gt;
$11 = 5&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16059562" author="shibabandit" created="Thu, 22 Jun 2017 15:49:05 +0000"  >&lt;p&gt;Also having this problem as of very recently on new Ubuntu cloud server builds. Getting signal 11 and service never successfully starts, but has a process running that I have to kill. &lt;/p&gt;

&lt;p&gt;uname -a :&lt;br/&gt;
Linux ip-&amp;lt;...&amp;gt;-generic #170-Ubuntu SMP Wed Jun 14 09:04:33 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux&lt;/p&gt;

&lt;p&gt;java -version&lt;br/&gt;
java version &quot;1.8.0_60&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0_60-b27)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.60-b23, mixed mode)&lt;/p&gt;


&lt;p&gt;+-------------------------------------------------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Internal options:              4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Dcommons.daemon.process.id=2406&quot; (0x00000000)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Dcommons.daemon.process.parent=2185&quot; (0x00000000)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Dcommons.daemon.version=1.0.15-dev&quot; (0x00000000)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;abort&quot; (0x004056f0)&lt;br/&gt;
+-------------------------------------------------------&lt;br/&gt;
Service killed by signal 11&lt;br/&gt;
Waiting 60 s to prevent looping&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                            <comment id="16059670" author="shibabandit" created="Thu, 22 Jun 2017 16:48:30 +0000"  >&lt;p&gt;Found this workaround: changing the stack size by passing in option: &apos;-Xss1280k&apos;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://community.ubnt.com/t5/UniFi-Wireless/Unifi-Controller-and-Debian-8-kernel-upgrade/td-p/1967647&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://community.ubnt.com/t5/UniFi-Wireless/Unifi-Controller-and-Debian-8-kernel-upgrade/td-p/1967647&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="16059694" author="markt" created="Thu, 22 Jun 2017 17:08:38 +0000"  >&lt;p&gt;If you follow the link for the workaround and read the background, all the evidence points to a faulty kernel update. The stacksize workaround  is the best interim solution.&lt;/p&gt;</comment>
                            <comment id="16060531" author="alopumo" created="Fri, 23 Jun 2017 07:52:23 +0000"  >&lt;p&gt;The  &apos;-Xss1280k&apos; workaround works for me.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13081423">DAEMON-363</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gla7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-364] Latest RHEL kernel update crashes jsvc</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-364</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;After applying the latest RHEL kernel updates (CVE-2017-1000364), all jsvc instance crash on start up with the following:&lt;/p&gt;

 &lt;blockquote&gt;&lt;p&gt;#&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;A fatal error has been detected by the Java Runtime Environment:&lt;br/&gt;
#&lt;/li&gt;
	&lt;li&gt;SIGBUS (0x7) at pc=0x00007f0fcea07bdc, pid=28581, tid=0x00007f0fdfc0c700&lt;br/&gt;
#&lt;/li&gt;
	&lt;li&gt;JRE version:  (8.0_121-b13) (build )&lt;/li&gt;
	&lt;li&gt;Java VM: Java HotSpot(TM) 64-Bit Server VM (25.121-b13 mixed mode linux-amd64 compressed oops)&lt;/li&gt;
	&lt;li&gt;Problematic frame:&lt;/li&gt;
	&lt;li&gt;j  java.lang.Object.&amp;lt;clinit&amp;gt;()V+0&lt;br/&gt;
#&lt;/li&gt;
	&lt;li&gt;Failed to write core dump. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again&lt;br/&gt;
#&lt;/li&gt;
	&lt;li&gt;An error report file with more information is saved as:&lt;/li&gt;
	&lt;li&gt;//hs_err_pid28581.log&lt;br/&gt;
#&lt;/li&gt;
	&lt;li&gt;If you would like to submit a bug report, please visit:&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://bugreport.java.com/bugreport/crash.jsp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugreport.java.com/bugreport/crash.jsp&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;Manually starting the service does not exhibit the problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13081557">DAEMON-364</key>
            <summary>Latest RHEL kernel update crashes jsvc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="walshp">Peter Walsh</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Jun 2017 20:51:26 +0000</created>
                <updated>Tue, 4 Jul 2017 08:47:00 +0000</updated>
                            <resolved>Tue, 4 Jul 2017 08:47:00 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="16059215" author="neuhaus" created="Thu, 22 Jun 2017 11:37:26 +0000"  >&lt;p&gt;This appears to be a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-363&quot; title=&quot;JSVC Fails to launch (SIGBUS 0x7) on Centos 6.9 Kernel 2.6.32-696.3.2.el6.x86_64&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-363&quot;&gt;&lt;del&gt;DAEMON-363&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The workaround of using the &quot;-Xss2m&quot; also works on Debian 8.8 (which is also affected).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13081423">DAEMON-363</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13082240">HDFS-12029</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gkhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-363] JSVC Fails to launch (SIGBUS 0x7) on Centos 6.9 Kernel 2.6.32-696.3.2.el6.x86_64</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-363</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;After applying the update for CVE-2017-1000364 to CentOS 6.9 (kernel 2.6.32-696.3.2.el6.x86_64) JSVC no longer launches the JVM.&lt;/p&gt;

&lt;p&gt;The process starts, and when it attempts to launch the JVM it fails with a SIGBUS (0x7).&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;#
# A fatal error has been detected by the Java &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment:
#
#  SIGBUS (0x7) at pc=0x00007f4785109bfc, pid=21204, tid=0x00007f4796bbd700
#
# JRE version:  (8.0_121-b13) (build )
# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.121-b13 mixed mode linux-amd64 compressed oops)
# Problematic frame:
# j  java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.&amp;lt;clinit&amp;gt;()V+0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The following reproduces the problem.  Note that the target class is not relevant as it never reaches that point.&lt;br/&gt;
./jsvc -debug -verbose  -home /opt/java/1.8.0_121/  com.does.not.Matter&lt;/p&gt;

&lt;p&gt;Tracing the code it reaches this point and then fails:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.c
bool java_init(arg_data *args, home_data *data)
 ret = (*symb) (&amp;amp;jvm, &amp;amp;env, &amp;amp;arg);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The following is the output:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# ./jsvc -debug -verbose  -home /opt/java/1.8.0_121/  com.does.not.Matter
+-- DUMPING PARSED COMMAND LINE ARGUMENTS --------------
| Detach:          True
| Show Version:    No
| Show Help:       No
| Check Only:      Disabled
| Stop:            False
| Wait:            0
| Run as service:  No
| Install service: No
| Remove service:  No
| JVM Name:        &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;
| Java Home:       &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/java/1.8.0_121/&quot;&lt;/span&gt;
| PID File:        &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/run/jsvc.pid&quot;&lt;/span&gt;
| User Name:       &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;
| Extra Options:   1
|   &lt;span class=&quot;code-quote&quot;&gt;&quot;-verbose&quot;&lt;/span&gt;
| &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; Invoked:   &lt;span class=&quot;code-quote&quot;&gt;&quot;com.does.not.Matter&quot;&lt;/span&gt;
| &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; Arguments: 0
+-------------------------------------------------------
Attempting to locate Java Home in /opt/java/1.8.0_121/
Attempting to locate VM configuration file /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//jre/lib/jvm.cfg
&lt;/span&gt;Attempting to locate VM configuration file /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/jvm.cfg
&lt;/span&gt;Attempting to locate VM configuration file /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//jre/lib/amd64/jvm.cfg
&lt;/span&gt;Attempting to locate VM configuration file /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/jvm.cfg
&lt;/span&gt;Found VM configuration file at /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/jvm.cfg
&lt;/span&gt;Found VM server definition in configuration
Checking library /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//jre/lib/amd64/server/libjvm.so
&lt;/span&gt;Checking library /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/server/libjvm.so
&lt;/span&gt;Found VM client definition in configuration
Checking library /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//jre/lib/amd64/client/libjvm.so
&lt;/span&gt;Checking library /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/client/libjvm.so
&lt;/span&gt;Cannot locate library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; VM client (skipping)
Java Home located in /opt/java/1.8.0_121/
+-- DUMPING JAVA HOME STRUCTURE ------------------------
| Java Home:       &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/java/1.8.0_121/&quot;&lt;/span&gt;
| Java VM Config.: &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/jvm.cfg&quot;&lt;/span&gt;
&lt;/span&gt;| Found JVMs:      1
| JVM Name:        &lt;span class=&quot;code-quote&quot;&gt;&quot;server&quot;&lt;/span&gt;
|                  &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/server/libjvm.so&quot;&lt;/span&gt;
&lt;/span&gt;+-------------------------------------------------------
Using &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; JVM in /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/server/libjvm.so
&lt;/span&gt;Invoking w/ LD_LIBRARY_PATH=/opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/server:/opt/java/1.8.0_121//lib/amd64
&lt;/span&gt;+-- DUMPING PARSED COMMAND LINE ARGUMENTS --------------
| Detach:          True
| Show Version:    No
| Show Help:       No
| Check Only:      Disabled
| Stop:            False
| Wait:            0
| Run as service:  No
| Install service: No
| Remove service:  No
| JVM Name:        &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;
| Java Home:       &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/java/1.8.0_121/&quot;&lt;/span&gt;
| PID File:        &lt;span class=&quot;code-quote&quot;&gt;&quot;/&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt;/run/jsvc.pid&quot;&lt;/span&gt;
| User Name:       &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;
| Extra Options:   1
|   &lt;span class=&quot;code-quote&quot;&gt;&quot;-verbose&quot;&lt;/span&gt;
| &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; Invoked:   &lt;span class=&quot;code-quote&quot;&gt;&quot;com.does.not.Matter&quot;&lt;/span&gt;
| &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; Arguments: 0
+-------------------------------------------------------
Attempting to locate Java Home in /opt/java/1.8.0_121/
Attempting to locate VM configuration file /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//jre/lib/jvm.cfg
&lt;/span&gt;Attempting to locate VM configuration file /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/jvm.cfg
&lt;/span&gt;Attempting to locate VM configuration file /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//jre/lib/amd64/jvm.cfg
&lt;/span&gt;Attempting to locate VM configuration file /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/jvm.cfg
&lt;/span&gt;Found VM configuration file at /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/jvm.cfg
&lt;/span&gt;Found VM server definition in configuration
Checking library /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//jre/lib/amd64/server/libjvm.so
&lt;/span&gt;Checking library /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/server/libjvm.so
&lt;/span&gt;Found VM client definition in configuration
Checking library /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//jre/lib/amd64/client/libjvm.so
&lt;/span&gt;Checking library /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/client/libjvm.so
&lt;/span&gt;Cannot locate library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; VM client (skipping)
Java Home located in /opt/java/1.8.0_121/
+-- DUMPING JAVA HOME STRUCTURE ------------------------
| Java Home:       &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/java/1.8.0_121/&quot;&lt;/span&gt;
| Java VM Config.: &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/jvm.cfg&quot;&lt;/span&gt;
&lt;/span&gt;| Found JVMs:      1
| JVM Name:        &lt;span class=&quot;code-quote&quot;&gt;&quot;server&quot;&lt;/span&gt;
|                  &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/server/libjvm.so&quot;&lt;/span&gt;
&lt;/span&gt;+-------------------------------------------------------
Running w/ LD_LIBRARY_PATH=/opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/server:/opt/java/1.8.0_121//lib/amd64
&lt;/span&gt;redirecting stdout to /dev/&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; and stderr to /dev/&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
Switching umask back to 077 from 077
[root@cyyz-00-bitch-001 nexus]# Using &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; JVM in /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/server/libjvm.so
&lt;/span&gt;Attemtping to load library /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/server/libjvm.so
&lt;/span&gt;JVM library /opt/java/1.8.0_121&lt;span class=&quot;code-comment&quot;&gt;//lib/amd64/server/libjvm.so loaded
&lt;/span&gt;JVM library entry point found (0xA4505D20)
+-- DUMPING JAVA VM CREATION ARGUMENTS -----------------
| Version:                       0x010004
| Ignore Unrecognized Arguments: False
| Extra options:                 1
|   &lt;span class=&quot;code-quote&quot;&gt;&quot;-verbose&quot;&lt;/span&gt; (0x00000000)
+-------------------------------------------------------
| Internal options:              4
|   &lt;span class=&quot;code-quote&quot;&gt;&quot;-Dcommons.daemon.process.id=4035&quot;&lt;/span&gt; (0x00000000)
|   &lt;span class=&quot;code-quote&quot;&gt;&quot;-Dcommons.daemon.process.parent=4034&quot;&lt;/span&gt; (0x00000000)
|   &lt;span class=&quot;code-quote&quot;&gt;&quot;-Dcommons.daemon.version=1.0.15-dev&quot;&lt;/span&gt; (0x00000000)
|   &lt;span class=&quot;code-quote&quot;&gt;&quot;abort&quot;&lt;/span&gt; (0x00405f80)
+-------------------------------------------------------
[Opened /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.io.Serializable from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.Comparable from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.CharSequence from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.reflect.AnnotatedElement from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.reflect.GenericDeclaration from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.reflect.Type from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Cloneable&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.Throwable from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.Error from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.ThreadDeath from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.Exception from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.RuntimeException from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;SecurityManager&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.security.ProtectionDomain from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.security.AccessControlContext from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.security.SecureClassLoader from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.ReflectiveOperationException from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.ClassNotFoundException from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.LinkageError from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.NoClassDefFoundError from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.ClassCastException from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.ArrayStoreException from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.VirtualMachineError from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.OutOfMemoryError from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.StackOverflowError from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.IllegalMonitorStateException from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.ref.Reference from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.ref.SoftReference from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.ref.WeakReference from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.ref.FinalReference from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.ref.PhantomReference from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.misc.Cleaner from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.ref.Finalizer from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;$UncaughtExceptionHandler from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;ThreadGroup&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.util.Map from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.util.Dictionary from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.util.Hashtable from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.util.Properties from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.reflect.AccessibleObject from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.reflect.Member from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.reflect.Field from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.reflect.Parameter from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.reflect.Executable from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.reflect.Method from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.reflect.Constructor from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.reflect.MagicAccessorImpl from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.reflect.MethodAccessor from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.reflect.MethodAccessorImpl from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.reflect.ConstructorAccessor from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.reflect.ConstructorAccessorImpl from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.reflect.DelegatingClassLoader from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.reflect.ConstantPool from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.reflect.FieldAccessor from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.reflect.FieldAccessorImpl from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.reflect.UnsafeFieldAccessorImpl from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.reflect.UnsafeStaticFieldAccessorImpl from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.annotation.Annotation from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.reflect.CallerSensitive from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.invoke.MethodHandle from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.invoke.DirectMethodHandle from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.invoke.MemberName from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.invoke.MethodHandleNatives from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.invoke.LambdaForm from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.invoke.MethodType from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.BootstrapMethodError from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.invoke.CallSite from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.invoke.ConstantCallSite from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.invoke.MutableCallSite from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.invoke.VolatileCallSite from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.Appendable from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.AbstractStringBuilder from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;StringBuffer&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.StringBuilder from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.misc.Unsafe from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.AutoCloseable from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.io.Closeable from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.io.InputStream from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.io.ByteArrayInputStream from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.io.File from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.net.URLClassLoader from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.net.URL from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.util.jar.Manifest from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.misc.Launcher from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.misc.Launcher$AppClassLoader from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded sun.misc.Launcher$ExtClassLoader from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.security.CodeSource from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.StackTraceElement from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.nio.Buffer from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Character&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Float&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Double&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Short&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.NullPointerException from /opt/java/1.8.0_121/lib/rt.jar]
[Loaded java.lang.ArithmeticException from /opt/java/1.8.0_121/lib/rt.jar]
#
# A fatal error has been detected by the Java &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Environment:
#
#  SIGBUS (0x7) at pc=0x00007f4494157bfc, pid=4035, tid=0x00007f44a57eb700
#
# JRE version:  (8.0_121-b13) (build )
# Java VM: Java HotSpot(TM) 64-Bit Server VM (25.121-b13 mixed mode linux-amd64 compressed oops)
# Problematic frame:
# j  java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.&amp;lt;clinit&amp;gt;()V+0
#
# Failed to write core dump. Core dumps have been disabled. To enable core dumping, &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;ulimit -c unlimited&quot;&lt;/span&gt; before starting Java again
#
# An error report file with more information is saved as:
# &lt;span class=&quot;code-comment&quot;&gt;//hs_err_pid4035.log
&lt;/span&gt;#
# If you would like to submit a bug report, please visit:
#   http:&lt;span class=&quot;code-comment&quot;&gt;//bugreport.java.com/bugreport/crash.jsp
&lt;/span&gt;#
Reloading service
Waiting 60 s to prevent looping
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The only way to resolve the issue is to pass the Java stack size argument &quot;-Xss2m&quot;.  The size must be at least 2m or higher to launch.&lt;/p&gt;

&lt;p&gt;Rolling back the latest kernel resolves the issue.&lt;/p&gt;

</description>
                <environment>&lt;p&gt;CentOS 6.9&lt;br/&gt;
Kernel: 2.6.32-696.3.2.el6.x86_64&lt;br/&gt;
Updated for CVE: CVE-2017-1000364&lt;/p&gt;

&lt;p&gt;JSVC compiled from latest source.&lt;/p&gt;

</environment>
        <key id="13081423">DAEMON-363</key>
            <summary>JSVC Fails to launch (SIGBUS 0x7) on Centos 6.9 Kernel 2.6.32-696.3.2.el6.x86_64</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="schenkd">Derek Schenk</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Jun 2017 13:17:42 +0000</created>
                <updated>Wed, 19 Jul 2017 01:29:30 +0000</updated>
                            <resolved>Fri, 23 Jun 2017 09:57:19 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="16057494" author="schenkd" created="Wed, 21 Jun 2017 13:19:52 +0000"  >&lt;p&gt;Attaching the crash log.&lt;/p&gt;</comment>
                            <comment id="16059219" author="neuhaus" created="Thu, 22 Jun 2017 11:38:37 +0000"  >&lt;p&gt;This issue also affects Debian 8.8 kernel 3.16.43-2+deb8u1&lt;/p&gt;

&lt;p&gt;Thanks for the workaround!&lt;/p&gt;

&lt;p&gt;Also &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-364&quot; title=&quot;Latest RHEL kernel update crashes jsvc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-364&quot;&gt;&lt;del&gt;DAEMON-364&lt;/del&gt;&lt;/a&gt; appears to be a duplicate of this issue.&lt;/p&gt;</comment>
                            <comment id="16059277" author="schenkd" created="Thu, 22 Jun 2017 12:34:09 +0000"  >&lt;p&gt;For reference the upstream kernel commit is :&lt;br/&gt;
&lt;a href=&quot;https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=1be7107fbe18eed3e319a6c3e83c78254b693acb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=1be7107fbe18eed3e319a6c3e83c78254b693acb&lt;/a&gt;&lt;br/&gt;
I suspect as more people apply this kernel update the number of people affected will increase.&lt;/p&gt;</comment>
                            <comment id="16060551" author="fnie" created="Fri, 23 Jun 2017 08:09:31 +0000"  >&lt;p&gt;thank you Derek,we just meet this error on jdk 1.7, and how do you find 2M number ?&lt;/p&gt;</comment>
                            <comment id="16060663" author="markt" created="Fri, 23 Jun 2017 09:57:19 +0000"  >&lt;p&gt;See the duplicate for some references that explain further.&lt;/p&gt;</comment>
                            <comment id="16060779" author="schenkd" created="Fri, 23 Jun 2017 11:52:45 +0000"  >&lt;p&gt;There is an issue with the kernel update that is being worked on.  This patch is not upstream yet.  At the moment I would suggest avoiding this update, or if you have already installed it use the JVM stack size workaround.&lt;/p&gt;

&lt;p&gt;As noted in the attached ticket -Xss1280k will work, and is closer to the default 1024k value.  &lt;/p&gt;

&lt;p&gt;Nie: I determined the 2m value via trial and error.  In most cases the default appears to be 1024k, so the closest working value to this number is your safest option.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;From 5a3d0bf0a4660bad63455830225c212ef6869392 Mon Sep 17 00:00:00 2001 
From: Michal Hocko &amp;lt;mhocko@suse.com&amp;gt; 
Date: Thu, 22 Jun 2017 13:27:30 +0200 
Subject: [PATCH] mm, mmap: &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not blow on PROT_NONE MAP_FIXED holes in the 
stack 

&lt;span class=&quot;code-quote&quot;&gt;&quot;mm: enlarge stack guard gap&quot;&lt;/span&gt; has introduced a regression in some JVM 
environments which are trying to implement their own stack guard page. 
hey are punching a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MAP_FIXED mapping inside the existing stack 
vma: 
(gdb) bt 
#0 0xf7fd9f89 in __kernel_vsyscall () 
#1 0xf7454508 in mmap () from /lib/libc.so.6 
#2 0xf7a51cdb in os::commit_memory(&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;*, unsigned &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, bool) () from /opt/novell/groupwise/client/java/lib/i386/client/libjvm.so 
#3 0xf7afd1be in JavaThread::create_stack_guard_pages() () from /opt/novell/groupwise/client/java/lib/i386/client/libjvm.so 
#4 0xf7afedd3 in Threads::create_vm(JavaVMInitArgs*, bool*) () from /opt/novell/groupwise/client/java/lib/i386/client/libjvm.so 
#5 0xf7960566 in JNI_CreateJavaVM () from /opt/novell/groupwise/client/java/lib/i386/client/libjvm.so 
#6 0x08048dc3 in LaunchJavaVm (argc=0, argv=0xffffd528, szPathToClientDir=0xffffd068 &lt;span class=&quot;code-quote&quot;&gt;&quot;/opt/novell/groupwise/client&quot;&lt;/span&gt;) at grpwisex.cpp:380 
#7 0x080497a3 in main (argc=1, argv=0xffffd524) at grpwisex.cpp:473 

This will confuse expandable_stack_area into thinking that the stack 
expansion would in fact get us too close to an existing non-stack vma 
which is a correct behavior wrt. safety. It is a real regression on 
the other hand. Let&apos;s work around the problem by considering PROT_NONE 
mapping as a part of the stack. This is a gros hack but overflowing to 
such a mapping would trap anyway an we only can hope that usespace 
knows what it is doing and handle it propely. 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16061302" author="rideallday" created="Fri, 23 Jun 2017 17:53:51 +0000"  >&lt;p&gt;Thanks Derek. Do you know if there a bugzilla or pull request associated with the message that you quoted above? I&apos;d like to have an idea whether to apply the work-around or wait for a fresh kernel.&lt;/p&gt;</comment>
                            <comment id="16061369" author="schenkd" created="Fri, 23 Jun 2017 18:48:01 +0000"  >&lt;p&gt;Nic - I received the patch directly, and I don&apos;t believe that it&apos;s been posted upstream yet.  I was able to apply the patch &amp;amp; recompile the kernel and can confirm that it does fix the issue.  &lt;/p&gt;

&lt;p&gt;At the moment I have no idea when this will get posted, and when it will get rolled out.  I&apos;m in the same position, as I have a few hundred affected machines and need to decide between custom kernel or this workaround.&lt;/p&gt;</comment>
                            <comment id="16069796" author="youmanzou" created="Fri, 30 Jun 2017 09:45:22 +0000"  >&lt;p&gt;Hi Derek,&lt;/p&gt;

&lt;p&gt;Do you have an idea about the solution that the patch implements?&lt;/p&gt;

&lt;p&gt;In fact, I dont&apos; know how the problem could be resolved since the CVE-2017-1000364 increases the stack guard gap size from one page to 1M, to limit the security flaw.  Will the kernel deal with the jsvc as an exception to allow less than 1M memory allocation?&lt;/p&gt;


</comment>
                            <comment id="16069809" author="neuhaus" created="Fri, 30 Jun 2017 09:51:48 +0000"  >&lt;p&gt;As far as Ubuntu 16.04 LTS is concerned, this kernel regression was apparently addressed by &lt;a href=&quot;https://www.ubuntu.com/usn/usn-3344-1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;USN-3344-1&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Quote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&quot;USN 3328-1 fixed a vulnerability in the Linux kernel. However, that fix introduced regressions for some Java applications. This update addresses the issue. We apologize for the inconvenience.&quot;&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="16092452" author="vrathor-hw" created="Wed, 19 Jul 2017 01:29:30 +0000"  >&lt;p&gt;Folks,&lt;br/&gt;
Looks like RedHat has addressed this as well via BugZilla#1466667 &lt;a href=&quot;https://bugzilla.redhat.com/show_bug.cgi?id=1466667&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugzilla.redhat.com/show_bug.cgi?id=1466667&lt;/a&gt;. This has been referred in &lt;a href=&quot;https://rhn.redhat.com/errata/RHSA-2017-1723.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://rhn.redhat.com/errata/RHSA-2017-1723.html&lt;/a&gt; :&lt;/p&gt;
&lt;blockquote&gt;&lt;ul&gt;
	&lt;li&gt;When upgrading to kernel with the fix for stack guard flaw, a crash could&lt;br/&gt;
occur in Java Virtual Machine (JVM) environments, which attempted to implement&lt;br/&gt;
their own stack guard page. With this update, the underlying source code has&lt;br/&gt;
been fixed to consider the PROT_NONE mapping as a part of the stack, and the&lt;br/&gt;
crash in JVM no longer occurs under the described circumstances. (BZ#1466667)&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;Although I couldn&apos;t access the said BugZilla, but we have successfully upgraded to this patched kernel on RHEL7 (3.10.0-514.26.2.el7.x86_64) and RHEL6 (2.6.32-696.6.3.el6.x86_64). After upgrade, jsvc process found to be running fine without any further issues.&lt;/p&gt;

&lt;p&gt;Hope this helps.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13081684">DAEMON-365</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13081557">DAEMON-364</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12873870" name="hs_err_pid4035.log" size="26035" author="schenkd" created="Wed, 21 Jun 2017 13:19:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gjov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-362] CLONE - Windows service fails to stop with error code 1053 (using Windows 7 service manager)</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-362</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Using Windows services manager (services.msc) to start/stop service.&lt;br/&gt;
Service installed with the following start/stop settings.&lt;br/&gt;
#service parameters&lt;br/&gt;
service.class=com.myserver.launcher.tomcat.Tomcat8Service&lt;br/&gt;
service.id=myappservice&lt;br/&gt;
service.startup=auto&lt;br/&gt;
service.name=myappservice&lt;br/&gt;
service.description=my app service&lt;/p&gt;

&lt;p&gt;Service starts OK.&lt;/p&gt;

&lt;p&gt;When I use services manager to stop the service, the application stops running but the my service is not getting terminates (myappserver.exe) process does not terminate.&lt;br/&gt;
Eventually the services manager reports that:&lt;br/&gt;
&quot;Windows could not stop the &amp;lt;MyServiceName&amp;gt; service on Local Computer.  Error 1053: The service did not respond to the start or control request in a timely fashion.&quot;&lt;/p&gt;

&lt;p&gt;The service then stays at status &quot;stopping&quot; &amp;amp; cannot be stopped &lt;/p&gt;

&lt;p&gt;Looking at the application logs I can see that the application&apos;s stop() method gets called -&lt;/p&gt;


&lt;p&gt;com.myserver.launcher.tomcat.Tomcat8Service.java   extends the WinRun4j --&amp;gt; AbstractService.java&lt;/p&gt;

&lt;p&gt;We have our own tomcat-launcher which internally invokes the org.apache.catalina.startup.Bootstrap.stop() method to stop the tomcat.  However it is not able to kill the myappserver.exe process. . &lt;/p&gt;


&lt;p&gt;Any pointer would really helpful.&lt;/p&gt;


</description>
                <environment>&lt;p&gt;Any windows OS 64 bit &lt;br/&gt;
JRE 1.8&lt;br/&gt;
WinRun4J for making tomcat as a windows service&lt;br/&gt;
Tomcat 8.5.8 version&lt;/p&gt;</environment>
        <key id="13081344">DAEMON-362</key>
            <summary>CLONE - Windows service fails to stop with error code 1053 (using Windows 7 service manager)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="gchauvet">Guillaume Chauvet</assignee>
                                    <reporter username="raghavaraju.k">Raghavaraju Kudari</reporter>
                        <labels>
                            <label>prunsrv</label>
                            <label>stop</label>
                            <label>windows</label>
                    </labels>
                <created>Wed, 21 Jun 2017 08:01:30 +0000</created>
                <updated>Wed, 21 Jun 2017 08:14:59 +0000</updated>
                            <resolved>Wed, 21 Jun 2017 08:14:59 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16057155" author="markt" created="Wed, 21 Jun 2017 08:14:59 +0000"  >&lt;p&gt;WinRun4J is not associated with Commons Daemon. You should use the appropriate support mechanism for that software.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12646828">DAEMON-298</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gj7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-361] Windows service fails to stop with error code 1053 (using Windows service manager)</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-361</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;We are using windows service to start and stop our application.&lt;br/&gt;
It is starting but not stopping and giving &quot;&lt;font color=&quot;red&quot;&gt;Error 1053 : &quot;The service did not respond to start or control request in a timely fashion&lt;/font&gt;&quot; &lt;/p&gt;

&lt;p&gt;To create windows service entry we used WinRun4J API and using catalina.jar startup classes&lt;br/&gt;
(org.apache.catalina.startup.Bootstrap) to perform this operation.&lt;/p&gt;

&lt;p&gt;It was worked earlier when we used tomcat 7 and started facing the issue after we upgraded to tomcat 8.5&lt;/p&gt;</description>
                <environment>&lt;p&gt;windows 7/8/10&lt;/p&gt;</environment>
        <key id="13081128">DAEMON-361</key>
            <summary>Windows service fails to stop with error code 1053 (using Windows service manager)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="raghavaraju.k">Raghavaraju Kudari</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Jun 2017 13:10:59 +0000</created>
                <updated>Tue, 14 Nov 2017 14:25:35 +0000</updated>
                            <resolved>Tue, 14 Nov 2017 14:25:35 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16055723" author="raghavaraju.k" created="Tue, 20 Jun 2017 13:12:58 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;^error.png&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16056684" author="b.eckenfels" created="Tue, 20 Jun 2017 23:49:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;To create windows service entry we used WinRun4J API &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;How is that related to Apache Commons Daemon?`It looks like it is not using any Apache classes &lt;a href=&quot;https://github.com/poidasmith/winrun4j/search?utf8=%E2%9C%93&amp;amp;q=apache&amp;amp;type=&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/poidasmith/winrun4j/search?utf8=%E2%9C%93&amp;amp;q=apache&amp;amp;type=&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16056914" author="raghavaraju.k" created="Wed, 21 Jun 2017 03:23:43 +0000"  >&lt;p&gt;Hi Bernd,&lt;/p&gt;

&lt;p&gt;Thanks for the response. &lt;br/&gt;
But issue is not with WinRun4J. I just specified that to explain the issue, which we are facing. We are using &quot;catalina.jar&quot; startup API which resides in tomcat application, to start and stop tomcat server . The issue is very much similar to  &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-298&quot; title=&quot;Windows service fails to stop with error code 1053 (using Windows 7 service manager)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-298&quot;&gt;&lt;del&gt;DAEMON-298&lt;/del&gt;&lt;/a&gt;. If this is wrong place to create this ticket, please let us know where we can place this issue?&lt;/p&gt;</comment>
                            <comment id="16056989" author="b.eckenfels" created="Wed, 21 Jun 2017 04:50:45 +0000"  >&lt;p&gt;Tomcat implements its own service methods in the Bootstrap class without the Apache Commons Daemon classes, so getting help and potentially opening a bug report should happen there: &lt;a href=&quot;http://tomcat.apache.org/bugreport.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tomcat.apache.org/bugreport.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16072418" author="raghavaraju.k" created="Mon, 3 Jul 2017 13:13:28 +0000"  >&lt;p&gt;Hi &lt;/p&gt;

&lt;p&gt;Thanks for the Response.&lt;/p&gt;

&lt;p&gt;Yes. Tomcat Bootstrap.java  is successfully stopping the tomcat  by sending OS signal. So it is stopped and even the associated process &quot;myappserver.exe&quot; got killed. However in windows Services  I am seeing an Alert  as mentioned below &lt;/p&gt;

&lt;p&gt;Windows Could not stop the &quot;myappserver service&quot; service on Local Computer.  &lt;/p&gt;

&lt;p&gt;Error 1 : Incorrect function.&lt;/p&gt;

&lt;p&gt;Attached screen shot.&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
Veeru&lt;/p&gt;
</comment>
                            <comment id="16073505" author="b.eckenfels" created="Tue, 4 Jul 2017 11:29:17 +0000"  >&lt;p&gt;First of all &quot;Incorrect Function&quot; is yet another issue, so you would need to open a new bug. And you need to provide us with the debug level logfile (if this Bug is about Apache Commons Daemon at all - initially you talked about WinRun4J).&lt;/p&gt;</comment>
                            <comment id="16073611" author="raghavaraju.k" created="Tue, 4 Jul 2017 12:46:33 +0000"  >&lt;p&gt;fixed this issue.  By invoking system.exit(0)  instead of System.exit(1) in catalina.class in catalina.jar&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12646828">DAEMON-298</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12875619" name="errormessage_winservices.png" size="29392" author="raghavaraju.k" created="Tue, 4 Jul 2017 11:24:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ghvb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-360] Service creation failed with message &quot;The data area passed to a system call is too small&quot;</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-360</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Trying to create a service using my java program. My code is executing fine and its doing what is supposed to do, but at last prunsrv fail with message &quot;The data area passed to a system call is too small&quot;. Below is the log that I collected,&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2017-06-10 11:46:09] [debug] ( prunsrv.c:1679) [ 9528] Commons Daemon procrun log initialized
[2017-06-10 11:46:09] [info]  ( prunsrv.c:1683) [ 9528] Commons Daemon procrun (1.0.15.0 64-bit) started
[2017-06-10 11:46:09] [debug] ( prunsrv.c:561 ) [ 9528] Installing service...
[2017-06-10 11:46:09] [info]  ( prunsrv.c:600 ) [ 9528] Service Test name Test
[2017-06-10 11:46:09] [info]  ( prunsrv.c:634 ) [ 9528] Service &apos;Test&apos; installed
[2017-06-10 11:46:09] [info]  ( prunsrv.c:1764) [ 9528] Commons Daemon procrun finished
[2017-06-10 11:46:27] [debug] ( prunsrv.c:1679) [10468] Commons Daemon procrun log initialized
[2017-06-10 11:46:27] [info]  ( prunsrv.c:1683) [10468] Commons Daemon procrun (1.0.15.0 64-bit) started
[2017-06-10 11:46:27] [info]  ( prunsrv.c:725 ) [10468] Starting service &apos;Test&apos; ...
[2017-06-10 11:46:27] [warn]  ( service.c:140 ) [10468] Failed to obtain service description
[2017-06-10 11:46:27] [debug] ( prunsrv.c:1679) [11128] Commons Daemon procrun log initialized
[2017-06-10 11:46:27] [info]  ( prunsrv.c:1683) [11128] Commons Daemon procrun (1.0.15.0 64-bit) started
[2017-06-10 11:46:27] [info]  ( prunsrv.c:1596) [11128] Running &apos;Test&apos; Service...
[2017-06-10 11:46:27] [debug] ( prunsrv.c:1374) [ 7236] Inside ServiceMain...
[2017-06-10 11:46:27] [debug] ( prunsrv.c:844 ) [ 7236] reportServiceStatusE: 2, 0, 3000, 0
[2017-06-10 11:46:27] [info]  ( prunsrv.c:1127) [ 7236] Starting service...
[2017-06-10 11:46:27] [debug] ( javajni.c:233 ) [ 7236] loading jvm &apos;C:\Program Files\Java\jdk1.8.0_121\jre\bin\server\jvm.dll&apos;
[2017-06-10 11:46:27] [debug] ( javajni.c:704 ) [ 9968] Jvm Option[0] -Djava.class.path=C:\abc\Test\bin\TestServiceWrapper.jar
[2017-06-10 11:46:27] [debug] ( javajni.c:704 ) [ 9968] Jvm Option[1] exit
[2017-06-10 11:46:27] [debug] ( javajni.c:941 ) [ 9968] Java Worker thread started com/company/Test/service/WindowsServiceWrapper:start
[2017-06-10 11:46:27] [debug] ( javajni.c:964 ) [ 9968] Java Worker thread finished com/company/Test/service/WindowsServiceWrapper:start with status=0
[2017-06-10 11:46:28] [debug] ( prunsrv.c:1186) [ 7236] Java started com/company/Test/service/WindowsServiceWrapper
[2017-06-10 11:46:28] [info]  ( prunsrv.c:1284) [ 7236] Service started in 1107 ms.
[2017-06-10 11:46:28] [debug] ( prunsrv.c:844 ) [ 7236] reportServiceStatusE: 4, 0, 0, 0
[2017-06-10 11:46:28] [debug] ( prunsrv.c:1528) [ 7236] Waiting for worker to finish...
[2017-06-10 11:46:28] [debug] ( prunsrv.c:1533) [ 7236] Worker finished.
[2017-06-10 11:46:28] [debug] ( prunsrv.c:1559) [ 7236] Waiting for all threads to exit
[2017-06-10 11:46:28] [debug] ( prunsrv.c:844 ) [ 7236] reportServiceStatusE: 3, 0, 0, 0
[2017-06-10 11:46:28] [debug] ( prunsrv.c:1563) [ 7236] JVM destroyed.
[2017-06-10 11:46:28] [debug] ( prunsrv.c:844 ) [ 7236] reportServiceStatusE: 1, 0, 0, 0
[2017-06-10 11:46:28] [info]  ( prunsrv.c:1598) [11128] Run service finished.
[2017-06-10 11:46:28] [info]  ( prunsrv.c:1764) [11128] Commons Daemon procrun finished
[2017-06-10 11:46:30] [error] ( prunsrv.c:746 ) [10468] Failed to start &apos;Test&apos; service
[2017-06-10 11:46:30] [error] ( prunsrv.c:746 ) [10468] The data area passed to a system call is too small.
[2017-06-10 11:46:30] [info]  ( prunsrv.c:754 ) [10468] Start service finished.
[2017-06-10 11:46:30] [error] ( prunsrv.c:1755) [10468] Commons Daemon procrun failed with exit value: 5 (Failed to start service)
[2017-06-10 11:46:30] [error] ( prunsrv.c:1755) [10468] The data area passed to a system call is too small.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Windows 7 64 bit&lt;/p&gt;</environment>
        <key id="13078906">DAEMON-360</key>
            <summary>Service creation failed with message &quot;The data area passed to a system call is too small&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="soumeny2k">Soumen Choudhury</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Jun 2017 23:50:04 +0000</created>
                <updated>Tue, 4 Jul 2017 08:49:00 +0000</updated>
                            <resolved>Tue, 4 Jul 2017 08:49:00 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16045807" author="kinow" created="Sun, 11 Jun 2017 04:32:55 +0000"  >&lt;p&gt;Not using Windows at the moment, and unfortunately do not have a box to test and reproduce it.&lt;/p&gt;

&lt;p&gt;But some quick searching led me to this &lt;a href=&quot;http://www.tomshardware.com/forum/id-2775794/data-area-passed-system-call-small.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;post from 2015 in Tom&apos;s Hardware forums&lt;/a&gt;, which contains links to three support articles in Microsoft for that.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://support.microsoft.com/en-us/help/249721/error-message-data-area-passed-to-a-system-call-is-too-small.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;249721 Error Message: Data Area Passed to a System Call Is Too Small.&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://support.microsoft.com/en-us/help/273023/error-message-the-data-area-passed-to-a-system-call-is-too-small&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;273023 Error Message: The Data Area Passed to a System Call Is Too Small&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://support.microsoft.com/en-us/help/810065/fix-the-data-area-passed-to-a-system-call-is-too-small-error-message-is-logged-when-you-call-the-createex-method-at-the-same-time-in-a-multiple-thread-application-that-uses-the-virtual-device-interface-feature-of-sql-server-2000&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;810065 FIX: The &quot;Data area passed to a system call is too small&quot; error message is logged when you call the CreateEx method at the same time in a multiple-thread application that uses the Virtual Device Interface feature of SQL Server 2000&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;These three articles seem to have a solution involving changing settings in Windows, or Windows utilities. I think this issue has no simple solution in the library code. Will leave it open for a while to see what others think too.&lt;/p&gt;

&lt;p&gt;Cheers&lt;br/&gt;
Bruno&lt;/p&gt;</comment>
                            <comment id="16046140" author="sebb@apache.org" created="Sun, 11 Jun 2017 22:07:24 +0000"  >&lt;p&gt;That was fixed in 1.0.16 - have you tried that?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12634801">DAEMON-282</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12681763">DAEMON-311</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12634801">DAEMON-282</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 20 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g513:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-359] Control characters messed up with SYSLOG output</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-359</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Using the &lt;tt&gt;-outfile SYSLOG&lt;/tt&gt; option, on CentOS 6 I get this kind of output in &lt;tt&gt;/var/log/messages&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Feb  9 11:21:43 localhost mydaemon[16262]: [INFO ] mydaemon is initialized.#012[INFO ] mydaemon is starting...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;=&amp;gt; Several log lines are concatenated.&lt;/p&gt;

&lt;p&gt;It looks like &lt;tt&gt;#012&lt;/tt&gt; is the line return character. I also have &lt;tt&gt;#011&lt;/tt&gt; instead of tabs.&lt;/p&gt;

&lt;p&gt;My application uses SLF4J+Logback, with default console appender.&lt;/p&gt;</description>
                <environment>&lt;p&gt;CentOS 6.8 (virtual machine, all defaults)&lt;br/&gt;
jsvc 1.0.15&lt;/p&gt;</environment>
        <key id="13041707">DAEMON-359</key>
            <summary>Control characters messed up with SYSLOG output</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nicoulaj">Julien Nicoulaud</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 13:43:08 +0000</created>
                <updated>Mon, 30 Oct 2017 14:27:23 +0000</updated>
                            <resolved>Mon, 30 Oct 2017 14:27:23 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16225031" author="markt" created="Mon, 30 Oct 2017 14:27:23 +0000"  >&lt;p&gt;The escaping is happening in syslog and can be controlled via configuration. I suspect you are seeing the results of the logging framework buffering several messages and then flushing them.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39uj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-358] PPC64: jsvc fails to find JVM jvm.cfg file and shared objects due to wrong path</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-358</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;On ppc64 and ppc64le archs jsvc looks for jvm.cfg and JVM shared objects in the wrong path. Be it used with IBM Java or OpenJDK (where the problem was first encountered), there is no dir called power64 or power64le. Instead ppc64 and ppc64le are used. In doing so, it fails with &quot;Cannot find any VM in Java Home&quot;&lt;/p&gt;

&lt;p&gt;Contact Information = gromero@br.ibm.com &lt;/p&gt;

&lt;p&gt;uname output:&lt;br/&gt;
Linux gromero18 3.10.0-505.el7.ppc64le #1 SMP Tue Sep 6 11:09:32 EDT 2016 ppc64le ppc64le ppc64le GNU/Linux&lt;/p&gt;

&lt;p&gt;Machine Type = pKVM &lt;/p&gt;

&lt;p&gt;Debugger:&lt;br/&gt;
A debugger is not configured&lt;/p&gt;

&lt;p&gt;Steps to Reproduce:&lt;br/&gt;
 yum install apache-commons-daemon-jsvc&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;cat MyClass.java&lt;br/&gt;
public class MyClass {&lt;br/&gt;
  public void init(String[] args) 
{
    System.out.println(&quot;Init...&quot;);
  }&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;  public void start() &lt;/p&gt;
{
    System.out.println(&quot;Start...&quot;);
  }

&lt;p&gt;  public void stop() &lt;/p&gt;
{
    System.out.println(&quot;Stop...&quot;);
  }

&lt;p&gt;  public void destroy() &lt;/p&gt;
{
    System.out.println(&quot;Destroy...&quot;);
  }
&lt;p&gt;}&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;javac MyClass.java&lt;/li&gt;
	&lt;li&gt;jar cvf my.jar MyClass.class&lt;/li&gt;
	&lt;li&gt;/bin/jsvc -debug -user root -java-home /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-2.b15.el7_3.ppc64le -cp /usr/share/java/apache-commons-daemon.jar:/root/my.jar MyClass -start&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Then:&lt;br/&gt;
Attempting to locate Java Home in /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-2.b15.el7_3.ppc64le&lt;br/&gt;
Attempting to locate VM configuration file /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-2.b15.el7_3.ppc64le/jre/lib/jvm.cfg&lt;br/&gt;
Attempting to locate VM configuration file /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-2.b15.el7_3.ppc64le/lib/jvm.cfg&lt;br/&gt;
Attempting to locate VM configuration file /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-2.b15.el7_3.ppc64le/jre/lib/powerpc64le/jvm.cfg&lt;br/&gt;
Attempting to locate VM configuration file /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-2.b15.el7_3.ppc64le/lib/powerpc64le/jvm.cfg&lt;br/&gt;
VM configuration file not found&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;Java Version: openjdk version &quot;1.8.0_111&quot; OpenJDK Runtime Environment (build 1.8.0_111-b15) OpenJDK 64-Bit Server VM (build 25.111-b15, mixed mode)&lt;/p&gt;

&lt;p&gt;Userspace rpm:&lt;br/&gt;
apache-commons-daemon-jsvc-1.0.13-6.el7.ppc64le.rpm&lt;/p&gt;

&lt;p&gt;The userspace tool has the following bit modes: 64-bit&lt;/p&gt;</description>
                <environment></environment>
        <key id="13022926">DAEMON-358</key>
            <summary>PPC64: jsvc fails to find JVM jvm.cfg file and shared objects due to wrong path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gromero">Gustavo Romero</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Nov 2016 16:57:34 +0000</created>
                <updated>Thu, 23 Nov 2017 09:48:26 +0000</updated>
                            <resolved>Mon, 28 Nov 2016 15:03:12 +0000</resolved>
                                    <version>1.0.13</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="2700">0.75h</timeoriginalestimate>
                            <timeestimate seconds="2700">0.75h</timeestimate>
                                        <comments>
                            <comment id="15690744" author="gromero" created="Wed, 23 Nov 2016 17:08:54 +0000"  >&lt;p&gt;Set correct path names for PPC64 BE and LE archs&lt;/p&gt;</comment>
                            <comment id="15690748" author="gromero" created="Wed, 23 Nov 2016 17:09:58 +0000"  >&lt;p&gt;Dear developer, please consider applying the patch provided above to fix the issue here described. Thank you.&lt;/p&gt;</comment>
                            <comment id="15691149" author="markt" created="Wed, 23 Nov 2016 19:32:52 +0000"  >&lt;p&gt;As well as being a duplicate, the proposed patch is wrong since it attempts to patch a generated file.&lt;/p&gt;</comment>
                            <comment id="15694167" author="gromero" created="Thu, 24 Nov 2016 20:35:53 +0000"  >&lt;p&gt;Indicated fix already mergerd in trunk does not resolve the issue&lt;/p&gt;</comment>
                            <comment id="15694172" author="gromero" created="Thu, 24 Nov 2016 20:39:39 +0000"  >&lt;p&gt;Hi Mark,&lt;/p&gt;

&lt;p&gt;I just compiled the trunk HEAD (which contains the fix you pointed out):&lt;/p&gt;

&lt;p&gt;Path: unix&lt;br/&gt;
URL: &lt;a href=&quot;http://svn.apache.org/repos/asf/commons/proper/daemon/trunk/src/native/unix&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/commons/proper/daemon/trunk/src/native/unix&lt;/a&gt;&lt;br/&gt;
Relative URL: ^/commons/proper/daemon/trunk/src/native/unix&lt;br/&gt;
Repository Root: &lt;a href=&quot;http://svn.apache.org/repos/asf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf&lt;/a&gt;&lt;br/&gt;
Repository UUID: 13f79535-47bb-0310-9956-ffa450edef68&lt;br/&gt;
Revision: 1771220&lt;br/&gt;
Node Kind: directory&lt;br/&gt;
Last Changed Author: markt&lt;br/&gt;
Last Changed Rev: 1768609&lt;br/&gt;
Last Changed Date: 2016-11-07 18:23:18 -0500 (Mon, 07 Nov 2016)&lt;/p&gt;

&lt;p&gt;but the path is not correct also there:&lt;/p&gt;

&lt;p&gt;$ ./jsvc -debug -user gromero -java-home /usr/lib/jvm/java-1.8.0-openjdk-ppc64el -cp /usr/share/java/apache-commons-daemon.jar:/root/my.jar MyClass -start&lt;br/&gt;
+-- DUMPING PARSED COMMAND LINE ARGUMENTS --------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Detach:          True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Show Version:    No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Show Help:       No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Check Only:      Disabled&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Stop:            False&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Wait:            0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Run as service:  No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Install service: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Remove service:  No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JVM Name:        &quot;null&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Java Home:       &quot;/usr/lib/jvm/java-1.8.0-openjdk-ppc64el&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; PID File:        &quot;/var/run/jsvc.pid&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; User Name:       &quot;gromero&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Extra Options:   1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Djava.class.path=/usr/share/java/apache-commons-daemon.jar:/root/my.jar&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Class Invoked:   &quot;MyClass&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Class Arguments: 1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-start&quot;&lt;br/&gt;
+-------------------------------------------------------&lt;br/&gt;
Cannot set supplement group list for user &apos;gromero&apos;&lt;br/&gt;
No need to change user to &apos;gromero&apos;!&lt;br/&gt;
User &apos;gromero&apos; validated&lt;br/&gt;
Attempting to locate Java Home in /usr/lib/jvm/java-1.8.0-openjdk-ppc64el&lt;br/&gt;
Attempting to locate VM configuration file /usr/lib/jvm/java-1.8.0-openjdk-ppc64el/jre/lib/jvm.cfg&lt;br/&gt;
Attempting to locate VM configuration file /usr/lib/jvm/java-1.8.0-openjdk-ppc64el/lib/jvm.cfg&lt;br/&gt;
Attempting to locate VM configuration file /usr/lib/jvm/java-1.8.0-openjdk-ppc64el/jre/lib/powerpc64le/jvm.cfg&lt;br/&gt;
Attempting to locate VM configuration file /usr/lib/jvm/java-1.8.0-openjdk-ppc64el/lib/powerpc64le/jvm.cfg&lt;br/&gt;
VM configuration file not found&lt;br/&gt;
Attempting to locate VM library /usr/lib/jvm/java-1.8.0-openjdk-ppc64el/jre/lib/powerpc64le/classic/libjvm.so&lt;br/&gt;
Attempting to locate VM library /usr/lib/jvm/java-1.8.0-openjdk-ppc64el/jre/lib/powerpc64le/server/libjvm.so&lt;br/&gt;
Attempting to locate VM library /usr/lib/jvm/java-1.8.0-openjdk-ppc64el/jre/lib/powerpc64le/client/libjvm.so&lt;br/&gt;
Attempting to locate VM library /usr/lib/jvm/java-1.8.0-openjdk-ppc64el/jre/lib/powerpc64le/libjvm.so&lt;br/&gt;
...&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;So it&apos;s still looking for $JAVA_HOME/*/powerpc64le which is wrong.&lt;/p&gt;

&lt;p&gt;Could you please verify that again?&lt;/p&gt;

&lt;p&gt;I can test it on a Power machine if it makes sense for you.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="15702166" author="markt" created="Mon, 28 Nov 2016 15:03:13 +0000"  >&lt;p&gt;Should be fixed now. I don;t have access to that architecture for testing so if you can confirm the fix, that would be helpful.&lt;/p&gt;</comment>
                            <comment id="15702725" author="gromero" created="Mon, 28 Nov 2016 18:28:51 +0000"  >&lt;p&gt;Thank you very much for fixing that.&lt;/p&gt;

&lt;p&gt;It works now.&lt;/p&gt;

&lt;p&gt;I&apos;ve tested on:&lt;/p&gt;

&lt;p&gt;Ubuntu 16.04 + OpenJDK 8 (which supports only PPC64 LE):&lt;br/&gt;
$ java -version&lt;br/&gt;
openjdk version &quot;1.8.0_111&quot;&lt;br/&gt;
OpenJDK Runtime Environment (build 1.8.0_111-8u111-b14-2ubuntu0.16.04.2-b14)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 25.111-b14, mixed mode)&lt;/p&gt;

&lt;p&gt;RHEL 7.3 + IBM Java 8 (PPC64 LE):&lt;br/&gt;
$ java -version&lt;br/&gt;
java version &quot;1.8.0&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pxl6480sr3fp20-20161019_02(SR3 FP20))&lt;br/&gt;
IBM J9 VM (build 2.8, JRE 1.8.0 Linux ppc64le-64 Compressed References 20161013_322271 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - R28_Java8_SR3_20161013_1635_B322271&lt;br/&gt;
JIT  - tr.r14.java.green_20161011_125790&lt;br/&gt;
GC   - R28_Java8_SR3_20161013_1635_B322271_CMPRSS&lt;br/&gt;
J9CL - 20161013_322271)&lt;br/&gt;
JCL - 20161018_01 based on Oracle jdk8u111-b14&lt;/p&gt;

&lt;p&gt;RHEL 7.3 + OpenJDK 8 (PPC64 LE):&lt;br/&gt;
$ java -version&lt;br/&gt;
openjdk version &quot;1.8.0_111&quot;&lt;br/&gt;
OpenJDK Runtime Environment (build 1.8.0_111-b15)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 25.111-b15, mixed mode)&lt;/p&gt;

&lt;p&gt;RHEL 7.3 + IBM Java 8 (PPC64 BE):&lt;br/&gt;
$ java -version&lt;br/&gt;
java version &quot;1.8.0&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build pxp6480sr3fp20-20161019_02(SR3 FP20))&lt;br/&gt;
IBM J9 VM (build 2.8, JRE 1.8.0 Linux ppc64-64 Compressed References 20161013_322271 (JIT enabled, AOT enabled)&lt;br/&gt;
J9VM - R28_Java8_SR3_20161013_1635_B322271&lt;br/&gt;
JIT  - tr.r14.java.green_20161011_125790&lt;br/&gt;
GC   - R28_Java8_SR3_20161013_1635_B322271_CMPRSS&lt;br/&gt;
J9CL - 20161013_322271)&lt;br/&gt;
JCL - 20161018_01 based on Oracle jdk8u111-b14&lt;/p&gt;

&lt;p&gt;RHEL 7.3 + OpenJDK 8 (PPC64 BE):&lt;br/&gt;
$ java -version&lt;br/&gt;
openjdk version &quot;1.8.0_111&quot;&lt;br/&gt;
OpenJDK Runtime Environment (build 1.8.0_111-b15)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 25.111-b15, mixed mode)&lt;/p&gt;

&lt;p&gt;AFAICS Java level 7 and future 9 will work as well.&lt;/p&gt;</comment>
                            <comment id="15702729" author="gromero" created="Mon, 28 Nov 2016 18:29:52 +0000"  >&lt;p&gt;Fixed&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12933351">DAEMON-343</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12840281" name="jvsc-ppc64.patch" size="1244" author="gromero" created="Wed, 23 Nov 2016 17:08:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36pf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-355] the process created by jsvc can&apos;t read some os file like /proc/[pid]/io</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-355</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I started hadoop hdfs with jsvc by root.&lt;br/&gt;
command is:&lt;br/&gt;
          exec &quot;$JSVC&quot; \&lt;br/&gt;
           -Dproc_$COMMAND -outfile &quot;$JSVC_OUTFILE&quot; \&lt;br/&gt;
           -errfile &quot;$JSVC_ERRFILE&quot; \&lt;br/&gt;
           -pidfile &quot;$HADOOP_SECURE_DN_PID&quot; \&lt;br/&gt;
           -nodetach \&lt;br/&gt;
           -user &quot;$HADOOP_SECURE_DN_USER&quot; \&lt;br/&gt;
            -cp &quot;$CLASSPATH&quot; \&lt;br/&gt;
           $JAVA_HEAP_MAX $HADOOP_OPTS \&lt;br/&gt;
           org.apache.hadoop.hdfs.server.datanode.SecureDataNodeStarter &quot;$@&quot;.&lt;/p&gt;

&lt;p&gt;the parameter $HADOOP_SECURE_DN_USER is hdfs.&lt;/p&gt;

&lt;p&gt;Then there will be to proceses in the system.one is owned by root, another is owned by hdfs, but the process of hdfs can not read  /proc/&lt;span class=&quot;error&quot;&gt;&amp;#91;pid&amp;#93;&lt;/span&gt;/io file, because this file is owned by root.&lt;/p&gt;</description>
                <environment>&lt;p&gt;SUSE Linux Enterprise Server 11 SP3  (x86_64) - Kernel&lt;/p&gt;</environment>
        <key id="13003738">DAEMON-355</key>
            <summary>the process created by jsvc can&apos;t read some os file like /proc/[pid]/io</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="xiaodong.hu">hu xiaodong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Sep 2016 03:08:22 +0000</created>
                <updated>Fri, 4 Nov 2016 10:42:29 +0000</updated>
                            <resolved>Fri, 4 Nov 2016 10:42:23 +0000</resolved>
                                    <version>1.0.13</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15635959" author="markt" created="Fri, 4 Nov 2016 10:42:26 +0000"  >&lt;p&gt;This is working as designed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33f87:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-354] DMESG reports: warning: `jsvc&apos; uses 32-bit capabilities (legacy support in use)</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-354</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Dmesg on CentOS7 displays the following warning:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[   22.742524] warning: `jsvc&apos; uses 32-bit capabilities (legacy support in use)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To reproduce we run the following on CentOS 7:&lt;/p&gt;

&lt;p&gt;1) Install Tomcat 8.0.36&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;wget -O /tmp/tomcat8.tgz http:&lt;span class=&quot;code-comment&quot;&gt;//apache.saix.net/tomcat/tomcat-8/v8.0.36/bin/apache-tomcat-8.0.36.tar.gz
&lt;/span&gt; 
cd /tmp
tar -zxvf /tmp/tomcat8.tgz
mkdir /usr/share/tomcat8
mv /tmp/apache-tomcat-8.0.36/* /usr/share/tomcat8
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2) Compile native library&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;yum install apr-devel gcc make zlib-devel
 
tar -xvzf /usr/share/tomcat8/bin/tomcat-&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;.tar.gz -C /tmp
cd /tmp/tomcat-&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-1.2.7-src/&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;/
./configure --with-apr=/usr/bin/apr-1-config --with-java-home=/usr/java/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;/ --with-ssl=no --prefix=/usr/share/tomcat8
make
make install
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;3) Compile jsvc&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;## Extract and compile from source:
tar -xvf /usr/share/tomcat8/bin/commons-daemon-&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;.tar.gz -C /tmp/
cd /tmp/commons-daemon-*-&lt;span class=&quot;code-keyword&quot;&gt;native&lt;/span&gt;-src/unix
./configure --with-java=/usr/java/latest
make
 
## Adjust permissions/ownership and move the executable into place
chmod a+x jsvc
mv jsvc /usr/share/tomcat8/bin/
 
 
## Test that the compiled version works
/usr/share/tomcat8/bin/jsvc --help
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tomcat 8.0.36 ships with DAEMON 1.0.15. I am not sure if the above compile settings are wrong or we are missing something?&lt;/p&gt;</description>
                <environment>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Server version: Apache Tomcat/8.0.36
Server built:   Jun 9 2016 13:55:50 UTC
Server number:  8.0.36.0
OS Name:        Linux
OS Version:     3.10.0-327.28.3.el7.x86_64
Architecture:   amd64
JVM Version:    1.8.0_102-b14
JVM Vendor:     Oracle Corporation
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</environment>
        <key id="13002867">DAEMON-354</key>
            <summary>DMESG reports: warning: `jsvc&apos; uses 32-bit capabilities (legacy support in use)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tech@bidorbuy.co.za">bidorbuy</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Sep 2016 09:19:38 +0000</created>
                <updated>Fri, 20 Oct 2017 19:11:34 +0000</updated>
                            <resolved>Fri, 20 Oct 2017 19:11:34 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15859505" author="nicoulaj" created="Thu, 9 Feb 2017 13:22:42 +0000"  >&lt;p&gt;The jsvc packages from CentOS 6 and 7 official repositories also have the same warnings.&lt;/p&gt;</comment>
                            <comment id="15859532" author="tech@bidorbuy.co.za" created="Thu, 9 Feb 2017 13:45:51 +0000"  >&lt;p&gt;I am really surprised that this has not been addressed. We are busy migrating to Tomcat 8.5.11 with Apache Tomcat Native library 1.2.10 and the warning still exists (as Tomcat 8.5.x still ships with commons-daemon-1.0.15-native-src)&lt;/p&gt;</comment>
                            <comment id="15861762" author="nicoulaj" created="Fri, 10 Feb 2017 19:50:53 +0000"  >&lt;p&gt;From a quick research, all you need is to build it against &lt;tt&gt;libcap2&lt;/tt&gt; instead of &lt;tt&gt;libcap&lt;/tt&gt; (eg: &lt;a href=&quot;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=506548&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Debian bug #506548&lt;/a&gt;)&lt;br/&gt;
So I guess it is more a packaging issue than a bug, even though it would be worth a doc update.&lt;/p&gt;</comment>
                            <comment id="16000316" author="tech@bidorbuy.co.za" created="Mon, 8 May 2017 06:17:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nicoulaj&quot; class=&quot;user-hover&quot; rel=&quot;nicoulaj&quot;&gt;nicoulaj&lt;/a&gt;: How is this done? On CentOS Linux release 7.3.1611 I do not see libcap2 via yum and only libcap:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;libcap-devel.i686 : Development files &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; libcap
libcap-devel.x86_64 : Development files &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; libcap
libcap-ng-devel.i686 : Header files &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; libcap-ng library
libcap-ng-devel.x86_64 : Header files &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; libcap-ng library
libcap-ng-python.x86_64 : Python bindings &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; libcap-ng library
compat-libcap1.i686 : Library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting and setting POSIX.1e capabilities
compat-libcap1.x86_64 : Library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting and setting POSIX.1e capabilities
libcap.i686 : Library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting and setting POSIX.1e capabilities
libcap.x86_64 : Library &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting and setting POSIX.1e capabilities
libcap-ng.i686 : An alternate posix capabilities library
libcap-ng.x86_64 : An alternate posix capabilities library
libcap-ng-utils.x86_64 : Utilities &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; analyzing and setting file capabilities
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16213077" author="markt" created="Fri, 20 Oct 2017 19:11:34 +0000"  >&lt;p&gt;This is something you&apos;ll need to take up with the provider of your linux distribution.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i339uv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-353] Websocket is not working in service installed with Apache common daemon 64 bit</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-353</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I am installing a service using Apache Common Daemons. When I used 32 bit jvm and 32 bit prunsrv, the service worked fine.&lt;/p&gt;

&lt;p&gt;Now I want to change it to 64 bit, so for this I used 64 bit jvm and 64 bit prunsrv. From this service got started but it is getting stuck at some point where service needs to be connected to wss url. So at below code it get stuck and not gave any error:&lt;/p&gt;

&lt;p&gt;  webSocket = asyncHttpClient.prepareGet(url)&lt;br/&gt;
                    .execute(new WebSocketUpgradeHandler.Builder().build())&lt;br/&gt;
                    .get();&lt;br/&gt;
Also service is working fine with command prompt and 64 bit Java. Seems to be an issue with prunsrv uses.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Server 2008 64 bit&lt;/p&gt;</environment>
        <key id="13001618">DAEMON-353</key>
            <summary>Websocket is not working in service installed with Apache common daemon 64 bit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="manishp">Manish Prajapati</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Aug 2016 11:33:05 +0000</created>
                <updated>Fri, 4 Nov 2016 08:40:39 +0000</updated>
                            <resolved>Fri, 4 Nov 2016 08:40:38 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15635678" author="markt" created="Fri, 4 Nov 2016 08:40:38 +0000"  >&lt;p&gt;Installed Tomcat via the Windows installer on a 64-bit OS with a 64-bit JVM and the WebSocket examples work as expected.&lt;/p&gt;

&lt;p&gt;The likelihood of the Commons Daemon preventing WebSocket working is very, very low. A configuration error is much more likely. The users list is the right place to seek help with this problem.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3325z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-351] Context class loader of stopping thread is null</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-351</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I don&apos;t know who is responsible for setting context class loader for current thread when starting and stopping service/app, but it&apos;s not set (is null) when stopping service.&lt;/p&gt;

&lt;p&gt;I am using jvm mode and main method in both cases (when starting and stopping).&lt;br/&gt;
Example output in main method:&lt;/p&gt;

&lt;p&gt;//output is sun.misc.Launcher$AppClassLoader@c387f44 when starting service&lt;br/&gt;
//output is null when stoping service&lt;br/&gt;
System.out.println(Thread.currentThread().getContextClassLoader());&lt;/p&gt;

&lt;p&gt;This causes a problem when i need to load classes from app defined classpath in stopping process.&lt;/p&gt;

&lt;p&gt;So, i was forced to manually get classloader instance when starting service, and set the same classloader instance when stoping a service.&lt;/p&gt;

&lt;p&gt;//starting:&lt;br/&gt;
classLoader = Thread.currentThread().getContextClassLoader();&lt;/p&gt;

&lt;p&gt;//stoping:&lt;br/&gt;
Thread.currentThread().setContextClassLoader(classLoader);&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10 x64, Java 1.8.x.&lt;/p&gt;</environment>
        <key id="12986396">DAEMON-351</key>
            <summary>Context class loader of stopping thread is null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="okanovic.eldin">Eldin Okanovic</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 Jul 2016 09:19:18 +0000</created>
                <updated>Wed, 9 Nov 2016 17:03:48 +0000</updated>
                            <resolved>Wed, 9 Nov 2016 17:03:48 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15651455" author="markt" created="Wed, 9 Nov 2016 17:03:48 +0000"  >&lt;p&gt;This behaviour is by design.&lt;br/&gt;
See &lt;a href=&quot;http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html&lt;/a&gt;&lt;br/&gt;
and&lt;br/&gt;
&lt;a href=&quot;http://stackoverflow.com/questions/18354535/why-do-subsequent-jni-threads-return-null-on-currentthread-getclassloader&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/18354535/why-do-subsequent-jni-threads-return-null-on-currentthread-getclassloader&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The main thread (created at start) will have the expected class loader but the stop class loader will not. Your work-around is the way to go for jvm mode.&lt;/p&gt;

&lt;p&gt;In java mode, you&apos;ll have a separate JVM so you won&apos;t have class loader problem but you will have two instances of your app which may not be what you want.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30gsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-350] Commons Daemon procrun failed with exit value: 1(Failed to start service)</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-350</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-06-21 16:15:06&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 4816] Commons Daemon procrun (1.0.15.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-06-21 16:15:06&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 4816] Deleting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-06-21 16:15:06&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;warn&amp;#93;&lt;/span&gt;  [ 4816] Failed to obtain service description&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-06-21 16:15:06&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 4816] Delete service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-06-21 16:15:06&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 4816] Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-06-21 16:15:18&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 4580] Commons Daemon procrun (1.0.15.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-06-21 16:15:18&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 4580] Service PrintServer name &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-06-21 16:15:18&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 4580] Service &apos;PrintServer&apos; installed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-06-21 16:15:18&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 4580] Commons Daemon procrun finished&lt;/p&gt;

&lt;p&gt;Start Command :&lt;br/&gt;
set SERVICE_NAME=PrintServer&lt;br/&gt;
set PR_INSTALL=D:\Gauri_Dev\procrun-sample-master\prunsrv.exe&lt;/p&gt;

&lt;p&gt;REM Path to java installation&lt;br/&gt;
set PR_JVM=C:\Program Files (x86)\Java\jre6\bin\client\jvm.dll&lt;br/&gt;
set PR_CLASSPATH=PrintServer.jar&lt;/p&gt;

&lt;p&gt;REM Startup configuration&lt;br/&gt;
set PR_STARTUP=auto&lt;br/&gt;
set PR_STARTMODE=jvm&lt;br/&gt;
set PR_STARTCLASS=com.idealinvent.branchview.print.server.Server&lt;br/&gt;
set PR_STARTMETHOD=start&lt;/p&gt;</description>
                <environment></environment>
        <key id="12981301">DAEMON-350</key>
            <summary>Commons Daemon procrun failed with exit value: 1(Failed to start service)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="s5ujit">Gauri Shankar</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jun 2016 10:47:31 +0000</created>
                <updated>Fri, 4 Nov 2016 15:45:19 +0000</updated>
                            <resolved>Fri, 4 Nov 2016 15:45:14 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15636737" author="markt" created="Fri, 4 Nov 2016 15:45:17 +0000"  >&lt;p&gt;You are using 64-bit procrun with a 32-bit JVM.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2zsxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-349] config.guess is too old to recognize ppc64le</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-349</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Here&apos;s how to repro:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ sh support/buildconf.sh
support/buildconf.sh: configure script generated successfully
$ ./configure
*** Current host ***
checking build system type... ./support/config.guess: unable to guess system type

This script, last modified 2001-04-20, has failed to recognize
the operating system you are using. It is advised that you
download the most up to date version of the config scripts from

    ftp://ftp.gnu.org/pub/gnu/config/

If the version you run (./support/config.guess) is already up to date, please
send the following data and any information you think might be
pertinent to &amp;lt;config-patches@gnu.org&amp;gt; in order to provide the needed
information to handle your system.

config.guess timestamp = 2001-04-20

uname -m = ppc64le
uname -r = 3.19.0-47-generic
uname -s = Linux
uname -v = #53-Ubuntu SMP Mon Jan 18 14:01:36 UTC 2016

/usr/bin/uname -p =
/bin/uname -X     =

hostinfo               =
/bin/universe          =
/usr/bin/arch -k       =
/bin/arch              =
/usr/bin/oslevel       =
/usr/convex/getsysinfo =

UNAME_MACHINE = ppc64le
UNAME_RELEASE = 3.19.0-47-generic
UNAME_SYSTEM  = Linux
UNAME_VERSION = #53-Ubuntu SMP Mon Jan 18 14:01:36 UTC 2016
configure: error: cannot guess build type; you must specify one
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12973625">DAEMON-349</key>
            <summary>config.guess is too old to recognize ppc64le</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rvs">Roman Shaposhnik</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 May 2016 01:32:14 +0000</created>
                <updated>Fri, 4 Nov 2016 08:43:39 +0000</updated>
                            <resolved>Fri, 4 Nov 2016 08:43:39 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15309014" author="asanjar" created="Wed, 1 Jun 2016 01:22:56 +0000"  >&lt;p&gt;Thanks Roman, Power community is most grateful &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12933351">DAEMON-343</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12806782" name="DAEMON-349.patch.txt" size="79107" author="rvs" created="Sat, 28 May 2016 02:16:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ymx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-348] Clearing the &quot;Thread Stack Size&quot; field leaves service unstartable</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-348</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Just diagnosed an issue with a customer in which the java [process was unrunnable).  This was because &lt;br/&gt;
&lt;tt&gt;HKEY_LOCAL_MACHINE\SOFTWARE\Apache Software Foundation\Procrun 2.0\shibd_idp\Parameters\Java\JvmSs&lt;/tt&gt; was zero, (where &lt;tt&gt;shibd_idp&lt;/tt&gt; is the service.&lt;/p&gt;

&lt;p&gt;I managed to reproduce this behavior by&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;starting shibd_idpw (a.k.a prunmgr.exe)&lt;/li&gt;
	&lt;li&gt;modifying Thread Stack Size to be something&lt;/li&gt;
	&lt;li&gt;(verify with regedit)&lt;/li&gt;
	&lt;li&gt;clear the Thread Stack Size field&lt;/li&gt;
	&lt;li&gt;JvmSs is now zero&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;Windows7 x86&lt;/p&gt;</environment>
        <key id="12972665">DAEMON-348</key>
            <summary>Clearing the &quot;Thread Stack Size&quot; field leaves service unstartable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rodwiddowson">Rod Widdowson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 May 2016 09:58:30 +0000</created>
                <updated>Tue, 14 Nov 2017 14:27:08 +0000</updated>
                            <resolved>Tue, 14 Nov 2017 14:27:08 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15299821" author="sebb@apache.org" created="Wed, 25 May 2016 10:25:24 +0000"  >&lt;p&gt;So are you saying that the code should remove the JvmSs entry if the ThreadStackSize (TSS) field is emptied?&lt;br/&gt;
Or some other behaviour?&lt;/p&gt;

&lt;p&gt;I assume it does not create the entry if the TSS field is empty on initial creation.&lt;br/&gt;
I don&apos;t have a Windows system handy at present to check.&lt;/p&gt;</comment>
                            <comment id="15299845" author="rodwiddowson" created="Wed, 25 May 2016 10:40:39 +0000"  >&lt;p&gt;&amp;gt; So are you saying that the code should remove the JvmSs entry if the ThreadStackSize (TSS) field is emptied?&lt;/p&gt;

&lt;p&gt;Absolutely.  I brought my customer&apos;s machine back to life by doing just that.&lt;/p&gt;

&lt;p&gt;&amp;gt; I assume it does not create the entry if the TSS field is empty on initial creation.&lt;br/&gt;
Correct.  It only gets populated when you change it.&lt;/p&gt;

&lt;p&gt;&amp;gt; I don&apos;t have a Windows system handy at present to check&lt;br/&gt;
I have &lt;em&gt;loads&lt;/em&gt; of windows VMs lieing about if you need me to run tests.&lt;/p&gt;

&lt;p&gt;/Rod&lt;/p&gt;</comment>
                            <comment id="15637475" author="markt" created="Fri, 4 Nov 2016 19:50:15 +0000"  >&lt;p&gt;I&apos;ve tested 1.0.15 and reviewed the source code to confirm the behaviour and a value of 0 means the entry is ignored. I can&apos;t reproduce the problem described in this report with 1.0.15.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ygzr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-347] Add AArch64 support to src/native/unix/support/apsupport.m4</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-347</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Add AArch64 support to src/native/unix/support/apsupport.m4.&lt;/p&gt;

&lt;p&gt;The commons-daemon has no knowledge of AArch64. Need to make jsvc build-able in AARCH64 by adding CFlag in apsupport.m4.&lt;/p&gt;

&lt;p&gt;Attached the patch&lt;/p&gt;</description>
                <environment></environment>
        <key id="12970252">DAEMON-347</key>
            <summary>Add AArch64 support to src/native/unix/support/apsupport.m4</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="v_ganeshraju">Ganesh Raju</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Tue, 17 May 2016 03:33:04 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:03 +0000</updated>
                            <resolved>Mon, 23 May 2016 17:15:04 +0000</resolved>
                                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15285954" author="v_ganeshraju" created="Tue, 17 May 2016 03:34:13 +0000"  >&lt;p&gt;Please provide me access to submit the patch and also to assign myself to this.&lt;/p&gt;</comment>
                            <comment id="15285984" author="v_ganeshraju" created="Tue, 17 May 2016 03:53:06 +0000"  >&lt;p&gt;Attaching the patch&lt;/p&gt;</comment>
                            <comment id="15296666" author="garydgregory" created="Mon, 23 May 2016 17:15:04 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;commit -m &quot;[DAEMON-347] Add AArch64 support to src/native/unix/support/apsupport.m4.&quot; -N E:/vcs/svn/apache/commons/trunks-proper/daemon/src/changes E:/vcs/svn/apache/commons/trunks-proper/daemon/src/changes/changes.xml E:/vcs/svn/apache/commons/trunks-proper/daemon/src/native/unix/support/apsupport.m4
    Adding         E:/vcs/svn/apache/commons/trunks-proper/daemon/src/changes
    Adding         E:/vcs/svn/apache/commons/trunks-proper/daemon/src/changes/changes.xml
    Sending        E:/vcs/svn/apache/commons/trunks-proper/daemon/src/native/unix/support/apsupport.m4
    Transmitting file data ...
    Committed revision 1745
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12804335" name="0001-added-aarch64-support.patch" size="893" author="v_ganeshraju" created="Tue, 17 May 2016 03:53:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2y24n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-345] Not able to run prunsrv.exe in exe mode.</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-345</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Hi team, &lt;/p&gt;

&lt;p&gt;I am not able to run service which I have set up using prunsrv.exe. Service setup is successful, however when I try to start it, it fails with return code 255. Error in the log is .. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; ( prunsrv.c:1683) [ 3756] Commons Daemon procrun (1.0.15.0 32-bit) started &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; ( prunsrv.c:1596) [ 3756] Running &apos;SolrCloud&apos; Service... &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1374) [ 3920] Inside ServiceMain... &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) [ 3920] reportServiceStatusE: 2, 0, 3000, 0 &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; ( prunsrv.c:1127) [ 3920] Starting service... &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; ( prunsrv.c:1284) [ 3920] Service started in 296 ms. &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) [ 3920] reportServiceStatusE: 4, 0, 0, 0 &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1528) [ 3920] Waiting for worker to finish... &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; (rprocess.c:122 ) [ 1660] Child process exit code 255 &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1533) [ 3920] Worker finished. &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1559) [ 3920] Waiting for all threads to exit &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) [ 3920] reportServiceStatusE: 3, 0, 0, 0 &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1563) [ 3920] JVM destroyed. &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) [ 3920] reportServiceStatusE: 1, 1066, 0, 255 &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2016-04-15 06:55:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; ( prunsrv.c:1598) [ 3756] Run service finished. &lt;/p&gt;

&lt;p&gt;Can you please suggest&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 64 bit with 32 bit java&lt;/p&gt;</environment>
        <key id="12959183">DAEMON-345</key>
            <summary>Not able to run prunsrv.exe in exe mode.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gaurav2783924">Gaurav Gupta</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Apr 2016 13:58:32 +0000</created>
                <updated>Fri, 15 Apr 2016 14:00:25 +0000</updated>
                            <resolved>Fri, 15 Apr 2016 14:00:25 +0000</resolved>
                                    <version>1.0.13</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15242989" author="markt" created="Fri, 15 Apr 2016 14:00:25 +0000"  >&lt;p&gt;Jira is not a support channel. Please use the users&apos; mailing list.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2w6jb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-344] prunsrv swallows uncaught exceptions</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-344</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;This seems to be similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-165&quot; title=&quot;Uncaught exceptions in main methods are being obscured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-165&quot;&gt;&lt;del&gt;DAEMON-165&lt;/del&gt;&lt;/a&gt;, but I do not have the right to reopen it.&lt;/p&gt;

&lt;p&gt;Write a main method like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
  &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Exception(&lt;span class=&quot;code-quote&quot;&gt;&quot;bad luck&quot;&lt;/span&gt;);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If started as a service, the service will keep running as if everything is ok.&lt;/p&gt;

&lt;p&gt;Workaround: wrap all code into a try/catch(Throwable) and print/log the throwable in the Java code itself. Then exit normally, which will then actually prompt prunsrv to exit.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12954569">DAEMON-344</key>
            <summary>prunsrv swallows uncaught exceptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="haraldk">Harald Kirsch</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Mar 2016 09:19:12 +0000</created>
                <updated>Wed, 9 Nov 2016 13:44:54 +0000</updated>
                            <resolved>Wed, 9 Nov 2016 13:44:54 +0000</resolved>
                                    <version>1.0.10</version>
                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15641521" author="gchauvet" created="Sun, 6 Nov 2016 10:04:06 +0000"  >&lt;p&gt;Could you provide a full unit test ? (i.e jar + command line used to deploy and run it)&lt;/p&gt;</comment>
                            <comment id="15650962" author="markt" created="Wed, 9 Nov 2016 13:44:54 +0000"  >&lt;p&gt;I modified Tomcat to immediately throw an exception on start, installed the service and when started, the service failed shortly afterwards as expected.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ve33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-341] prunsrv injects garbage into ImagePath</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-341</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Here is a reproducible example that works every time:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;prunsrv.exe //IS//abcd.branch2 --StartMode=jvm --StartClass=abc.abcdefghih.abcd.abcdef.abcd.MyImportantClass --StartMethod=startService ++StartParams=abcd.branch2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The ImagePath entry for the service ends up being:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;C:\path\to\prunsrv.exe 12-08.lo&#613;//RS//abcd.branch2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you see, there is garbage inserted in front of the &lt;tt&gt;//RS//&lt;/tt&gt; string.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Server 2008 (not R2)&lt;/p&gt;</environment>
        <key id="12920203">DAEMON-341</key>
            <summary>prunsrv injects garbage into ImagePath</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mvdobrinin">Mikhail Dobrinin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Dec 2015 21:55:21 +0000</created>
                <updated>Thu, 23 Nov 2017 09:43:25 +0000</updated>
                            <resolved>Mon, 30 Oct 2017 14:12:00 +0000</resolved>
                                    <version>1.0.13</version>
                                    <fixVersion>1.0.14</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15047542" author="garydgregory" created="Tue, 8 Dec 2015 21:57:51 +0000"  >&lt;p&gt;Yuk, do you have a patch perchance?&lt;/p&gt;</comment>
                            <comment id="15047599" author="mvdobrinin" created="Tue, 8 Dec 2015 22:30:16 +0000"  >&lt;p&gt;No, I skimmed the code but nothing stood out to me. I can&apos;t reproduce this on other OSes, so this may be related to Server 2008 somehow.&lt;/p&gt;</comment>
                            <comment id="15637560" author="markt" created="Fri, 4 Nov 2016 20:20:21 +0000"  >&lt;p&gt;I&apos;ve tried and failed to reproduce this. I can try creating a Server 2008 VM but I&apos;m wondering if there isn&apos;t something more specific (unusual locale, UTF-8 file path, etc.) to the machine where you observe this that is a factor. Any hints or confirmation it is repeatable on multiple Windows 2008 machines (ideally on a clean install) would help.&lt;/p&gt;</comment>
                            <comment id="15637878" author="mvdobrinin" created="Fri, 4 Nov 2016 22:18:07 +0000"  >&lt;p&gt;Unfortunately I don&apos;t have access to the exact environment where this was observed. However, here is the best information I can provide:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I can say that I was not able to reproduce this on other machines (only on Windows Serevr 2008 not R2). Likewise, when it is reproducible, it is reproducible every time.&lt;/li&gt;
	&lt;li&gt;We did an environment variable dump at the time and did not see anything pointing to log files, or any non-ascii characters in the names or values ([^\x00-\x7F]). Note that I am talking about the environment variables in the shell process. The actual command to reproduce this was boiled down to the simple example you see above (without any ++Environment, --JVM, or any other arguments).&lt;/li&gt;
	&lt;li&gt;Each time that I saw this, it would appear that the garbage is part of a path to a log file, but as you can can see in the above example that the &quot;g&quot; in &quot;log&quot; is changed to a &quot;&#613;&quot;. The full command that we would be executing in production would set the &quot;&amp;#45;&amp;#45;LogPath&quot; and &quot;&amp;#45;&amp;#45;LogPrefix&quot; arguments and the directory to which it would point actually would usually contain log files with dates as seen in the example &quot;...10-08.log&quot;. However, these log files were not passed as arguments to the prunsrv command and were not seen in the environment variable dumps. On top of that, I was able to reproduce it with very simple commands to prunsrv that don&apos;t pass there arguments. I am thinking they may have been incidentally been nearby in the memory and this may be some kind of buffer overflow issue.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15753669" author="bormotov" created="Fri, 16 Dec 2016 07:03:24 +0000"  >&lt;p&gt;Same issue on Windows Server 2016, and we can reproduce this. With logfile or any other data need?&lt;br/&gt;
In our case, garbage is some single unicode characret before //RS&lt;/p&gt;</comment>
                            <comment id="15824409" author="mvdobrinin" created="Mon, 16 Jan 2017 18:34:45 +0000"  >&lt;p&gt;This may be resolved in version 1.0.15.&lt;/p&gt;</comment>
                            <comment id="16225017" author="markt" created="Mon, 30 Oct 2017 14:12:00 +0000"  >&lt;p&gt;I was able to re-create this with prunsrv.exe from 1.0.13 on Windows 2016. Thanks for the test case and an additional thanks for providing an alternative OS (that I happened to have available) where the problem could be observed.&lt;/p&gt;

&lt;p&gt;I then tested 1.0.15 and confirmed that the issue was resolved as suspected.&lt;/p&gt;

&lt;p&gt;Looking at the change log, &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-284&quot; title=&quot;Service configuration corruption on install&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-284&quot;&gt;&lt;del&gt;DAEMON-284&lt;/del&gt;&lt;/a&gt; looks to be very likely the issue where this was fixed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12635610">DAEMON-284</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pme7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-340] Stop Service Shows Error 1053</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-340</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Hello &lt;br/&gt;
Thanks in Advance &lt;br/&gt;
Created java window service using Java common demons it works &lt;br/&gt;
fine  (Start /Stop) in My system which having the OS Windows 7 / Service Pack 1 but when I  deploy in server having OS as Windows 2008 /service Pack 1 it shows below error message when stop the service from Windows Service &lt;br/&gt;
Windows could not stop  the &amp;lt;Service Name&amp;gt; service on Local Computer&lt;br/&gt;
Error 1053: The Service did not respond to start or control request in a timely fashion &lt;br/&gt;
could you please help me to resolve the issues &lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Noorulla&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS Verson : WINDOWS 2008 R2&lt;br/&gt;
Service Pack : Service Pack1&lt;/p&gt;</environment>
        <key id="12916577">DAEMON-340</key>
            <summary>Stop Service Shows Error 1053</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Noorulla">Noorulla</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Nov 2015 09:23:29 +0000</created>
                <updated>Wed, 9 Nov 2016 16:13:02 +0000</updated>
                            <resolved>Wed, 9 Nov 2016 13:47:02 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15650967" author="markt" created="Wed, 9 Nov 2016 13:47:03 +0000"  >&lt;p&gt;You&apos;ll see that error if, for some reason, the Java application takes a while to shutdown. That might be OS related but it seems unlikely.&lt;/p&gt;

&lt;p&gt;I regularly run Tomcat on that OS and I&apos;ve never hit this issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12646828">DAEMON-298</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p01j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-339] Patch for commons-daemon 1.0.15 to avoid shutdown failures</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-339</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;We&apos;ve seen situations on UNIX where JSVC will fail to shutdown when&lt;br/&gt;
requested ... in at least one case this caused the machine to hang&lt;br/&gt;
during shutdown.&lt;/p&gt;

&lt;p&gt;On UNIX JSVC automatically restarts the JVM if it crashes.  Currently&lt;br/&gt;
this means that if the JVM crashes after receiving a shutdown request&lt;br/&gt;
(i.e. a SIGINT), then it&apos;s restarted by the controller which is not&lt;br/&gt;
what&apos;s desired.&lt;/p&gt;

&lt;p&gt;The enclosed patch propagates the termination request from the JVM to&lt;br/&gt;
the controller so that the controller knows not to schedule a restart&lt;br/&gt;
thus allowing JSVC to actually terminate.&lt;/p&gt;

&lt;p&gt;Granted this doesn&apos;t fix the underlying problem of the JVM crashing&lt;br/&gt;
during shutdown, however that&apos;s a separate (potentially application&lt;br/&gt;
specific) issue.&lt;/p&gt;

&lt;p&gt;Tested by using a dummy JAVA service containing an endless loop in&lt;br/&gt;
the shutdown code.  Test sequence was:&lt;/p&gt;

&lt;p&gt;  jsvc ... -verbose -debug hello.MyDaemon&lt;br/&gt;
  kill -INT `cat pidfile`&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;notice that output showed shutdown running&lt;br/&gt;
  kill -BUS `cat pidfile`&lt;/li&gt;
	&lt;li&gt;notice that prior to patch output showed restart being scheduled&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&amp;#8211; John Wehle&lt;/p&gt;</description>
                <environment>&lt;p&gt;Multiple UNIX platforms ... E.g.:&lt;br/&gt;
Red Hat ES 6&lt;br/&gt;
Solaris 10 x64&lt;/p&gt;</environment>
        <key id="12915621">DAEMON-339</key>
            <summary>Patch for commons-daemon 1.0.15 to avoid shutdown failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jwehle">John Wehle</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Nov 2015 22:52:20 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:00 +0000</updated>
                            <resolved>Fri, 20 Oct 2017 10:58:39 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="1800">0.5h</timeoriginalestimate>
                            <timeestimate seconds="1800">0.5h</timeestimate>
                                        <comments>
                            <comment id="15023273" author="jwehle" created="Mon, 23 Nov 2015 22:54:23 +0000"  >&lt;p&gt;Patch for the problem.&lt;/p&gt;</comment>
                            <comment id="16212487" author="markt" created="Fri, 20 Oct 2017 10:58:39 +0000"  >&lt;p&gt;Many thanks for the patch and the steps to recreate the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12773928" name="jsvc-shutdown.txt" size="7858" author="jwehle" created="Mon, 23 Nov 2015 22:54:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ou53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-337] Docu-Bug on procrun page</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-337</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;There seems to be a docu-bug on the procrun page (&lt;a href=&quot;http://commons.apache.org/proper/commons-daemon/procrun.html):&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-daemon/procrun.html):&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The description of the &lt;tt&gt;--StartMethod&lt;/tt&gt; parameter states:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Note: in jvm mode, the start method should not return until the stop method has been called.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;But further down the page in the &quot;Using Procrun in jvm mode&quot; section:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Note that the method handling service start should create and start a separate thread to carry out the processing, and then return. The start and stop methods are called from different threads.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If I&apos;m not reading this wrong, this a little conflicting.&lt;/p&gt;

&lt;p&gt;From my understanding the implementation of the start-method should be synchronous, that is the first note would be correct and the second one should be adapted.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12849311">DAEMON-337</key>
            <summary>Docu-Bug on procrun page</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="daniel@peger.de">Daniel H. Peger</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jul 2015 13:12:58 +0000</created>
                <updated>Fri, 7 Apr 2017 15:11:30 +0000</updated>
                            <resolved>Wed, 9 Nov 2016 17:08:06 +0000</resolved>
                                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12675019">DAEMON-309</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 14 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hyt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-336] prunsrv crash on service stop</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-336</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;If the service should be stop then it crash. In the event log you can see:&lt;/p&gt;

&lt;p&gt;Name der fehlerhaften Anwendung: foo-serverService.exe, Version: 1.0.15.0, Zeitstempel: 0x51543b9d&lt;br/&gt;
Name des fehlerhaften Moduls: ntdll.dll, Version: 6.3.9600.17736, Zeitstempel: 0x550f4336&lt;br/&gt;
Ausnahmecode: 0xc0000005&lt;br/&gt;
Fehleroffset: 0x0000000000035150&lt;br/&gt;
ID des fehlerhaften Prozesses: 0x1578&lt;br/&gt;
Startzeit der fehlerhaften Anwendung: 0x01d0be119603c23f&lt;br/&gt;
Pfad der fehlerhaften Anwendung: C:\Program Files\foo Server\foo-serverService.exe&lt;br/&gt;
Pfad des fehlerhaften Moduls: C:\WINDOWS\SYSTEM32\ntdll.dll&lt;br/&gt;
Berichtskennung: da5b2537-2a04-11e5-8063-7427ea3e8675&lt;br/&gt;
Vollst&#228;ndiger Name des fehlerhaften Pakets: &lt;br/&gt;
Anwendungs-ID, die relativ zum fehlerhaften Paket ist: &lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 8.1 with Java 8 64bit, Java mode&lt;/p&gt;</environment>
        <key id="12844914">DAEMON-336</key>
            <summary>prunsrv crash on service stop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="horcrux7">Volker Berlin</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jul 2015 09:26:22 +0000</created>
                <updated>Tue, 14 May 2024 14:45:56 +0000</updated>
                            <resolved>Mon, 30 Oct 2017 13:20:30 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14643520" author="masc3d" created="Mon, 27 Jul 2015 22:22:46 +0000"  >&lt;p&gt;Similar issue with 1.0.15 on Windows 8.1 &amp;amp; embedded jre 1.8.0_51, crashing in jvm.dll on stop&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;32bit jre/prunsrv&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;Faulting application name: leozsvc.exe, version: 1.0.15.0, time stamp: 0x51543b87
Faulting module name: jvm.dll, version: 25.51.0.3, time stamp: 0x55764290
Exception code: 0xc0000005
Fault offset: 0x0016bffa
Faulting process ID: 0x1f44
Faulting application start time: 0x01d0c8b68cfa6938
Faulting application path: C:\Users\n3\Projects\leo2-release\leo2-central-win32\bin\leozsvc.exe
Faulting module path: C:\Users\n3\Projects\leo2-release\leo2-central-win32\runtime\bin\server\jvm.dll
Report ID: 12838782-34aa-11e5-bf3c-001c427bac0d
Faulting package full name: 
Faulting package-relative application ID:
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;64bit jre/prunsrv&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;Faulting application name: leozsvc.exe, version: 1.0.15.0, time stamp: 0x51543b9d
Faulting module name: jvm.dll, version: 25.51.0.3, time stamp: 0x55764123
Exception code: 0xc0000005
Fault offset: 0x0000000000213168
Faulting process ID: 0x18a4
Faulting application start time: 0x01d0c8b54474408f
Faulting application path: C:\Users\n3\Projects\leo2-release\leo2-central-win64\bin\leozsvc.exe
Faulting module path: C:\Users\n3\Projects\leo2-release\leo2-central-win64\runtime\bin\server\jvm.dll
Report ID: 97f47c71-34a8-11e5-bf3c-001c427bac0d
Faulting package full name: 
Faulting package-relative application ID: 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14644216" author="masc3d" created="Tue, 28 Jul 2015 10:45:36 +0000"  >&lt;p&gt;It can also be replicated with &lt;tt&gt;//TS&lt;/tt&gt;. here&apos;s an excerpt of the debug log when stopping the service (or using &lt;tt&gt;ctrl-c&lt;/tt&gt; when running with &lt;tt&gt;//TS&lt;/tt&gt;). The actual procedure of stopping the service appears to work fine, crash seems to occur on/after destroying the jvm.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;[2015-07-28 12:36:34] [info]  ( prunsrv.c:1339) [ 9824] Console CTRL+C event signaled
[2015-07-28 12:36:34] [info]  ( prunsrv.c:943 ) [ 9824] Stopping service...
[2015-07-28 12:36:34] [debug] ( javajni.c:941 ) [ 7828] Java Worker thread started org/deku/leo2/central/Main:stop
[2015-07-28 12:36:35] [debug] ( prunsrv.c:990 ) [ 9824] Waiting for java jni stop worker to finish...
[2015-07-28 12:36:36] [debug] ( javajni.c:964 ) [ 7828] Java Worker thread finished org/deku/leo2/central/Main:stop with status=0
[2015-07-28 12:36:36] [debug] ( prunsrv.c:992 ) [ 9824] Java jni stop worker finished.
[2015-07-28 12:36:36] [debug] ( prunsrv.c:844 ) [ 9824] reportServiceStatusE: 3, 0, 300000, 0
[2015-07-28 12:36:36] [debug] ( prunsrv.c:1093) [ 9824] Waiting for worker to die naturally...
[2015-07-28 12:36:36] [debug] ( prunsrv.c:1104) [ 9824] Worker finished gracefully in 0 ms.
[2015-07-28 12:36:36] [info]  ( prunsrv.c:1114) [ 9824] Service stop thread completed.
[2015-07-28 12:36:56] [debug] ( prunsrv.c:844 ) [ 7620] reportServiceStatusE: 3, 0, 0, 0
[2015-07-28 12:36:56] [debug] ( prunsrv.c:1563) [ 7620] JVM destroyed.
[2015-07-28 12:36:56] [debug] ( prunsrv.c:844 ) [ 7620] reportServiceStatusE: 1, 0, 0, 0
[2015-07-28 12:36:56] [info]  ( prunsrv.c:1582) [ 7620] Debug service finished with exit code 0
[2015-07-28 12:36:56] [info]  ( prunsrv.c:1764) [ 7620] Commons Daemon procrun finished
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="14645805" author="masc3d" created="Wed, 29 Jul 2015 09:48:28 +0000"  >&lt;p&gt;Crash is triggered by &lt;tt&gt;apxHandleManagerDestroy();&lt;/tt&gt; called before exiting process.&lt;br/&gt;
As the process terminates shortly after, removing this line and letting the system take care of freeing the memory may be an acceptable workaround until the issue is fixed.&lt;/p&gt;</comment>
                            <comment id="15345957" author="dnucim" created="Thu, 23 Jun 2016 07:25:56 +0000"  >&lt;p&gt;Same issue with 1.0.15 on Windows 7 and other versions running a bat-/cmd script (--StartMode exe). The script starts/stops a java application.&lt;/p&gt;</comment>
                            <comment id="15364122" author="taras.perebeynosov@gmail.com" created="Wed, 6 Jul 2016 10:40:14 +0000"  >&lt;p&gt;The issue is still unassigned. Is there any dev support exists for prunsrv?&lt;/p&gt;</comment>
                            <comment id="15364425" author="garydgregory" created="Wed, 6 Jul 2016 15:04:05 +0000"  >&lt;p&gt;There is no such process around here as we are all volunteers. Offering a patch might help. You could also ping the ML for such process issues.&lt;/p&gt;</comment>
                            <comment id="16224908" author="markt" created="Mon, 30 Oct 2017 13:20:30 +0000"  >&lt;p&gt;I can&apos;t recreate this with the provided information. I am assuming it is a duplicate of the now fixed &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-372&quot; title=&quot;create shutdown event for shutdown process&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-372&quot;&gt;&lt;del&gt;DAEMON-372&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If this isn&apos;t the case then feel free to re-open and provide the steps to reproduce the issue.&lt;/p&gt;</comment>
                            <comment id="17405748" author="stevehhexagon" created="Fri, 27 Aug 2021 11:09:31 +0000"  >&lt;p&gt;I believe i reproduced this issue and seems to be a violation trying to access a empty TAILQ. It fits inside the above &quot;patch&quot; in that this seems to fix it directly. Here is a branch on my remote with the patch, can make a PR if it&apos;s good to go?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-daemon/compare/master...stevehof:DAEMON-336-Check_empty_queue&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/compare/master...stevehof:DAEMON-336-Check_empty_queue&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In terms of testing this is a works for me - but the mvn tests do pass too.&lt;/p&gt;</comment>
                            <comment id="17406419" author="garydgregory" created="Sun, 29 Aug 2021 14:36:35 +0000"  >&lt;p&gt;Yes, a PR would be a good thing.&#160;&lt;/p&gt;</comment>
                            <comment id="17406578" author="stevehhexagon" created="Mon, 30 Aug 2021 06:21:04 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; , done &lt;a href=&quot;https://github.com/apache/commons-daemon/pull/32&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-daemon/pull/32&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17406695" author="garydgregory" created="Mon, 30 Aug 2021 12:02:44 +0000"  >&lt;p&gt;The patch LGTM. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt;, WDYT?&lt;/p&gt;</comment>
                            <comment id="17407185" author="markt" created="Tue, 31 Aug 2021 08:48:37 +0000"  >&lt;p&gt;I have made a comment on the detail of the patch but I&apos;d like to see the steps to reproduce this with 1.2.4 before applying the patch as I am not currently convinced it is necessary with the 1.2.4 code.&lt;/p&gt;</comment>
                            <comment id="17408882" author="stevehhexagon" created="Thu, 2 Sep 2021 14:26:46 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt; - I believe i have gotten to the bottom of our cause for this issue. Our use-case is using Jetty from eclipse with the Daemon, and the code that i found called join() after the stop() not after the start() (as shown in Eclipses own sample code). Let me know if you think the following is enough to reproduce the issue and then we can at least get Daemon to be a bit safer going forward, otherwise i can close the PR and let this be a lesson to anyone else who finds it or at least the PR will help them debug the issue for themselves.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void start(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; [] args) {
		server.start();
		server.join();
	}

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void stop(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; [] args) {
		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (server != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
			server.stop();
			server = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
		}
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17412675" author="markt" created="Thu, 9 Sep 2021 16:21:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stevehHexagon&quot; class=&quot;user-hover&quot; rel=&quot;stevehHexagon&quot;&gt;stevehHexagon&lt;/a&gt;&#160;thanks for the additional analysis. I&apos;m generally supportive of enhancements to make Daemon more robust. Since this is a separate issue, please create a new enhancement request along with the sample code to reproduce the issue and a link to the PR and I&apos;ll try and take a look next time I do a Daemon release. I do want to see if there is an opportunity to catch the specific issue (possibly earlier) and report a suitable error message in addition to avoiding the crash.&lt;/p&gt;</comment>
                            <comment id="17477331" author="markt" created="Mon, 17 Jan 2022 17:25:14 +0000"  >&lt;p&gt;I&apos;ve tried to reproduce the issue with the information here and a simple test service but I am unable to. I&apos;d still like to be able to recreate this before applying any patch.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13096873">DAEMON-372</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h85z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-335] prunsrv does not start with jvm mode</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-335</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;If I start my service in the jvm mode then it terminate immediate. in the log I see:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1127) [ 4060] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:233 ) [ 4060] loading jvm &apos;C:\jre\bin\server\jvm.dll&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 5972] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; -Djava.class.path=foo.jar&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 5972] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; exit&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:941 ) [ 5972] Java Worker thread started com/foo/Foo:main&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:471 ) [ 5404] Exit hook with exit code 1&lt;/p&gt;

&lt;p&gt;---------------------&lt;br/&gt;
If I start it from the console then I see then I see:&lt;/p&gt;

&lt;p&gt;Could not find or load main class exit&lt;/p&gt;

&lt;p&gt;--------------------&lt;br/&gt;
The problem occur since version 1.11. With version 1.10 all is working. It is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-244&quot; title=&quot;prunsrv does not propagate exit code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-244&quot;&gt;&lt;del&gt;DAEMON-244&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;A workaround is to use the Java mode instead of the jvm mode.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 8.1 with Java 8 64bit&lt;/p&gt;</environment>
        <key id="12844155">DAEMON-335</key>
            <summary>prunsrv does not start with jvm mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="horcrux7">Volker Berlin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Jul 2015 12:03:14 +0000</created>
                <updated>Fri, 4 Nov 2016 14:02:58 +0000</updated>
                            <resolved>Fri, 4 Nov 2016 10:01:16 +0000</resolved>
                                    <version>1.0.11</version>
                    <version>1.0.12</version>
                    <version>1.0.13</version>
                    <version>1.0.14</version>
                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15635866" author="markt" created="Fri, 4 Nov 2016 10:01:21 +0000"  >&lt;p&gt;Tomcat uses jvm mode and hasn&apos;t seen any issues with jvm mode. Please do not reopen this issue unless you can provide a simple test case (with source) that demonstrates the issue.&lt;/p&gt;</comment>
                            <comment id="15636423" author="horcrux7" created="Fri, 4 Nov 2016 14:02:58 +0000"  >&lt;p&gt;Which type of sample do you want? Do you want a java source file? Or a jar file? Or a command line for creating the service?&lt;/p&gt;

&lt;p&gt;I think the main difference to a simple sample and the complex product tomcat is that tomcat does not return the main thread. Can this the cause of terminating?&lt;/p&gt;

&lt;p&gt;I have try with tomcat and it work like you described. If I only change the classpath, start class and working dir to my server then it does not work. Any ideas?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h3mv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-333] Stop abusing System.gc() on Commons Daemon jsvc shutdown</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-333</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The shutdown sequence invokes System.gc() several times. I&apos;m not sure why this would be necessary, especially considering that System.gc() is only a hint and the JVM will not necessarily do anything when this method is invoked. Especially if -XX:+DisableExplicitGC is used, which is fairly common practice in production environments.&lt;/p&gt;

&lt;p&gt;In our case, we use rather huge heaps (over 100 GB) so shutdown can take forever, depending on how much uncollected garbage there is in the JVM heap. We&apos;ve always used -XX:+DisableExplicitGC so this was never apparent, however we decided to stop using -XX:+DisableExplicitGC after careful code review showed none of our apps or supporting libraries are using System.gc() and sometimes we want to trigger GC manually from monitoring tools (Jconsole, VisualVM, etc.) - but we found the hard way that Commons Daemon / jsvc is using System.gc() on shutdown, preventing the speedy shutdown we were used to.&lt;/p&gt;

&lt;p&gt;Re-introducing XX:+DisableExplicitGC fixes the problem, and shutdown is back to normal, takes less than 8 seconds on our hardware.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12835096">DAEMON-333</key>
            <summary>Stop abusing System.gc() on Commons Daemon jsvc shutdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mads1980">Manuel Dominguez Sarmiento</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jun 2015 16:12:26 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:14 +0000</updated>
                            <resolved>Fri, 4 Nov 2016 09:57:44 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14571269" author="mads1980" created="Wed, 3 Jun 2015 16:14:07 +0000"  >&lt;p&gt;The attached thread dump (taken while the JVM was stuck on shutdown) shows that we only have daemon threads, and the only non-daemon, RUNNABLE threads are the Commons Loader main() and many, many GC-related threads&lt;/p&gt;</comment>
                            <comment id="14571270" author="mads1980" created="Wed, 3 Jun 2015 16:14:12 +0000"  >&lt;p&gt;Full thread dump Java HotSpot(TM) 64-Bit Server VM (25.45-b02 mixed mode): &lt;/p&gt;

&lt;p&gt;&quot;RMI TCP Connection(283)-127.0.0.1&quot; #801195 daemon prio=10 os_prio=0 tid=0x000000000b677000 nid=0xb4d6 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007f81f7749000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;br/&gt;
        at java.net.SocketInputStream.socketRead0(Native Method) &lt;br/&gt;
        at java.net.SocketInputStream.socketRead(SocketInputStream.java:116) &lt;br/&gt;
        at java.net.SocketInputStream.read(SocketInputStream.java:170) &lt;br/&gt;
        at java.net.SocketInputStream.read(SocketInputStream.java:141) &lt;br/&gt;
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:246) &lt;br/&gt;
        at java.io.BufferedInputStream.read(BufferedInputStream.java:265) &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00007f8376a2cc08&amp;gt; (a java.io.BufferedInputStream)&lt;br/&gt;
        at java.io.FilterInputStream.read(FilterInputStream.java:83) &lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:550) &lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826) &lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$241(TCPTransport.java:683) &lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler$$Lambda$3/1498966449.run(Unknown Source) &lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method) &lt;br/&gt;
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682) &lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;oracle.jdbc.driver.BlockSource.ThreadedCachingBlockSource.BlockReleaser&quot; #189 daemon prio=4 os_prio=0 tid=0x0000000010eec800 nid=0x68a1 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007f81f6bc3000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (on object monitor) &lt;br/&gt;
        at java.lang.Object.wait(Native Method) &lt;br/&gt;
        at oracle.jdbc.driver.BlockSource$ThreadedCachingBlockSource$BlockReleaser.run(BlockSource.java:327) &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00007f829c9ff180&amp;gt; (a oracle.jdbc.driver.BlockSource$ThreadedCachingBlockSource$BlockReleaser)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;RMI RenewClean-&lt;span class=&quot;error&quot;&gt;&amp;#91;koji.renxo.net:1099&amp;#93;&lt;/span&gt;&quot; #185 daemon prio=10 os_prio=0 tid=0x0000000009aba800 nid=0x550a in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007f81f75c7000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (on object monitor) &lt;br/&gt;
        at java.lang.Object.wait(Native Method) &lt;br/&gt;
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143) &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00007f829cbf7b58&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)&lt;br/&gt;
        at sun.rmi.transport.DGCClient$EndpointEntry$RenewCleanThread.run(DGCClient.java:536) &lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;RMI Scheduler(0)&quot; #184 daemon prio=10 os_prio=0 tid=0x000000000a133800 nid=0x5509 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007f81f7648000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;br/&gt;
        at java.lang.Thread.isInterrupted(Native Method) &lt;br/&gt;
        at java.lang.Thread.interrupted(Thread.java:944) &lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.checkInterruptWhileWaiting(AbstractQueuedSynchronizer.java:2002)&lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2079) &lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093) &lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809) &lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067) &lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127) &lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;/p&gt;

&lt;p&gt;&quot;agentsc-2-thread-1&quot; #33 daemon prio=5 os_prio=0 tid=0x0000000005ba8000 nid=0x5428 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007f81fcfac000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (parking) &lt;br/&gt;
        at sun.misc.Unsafe.park(Native Method) &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parking to wait for &amp;lt;0x00007f8298183628&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)&lt;br/&gt;
        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215) &lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078) &lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093) &lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809) &lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067) &lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127) &lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;TrackerProcessor&quot; #32 daemon prio=5 os_prio=0 tid=0x0000000005ba9800 nid=0x5427 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007f81fd02d000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: WAITING (parking) &lt;br/&gt;
        at sun.misc.Unsafe.park(Native Method) &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parking to wait for &amp;lt;0x00007f82a99fe140&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)&lt;br/&gt;
        at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175) &lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039) &lt;br/&gt;
        at java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:403) &lt;br/&gt;
        at com.manageengine.apminsight.agent.trackers.TrackerProcessor.doExtract(TrackerProcessor.java:91) &lt;br/&gt;
        at com.manageengine.apminsight.agent.trackers.TrackerProcessor.doWork(TrackerProcessor.java:72) &lt;br/&gt;
        at com.manageengine.apminsight.agent.trackers.TrackerProcessor.run(TrackerProcessor.java:58) &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;agentsc-1-thread-1&quot; #31 daemon prio=5 os_prio=0 tid=0x0000000004e8b000 nid=0x5426 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007f81fd2ae000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;br/&gt;
        at java.lang.Long.valueOf(Long.java:840) &lt;br/&gt;
        at com.manageengine.apminsight.agent.metrics.data.transport.MetricDataDispatcher.run(MetricDataDispatcher.java:49) &lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) &lt;br/&gt;
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) &lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)&lt;br/&gt;
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) &lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) &lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) &lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;/p&gt;

&lt;p&gt;&quot;GC Daemon&quot; #28 daemon prio=2 os_prio=0 tid=0x0000000005537800 nid=0x5423 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007f81fd5b0000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (on object monitor) &lt;br/&gt;
        at java.lang.Object.wait(Native Method) &lt;br/&gt;
        at sun.misc.GC$Daemon.run(GC.java:117) &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00007f829cc36860&amp;gt; (a sun.misc.GC$LatencyLock)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;Java2D Disposer&quot; #27 daemon prio=10 os_prio=0 tid=0x0000000004c0f000 nid=0x5422 in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007f81fd631000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: WAITING (on object monitor) &lt;br/&gt;
        at java.lang.Object.wait(Native Method) &lt;br/&gt;
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143) &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00007f829cc18fb0&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)&lt;br/&gt;
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164) &lt;br/&gt;
        at sun.java2d.Disposer.run(Disposer.java:148) &lt;br/&gt;
        at java.lang.Thread.run(Thread.java:745) &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;Service Thread&quot; #26 daemon prio=9 os_prio=0 tid=0x000000000463c000 nid=0x5420 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C1 CompilerThread14&quot; #25 daemon prio=9 os_prio=0 tid=0x000000000448a000 nid=0x541f waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C1 CompilerThread13&quot; #24 daemon prio=9 os_prio=0 tid=0x0000000004486800 nid=0x541e waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C1 CompilerThread12&quot; #23 daemon prio=9 os_prio=0 tid=0x0000000004472000 nid=0x541d runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C1 CompilerThread11&quot; #22 daemon prio=9 os_prio=0 tid=0x0000000004465800 nid=0x541c runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C1 CompilerThread10&quot; #21 daemon prio=9 os_prio=0 tid=0x0000000004467800 nid=0x541b waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C2 CompilerThread9&quot; #20 daemon prio=9 os_prio=0 tid=0x0000000004462800 nid=0x541a waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C2 CompilerThread8&quot; #19 daemon prio=9 os_prio=0 tid=0x0000000004451000 nid=0x5419 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C2 CompilerThread7&quot; #18 daemon prio=9 os_prio=0 tid=0x000000000443e800 nid=0x5418 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C2 CompilerThread6&quot; #17 daemon prio=9 os_prio=0 tid=0x0000000004431800 nid=0x5417 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C2 CompilerThread5&quot; #16 daemon prio=9 os_prio=0 tid=0x000000000441f800 nid=0x5416 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C2 CompilerThread4&quot; #15 daemon prio=9 os_prio=0 tid=0x000000000440a800 nid=0x5415 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C2 CompilerThread3&quot; #14 daemon prio=9 os_prio=0 tid=0x00000000043d8000 nid=0x5414 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C2 CompilerThread2&quot; #13 daemon prio=9 os_prio=0 tid=0x00000000043b4000 nid=0x5413 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C2 CompilerThread1&quot; #12 daemon prio=9 os_prio=0 tid=0x00000000043b1800 nid=0x5412 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;C2 CompilerThread0&quot; #11 daemon prio=9 os_prio=0 tid=0x00000000043a8800 nid=0x5411 waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;AsyncFileHandlerWriter-258952499&quot; #8 daemon prio=5 os_prio=0 tid=0x000000000427f000 nid=0x540f runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007f9d9808c000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: TIMED_WAITING (parking) &lt;br/&gt;
        at sun.misc.Unsafe.park(Native Method) &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;parking to wait for &amp;lt;0x00007f82980abe10&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)&lt;br/&gt;
        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215) &lt;br/&gt;
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078) &lt;br/&gt;
        at java.util.concurrent.LinkedBlockingDeque.pollFirst(LinkedBlockingDeque.java:522) &lt;br/&gt;
        at java.util.concurrent.LinkedBlockingDeque.poll(LinkedBlockingDeque.java:684) &lt;br/&gt;
        at org.apache.juli.AsyncFileHandler$LoggerThread.run(AsyncFileHandler.java:144) &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;Signal Dispatcher&quot; #5 daemon prio=9 os_prio=0 tid=0x000000000419d800 nid=0x540e waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;Surrogate Locker Thread (Concurrent GC)&quot; #4 daemon prio=9 os_prio=0 tid=0x000000000419b800 nid=0x540d waiting on condition &lt;span class=&quot;error&quot;&gt;&amp;#91;0x0000000000000000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;/p&gt;

&lt;p&gt;&quot;Finalizer&quot; #3 daemon prio=8 os_prio=0 tid=0x000000000416b000 nid=0x540c in Object.wait() &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007f9d982e2000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: WAITING (on object monitor) &lt;br/&gt;
        at java.lang.Object.wait(Native Method) &lt;br/&gt;
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143) &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x00007f8298013c68&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)&lt;br/&gt;
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164) &lt;br/&gt;
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:209) &lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&quot;Reference Handler&quot; #2 daemon prio=10 os_prio=0 tid=0x0000000004163000 nid=0x540b runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007f9d98363000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;br/&gt;
        at sun.misc.Unsafe.freeMemory(Native Method) &lt;br/&gt;
        at java.nio.DirectByteBuffer$Deallocator.run(DirectByteBuffer.java:94) &lt;br/&gt;
        at sun.misc.Cleaner.clean(Cleaner.java:143) &lt;br/&gt;
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:166) &lt;/p&gt;

&lt;p&gt;&quot;main&quot; #1 prio=5 os_prio=0 tid=0x0000000001a39800 nid=0x53d2 runnable &lt;span class=&quot;error&quot;&gt;&amp;#91;0x00007fff754a5000&amp;#93;&lt;/span&gt; &lt;br/&gt;
   java.lang.Thread.State: RUNNABLE &lt;br/&gt;
        at sun.reflect.ReflectionFactory.newMethodAccessor(ReflectionFactory.java:157) &lt;br/&gt;
        at java.lang.reflect.Method.acquireMethodAccessor(Method.java:563) &lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:495) &lt;br/&gt;
        at org.apache.commons.daemon.support.DaemonLoader.destroy(DaemonLoader.java:289) &lt;/p&gt;

&lt;p&gt;&quot;VM Thread&quot; os_prio=0 tid=0x000000000415e000 nid=0x540a runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#0 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a50800 nid=0x53d3 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#1 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a52000 nid=0x53d4 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#2 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a54000 nid=0x53d5 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#3 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a55800 nid=0x53d6 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#4 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a57800 nid=0x53d7 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#5 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a59000 nid=0x53d8 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#6 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a5b000 nid=0x53d9 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#7 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a5c800 nid=0x53da runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#8 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a5e800 nid=0x53db runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#9 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a60000 nid=0x53dc runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#10 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a62000 nid=0x53dd runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#11 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a63800 nid=0x53de runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#12 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a65800 nid=0x53df runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#13 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a67000 nid=0x53e0 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#14 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a69000 nid=0x53e1 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#15 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a6a800 nid=0x53e2 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#16 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a6c800 nid=0x53e3 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#17 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a6e000 nid=0x53e4 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#18 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a70000 nid=0x53e5 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#19 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a71800 nid=0x53e6 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#20 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a73000 nid=0x53e7 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#21 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a75000 nid=0x53e8 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#22 (Parallel GC Threads)&quot; os_prio=0 tid=0x0000000001a76800 nid=0x53e9 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Main Concurrent Mark GC Thread&quot; os_prio=0 tid=0x0000000001ae9000 nid=0x5402 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#0 (G1 Parallel Marking Threads)&quot; os_prio=0 tid=0x0000000001aeb000 nid=0x5403 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#1 (G1 Parallel Marking Threads)&quot; os_prio=0 tid=0x0000000001aec800 nid=0x5404 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#2 (G1 Parallel Marking Threads)&quot; os_prio=0 tid=0x0000000001aee800 nid=0x5405 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#3 (G1 Parallel Marking Threads)&quot; os_prio=0 tid=0x0000000001af0000 nid=0x5406 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#4 (G1 Parallel Marking Threads)&quot; os_prio=0 tid=0x0000000001af2000 nid=0x5407 runnable &lt;/p&gt;

&lt;p&gt;&quot;Gang worker#5 (G1 Parallel Marking Threads)&quot; os_prio=0 tid=0x0000000001af3800 nid=0x5408 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#0&quot; os_prio=0 tid=0x0000000001aa5000 nid=0x5401 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#1&quot; os_prio=0 tid=0x0000000001aa3000 nid=0x5400 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#2&quot; os_prio=0 tid=0x0000000001aa1000 nid=0x53ff runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#3&quot; os_prio=0 tid=0x0000000001a9f000 nid=0x53fe runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#4&quot; os_prio=0 tid=0x0000000001a9d800 nid=0x53fd runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#5&quot; os_prio=0 tid=0x0000000001a9b800 nid=0x53fc runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#6&quot; os_prio=0 tid=0x0000000001a99800 nid=0x53fb runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#7&quot; os_prio=0 tid=0x0000000001a98000 nid=0x53fa runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#8&quot; os_prio=0 tid=0x0000000001a96000 nid=0x53f9 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#9&quot; os_prio=0 tid=0x0000000001a94000 nid=0x53f8 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#10&quot; os_prio=0 tid=0x0000000001a92800 nid=0x53f7 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#11&quot; os_prio=0 tid=0x0000000001a90800 nid=0x53f6 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#12&quot; os_prio=0 tid=0x0000000001a8e800 nid=0x53f5 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#13&quot; os_prio=0 tid=0x0000000001a8c800 nid=0x53f4 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#14&quot; os_prio=0 tid=0x0000000001a8b000 nid=0x53f3 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#15&quot; os_prio=0 tid=0x0000000001a89000 nid=0x53f2 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#16&quot; os_prio=0 tid=0x0000000001a87000 nid=0x53f1 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#17&quot; os_prio=0 tid=0x0000000001a85800 nid=0x53f0 runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#18&quot; os_prio=0 tid=0x0000000001a83800 nid=0x53ef runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#19&quot; os_prio=0 tid=0x0000000001a81800 nid=0x53ee runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#20&quot; os_prio=0 tid=0x0000000001a7f800 nid=0x53ed runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#21&quot; os_prio=0 tid=0x0000000001a7e000 nid=0x53ec runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#22&quot; os_prio=0 tid=0x0000000001a7c000 nid=0x53eb runnable &lt;/p&gt;

&lt;p&gt;&quot;G1 Concurrent Refinement Thread#23&quot; os_prio=0 tid=0x0000000001a7a800 nid=0x53ea runnable &lt;/p&gt;

&lt;p&gt;&quot;String Deduplication Thread&quot; os_prio=0 tid=0x00000000040e4000 nid=0x5409 runnable &lt;/p&gt;

&lt;p&gt;&quot;VM Periodic Task Thread&quot; os_prio=0 tid=0x000000000463f000 nid=0x5421 waiting on condition &lt;/p&gt;</comment>
                            <comment id="15635855" author="markt" created="Fri, 4 Nov 2016 09:57:49 +0000"  >&lt;p&gt;One small correction to this report:&lt;br/&gt;
GC time is proportional to the size of the live objects on the heap, not the size of the GC&apos;able objects.&lt;/p&gt;

&lt;p&gt;I suspect the calls to explicit GC date back to when the automatic GC was not as reliable as it is now. I agree there should be no need for those calls. I have removed them.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fl27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-332] pid file not readable on Windows 7/8/2008</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-332</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The pid file created by --PidFile option is exclusively locked and thus not readable by any other processes, making it useless as an informational file.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://user.commons.apache.narkive.com/XJOu6zaP/daemon-unable-to-read-tomcat-pid-file-created-by-tomcat-process&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://user.commons.apache.narkive.com/XJOu6zaP/daemon-unable-to-read-tomcat-pid-file-created-by-tomcat-process&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7/8/2008&lt;/p&gt;</environment>
        <key id="12782746">DAEMON-332</key>
            <summary>pid file not readable on Windows 7/8/2008</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hugh.nguyen.82">Hugh Nguyen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Mar 2015 02:34:58 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:13 +0000</updated>
                            <resolved>Fri, 4 Nov 2016 14:58:42 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15432709" author="mbang" created="Tue, 23 Aug 2016 12:36:18 +0000"  >&lt;p&gt;Would it be possible to get this fixed ? &lt;/p&gt;</comment>
                            <comment id="15432723" author="markt" created="Tue, 23 Aug 2016 12:49:35 +0000"  >&lt;p&gt;Patches welcome&lt;/p&gt;</comment>
                            <comment id="15636568" author="markt" created="Fri, 4 Nov 2016 14:54:31 +0000"  >&lt;p&gt;This is as as result of the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-188&quot; title=&quot;PID file not removed when service stops, preventing next start&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-188&quot;&gt;&lt;del&gt;DAEMON-188&lt;/del&gt;&lt;/a&gt;, specifically the use of FILE_FLAG_DELETE_ON_CLOSE. We need to remove that flag and return to explicitly deleting the file while retaining the change and fails the start if an existing PID file cannot be deleted.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26wb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-328] Tomcat windows service doesn&apos;t start when installed in a folder containing non-standard characters.</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-328</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;1. On an English Windows 7, 64bits unzip tomcat7 (7.0.54) in a folder name containing Japanese characters, like: &quot;C:\TF&#12496;&#12483;&#12481;&#12499;&#12523;&#12480;&#12540;&quot; &lt;br/&gt;
2. Call &apos;service.bat install&apos;, worked well, Tomcat7 service appears in Windows &lt;br/&gt;
3. Trying to start the service failed. Below is the commons-daemon log:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:55:43&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2728] Commons Daemon procrun (1.0.15.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:55:43&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2728] Service Tomcat754 name Apache Tomcat 7.0 Tomcat754&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:55:43&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2728] Service &apos;Tomcat754&apos; installed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:55:43&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2728] Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:55:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 7596] Commons Daemon procrun (1.0.15.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:55:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 7596] Running &apos;Tomcat754&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:55:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 6720] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:55:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 7472] FindClass org/apache/catalina/startup/Bootstrap failed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:55:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 6720] Failed to start Java&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:55:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 6720] ServiceStart returned 4&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:55:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 7596] Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:55:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 7596] Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1679) [ 3308] Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1683) [ 3308] Commons Daemon procrun (1.0.15.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1596) [ 3308] Running &apos;Tomcat754&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1374) [ 5040] Inside ServiceMain...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) [ 5040] reportServiceStatusE: 2, 0, 3000, 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1127) [ 5040] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:233 ) [ 5040] loading jvm &apos;C:\Program Files\Java\jdk1.7.0_02\jre\bin\server\jvm.dll&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 5808] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; -Dcatalina.home=c:\TF???????\apache-tomcat-7.0.54&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 5808] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; -Dcatalina.base=c:\TF???????\apache-tomcat-7.0.54&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 5808] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; -Djava.endorsed.dirs=c:\TF???????\apache-tomcat-7.0.54\endorsed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 5808] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; -Djava.io.tmpdir=c:\TF???????\apache-tomcat-7.0.54\temp&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 5808] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 5808] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; -Djava.util.logging.config.file=c:\TF???????\apache-tomcat-7.0.54\conf\logging.properties&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 5808] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt; -Djava.class.path=c:\TF?????&lt;cite&gt;\apache-tomcat-7.0.54\bin\bootstrap.jar;c:\TF&lt;/cite&gt;?????\apache-tomcat-7.0.54\bin\tomcat-juli.jar&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 5808] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;7&amp;#93;&lt;/span&gt; exit&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 5808] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;8&amp;#93;&lt;/span&gt; -Xms128m&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:704 ) [ 5808] Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;9&amp;#93;&lt;/span&gt; -Xmx256m&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( javajni.c:863 ) [ 5808] FindClass org/apache/catalina/startup/Bootstrap failed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:964 ) [ 5808] Java Worker thread finished org/apache/catalina/startup/Bootstrap:main with status=3&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:1183) [ 5040] Failed to start Java&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:1536) [ 5040] ServiceStart returned 4&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) [ 5040] reportServiceStatusE: 1, 1066, 0, 4&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1598) [ 3308] Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 15:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1764) [ 3308] Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 16:03:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 5348] Commons Daemon procrun (1.0.15.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 16:03:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 5348] Deleting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 16:03:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 5348] Delete service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-12-11 16:03:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 5348] Commons Daemon procrun finished&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Windows 7, 64bits, English version&lt;/p&gt;</environment>
        <key id="12761082">DAEMON-328</key>
            <summary>Tomcat windows service doesn&apos;t start when installed in a folder containing non-standard characters.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="funky_ro@yahoo.com">Piri Babuscov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Dec 2014 15:10:59 +0000</created>
                <updated>Sat, 28 Oct 2017 18:57:35 +0000</updated>
                            <resolved>Sat, 28 Oct 2017 18:57:35 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16223702" author="markt" created="Sat, 28 Oct 2017 18:57:35 +0000"  >&lt;p&gt;This is a Java issue, not an Apache Tomcat or Apache Commons Daemon issue. java doesn&apos;t seem to be able to handle some characters in the class path command line option.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23bk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-327] New -cwd default needlessly breaks backwards compatibility</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-327</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Before 1.0.15, jsvc did not change working directory in any way, so the way to set the cwd for an application was just to cd to the proper directory before calling jsvc.&lt;/p&gt;

&lt;p&gt;Starting with 1.0.15, the -cwd option was added, which is indeed a useful addition.&lt;/p&gt;

&lt;p&gt;However, 1.0.15 now &lt;b&gt;always&lt;/b&gt; changes directory, with / as the default. This means that -cwd now basically has to be used if a specific cwd is needed. Of course, -cwd is an invalid option with&lt;br/&gt;
+versions before 1.0.15, so now it&apos;s impossible to make an init script that works with both older and newer jsvc setups.&lt;/p&gt;

&lt;p&gt;It&apos;s not clear to me why leaving the cwd as is if -cwd isn&apos;t used wasn&apos;t kept.&lt;/p&gt;

&lt;p&gt;As an extra annoyance, -version doesn&apos;t work without also setting seemingly unrelated options, so adding code to set -cwd based on jsvc version is harder than it should be.&lt;/p&gt;</description>
                <environment>&lt;p&gt;debian/amd64&lt;/p&gt;</environment>
        <key id="12756702">DAEMON-327</key>
            <summary>New -cwd default needlessly breaks backwards compatibility</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fg">Frank Gevaerts</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Nov 2014 13:52:29 +0000</created>
                <updated>Fri, 20 Oct 2017 10:28:34 +0000</updated>
                            <resolved>Fri, 20 Oct 2017 10:28:34 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16212471" author="markt" created="Fri, 20 Oct 2017 10:28:34 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-264&quot; title=&quot;Change current working directory to / when daemonising&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-264&quot;&gt;&lt;del&gt;DAEMON-264&lt;/del&gt;&lt;/a&gt; for the reasoning as to why this was implemented the way it was.&lt;/p&gt;

&lt;p&gt;I don&apos;t see a way to keep everyone happy on this. On balance, I agree with the reasoning in &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-264&quot; title=&quot;Change current working directory to / when daemonising&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-264&quot;&gt;&lt;del&gt;DAEMON-264&lt;/del&gt;&lt;/a&gt; so I am resolving this as WONTFIX.&lt;/p&gt;

&lt;p&gt;Note that the next release is expected to be 1.1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22ltj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-325] missing location in location.c location_jvm_configure for Darwin</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-325</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;On OS_DARWIN the native/location.c is missing a location and java.c is missing a check/location for libverify.dylib&lt;/p&gt;

&lt;p&gt;&amp;#8212; location.c.old	2014-11-01 18:53:45.000000000 +0100&lt;br/&gt;
+++ location.c	2014-11-01 18:54:15.000000000 +0100&lt;br/&gt;
@@ -144,6 +144,7 @@ char *location_jvm_default[] = {&lt;br/&gt;
 char *location_jvm_configured[] = {&lt;br/&gt;
 #if defined(OS_DARWIN)&lt;br/&gt;
     &quot;$JAVA_HOME/../Libraries/lib$VM_NAME.dylib&quot;,&lt;br/&gt;
+    &quot;$JAVA_HOME/jre/lib/$VM_NAME/libjvm.dylib&quot;,&lt;br/&gt;
 #elif defined(OS_CYGWIN)&lt;br/&gt;
     &quot;$JAVA_HOME/jre/bin/$VM_NAME/jvm.dll&quot;,              /* Sun JDK 1.3 */&lt;br/&gt;
 #elif defined(OS_LINUX) || defined(OS_SOLARIS) || defined(OS_BSD) || defined(OS_FREEBSD) || defined(OS_TRU64)&lt;/p&gt;


&lt;p&gt;&amp;#8212; /Users/rplb/java.c.orig	2014-11-02 12:00:16.000000000 +0100&lt;br/&gt;
+++ /Users/rplb/java.c	2014-11-02 12:16:25.000000000 +0100&lt;br/&gt;
@@ -135,8 +135,15 @@&lt;br/&gt;
 {&lt;br/&gt;
 #ifdef OS_DARWIN&lt;br/&gt;
     dso_handle apph = NULL;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;char appf&lt;span class=&quot;error&quot;&gt;&amp;#91;1024&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+    char repl&lt;span class=&quot;error&quot;&gt;&amp;#91;1024&amp;#93;&lt;/span&gt;;&lt;br/&gt;
     struct stat sb;&lt;br/&gt;
+    char *jvm_libs[] = 
{
+        &quot;$JAVA_HOME/../Libraries/libjvm_compat.dylib&quot;,
+        &quot;$JAVA_HOME/../Libraries/libappshell.dylib&quot;,
+        &quot;$JAVA_HOME/jre/lib/libverify.dylib&quot;,
+        NULL,
+    }
&lt;p&gt;;&lt;br/&gt;
+    &lt;br/&gt;
 #endif /* ifdef OS_DARWIN */&lt;br/&gt;
     jvm_create_t symb = NULL;&lt;br/&gt;
     JNINativeMethod nativemethods&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;;&lt;br/&gt;
@@ -184,30 +191,33 @@&lt;br/&gt;
        JVM 1.4.1 through 1.5.* The library name is libjvm_compat.dylib&lt;br/&gt;
        starting with JVM 1.6 on OS X 10.6 the library name is libverify.dylib.&lt;br/&gt;
      */&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;if (replace(appf, 1024, &quot;$JAVA_HOME/../Libraries/libappshell.dylib&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;$JAVA_HOME&quot;, data-&amp;gt;path) != 0) 
{
-        log_error(&quot;Cannot replace values in loader library&quot;);
-        return false;
-    }&lt;/li&gt;
	&lt;li&gt;if (stat(appf, &amp;amp;sb)) {&lt;/li&gt;
	&lt;li&gt;if (replace(appf, 1024, &quot;$JAVA_HOME/../Libraries/libjvm_compat.dylib&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;$JAVA_HOME&quot;, data-&amp;gt;path) != 0) {&lt;br/&gt;
+    x = 0;&lt;br/&gt;
+    char *appf = NULL;&lt;br/&gt;
+    while (jvm_libs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; != NULL) {&lt;br/&gt;
+        char *orig = jvm_libs&lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt;;&lt;br/&gt;
+        int k = 0;&lt;br/&gt;
+        &lt;br/&gt;
+        k = replace(repl, 1024, orig, &quot;$JAVA_HOME&quot;, data-&amp;gt;path);&lt;br/&gt;
+        if (k != 0) 
{
             log_error(&quot;Cannot replace values in loader library&quot;);
             return false;
         }&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;if (stat(appf, &amp;amp;sb)) {&lt;/li&gt;
	&lt;li&gt;if (replace(appf, 1024, &quot;$JAVA_HOME/../Libraries/libverify.dylib&quot;,&lt;/li&gt;
	&lt;li&gt;&quot;$JAVA_HOME&quot;, data-&amp;gt;path) != 0) {&lt;/li&gt;
	&lt;li&gt;log_error(&quot;Cannot replace values in loader library&quot;);&lt;/li&gt;
	&lt;li&gt;return false;&lt;br/&gt;
+        &lt;br/&gt;
+        if (stat(repl, &amp;amp;sb)) 
{
+            log_debug(&quot;Cannot load the shell library %s&quot;, repl);
+            x++;
+        }
&lt;p&gt; else &lt;/p&gt;
{
+            appf = repl;
+            break;
         }
&lt;p&gt;     }&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;apph = dso_link(appf);&lt;/li&gt;
	&lt;li&gt;if (apph == NULL) {&lt;/li&gt;
	&lt;li&gt;log_error(&quot;Cannot load required shell library %s&quot;, appf);&lt;br/&gt;
+    &lt;br/&gt;
+    if (appf == NULL) 
{
+        log_error(&quot;Cannot load none of the required shell library&quot;);
         return false;
     }
&lt;p&gt;+    &lt;br/&gt;
+    apph = dso_link(appf);&lt;br/&gt;
     log_debug(&quot;Shell library %s loaded&quot;, appf);&lt;br/&gt;
 #endif /* ifdef OS_DARWIN */&lt;br/&gt;
 #if defined(OSD_POSIX)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;Mac OS X and JDK 7 &lt;/p&gt;</environment>
        <key id="12752212">DAEMON-325</key>
            <summary>missing location in location.c location_jvm_configure for Darwin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="p-leberre">philippe le berre</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Nov 2014 18:02:43 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:10 +0000</updated>
                            <resolved>Fri, 20 Oct 2017 07:54:22 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14193790" author="p-leberre" created="Sun, 2 Nov 2014 11:21:13 +0000"  >&lt;p&gt;java.c diff/patch&lt;/p&gt;</comment>
                            <comment id="14193791" author="p-leberre" created="Sun, 2 Nov 2014 11:21:32 +0000"  >&lt;p&gt;location.c diff/patch&lt;/p&gt;</comment>
                            <comment id="16212311" author="markt" created="Fri, 20 Oct 2017 07:54:22 +0000"  >&lt;p&gt;This was fixed in 1.0.x and forward ported to 1.1.x several months ago.&lt;/p&gt;

&lt;p&gt;I&apos;m currently working on getting a 1.1 release out that supports Java 9 - hopefully in the next couple of weeks.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12634662">DAEMON-281</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12678782" name="java.c.diff" size="2321" author="p-leberre" created="Sun, 2 Nov 2014 11:21:13 +0000"/>
                            <attachment id="12678783" name="location.c.diff" size="531" author="p-leberre" created="Sun, 2 Nov 2014 11:21:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21uwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-324] [home.c:130]: (error) Resource leak: cfgf</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-324</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;$ fgrep cfgf ../BUILD/commons-daemon-1.0.15-src/src/native/unix/native/home.c&lt;br/&gt;
    FILE *cfgf = fopen(data-&amp;gt;cfgf, &quot;r&quot;);&lt;br/&gt;
    if (cfgf == NULL) {&lt;br/&gt;
        log_debug(&quot;Can&apos;t open %s\n&quot;, data-&amp;gt;cfgf);&lt;br/&gt;
    while ((ret = fgets(buf, 1024, cfgf)) != NULL) {&lt;br/&gt;
    char *cfgf = NULL;&lt;/p&gt;

&lt;p&gt;Suggest add call to fclose.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12746994">DAEMON-324</key>
            <summary>[home.c:130]: (error) Resource leak: cfgf</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dcb">David Binderman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Oct 2014 11:26:44 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:07 +0000</updated>
                            <resolved>Fri, 20 Oct 2017 10:23:31 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16212470" author="markt" created="Fri, 20 Oct 2017 10:23:31 +0000"  >&lt;p&gt;Fixed. Thanks for the report.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20zdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-322] Missing Windows 2012 R2 support</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-322</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Tomcat uses Procrun to install a Windows service.&lt;/p&gt;

&lt;p&gt;I opened a bug at the tomcat tracker (&lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=56929&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=56929&lt;/a&gt;) and was pointed out to open it here. Windows 8.1 is probably also affected too.&lt;/p&gt;

&lt;p&gt;Here is the Tomcat bug:&lt;/p&gt;

&lt;p&gt;The server information while running as a Windows service on 2012 R2 is wrong.&lt;/p&gt;

&lt;p&gt;The system is identified as:&lt;br/&gt;
 OS Name: Windows Server 2012&lt;br/&gt;
 OS Version: 6.2&lt;/p&gt;

&lt;p&gt;It is correct when starting tomcat with startup.bat:&lt;br/&gt;
 OS Name: Windows Server 2012 R2&lt;br/&gt;
 OS Version: 6.3&lt;/p&gt;

&lt;p&gt;How to reproduce:&lt;/p&gt;

&lt;p&gt;1. Install the Windows service from apache-tomcat-7.0.55\bin&lt;br/&gt;
   service.bat install Test&lt;br/&gt;
2. Activate the configuration for the /manager/ access in conf\tomcat-users.xml&lt;br/&gt;
3. Start the service&lt;br/&gt;
4. Navigate to the /manager/status page&lt;br/&gt;
5. The &quot;Server Information&quot; contains the wrong OS Version&lt;br/&gt;
6. Stop the Windows service&lt;br/&gt;
7. Start the tomcat with the startup.bat script&lt;br/&gt;
8. Check the /manager/status page again which now contains the correct version&lt;/p&gt;

&lt;p&gt;The issue could be related due too the service binary which needs to be recompiled for:&lt;br/&gt;
&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/windows/desktop/ms724832%28v=vs.85%29.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/windows/desktop/ms724832%28v=vs.85%29.aspx&lt;/a&gt;&lt;br/&gt;
and the link inside it for:&lt;br/&gt;
&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/windows/desktop/dn481241%28v=vs.85%29.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/windows/desktop/dn481241%28v=vs.85%29.aspx&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 2012 R2&lt;br/&gt;
Tomcat 7.0.55&lt;br/&gt;
Java 7u67&lt;/p&gt;</environment>
        <key id="12740085">DAEMON-322</key>
            <summary>Missing Windows 2012 R2 support</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bernd2">Bernd Ernesti</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Sep 2014 08:29:29 +0000</created>
                <updated>Mon, 30 Oct 2017 13:07:23 +0000</updated>
                            <resolved>Mon, 30 Oct 2017 13:07:23 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14127049" author="sebb@apache.org" created="Tue, 9 Sep 2014 14:46:26 +0000"  >&lt;p&gt;It looks like Tomcat Manager uses Java properties to report the OS version information.&lt;/p&gt;

&lt;p&gt;However DAEMON appears to use GetVersion&lt;span class=&quot;error&quot;&gt;&amp;#91;Ex&amp;#93;&lt;/span&gt;&lt;br/&gt;
These are now deprecated; there does not appear to be an official way to get the actual OS version going forward from 8.1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;It looks like the intention is to stop applications from using the OS version for feature detection. This breaks version display.&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I assume that Java has code that is able to set the system property correctly.&lt;br/&gt;
Is this documented anywhere?&lt;/p&gt;</comment>
                            <comment id="14127863" author="b.eckenfels" created="Wed, 10 Sep 2014 00:36:58 +0000"  >&lt;p&gt;The Java logic is here, and it still uses GetVersionEx (and a manifest):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://hg.openjdk.java.net/jdk8/jdk8/jdk/rev/40221b09812f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hg.openjdk.java.net/jdk8/jdk8/jdk/rev/40221b09812f&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/40221b09812f/src/windows/native/java/lang/java_props_md.c#l353&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/40221b09812f/src/windows/native/java/lang/java_props_md.c#l353&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14128706" author="sebb@apache.org" created="Wed, 10 Sep 2014 16:47:50 +0000"  >&lt;p&gt;Thanks very much.&lt;/p&gt;

&lt;p&gt;Seems a very fragile way of obtaining such basic information about the OS.&lt;br/&gt;
Looks like every binary that uses GetVersion will have to be updated for every new release.&lt;br/&gt;
So much for upwards compatibility.&lt;/p&gt;

&lt;p&gt;Unless DAEMON actually needs to display the version, it could just use the feature support API instead.&lt;br/&gt;
And/or maybe it can use the Java binary implementation somehow.&lt;/p&gt;</comment>
                            <comment id="14128750" author="b.eckenfels" created="Wed, 10 Sep 2014 17:16:11 +0000"  >&lt;p&gt;BTW: it looks like in the openjdk tracker contains also a case where JVM itself calculates the wrong os properties when jvm.dll and custom launchers are used.&lt;/p&gt;

&lt;p&gt;So I am not sure what this bug is talking about, but if it is the calculation of system properties it could actually be the very same bug:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8057122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8057122&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There it looks like there is a combination of upstream(backported) fixes and a correct manifest needed to make the custom launcher work. I am afraid this is needed to &quot;fix&quot; JVM behavior, so we should allign the manifests of the daemons launcher with jdk launcher.&lt;/p&gt;</comment>
                            <comment id="14144808" author="bernd2" created="Tue, 23 Sep 2014 13:54:07 +0000"  >&lt;p&gt;See the latest posting in that thread, where a manifest solved this issue:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-8057122?focusedCommentId=13556218&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13556218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-8057122?focusedCommentId=13556218&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13556218&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14248203" author="bernd2" created="Tue, 16 Dec 2014 12:47:10 +0000"  >&lt;p&gt;Is there any update for this issue?&lt;/p&gt;</comment>
                            <comment id="16224888" author="markt" created="Mon, 30 Oct 2017 13:07:23 +0000"  >&lt;p&gt;Testing shows that this is a JVM issue, not a Commons Daemon or Tomcat issue.&lt;/p&gt;

&lt;p&gt;I can repeat these results on Windows Server 2012 R2 with Java 7u65 and 7u80. I get the correct results if I switch to Java 8u144.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ztrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-320] Can&apos;t bind raw sockets in Daemon init method</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-320</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The documentation states that Daemon.init might be called with super user privileges on systems that support that concept but on Linux compiled with libcap and -user specified it is called as that user with a few capabilities set which are removed before start is called. This is based on my reading of jsvc-unix.c which might be wrong.&lt;/p&gt;

&lt;p&gt;This is fine if you want to bind to a socket but inadequate if you want to use a capability which is not included. In my case I need CAP_NET_RAW (utilized by JNI) but the way jsvc is implemented makes it impossible to do so unless I run the daemon as root or recompile without libcap.&lt;/p&gt;

&lt;p&gt;I suggest either adding a command line flag which makes it remain as root during init or alternatively provide a way to specify additional capabilities needed during the init call.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux with open JDK 7 and jsvc 1.0.8 (bug still exists in 1.0.15)&lt;/p&gt;</environment>
        <key id="12724460">DAEMON-320</key>
            <summary>Can&apos;t bind raw sockets in Daemon init method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="peter_spikings">Peter Spikings</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jun 2014 14:30:21 +0000</created>
                <updated>Mon, 30 Jun 2014 14:31:30 +0000</updated>
                                            <version>1.0.15</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402643</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xay7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>402710</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-319] Add mips ABI n32, n64 support </title>
                <link>https://issues.apache.org/jira/browse/DAEMON-319</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Add support for mips ABI n32 and n64. Tested on mips64el device.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722427">DAEMON-319</key>
            <summary>Add mips ABI n32, n64 support </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sphinx1314">Sphinx Jiang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jun 2014 06:59:00 +0000</created>
                <updated>Thu, 23 Nov 2017 09:48:27 +0000</updated>
                            <resolved>Thu, 19 Jun 2014 12:34:08 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14037303" author="ebourg" created="Thu, 19 Jun 2014 12:34:08 +0000"  >&lt;p&gt;Patch applied, thank you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12651376" name="mips_abi_n32_n64_support.diff" size="775" author="sphinx1314" created="Thu, 19 Jun 2014 07:02:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400618</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wynb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400712</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-318] children (controller) process doesnt use correct umask value</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-318</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Expected behavior:&lt;br/&gt;
after issuing -umask 002 to JSVC (with -tomcat-user != root, e.g. &quot;tomcat&quot;), child process (controller) have umask = 2&lt;/p&gt;

&lt;p&gt;Actual behavior:&lt;br/&gt;
root process have umask = 2&lt;br/&gt;
child process have umask = 18&lt;/p&gt;

&lt;p&gt;After runing daemon start:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;NOTICE: jsvc umask of 002 allows write permission to group and/or other
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Running instances:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# ps aux | grep jsvc
root     11410  0.0  0.0  10436   480 ?        Ss   09:30   0:00 jsvc.exec -umask 002 -java-home /usr/lib/jvm/java-1.7.0 -user tomcat -pidfile /opt/apache/tomcat7/logs/catalina-daemon.pid -wait 10 -outfile /opt/apache/tomcat7/logs/catalina-daemon.out -errfile &amp;amp;1 -classpath /opt/apache/tomcat7/bin/bootstrap.jar:/opt/apache/tomcat7/bin/commons-daemon.jar:/opt/apache/tomcat7/bin/tomcat-juli.jar -Djava.util.logging.config.file=/opt/apache/tomcat7/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -server -Xms512m -Xmx1024m -XX:MaxPermSize=512m -Djava.awt.headless=true -Djava.endorsed.dirs= -Dcatalina.base=/opt/apache/tomcat7 -Dcatalina.home=/opt/apache/tomcat7 -Djava.io.tmpdir=/opt/apache/tomcat7/temp org.apache.catalina.startup.Bootstrap
tomcat   11411 89.9 26.7 3919288 1048692 ?     Sl   09:30   1:24 jsvc.exec -umask 002 -java-home /usr/lib/jvm/java-1.7.0 -user tomcat -pidfile /opt/apache/tomcat7/logs/catalina-daemon.pid -wait 10 -outfile /opt/apache/tomcat7/logs/catalina-daemon.out -errfile &amp;amp;1 -classpath /opt/apache/tomcat7/bin/bootstrap.jar:/opt/apache/tomcat7/bin/commons-daemon.jar:/opt/apache/tomcat7/bin/tomcat-juli.jar -Djava.util.logging.config.file=/opt/apache/tomcat7/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -server -Xms512m -Xmx1024m -XX:MaxPermSize=512m -Djava.awt.headless=true -Djava.endorsed.dirs= -Dcatalina.base=/opt/apache/tomcat7 -Dcatalina.home=/opt/apache/tomcat7 -Djava.io.tmpdir=/opt/apache/tomcat7/temp org.apache.catalina.startup.Bootstrap
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;GDB output:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# gdb --pid=11410
GNU gdb (GDB) Red Hat Enterprise Linux (7.2-60.el6_4.1)
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &amp;lt;http://gnu.org/licenses/gpl.html&amp;gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;x86_64-redhat-linux-gnu&quot;.
For bug reporting instructions, please see:
&amp;lt;http://www.gnu.org/software/gdb/bugs/&amp;gt;.
Attaching to process 11410
Reading symbols from /opt/apache/apache-tomcat-7.0.54/bin/commons-daemon-1.0.15-native-src/unix/jsvc...done.
Reading symbols from /lib64/libdl.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib64/libdl.so.2
Reading symbols from /lib64/libpthread.so.0...(no debugging symbols found)...done.
[Thread debugging using libthread_db enabled]
Loaded symbols for /lib64/libpthread.so.0
Reading symbols from /lib64/libc.so.6...(no debugging symbols found)...done.
Loaded symbols for /lib64/libc.so.6
Reading symbols from /lib64/ld-linux-x86-64.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib64/ld-linux-x86-64.so.2
Reading symbols from /lib64/libnss_files.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib64/libnss_files.so.2
0x00007fe71666e26e in waitpid () from /lib64/libpthread.so.0
Missing separate debuginfos, use: debuginfo-install glibc-2.12-1.132.el6_5.2.x86_64
(gdb) call umask(0)
$1 = 2
(gdb) call umask(2)
$2 = 0
(gdb) quit
A debugging session is active.


# gdb --pid=11411
GNU gdb (GDB) Red Hat Enterprise Linux (7.2-60.el6_4.1)
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &amp;lt;http://gnu.org/licenses/gpl.html&amp;gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;x86_64-redhat-linux-gnu&quot;.
For bug reporting instructions, please see:
&amp;lt;http://www.gnu.org/software/gdb/bugs/&amp;gt;.
Attaching to process 11411
Reading symbols from /opt/apache/apache-tomcat-7.0.54/bin/commons-daemon-1.0.15-native-src/unix/jsvc...done.
Reading symbols from /lib64/libdl.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib64/libdl.so.2
Reading symbols from /lib64/libpthread.so.0...(no debugging symbols found)...done.
[New LWP 11531]
[New LWP 11530]
[New LWP 11529]
[New LWP 11528]
[New LWP 11527]
[New LWP 11523]
[New LWP 11522]
[New LWP 11521]
[New LWP 11520]
[New LWP 11519]
[New LWP 11515]
[New LWP 11514]
[New LWP 11513]
[New LWP 11512]
[New LWP 11511]
[New LWP 11506]
[New LWP 11505]
[New LWP 11504]
[New LWP 11503]
[New LWP 11502]
[New LWP 11498]
[New LWP 11497]
[New LWP 11496]
[New LWP 11495]
[New LWP 11494]
[New LWP 11493]
[New LWP 11492]
[New LWP 11491]
[New LWP 11481]
[New LWP 11480]
[New LWP 11479]
[New LWP 11478]
[New LWP 11477]
[New LWP 11476]
[New LWP 11475]
[New LWP 11474]
[New LWP 11473]
[New LWP 11471]
[New LWP 11470]
[New LWP 11469]
[New LWP 11468]
[New LWP 11467]
[New LWP 11466]
[New LWP 11465]
[New LWP 11464]
[New LWP 11463]
[New LWP 11462]
[New LWP 11461]
[New LWP 11460]
[New LWP 11459]
[New LWP 11458]
[New LWP 11449]
[New LWP 11448]
[New LWP 11446]
[New LWP 11445]
[New LWP 11444]
[New LWP 11443]
[New LWP 11442]
[New LWP 11441]
[New LWP 11440]
[New LWP 11439]
[New LWP 11438]
[New LWP 11437]
[New LWP 11436]
[New LWP 11435]
[New LWP 11431]
[New LWP 11430]
[New LWP 11429]
[New LWP 11428]
[New LWP 11427]
[New LWP 11424]
[New LWP 11423]
[New LWP 11422]
[New LWP 11421]
[New LWP 11420]
[New LWP 11419]
[New LWP 11418]
[New LWP 11417]
[New LWP 11416]
[New LWP 11415]
[New LWP 11414]
[New LWP 11413]
[New LWP 11412]
[Thread debugging using libthread_db enabled]
Loaded symbols for /lib64/libpthread.so.0
Reading symbols from /lib64/libc.so.6...(no debugging symbols found)...done.
Loaded symbols for /lib64/libc.so.6
Reading symbols from /lib64/ld-linux-x86-64.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib64/ld-linux-x86-64.so.2
Reading symbols from /lib64/libnss_files.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib64/libnss_files.so.2
Reading symbols from /usr/lib/jvm/java-1.7.0/jre/lib/amd64/server/libjvm.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/jvm/java-1.7.0/jre/lib/amd64/server/libjvm.so
Reading symbols from /usr/lib64/libstdc++.so.6...(no debugging symbols found)...done.
Loaded symbols for /usr/lib64/libstdc++.so.6
Reading symbols from /lib64/libm.so.6...(no debugging symbols found)...done.
Loaded symbols for /lib64/libm.so.6
Reading symbols from /lib64/libgcc_s.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib64/libgcc_s.so.1
Reading symbols from /lib64/librt.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib64/librt.so.1
Reading symbols from /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libverify.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libverify.so
Reading symbols from /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libjava.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libjava.so
Reading symbols from /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libzip.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libzip.so
Reading symbols from /lib64/libz.so.1...(no debugging symbols found)...done.
Loaded symbols for /lib64/libz.so.1
Reading symbols from /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libnio.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libnio.so
Reading symbols from /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libnet.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libnet.so
Reading symbols from /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libmanagement.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libmanagement.so
Reading symbols from /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libj2pkcs11.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libj2pkcs11.so
Reading symbols from /usr/lib64/libnss3.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib64/libnss3.so
Reading symbols from /usr/lib64/libnssutil3.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib64/libnssutil3.so
Reading symbols from /lib64/libplc4.so...(no debugging symbols found)...done.
Loaded symbols for /lib64/libplc4.so
Reading symbols from /lib64/libplds4.so...(no debugging symbols found)...done.
Loaded symbols for /lib64/libplds4.so
Reading symbols from /lib64/libnspr4.so...(no debugging symbols found)...done.
Loaded symbols for /lib64/libnspr4.so
Reading symbols from /usr/lib64/libsoftokn3.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib64/libsoftokn3.so
Reading symbols from /usr/lib64/libsqlite3.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib64/libsqlite3.so.0
Reading symbols from /usr/lib64/libfreebl3.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib64/libfreebl3.so
Reading symbols from /lib64/libnss_dns.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib64/libnss_dns.so.2
Reading symbols from /lib64/libresolv.so.2...(no debugging symbols found)...done.
Loaded symbols for /lib64/libresolv.so.2
Reading symbols from /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libawt.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libawt.so
Reading symbols from /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/headless/libmawt.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/headless/libmawt.so
Reading symbols from /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libfontmanager.so...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.55.x86_64/jre/lib/amd64/libfontmanager.so
Reading symbols from /usr/lib64/libfreetype.so.6...(no debugging symbols found)...done.
Loaded symbols for /usr/lib64/libfreetype.so.6
Reading symbols from /opt/apache/apache-tomcat-7.0.54/temp/jna/jna3638365466690122373.tmp...done.
Loaded symbols for /opt/apache/apache-tomcat-7.0.54/temp/jna/jna3638365466690122373.tmp
0x00007fe716377ced in nanosleep () from /lib64/libc.so.6
Missing separate debuginfos, use: debuginfo-install freetype-2.3.11-14.el6_3.1.x86_64 glibc-2.12-1.132.el6_5.2.x86_64 java-1.7.0-openjdk-1.7.0.55-2.4.7.1.el6_5.x86_64 libgcc-4.4.7-4.el6.x86_64 libstdc++-4.4.7-4.el6.x86_64 nspr-4.10.2-1.el6_5.x86_64 nss-3.15.3-6.el6_5.x86_64 nss-softokn-3.14.3-10.el6_5.x86_64 nss-softokn-freebl-3.14.3-10.el6_5.x86_64 nss-util-3.15.3-1.el6_5.x86_64 sqlite-3.6.20-1.el6.x86_64 zlib-1.2.3-29.el6.x86_64
(gdb) call umask(0)
$1 = 18
(gdb) call umask(18)
$2 = 0
(gdb) quit
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment>&lt;p&gt;Centos 6.5: &lt;br/&gt;
Linux staging 2.6.32-431.17.1.el6.x86_64 #1 SMP Wed May 7 23:32:49 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux&lt;/p&gt;

&lt;p&gt;Java 7:&lt;br/&gt;
java version &quot;1.7.0_55&quot;&lt;br/&gt;
OpenJDK Runtime Environment (rhel-2.4.7.1.el6_5-x86_64 u55-b13)&lt;br/&gt;
OpenJDK 64-Bit Server VM (build 24.51-b03, mixed mode)&lt;/p&gt;

&lt;p&gt;selinux enabled&lt;br/&gt;
tomcat 7.0.54&lt;br/&gt;
jsvc compiled from tar.gz in /bin&lt;br/&gt;
build tools from distribution&lt;/p&gt;

&lt;p&gt;starting tomcat via daemon.sh start&lt;br/&gt;
setenv.sh:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;#!/bin/sh
JSVC_OPTS=&quot;-umask 002&quot;
CATALINA_OPTS=&quot;$CATALINA_OPTS -server -Xms512m -Xmx1024m -XX:MaxPermSize=512m -Djava.awt.headless=true&quot;

export CATALINA_OPTS
export JSVC_OPTS
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</environment>
        <key id="12717896">DAEMON-318</key>
            <summary>children (controller) process doesnt use correct umask value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tiagojco">Tiago Oliveira</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Jun 2014 12:54:43 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:05 +0000</updated>
                            <resolved>Fri, 20 Oct 2017 15:34:04 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14015364" author="tiagojco" created="Mon, 2 Jun 2014 13:17:18 +0000"  >&lt;p&gt;also, user tomcat has a umask of 0002&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# getent passwd tomcat
tomcat:x:500:500::/home/tomcat:/bin/bash
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# cat /home/tomcat/.bash_profile
# .bash_profile

# Get the aliases and functions
if [ -f ~/.bashrc ]; then
        . ~/.bashrc
fi

# User specific environment and startup programs

PATH=$PATH:$HOME/bin

export PATH
umask 0002
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and still no good.&lt;/p&gt;


&lt;p&gt;as a workaround i added to my /etc/init.d/tomcat7 the following lines:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;OLD_UMASK=$(umask)
...
case $1 in
start)
umask 0002
$CATALINA_HOME/bin/daemon.sh --tomcat-user tomcat --catalina-home $CATALINA_HOME --java-home $JAVA_HOME start
umask $OLD_UMASK
;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14209853" author="agxs" created="Thu, 13 Nov 2014 14:55:14 +0000"  >&lt;p&gt;It&apos;s a bit mad but you can recompile JSVC to set a new umask by passing -DJSVC_UNMASK=&amp;lt;umask&amp;gt; to make.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-178&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DAEMON-178&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15110932" author="schneider@mecom.de" created="Thu, 21 Jan 2016 17:14:38 +0000"  >&lt;p&gt;I can confirm strange behavior of the -umask parameter here:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Debian 8.2 (AMD64)&lt;/li&gt;
	&lt;li&gt;OpenJDK 1.7.0_75 + Oracle JDK 1.8.0_51&lt;/li&gt;
	&lt;li&gt;commons-daemon 1.0.15 build from source&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We&apos;re trying to use a umask parameter of 007. We observed that the Java code that is executed in the init()-method creates files with the expected umask of 007. However, code executed by the start()-method uses a umask of 002.&lt;/p&gt;

&lt;p&gt;I attached a simple java class that demonstrates this. Invoke it via jsvc as a standard user (-user schneider in my case)  and a umask parameter of 007 (-umask 007). It will try to create two directory into the /tmp directory. One is created by the init method, the other by start:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;drwxrwx--- 2 schneider schneider 4096 Jan 21 17:59 umask_init
drwxr-xr-x 2 schneider schneider 4096 Jan 21 17:59 umask_start
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unless I am totally misunderstanding something here, the umask should also be applied when creating the second directory, but it doesn&apos;t.&lt;/p&gt;

&lt;p&gt;I am attaching a patch (against the source of 1.0.15). It fixes the problem here:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;drwxrwx--- 2 schneider schneider 4096 Jan 21 18:10 umask_init
drwxrwx--- 2 schneider schneider 4096 Jan 21 18:10 umask_start
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please review the patch and include it in the next release if it is usable.&lt;/p&gt;</comment>
                            <comment id="15110940" author="schneider@mecom.de" created="Thu, 21 Jan 2016 17:16:40 +0000"  >&lt;p&gt;Example for demonstrating the issue.&lt;/p&gt;</comment>
                            <comment id="15110941" author="schneider@mecom.de" created="Thu, 21 Jan 2016 17:17:07 +0000"  >&lt;p&gt;Patch against 1.0.15. Please review.&lt;/p&gt;</comment>
                            <comment id="15575115" author="wevers" created="Fri, 14 Oct 2016 11:54:25 +0000"  >&lt;p&gt;Any movement here? This issue is not just causing annoyance for users; a daemon process with an unexpected umask is a potential security issue.&lt;/p&gt;</comment>
                            <comment id="16212789" author="markt" created="Fri, 20 Oct 2017 15:34:04 +0000"  >&lt;p&gt;Thanks for the steps to reproduce and the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12783611" name="UmaskBugReproducer.java" size="980" author="schneider@mecom.de" created="Thu, 21 Jan 2016 17:16:40 +0000"/>
                            <attachment id="12783612" name="umask.patch" size="395" author="schneider@mecom.de" created="Thu, 21 Jan 2016 17:17:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396098</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1w71z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396224</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-317] Procrun service stop fail</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-317</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;After trying to stop service via windows services I had got in serviceerr.log:&lt;br/&gt;
The service cannot accept control messages at this time.&lt;/p&gt;

&lt;p&gt;Failed to stop service&lt;br/&gt;
But after some time service stops correct.&lt;/p&gt;

&lt;p&gt;When we starting service in console mode and stoping it by cntl+c &lt;br/&gt;
service stopping  correct and error not appearing.&lt;/p&gt;

&lt;p&gt;service-daemon.log:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:15:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 5676] Commons Daemon procrun (1.0.15.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:15:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 5676] Stopping service &apos;XX&apos; ...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:15:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 8272] Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:15:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [  620] Commons Daemon procrun (1.0.15.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:15:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [  620] Stopping service &apos;XX&apos; ...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:15:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 8272] Service stop thread completed.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:15:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [  620] Failed to stop &apos;XX&apos; service&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:15:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [  620] The service cannot accept control messages at this time.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:15:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [  620] Stop service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:15:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [  620] Commons Daemon procrun failed with exit value: 6 (Failed to stop service)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:15:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [  620] The service cannot accept control messages at this time.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:16:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 4984] Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:16:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 4984] Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:16:57&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 5676] Service &apos;XX&apos; stopped&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:16:57&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 5676] Stop service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2014-05-14 19:16:58&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 5676] Commons Daemon procrun finished&lt;/p&gt;</description>
                <environment></environment>
        <key id="12714210">DAEMON-317</key>
            <summary>Procrun service stop fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ganner">Danil</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 May 2014 16:21:39 +0000</created>
                <updated>Tue, 4 Jul 2017 08:56:34 +0000</updated>
                            <resolved>Tue, 4 Jul 2017 08:56:34 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16073352" author="markt" created="Tue, 4 Jul 2017 08:56:34 +0000"  >&lt;p&gt;This is likely related to the application. If this is still an issue please feel free to re-open but you&apos;ll need to provide a simple test case that demonstrates the problem.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>392523</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 17 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vlj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>392707</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-316] High JvmMx values result in the service being un-startable</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-316</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When I specify the JvmMx and use a large value, it will result in an error during service start. A value of 1240 will still work, however when changing it to 2240, the service installation is running ok, but when I start the service in windows, it just shuts down immediately with an error message referring to service specifiec error code 4. looking into the windows event log, it displays this info:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;Event xmlns=&quot;http://schemas.microsoft.com/win/2004/08/events/event&quot;&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;System&amp;gt;&lt;br/&gt;
  &amp;lt;Provider Name=&quot;Service Control Manager&quot; Guid=&quot;
{555908d1-a6d7-4695-8e1e-26931d2012f4}
&lt;p&gt;&quot; EventSourceName=&quot;Service Control Manager&quot; /&amp;gt; &lt;br/&gt;
  &amp;lt;EventID Qualifiers=&quot;49152&quot;&amp;gt;7024&amp;lt;/EventID&amp;gt; &lt;br/&gt;
  &amp;lt;Version&amp;gt;0&amp;lt;/Version&amp;gt; &lt;br/&gt;
  &amp;lt;Level&amp;gt;2&amp;lt;/Level&amp;gt; &lt;br/&gt;
  &amp;lt;Task&amp;gt;0&amp;lt;/Task&amp;gt; &lt;br/&gt;
  &amp;lt;Opcode&amp;gt;0&amp;lt;/Opcode&amp;gt; &lt;br/&gt;
  &amp;lt;Keywords&amp;gt;0x8080000000000000&amp;lt;/Keywords&amp;gt; &lt;br/&gt;
  &amp;lt;TimeCreated SystemTime=&quot;2014-03-18T12:17:02.546588300Z&quot; /&amp;gt; &lt;br/&gt;
  &amp;lt;EventRecordID&amp;gt;153783&amp;lt;/EventRecordID&amp;gt; &lt;br/&gt;
  &amp;lt;Correlation /&amp;gt; &lt;br/&gt;
  &amp;lt;Execution ProcessID=&quot;864&quot; ThreadID=&quot;3736&quot; /&amp;gt; &lt;br/&gt;
  &amp;lt;Channel&amp;gt;System&amp;lt;/Channel&amp;gt; &lt;br/&gt;
  &amp;lt;Computer&amp;gt;mycomputer&amp;lt;/Computer&amp;gt; &lt;br/&gt;
  &amp;lt;Security /&amp;gt; &lt;br/&gt;
  &amp;lt;/System&amp;gt;&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;EventData&amp;gt;&lt;br/&gt;
  &amp;lt;Data Name=&quot;param1&quot;&amp;gt;MyService&amp;lt;/Data&amp;gt; &lt;br/&gt;
  &amp;lt;Data Name=&quot;param2&quot;&amp;gt;%%4&amp;lt;/Data&amp;gt; &lt;br/&gt;
  &amp;lt;/EventData&amp;gt;&lt;br/&gt;
  &amp;lt;/Event&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I am installing it using &lt;br/&gt;
&quot;$INSTDIR\prunsrv.exe&quot; //IS//MyService --Install=&quot;$INSTDIR\prunsrv.exe&quot; --Startup=auto \&lt;br/&gt;
        --Description=&quot;VTS&quot; --Jvm=auto \&lt;br/&gt;
        ++JvmOptions=&quot;-Djavax.net.ssl.trustStore=$INSTDIR\resources\cacerts.jks&quot;;&quot;-Djavax.net.ssl.trustStorePassword=changeit&quot; \&lt;br/&gt;
        --Classpath=&quot;$INSTDIR\MyService.jar&quot;;&quot;$INSTDIR\log4j-1.2.15.jar&quot;;&quot;$INSTDIR\jcifs-1.3.17.jar&quot;;&quot;$INSTDIR\jasypt-1.9.0.jar&quot; \&lt;br/&gt;
        --StartImage=MyService.jar \&lt;br/&gt;
        --JvmMs=1024 --JvmMx=2240 \&lt;br/&gt;
        --StartPath=&quot;$INSTDIR&quot; --StartMode=jvm \&lt;br/&gt;
        --StartClass=de.volke.terminal.service.TerminalService --StartMethod=main --StartParams=start --StopMode=exe \&lt;br/&gt;
        --StopClass=de.volke.terminal.service.TerminalService --StopMethod=main --StopImage=MyService.jar \&lt;br/&gt;
        --StopPath=&quot;$INSTDIR&quot; --StopParams=stop --LogPath=&quot;$INSTDIR\logs&quot;&lt;/p&gt;

&lt;p&gt;from an NSIS script.&lt;/p&gt;

&lt;p&gt;To me this seems like a bug as apparenlty the error should be constant in case my whole cmd line is wrong. Else it should also accept the higher JvmMx value as this is the maximum, no matter if this much memory is really available. The behaviour was also seen on machines having 16GB RAM with &amp;gt;10GB free. So it appears not be related to the real memory consumption on the machine.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 64bit&lt;/p&gt;</environment>
        <key id="12702129">DAEMON-316</key>
            <summary>High JvmMx values result in the service being un-startable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jost">Joachim Steffenhagen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Mar 2014 12:24:38 +0000</created>
                <updated>Wed, 9 Nov 2016 16:25:44 +0000</updated>
                            <resolved>Wed, 9 Nov 2016 16:25:41 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15626321" author="gchauvet" created="Tue, 1 Nov 2016 18:52:38 +0000"  >&lt;p&gt;Silly question : is it a 32 bit JVM ?&lt;/p&gt;</comment>
                            <comment id="15629199" author="gchauvet" created="Wed, 2 Nov 2016 14:56:18 +0000"  >&lt;p&gt;According to JNI specification code 4 means &quot;not enough memory&quot;.&lt;br/&gt;
I will try at home your unexpected behavior but I bet this is an issue with your JVM who is a 32bits version instead of a 64bits.&lt;/p&gt;</comment>
                            <comment id="15629230" author="jost" created="Wed, 2 Nov 2016 15:08:03 +0000"  >&lt;p&gt;Our operations told us this also happened in 64bit. And apparently some values caused the error while even higher values worked again.&lt;br/&gt;
However since all the time that has passed I will not be able to provide you any specific details and we have switched technology by now (so therefore I cannot carry out new tests). The issue may be closed therefore.&lt;/p&gt;</comment>
                            <comment id="15629298" author="gchauvet" created="Wed, 2 Nov 2016 15:28:10 +0000"  >&lt;p&gt;Thank you for your feedback. I keep in mind your ticket.&lt;br/&gt;
Best regards&lt;/p&gt;</comment>
                            <comment id="15651174" author="gchauvet" created="Wed, 9 Nov 2016 15:03:33 +0000"  >&lt;p&gt;I&apos;ve tried several ways to reproduce this issue, without success.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markt&quot; class=&quot;user-hover&quot; rel=&quot;markt&quot;&gt;markt&lt;/a&gt; Can you close this ticket as unreproducible ?&lt;/p&gt;</comment>
                            <comment id="15651350" author="markt" created="Wed, 9 Nov 2016 16:25:44 +0000"  >&lt;p&gt;Resolving as per Guillaume&apos;s request&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380469</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tjyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380750</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-312] prunmgr: //MQ fails to kill multiple instances</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-312</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Issuing the following commands starts two instances of prunmgr:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;prunmgr &lt;span class=&quot;code-comment&quot;&gt;//MS//SomeServiceName
&lt;/span&gt;prunmgr &lt;span class=&quot;code-comment&quot;&gt;//MS//SomeServiceName&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Running:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;prunmgr &lt;span class=&quot;code-comment&quot;&gt;//MQ//SomeServiceName&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;kills the second instance of prunmgr, but fails to kill the first. It does however remove the icon from the system tray.&lt;/p&gt;

&lt;p&gt;This can be reproduced running Tomcat7w.exe from Tomcat 7.0.50 in a command prompt:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Tomcat7w.exe &lt;span class=&quot;code-comment&quot;&gt;//MS//Tomcat7
&lt;/span&gt;Tomcat7w.exe &lt;span class=&quot;code-comment&quot;&gt;//MS//Tomcat7
&lt;/span&gt;Tomcat7w.exe &lt;span class=&quot;code-comment&quot;&gt;//MQ//Tomcat7&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Running:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Tomcat7w.exe &lt;span class=&quot;code-comment&quot;&gt;//MS//Tomcat7&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;again, displays an &quot;Application System Error&quot; dialog with the message:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&quot;An instance of &apos;Tomcat7&apos; application is already running.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;See also &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-187&quot; title=&quot;(0) An instance of &amp;#39;..&amp;#39; application is already running&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-187&quot;&gt;&lt;del&gt;DAEMON-187&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7, 64-bit&lt;/p&gt;</environment>
        <key id="12689812">DAEMON-312</key>
            <summary>prunmgr: //MQ fails to kill multiple instances</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tima">Tim Anderson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Jan 2014 13:18:49 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:09 +0000</updated>
                            <resolved>Sat, 28 Oct 2017 00:18:31 +0000</resolved>
                                    <version>1.0.9</version>
                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16223082" author="markt" created="Sat, 28 Oct 2017 00:18:31 +0000"  >&lt;p&gt;There  were two issues here. Both have been fixed.&lt;/p&gt;

&lt;p&gt;1. When using //MS or //MQ the calling process did not exit until after the called process had completed the processing.&lt;/p&gt;

&lt;p&gt;2. When using //MQ when an existing process had the configuration dialog showing, the exisiting process did not exit.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368779</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rk9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369083</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-311] Commons Daemon procrun failed with exit value: 5 (Failed to start service)</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-311</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I use the Amd64 version of procrun to run a .jar as a service, it works on several machines with the same configuration but on one of them, It&apos;s impossible to start the service.&lt;/p&gt;

&lt;p&gt;When the service is installed (with this command) :&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;xx.exe //IS//xx --Install=xx.exe&quot; --Description=&quot;xx&quot; --Jvm=auto --Classpath=xx.jar --Startup=auto --StartMode=jvm --StartClass=Controller.ServiceMain --StartMethod=main --StartParams=start --StopMode=jvm --StopClass=Controller.ServiceMain --StopMethod=main --StopParams=stop --LogPath=&quot;./Logs&quot; --StdOutput=auto --StdError=auto --StopTimeout=120 --LogLevel=debug&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;it generates this log :&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:06&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1679) [ 9444] Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:06&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1683) [ 9444] Commons Daemon procrun (1.0.15.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:06&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:561 ) [ 9444] Installing service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:06&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:600 ) [ 9444] Service xx name &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:616 ) [ 9444] Setting service description xx&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:634 ) [ 9444] Service &apos;xx&apos; installed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1764) [ 9444] Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1679) [ 9724] Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1683) [ 9724] Commons Daemon procrun (1.0.15.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:725 ) [ 9724] Starting service &apos;xx&apos; ...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:10&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:746 ) [ 9724] Failed to start &apos;xx&apos; service&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:10&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:746 ) [ 9724] The data area passed to a system call is too small.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:10&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:754 ) [ 9724] Start service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:10&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:1755) [ 9724] Commons Daemon procrun failed with exit value: 5 (Failed to start service)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-11-28 13:10:10&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:1755) [ 9724] The data area passed to a system call is too small.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And if I try to start the service again after the installation, no log is generated anymore.&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS : Windows 7 (64bit)&lt;br/&gt;
Jre : 7 (32bit) and 7(64bit) installed, the 32bit one is used by default.&lt;br/&gt;
Hardware specifications : &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Processor :  Intel Core i7&lt;/li&gt;
	&lt;li&gt;RAM : 8 GB&lt;/li&gt;
&lt;/ul&gt;
</environment>
        <key id="12681763">DAEMON-311</key>
            <summary>Commons Daemon procrun failed with exit value: 5 (Failed to start service)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="padrus00">Vincent Tonus</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Nov 2013 13:16:25 +0000</created>
                <updated>Tue, 19 Jun 2018 20:20:47 +0000</updated>
                            <resolved>Tue, 31 Oct 2017 17:29:04 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14103699" author="paul stone" created="Wed, 20 Aug 2014 09:57:44 +0000"  >&lt;p&gt;I&apos;ve just encountered the same problem and come up with a work around:&lt;/p&gt;

&lt;p&gt;The root of the problem is that Apache Commons Daemon looks for the java runtime using the Registry, but looks for an Oracle specific registry setting. If you only have the IBM JDK installed (no oracle), the the service fails to start java. I managed to get around the issue by copying part of the IBM JDK Registry subtree into the same place that Oracle puts it and the service now starts.&lt;/p&gt;

&lt;p&gt;You will get the same problem on any machine where ONLY IBM Java is installed (no Sun / Oracle JDKs).&lt;/p&gt;

&lt;p&gt;Detail and fix:&lt;br/&gt;
Oracle puts details of the Installed JDKs into the Registry under HKEY_LOCAL_MACHINE\Software\JavaSoft\Java Runtime Environment&lt;br/&gt;
IBM puts details of the Installed JDKs into the Registry under HKEY_LOCAL_MACHINE\SOFTWARE\IBM\Java2 Runtime Environment&lt;/p&gt;

&lt;p&gt;I used Regedit to export the registry keys under &quot;HKEY_LOCAL_MACHINE\SOFTWARE\IBM\Java2 Runtime Environment&quot; to a text file. I then replaced &#8220;HKEY_LOCAL_MACHINE\SOFTWARE\IBM\Java2 Runtime Environment&#8221; with &#8220;HKEY_LOCAL_MACHINE\Software\JavaSoft\Java Runtime Environment&#8221; in the file and re-imported this to the registry.&lt;/p&gt;

&lt;p&gt;A better fix would be for the Daemon to check the IBM Java specific registry keys when starting the java service.&lt;/p&gt;</comment>
                            <comment id="16227159" author="markt" created="Tue, 31 Oct 2017 17:29:04 +0000"  >&lt;p&gt;Fixed by switching to using a list of registry keys to look in. Adding a new one is fairly simple should we ever need to.&lt;/p&gt;</comment>
                            <comment id="16517502" author="jmonnett" created="Tue, 19 Jun 2018 20:20:47 +0000"  >&lt;p&gt;I bundle the IBM JRE/JVM with my S/W&#160; - it is not registered in the windows registry.&#160;&lt;/p&gt;

&lt;p&gt;I tried using&#160;set PR_JVM=C:/ibm/jre/bin/j9vm/jvm.dll&#160; but that does not work.&#160;&lt;/p&gt;

&lt;p&gt;I need an option to bypass the JVM registry search and just use the one I provide.&#160;&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13078906">DAEMON-360</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361027</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1q8gf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361326</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-310] jsvc fails on AIX 5.3</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-310</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;jsvc fails to find / start up the java virtual machine.&lt;br/&gt;
The attached patch resolves the issue.&lt;/p&gt;</description>
                <environment>&lt;p&gt;IBM AIX 5.3 powerpc&lt;br/&gt;
Java 6&lt;/p&gt;</environment>
        <key id="12681464">DAEMON-310</key>
            <summary>jsvc fails on AIX 5.3</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jwehle">John Wehle</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 27 Nov 2013 00:59:59 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:12 +0000</updated>
                            <resolved>Wed, 25 Oct 2017 10:32:40 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="60">1m</timeoriginalestimate>
                            <timeestimate seconds="60">1m</timeestimate>
                                        <comments>
                            <comment id="13833294" author="jwehle" created="Wed, 27 Nov 2013 01:01:40 +0000"  >&lt;p&gt;Patch for issue.&lt;/p&gt;</comment>
                            <comment id="13833297" author="jwehle" created="Wed, 27 Nov 2013 01:02:56 +0000"  >&lt;p&gt;In addition to the patch it is also necessary to do:&lt;/p&gt;

&lt;p&gt;       LIBPATH=${JAVA_HOME}/jre/lib/ppc:${JAVA_HOME}/jre/lib/ppc/classic&lt;br/&gt;
       export LIBPATH&lt;/p&gt;

&lt;p&gt;before invoking jsvc.&lt;/p&gt;</comment>
                            <comment id="13833298" author="jwehle" created="Wed, 27 Nov 2013 01:05:32 +0000"  >&lt;p&gt;Okay ... I&apos;m not quite sure why my libpath comment has extra line breaks.  Hopefully you&apos;ll get the idea.&lt;/p&gt;</comment>
                            <comment id="16218375" author="markt" created="Wed, 25 Oct 2017 10:32:40 +0000"  >&lt;p&gt;Thanks for the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12615959" name="jsvc-aix.txt" size="3684" author="jwehle" created="Wed, 27 Nov 2013 01:01:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>360729</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1q6mn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361028</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-309] Documentation for start method in JVM mode is conflicting</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-309</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The documentation for how the start method should act in JVM mode is conflicting (&lt;a href=&quot;http://commons.apache.org/proper/commons-daemon/procrun.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-daemon/procrun.html&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;1. In the documentation of the StartMethod parameter there&apos;s this text:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: in jvm mode, the start method should not return until the stop method has been called.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;2. The second-to-last sentence in the section &quot;Using Procrun in jvm mode&quot; reads:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note that the method handling service start should create and start a separate thread to carry out the processing, and then return.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;According to my reading those two sentences say pretty much the opposite of each other and observation shows that #1 is the correct one (i.e. the service is assumed to have stopped when the start method returns).&lt;/p&gt;

&lt;p&gt;Generally speaking, JVM mode is pretty under-documented (in my opinion). That can easily be verified by the fact that very popular documentation exists outside the procrun/commons daemon project, as a blog post: &lt;a href=&quot;http://joerglenhard.wordpress.com/2012/05/29/build-windows-service-from-java-application-with-procrun/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://joerglenhard.wordpress.com/2012/05/29/build-windows-service-from-java-application-with-procrun/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;A simple end-to-end example showing a similar setup as that blog post would be good.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12675019">DAEMON-309</key>
            <summary>Documentation for start method in JVM mode is conflicting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jsauer">Joachim Sauer</reporter>
                        <labels>
                            <label>doc</label>
                            <label>documentaion</label>
                    </labels>
                <created>Tue, 22 Oct 2013 12:03:12 +0000</created>
                <updated>Thu, 23 Nov 2017 09:44:04 +0000</updated>
                            <resolved>Fri, 20 Oct 2017 18:58:32 +0000</resolved>
                                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16213056" author="markt" created="Fri, 20 Oct 2017 18:58:32 +0000"  >&lt;p&gt;Thanks for the report.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13107150">DAEMON-375</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12849311">DAEMON-337</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354641</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1p51z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354930</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-307] -umask input values and correlating output pid file permissions</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-307</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I&apos;m passing the following input values to the -umask flag in a bourne shell script and get the following resulting file permissions on the pid file. &lt;/p&gt;

&lt;p&gt;umask  | file permissions on PID file&lt;br/&gt;
   0011  |  644&lt;br/&gt;
   0002  |  644&lt;br/&gt;
   0022  |  644&lt;br/&gt;
   0003  |  644&lt;br/&gt;
   0033  |  644&lt;br/&gt;
   0004  |  640&lt;br/&gt;
   0005  |  640&lt;br/&gt;
   0055  |  600&lt;br/&gt;
   0006  |  640&lt;br/&gt;
   0072  |  604&lt;br/&gt;
   0073  |  604&lt;/p&gt;

&lt;p&gt;Which I don&apos;t believe is the correct output. &lt;/p&gt;

&lt;p&gt;log messages from adding the -debug flag follow with the according -umask flag value&lt;/p&gt;

&lt;p&gt;-umask 0002 | Switching umask back to 022 from 002&lt;br/&gt;
-umask 0022 | Switching umask back to 022 from 002 &lt;br/&gt;
-umask 0004 | Switching umask back to 022 from 002&lt;br/&gt;
-umask 0072 | Switching umask back to 022 from 072&lt;br/&gt;
-umask 0055 | Switching umask back to 022 from 055&lt;br/&gt;
-umask 0066 | Switching umask back to 022 from 066&lt;br/&gt;
-umask 0077 | Switching umask back to 022 from 077 &lt;/p&gt;</description>
                <environment>&lt;p&gt;CentOS 6.3 64-bit&lt;/p&gt;</environment>
        <key id="12673352">DAEMON-307</key>
            <summary>-umask input values and correlating output pid file permissions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="inetplumber">Richard Thiemann</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Oct 2013 01:45:17 +0000</created>
                <updated>Thu, 24 Oct 2013 00:17:44 +0000</updated>
                            <resolved>Thu, 24 Oct 2013 00:17:44 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13797912" author="mturk@apache.org" created="Thu, 17 Oct 2013 13:54:51 +0000"  >&lt;p&gt;Can you post debug log message for those situations&lt;br/&gt;
You&apos;ll have to turn on debug logging, and the lines should contain&lt;br/&gt;
&quot;Switching umask back to 0NNN from 0NNN&quot;&lt;/p&gt;</comment>
                            <comment id="13798660" author="inetplumber" created="Fri, 18 Oct 2013 00:32:40 +0000"  >&lt;p&gt;Uploaded the desired log messages. I&apos;m happy to provide other info as well. &lt;/p&gt;</comment>
                            <comment id="13798804" author="mturk@apache.org" created="Fri, 18 Oct 2013 05:09:38 +0000"  >&lt;p&gt;I see you have&lt;br/&gt;
-umask 0002 | Switching umask back to 022 from 002&lt;br/&gt;
-umask 0022 | Switching umask back to 022 from 002&lt;br/&gt;
-umask 0004 | Switching umask back to 022 from 002&lt;br/&gt;
-umask 0072 | Switching umask back to 022 from 072 &lt;/p&gt;

&lt;p&gt;This is weird because we convert the -umask parameter argument as octal number and never change it after that.&lt;br/&gt;
From your log it would mean that OS strtol() function gives wrong results for certain numbers which is hard to believe.&lt;/p&gt;

&lt;p&gt;I cannot reproduce those setting on my fedora &lt;br/&gt;
eg.&lt;br/&gt;
./jsvc -debug -umask 0002 foo-bar&lt;br/&gt;
...&lt;br/&gt;
Switching umask back to 002 from 002&lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;./jsvc -debug -umask 0022 foo-bar&lt;br/&gt;
...&lt;br/&gt;
Switching umask back to 002 from 022&lt;br/&gt;
...&lt;/p&gt;


&lt;p&gt;So everything looks perfectly OK. Check your input params.&lt;br/&gt;
Also are you sure you are using the latest daemon with &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-280&quot; title=&quot;jsvc umask comparison wrong - fix attached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-280&quot;&gt;&lt;del&gt;DAEMON-280&lt;/del&gt;&lt;/a&gt; fix?&lt;/p&gt;</comment>
                            <comment id="13799335" author="inetplumber" created="Fri, 18 Oct 2013 17:46:34 +0000"  >&lt;p&gt;1.0.15 fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-280&quot; title=&quot;jsvc umask comparison wrong - fix attached&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-280&quot;&gt;&lt;del&gt;DAEMON-280&lt;/del&gt;&lt;/a&gt; correct?&lt;/p&gt;

&lt;p&gt;./jsvc --help | grep ^jsvc&lt;br/&gt;
jsvc (Apache Commons Daemon) 1.0.15-dev&lt;/p&gt;

&lt;p&gt;I&apos;m still getting different results than you. And I can&apos;t determine why that would be. I broke it down to the simplest of tests mimicking yours above. &lt;/p&gt;

&lt;p&gt;./jsvc -debug -umask 0002 foobar&lt;br/&gt;
Switching umask back to 022 from 002&lt;/p&gt;

&lt;p&gt;./jsvc -debug -umask 0022 foobar&lt;br/&gt;
Switching umask back to 022 from 022&lt;/p&gt;

&lt;p&gt;This is running on CentOS 6.3 64-bit. Using the default system gcc compiler. &lt;/p&gt;</comment>
                            <comment id="13803590" author="inetplumber" created="Thu, 24 Oct 2013 00:17:44 +0000"  >&lt;p&gt;Tested  in different fresh environment, wasn&apos;t able to reproduce again. Must be an issue specific to that jsvc environment. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12633664">DAEMON-280</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12633664">DAEMON-280</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352975</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1outj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>353262</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-306] Service is not restarted when the exit code is non-zero</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-306</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I have a Java application that internally contains a throws, whe it success it trace and ends the application using:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(-1); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.exit(1); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The service is not automatically restarted, I suppose that the procrun application catch correctly the exit from the java application, but it looks that not inform correctly to the Services Manager from the O.S.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java(TM) SE Runtime Environment (build 1.7.0_15-b03)&lt;br/&gt;
Windows Server 2008 R2 Standard&lt;/p&gt;

&lt;p&gt;service created and configurated with automatic restart service as:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;sc failure %SERVICE_NAME% reset= 30 actions= restart/5000/restart/10000/restart/60000
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</environment>
        <key id="12672109">DAEMON-306</key>
            <summary>Service is not restarted when the exit code is non-zero</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="antonio.castellon">antonio castell&#243;n</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Oct 2013 09:22:02 +0000</created>
                <updated>Thu, 26 Oct 2017 19:48:55 +0000</updated>
                            <resolved>Thu, 26 Oct 2017 19:48:55 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13798872" author="mturk@apache.org" created="Fri, 18 Oct 2013 07:27:55 +0000"  >&lt;p&gt;Think we cannot do that in jni mode because System.exit() calls ExitProcess thus causing procrun to exit as well. The only way to handle this is by using service control manager.&lt;/p&gt;</comment>
                            <comment id="13798971" author="antonio.castellon" created="Fri, 18 Oct 2013 10:02:27 +0000"  >&lt;p&gt;I attached a simple example project to check the issue.&lt;/p&gt;

</comment>
                            <comment id="13798972" author="antonio.castellon" created="Fri, 18 Oct 2013 10:03:28 +0000"  >&lt;p&gt;The issue only happens when the service is installed as a JAVA not as a JVM ( I attached a complete simple project to test it).&lt;/p&gt;

&lt;p&gt;I created batch files into the dist folder to execute the service installation, unisntallation, start and stop calls. &lt;/p&gt;

&lt;p&gt;for example into the install-service.bat (it contains the installation, start and configuration to be restarted automatically if something wrong happens)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;set SERVICE_NAME=Daemon-Example
set PR_TEMP=C:/logs
set JAVA_EXECUTION_SERVICE_MODE=0
set INSTALL_FOLDER=C:\DEV\test\my-daemon-example\dist
set JAR_FILE=my-daemon-example-1.0-SNAPSHOT-jar-with-dependencies.jar
set PR_CLASS=com.antonio.castellon.App
set PR_INSTALL=C:\DEV\test\my-daemon-example\dist\prunsrv.exe 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this case, to test the installation as a JAVA needs to change the variable JAVA_EXECUTION_SERVICE_MODE to 1&lt;/p&gt;

&lt;p&gt;When is executed as JVM all is fine (it&apos;s automatically restarted), but when it is executed as JAVA, then the application finalize but the service is not restarted.&lt;/p&gt;</comment>
                            <comment id="13798987" author="mturk@apache.org" created="Fri, 18 Oct 2013 10:29:05 +0000"  >&lt;p&gt;Now, that&apos;s what I call bug report &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks for sample. I&apos;ll try to reproduce and fix the issue.&lt;/p&gt;</comment>
                            <comment id="16221108" author="markt" created="Thu, 26 Oct 2017 19:48:55 +0000"  >&lt;p&gt;In Java mode (or exe mode) you need to configure Windows to enable recovery options for non-zero exit codes. There is a checkbox (Server 2008 onwards) on the recovery configuration tab to do this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12609120" name="my-daemon-example.zip" size="1804651" author="antonio.castellon" created="Fri, 18 Oct 2013 10:02:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1on7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352023</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-305] jsvc and Debian not work with arg procname </title>
                <link>https://issues.apache.org/jira/browse/DAEMON-305</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;command line with procname it&apos;s not working, the process name is jsvc.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Debian 3.2.46-1 x86_64 GNU/Linux&lt;/p&gt;</environment>
        <key id="12666896">DAEMON-305</key>
            <summary>jsvc and Debian not work with arg procname </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="atilin">Alain Perreault</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Sep 2013 14:55:50 +0000</created>
                <updated>Tue, 16 Dec 2014 11:55:07 +0000</updated>
                            <resolved>Fri, 18 Oct 2013 07:14:10 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13798865" author="mturk@apache.org" created="Fri, 18 Oct 2013 07:14:10 +0000"  >&lt;p&gt;I do not understand this bug report.&lt;br/&gt;
Please use Commons dev and users list if you have questions regarding setup&lt;/p&gt;</comment>
                            <comment id="14023071" author="recena" created="Mon, 9 Jun 2014 12:05:07 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I have the same problem using 1.0.15 version on Debian.&lt;br/&gt;
Why this issue marked as invalid?&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;</comment>
                            <comment id="14025528" author="recena" created="Mon, 9 Jun 2014 18:46:46 +0000"  >&lt;p&gt;Hello again,&lt;/p&gt;

&lt;p&gt;I&apos;m sorry, I was wrong. I&apos;ve confused &quot;command&quot; with &quot;process name&quot;.&lt;br/&gt;
I attach two files for explain it.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;</comment>
                            <comment id="14025529" author="recena" created="Mon, 9 Jun 2014 18:47:12 +0000"  >&lt;p&gt;Result of &quot;top&quot; command.&lt;/p&gt;</comment>
                            <comment id="14025533" author="recena" created="Mon, 9 Jun 2014 18:47:36 +0000"  >&lt;p&gt;Result of &quot;ps -axf&quot; command.&lt;/p&gt;</comment>
                            <comment id="14248180" author="eser" created="Tue, 16 Dec 2014 11:55:07 +0000"  >&lt;p&gt;I have the same issue with commons-daemon-1.0.15 on Red Hat 8&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12649420" name="jsvc-1.png" size="84813" author="recena" created="Mon, 9 Jun 2014 18:47:12 +0000"/>
                            <attachment id="12649421" name="jsvc-2.png" size="115446" author="recena" created="Mon, 9 Jun 2014 18:47:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>346833</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nt2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>347133</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-302] Service recovery options do not work when a JNI crash brings down the JVM</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-302</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;We have a java application that we run as a service which has a C component setup, and communicated to across the Java Native Interface. &lt;/p&gt;

&lt;p&gt;If a crash occurs in the C component the whole JVM is brought down. However this does not trigger the service recovery options to kick in.&lt;/p&gt;

&lt;p&gt;I believe this is due to a VM exit code of 0 (see bellow).&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-06-27 11:55:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1528) [ 8488] Waiting for worker to finish...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-06-27 11:55:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:964 ) [ 5716] Java Worker thread finished applicationName/core/applicationNameCore:main with status=0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-06-27 11:55:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1533) [ 8488] Worker finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-06-27 11:55:55&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1559) [ 8488] Waiting for all threads to exit&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-06-27 11:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:919 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10160&amp;#93;&lt;/span&gt; Start exit hook called ...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-06-27 11:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:920 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10160&amp;#93;&lt;/span&gt; VM exit code: 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-06-27 11:56:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10160&amp;#93;&lt;/span&gt; reportServiceStatusE: 1, 0, 0, 0&lt;/p&gt;

&lt;p&gt;With a return code of 0, the SCM would think the service stopped safely, without error, which is not the case here since the JNI has crashed.&lt;/p&gt;

&lt;p&gt;Is there anything that can be done about this?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 64bit&lt;br/&gt;
JRE 1.7.0_25-b17 (64bit)&lt;/p&gt;</environment>
        <key id="12655295">DAEMON-302</key>
            <summary>Service recovery options do not work when a JNI crash brings down the JVM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="empirechaotix">Iain Williams</reporter>
                        <labels>
                            <label>jni</label>
                            <label>jvm</label>
                            <label>procrun</label>
                            <label>service</label>
                    </labels>
                <created>Fri, 28 Jun 2013 09:39:19 +0000</created>
                <updated>Wed, 12 Jun 2019 17:55:43 +0000</updated>
                            <resolved>Thu, 26 Oct 2017 19:46:08 +0000</resolved>
                                    <version>1.0.15</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13702038" author="mturk@apache.org" created="Mon, 8 Jul 2013 14:48:07 +0000"  >&lt;p&gt;Since &apos;normal&apos; jvm operation can return non zero exit codes (depending on the application itself)&lt;br/&gt;
we cannot use that. Our &apos;VM exit code&apos; only reflects the errors in starting VM.&lt;br/&gt;
From Commons Daemon perspective the VM exited cleanly since main() terminated.&lt;/p&gt;

&lt;p&gt;Anyhow, I think no one should ever try to auto restart crashed VM.&lt;br/&gt;
Not sure if JNI core produces special VM exit code. If it does we could use that as config param filter value for reportServiceStatus&lt;/p&gt;</comment>
                            <comment id="16221103" author="markt" created="Thu, 26 Oct 2017 19:46:08 +0000"  >&lt;p&gt;There are multiple parts to this.&lt;/p&gt;

&lt;p&gt;For jni mode, an &apos;abort&apos; hook has been added that sets a non-zero exit code when the JVM crashes. This is sufficient to trigger recovery for jni mode.&lt;/p&gt;

&lt;p&gt;For Java and exe modes, a crash will trigger a non-zero exit code. It is therefore necessary for additional configuration to be made in the recovery tab. If the &quot;Enable actions for stops with errors.&quot; checkbox is enabled, then a crash will trigger recovery in java and exe modes&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12544803">DAEMON-243</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335572</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lvuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335896</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-298] Windows service fails to stop with error code 1053 (using Windows 7 service manager)</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-298</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Using Windows services manager (services.msc) to start/stop service.&lt;br/&gt;
Service installed with the following start/stop settings.&lt;br/&gt;
--StartMode=jvm --StartClass=com.myorg.MyClass --StartMethod=start &lt;br/&gt;
--StopMode=jvm --StopClass=com.myorg.MyClass --StopMethod=stop &lt;/p&gt;

&lt;p&gt;Service starts OK.&lt;/p&gt;

&lt;p&gt;When I use services manager to stop the service, the application stops running but the prunsrv.exe process does not terminate.&lt;br/&gt;
Eventually the services manager reports that:&lt;br/&gt;
&quot;Windows could not stop the &amp;lt;MyServiceName&amp;gt; service on Local Computer.  Error 1053: The service did not respond to the start or control request in a timely fashion.&quot;&lt;/p&gt;

&lt;p&gt;The service then stays at status &quot;stopping&quot; &amp;amp; cannot be restarted without first killing the prunsrv.exe process.&lt;/p&gt;

&lt;p&gt;Looking at the application logs I can see that the application&apos;s stop() method gets called - the final line in this method is a logging call which is executing OK.&lt;/p&gt;

&lt;p&gt;The commons-daemon-&amp;lt;date&amp;gt;.log file has the following entries:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-05-09 17:18:02&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;10944&amp;#93;&lt;/span&gt; Commons Daemon procrun (1.0.15.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-05-09 17:18:02&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;10944&amp;#93;&lt;/span&gt; Running &apos;&amp;lt;MyServiceName&amp;gt;&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-05-09 17:18:02&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 9224] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-05-09 17:18:11&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 9224] Service started in 9202 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-05-09 17:18:23&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;10780&amp;#93;&lt;/span&gt; Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-05-09 17:18:24&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;10780&amp;#93;&lt;/span&gt; Service stop thread completed.&lt;/p&gt;


&lt;p&gt;This problem does not occur in daemon versions 11-&amp;gt;14.&lt;br/&gt;
I have only seen it in daemon-1.0.15&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 64bit - using 32-bit prunsrv.exe in jvm mode&lt;br/&gt;
Using 32-bit Java JRE 1.7.0_17&lt;/p&gt;</environment>
        <key id="12646828">DAEMON-298</key>
            <summary>Windows service fails to stop with error code 1053 (using Windows 7 service manager)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="gchauvet">Guillaume Chauvet</assignee>
                                    <reporter username="andymay">Andrew May</reporter>
                        <labels>
                            <label>prunsrv</label>
                            <label>stop</label>
                            <label>windows</label>
                    </labels>
                <created>Thu, 9 May 2013 16:23:38 +0000</created>
                <updated>Fri, 23 Jun 2017 02:15:20 +0000</updated>
                            <resolved>Mon, 28 Nov 2016 21:26:25 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>10</votes>
                                    <watches>15</watches>
                                                                                                                <comments>
                            <comment id="13662860" author="andyg" created="Tue, 21 May 2013 10:14:52 +0000"  >&lt;p&gt;The service stops, but only after waiting for the full minute indicated by the log entry:&lt;/p&gt;

&lt;p&gt;Waiting 1 minute for all threads to exit&lt;/p&gt;

&lt;p&gt;This is and has not been an issue prior to 1.0.15 (on unchanged code from at least 1.0.8)&lt;/p&gt;</comment>
                            <comment id="13688386" author="sam.d" created="Wed, 19 Jun 2013 20:18:30 +0000"  >&lt;p&gt;We also have a service not stopping that has stopped in previous version 1.0.14 in a Windows 2003 32bit Java 6 environment.&lt;/p&gt;</comment>
                            <comment id="13708529" author="andymay" created="Mon, 15 Jul 2013 15:06:31 +0000"  >&lt;p&gt;To clarify:&lt;br/&gt;
The Application itself stops, the problem is that the Windows service stays in state 3 (STOP_PENDING) &amp;amp; the prunsrv.exe process does not terminate. &lt;br/&gt;
The Windows service cannot be restarted until the prunsrv.exe process is terminated (using task-manager).&lt;/p&gt;</comment>
                            <comment id="13765565" author="agustin.pereira" created="Thu, 12 Sep 2013 16:07:34 +0000"  >&lt;p&gt;I have the same problem, with windows 7 64,java version &quot;1.7.0_17&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0_17-b02), Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)&lt;/p&gt;

&lt;p&gt;It works fine (the service stops) on Windows Server 2003 R2 Enterprise x64 Service Pack 1.&lt;/p&gt;</comment>
                            <comment id="13871925" author="gchauvet" created="Wed, 15 Jan 2014 11:03:36 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I have the same issue as you, except we implement the Daemon interface.&lt;br/&gt;
The &quot;start&quot; method is correctly invoked, but when we want to stop our service, the &quot;stop&quot; method isn&apos;t invoked.&lt;br/&gt;
After 2 minutes, the Windows service manager returns error code 1053. We are unable to restart our service because prunsrv is already running.&lt;/p&gt;</comment>
                            <comment id="14072857" author="nclement" created="Thu, 24 Jul 2014 05:58:19 +0000"  >&lt;p&gt;We had this issue too.  We copied the &lt;tt&gt;tomcat7.exe&lt;/tt&gt; and &lt;tt&gt;tomcat7w.exe&lt;/tt&gt; files from Tomcat 7.0.39 to get around this (these files are actually v1.0.14 of procrun, so I can confirm that rolling back worked for us too).&lt;/p&gt;</comment>
                            <comment id="14728999" author="alexbh" created="Thu, 3 Sep 2015 13:03:43 +0000"  >&lt;p&gt;Issue still present, reproduced on windows 2008 R2 with java 1.7.0_79 64-Bit and Daemon procrun (1.0.15.0 64-bit)&lt;/p&gt;
</comment>
                            <comment id="14729230" author="garydgregory" created="Thu, 3 Sep 2015 15:17:34 +0000"  >&lt;p&gt;Thank you for testing. Are you available to provide a patch? &lt;/p&gt;</comment>
                            <comment id="15118958" author="umut.saribiyik@wabion.com" created="Wed, 27 Jan 2016 09:58:57 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;Any updates about this case? I have the same problem with procrun (1.0.15.0 64-bit). Or is there a workaround?&lt;/p&gt;</comment>
                            <comment id="15651315" author="gchauvet" created="Wed, 9 Nov 2016 16:10:14 +0000"  >&lt;p&gt;I remember having this issue in the past (15/01/2014). I take a look this weekend to provide a UT.&lt;/p&gt;</comment>
                            <comment id="15703179" author="markt" created="Mon, 28 Nov 2016 21:26:25 +0000"  >&lt;p&gt;I&apos;ve tried various ways to trigger this error or something that looks like it and I haven&apos;t been able to do so.&lt;/p&gt;

&lt;p&gt;If you can recreate this error with either 1.0.15 or procrun built from trunk, please re-open this issue and provide the steps required to so do.&lt;/p&gt;</comment>
                            <comment id="16057128" author="raghavaraju.k" created="Wed, 21 Jun 2017 08:00:57 +0000"  >&lt;p&gt;Hi All,&lt;/p&gt;

&lt;p&gt;I am seeing same issue.  I am able to start the service but when I am stopping service.  It is not getting killed. I am trying with Tomcat 8.5.8 and JRE 1.8 with combination of WindRun4J.  &lt;/p&gt;

&lt;p&gt;Any pointer would really helpful.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13081344">DAEMON-362</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13081974">DAEMON-366</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12916577">DAEMON-340</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13081128">DAEMON-361</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>327186</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kgb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>327530</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-296] Errors in log after stopping windows service</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-296</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I am able to start and stop Windows service with prunsrv.exe, but after stopping the service the log contains errors:&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:04:58&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 6076] Commons Daemon procrun (1.0.15.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:04:58&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 6076] Service EAP61SVC name JBoss Enterprise Application Server 6.1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:04:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 6076] Service &apos;EAP61SVC&apos; installed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:04:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 6076] Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:04:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2632] Commons Daemon procrun (1.0.15.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:04:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2632] Updating service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:04:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2632] Service &apos;EAP61SVC&apos; updated&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:04:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2632] Update service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:04:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2632] Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:06:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2496] Commons Daemon procrun (1.0.15.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:06:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2496] Running &apos;EAP61SVC&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:06:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 4376] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:06:03&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 4376] Service started in 1713 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:06:43&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 5820] Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:06:44&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 5984] Failed to set service status&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-22 07:06:44&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 5984] The handle is invalid.&lt;br/&gt;
------------------------------------------------------------------------------&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 2008, Windows 2008 R2&lt;br/&gt;
32/64b&lt;/p&gt;</environment>
        <key id="12645420">DAEMON-296</key>
            <summary>Errors in log after stopping windows service</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jstefl">Jan Stefl</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Apr 2013 12:25:57 +0000</created>
                <updated>Sat, 11 Nov 2017 07:59:08 +0000</updated>
                            <resolved>Mon, 28 Nov 2016 21:24:22 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>3</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13645628" author="jstefl" created="Tue, 30 Apr 2013 14:39:14 +0000"  >&lt;p&gt;After setting logging level to Debug, behaviour was changed a little.&lt;/p&gt;

&lt;p&gt;net stop EAP61SVC &lt;br/&gt;
returns:&lt;br/&gt;
---------------------------------------------------------------------------&lt;br/&gt;
The JBoss Enterprise Application Server 6.1 service is stopping.&lt;br/&gt;
A system error has occurred.&lt;/p&gt;

&lt;p&gt;System error 1067 has occurred.&lt;/p&gt;

&lt;p&gt;The process terminated unexpectedly.&lt;/p&gt;

&lt;p&gt;The JBoss Enterprise Application Server 6.1 service was stopped successfully.&lt;br/&gt;
---------------------------------------------------------------------------&lt;/p&gt;



&lt;p&gt;And log contains&lt;br/&gt;
------------------------------------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-30 07:32:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) [ 2028] reportServiceStatusE: 4, 0, 0, 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-30 07:32:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1528) [ 2028] Waiting for worker to finish...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-30 07:32:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1533) [ 2028] Worker finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-30 07:32:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1559) [ 2028] Waiting for all threads to exit&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-30 07:32:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) [ 5504] reportServiceStatusE: 4, 0, 0, 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-30 07:33:17&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) [ 5504] reportServiceStatusE: 3, 0, 3000, 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-30 07:33:17&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:943 ) [ 5548] Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-30 07:33:17&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:941 ) [ 4904] Java Worker thread started java/lang/System:exit&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-30 07:33:18&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:844 ) [ 5548] reportServiceStatusE: 3, 0, 20000, 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-30 07:33:18&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:471 ) [ 5276] Exit hook with exit code 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-04-30 07:33:18&amp;#93;&lt;/span&gt; &lt;br/&gt;
------------------------------------------------------------------------------------------&lt;/p&gt;</comment>
                            <comment id="14181108" author="hagar_" created="Thu, 23 Oct 2014 07:58:53 +0000"  >&lt;p&gt;Are there any progress on this issue? if not, are could someone give me a pointer to where in the codebase I should/could look?&lt;/p&gt;</comment>
                            <comment id="15703172" author="markt" created="Mon, 28 Nov 2016 21:24:23 +0000"  >&lt;p&gt;I&apos;ve tried various ways to trigger this error or something that looks like it and I haven&apos;t been able to do so.&lt;/p&gt;

&lt;p&gt;If you can recreate this error with either 1.0.15 or procrun built from trunk, please re-open this issue and provide the steps required to so do.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>325782</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1k7dr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326127</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-295] Mysterious JVM argument: exit</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-295</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I have a Windows service configured to use --StartMode=jvm. I noticed an unexplained JVM argument &apos;exit&apos; when my service prints out the active JVM arguments at startup using the java code:&lt;br/&gt;
System.out.println(&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;Begin JVM arguments&amp;#93;&lt;/span&gt;&quot;);&lt;br/&gt;
for (final String jvmArg : ManagementFactory.getRuntimeMXBean().getInputArguments())&lt;br/&gt;
{&lt;br/&gt;
    System.out.println(jvmArg);&lt;br/&gt;
}&lt;br/&gt;
System.out.println(&quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;End JVM arguments&amp;#93;&lt;/span&gt;&quot;);&lt;/p&gt;

&lt;p&gt;For example:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Begin JVM arguments&amp;#93;&lt;/span&gt;&lt;br/&gt;
-Xrs&lt;br/&gt;
-XX:+UseG1GC&lt;br/&gt;
exit&lt;br/&gt;
-Xms100m&lt;br/&gt;
-Xmx1024m&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;End JVM arguments&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The arguments listed before &apos;exit&apos; are those that I configured using --JvmOptions=-Xrs;-XX:+UseG1GC. The arguments listed after &apos;exit&apos; were added by procrun itself based on the --JvmMs and --JvmMx arguments that I specified (if not specified, exit will be the last argument). But where did exit come from? Why is it added as a JVM argument? I even checked the Options key in the registry and exit is nowhere to be seen.&lt;/p&gt;

&lt;p&gt;Although I have not noticed any ill effects, this seems like a bug to me as I don&apos;t believe exit was added intentionally. The same behavior is observed whether run as a procrun service, or using the procrun console mode, but not when running normally using java -server -Xrs -XX:+UseG1GC -jar ...&lt;/p&gt;</description>
                <environment>&lt;p&gt;jvm mode using JDK7 server JVM on Windows&lt;/p&gt;</environment>
        <key id="12642856">DAEMON-295</key>
            <summary>Mysterious JVM argument: exit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="patrickjmccarty">Patrick McCarty</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Apr 2013 05:04:39 +0000</created>
                <updated>Wed, 17 Apr 2013 09:17:50 +0000</updated>
                            <resolved>Wed, 17 Apr 2013 09:17:36 +0000</resolved>
                                    <version>1.0.15</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13633917" author="mturk@apache.org" created="Wed, 17 Apr 2013 09:17:36 +0000"  >&lt;p&gt;Check optionString in JNI_CreateJavaVM&lt;br/&gt;
&lt;a href=&quot;http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/invocation.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/invocation.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This is our exit hook, so it just happens it is shown as cmdline argument.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>323270</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jrw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>323615</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-294] Compilation fails on GNU Hurd</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-294</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The compilation of Commons Daemon fails on GNU Hurd as reported by the buildd instance used by Debian. It breaks with the following error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;arguments.c:61:17: error: &lt;span class=&quot;code-quote&quot;&gt;&apos;PATH_MAX&apos;&lt;/span&gt; undeclared (first use in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; function)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The full report is available here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://buildd.debian.org/status/package.php?p=commons-daemon&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://buildd.debian.org/status/package.php?p=commons-daemon&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://buildd.debian.org/status/fetch.php?pkg=commons-daemon&amp;amp;arch=hurd-i386&amp;amp;ver=1.0.10-3&amp;amp;stamp=1345183045&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://buildd.debian.org/status/fetch.php?pkg=commons-daemon&amp;amp;arch=hurd-i386&amp;amp;ver=1.0.10-3&amp;amp;stamp=1345183045&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12641365">DAEMON-294</key>
            <summary>Compilation fails on GNU Hurd</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ebourg">Emmanuel Bourg</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Apr 2013 12:56:30 +0000</created>
                <updated>Fri, 12 Apr 2013 00:17:27 +0000</updated>
                                            <version>1.0.10</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13628976" author="mturk@apache.org" created="Thu, 11 Apr 2013 14:33:48 +0000"  >&lt;p&gt;No idea. It works on other linuxes (suppose that&apos;s what you mean by GNU Hurd)&lt;br/&gt;
PATH_MAX should come from &amp;lt;limits.h&amp;gt; and that is included inside arhuments.c&lt;/p&gt;

&lt;p&gt;Feel free to provide a patch&lt;/p&gt;</comment>
                            <comment id="13628984" author="ebourg" created="Thu, 11 Apr 2013 14:49:44 +0000"  >&lt;p&gt;Actually Hurd is not a variant of Linux, it&apos;s a different kernel. It looks like this issue is quite common:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.gnu.org/software/hurd/community/gsoc/project_ideas/maxpath.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.gnu.org/software/hurd/community/gsoc/project_ideas/maxpath.html&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;POSIX describes some constants (or rather macros) like PATH_MAX/MAXPATHLEN and similar, which may be defined by the system to indicate certain limits. Many people overlook the may though: Systems only should define them if they actually have such fixed limits (see limits.h). The Hurd, following the GNU Coding Standards, tries to avoid this kind of arbitrary limits, and consequently doesn&apos;t define the macros.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ll try to contact the Hurd community to get some help.&lt;/p&gt;</comment>
                            <comment id="13628994" author="ebourg" created="Thu, 11 Apr 2013 15:04:29 +0000"  >&lt;p&gt;Also, from the GNU Hurd Porting Guidelines:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.gnu.org/software/hurd/hurd/porting/guidelines.html#PATH_MAX_tt_MAX_PATH_tt_MAXPATHL&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.gnu.org/software/hurd/hurd/porting/guidelines.html#PATH_MAX_tt_MAX_PATH_tt_MAXPATHL&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Every unconditionalized use of PATH_MAX, MAX_PATH or MAXPATHLEN is a POSIX incompatibility. If there is no upper limit on the length of a path (as its the case for GNU), this symbol is not defined in any header file. Instead, you need to either use a different implementation that does not rely on the length of a string or use sysconf() to query the length at runtime. If sysconf() returns -1, you have to use realloc() to allocate the needed memory dynamically. Usually it is thus simpler to just use dynamic allocation. Sometimes the amount is actually known. Else, a geometrically growing loop can be used: for instance, see &lt;a href=&quot;http://alioth.debian.org/tracker/download.php/30628/410472/303735/1575/cpulimit-path-max-fix.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Alioth patch&lt;/a&gt; or &lt;a href=&quot;http://bugs.debian.org/cgi-bin/bugreport.cgi?msg=5;filename=patch-pulse;att=1;bug=522100&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Pulseaudio patch&lt;/a&gt;. Note that in some cases there are GNU extensions that just work fine: when the _&lt;em&gt;GLIBC&lt;/em&gt;_ macro is defined, getcwd() calls can be just replaced by get_current_dir_name() calls.&lt;/p&gt;

&lt;p&gt;Note: constants such as _POSIX_PATH_MAX are only the minimum required value for a potential corresponding PATH_MAX macro. They are not a replacement for PATH_MAX, just the minimum value that one can assume.&lt;/p&gt;

&lt;p&gt;Note 2: Yes, some POSIX functions such as realpath() actually assume that PATH_MAX is defined. This is a bug of the POSIX standard, which got fixed in the latest revisions, in which one can simply pass NULL to get a dynamically allocated buffer.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="13629003" author="mturk@apache.org" created="Thu, 11 Apr 2013 15:15:11 +0000"  >&lt;p&gt;Unless there is some clean solution for fixing that, I&apos;m not going to change whole bunch of code to support this obscure platform.&lt;/p&gt;</comment>
                            <comment id="13629621" author="sebb@apache.org" created="Fri, 12 Apr 2013 00:17:27 +0000"  >&lt;p&gt;Can&apos;t one just assume a suitably large value if it is not defined?&lt;br/&gt;
If the assumed value turns out not large enough, then the user can define it before compilation (needs documenting).&lt;/p&gt;

&lt;p&gt;Alternatively, just update the docs (and code if poss) to say that the value needs to be defined before the code is built.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>321781</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jipj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>322126</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-292] Thread dump does not work</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-292</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Thread dump reports &apos;Handle is invalid&apos; error when hit form procrun manager.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12639081">DAEMON-292</key>
            <summary>Thread dump does not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mturk@apache.org">Mladen Turk</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Mar 2013 12:10:15 +0000</created>
                <updated>Tue, 26 Mar 2013 12:10:59 +0000</updated>
                            <resolved>Tue, 26 Mar 2013 12:10:59 +0000</resolved>
                                    <version>1.0.14</version>
                                    <fixVersion>1.0.15</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13613721" author="mturk@apache.org" created="Tue, 26 Mar 2013 12:10:59 +0000"  >&lt;p&gt;Fixed with r1460101&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319551</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1j4xj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319892</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-291] jsvc cores on Linux</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-291</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Version 1.0.14 cores on Linux if no LD_LIBRARY_PATH environment variable is set.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12639080">DAEMON-291</key>
            <summary>jsvc cores on Linux</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="mturk@apache.org">Mladen Turk</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Mar 2013 12:07:48 +0000</created>
                <updated>Tue, 26 Mar 2013 12:08:53 +0000</updated>
                            <resolved>Tue, 26 Mar 2013 12:08:53 +0000</resolved>
                                    <version>1.0.14</version>
                                    <fixVersion>1.0.15</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13613719" author="mturk@apache.org" created="Tue, 26 Mar 2013 12:08:53 +0000"  >&lt;p&gt;Fixed with r1460687&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319550</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1j4xb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319891</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-290] Property java.net.useSystemProxies does not apply when Tomcat runs as service.</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-290</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Predefined conditions:&lt;br/&gt;
1. Configured system proxies.&lt;br/&gt;
2. Web application deployed to Tomcat with sample code retrieves list of system proxies like this:&lt;/p&gt;

&lt;p&gt;String property = System.getProperty(&quot;java.net.useSystemProxies&quot;);&lt;br/&gt;
List&amp;lt;proxy&amp;gt; list = ProxySelector.getDefault().select(uri);&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;br/&gt;
1. Start Tomcat6w.exe (prunmgr.exe).&lt;br/&gt;
2. Open &quot;Java&quot; tab, go to &quot;Java Options&quot; section.&lt;br/&gt;
3. Add option &quot;-Djava.net.useSystemProxies=true&quot;.&lt;br/&gt;
4. Go to &quot;General&quot; tab and press &quot;Start&quot;.&lt;br/&gt;
5. Waiting while web application will starts and sample code runs.&lt;/p&gt;

&lt;p&gt;Expected result:&lt;br/&gt;
1. &quot;property&quot; value contains &quot;true&quot;.&lt;br/&gt;
2. &quot;list&quot; value contains a list of system proxies.&lt;/p&gt;

&lt;p&gt;Actual result:&lt;br/&gt;
1. &quot;property&quot; value contains &quot;true&quot;.&lt;br/&gt;
2. &quot;list&quot; value contains one item &quot;DIRECT&quot;. It means system has no any configured proxies.&lt;/p&gt;

&lt;p&gt;Additionally, it&apos;s no problem when:&lt;br/&gt;
1) starts tomcat with startup.bat with specified java.net.useSystemProxy property&lt;br/&gt;
2) starts tomcat directly with Tomcat6.exe (prunsrv.exe).&lt;/p&gt;

&lt;p&gt;It seems, when Tomcat runs with prunmgr.exe than java.net.useSystemProxy property sets with delay and has no any effect.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Server 2003 R2 x86 EN&lt;br/&gt;
jdk-6u32-windows-i586&lt;br/&gt;
Apache Tomcat 6.0.35 (windows installation)&lt;/p&gt;</environment>
        <key id="12638311">DAEMON-290</key>
            <summary>Property java.net.useSystemProxies does not apply when Tomcat runs as service.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="equilibrium">John Preston</reporter>
                        <labels>
                            <label>Tomcat6</label>
                            <label>java.net.useSystemProxies</label>
                            <label>prunmgr</label>
                    </labels>
                <created>Thu, 21 Mar 2013 16:37:43 +0000</created>
                <updated>Thu, 21 Mar 2013 19:35:58 +0000</updated>
                            <resolved>Thu, 21 Mar 2013 18:48:28 +0000</resolved>
                                    <version>1.0.7</version>
                    <version>1.0.14</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13609296" author="mturk@apache.org" created="Thu, 21 Mar 2013 18:48:28 +0000"  >&lt;p&gt;Please use users or dev list for support questions.&lt;/p&gt;

&lt;p&gt;Seems to everything is OK except JVM cannot read the list&lt;br/&gt;
of proxies which you have configured.&lt;br/&gt;
When running as service under LOCAL_SYSTEM account make&lt;br/&gt;
sure you have allowed access to that folder (where deployment.setting or net.properties is stored). For browser setting thats probably inside&lt;br/&gt;
registry so access again.&lt;/p&gt;

&lt;p&gt;Anyway, if works (and it does according to your own showcase) inside&lt;br/&gt;
console and not inside service, the answer is simple: security.&lt;/p&gt;</comment>
                            <comment id="13609363" author="equilibrium" created="Thu, 21 Mar 2013 19:35:58 +0000"  >&lt;p&gt;Thank you for hints, Mladen!&lt;/p&gt;

&lt;p&gt;You are absolutely right!&lt;br/&gt;
I tried to start tomcat as service under Administrator account and successfully got a system proxy list.&lt;/p&gt;

&lt;p&gt;Sorry for inconvenience! I will follow your advice about support questions next time.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>318787</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1j07r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319128</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-288] Hang while stopping procrun service</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-288</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;There is a hang of the procrun service while it is attempting to stop.  It is not easy to reproduce ( 30%-5% depending on pc ).  Using a debugging to analyze the hang, both the serviceMain() and serviceStop() threads appear to have run and exited.  I can tell this from the state of the global variables like gSargs and gShutdownEvents.  Looking at the code, both are calling reportServiceStatus( SERVICE_STOPPED...).  Typically when either one reports SERVICE_STOPPED, the main thread unblocks and the process terminates.  This often occurs without both threads running to completion.  I think this is a race condition caused by the reportServiceStatus() usage.  The MSDN documentation for SetServiceStatus() states to only call SetServiceStatus() with SERVICE_STOPPED after all cleanup has occurred and to only call it once.  It appears that procrun has a race condition where 2 threads will both attempt to report SERVICE_STOPPED and will likely report this while the other thread is still running.  I believe this is the root cause of why the Service Control Manager sometimes is unable to stop the service.   &lt;/p&gt;

&lt;p&gt;As a potential solution, I modified serviceStop() to not call reportServiceStatus(SERVICE_STOPPED...) and to move the SetEvent( gShutdownEvent) to the end of the method.  This change allows the thread running the  serviceStop() to complete.  Now the only method reporting stopped is when serviceMain() exits.  With this refactoring to only report SERVICE_STOPPED once (per MSDN) the hang has not been reproducible.  &lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 64 bit&lt;/p&gt;</environment>
        <key id="12637750">DAEMON-288</key>
            <summary>Hang while stopping procrun service</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bbsclient">Mike Miller</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Mar 2013 12:28:03 +0000</created>
                <updated>Mon, 26 Jun 2017 16:51:49 +0000</updated>
                            <resolved>Tue, 26 Mar 2013 12:06:09 +0000</resolved>
                                    <version>1.0.13</version>
                                    <fixVersion>1.0.15</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13607480" author="mturk@apache.org" created="Wed, 20 Mar 2013 10:30:19 +0000"  >&lt;p&gt;Can you attach a patch against latest release (1.0.14 or branches/1.1.x).&lt;br/&gt;
From your post I presume you have one.&lt;/p&gt;</comment>
                            <comment id="13607540" author="bbsclient" created="Wed, 20 Mar 2013 12:11:10 +0000"  >&lt;p&gt;Here is the patch that eliminated the duplicate SetServiceStatus( SERVICE_STOPPED..) calls and allows both serviceMain and serviceStop to run to completion.  With this patch we were unable to reproduce the hang.  Based on MSDN documentation, SetServiceStatus( SERVICE_STOPPED...) should be called only once and after all work is complete or bad things could happen.  &lt;/p&gt;</comment>
                            <comment id="13607542" author="mturk@apache.org" created="Wed, 20 Mar 2013 12:21:00 +0000"  >&lt;p&gt;Thanks.&lt;br/&gt;
Looks OK, but I have to verify how that behaves with various start/stop method combinations. Suppose you were only checking JNI methods.&lt;/p&gt;</comment>
                            <comment id="13607548" author="bbsclient" created="Wed, 20 Mar 2013 12:31:35 +0000"  >&lt;p&gt;Correct, we only tested the JNI case running as a windows service.&lt;/p&gt;</comment>
                            <comment id="13613717" author="mturk@apache.org" created="Tue, 26 Mar 2013 12:06:09 +0000"  >&lt;p&gt;Patch applied. Thanks!&lt;/p&gt;</comment>
                            <comment id="16062041" author="b.eckenfels" created="Sat, 24 Jun 2017 15:56:20 +0000"  >&lt;p&gt;Discussiong this in &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-366&quot; title=&quot;Windows service fails to stop with error code 1053 (using Windows 7 service manager)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-366&quot;&gt;&lt;del&gt;DAEMON-366&lt;/del&gt;&lt;/a&gt; since it looks like the change (probably) causes 1.0.15 be less forcefull in terminating a JVM. Any idea when it will happen that the main thread does not see the gShutdownEvent (should we maybe add a warning log in this case?)&lt;/p&gt;</comment>
                            <comment id="16063389" author="bbsclient" created="Mon, 26 Jun 2017 16:51:49 +0000"  >&lt;p&gt;Based on &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-366&quot; title=&quot;Windows service fails to stop with error code 1053 (using Windows 7 service manager)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-366&quot;&gt;&lt;del&gt;DAEMON-366&lt;/del&gt;&lt;/a&gt; traces and config, I think the main thread didn&apos;t see gShutdownEvent because the start method returned before the stop method was called.  Notice the trace &quot;Waiting for all threads to exit&quot; occurred right after the start was called.  The stop wasn&apos;t called for another 3 minutes.  Since gShutdownEvent is created during the stop, it would have still been NULL if the start exited before the serviceStop() was called.  Since start exited prematurely, the code ended up in the code path to INFINITE wait for the JVM to exit.  I would speculate that there was a non-daemon JVM thread preventing the JVM from exiting.  According to Procrun documentation, &quot;Note: in jvm mode, the start method should not return until the stop method has been called.&quot;.  &lt;/p&gt;

&lt;p&gt;Maybe a warning should be logged if executing in JVM mode and the start method returns before the stop method is executed?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12574533" name="prunsrv.c.patch" size="1544" author="bbsclient" created="Wed, 20 Mar 2013 12:11:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>318230</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1iwrz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>318571</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-287] procrun&apos;s CloseHandle(_service_status_handle) not needed and causes exception</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-287</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;prunsrv.c line 1733 calls CloseHandle(_service_status_handle), this causes an invalid handle exception to the thrown &amp;amp; caught.   &lt;br/&gt;
The documentation for RegisterServiceCtrlHandleW() states that CloseHandle() does not have to be called. &lt;/p&gt;

&lt;p&gt;See MSDN documentation for RegisterServiceCtrlHandleW.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 64 bit&lt;/p&gt;</environment>
        <key id="12636600">DAEMON-287</key>
            <summary>procrun&apos;s CloseHandle(_service_status_handle) not needed and causes exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bbsclient">Mike Miller</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Mar 2013 16:30:57 +0000</created>
                <updated>Wed, 13 Mar 2013 06:42:25 +0000</updated>
                            <resolved>Wed, 13 Mar 2013 06:42:25 +0000</resolved>
                                    <version>1.0.13</version>
                                    <fixVersion>1.0.14</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13600891" author="mturk@apache.org" created="Wed, 13 Mar 2013 06:42:25 +0000"  >&lt;p&gt;Fixed in the SVN by r1455821&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317092</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ipr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317433</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-286] Race condition during stopping service</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-286</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;While debugging an issue where ProcRun NT Service hangs in the stopping state, I noticed a race condition that causes 2 possible code paths during stopping.   &lt;/p&gt;

&lt;p&gt;serviceStop() calls afxJavaStart(...).  I have observed apxJavaStart() returns both TRUE &amp;amp; FALSE for a successful call to my stop method.  I think this is caused by a potential race condition in apxJavaStart() &amp;amp; __apxJavaWorkerThread.  The afxJavaStart() waits for lpJava-&amp;gt;hWorkerSync event to be set and then checks the lpJava-&amp;gt;dwWorkerStatus.  The race condition is that __apxJavaWorkerThread sets the dwWorkerStatus to 1 and sets the event but there is no guarantee that afxJavaStart() will see the 1.  If the __apxJavaWorkerThread completes the stop call before afxJavaStart has a chance to check the dwWorkerStatus, the __apxJavaWorkerThread may have changed the dwWorkerStatus back to 0.   So depending on timing, it appears apxJavaStart() could return either TRUE or FALSE even if the stop method behaved the same.&lt;/p&gt;

&lt;p&gt;This race condition results in the stopService() method not always calling afxjavaWait(hWorker, INFINITE,...). &lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 64 bit&lt;/p&gt;</environment>
        <key id="12636501">DAEMON-286</key>
            <summary>Race condition during stopping service</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="bbsclient">Mike Miller</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Mar 2013 03:38:50 +0000</created>
                <updated>Wed, 13 Mar 2013 07:03:57 +0000</updated>
                            <resolved>Wed, 13 Mar 2013 07:03:57 +0000</resolved>
                                    <version>1.0.13</version>
                                    <fixVersion>1.0.14</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13600899" author="mturk@apache.org" created="Wed, 13 Mar 2013 07:03:57 +0000"  >&lt;p&gt;Your observation was correct.&lt;br/&gt;
I have added an extra sync event which waits inside worker thread for signal from apxJavaStart ensuring it saws the dwWorkerStatus set to 1.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316993</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ip5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317334</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-284] Service configuration corruption on install</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-284</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Reported to the Tomcat bugzilla &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; and Tomcat users list &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;This has only been reported against 7.0.37 which is the first Tomcat version to use 1.0.13.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=54609&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=54609&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://tomcat.markmail.org/thread/ojw7xsbzowvwy3jv&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tomcat.markmail.org/thread/ojw7xsbzowvwy3jv&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12635610">DAEMON-284</key>
            <summary>Service configuration corruption on install</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="markt">Mark Thomas</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Mar 2013 17:04:47 +0000</created>
                <updated>Mon, 30 Oct 2017 14:12:00 +0000</updated>
                            <resolved>Thu, 7 Mar 2013 05:49:21 +0000</resolved>
                                    <version>1.0.13</version>
                                    <fixVersion>1.0.14</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13595309" author="kkolinko" created="Thu, 7 Mar 2013 00:02:54 +0000"  >&lt;p&gt;In \src\native\windows\apps\prunsrv\prunsrv.c&lt;br/&gt;
 method docmdInstallService(..) line 588&lt;/p&gt;

&lt;p&gt;Replace&lt;br/&gt;
 lstrlcatW(szName, SIZ_BUFLEN, L&quot;//RS//&quot;);&lt;br/&gt;
 lstrlcatW(szName, SIZ_HUGLEN, lpCmdline-&amp;gt;szApplication);&lt;br/&gt;
with&lt;br/&gt;
 lstrlcpyW(szName, SIZ_BUFLEN, L&quot;//RS//&quot;);&lt;br/&gt;
 lstrlcatW(szName, SIZ_BUFLEN, lpCmdline-&amp;gt;szApplication);&lt;/p&gt;

&lt;p&gt;1) wrong method name on the first line, s/cat/cpy/&lt;br/&gt;
2) wrong size on the second line, s/HUG/BUF/&lt;/p&gt;

&lt;p&gt;Introduced by r1412017&lt;/p&gt;


&lt;p&gt;BTW, several lines above, on line 583&lt;br/&gt;
 lstrcpyW(szImage, SO_INSTALL);&lt;br/&gt;
I wonder why it is not &quot;lstrlcpyW&quot;.&lt;/p&gt;</comment>
                            <comment id="13595573" author="mturk@apache.org" created="Thu, 7 Mar 2013 05:49:21 +0000"  >&lt;p&gt;Patch applied.&lt;br/&gt;
I have also changed other unsafe lstrcpy to lstrlcpy methods. Thanks.&lt;/p&gt;</comment>
                            <comment id="13595674" author="kkolinko" created="Thu, 7 Mar 2013 08:30:54 +0000"  >&lt;p&gt;Re r1453680&lt;/p&gt;

&lt;p&gt;The following has not been applied, line 589&lt;br/&gt;
s/SIZ_HUGLEN/SIZ_BUFLEN/&lt;/p&gt;

&lt;p&gt;szName is 512 bytes, not 8192&lt;/p&gt;</comment>
                            <comment id="13595775" author="mturk@apache.org" created="Thu, 7 Mar 2013 11:00:12 +0000"  >&lt;p&gt;Done, thanks for spotting that&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12920203">DAEMON-341</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316103</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ijnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316446</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-283] DaemonWrapper cannot start launch methods with private constructors</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-283</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;For command&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./jsvc  -debug \
-cp $JBOSS_HOME/jboss-modules.jar:$JBOSS_HOME/bin/commons-daemon-1.0.13.jar \
-outfile $JBOSS_HOME/bin/jboss.out \
-errfile $JBOSS_HOME/bin/jboss.err \
-pidfile $JBOSS_HOME/bin/jboss.pid \
-Djboss.home.dir=$JBOSS_HOME \
-Djboss.server.base.dir=$JBOSS_HOME/standalone \
-D[Standalone] -XX:+UseCompressedOops -Xms1303m -Xmx1303m -XX:MaxPermSize=256m \
-Djava.net.preferIPv4Stack=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; \
-Djboss.modules.system.pkgs=org.jboss.byteman \
-Djava.awt.headless=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;  \
-Dorg.jboss.boot.log.file=$JBOSS_HOME/standalone/log/server.log \
-Dlogging.configuration=file:$JBOSS_HOME/standalone/configuration/logging.properties \  
@org.jboss.modules.Main \
-start-method main \
-mp $JBOSS_HOME/modules \
-jaxpmodule javax.xml.jaxp-provider \
org.jboss.as.standalone
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output in jboss.err&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java_init done
Daemon loading...
Daemon loaded successfully
java_load done
java.lang.reflect.InvocationTargetException
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:601)
 at org.apache.commons.daemon.support.DaemonLoader.start(DaemonLoader.java:243)
Caused by: java.lang.IllegalAccessException: &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; org.apache.commons.daemon.support.DaemonWrapper$Invoker can not access a member of &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.jboss.modules.Main with modifiers &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt;&quot;&lt;/span&gt;
 at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:95)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.newInstance0(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:366)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.newInstance(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:325)
 at org.apache.commons.daemon.support.DaemonWrapper$Invoker.invoke(DaemonWrapper.java:229)
 at org.apache.commons.daemon.support.DaemonWrapper.start(DaemonWrapper.java:166)
 ... 5 more
Cannot start daemon
java_start failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12635529">DAEMON-283</key>
            <summary>DaemonWrapper cannot start launch methods with private constructors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="jstefl">Jan Stefl</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Mar 2013 09:34:23 +0000</created>
                <updated>Wed, 6 Mar 2013 09:55:16 +0000</updated>
                            <resolved>Wed, 6 Mar 2013 09:55:16 +0000</resolved>
                                    <version>1.0.13</version>
                                    <fixVersion>1.0.14</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13594540" author="mturk@apache.org" created="Wed, 6 Mar 2013 09:55:16 +0000"  >&lt;p&gt;Fixed with the r1453245&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316022</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ij5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316365</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-282] Failed to stop &apos;xx&apos; service: The data area passed to a system call is too small</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-282</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The Apache mailing list shows that they have the same problem before. However it said procrun 1.0.8 fixed this problem. I tried different versions of procrun however it showed no luck.&lt;br/&gt;
&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/commons-user/201204.mbox/%3C4F9503F4.6020500@apache.org%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/commons-user/201204.mbox/%3C4F9503F4.6020500@apache.org%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;both installation and start work perfectly. However it always reported error when stopping the service. &lt;br/&gt;
Failed to stop &apos;TestApplication&apos; service&lt;br/&gt;
The data area passed to a system call is too small.&lt;br/&gt;
In fact, the stop was successful after the processing was complete.&lt;/p&gt;

&lt;p&gt;Here is the log generated:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1672) [ 4172] Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1676) [ 4172] Commons Daemon procrun (1.0.13.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:686 ) [ 4172] Stopping service &apos;TestApplication&apos; ...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:843 ) [ 1276] reportServiceStatusE: 3, 0, 3000, 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:942 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10180&amp;#93;&lt;/span&gt; Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:927 ) [  748] Java Worker thread started com/company/project/startup/WindowServiceApplication:stop&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:39&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:988 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10180&amp;#93;&lt;/span&gt; Waiting for java jni stop worker to finish...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:42&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:707 ) [ 4172] Failed to stop &apos;TestApplication&apos; service&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:42&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:707 ) [ 4172] The data area passed to a system call is too small.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:42&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:715 ) [ 4172] Stop service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:42&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:1748) [ 4172] Commons Daemon procrun failed with exit value: 6 (Failed to stop service)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:42&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:1748) [ 4172] The data area passed to a system call is too small.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:948 ) [  748] Java Worker thread finished com/company/project/startup/WindowServiceApplication:stop with status=0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:990 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10180&amp;#93;&lt;/span&gt; Java jni stop worker finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:843 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10180&amp;#93;&lt;/span&gt; reportServiceStatusE: 3, 0, 120000, 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1091) &lt;span class=&quot;error&quot;&gt;&amp;#91;10180&amp;#93;&lt;/span&gt; Waiting for worker to die naturally...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1102) &lt;span class=&quot;error&quot;&gt;&amp;#91;10180&amp;#93;&lt;/span&gt; Worker finished gracefully in 0 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1112) &lt;span class=&quot;error&quot;&gt;&amp;#91;10180&amp;#93;&lt;/span&gt; Service stopped.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:843 ) &lt;span class=&quot;error&quot;&gt;&amp;#91;10180&amp;#93;&lt;/span&gt; reportServiceStatusE: 1, 0, 0, 0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1591) [ 1276] Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-03-01 18:49:47&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1757) [ 1276] Commons Daemon procrun finished&lt;/p&gt;

&lt;p&gt;Checked TestApplicaton code and found out that when prunsrv threw that exception, the java main thread was sleeping for 5 seconds. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Procrun version tried: &lt;br/&gt;
1.0.8&lt;br/&gt;
1.0.12&lt;br/&gt;
1.0.13&lt;/p&gt;

&lt;p&gt;System environment: &lt;br/&gt;
Windows XP SP3 32bit&lt;br/&gt;
Windows 7 64bit&lt;br/&gt;
Windows 2008 Server 32bit&lt;/p&gt;</environment>
        <key id="12634801">DAEMON-282</key>
            <summary>Failed to stop &apos;xx&apos; service: The data area passed to a system call is too small</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="busbby">Hua Lan</reporter>
                        <labels>
                            <label>procrun</label>
                    </labels>
                <created>Fri, 1 Mar 2013 12:33:42 +0000</created>
                <updated>Thu, 23 Nov 2017 09:48:23 +0000</updated>
                            <resolved>Mon, 28 Nov 2016 17:23:46 +0000</resolved>
                                    <version>1.0.8</version>
                    <version>1.0.12</version>
                    <version>1.0.13</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="1209600">336h</timeoriginalestimate>
                            <timeestimate seconds="1209600">336h</timeestimate>
                                        <comments>
                            <comment id="13594578" author="mturk@apache.org" created="Wed, 6 Mar 2013 10:31:28 +0000"  >&lt;p&gt;Changed priority to minor.&lt;br/&gt;
From the log I see the service is stopped, so it seems it logs failure for long stop methods (you said you simulate that with 5 second delay).&lt;/p&gt;</comment>
                            <comment id="13772901" author="sbeutel" created="Fri, 20 Sep 2013 09:31:09 +0000"  >&lt;p&gt;I&apos;ve the same problem, Tomcat service didn&apos;t stopped. Here&apos;s the log output of commons-daemon.log:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-09-19 01:32:40&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; [ 3816] Commons Daemon procrun (1.0.15.0 64-bit) started &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-09-19 01:32:40&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; [ 3816] Stopping service &apos;SERVICENAME&apos; ... &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-09-19 01:32:44&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 3816] Failed to stop &apos;SERVICENAME&apos; service &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-09-19 01:32:44&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 3816] The data area passed to a system call is too small. &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-09-19 01:32:44&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; [ 3816] Stop service finished. &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-09-19 01:32:44&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 3816] Commons Daemon procrun failed with exit value: 6 (Failed to stop service) &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-09-19 01:32:44&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 3816] The data area passed to a system call is too small. &lt;/p&gt;

&lt;p&gt;In the log the service stop was finished, but if I want to delete a file (e.g. bootstrap.jar of Tomcat), it&apos;s &lt;br/&gt;
not possible and if I look into the services manager of Windows, the service is in the stopping mode and can&apos;t&lt;br/&gt;
be edited anymore. The only way to stop the service is to kill the task in Windows Task Manager.&lt;/p&gt;

&lt;p&gt;Is there any quickfix available (e.g. set a high timeout)? &lt;/p&gt;</comment>
                            <comment id="13781697" author="hsehdar" created="Mon, 30 Sep 2013 09:18:48 +0000"  >&lt;p&gt;The app built by us is with a long stop of 30 seconds.  Here too same issue is encountered&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2013-08-20 12:27:33] [error] [ 5556] Failed to stop &apos;busybee&apos; service
[2013-08-20 12:27:33] [error] [ 5556] The data area passed to a system call is too small.
[2013-08-20 12:27:33] [error] [ 5556] Commons Daemon procrun failed with exit value: 6 (Failed to stop service)
[2013-08-20 12:27:33] [error] [ 5556] The data area passed to a system call is too small.
[2013-08-20 12:28:35] [error] [ 4908] Failed to start &apos;busybee&apos; service
[2013-08-20 12:28:35] [error] [ 4908] An instance of the service is already running.
[2013-08-20 12:28:35] [error] [ 4908] Commons Daemon procrun failed with exit value: 5 (Failed to start service)
[2013-08-20 12:28:35] [error] [ 4908] An instance of the service is already running.
[2013-08-20 12:30:50] [error] [ 2220] Failed to set service status
[2013-08-20 12:30:50] [error] [ 2220] The handle is invalid.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14095197" author="sbeutel" created="Wed, 13 Aug 2014 06:08:36 +0000"  >&lt;p&gt;Any updates? The problem still exists with Tomcat 7.0.52.&lt;/p&gt;</comment>
                            <comment id="14191697" author="emassip" created="Fri, 31 Oct 2014 11:14:56 +0000"  >&lt;p&gt;FWIW using the right amd64 executable worked for me.&lt;/p&gt;</comment>
                            <comment id="14510905" author="tryte" created="Fri, 24 Apr 2015 11:51:16 +0000"  >&lt;p&gt;I&apos;ve run into the same issue when trying to &lt;tt&gt;prunsrv stop &amp;lt;servicename&amp;gt;&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2015-04-24 13:17:17] [debug] ( prunsrv.c:1679) [ 3320] Commons Daemon procrun log initialized
[2015-04-24 13:17:17] [info]  ( prunsrv.c:1683) [ 3320] Commons Daemon procrun (1.0.15.0 64-bit) started
[2015-04-24 13:17:17] [info]  ( prunsrv.c:687 ) [ 3320] Stopping service &apos;&amp;lt;servicename&amp;gt;&apos; ...
[2015-04-24 13:17:17] [warn]  ( service.c:140 ) [ 3320] Failed to obtain service description
[2015-04-24 13:17:18] [debug] ( prunsrv.c:844 ) [ 2552] reportServiceStatusE: 3, 0, 3000, 0
[2015-04-24 13:17:18] [info]  ( prunsrv.c:943 ) [ 2700] Stopping service...
[2015-04-24 13:17:18] [debug] ( javajni.c:888 ) [ 4108] argv[0] = stop
[2015-04-24 13:17:18] [debug] ( javajni.c:941 ) [ 4108] Java Worker thread started org/apache/catalina/startup/Bootstrap:main
[2015-04-24 13:17:19] [debug] ( prunsrv.c:990 ) [ 2700] Waiting for java jni stop worker to finish...
[2015-04-24 13:17:22] [error] ( prunsrv.c:708 ) [ 3320] Failed to stop &apos;&amp;lt;servicename&amp;gt;&apos; service
[2015-04-24 13:17:22] [error] ( prunsrv.c:708 ) [ 3320] Der an einen Systemaufruf &#252;bergebene Datenbereich ist zu klein.
[2015-04-24 13:17:23] [info]  ( prunsrv.c:716 ) [ 3320] Stop service finished.
[2015-04-24 13:17:23] [error] ( prunsrv.c:1755) [ 3320] Commons Daemon procrun failed with exit value: 6 (Failed to stop service)
[2015-04-24 13:17:23] [error] ( prunsrv.c:1755) [ 3320] Der an einen Systemaufruf &#252;bergebene Datenbereich ist zu klein.
[2015-04-24 13:17:26] [debug] ( javajni.c:964 ) [ 4092] Java Worker thread finished org/apache/catalina/startup/Bootstrap:main with status=0
[2015-04-24 13:17:26] [debug] ( javajni.c:964 ) [ 4108] Java Worker thread finished org/apache/catalina/startup/Bootstrap:main with status=0
[2015-04-24 13:17:26] [debug] ( prunsrv.c:1533) [ 4180] Worker finished.
[2015-04-24 13:17:26] [debug] ( prunsrv.c:992 ) [ 2700] Java jni stop worker finished.
[2015-04-24 13:17:26] [debug] ( prunsrv.c:1542) [ 4180] Waiting for ShutdownEvent
[2015-04-24 13:17:26] [debug] ( prunsrv.c:844 ) [ 4180] reportServiceStatusE: 3, 0, 60000, 0
[2015-04-24 13:17:26] [debug] ( prunsrv.c:844 ) [ 2700] reportServiceStatusE: 3, 0, 300000, 0
[2015-04-24 13:17:26] [debug] ( prunsrv.c:1093) [ 2700] Waiting for worker to die naturally...
[2015-04-24 13:17:27] [debug] ( prunsrv.c:1104) [ 2700] Worker finished gracefully in 0 ms.
[2015-04-24 13:17:27] [info]  ( prunsrv.c:1114) [ 2700] Service stop thread completed.
[2015-04-24 13:17:27] [debug] ( prunsrv.c:1545) [ 4180] ShutdownEvent signaled
[2015-04-24 13:17:27] [debug] ( prunsrv.c:1550) [ 4180] Waiting 1 minute for all threads to exit
[2015-04-24 13:17:27] [debug] ( prunsrv.c:844 ) [ 4180] reportServiceStatusE: 3, 0, 60000, 0
[2015-04-24 13:17:28] [debug] ( prunsrv.c:1563) [ 4180] JVM destroyed.
[2015-04-24 13:17:28] [debug] ( prunsrv.c:844 ) [ 4180] reportServiceStatusE: 1, 0, 0, 0
[2015-04-24 13:17:28] [info]  ( prunsrv.c:1598) [ 2552] Run service finished.
[2015-04-24 13:17:28] [info]  ( prunsrv.c:1764) [ 2552] Commons Daemon procrun finished
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Der an einen Systemaufruf &#252;bergebene Datenbereich ist zu klein.&lt;/em&gt; is the German version of &lt;em&gt;The data area passed to a system call is too small.&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;The system is a &lt;tt&gt;Windows Server 2008 R2 Standard&lt;/tt&gt;, 64 bits.&lt;br/&gt;
The issue occurs both with the 64 bit &lt;tt&gt;amd64\prunsrv.exe&lt;/tt&gt; as well as the 32 bit &lt;tt&gt;prunsrv.exe&lt;/tt&gt;. I&apos;ve tried &lt;tt&gt;1.0.15&lt;/tt&gt; (current as of writing this comment), &lt;tt&gt;1.0.14&lt;/tt&gt; and &lt;tt&gt;1.0.13&lt;/tt&gt;.&lt;br/&gt;
The process in question is a &lt;tt&gt;Liferay Portal&lt;/tt&gt; server with &lt;tt&gt;Tomcat 7.0.42&lt;/tt&gt;, running with &lt;tt&gt;--StartMode jvm&lt;/tt&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Changed priority to minor.&lt;br/&gt;
From the log I see the service is stopped, so it seems it logs failure for long stop methods (you said you simulate that with 5 second delay).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In my case the server is still in progress of shutting down when &lt;tt&gt;prunsrv&lt;/tt&gt; emits above error messages to the log. Using a high value for &lt;tt&gt;--StopTimeout&lt;/tt&gt; did not make a difference.&lt;br/&gt;
By the time &lt;tt&gt;prunsrv&lt;/tt&gt; actually exits, the server shutdown completes as well.&lt;/p&gt;

&lt;p&gt;The problem here is &lt;tt&gt;exit value: 6 (Failed to stop service)&lt;/tt&gt;, since our tooling interprets this as a failure. We could work around this by checking service status ourselves and ignoring &lt;tt&gt;prunsrv&lt;/tt&gt;&apos;s exit value, but this does not seem right.&lt;/p&gt;</comment>
                            <comment id="15702558" author="markt" created="Mon, 28 Nov 2016 17:23:46 +0000"  >&lt;p&gt;The issue with the spurious &quot;The data area passed to a system call is too small&quot; message has been fixed.&lt;/p&gt;

&lt;p&gt;It was a leftover last error code from an expected error that was then logged when the service failed to stop on the assumption it was the root cause of the failure to stop which it was not.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13078906">DAEMON-360</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13078906">DAEMON-360</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315294</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 48 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ieon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315638</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-281] Jsvc not loading correct shared lib for Java 7 on MacOS</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-281</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When I try to run my program via jsvc, it complains:&lt;/p&gt;

&lt;p&gt;Cannot find any VM in Java Home &amp;lt;&amp;lt;JAVA_HOME&amp;gt;&amp;gt;&lt;br/&gt;
Cannot locate JVM library file&lt;/p&gt;

&lt;p&gt;where &amp;lt;&amp;lt;JAVA_HOME&amp;gt;&amp;gt; is set to&lt;/p&gt;

&lt;p&gt;/Library/Java/JavaVirtualMachines/jdk1.7.0_15.jdk/Contents/Home&lt;/p&gt;

&lt;p&gt;The -debug switch shows jsvc searching for several shared libraries in the folder&lt;/p&gt;

&lt;p&gt;  $JAVA_HOME/../Libraries/&lt;/p&gt;

&lt;p&gt;However, with Java 1.7 this folder does not exist, and jsvc should be trying to load this:&lt;/p&gt;

&lt;p&gt;  $JAVA_HOME/jre/lib/server/libjvm.dylib&lt;/p&gt;

&lt;p&gt;If I change JAVA_HOME to point to Apple&apos;s Java 1.6, then jsvc successfully finds the JVM shared library.&lt;/p&gt;

&lt;p&gt;Note:  I built jsvc myself with no problems, and the output of the build makes it clear that it used the Java 7 JNI headers in the compilation.&lt;/p&gt;

&lt;p&gt;Background:  Apple has deprecated Java 1.6.  It not longer is present unless the user explicitly installs it, and recent OS updates have disabled the browser plugin and removed the Java control panel.  Apple is pushing customers toward&apos;s Oracle&apos;s Java 1.7.&lt;/p&gt;</description>
                <environment>&lt;p&gt;MacOS 10.8.2 with Java 7:&lt;/p&gt;

&lt;p&gt;$ java -version&lt;br/&gt;
java version &quot;1.7.0_15&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0_15-b03)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 23.7-b01, mixed mode)&lt;/p&gt;</environment>
        <key id="12634662">DAEMON-281</key>
            <summary>Jsvc not loading correct shared lib for Java 7 on MacOS</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ianemmons">Ian Emmons</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Feb 2013 19:03:03 +0000</created>
                <updated>Thu, 23 Nov 2017 09:48:25 +0000</updated>
                            <resolved>Fri, 18 Oct 2013 07:40:26 +0000</resolved>
                                    <version>1.0.13</version>
                                    <fixVersion>1.0.14</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13594584" author="mturk@apache.org" created="Wed, 6 Mar 2013 10:35:07 +0000"  >&lt;p&gt;Fixed in the SVN with r1453272.&lt;br/&gt;
Will be part of next release.&lt;/p&gt;</comment>
                            <comment id="13643270" author="ianemmons" created="Fri, 26 Apr 2013 21:47:06 +0000"  >&lt;p&gt;In testing this fix (using commons daemon 1.0.15), I have found two problems that prevent the fix from working properly.  First, the new JVM paths were added to location_jvm_default (in location.c), but jsvc is using location_jvm_configured instead.  Second, the search for a shell library prevents a library from location_jvm_configured that is found from being used.&lt;/p&gt;

&lt;p&gt;I have created patch files for location.c and java.c.  The first patch adds the requisite path to location_jvm_configured.  The second adds a new entry to the shell library search routine so that it finds the Java 7 shell library, &quot;$JAVA_HOME/../MacOS/libjli.dylib&quot;.&lt;/p&gt;

&lt;p&gt;With these two patches, jsvc works properly in my environment (MacOS 10.8 with Java 7).  I will attempt to attach them to the issue.  (Forgive me if I goof that up &amp;#8211; I&apos;ve never done it before.)&lt;/p&gt;</comment>
                            <comment id="13702030" author="mturk@apache.org" created="Mon, 8 Jul 2013 14:37:23 +0000"  >&lt;p&gt;Please use unified diff &apos;diff -u ...&apos; when creating patches.&lt;/p&gt;</comment>
                            <comment id="13744192" author="ianemmons" created="Mon, 19 Aug 2013 20:45:48 +0000"  >&lt;p&gt;Regenerated diffs using the unified format (diff -u ...)&lt;/p&gt;</comment>
                            <comment id="13776046" author="ray.pray@gmail.com" created="Tue, 24 Sep 2013 06:50:21 +0000"  >&lt;p&gt;Ian Emmons patch works well for me on Mac and Java 7. When can I expect to have this fix in a release?&lt;/p&gt;</comment>
                            <comment id="13798883" author="mturk@apache.org" created="Fri, 18 Oct 2013 07:40:26 +0000"  >&lt;p&gt;Patch applied. Thanks!&lt;/p&gt;</comment>
                            <comment id="13835283" author="nagyhel" created="Fri, 29 Nov 2013 09:48:43 +0000"  >&lt;p&gt;I have the same problem using commons-daemon-1.0.15-native-src&lt;/p&gt;

&lt;p&gt;Shouldn&apos;t that be fixed?&lt;/p&gt;</comment>
                            <comment id="13867827" author="atlan" created="Fri, 10 Jan 2014 14:22:33 +0000"  >&lt;p&gt;Could not find 1.0.16. I patched my own version. &lt;/p&gt;

&lt;p&gt;It works on Max OSX 10.8.5, with&lt;br/&gt;
java version &quot;1.7.0_40&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0_40-b43)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 24.0-b56, mixed mode)&lt;/p&gt;</comment>
                            <comment id="13867867" author="sebb@apache.org" created="Fri, 10 Jan 2014 14:58:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;Could not find 1.0.16&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This has not yet been released. However the code is in SVN trunk, see:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://commons.apache.org/proper/commons-daemon/source-repository.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-daemon/source-repository.html&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="13876344" author="nagyhel" created="Mon, 20 Jan 2014 11:11:09 +0000"  >&lt;p&gt;Thanks, the patched version works for me.&lt;/p&gt;

&lt;p&gt;OSX 10.9.1&lt;br/&gt;
Java Version: 1.7.0_60-ea-b01&lt;/p&gt;</comment>
                            <comment id="13998766" author="nabedge" created="Thu, 15 May 2014 13:30:54 +0000"  >&lt;p&gt;Hi.&lt;br/&gt;
I have the same problem of this issue.&lt;br/&gt;
When to release version 1.0.16 ??&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12752212">DAEMON-325</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12622394" name="commons-daemon-1.0.15-native-src-patched.zip" size="400718" author="Atlan" created="Fri, 10 Jan 2014 14:22:33 +0000"/>
                            <attachment id="12598824" name="java.c.diff" size="646" author="ianemmons" created="Mon, 19 Aug 2013 20:45:48 +0000"/>
                            <attachment id="12580756" name="java.c.diff" size="283" author="ianemmons" created="Fri, 26 Apr 2013 21:47:54 +0000"/>
                            <attachment id="12598825" name="location.c.diff" size="490" author="ianemmons" created="Mon, 19 Aug 2013 20:45:48 +0000"/>
                            <attachment id="12580755" name="location.c.diff" size="58" author="ianemmons" created="Fri, 26 Apr 2013 21:47:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315155</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1idtr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315499</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-280] jsvc umask comparison wrong - fix attached</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-280</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Current code does a bitwise AND with the supplied umask and decimal 022. &lt;br/&gt;
This will pass on 022 but fail on most other, proper umasks like 077.&lt;/p&gt;

&lt;p&gt;This is still present in 1.0.14&lt;/p&gt;

&lt;p&gt;patch to fix is here:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;--- commons-daemon-1.0.13-src-ORIG/src/native/unix/native/jsvc-unix.c	2013-02-06 13:15:58.000000000 -0500
+++ commons-daemon-1.0.13-src/src/native/unix/native/jsvc-unix.c	2013-02-22 13:19:08.937906780 -0500
@@ -1230,13 +1230,13 @@
     /*
      * umask() uses inverse logic; bits are CLEAR for allowed access.
      */
-    if (~args-&amp;gt;umask &amp;amp; 0022) {
-        log_error(&quot;NOTICE: jsvc umask of %03o allows &quot;
+    if ((~(args-&amp;gt;umask % 10) &amp;amp; 2) || (~(args-&amp;gt;umask / 10) &amp;amp; 2)) {
+        log_error(&quot;NOTICE: jsvc umask of %04d allows &quot;
                   &quot;write permission to group and/or other&quot;, args-&amp;gt;umask);
     }
     envmask = umask(args-&amp;gt;umask);
     set_output(args-&amp;gt;outfile, args-&amp;gt;errfile, args-&amp;gt;redirectstdin, args-&amp;gt;procname);
-    log_debug(&quot;Switching umask back to %03o from %03o&quot;, envmask, args-&amp;gt;umask);
+    log_debug(&quot;Switching umask back to %04d from %04d&quot;, envmask, args-&amp;gt;umask);
     res = run_controller(args, data, uid, gid);
     if (logger_pid != 0) {
         kill(logger_pid, SIGTERM);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;linux x64 ubuntu 12.04&lt;/p&gt;</environment>
        <key id="12633664">DAEMON-280</key>
            <summary>jsvc umask comparison wrong - fix attached</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="imre.fitos">Imre Fitos</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Feb 2013 18:41:35 +0000</created>
                <updated>Fri, 11 Oct 2013 01:46:37 +0000</updated>
                            <resolved>Wed, 6 Mar 2013 10:45:53 +0000</resolved>
                                    <version>1.0.13</version>
                                    <fixVersion>1.0.14</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13584839" author="sebb@apache.org" created="Fri, 22 Feb 2013 23:53:31 +0000"  >&lt;p&gt;Preserve formatting&lt;/p&gt;</comment>
                            <comment id="13584858" author="sebb@apache.org" created="Sat, 23 Feb 2013 00:09:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;... and decimal 022.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Surely 022 is octal?&lt;/p&gt;

&lt;p&gt;The umask needs to disable group-write and other-write, i.e. the mask must have bits 022 set.&lt;br/&gt;
So the inverted mask must not have either of the 022 bits set.&lt;br/&gt;
Anding with 022 will produce 0 iff neither bit is set.&lt;br/&gt;
Conversely, if either bit is set, anding with 022 will be non-zero, i.e. true.&lt;/p&gt;

&lt;p&gt;Seems to me the code is correct.&lt;/p&gt;

&lt;p&gt;Do you have a test that shows the code is incorrect?&lt;/p&gt;</comment>
                            <comment id="13584974" author="imre.fitos" created="Sat, 23 Feb 2013 02:58:21 +0000"  >&lt;p&gt;Use &quot;-umask 0077&quot; as an argument and you will see the error message &quot;NOTICE: jsvc umask of 077 allows write permission to group and/or other&quot;&lt;/p&gt;

&lt;p&gt;You made a good point: Currently src/native/unix/native/arguments.c line 284 stores the &apos;-umask&apos; value using atoi which uses base 10. This would work correctly if the command line umask supplied was treated as octal. &lt;/p&gt;

&lt;p&gt;Patch to read umask in octal is here:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;--- commons-daemon-1.0.13-src-ORIG/src/native/unix/native/arguments.c   2013-02-06 13:15:58.000000000 -0500
+++ commons-daemon-1.0.13-src/src/native/unix/native/arguments.c        2013-02-22 21:39:10.979848841 -0500
@@ -281,7 +281,7 @@
                 log_error(&quot;Invalid umask specified&quot;);
                 return NULL;
             }
-            args-&amp;gt;umask = atoi(temp);
+            args-&amp;gt;umask = strtol(temp, NULL, 8);
             if (args-&amp;gt;umask &amp;lt; 02) {
                 log_error(&quot;Invalid umask specified (min=02)&quot;);
                 return NULL;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13585244" author="sebb@apache.org" created="Sun, 24 Feb 2013 00:45:47 +0000"  >&lt;p&gt;OK, that does look wrong. &lt;br/&gt;
It&apos;s not usual to specify the umask in octal.&lt;/p&gt;</comment>
                            <comment id="13585656" author="mturk@apache.org" created="Mon, 25 Feb 2013 06:33:36 +0000"  >&lt;p&gt;Actually the umask should be specified in octal. That&apos;s the usual way the shell does the job.&lt;br/&gt;
I&apos;ll check if the strtol is portable enough and use the second Imre&apos;s patch.&lt;/p&gt;</comment>
                            <comment id="13586060" author="imre.fitos" created="Mon, 25 Feb 2013 18:02:16 +0000"  >&lt;p&gt;My tests show that the actual umask call on line 852 of src/native/unix/native/jsvc-unix.c works correctly with the octal umask input.&lt;/p&gt;

&lt;p&gt;Looks like umask(2) expects octal so my second patch should be adequate. &lt;/p&gt;</comment>
                            <comment id="13586067" author="mturk@apache.org" created="Mon, 25 Feb 2013 18:09:46 +0000"  >&lt;p&gt;Right.&lt;br/&gt;
It should work even now if you transform octal to decimal and use that for -umask param.&lt;br/&gt;
Eg 077 would be 63 in decimal. Anyhow, we just need strol.&lt;/p&gt;</comment>
                            <comment id="13594592" author="mturk@apache.org" created="Wed, 6 Mar 2013 10:45:53 +0000"  >&lt;p&gt;Patch applied.&lt;br/&gt;
Will be part of next version&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12673352">DAEMON-307</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12673352">DAEMON-307</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314159</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i7on:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314504</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-278] procrunsrv windows ++Environment doesn&apos;t work for java type</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-278</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When starting a service using the &apos;java&apos; method, the Environment variables are not applied to the child process.&lt;br/&gt;
looking at serviceStart() in prunsrv.c, the Environment variables are applied (call to setInprocEnvironment) in the JNI case, but there is missing something similar for the other case (&apos;java&apos; or &apos;native&apos;).&lt;/p&gt;

&lt;p&gt;An easy fix would be to set the environment variables in the wrapper so that they are inherited by the child process. Maybe you want to set them only in the child process, but I don&apos;t know how...&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP 32bits&lt;/p&gt;</environment>
        <key id="12633184">DAEMON-278</key>
            <summary>procrunsrv windows ++Environment doesn&apos;t work for java type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="elelay">Eric Le Lay</reporter>
                        <labels>
                            <label>environment</label>
                            <label>windows</label>
                    </labels>
                <created>Wed, 20 Feb 2013 12:42:17 +0000</created>
                <updated>Wed, 6 Mar 2013 10:41:01 +0000</updated>
                            <resolved>Wed, 6 Mar 2013 10:41:01 +0000</resolved>
                                    <version>1.0.13</version>
                                    <fixVersion>1.0.14</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13594590" author="mturk@apache.org" created="Wed, 6 Mar 2013 10:41:01 +0000"  >&lt;p&gt;Fixed in the svn (r1453275) by calling setInprocEnvironment for non-JNI startup as well.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313680</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i4q7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314025</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-277] 1.0.3 POM on search.maven.org is broken</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-277</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The groupId should be commons-daemon. This breaks anything trying to use hadoop 0.23.6. I tried everything, but couldn&apos;t find a way to make it work. Please fix this.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; :: problems summary ::&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; :::: WARNINGS&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; 		::::::::::::::::::::::::::::::::::::::::::::::&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; 		::          UNRESOLVED DEPENDENCIES         ::&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; 		::::::::::::::::::::::::::::::::::::::::::::::&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; 		:: commons-daemon#commons-daemon;1.0.3: several problems occurred while resolving dependency: commons-daemon#commons-daemon;1.0.3 &lt;/p&gt;
{compile=[compile(*), master(*)], runtime=[runtime(*)]}
&lt;p&gt;:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; 	java.text.ParseException: inconsistent module descriptor file found in &apos;http://jars.law.di.unimi.it/content/repositories/public/commons-daemon/commons-daemon/1.0.3/commons-daemon-1.0.3.pom&apos;: bad organisation: expected=&apos;commons-daemon&apos; found=&apos;org.apache.commons&apos;; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; 	java.text.ParseException: inconsistent module descriptor file found in &apos;http://repo1.maven.org/maven2/commons-daemon/commons-daemon/1.0.3/commons-daemon-1.0.3.pom&apos;: bad organisation: expected=&apos;commons-daemon&apos; found=&apos;org.apache.commons&apos;; &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; 		::::::::::::::::::::::::::::::::::::::::::::::&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; :::: ERRORS&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; 		law: bad organisation found in &lt;a href=&quot;http://jars.law.di.unimi.it/content/repositories/public/commons-daemon/commons-daemon/1.0.3/commons-daemon-1.0.3.pom:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jars.law.di.unimi.it/content/repositories/public/commons-daemon/commons-daemon/1.0.3/commons-daemon-1.0.3.pom:&lt;/a&gt; expected=&apos;commons-daemon&apos; found=&apos;org.apache.commons&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; 		public: bad organisation found in &lt;a href=&quot;http://repo1.maven.org/maven2/commons-daemon/commons-daemon/1.0.3/commons-daemon-1.0.3.pom:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://repo1.maven.org/maven2/commons-daemon/commons-daemon/1.0.3/commons-daemon-1.0.3.pom:&lt;/a&gt; expected=&apos;commons-daemon&apos; found=&apos;org.apache.commons&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:retrieve&amp;#93;&lt;/span&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="12632769">DAEMON-277</key>
            <summary>1.0.3 POM on search.maven.org is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vigna">Sebastiano Vigna</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Feb 2013 23:45:49 +0000</created>
                <updated>Thu, 13 Jun 2013 20:16:24 +0000</updated>
                            <resolved>Mon, 18 Feb 2013 07:00:47 +0000</resolved>
                                    <version>1.0.3</version>
                                    <fixVersion>1.0.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13580462" author="joehni" created="Mon, 18 Feb 2013 07:00:47 +0000"  >&lt;p&gt;Current release is 1.0.13 and neither do we change released versions nor are we able to change anything on Maven central - that repository is read-only for any published stuff.&lt;/p&gt;</comment>
                            <comment id="13682649" author="nainostrebor" created="Thu, 13 Jun 2013 20:15:01 +0000"  >&lt;p&gt;Why not release a new version, say 1.0.13.1?&lt;/p&gt;</comment>
                            <comment id="13682651" author="nainostrebor" created="Thu, 13 Jun 2013 20:16:24 +0000"  >&lt;p&gt;Please disregard my previous comment; it seems a later release has been performed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313265</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i25z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313610</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-276] commons-daemon.log blows up when stopping Windows service</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-276</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Encountered this when testing Tomcat 7.0.36 RC installed as a service. On Windows 7, using JRE 7u13.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;br/&gt;
1. Start Tomcat service&lt;br/&gt;
2. Wait until all web applications start up&lt;br/&gt;
3. Restart the service&lt;br/&gt;
4. Windows says that the service cannot be started.&lt;br/&gt;
At this point the commons-daemon.2013-02-05.log file started to grow rapidly. In half a minute it grew up to several Gb.&lt;br/&gt;
This can be resolved by killing Tomcat7.exe via Task manager.&lt;/p&gt;

&lt;p&gt;In the log file I see&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 03:44:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;11996&amp;#93;&lt;/span&gt; Commons Daemon procrun (1.0.12.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 03:44:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;11996&amp;#93;&lt;/span&gt; Running &apos;Tomcat7&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 03:44:38&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;11980&amp;#93;&lt;/span&gt; Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 03:44:39&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;11980&amp;#93;&lt;/span&gt; Service started in 1357 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 03:45:48&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;12276&amp;#93;&lt;/span&gt; Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 03:45:49&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;12276&amp;#93;&lt;/span&gt; Service stopped.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 03:45:49&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;The last line is followed by several Gb of nul character. In hex editor:&lt;/p&gt;

&lt;p&gt;00000001A0: 39 5D 20 5B 69 6E 66 6F &#166; 5D 20 20 00 00 00 00 00  9] &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;&lt;br/&gt;
00000001B0: 00 00 00 00 00 00 00 00 &#166; 00 00 00 00 00 00 00 00&lt;br/&gt;
00000001C0: 00 00 00 00 00 00 00 00 &#166; 00 00 00 00 00 00 00 00&lt;/p&gt;

&lt;p&gt;I tried to reproduce this by stopping or by restarting the service, but this rapid growth of the log file did not occur. There is a different evidence, though.&lt;/p&gt;

&lt;p&gt;The log file below was produced by the following actions:&lt;/p&gt;

&lt;p&gt;1. Start&lt;br/&gt;
2. Stop&lt;br/&gt;
3. Start&lt;br/&gt;
4. Restart&lt;/p&gt;

&lt;p&gt;This produced the following:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:14:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3988] Commons Daemon procrun (1.0.12.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:14:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3988] Running &apos;Tomcat7&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:14:15&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 1536] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:14:16&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 1536] Service started in 1357 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:15:36&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3456] Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:15:37&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3456] Service stopped.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:15:37&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3988] Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:15:37&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3988] Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:17:32&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3968] Commons Daemon procrun (1.0.12.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:17:32&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3968] Running &apos;Tomcat7&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:17:32&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3552] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:17:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3552] Service started in 1310 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:18:29&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3764] Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:18:30&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3764] Service stopped.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:18:30&amp;#93;&lt;/span&gt; [ 3968] Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:18:30&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3968] Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:18:31&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 1260] Commons Daemon procrun (1.0.12.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:18:31&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 1260] Running &apos;Tomcat7&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:18:31&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 1204] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 04:18:32&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 1204] Service started in 1357 ms.&lt;/p&gt;

&lt;p&gt;There is a problem with a line at &quot;2013-02-05 04:18:30&quot; (Run service finished). The &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt; &quot; characters are missing.&lt;/p&gt;

&lt;p&gt;Note that the same line at &quot;2013-02-05 04:15:37&quot; was printed correctly.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Tomcat 7.0.36 Release candidate, Oracle JRE 7u13 32-bit, Windows 7 Home basic 64-bit&lt;/p&gt;</environment>
        <key id="12630790">DAEMON-276</key>
            <summary>commons-daemon.log blows up when stopping Windows service</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="kkolinko">Konstantin Kolinko</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Feb 2013 00:48:23 +0000</created>
                <updated>Wed, 6 Feb 2013 12:44:09 +0000</updated>
                            <resolved>Wed, 6 Feb 2013 05:21:16 +0000</resolved>
                                    <version>1.0.12</version>
                                    <fixVersion>1.0.13</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13571063" author="mturk@apache.org" created="Tue, 5 Feb 2013 05:24:59 +0000"  >&lt;p&gt;I just cannot reproduce this problem on both Windows XP and Windows 7.&lt;br/&gt;
Can you try on some other machine or JVM.&lt;/p&gt;</comment>
                            <comment id="13571165" author="kkolinko" created="Tue, 5 Feb 2013 09:12:39 +0000"  >&lt;p&gt;Tested on another Windows 7 machine with a different JRE.&lt;/p&gt;

&lt;p&gt;OS: Windows 7 Home basic 64-bit (the same as before)&lt;br/&gt;
JRE: 6u39 64-bit&lt;/p&gt;

&lt;p&gt;Steps:&lt;br/&gt;
1. Installed Oracle JRE 6u39 64-bit&lt;br/&gt;
2. Rebooted&lt;br/&gt;
3. Installed Tomcat 7.0.36 RC as a service.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Components: default + Examples webapp&lt;/li&gt;
	&lt;li&gt;To disk D: (D:\Testing\Tomcat7.0&amp;#41;&lt;/li&gt;
	&lt;li&gt;On the last page of installed cleared the checkboxes. Thus I did not start the service when installed finished. All stating/stopping the service later was performed through the Windows services list.&lt;br/&gt;
4. Start service&lt;br/&gt;
5. Stop service -&amp;gt; nothing wrong in logs&lt;br/&gt;
6. Start service&lt;br/&gt;
7. Restart service -&amp;gt; broken line (12:33:00)&lt;br/&gt;
8. Restart service -&amp;gt; &quot;Failed to set service status&quot; message (12:35:51)&lt;br/&gt;
9. Stop service -&amp;gt; &quot;Failed to set service status&quot; message&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Here is log excerpt from steps 6-8. I&apos;ll attach full logs to the issue.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:32:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2740] Commons Daemon procrun (1.0.12.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:32:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2740] Running &apos;Tomcat7&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:32:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [  888] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:32:53&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [  888] Service started in 1185 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:32:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2816] Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:33:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2816] Service stopped.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:33:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:33:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2740] Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:33:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3064] Commons Daemon procrun (1.0.12.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:33:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3064] Running &apos;Tomcat7&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:33:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3032] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:33:02&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3032] Service started in 1185 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:35:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3908] Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:35:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3908] Service stopped.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:35:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3064] Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:35:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 3908] Failed to set service status&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:35:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3064] Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:35:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3692] Commons Daemon procrun (1.0.12.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:35:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3692] Running &apos;Tomcat7&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:35:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3240] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:35:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3240] Service started in 1201 ms.&lt;/p&gt;</comment>
                            <comment id="13571166" author="kkolinko" created="Tue, 5 Feb 2013 09:14:59 +0000"  >&lt;p&gt;Tomcat 7.0.36 log files&lt;/p&gt;</comment>
                            <comment id="13571208" author="kkolinko" created="Tue, 5 Feb 2013 10:16:24 +0000"  >&lt;p&gt;(logs_WinXP_3.zip)&lt;/p&gt;

&lt;p&gt;Tested on WinXP SP3 32-bit. I am attaching the log files.&lt;/p&gt;

&lt;p&gt;Steps:&lt;br/&gt;
1. Install&lt;br/&gt;
The same components, as for Windows 7 in the last comment.&lt;br/&gt;
Differences:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Installed to F:\Tomcat7.0\  (an USB stick)&lt;/li&gt;
	&lt;li&gt;Explicitly selected JDK 6u39 as JRE&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(Looking at installed service, Tomcat7w.exe (prunmgr) shows its JRE as&lt;br/&gt;
C:\Program Files\Java\jdk1.6.0_39\jre\bin\server\jvm.dll&lt;br/&gt;
)&lt;/p&gt;

&lt;p&gt;2. Start&lt;br/&gt;
3. Stop -&amp;gt; OK&lt;br/&gt;
4. Start&lt;br/&gt;
5. Stop -&amp;gt; Log file is truncated after &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &quot; (13:52:02)&lt;br/&gt;
6. Start -&amp;gt; (13:52:48)&lt;br/&gt;
7. Stop -&amp;gt; &quot;Failed to set service status&quot; message (13:53:44),&lt;br/&gt;
followed by a message in Russian (13:53:45).&lt;/p&gt;

&lt;p&gt;The message in Russian apparently comes from OS and translates as &quot;Invalid descriptor&quot;.&lt;/p&gt;

&lt;p&gt;BTW, the code page of the log file is windows-1251.&lt;/p&gt;

&lt;p&gt;Excerpt for steps 4.-7.:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:51:43&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3156] Commons Daemon procrun (1.0.12.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:51:44&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3156] Running &apos;Tomcat7&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:51:44&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3396] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:51:45&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3396] Service started in 1312 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:52:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3520] Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:52:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3520] Service stopped.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:52:01&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3156] Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:52:02&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:52:48&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3488] Commons Daemon procrun (1.0.12.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:52:48&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3488] Running &apos;Tomcat7&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:52:48&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 1412] Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:52:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 1412] Service started in 1312 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:53:42&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2684] Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:53:44&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 2684] Service stopped.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:53:44&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3488] Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:53:44&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 2684] Failed to set service status&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:53:45&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 2684] &#1053;&#1077;&#1074;&#1077;&#1088;&#1085;&#1099;&#1081; &#1076;&#1077;&#1089;&#1082;&#1088;&#1080;&#1087;&#1090;&#1086;&#1088;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 13:53:45&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 3488] Commons Daemon procrun finished&lt;/p&gt;</comment>
                            <comment id="13571233" author="rainer.jung@kippdata.de" created="Tue, 5 Feb 2013 11:26:33 +0000"  >&lt;p&gt;I could reproduce on Win 7 Pro 64 Bits.&lt;/p&gt;

&lt;p&gt;First tried with JRE 1.6.0_39, no problem. Then tried with 1.7.0_13 and after some retsarts suddenly it could no longer restart (stopped but did not start up again). From then on all start attempts failed with a timeout. Popup says error 1053, event log says 7009 and 7000 (30000 ms timeout).&lt;/p&gt;

&lt;p&gt;When starting tomcat7.exe from the commendline, it starts, but takes longer than 30 seconds:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:00:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;19204&amp;#93;&lt;/span&gt; Commons Daemon procrun (1.0.12.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:01:02&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;19204&amp;#93;&lt;/span&gt; Debugging &apos;Tomcat7&apos; service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:01:18&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;19204&amp;#93;&lt;/span&gt; Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 12:01:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;19204&amp;#93;&lt;/span&gt; Service started in 1138 ms.&lt;/p&gt;

&lt;p&gt;Tomcat logging starts at:&lt;/p&gt;

&lt;p&gt;05.02.2013 12:01:34 org.apache.catalina.core.AprLifecycleListener init&lt;/p&gt;

&lt;p&gt;so about 48 seconds somewhere in the service code.&lt;/p&gt;

&lt;p&gt;In addition the following things seem strange in the daemon logging:&lt;/p&gt;

&lt;p&gt;Error during restart:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:06&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 7820] Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 7820] Service stopped.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;11636&amp;#93;&lt;/span&gt; Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; [ 7820] Failed to set service status&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;11636&amp;#93;&lt;/span&gt; Commons Daemon procrun finished&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;10912&amp;#93;&lt;/span&gt; Commons Daemon procrun (1.0.12.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;10912&amp;#93;&lt;/span&gt; Running &apos;Tomcat7&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:07&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;16536&amp;#93;&lt;/span&gt; Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:09&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;16536&amp;#93;&lt;/span&gt; Service started in 1138 ms.&lt;/p&gt;

&lt;p&gt;Error during stop:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:42&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;18852&amp;#93;&lt;/span&gt; Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:43&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;18852&amp;#93;&lt;/span&gt; Service stopped.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:43&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;18852&amp;#93;&lt;/span&gt; Failed to set service status&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:43&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;18852&amp;#93;&lt;/span&gt; Das Handle ist ung&#252;ltig.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:43&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 1160] Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:43&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 1160] Commons Daemon procrun finished&lt;/p&gt;

&lt;p&gt;Suspicious truncated/joined log line during restart:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:27&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;16244&amp;#93;&lt;/span&gt; Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:28&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;16244&amp;#93;&lt;/span&gt; Service stopped.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:28&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  [ 8396] Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:28&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:28&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;10764&amp;#93;&lt;/span&gt; Commons Daemon procrun (1.0.12.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:28&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;10764&amp;#93;&lt;/span&gt; Running &apos;Tomcat7&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:28&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;17508&amp;#93;&lt;/span&gt; Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2013-02-05 11:50:30&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  &lt;span class=&quot;error&quot;&gt;&amp;#91;17508&amp;#93;&lt;/span&gt; Service started in 1123 ms.&lt;/p&gt;

&lt;p&gt;Once the service is in this state, I found no way of making it start/stop quickly again (didn&apos;t try rebooting).&lt;/p&gt;

&lt;p&gt;Following are three thread stacks I copied using SysInternals ProcExp during hanging service startup. There was only one thread in the process:&lt;/p&gt;

&lt;p&gt;ntoskrnl.exe!KeWaitForMultipleObjects+0xc0a&lt;br/&gt;
ntdll.dll!NtDelayExecution+0xa&lt;br/&gt;
KERNELBASE.dll!SleepEx+0xb3&lt;br/&gt;
Tomcat7.exe+0x583b&lt;br/&gt;
Tomcat7.exe+0xec60&lt;br/&gt;
Tomcat7.exe+0xf2a9&lt;br/&gt;
kernel32.dll!BaseThreadInitThunk+0xd&lt;br/&gt;
ntdll.dll!RtlUserThreadStart+0x21&lt;/p&gt;


&lt;p&gt;ntoskrnl.exe!KeWaitForMultipleObjects+0xc0a&lt;br/&gt;
ntoskrnl.exe!KeAcquireSpinLockAtDpcLevel+0x732&lt;br/&gt;
ntoskrnl.exe!KeWaitForMutexObject+0x19f&lt;br/&gt;
ntoskrnl.exe!_misaligned_access+0xba4&lt;br/&gt;
ntoskrnl.exe!_misaligned_access+0x1821&lt;br/&gt;
ntoskrnl.exe!KeAcquireSpinLockAtDpcLevel+0x93d&lt;br/&gt;
ntoskrnl.exe!KeDelayExecutionThread+0x186&lt;br/&gt;
ntoskrnl.exe!NtWaitForSingleObject+0x17a&lt;br/&gt;
ntoskrnl.exe!KeSynchronizeExecution+0x3a23&lt;br/&gt;
ntdll.dll!NtDelayExecution+0xa&lt;br/&gt;
KERNELBASE.dll!SleepEx+0xb3&lt;br/&gt;
Tomcat7.exe+0x583b&lt;br/&gt;
Tomcat7.exe+0xec60&lt;br/&gt;
Tomcat7.exe+0xf2a9&lt;br/&gt;
kernel32.dll!BaseThreadInitThunk+0xd&lt;br/&gt;
ntdll.dll!RtlUserThreadStart+0x21&lt;/p&gt;


&lt;p&gt;ntoskrnl.exe!KeWaitForMultipleObjects+0xc0a&lt;br/&gt;
ntoskrnl.exe!KeAcquireSpinLockAtDpcLevel+0x732&lt;br/&gt;
ntoskrnl.exe!KeWaitForMutexObject+0x19f&lt;br/&gt;
ntoskrnl.exe!_misaligned_access+0xba4&lt;br/&gt;
ntoskrnl.exe!_misaligned_access+0x1821&lt;br/&gt;
ntoskrnl.exe!KeAcquireSpinLockAtDpcLevel+0x93d&lt;br/&gt;
ntoskrnl.exe!KeDelayExecutionThread+0x186&lt;br/&gt;
ntoskrnl.exe!NtWaitForSingleObject+0x17a&lt;br/&gt;
ntoskrnl.exe!KeSynchronizeExecution+0x3a23&lt;br/&gt;
ntdll.dll!NtDelayExecution+0xa&lt;br/&gt;
KERNELBASE.dll!SleepEx+0xb3&lt;br/&gt;
Tomcat7.exe+0x583b&lt;br/&gt;
Tomcat7.exe+0xe96e&lt;br/&gt;
Tomcat7.exe+0xed9b&lt;br/&gt;
Tomcat7.exe+0xf2a9&lt;br/&gt;
kernel32.dll!BaseThreadInitThunk+0xd&lt;br/&gt;
ntdll.dll!RtlUserThreadStart+0x21&lt;/p&gt;</comment>
                            <comment id="13571247" author="mturk@apache.org" created="Tue, 5 Feb 2013 11:46:28 +0000"  >&lt;p&gt;Does this happen with the version 1.0.11 &lt;br/&gt;
Using the same stress scenario of course.&lt;/p&gt;</comment>
                            <comment id="13571252" author="mturk@apache.org" created="Tue, 5 Feb 2013 12:04:54 +0000"  >&lt;p&gt;OK, I was able to blow the log as well.&lt;br/&gt;
Does changing the log level to Error with tomcat7w helps?&lt;br/&gt;
I was not able to replicate that again using the error log level so we might have some buffer overrun in log.&lt;/p&gt;</comment>
                            <comment id="13571255" author="rainer.jung@kippdata.de" created="Tue, 5 Feb 2013 12:13:04 +0000"  >&lt;p&gt;Re 1.0.11: Once the service is in the bad shape, switching to 1.0.11 does not help, same situation. SAince I don&apos;t know how to clean that state, I don&apos;t know whether we need 1.0.12 to bring it in bad shape, or 1.0.11 would also do.&lt;/p&gt;

&lt;p&gt;Re log level: Correct, if I switch to error log level, the service starts and stops again fine (1.0.11 and 1.0.12). If I onyl switch to Warning, the problem is still there. If after switching to error I switch back to info, the problem immediately reappears. So the log level only fixes it temporarily, it doesn&apos;t kind of reset the root cause.&lt;/p&gt;</comment>
                            <comment id="13571262" author="mturk@apache.org" created="Tue, 5 Feb 2013 12:31:45 +0000"  >&lt;p&gt;&quot;Bad shape&quot; should be handled by a simple restart thought. At least once when corrupt I was not able to kill it or something like that. The only solution was reboot.&lt;/p&gt;</comment>
                            <comment id="13571414" author="mturk@apache.org" created="Tue, 5 Feb 2013 16:11:58 +0000"  >&lt;p&gt;OK, It seems the reason for this is caused by concurrent write from multiple threads to log.&lt;br/&gt;
I&apos;ll create a patch that guards the apxLogWrite with critical section.&lt;br/&gt;
So far all my tests have show that this log bloat doesn&apos;t happen any more.&lt;/p&gt;

&lt;p&gt;I&apos;ll create 1.0.13-dev binaries for you guys to test that and have a speedy release in case this solves the issue.&lt;br/&gt;
Should be done in few hours&lt;/p&gt;</comment>
                            <comment id="13571429" author="mturk@apache.org" created="Tue, 5 Feb 2013 16:27:21 +0000"  >&lt;p&gt;Please check the 13-dev binaries.&lt;br/&gt;
Just rename procrun.exe to tomcat7.exe and use correct version (32 or 64-bit which is inside amd64 dir)&lt;/p&gt;</comment>
                            <comment id="13571684" author="kkolinko" created="Tue, 5 Feb 2013 20:12:11 +0000"  >&lt;p&gt;Tested on Win7 64-bit&lt;/p&gt;

&lt;p&gt;1.0.11 (64-bit) with JRE 6u39 64-bit:&lt;br/&gt;
No problems noted.&lt;br/&gt;
(BTW, &quot;Failed to set service status&quot; message was added in r1430777, so it is not part of 1.0.11)&lt;/p&gt;

&lt;p&gt;1.0.13 dev:&lt;br/&gt;
a) 64-bit, with JRE 6u39 64-bit&lt;br/&gt;
b) 32-bit, with JRE 7u13 32-bit&lt;/p&gt;

&lt;p&gt;a),b): No broken lines, no blow up of the log file.&lt;br/&gt;
b) only: &quot;Failed to set service status&quot;/&quot;Invalid descriptor&quot; did happen once, and the good point is that it did not reoccur on subsequent starts/stops of the service.&lt;/p&gt;</comment>
                            <comment id="13572188" author="mturk@apache.org" created="Wed, 6 Feb 2013 05:21:16 +0000"  >&lt;p&gt;Yeah, the issue is present in older versions as well although not manifested because there was no this particular logging message from different thread. However since it&apos;s a thread sync issue, it might happen at some random scenario.&lt;/p&gt;</comment>
                            <comment id="13572371" author="rainer.jung@kippdata.de" created="Wed, 6 Feb 2013 12:44:09 +0000"  >&lt;p&gt;Can&apos;t reproduce with 13-dev. Logs are no longer corrupt and restarts seem to work reliably on Win 7 Pro 64 Bits, using JRE 6, 7 or 8 EA.&lt;/p&gt;

&lt;p&gt;The follwoing errors sometimes appear at the end of the stop, but seem to not have any negative impact: &quot;Failed to set service status&quot; and &quot;Invalid Handle&quot; (I translated the second message form German, so it is only an approximation).&lt;/p&gt;

&lt;p&gt;The Windows event log only contains the start and stop info entries for the service, no errors. All stop entries are there, nothing missing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12568020" name="commons-daemon-1.0.13-dev-20130205-win32-bin.zip" size="79360" author="mturk@apache.org" created="Tue, 5 Feb 2013 16:27:21 +0000"/>
                            <attachment id="12567981" name="logs_Win7_2.zip" size="4964" author="kkolinko" created="Tue, 5 Feb 2013 09:14:59 +0000"/>
                            <attachment id="12567988" name="logs_WinXP_3.zip" size="5049" author="kkolinko" created="Tue, 5 Feb 2013 10:16:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311286</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hpyf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311632</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-275] Website says that non-Windows binaries may be provided</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-275</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Users occasionally request binares for non-Windows systems.&lt;br/&gt;
The site documentation currently says that these may be provided - in fact binaries.html says:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Find the tar.gz file corresponding to your configuration.&lt;/li&gt;
	&lt;li&gt;Download it.&lt;/li&gt;
	&lt;li&gt;Uncompress the tar file and extract the contents (better with gnu tar). There should be an executable file called jsvc and some text files&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This has not been true for some while.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12630346">DAEMON-275</key>
            <summary>Website says that non-Windows binaries may be provided</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Feb 2013 10:20:01 +0000</created>
                <updated>Wed, 6 Feb 2013 05:36:41 +0000</updated>
                            <resolved>Wed, 6 Feb 2013 05:36:41 +0000</resolved>
                                    <version>1.0.12</version>
                                    <fixVersion>1.0.13</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13568636" author="sebb@apache.org" created="Fri, 1 Feb 2013 10:21:03 +0000"  >&lt;p&gt;The README.html file should probably also be updated.&lt;/p&gt;</comment>
                            <comment id="13572195" author="mturk@apache.org" created="Wed, 6 Feb 2013 05:36:41 +0000"  >&lt;p&gt;Fixed&lt;br/&gt;
Removed all jsvc binary references&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>310841</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hn7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>311186</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-274] procrun ignores shutdown</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-274</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Procrun does not gracefully shut down when OS shut down occurs. Operating system kills the service started. Service started using procrun is with state IGNORES_SHUTDOWN.&lt;/p&gt;

&lt;p&gt;What was expected?&lt;/p&gt;

&lt;p&gt;Procrun service registered to be ACCEPTS_SHUTDOWN such that procrun shuts down gracefully within the time allocated by OS.&lt;/p&gt;

&lt;p&gt;It would be great if this becomes command line parameter. It will be a bonus &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Author requests assignee to change this issue details.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows OS&lt;/p&gt;</environment>
        <key id="12625487">DAEMON-274</key>
            <summary>procrun ignores shutdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="hsehdar">Hsehdar</reporter>
                        <labels>
                            <label>procrun</label>
                    </labels>
                <created>Sat, 29 Dec 2012 15:31:44 +0000</created>
                <updated>Fri, 25 Jan 2013 04:17:08 +0000</updated>
                            <resolved>Wed, 9 Jan 2013 10:56:59 +0000</resolved>
                                    <version>1.0.10</version>
                                    <fixVersion>1.0.12</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13542211" author="kernwig" created="Wed, 2 Jan 2013 16:18:59 +0000"  >&lt;p&gt;Express differently, procrun registers to be told when to start and stop, but not to be told when the O/S is shutting down. So the service stops gracefully when told to stop, but not when the O/S shuts down.&lt;/p&gt;

&lt;p&gt;Notice the IGNORES_SHUTDOWN setting when queried:&lt;/p&gt;

&lt;p&gt;sc query myservice&lt;/p&gt;

&lt;p&gt;SERVICE_NAME: myservice&lt;br/&gt;
        TYPE               : 10  WIN32_OWN_PROCESS&lt;br/&gt;
        STATE              : 4  RUNNING&lt;br/&gt;
                                (STOPPABLE,NOT_PAUSABLE,IGNORES_SHUTDOWN)&lt;br/&gt;
        WIN32_EXIT_CODE    : 0  (0x0)&lt;br/&gt;
        SERVICE_EXIT_CODE  : 0  (0x0)&lt;br/&gt;
        CHECKPOINT         : 0x0&lt;br/&gt;
        WAIT_HINT          : 0x0 &lt;/p&gt;</comment>
                            <comment id="13542854" author="mturk@apache.org" created="Thu, 3 Jan 2013 11:04:16 +0000"  >&lt;p&gt;Right we need to add the SERVICE_ACCEPT_SHUTDOWN flag together with SERVICE_ACCEPT_STOP&lt;/p&gt;</comment>
                            <comment id="13543581" author="hsehdar" created="Fri, 4 Jan 2013 03:46:55 +0000"  >&lt;p&gt;Before creating this issue, a &lt;a href=&quot;http://stackoverflow.com/questions/13578196/how-to-gracefully-shutdown-procrun/14150785#14150785&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;question&lt;/a&gt; was asked to be answered by users on Stackoverflow. No answers came up.&lt;/p&gt;</comment>
                            <comment id="13546468" author="hsehdar" created="Tue, 8 Jan 2013 01:00:08 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mturk%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;mturk@apache.org&quot;&gt;mturk@apache.org&lt;/a&gt; will there be any quick fix? Any fix version/s or target date?&lt;/p&gt;</comment>
                            <comment id="13546882" author="mturk@apache.org" created="Tue, 8 Jan 2013 13:36:47 +0000"  >&lt;p&gt;Yeah, I intend to start the RM process by the end of this week.&lt;/p&gt;</comment>
                            <comment id="13548384" author="mturk@apache.org" created="Wed, 9 Jan 2013 10:56:59 +0000"  >&lt;p&gt;Fixed in the SVN and will be part of next release&lt;/p&gt;</comment>
                            <comment id="13554644" author="hsehdar" created="Wed, 16 Jan 2013 02:03:20 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mturk%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;mturk@apache.org&quot;&gt;mturk@apache.org&lt;/a&gt; for the quick fix. Could not find information on PROCRUN releases. Can you kindly share about release window/time frame and next release date? This will help &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kernwig&quot; class=&quot;user-hover&quot; rel=&quot;kernwig&quot;&gt;kernwig&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hsehdar&quot; class=&quot;user-hover&quot; rel=&quot;hsehdar&quot;&gt;hsehdar&lt;/a&gt; to use the feature.&lt;/p&gt;</comment>
                            <comment id="13554796" author="mturk@apache.org" created="Wed, 16 Jan 2013 06:35:57 +0000"  >&lt;p&gt;1.0.12 is in the release process.&lt;/p&gt;

&lt;p&gt;You can check the release candidates at&lt;br/&gt;
&lt;a href=&quot;http://people.apache.org/~mturk/daemon-1.0.12/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://people.apache.org/~mturk/daemon-1.0.12/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Once voted (hopefully in few days) it&apos;ll be available for GA.&lt;/p&gt;</comment>
                            <comment id="13554961" author="hsehdar" created="Wed, 16 Jan 2013 11:53:13 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mturk%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;mturk@apache.org&quot;&gt;mturk@apache.org&lt;/a&gt; for sharing the 1.0.12 release artifacts. Tested with the app which was causing this issue found it is no more a problem.&lt;/p&gt;</comment>
                            <comment id="13555421" author="kernwig" created="Wed, 16 Jan 2013 20:25:19 +0000"  >&lt;p&gt;Tested. It&apos;s working for me as well.&lt;/p&gt;</comment>
                            <comment id="13562358" author="hsehdar" created="Fri, 25 Jan 2013 04:17:08 +0000"  >&lt;p&gt;This is no more issue in the released 1.0.12 Commons Daemon&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>302029</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16y4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248664</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-273] Fail to start service in 32-bit Windows</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-273</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When using latest version (1.0.11) of prunsrv.exe, the service failed to start (//ES) with the following error:&lt;/p&gt;

&lt;p&gt;***&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-12-28 11:47:31&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; Commons Daemon procrun failed with exit value: 5 (Failed to start service)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-12-28 11:47:31&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; The service did not respond to the start or control request in a timely fashion.&lt;br/&gt;
***&lt;/p&gt;

&lt;p&gt;After checking the code change, it is found that the problem was caused by the change in revision 1412017 (&lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-261&quot; title=&quot;Can&amp;#39;t start service created with name space&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-261&quot;&gt;&lt;del&gt;DAEMON-261&lt;/del&gt;&lt;/a&gt;: Allow services names with spaces).&lt;br/&gt;
Problem solved by using 1.0.11 source code with the above change reverted, and compiled under Windows XP 32-bit with VC6 SP6 and Platform SDK for Windows Server 2003 R2.&lt;/p&gt;

&lt;p&gt;###&lt;/p&gt;

&lt;p&gt;The //TS option still runs the service well.&lt;/p&gt;

&lt;p&gt;###&lt;/p&gt;

&lt;p&gt;Without reverting the source code but just recompiled it with Visual C++ 2010 and installed VC++ 2010 Redistributable, the prunsrv.exe with //ES option works well&lt;/p&gt;</description>
                <environment>&lt;p&gt;32-bit Windows&lt;/p&gt;</environment>
        <key id="12625397">DAEMON-273</key>
            <summary>Fail to start service in 32-bit Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lacek">Wallace</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Dec 2012 07:06:56 +0000</created>
                <updated>Fri, 11 Jan 2013 09:46:42 +0000</updated>
                            <resolved>Fri, 11 Jan 2013 09:46:42 +0000</resolved>
                                    <version>1.0.11</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13551012" author="mturk@apache.org" created="Fri, 11 Jan 2013 09:46:42 +0000"  >&lt;p&gt;When using service with space you&apos;ll have to quote the entire command&lt;br/&gt;
so prunsvc &quot;//ES//Service Name&quot;&lt;br/&gt;
I have tested against all combination and it works OK if cmdline is properly used. Also, just use a service without any space.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12611186">DAEMON-261</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>301939</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16xjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248567</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-272] jsvc ignores -home option</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-272</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;jsvc ignores the -home option.&lt;/p&gt;

&lt;p&gt;+-- DUMPING PARSED COMMAND LINE ARGUMENTS --------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Detach:          False&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Show Version:    Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Show Help:       No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Check Only:      Disabled&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Stop:            False&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Wait:            0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Run as service:  No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Install service: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Remove service:  No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JVM Name:        &quot;server&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Java Home:       &quot;/nfs/jdk/jdk1.7&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; PID File:        &quot;/tmp/casino-eai-uuid123.pid&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; User Name:       &quot;root&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Extra Options:   18&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;As you can see the passed argument is /nfs/jdk/jdk1.7, however jsvc detects default JDK:&lt;/p&gt;

&lt;p&gt;Home not specified on command line, using environment&lt;br/&gt;
Home not on command line or in environment, searching&lt;br/&gt;
Attempting to locate Java Home in /usr/java&lt;br/&gt;
Path /usr/java is not a directory&lt;br/&gt;
Attempting to locate Java Home in /usr/local/java&lt;br/&gt;
Path /usr/local/java is not a directory&lt;br/&gt;
Attempting to locate Java Home in /usr/lib/jvm/default-java&lt;br/&gt;
Path /usr/lib/jvm/default-java is not a directory&lt;br/&gt;
Attempting to locate Java Home in /usr/lib/jvm/java&lt;br/&gt;
Path /usr/lib/jvm/java is not a directory&lt;br/&gt;
Attempting to locate Java Home in /etc/alternatives/java_sdk&lt;br/&gt;
Path /etc/alternatives/java_sdk is not a directory&lt;br/&gt;
Attempting to locate Java Home in /etc/alternatives/jre&lt;br/&gt;
Attempting to locate VM configuration file /etc/alternatives/jre/jre/lib/jvm.cfg&lt;br/&gt;
Attempting to locate VM configuration file /etc/alternatives/jre/lib/jvm.cfg&lt;br/&gt;
Attempting to locate VM configuration file /etc/alternatives/jre/jre/lib/amd64/jvm.cfg&lt;br/&gt;
Attempting to locate VM configuration file /etc/alternatives/jre/lib/amd64/jvm.cfg&lt;br/&gt;
Found VM configuration file at /etc/alternatives/jre/lib/amd64/jvm.cfg&lt;br/&gt;
Found VM server definition in configuration&lt;br/&gt;
Checking library /etc/alternatives/jre/jre/lib/amd64/server/libjvm.so&lt;br/&gt;
Checking library /etc/alternatives/jre/lib/amd64/server/libjvm.so&lt;br/&gt;
Found VM client definition in configuration&lt;br/&gt;
Checking library /etc/alternatives/jre/jre/lib/amd64/client/libjvm.so&lt;br/&gt;
Checking library /etc/alternatives/jre/lib/amd64/client/libjvm.so&lt;br/&gt;
Cannot locate library for VM client (skipping)&lt;br/&gt;
Found VM hotspot definition in configuration&lt;br/&gt;
Checking library /etc/alternatives/jre/jre/lib/amd64/hotspot/libjvm.so&lt;br/&gt;
Checking library /etc/alternatives/jre/lib/amd64/hotspot/libjvm.so&lt;br/&gt;
Cannot locate library for VM hotspot (skipping)&lt;br/&gt;
Found VM classic definition in configuration&lt;br/&gt;
Checking library /etc/alternatives/jre/jre/lib/amd64/classic/libjvm.so&lt;br/&gt;
Checking library /etc/alternatives/jre/lib/amd64/classic/libjvm.so&lt;br/&gt;
Cannot locate library for VM classic (skipping)&lt;br/&gt;
Found VM native definition in configuration&lt;br/&gt;
Checking library /etc/alternatives/jre/jre/lib/amd64/native/libjvm.so&lt;br/&gt;
Checking library /etc/alternatives/jre/lib/amd64/native/libjvm.so&lt;br/&gt;
Cannot locate library for VM native (skipping)&lt;br/&gt;
Found VM green definition in configuration&lt;br/&gt;
Checking library /etc/alternatives/jre/jre/lib/amd64/green/libjvm.so&lt;br/&gt;
Checking library /etc/alternatives/jre/lib/amd64/green/libjvm.so&lt;br/&gt;
Cannot locate library for VM green (skipping)&lt;br/&gt;
Found VM jamvm definition in configuration&lt;br/&gt;
Checking library /etc/alternatives/jre/jre/lib/amd64/jamvm/libjvm.so&lt;br/&gt;
Checking library /etc/alternatives/jre/lib/amd64/jamvm/libjvm.so&lt;br/&gt;
Cannot locate library for VM jamvm (skipping)&lt;br/&gt;
Found VM cacao definition in configuration&lt;br/&gt;
Checking library /etc/alternatives/jre/jre/lib/amd64/cacao/libjvm.so&lt;br/&gt;
Checking library /etc/alternatives/jre/lib/amd64/cacao/libjvm.so&lt;br/&gt;
Cannot locate library for VM cacao (skipping)&lt;br/&gt;
Found VM zero definition in configuration&lt;br/&gt;
Checking library /etc/alternatives/jre/jre/lib/amd64/zero/libjvm.so&lt;br/&gt;
Checking library /etc/alternatives/jre/lib/amd64/zero/libjvm.so&lt;br/&gt;
Cannot locate library for VM zero (skipping)&lt;br/&gt;
Found VM shark definition in configuration&lt;br/&gt;
Checking library /etc/alternatives/jre/jre/lib/amd64/shark/libjvm.so&lt;br/&gt;
Checking library /etc/alternatives/jre/lib/amd64/shark/libjvm.so&lt;br/&gt;
Cannot locate library for VM shark (skipping)&lt;br/&gt;
Java Home located in /etc/alternatives/jre &lt;/p&gt;</description>
                <environment>&lt;p&gt;centos 6.3, jdk 1.7, 1.0.11&lt;/p&gt;</environment>
        <key id="12623992">DAEMON-272</key>
            <summary>jsvc ignores -home option</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="andrey_borisov">Andrey Borisov</reporter>
                        <labels>
                            <label>jdk1.7</label>
                    </labels>
                <created>Fri, 14 Dec 2012 15:31:13 +0000</created>
                <updated>Mon, 7 Jan 2013 10:04:38 +0000</updated>
                            <resolved>Thu, 20 Dec 2012 12:29:07 +0000</resolved>
                                    <version>1.0.11</version>
                                    <fixVersion>1.0.12</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13532507" author="andrey_borisov" created="Fri, 14 Dec 2012 18:08:49 +0000"  >&lt;p&gt;just checked with version 1.0.10 bundled with tomcat, and the tomcat&apos;s version works fine! This is blocker issue as for me!&lt;/p&gt;</comment>
                            <comment id="13536886" author="ssasa" created="Thu, 20 Dec 2012 09:26:07 +0000"  >&lt;p&gt;To make it work for me I had changed code in home.c in two places from:&lt;/p&gt;

&lt;p&gt;if (path == NULL || *path == &apos;\0&apos; || *path == &apos;/&apos;) {&lt;/p&gt;

&lt;p&gt;to:&lt;/p&gt;

&lt;p&gt;if (path == NULL || *path == &apos;\0&apos;) {&lt;/p&gt;

&lt;p&gt;Sasa&lt;/p&gt;</comment>
                            <comment id="13536994" author="mturk@apache.org" created="Thu, 20 Dec 2012 12:29:07 +0000"  >&lt;p&gt;This is already fixed issue and fix will be part of next version which should be released pretty soon,&lt;/p&gt;</comment>
                            <comment id="13545743" author="pleberre" created="Mon, 7 Jan 2013 10:04:38 +0000"  >&lt;p&gt;Same issue on OS X (10.8), works with 1.0.10 and fails with 1.0.11&lt;/p&gt;

&lt;p&gt;&amp;#8211; 1.0.10 &amp;#8211;&lt;/p&gt;

&lt;p&gt;+-- DUMPING PARSED COMMAND LINE ARGUMENTS --------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Detach:          True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Show Version:    No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Show Help:       No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Check Only:      Disabled&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Stop:            False&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Wait:            0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Run as service:  No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Install service: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Remove service:  No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JVM Name:        &quot;server&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Java Home:       &quot;null&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; PID File:        &quot;/opt/csmcp/var/run/csmcp.pid&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; User Name:       &quot;null&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Extra Options:   10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Xms1024M&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Xmx2048M&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Xss2M&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-XX:+OptimizeStringConcat&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-XX:+UseCompressedStrings&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Djava.library.path=/opt/csmcp/lib&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Dapps.properties=/Users/rplb/code/csmcp/trunk/apps.properties&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Djava.awt.headless=true&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Dfile.encoding=UTF-8&quot;&lt;br/&gt;
...&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Class Invoked:   &quot;ch.consulare.csmcp.Main&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Class Arguments: 0&lt;br/&gt;
+-------------------------------------------------------&lt;br/&gt;
Home not specified on command line, using environment&lt;br/&gt;
Attempting to locate Java Home in /Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home&lt;br/&gt;
Attempting to locate VM configuration file /Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/jre/lib/jvm.cfg&lt;br/&gt;
Attempting to locate VM configuration file /Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/lib/jvm.cfg&lt;br/&gt;
Found VM configuration file at /Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/lib/jvm.cfg&lt;br/&gt;
Found VM client definition in configuration&lt;br/&gt;
Checking library /Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/../Libraries/libclient.dylib&lt;br/&gt;
Found VM jvm definition in configuration&lt;br/&gt;
Checking library /Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/../Libraries/libjvm.dylib&lt;br/&gt;
Found VM hotspot definition in configuration&lt;br/&gt;
Checking library /Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/../Libraries/libhotspot.dylib&lt;br/&gt;
Found VM server definition in configuration&lt;br/&gt;
Checking library /Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/../Libraries/libserver.dylib&lt;br/&gt;
Found VM classic definition in configuration&lt;br/&gt;
Checking library /Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/../Libraries/libclassic.dylib&lt;br/&gt;
Cannot locate library for VM classic (skipping)&lt;br/&gt;
Java Home located in /Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home&lt;br/&gt;
+-- DUMPING JAVA HOME STRUCTURE ------------------------&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Java Home:       &quot;/Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Java VM Config.: &quot;/Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/lib/jvm.cfg&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Found JVMs:      4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JVM Name:        &quot;client&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;                  &quot;/Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/../Libraries/libclient.dylib&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JVM Name:        &quot;jvm&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;                  &quot;/Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/../Libraries/libjvm.dylib&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JVM Name:        &quot;hotspot&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;                  &quot;/Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/../Libraries/libhotspot.dylib&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JVM Name:        &quot;server&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;                  &quot;/Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home/../Libraries/libserver.dylib&quot;&lt;br/&gt;
+-------------------------------------------------------&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;---- 1.0.11 &amp;#8212;&lt;/p&gt;

&lt;p&gt;+-- DUMPING PARSED COMMAND LINE ARGUMENTS --------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Detach:          True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Show Version:    No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Show Help:       No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Check Only:      Disabled&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Stop:            False&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Wait:            0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Run as service:  No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Install service: No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Remove service:  No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; JVM Name:        &quot;server&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Java Home:       &quot;/Library/Java/JavaVirtualMachines/1.6.0_33-b03-424.jdk/Contents/Home&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; PID File:        &quot;/opt/ESIS/var/run/esis.pid&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; User Name:       &quot;null&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Extra Options:   11&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-verbose&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Xms1024M&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Xmx2048M&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Xss2M&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-XX:+OptimizeStringConcat&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-XX:+UseCompressedStrings&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Djava.library.path=/opt/esis/lib&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Dapps.properties=/Users/rplb/code/esis/main/apps.properties&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Djava.awt.headless=true&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   &quot;-Dfile.encoding=UTF-8&quot;&lt;br/&gt;
...&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Class Invoked:   &quot;com.entelience.EsisDaemon&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Class Arguments: 0&lt;br/&gt;
+-------------------------------------------------------&lt;br/&gt;
Home not specified on command line, using environment&lt;br/&gt;
Home not on command line or in environment, searching&lt;br/&gt;
Attempting to locate Java Home in /System/Library/Frameworks/JavaVM.framework/Home&lt;br/&gt;
Path /System/Library/Frameworks/JavaVM.framework/Home is not a directory&lt;br/&gt;
Attempting to locate Java Home in /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home/&lt;br/&gt;
Path /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home/ is not a directory&lt;br/&gt;
Cannot locate Java Home&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12618028">DAEMON-268</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>297892</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 43 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14vvr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236630</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-271] No available JVMs when compiling against jdk1.7.0_09</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-271</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When compiling JSVC 1.0.11 using Oracle Java 7u9, I don&apos;t get any available JVMs.&lt;/p&gt;

&lt;p&gt;Downloading and compiling 1.0.10 using the same steps produces a usable JSVC binary.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[marcte02@marcte02-fedora17 unix]$ uname -a
Linux marcte02-fedora17 3.6.8-2.fc17.x86_64 #1 SMP Tue Nov 27 19:35:02 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux
[marcte02@marcte02-fedora17 Downloads]$ sudo yum install jre-7u9-linux-x64.rpm
[marcte02@marcte02-fedora17 Downloads]$ tar zxf commons-daemon-1.0.11-src.tar.gz 
[marcte02@marcte02-fedora17 Downloads]$ cd commons-daemon-1.0.11-src/src/native/unix/
[marcte02@marcte02-fedora17 unix]$ export CFLAGS=-m64
[marcte02@marcte02-fedora17 unix]$ export LDFLAGS=-m64
[marcte02@marcte02-fedora17 unix]$ export JAVA_HOME=/usr/java/default
[marcte02@marcte02-fedora17 unix]$ ./configure 
*** Current host ***
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking cached host system type... ok
*** C-Language compilation tools ***
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for ranlib... ranlib
checking for strip... strip
*** Host support ***
checking C flags dependant on host system type... ok
*** Java compilation tools ***
checking for JDK os include directory...  linux
gcc flags added
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking sys/capability.h usability... no
checking sys/capability.h presence... no
checking for sys/capability.h... no
configure: WARNING: cannot find headers for libcap
*** Writing output files ***
configure: creating ./config.status
config.status: creating Makefile
config.status: creating Makedefs
config.status: creating native/Makefile
*** All done ***
Now you can issue &quot;make&quot;
[marcte02@marcte02-fedora17 unix]$ make
(cd native; make  all)
make[1]: Entering directory `/home/marcte02/Downloads/commons-daemon-1.0.11-src/src/native/unix/native&apos;
gcc -m64 -DOS_LINUX -DDSO_DLFCN -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/java/default/include -I/usr/java/default/include/linux -c jsvc-unix.c -o jsvc-unix.o
gcc -m64 -DOS_LINUX -DDSO_DLFCN -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/java/default/include -I/usr/java/default/include/linux -c arguments.c -o arguments.o
gcc -m64 -DOS_LINUX -DDSO_DLFCN -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/java/default/include -I/usr/java/default/include/linux -c debug.c -o debug.o
gcc -m64 -DOS_LINUX -DDSO_DLFCN -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/java/default/include -I/usr/java/default/include/linux -c dso-dlfcn.c -o dso-dlfcn.o
gcc -m64 -DOS_LINUX -DDSO_DLFCN -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/java/default/include -I/usr/java/default/include/linux -c dso-dyld.c -o dso-dyld.o
gcc -m64 -DOS_LINUX -DDSO_DLFCN -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/java/default/include -I/usr/java/default/include/linux -c help.c -o help.o
gcc -m64 -DOS_LINUX -DDSO_DLFCN -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/java/default/include -I/usr/java/default/include/linux -c home.c -o home.o
gcc -m64 -DOS_LINUX -DDSO_DLFCN -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/java/default/include -I/usr/java/default/include/linux -c java.c -o java.o
gcc -m64 -DOS_LINUX -DDSO_DLFCN -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/java/default/include -I/usr/java/default/include/linux -c location.c -o location.o
gcc -m64 -DOS_LINUX -DDSO_DLFCN -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/java/default/include -I/usr/java/default/include/linux -c replace.c -o replace.o
gcc -m64 -DOS_LINUX -DDSO_DLFCN -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/java/default/include -I/usr/java/default/include/linux -c locks.c -o locks.o
gcc -m64 -DOS_LINUX -DDSO_DLFCN -DCPU=\&quot;amd64\&quot; -Wall -Wstrict-prototypes   -I/usr/java/default/include -I/usr/java/default/include/linux -c signals.c -o signals.o
ar cr libservice.a arguments.o debug.o dso-dlfcn.o dso-dyld.o help.o home.o java.o location.o replace.o locks.o signals.o
ranlib libservice.a
gcc -m64  jsvc-unix.o libservice.a -ldl -lpthread -o ../jsvc
make[1]: Leaving directory `/home/marcte02/Downloads/commons-daemon-1.0.11-src/src/native/unix/native&apos;
[marcte02@marcte02-fedora17 unix]$ ll
total 300
-rw-rw-r-- 1 marcte02 marcte02   2189 Nov 22 04:37 CHANGES.txt
-rw-rw-r-- 1 marcte02 marcte02  15780 Dec  7 08:34 config.log
-rwxrwxr-x 1 marcte02 marcte02    151 Dec  7 08:34 config.nice
-rwxrwxr-x 1 marcte02 marcte02  24959 Dec  7 08:34 config.status
-rwxrwxr-x 1 marcte02 marcte02 144740 Nov 22 04:39 configure
-rw-rw-r-- 1 marcte02 marcte02   5105 Nov 22 04:37 configure.in
-rw-rw-r-- 1 marcte02 marcte02   2601 Nov 22 04:37 INSTALL.txt
-rwxrwxr-x 1 marcte02 marcte02  62027 Dec  7 08:34 jsvc
-rw-rw-r-- 1 marcte02 marcte02   1242 Dec  7 08:34 Makedefs
-rw-rw-r-- 1 marcte02 marcte02   1146 Nov 22 04:37 Makedefs.in
-rw-rw-r-- 1 marcte02 marcte02   1238 Dec  7 08:34 Makefile
-rw-rw-r-- 1 marcte02 marcte02   1238 Nov 22 04:37 Makefile.in
drwxrwxr-x 2 marcte02 marcte02   4096 Dec  7 08:28 man
drwxrwxr-x 2 marcte02 marcte02   4096 Dec  7 08:34 native
drwxrwxr-x 2 marcte02 marcte02   4096 Dec  7 08:28 support
[marcte02@marcte02-fedora17 unix]$ ./jsvc -help
Usage: jsvc [-options] class [args...]

Where options include:

    -help | --help | -?
        show this help page (implies -nodetach)
    -jvm &amp;lt;JVM name&amp;gt;
        use a specific Java Virtual Machine. Available JVMs:
           
    -client
        use a client Java Virtual Machine.
    -server
        use a server Java Virtual Machine.
    -cp | -classpath &amp;lt;directories and zip/jar files&amp;gt;
        set search path for service classes and resouces
    -java-home | -home &amp;lt;directory&amp;gt;
        set the path of your JDK or JRE installation (or set
        the JAVA_HOME environment variable)
    -version
        show the current Java environment version (to check
        correctness of -home and -jvm. Implies -nodetach)
    -showversion
        show the current Java environment version (to check
        correctness of -home and -jvm) and continue execution.
    -nodetach
        don&apos;t detach from parent process and become a daemon
    -debug
        verbosely print debugging information
    -check
        only check service (implies -nodetach)
    -user &amp;lt;user&amp;gt;
        user used to run the daemon (defaults to current user)
    -verbose[:class|gc|jni]
        enable verbose output
    -cwd &amp;lt;/full/path&amp;gt;
        set working directory to given location (defaults to /)
    -outfile &amp;lt;/full/path/to/file&amp;gt;
        Location for output from stdout (defaults to /dev/null)
        Use the value &apos;&amp;amp;2&apos; to simulate &apos;1&amp;gt;&amp;amp;2&apos;
    -errfile &amp;lt;/full/path/to/file&amp;gt;
        Location for output from stderr (defaults to /dev/null)
        Use the value &apos;&amp;amp;1&apos; to simulate &apos;2&amp;gt;&amp;amp;1&apos;
    -pidfile &amp;lt;/full/path/to/file&amp;gt;
        Location for output from the file containing the pid of jsvc
        (defaults to /var/run/jsvc.pid)
    -D&amp;lt;name&amp;gt;=&amp;lt;value&amp;gt;
        set a Java system property
    -X&amp;lt;option&amp;gt;
        set Virtual Machine specific option
    -ea[:&amp;lt;packagename&amp;gt;...|:&amp;lt;classname&amp;gt;]
    -enableassertions[:&amp;lt;packagename&amp;gt;...|:&amp;lt;classname&amp;gt;]
        enable assertions
    -da[:&amp;lt;packagename&amp;gt;...|:&amp;lt;classname&amp;gt;]
    -disableassertions[:&amp;lt;packagename&amp;gt;...|:&amp;lt;classname&amp;gt;]
        disable assertions
    -esa | -enablesystemassertions
        enable system assertions
    -dsa | -disablesystemassertions
        disable system assertions
    -agentlib:&amp;lt;libname&amp;gt;[=&amp;lt;options&amp;gt;]
        load native agent library &amp;lt;libname&amp;gt;, e.g. -agentlib:hprof
    -agentpath:&amp;lt;pathname&amp;gt;[=&amp;lt;options&amp;gt;]
        load native agent library by full pathname
    -javaagent:&amp;lt;jarpath&amp;gt;[=&amp;lt;options&amp;gt;]
        load Java programming language agent, see java.lang.instrument
    -procname &amp;lt;procname&amp;gt;
        use the specified process name
    -wait &amp;lt;waittime&amp;gt;
        wait waittime seconds for the service to start
        waittime should multiple of 10 (min=10)
    -stop
        stop the service using the file given in the -pidfile option
    -keepstdin
        does not redirect stdin to /dev/null

jsvc (Apache Commons Daemon) 1.0.11
Copyright (c) 1999-2012 Apache Software Foundation.

[marcte02@marcte02-fedora17 unix]$ 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Fedora 17 x86_64&lt;/p&gt;</environment>
        <key id="12622926">DAEMON-271</key>
            <summary>No available JVMs when compiling against jdk1.7.0_09</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="marcteale">Marc Teale</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Dec 2012 16:49:47 +0000</created>
                <updated>Mon, 10 Dec 2012 09:33:07 +0000</updated>
                            <resolved>Sun, 9 Dec 2012 14:59:49 +0000</resolved>
                                    <version>1.0.11</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13527493" author="mturk@apache.org" created="Sun, 9 Dec 2012 14:59:49 +0000"  >&lt;p&gt;You will need JDK not JRE to compile daemon.&lt;/p&gt;</comment>
                            <comment id="13527624" author="marcteale" created="Sun, 9 Dec 2012 20:42:43 +0000"  >&lt;p&gt;Please reopen.  I made a mistake while editing the text and it refers to installing the JRE instead of the JDK.  I do have the JDK installed, not just the JRE.  The issue is not that JSVC won&apos;t compile, it is that it compiles and then can&apos;t find any available JVMs.  You can see this in the -jvm option when JSVC is run with -help, as in the output.&lt;/p&gt;</comment>
                            <comment id="13527625" author="marcteale" created="Sun, 9 Dec 2012 20:43:46 +0000"  >&lt;p&gt;Compiling 1.0.10 produces a functional binary under the same environment.&lt;/p&gt;</comment>
                            <comment id="13527798" author="mturk@apache.org" created="Mon, 10 Dec 2012 09:33:07 +0000"  >&lt;p&gt;The cause is the same as for &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-270&quot; title=&quot;JSVC process capability issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-270&quot;&gt;&lt;del&gt;DAEMON-270&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12618990">DAEMON-270</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>296508</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 47 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i149un:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233059</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-270] JSVC process capability issue</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-270</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;For jsvc, start fork process to start JVM, then downgrade the process capability to 0.&lt;br/&gt;
Is it really requirement? or any concern? &lt;br/&gt;
For my test env, it happen can&apos;t start more threads in the java.&lt;br/&gt;
After the check, it is limited by &quot;ulimit -u&quot; max process for user. It is very interesting things, actually it doesn&apos;t control threads by this attribute in the normal process.&lt;br/&gt;
Downgrade the process capability cause this issue. Max threads number should be control by env memory, kernel max threads parameter, stack size.&lt;/p&gt;

&lt;p&gt;For my suggestion, could remove downgrade the process capability, only inherit the parent&apos;s process capability and add some &quot;read/netbind/setuid..&quot; extra privilege if don&apos;t have.&lt;/p&gt;

</description>
                <environment>&lt;p&gt;Linux centos 6.3, jdk1.7, tomcat &lt;/p&gt;</environment>
        <key id="12618990">DAEMON-270</key>
            <summary>JSVC process capability issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="raintung.li">Raintung Li</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Dec 2012 06:01:57 +0000</created>
                <updated>Fri, 11 Jan 2013 09:49:00 +0000</updated>
                            <resolved>Fri, 11 Jan 2013 09:49:00 +0000</resolved>
                                    <version>1.0.11</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13511316" author="mturk@apache.org" created="Thu, 6 Dec 2012 12:56:34 +0000"  >&lt;p&gt;I&apos;m not sure why would that be a bad thing and why would that be a major issue.&lt;br/&gt;
From your comment it is clear that if you set user&apos;s &apos;ulimit -u unlimited&apos; it&apos;ll work.&lt;br/&gt;
Anyhow, it can just be a bug in the linux kernel.&lt;/p&gt;
</comment>
                            <comment id="13551014" author="mturk@apache.org" created="Fri, 11 Jan 2013 09:49:00 +0000"  >&lt;p&gt;Won&apos;t fix until you came up with some patch that would solve this issue without affecting security.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12622926">DAEMON-271</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>296276</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1485r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232785</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-268] jsvc fails to find java home on centos</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-268</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Having upgraded to commons-daemon 1.0.11 from 1.0.10, we are now no longer able to start our service because Java Home cannot be located.&lt;/p&gt;

&lt;p&gt;In our particular use case we do not set JAVA_HOME as an environment variable but instead specify it using the -home parameter on the jsvc command line. However I have tried using an environment variable and the result is the same: the jsvc fails to find the Java Home directory.&lt;/p&gt;

&lt;p&gt;Having looked at the source code, I think the error is due to &lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/daemon/branches/1.0.x/src/native/unix/native/home.c?r1=1205952&amp;amp;r2=1412037&amp;amp;diff_format=h&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a recent change to home.c&lt;/a&gt;. In particular, the following on lines 215 to 221:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path == NULL || *path == &lt;span class=&quot;code-quote&quot;&gt;&apos;\0&apos;&lt;/span&gt; || *path == &lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt;) {
   log_debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Home not specified on command line, using environment&quot;&lt;/span&gt;);
   path = getenv(&lt;span class=&quot;code-quote&quot;&gt;&quot;JAVA_HOME&quot;&lt;/span&gt;);
   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path == NULL || *path == &lt;span class=&quot;code-quote&quot;&gt;&apos;\0&apos;&lt;/span&gt; || *path == &lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt;) {
       &lt;span class=&quot;code-comment&quot;&gt;/* guard against empty JAVA_HOME */&lt;/span&gt;
       path = NULL;
   }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The use of &apos;==&apos; to compare strings here is incorrect; the strcmp() function should be used instead. Currently, the code will fail if the first character of the path is &apos;/&apos;, which is invariably the case on Linux, UNIX or MacOS systems. I suspect the reason that this has not been detected sooner is because MacOS and Ubuntu/Debian have been special-cased elsewhere to hard-code the expected Java Home location.&lt;/p&gt;

&lt;p&gt;For us this is a blocker so we have reverted to using 1.0.10 until it is fixed. We also have a patch which I will attach to this issue shortly.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Oracle Java JRE 1.7.0_04&lt;br/&gt;
CentOS Linux 6.3, 64-bit&lt;/p&gt;</environment>
        <key id="12618028">DAEMON-268</key>
            <summary>jsvc fails to find java home on centos</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="lower29">Richard Lowe</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Nov 2012 18:05:04 +0000</created>
                <updated>Thu, 20 Dec 2012 12:29:07 +0000</updated>
                            <resolved>Tue, 4 Dec 2012 14:09:30 +0000</resolved>
                                    <version>1.0.11</version>
                                    <fixVersion>1.0.12</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13505724" author="lower29" created="Wed, 28 Nov 2012 18:06:15 +0000"  >&lt;p&gt;The attached patch.txt fixes this issue by replacing == with strcmp() to compare strings.&lt;/p&gt;</comment>
                            <comment id="13507322" author="mturk@apache.org" created="Fri, 30 Nov 2012 13:36:19 +0000"  >&lt;p&gt;Right, seems we&apos;ll be releasing 1.0.12 pretty soon. It&apos;s a serious regression.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (path == NULL || *path == &apos;\0&apos; || *path == &apos;/&apos;) {&lt;br/&gt;
+    if (path == NULL || strcmp(path, &quot;&quot;) == 0 || strcmp(path, &quot;/&quot;) == 0) {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Well, strcmp should be used only for the last part. strcmp(path, &quot;&quot;) is the same as *path == &apos;\0&apos;&lt;/p&gt;</comment>
                            <comment id="13507324" author="lower29" created="Fri, 30 Nov 2012 13:39:21 +0000"  >&lt;p&gt;That seems sensible to me. Thanks for addressing this so quickly, it&apos;s appreciated.&lt;/p&gt;</comment>
                            <comment id="13509753" author="mturk@apache.org" created="Tue, 4 Dec 2012 14:09:30 +0000"  >&lt;p&gt;Fixed in the SVN.&lt;br/&gt;
Will be part of next release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12623992">DAEMON-272</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12555202" name="patch.txt" size="678" author="lower29" created="Wed, 28 Nov 2012 18:06:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292630</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0s9sn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163063</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-267] prunsrv failure doesn&apos;t trigger windows service recovery actions</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-267</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;This is directly related to &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-244&quot; title=&quot;prunsrv does not propagate exit code&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-244&quot;&gt;&lt;del&gt;DAEMON-244&lt;/del&gt;&lt;/a&gt;, which goes a long way towards solving the problem but still doesn&apos;t trigger Windows Service recovery actions correctly.&lt;/p&gt;

&lt;p&gt;With that fix applied, when the Java process terminates abnormally prunsrv reports to the Windows Service Controller that the service had terminated and passes along the non-zero exit code from the app.  However, actually notifying the service controller that the service has terminated at all (even with a non-zero exit code) prevents the recovery actions from kicking in.&lt;/p&gt;

&lt;p&gt;From &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/ms685939(VS.85).aspx:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/ms685939(VS.85).aspx:&lt;/a&gt;&lt;br/&gt;
&quot;A service is considered failed when it terminates without reporting a status of SERVICE_STOPPED to the service controller&quot;&lt;/p&gt;

&lt;p&gt;In order for the recovery actions to kick in, prunsrv should not notify the service controller at all when a failure is detected and should simply exit with a non-zero exit code.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Windows&lt;/p&gt;</environment>
        <key id="12615744">DAEMON-267</key>
            <summary>prunsrv failure doesn&apos;t trigger windows service recovery actions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jgrimm">Jonathan Grimm</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Nov 2012 16:21:52 +0000</created>
                <updated>Wed, 21 Nov 2012 08:25:59 +0000</updated>
                            <resolved>Wed, 21 Nov 2012 08:25:59 +0000</resolved>
                                    <version>1.0.10</version>
                                    <fixVersion>1.0.11</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13495385" author="jgrimm" created="Mon, 12 Nov 2012 16:26:37 +0000"  >&lt;p&gt;I&apos;ve attached a fix for this problem, checks to see if the exit code is non-zero and if so does not report the service stop to the windows service controller at all.&lt;/p&gt;</comment>
                            <comment id="13501761" author="mturk@apache.org" created="Wed, 21 Nov 2012 08:25:59 +0000"  >&lt;p&gt;Patch applied. Thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12544913">DAEMON-244</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12553132" name="prunsrv_recovery_actions_patch.diff" size="1130" author="jgrimm" created="Mon, 12 Nov 2012 16:26:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>257052</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0je07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>111199</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-266] OS X 10.8: jsvc appears to cause hang on Toolkit.createDefaultToolkit</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-266</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When using jsvc to launch a service (such as Tomcat) on this platform, any use of the Toolkit.createDefaultToolkit causes the current thread to hang indefinitely in native code.&lt;/p&gt;

&lt;p&gt;This does not happen when running the code directly using the normal &apos;java&apos; runtime.&lt;/p&gt;

&lt;p&gt;I have a gz file containing all files necessary to reproduce this on my machine - will add a comment and attach this file if it lets me, or figure out somewhere to put it.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Max OS X 10.8.2&lt;br/&gt;
(64-bit)&lt;/p&gt;

&lt;p&gt;$ java -version&lt;br/&gt;
java version &quot;1.7.0_09&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0_09-b05)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 23.5-b02, mixed mode)&lt;/p&gt;</environment>
        <key id="12615383">DAEMON-266</key>
            <summary>OS X 10.8: jsvc appears to cause hang on Toolkit.createDefaultToolkit</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="quen">sam marshall</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Nov 2012 21:11:48 +0000</created>
                <updated>Wed, 21 Nov 2012 08:58:36 +0000</updated>
                            <resolved>Wed, 21 Nov 2012 08:58:36 +0000</resolved>
                                    <version>1.0.10</version>
                                    <fixVersion>1.0.11</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13493495" author="quen" created="Thu, 8 Nov 2012 21:16:05 +0000"  >&lt;p&gt;This file demonstrates the bug including precompiled jsvc (from the version 1.0.10 shipped in latest Tomcat 7, also see &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-265&quot; title=&quot;OS X 10.8: Cannot build jsvc with java 7 installed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-265&quot;&gt;&lt;del&gt;DAEMON-265&lt;/del&gt;&lt;/a&gt; if you prefer to build your own).&lt;/p&gt;

&lt;p&gt;To see the bug, unpack the archive, change in there, then run the shell script:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./tryit
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It uses sudo, so you&apos;ll be prompted for password (look at script if you&apos;re concerned about security). Includes all the instructions on how to see the result. Basically the problem is that it doesn&apos;t exit.&lt;/p&gt;

&lt;p&gt;If you want to see the same code running without using jsvc, when it completes successfully:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java -Djava.awt.headless=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; Test
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ll post the stack trace of the frozen thread in next comment.&lt;/p&gt;</comment>
                            <comment id="13493517" author="quen" created="Thu, 8 Nov 2012 21:39:12 +0000"  >&lt;p&gt;Here&apos;s the stack trace:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;!!! Problem thread !!!!&quot;&lt;/span&gt; prio=5 tid=7f9fba936000 nid=0x10b970000 runnable [10b96e000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at apple.awt.CToolkit.getContentScaleFactor(Native Method)
	at apple.awt.CToolkit.&amp;lt;init&amp;gt;(CToolkit.java:136)
	- locked &amp;lt;7aad423d8&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.newInstance0(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:355)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.newInstance(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;.java:308)
	at java.awt.Toolkit$2.run(Toolkit.java:859)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.awt.Toolkit.getDefaultToolkit(Toolkit.java:826)
	- locked &amp;lt;6fb73d800&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; java.awt.Toolkit)
	at Test$1.run(Test.java:22)

   Locked ownable synchronizers:
	- None
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note: I think this problem may be caused because it&apos;s using the wrong java-home. On Mac, the correct java-home can be found by running /usr/libexec/java_home. Using this value, I tried adding this argument to jsvc (this is the same one I used when building it):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-java-home /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However I then get the error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Cannot find any VM in Java Home /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home
Cannot locate JVM library file
Service exit with a &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value of 1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Without doing that, I modified the test script a bit to print out java.home:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t think that old Apple 1.6 JDK is really supposed to be used in the current OS X versions (it&apos;s not even always installed and is only there to support &apos;legacy&apos; bundled desktop .app files), so this is probably the root of the problem; jsvc ought to be using the new Java 7 JDK, same that gets used if you type &apos;java -version&apos; at the commandline. Just a guess though - I&apos;m not an expert in this.&lt;/p&gt;

&lt;p&gt;Note: That also might mean that this problem can&apos;t be reproduced, or reproduces differently, if you&apos;ve never run a legacy Java app on the 10.8 Mac. (A legacy Java app is anything that prompts the &apos;do you want to install java? this will take bloody ages&apos; dialog from Apple.)&lt;/p&gt;</comment>
                            <comment id="13501782" author="mturk@apache.org" created="Wed, 21 Nov 2012 08:58:36 +0000"  >&lt;p&gt;In case the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-265&quot; title=&quot;OS X 10.8: Cannot build jsvc with java 7 installed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-265&quot;&gt;&lt;del&gt;DAEMON-265&lt;/del&gt;&lt;/a&gt; does not solve this issue I&apos;m afraid we can&apos;t do much. Precompiled binaries probably cannot be generic enough, so I suppose you will need to recompile if you have different VM layout&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12552705" name="jsvc-bug.tar.gz" size="43604" author="quen" created="Thu, 8 Nov 2012 21:16:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256661</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0hvav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>102333</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-265] OS X 10.8: Cannot build jsvc with java 7 installed</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-265</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I followed the instructions here to build jsvc:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://tomcat.apache.org/tomcat-7.0-doc/setup.html#Unix_daemon&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tomcat.apache.org/tomcat-7.0-doc/setup.html#Unix_daemon&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When I run the configure script, I get this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;*** Java compilation tools ***
checking &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; JDK os include directory... Cannot find jni_md.h in /&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;/Library/Frameworks/JavaVM.framework/Home/
configure: error: You should retry --with-os-type=SUBDIR
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(Update: I think my initial workaround was incorrect, have updated.)&lt;/p&gt;

&lt;p&gt;You can make it work by pointing to the current command-line Java home, which can be found by running this command:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/usr/libexec/java_home
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The result of this command will be something like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can therefore run configure as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;./configure --with-java=/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As Oracle JDK 1.7 is now the default/only supported JDK for command-line use in current OS X versions, this really ought to work out of the box. Don&apos;t know how configure scripts work, so can&apos;t supply a patch, sorry.&lt;/p&gt;

&lt;p&gt;Note: I&apos;m having an additional problem which may be related (will post as separate issue).&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS X 10.8.2&lt;br/&gt;
Oracle JDK 1.7.0_09&lt;/p&gt;</environment>
        <key id="12615033">DAEMON-265</key>
            <summary>OS X 10.8: Cannot build jsvc with java 7 installed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="quen">sam marshall</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Nov 2012 22:22:13 +0000</created>
                <updated>Sat, 1 Nov 2014 09:57:48 +0000</updated>
                            <resolved>Tue, 20 Nov 2012 06:31:02 +0000</resolved>
                                    <version>1.0.10</version>
                                    <fixVersion>1.0.11</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13500860" author="mturk@apache.org" created="Tue, 20 Nov 2012 06:31:02 +0000"  >&lt;p&gt;Added /usr/libexec/java_home check with configure&lt;/p&gt;</comment>
                            <comment id="14193046" author="p-leberre" created="Sat, 1 Nov 2014 09:57:48 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I hit one further issue with JDK 7 on 10.9 and 10.10, the missing Libraries directory and lib server.dylib. There seems to be no more lib server.dylib but a server/ subdirectory with a libjvm.dylib in it.&lt;/p&gt;

&lt;p&gt;To fix this I had to :&lt;/p&gt;

&lt;p&gt;cd /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/Contents&lt;br/&gt;
sudo ln -s Home/jre/lib Libraries &lt;br/&gt;
cd Libraries&lt;br/&gt;
sudo ln -s server/libjvm.dylib libserver.dylib&lt;/p&gt;

&lt;p&gt;and it works &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&amp;#8212; debug output&lt;br/&gt;
Attempting to locate Java Home in /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/Contents/Home&lt;br/&gt;
Attempting to locate VM configuration file /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/Contents/Home/jre/lib/jvm.cfg&lt;br/&gt;
Found VM configuration file at /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/Contents/Home/jre/lib/jvm.cfg&lt;br/&gt;
Found VM server definition in configuration&lt;br/&gt;
Checking library /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/Contents/Home/../Libraries/libserver.dylib&lt;br/&gt;
Found VM client definition in configuration&lt;br/&gt;
Checking library /Library/Java/JavaVirtualMachines/jdk1.7.0_71.jdk/Contents/Home/../Libraries/libclient.dylib&lt;br/&gt;
Cannot locate library for VM client (skipping)&lt;br/&gt;
&amp;#8212;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255585</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fsmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90235</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-263] [PATCH] Fixed loading capabilities library on RHEL 5.x 64bit Machines</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-263</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Jsvc failed starting on RHEL 5 machines, we patched the static path for the libary&lt;/p&gt;

&lt;p&gt;Log:&lt;br/&gt;
Service exit with a return value of 122&lt;br/&gt;
failed loading capabilities library &amp;#8211; /usr/lib/libcap.so: cannot open&lt;br/&gt;
shared object file: No such file or directory.&lt;/p&gt;

&lt;p&gt;Please check the diff of the jsvc-unix.c&lt;/p&gt;</description>
                <environment>&lt;p&gt;RHEL 5.X, Tomcat 6.0.35&lt;/p&gt;</environment>
        <key id="12612639">DAEMON-263</key>
            <summary>[PATCH] Fixed loading capabilities library on RHEL 5.x 64bit Machines</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mwolf">Marcel Wolf</reporter>
                        <labels>
                            <label>jsvc</label>
                            <label>jsvc-unix.c</label>
                            <label>libcap.so</label>
                    </labels>
                <created>Fri, 19 Oct 2012 09:18:47 +0000</created>
                <updated>Wed, 21 Nov 2012 10:08:15 +0000</updated>
                            <resolved>Wed, 21 Nov 2012 10:08:15 +0000</resolved>
                                    <version>1.0.10</version>
                                    <fixVersion>1.0.11</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13479903" author="mwolf" created="Fri, 19 Oct 2012 09:21:14 +0000"  >&lt;p&gt;the diff of the original and patched file&lt;/p&gt;</comment>
                            <comment id="13479904" author="mwolf" created="Fri, 19 Oct 2012 09:23:15 +0000"  >&lt;p&gt;this is the patched jsvc-unix.c file&lt;/p&gt;</comment>
                            <comment id="13501824" author="mturk@apache.org" created="Wed, 21 Nov 2012 10:08:15 +0000"  >&lt;p&gt;Fixed in trunk with r1411552.&lt;br/&gt;
I added /usr/lib64/libcap.* to the search path as well&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12549965" name="jsvc-unix.c" size="34711" author="mwolf" created="Fri, 19 Oct 2012 09:23:15 +0000"/>
                            <attachment id="12549964" name="jsvc.diff" size="130" author="mwolf" created="Fri, 19 Oct 2012 09:21:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>249888</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ammf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59938</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-261] Can&apos;t start service created with name space</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-261</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I can create a service with a space in its name with prunsrv.exe (1.0.10) using quotes like this &quot;//IS//Service Name&quot;, but the service does not start.&lt;/p&gt;

&lt;p&gt;The execution path of service is&lt;br/&gt;
&quot;C:\apache-tomcat\bin\tomcat7.exe&quot; //RS//Service Name    (no quotes!)&lt;/p&gt;

&lt;p&gt;When I try to start it I get an error windows 1053.&lt;/p&gt;

&lt;p&gt;If I put quotes by registry the service starts fine.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Microsoft Windows XP Pro&lt;br/&gt;
Service Pack 3&lt;/p&gt;</environment>
        <key id="12611186">DAEMON-261</key>
            <summary>Can&apos;t start service created with name space</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10">Implemented</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tilin">Alain Perreault</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Oct 2012 14:49:08 +0000</created>
                <updated>Tue, 29 Jan 2013 15:49:55 +0000</updated>
                            <resolved>Tue, 29 Jan 2013 15:49:55 +0000</resolved>
                                    <version>1.0.10</version>
                                    <fixVersion>1.0.11</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13476961" author="mturk@apache.org" created="Tue, 16 Oct 2012 12:32:42 +0000"  >&lt;p&gt;Not sure if I&apos;m willing to fix that.&lt;br/&gt;
Service name should be short name since it already has some limitations by win32 API.&lt;br/&gt;
Not even sure if such service can be started with &apos;net start&apos;&lt;/p&gt;</comment>
                            <comment id="13477076" author="sebb@apache.org" created="Tue, 16 Oct 2012 15:17:57 +0000"  >&lt;p&gt;Probably best to disallow space in the service name?&lt;/p&gt;</comment>
                            <comment id="13477080" author="mturk@apache.org" created="Tue, 16 Oct 2012 15:27:09 +0000"  >&lt;p&gt;I think we should just allow spaces. According to MSDN only \ and / are invalid chars&lt;br/&gt;
Fix should just check for spaces and quote the //RS/Foo Bar at install time.&lt;/p&gt;
</comment>
                            <comment id="13501778" author="mturk@apache.org" created="Wed, 21 Nov 2012 08:52:03 +0000"  >&lt;p&gt;Fixed in the SVN.&lt;br/&gt;
//RS//... argument is now quoted in case it contains spaces.&lt;/p&gt;</comment>
                            <comment id="13565468" author="tilin" created="Tue, 29 Jan 2013 15:43:04 +0000"  >&lt;p&gt;Thanks for the job. How can I get the Procrun version 1.10.11&lt;/p&gt;</comment>
                            <comment id="13565470" author="mturk@apache.org" created="Tue, 29 Jan 2013 15:49:55 +0000"  >&lt;p&gt;Please do not use JIRA for those kind of questions.&lt;br/&gt;
BTW, we have recently released 1.0.12, so us that version instead&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12625397">DAEMON-273</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>246996</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07xq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>44231</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-260] unable to find procrun exes (procsrv.exe or procmgr.exe) on extracting binary commons-daemon-1.0.10-bin.zip</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-260</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description></description>
                <environment></environment>
        <key id="12610861">DAEMON-260</key>
            <summary>unable to find procrun exes (procsrv.exe or procmgr.exe) on extracting binary commons-daemon-1.0.10-bin.zip</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="shanthi">shanthi thomas</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Oct 2012 19:23:25 +0000</created>
                <updated>Mon, 8 Oct 2012 23:44:07 +0000</updated>
                            <resolved>Mon, 8 Oct 2012 23:44:07 +0000</resolved>
                                    <version>1.0.10</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13471961" author="sebb@apache.org" created="Mon, 8 Oct 2012 23:44:07 +0000"  >&lt;p&gt;The top-level bin archives are for the Java binaries only.&lt;/p&gt;

&lt;p&gt;Native binaries are under the appropriate subdirectory; only Windows is currently provided.&lt;/p&gt;

&lt;p&gt;P.S. In future, please ask on the user list first.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>245631</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i06c9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34920</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-257] jsvc unable to find Java home on Ubuntu/Debian</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-257</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;On most modern Ubuntu and Debian systems, JAVA_HOME for the default Java executable lives at /usr/lib/jvm/default-java/. However, jsvc does not search here for a Java home in location.c. With a simple patch (attached), this problem can be easily fixed. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 11.10 amd64, Open JDK 6.&lt;/p&gt;</environment>
        <key id="12605612">DAEMON-257</key>
            <summary>jsvc unable to find Java home on Ubuntu/Debian</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="rfkrocktk">TK Kocheran</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Thu, 30 Aug 2012 22:53:43 +0000</created>
                <updated>Wed, 21 Nov 2012 08:32:07 +0000</updated>
                            <resolved>Wed, 21 Nov 2012 08:32:07 +0000</resolved>
                                    <version>1.0.10</version>
                                    <fixVersion>1.0.11</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                                                    <timeoriginalestimate seconds="0">0h</timeoriginalestimate>
                            <timeestimate seconds="0">0h</timeestimate>
                                        <comments>
                            <comment id="13445386" author="rfkrocktk" created="Thu, 30 Aug 2012 22:55:47 +0000"  >&lt;p&gt;The patch for the issue. All it requires is one line added to location.c. It has been tested and works. &lt;/p&gt;</comment>
                            <comment id="13501766" author="mturk@apache.org" created="Wed, 21 Nov 2012 08:32:07 +0000"  >&lt;p&gt;Added both /usr/lib/jvm/default-java and /usr/lib/jvm/java to location_home search path.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12543180" name="ubuntu-debian.patch" size="41" author="rfkrocktk" created="Thu, 30 Aug 2012 22:55:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244879</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05ujr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32046</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-255] jsvc cannot find libcap.so on rhel</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-255</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Like &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-242&quot; title=&quot;jsvc cannot find libcap.so on debian-based distributions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-242&quot;&gt;&lt;del&gt;DAEMON-242&lt;/del&gt;&lt;/a&gt; , jsvc will not start:&lt;/p&gt;

&lt;p&gt;{{&lt;br/&gt;
Attemtping to load library /lib/libcap.so.2&lt;br/&gt;
Attemtping to load library /lib/libcap.so.1&lt;br/&gt;
Attemtping to load library /lib/libcap.so&lt;br/&gt;
Attemtping to load library /usr/lib/libcap.so.2&lt;br/&gt;
Attemtping to load library /usr/lib/libcap.so.1&lt;br/&gt;
Attemtping to load library /usr/lib/libcap.so&lt;br/&gt;
failed loading capabilities library &amp;#8211; /usr/lib/libcap.so: cannot open shared object file: No such file or directory.&lt;br/&gt;
Cannot set group id for user &apos;tomcat&apos;&lt;br/&gt;
set_user_group failed for user &apos;tomcat&apos;&lt;br/&gt;
Service exit with a return value of 4&lt;br/&gt;
}}&lt;/p&gt;

&lt;p&gt;{{&lt;br/&gt;
ls -l /lib*/libcap* /usr/&lt;b&gt;/libcap&lt;/b&gt;&lt;br/&gt;
lrwxrwxrwx 1 root root    11 Sep 10  2007 /lib/libcap.so -&amp;gt; libcap.so.1&lt;br/&gt;
lrwxrwxrwx 1 root root    14 Sep 10  2007 /lib/libcap.so.1 -&amp;gt; libcap.so.1.10&lt;br/&gt;
-rwxr-xr-x 1 root root 11560 Mar 14  2007 /lib/libcap.so.1.10&lt;br/&gt;
lrwxrwxrwx 1 root root    11 Sep 10  2007 /lib64/libcap.so -&amp;gt; libcap.so.1&lt;br/&gt;
lrwxrwxrwx 1 root root    14 Sep 10  2007 /lib64/libcap.so.1 -&amp;gt; libcap.so.1.10&lt;br/&gt;
-rwxr-xr-x 1 root root 17384 Mar 14  2007 /lib64/libcap.so.1.10&lt;br/&gt;
}}&lt;/p&gt;

&lt;p&gt;(formatting doesn&apos;t work: that&apos;s /usr/STAR/libcapSTAR in the ls)&lt;/p&gt;

&lt;p&gt;If I symlink &lt;tt&gt;/usr/lib/libcap.so -&amp;gt; /lib64/libcap.so&lt;/tt&gt; then it starts and seems to work fine. This did not happen in 1.0.7&lt;/p&gt;

&lt;p&gt;Following issue links from &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-242&quot; title=&quot;jsvc cannot find libcap.so on debian-based distributions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-242&quot;&gt;&lt;del&gt;DAEMON-242&lt;/del&gt;&lt;/a&gt; I tried rerunning autoconf locally. But there is no -lcap anywhere and ldd doesn&apos;t show it.&lt;/p&gt;

&lt;p&gt;Perhaps you just need to add /lib64 into the dlopen loop?&lt;/p&gt;</description>
                <environment>&lt;p&gt;uname -a&lt;br/&gt;
Linux myhost 2.6.18-308.8.2.el5 #1 SMP Tue Jun 12 09:58:12 EDT 2012 x86_64 x86_64 x86_64 GNU/Linux&lt;/p&gt;

&lt;p&gt;cat /etc/redhat-release &lt;br/&gt;
CentOS release 5.8 (Final)&lt;/p&gt;</environment>
        <key id="12603527">DAEMON-255</key>
            <summary>jsvc cannot find libcap.so on rhel</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jja@ucar.edu">John Allison</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Aug 2012 23:04:08 +0000</created>
                <updated>Wed, 21 Nov 2012 08:16:38 +0000</updated>
                            <resolved>Wed, 21 Nov 2012 08:16:38 +0000</resolved>
                                    <version>1.0.10</version>
                                    <fixVersion>1.0.11</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13436091" author="jja@ucar.edu" created="Thu, 16 Aug 2012 16:50:29 +0000"  >&lt;p&gt;Yes, adding the 64 bit locations to &lt;tt&gt;.../unix/native/jsvc-unix.c&lt;/tt&gt; seems to have worked:&lt;/p&gt;

&lt;p&gt;{{&lt;br/&gt;
static const char *libcap_locs[] = &lt;/p&gt;
{
    &quot;/lib64/libcap.so.2&quot;,
    &quot;/lib64/libcap.so.1&quot;,
    &quot;/lib64/libcap.so&quot;,
    &quot;/lib/libcap.so.2&quot;,
    &quot;/lib/libcap.so.1&quot;,
    &quot;/lib/libcap.so&quot;,
    &quot;/usr/lib64/libcap.so.2&quot;,
    &quot;/usr/lib64/libcap.so.1&quot;,
    &quot;/usr/lib64/libcap.so&quot;,
    &quot;/usr/lib/libcap.so.2&quot;,
    &quot;/usr/lib/libcap.so.1&quot;,
    &quot;/usr/lib/libcap.so&quot;,
    NULL
};
}}</comment>
                            <comment id="13436097" author="jja@ucar.edu" created="Thu, 16 Aug 2012 16:55:44 +0000"  >&lt;p&gt;trunk seems to have gone (back?) to &lt;tt&gt;-lcap&lt;/tt&gt; ??&lt;/p&gt;</comment>
                            <comment id="13501757" author="mturk@apache.org" created="Wed, 21 Nov 2012 08:16:38 +0000"  >&lt;p&gt;Fixed in the trunk and will be part of 1.0.11&lt;br/&gt;
Now we favor search for /lib64/libcap.* /usr/lib64/libcap.* in case the jsvc is compiled as 64-bit&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>258992</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l72v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121797</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-254] Logfile corrupted. Service won&apos;t start until logfile is deleted.</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-254</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Sometimes trying start the service fails (it seems to stop automatically) until the logfile is deleted. The file seems to be corrupt, but I could not determine what&apos;s wrong yet.&lt;/p&gt;

&lt;p&gt;&quot;Interestingly&quot;, notepad.exe displays the logfile as usual, while other tools (e.g. Wordpad, Notepad++) report an error or show an empty file. Eclipse text editor reports &quot;error retrieving content description&quot;.&lt;/p&gt;

&lt;p&gt;The last entry in the logfile shown by notepad.exe is &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  Commons Daemon procrun (1.0.10.0 32-bit) started&quot;.&lt;/p&gt;

&lt;p&gt;The bug is not present in version 1.0.9.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 64-bit, 32-bit prunsrv.exe&lt;/p&gt;</environment>
        <key id="12596359">DAEMON-254</key>
            <summary>Logfile corrupted. Service won&apos;t start until logfile is deleted.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ara43">Hannes Schwarz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Jun 2012 07:57:29 +0000</created>
                <updated>Wed, 21 Nov 2012 08:14:49 +0000</updated>
                            <resolved>Wed, 21 Nov 2012 08:14:49 +0000</resolved>
                                    <version>1.0.10</version>
                                    <fixVersion>1.0.11</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13501755" author="mturk@apache.org" created="Wed, 21 Nov 2012 08:14:49 +0000"  >&lt;p&gt;Fixed in the trunk by using file flush function on log write.&lt;br/&gt;
This should ensure data is written to disk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>258993</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l733:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-253] pidfile directory gets not created when starting jsvc with the -user option and -pidfile /var/run/pidfile_dir/pidfile</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-253</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When specifying a pidfile which resides in its own pidfile directory (e.g. /var/run/pidfile_dir/pidfile.pid) together with the -user option the pidfile directory will not be created thus an error is thrown because the pidfile cannot be written.&lt;/p&gt;

&lt;p&gt;Leaving the -user option and running jsvc as root works.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 10.04.4 LTS&lt;br/&gt;
java version &quot;1.7.0_04&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.7.0_04-b20)&lt;br/&gt;
Java HotSpot(TM) Client VM (build 23.0-b21, mixed mode)&lt;/p&gt;</environment>
        <key id="12558782">DAEMON-253</key>
            <summary>pidfile directory gets not created when starting jsvc with the -user option and -pidfile /var/run/pidfile_dir/pidfile</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fpauser">Falk Pauser</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 May 2012 13:24:25 +0000</created>
                <updated>Tue, 20 Nov 2012 06:42:06 +0000</updated>
                            <resolved>Tue, 20 Nov 2012 06:42:06 +0000</resolved>
                                    <version>1.0.10</version>
                                    <fixVersion>1.0.11</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13500866" author="mturk@apache.org" created="Tue, 20 Nov 2012 06:42:06 +0000"  >&lt;p&gt;Added intermediate directory path creation function.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>258764</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l3af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121183</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-252] [procrun] Thread Dump command fails with &quot;Unable to open the Event Mutex&quot;</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-252</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The issue was reported on users&amp;lt;at&amp;gt;tomcat.a.o. I&apos;ve confirmed that it is reproducible.&lt;br/&gt;
The thread:&lt;br/&gt;
&lt;a href=&quot;http://tomcat.markmail.org/thread/r74penaeymdmeeic&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tomcat.markmail.org/thread/r74penaeymdmeeic&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://marc.info/?t=133839294900003&amp;amp;r=1&amp;amp;w=2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://marc.info/?t=133839294900003&amp;amp;r=1&amp;amp;w=2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To reproduce:&lt;br/&gt;
1. Install Tomcat 7.0.27. It contains Commons Daemon procrun 1.0.10.0.&lt;br/&gt;
I tested with 32-bit versions on Windows 7 and Windows XP.&lt;br/&gt;
2. Start the service and service monitor application. The latter has to be run as administrator under Windows 7.&lt;br/&gt;
3. Right-click tray icon and select &quot;Thread Dump&quot; from popup menu.&lt;br/&gt;
4. A message box appears:&lt;br/&gt;
---------------------------&lt;br/&gt;
Application System Error&lt;br/&gt;
---------------------------&lt;br/&gt;
&#1053;&#1077; &#1091;&#1076;&#1072;&#1077;&#1090;&#1089;&#1103; &#1085;&#1072;&#1081;&#1090;&#1080; &#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1085;&#1099;&#1081; &#1092;&#1072;&#1081;&#1083;.&lt;/p&gt;

&lt;p&gt;Unable to open the Event Mutex&lt;br/&gt;
---------------------------&lt;br/&gt;
&#1054;&#1050;   &lt;br/&gt;
---------------------------&lt;/p&gt;

&lt;p&gt;The first line of the message comes from OS and means &quot;The system can not find the file specified.&quot;&lt;/p&gt;

&lt;p&gt;Enabling debug logging does not provide any additional information. The issue is reproducible under Windows XP, so UAC is not involved.&lt;/p&gt;

&lt;p&gt;According to the original reporter a workaround is use the &quot;jstack&quot; utility that comes with JDK. Other recipes can be found in &lt;a href=&quot;http://wiki.apache.org/tomcat/HowTo#How_do_I_obtain_a_thread_dump_of_my_running_webapp_.3F&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Tomcat FAQ&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 SP1, Windows XP SP3&lt;/p&gt;</environment>
        <key id="12558767">DAEMON-252</key>
            <summary>[procrun] Thread Dump command fails with &quot;Unable to open the Event Mutex&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kkolinko">Konstantin Kolinko</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 May 2012 11:55:48 +0000</created>
                <updated>Wed, 21 Nov 2012 10:19:53 +0000</updated>
                            <resolved>Wed, 21 Nov 2012 10:19:38 +0000</resolved>
                                    <version>1.0.10</version>
                                    <fixVersion>1.0.11</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13295665" author="sebb@apache.org" created="Fri, 15 Jun 2012 14:00:37 +0000"  >&lt;p&gt;It looks like the thread Dump uses the the following method to implement the function:&lt;/p&gt;

&lt;p&gt;prunmgr.c:static void signalService(LPCWSTR szServiceName)&lt;/p&gt;

&lt;p&gt;This creates the String en=&quot;Global\&amp;lt;szServiceName&amp;gt;SIGNAL&quot; which it then processes as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (i = 7; i &amp;lt; lstrlenW(en); i++) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (en[i] &amp;gt;= L&lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt; &amp;amp;&amp;amp; en[i] &amp;lt;= L&lt;span class=&quot;code-quote&quot;&gt;&apos;z&apos;&lt;/span&gt;)
        en[i] = en[i] - 32;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;i.e. it (crudely) converts the service name to UPPER case.&lt;/p&gt;

&lt;p&gt;The event is then created from the transformed name.&lt;/p&gt;


&lt;p&gt;As far as I can tell, the event is created in the following method:&lt;/p&gt;

&lt;p&gt;prunsrv.c:void WINAPI serviceMain(DWORD argc, LPTSTR *argv)&lt;/p&gt;

&lt;p&gt;This generates the same basic event name, but then processes it as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (i = 7; i &amp;lt; lstrlenW(en); i++) {
    en[i] = towlower(en[i]);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;i.e. it converts the service name (and &quot;SIGNAL&quot; suffix) part of the event name to lower case.&lt;/p&gt;

&lt;p&gt;This could explain why the event is not found.&lt;/p&gt;

&lt;p&gt;Not sure why the service name case needs to be changed at all; perhaps the conversion could be dropped in both cases?&lt;/p&gt;

&lt;p&gt;Or if the case does need to be changed, the same transformation should be used in both cases.&lt;br/&gt;
Also, the transformation should probably only be applied to the service name (and not the &quot;SIGNAL&quot; suffix).&lt;/p&gt;</comment>
                            <comment id="13501832" author="mturk@apache.org" created="Wed, 21 Nov 2012 10:19:38 +0000"  >&lt;p&gt;Fixed in the trunk.&lt;br/&gt;
Ensured that event name is the same in both applications.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>259017</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0laaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122317</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-251] AttachConsole doesn&apos;t exists in kernel32.dll - Windows 2000</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-251</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When I try to install service or start etc i get the error &quot;AttachConsole doesn&apos;t exists in kernel32.dll&quot;. This method doesn&apos;t exists in Windows 2000&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 2000&lt;/p&gt;</environment>
        <key id="12558080">DAEMON-251</key>
            <summary>AttachConsole doesn&apos;t exists in kernel32.dll - Windows 2000</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="chuchiperriman">Perriman</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 May 2012 10:56:33 +0000</created>
                <updated>Sat, 26 May 2012 16:02:42 +0000</updated>
                            <resolved>Sat, 26 May 2012 16:02:42 +0000</resolved>
                                    <version>1.0.10</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13284006" author="mturk@apache.org" created="Sat, 26 May 2012 16:02:42 +0000"  >&lt;p&gt;Windows 2000 is not supported OS.&lt;br/&gt;
Anything lower then XP/SP2 will refuse to load.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>293660</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tksv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170679</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-250] Dropping privileges &quot;too late&quot;</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-250</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When using &quot;&lt;tt&gt;-user&lt;/tt&gt;&quot; argument for &quot;&lt;tt&gt;jsvc&lt;/tt&gt;&quot; controlled (child) process runs as given user. Alas the privileges dropping was done after several critical initializations already have been done.&lt;/p&gt;

&lt;p&gt;Consider &quot;&lt;tt&gt;-user www&lt;/tt&gt;&quot;, while process started as &quot;&lt;tt&gt;root&lt;/tt&gt;&quot; and this code:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;                Preferences userRoot = null;&lt;br/&gt;
                try {&lt;br/&gt;
                        userRoot = Preferences.userRoot();&lt;br/&gt;
                } catch (Exception e) {&lt;br/&gt;
                        e.printStackTrace();&lt;br/&gt;
                } finally {&lt;br/&gt;
                        System.out.println(&quot;Prefs userRoot: &quot; + ((null != userRoot)?userRoot.toString():&quot;null&quot;));&lt;br/&gt;
                }&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Output (stderr) is:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;03.05.2012 11:00:31 java.util.prefs.FileSystemPreferences$2 run&lt;br/&gt;
WARNUNG: Couldn&apos;t create user preferences directory. User preferences are unusable.&lt;br/&gt;
03.05.2012 11:00:31 java.util.prefs.FileSystemPreferences$2 run&lt;br/&gt;
WARNUNG: java.io.IOException: Permission denied&lt;br/&gt;
Exception in thread &quot;Thread-2&quot; java.lang.SecurityException: Could not lock User prefs. Lock file access denied.&lt;br/&gt;
	at java.util.prefs.FileSystemPreferences.checkLockFile0ErrorCode(FileSystemPreferences.java:936)&lt;br/&gt;
	at java.util.prefs.FileSystemPreferences.lockFile(FileSystemPreferences.java:925)&lt;br/&gt;
	at java.util.prefs.FileSystemPreferences.sync(FileSystemPreferences.java:731)&lt;br/&gt;
	at java.util.prefs.FileSystemPreferences.flush(FileSystemPreferences.java:824)&lt;br/&gt;
	at java.util.prefs.FileSystemPreferences.syncWorld(FileSystemPreferences.java:468)&lt;br/&gt;
	at java.util.prefs.FileSystemPreferences.access$1200(FileSystemPreferences.java:50)&lt;br/&gt;
	at java.util.prefs.FileSystemPreferences$5$1.run(FileSystemPreferences.java:446)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;tt&gt;ktrace&lt;/tt&gt;-ing the example clearly shows the process is trying to access &lt;tt&gt;/root/.java/.userPrefs&lt;/tt&gt; (and below), although according to &lt;tt&gt;www&lt;/tt&gt; being the targeted runtime user this should be &lt;tt&gt;~www/.java/.userPrefs&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I wouldn&apos;t mind, if this wouldn&apos;t render usage of &lt;tt&gt;java.util.prefs.*&lt;/tt&gt; unusable. I&apos;m running a Tomcat with Nexus inside and the latter obviously tries to store preferences &quot;the java way&quot;. This seems to be pretty impossible when Tomcat is started using &lt;tt&gt;jsvc&lt;/tt&gt; (as it is per default in FreeBSD 8.3-RELEASE for Tomcat 7).&lt;/p&gt;</description>
                <environment>&lt;p&gt;FreeBSD 8.3-RELEASE, OpenJDK 1.6.0_30-b24&lt;/p&gt;</environment>
        <key id="12553724">DAEMON-250</key>
            <summary>Dropping privileges &quot;too late&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pitpalme">Peter Palmreuther</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 May 2012 09:25:27 +0000</created>
                <updated>Thu, 31 May 2012 21:37:21 +0000</updated>
                            <resolved>Thu, 31 May 2012 21:37:21 +0000</resolved>
                                    <version>1.0.10</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13267693" author="mturk@apache.org" created="Thu, 3 May 2012 19:00:15 +0000"  >&lt;p&gt;You should not depend on users home dir because the entire purpose of jsvc is to&lt;br/&gt;
switch the user, so the home changes.&lt;br/&gt;
We must switch user after the init is done, otherwise there&apos;s no point of having&lt;br/&gt;
the daemon at the first place.&lt;/p&gt;

&lt;p&gt;You can try with setting&lt;br/&gt;
export HOME=/home/www (or whatever)&lt;br/&gt;
./jsvc ...&lt;/p&gt;

&lt;p&gt;(presuming that Java&apos;s Preferences use user.home for that)&lt;br/&gt;
However those files will probably (if written) be owned by root until the user is changed.&lt;/p&gt;</comment>
                            <comment id="13286480" author="kkolinko" created="Thu, 31 May 2012 11:15:15 +0000"  >&lt;p&gt;To expand the previous comment.&lt;/p&gt;

&lt;p&gt;One of purposes of jsvc is to allow Apache Tomcat to bind to port 80. To allow that the init() method of the server must be called with root privileges so that it can open ServerSocket on that port. After that the user is switched and start() is performed as common user.&lt;/p&gt;

&lt;p&gt;Thus I agree that this cannot be fixed.&lt;/p&gt;</comment>
                            <comment id="13286975" author="pitpalme" created="Thu, 31 May 2012 21:31:45 +0000"  >&lt;p&gt;Just to make this clear: &lt;b&gt;I&lt;/b&gt; don&apos;t depend on users home dir. It&apos;s Java Runtime itself (java.util.prefs to be precisely).&lt;/p&gt;

&lt;p&gt;As I&apos;m running Tomcat 7 on FreeBSD and it&apos;s start script does not offer to modify environment using &quot;export HOME=...&quot;.&lt;br/&gt;
I tried to add &quot;-Djava.util.prefs.userRoot=/home/www&quot; to parameter list, and it seemed to have worked out this issue.&lt;br/&gt;
I don&apos;t see any exception in log files and my simple test class also didn&apos;t report any error.&lt;/p&gt;

&lt;p&gt;Maybe this is something for FAQ / &quot;Runtime problems&quot;, as it is &lt;b&gt;not&lt;/b&gt; specific to &lt;em&gt;Tomcat&lt;/em&gt; or &lt;em&gt;FreeBSD&lt;/em&gt;, but something pretty general. Any daemon that changes user and - for whatever reason - makes use of &quot;java.util.prefs.*&quot; is about to have this problem. IMHO it&apos;s a (more or less reasonable) limitation jsvc introduces to a standard JVM (and I&apos;m using OpenJDK, so it&apos;s not solely an Oracle-JVM related problem).&lt;/p&gt;

&lt;p&gt;So ... Somehow sorry this cannot be fixed, albeit I admit this is for comprehensible reasons.&lt;/p&gt;</comment>
                            <comment id="13286979" author="pitpalme" created="Thu, 31 May 2012 21:37:21 +0000"  >&lt;p&gt;No chance to fix this, conflicting requirements (early privileged port binding vs. non-privileged file access based on user environment values =&amp;gt; environment changing setuid() cannot be done before Java is initialized).&lt;/p&gt;

&lt;p&gt;Workaround: make use of &apos;-Djava.util.prefs.userRoot=/home/www&apos;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>237928</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uz7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178845</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-249] Ref: HADOOP-8273 Update url for commons daemon ppc64 binary tarball</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-249</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The workaround is to obtain the src. zip file from this URL:&lt;br/&gt;
&lt;a href=&quot;http://archive.apache.org/dist/commons/daemon/source/commons-daemon-1.0.2-native-src.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://archive.apache.org/dist/commons/daemon/source/commons-daemon-1.0.2-native-src.zip&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and to build the above tar file for PPC64 on an IBM Power system.&lt;/p&gt;

&lt;p&gt;Details:&lt;br/&gt;
1. Download this file: &lt;a href=&quot;http://archive.apache.org/dist/commons/daemon/source/commons-daemon-1.0.2-native-src.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://archive.apache.org/dist/commons/daemon/source/commons-daemon-1.0.2-native-src.zip&lt;/a&gt; or the appropriate version for the build.&lt;br/&gt;
2. unzip the above downloaded file in a directory called /home/hadoop/commons (or any directory of your choice)&lt;br/&gt;
3. cd /home/hadoop/commons/commons-daemon-1.0.2-native-src/unix&lt;br/&gt;
4. Run ./configure&lt;br/&gt;
5. Build the jsvc binary by typing make&lt;br/&gt;
6. Copy the jsvc binary thatr was just built to a new directory called /home/hadoop/commons/commons-daemon-1.0.2-native-src/unix/build&lt;br/&gt;
7.Copy the following text files home/hadoop/commons/commons-daemon-1.0.2-native-src directory to the /home/hadoop/commons/commons-daemon-1.0.2-native-src/unix/build directory -&lt;br/&gt;
1. LICENSE.txt&lt;br/&gt;
2. NOTICE.txt&lt;br/&gt;
3. RELEASE-NOTES.txt&lt;br/&gt;
8. cd to the directory home/hadoop/commons/commons-daemon-1.0.2-native-src/unix/build&lt;br/&gt;
9. Create the binary tar file for IBM Power by issuing the following command:&lt;br/&gt;
tar -czvf commons-daemon-1.0.2-bin-linux-ppc64.tar.gz *&lt;br/&gt;
10. Copy the file to an appropriate directory where this can be accessed from the hadoop-common build:&lt;br/&gt;
11. For branch-1, edit the build.xml file on the build root to point to the binary tar file that was just built:&lt;br/&gt;
&amp;lt;property name=&quot;jsvc.location&quot; value=&quot;file:///home/hadoop/commons-daemon-1.0.2-bin-linux-ppc64.tar.gz&quot;/&amp;gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;IBM PowerPC + IBM Java 6.0 SR10 on RHEL 6.1&lt;/p&gt;</environment>
        <key id="12550743">DAEMON-249</key>
            <summary>Ref: HADOOP-8273 Update url for commons daemon ppc64 binary tarball</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kumarr">Kumar Ravi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Apr 2012 21:04:46 +0000</created>
                <updated>Thu, 2 May 2013 02:29:51 +0000</updated>
                            <resolved>Thu, 12 Apr 2012 23:21:21 +0000</resolved>
                                    <version>1.0.2</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13252961" author="sebb@apache.org" created="Thu, 12 Apr 2012 23:21:21 +0000"  >&lt;p&gt;Version 1.0.2 is very much out of date; the current release is 1.0.10.&lt;/p&gt;

&lt;p&gt;In any case, it&apos;s not possible to update existing releases.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12550719">HADOOP-8273</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>235607</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tku7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170685</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-248] jsvc does not expose java.rt.vmArgs monitor information for Java Attach API</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-248</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Run a process using jsvc.exec&lt;/p&gt;

&lt;p&gt;Then use the Attach API to locate the process.&lt;/p&gt;

&lt;p&gt;Note that java.rt.vmArgs are not available. See the attached program.&lt;/p&gt;

&lt;p&gt;            monitoredhost = MonitoredHost.getMonitoredHost(new HostIdentifier((String) null));&lt;br/&gt;
            set = monitoredhost.activeVms();&lt;br/&gt;
... iterate&lt;/p&gt;

&lt;p&gt;                    MonitoredVm monitoredvm = monitoredhost.getMonitoredVm(new VmIdentifier(s));&lt;br/&gt;
                    List&amp;lt;Monitor&amp;gt; l = monitoredvm.findByPattern(&quot;.*&quot;);&lt;br/&gt;
                    for (Monitor m : l) &lt;/p&gt;
{
                       System.out.println(&quot;&amp;gt; &quot; + m.getName() + &quot; &quot; + m.getValue());
                    }</description>
                <environment></environment>
        <key id="12548545">DAEMON-248</key>
            <summary>jsvc does not expose java.rt.vmArgs monitor information for Java Attach API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="genman">Elias Ross</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Mar 2012 20:26:31 +0000</created>
                <updated>Wed, 21 Nov 2012 08:59:54 +0000</updated>
                            <resolved>Wed, 21 Nov 2012 08:59:54 +0000</resolved>
                                    <version>1.0.2</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13240702" author="genman" created="Wed, 28 Mar 2012 20:28:40 +0000"  >&lt;p&gt;Test program. Run a process with jsvc first.&lt;/p&gt;</comment>
                            <comment id="13240711" author="genman" created="Wed, 28 Mar 2012 20:36:09 +0000"  >&lt;p&gt;Basically, the bug is a request. I need another way to attach to these processes.&lt;/p&gt;

&lt;p&gt;It might be that command line matching is done using Sigar.&lt;/p&gt;

&lt;p&gt;I may or may not develop a fix for this.&lt;/p&gt;</comment>
                            <comment id="13481219" author="mturk@apache.org" created="Mon, 22 Oct 2012 06:51:29 +0000"  >&lt;p&gt;Hmm,&lt;br/&gt;
If running as daemon under users account you might just be lacking enough karma to get the process data.&lt;br/&gt;
What happens if you run Test.java as root?&lt;/p&gt;</comment>
                            <comment id="13501783" author="mturk@apache.org" created="Wed, 21 Nov 2012 08:59:54 +0000"  >&lt;p&gt;Please use users or developers list for further assistance&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12520309" name="Test.java" size="2349" author="genman" created="Wed, 28 Mar 2012 20:28:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233642</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0awgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>61533</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-247] [debug] ( javajni.c:195 ) Invalid RuntimeLib should be a warning or error?</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-247</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When running Tomcat as a service under Windows (thus using Daemon/procrun), if you mess up the Java Virtual Machine path in the service configurator, it defaults to the JAVA_HOME JRE, which I suppose is okay (but can wreak havoc when you have multiple Java versions installed), except that it doesn&apos;t warn you about it. It tells you about it through a DEBUG message, instead, so you have to actually increase the logging detail and wade through more messages to even realize it happened:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:32:41&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1644) Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:32:41&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1648) Commons Daemon procrun (1.0.9.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:32:41&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1561) Running &apos;gr01in01tc70&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:32:41&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1345) Inside ServiceMain...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:32:41&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1089) Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:32:41&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:195 ) Invalid RuntimeLib &apos;D:\Java\jdk6\jre\bin\server\jvm.dll&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:32:41&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:197 ) Using Jre JavaHome &apos;C:\Program Files\Java\jre7&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:32:41&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:206 ) loading jvm &apos;C:\Program Files\Java\jre7\bin\server\jvm.dll&apos;&lt;/p&gt;

&lt;p&gt;After correcting the JVM path:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:46:13&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1644) Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:46:13&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1648) Commons Daemon procrun (1.0.9.0 64-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:46:13&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1561) Running &apos;gr01in01tc70&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:46:13&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1345) Inside ServiceMain...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:46:13&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  ( prunsrv.c:1089) Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2012-03-20 16:46:13&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:206 ) loading jvm &apos;C:\Program Files\Java\jre6\bin\server\jvm.dll&apos;&lt;/p&gt;

&lt;p&gt;IMO, this message should be a warning or even an error (preferable) so that server admins know right off the bat that they&apos;ve done something wrong. Otherwise bad things might happen.&lt;/p&gt;

&lt;p&gt;Whether or not it should quit instead of defaulting to the system default JRE is a different discussion, but I think the message should at least be changed to a warning or an error.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Server 2008 Service Pack 2, Java 6 update 31 and 7 update 3 installed on same machine. &lt;br/&gt;
Tomcat 7.0.26 (which uses Daemon 1.0.9).&lt;/p&gt;</environment>
        <key id="12547296">DAEMON-247</key>
            <summary>[debug] ( javajni.c:195 ) Invalid RuntimeLib should be a warning or error?</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="beamerblvd">Nick Williams</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Mar 2012 22:15:18 +0000</created>
                <updated>Wed, 21 Nov 2012 07:52:56 +0000</updated>
                            <resolved>Wed, 21 Nov 2012 07:52:56 +0000</resolved>
                                    <version>1.0.9</version>
                                    <fixVersion>1.0.11</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13237540" author="mturk@apache.org" created="Sat, 24 Mar 2012 14:10:13 +0000"  >&lt;p&gt;Not sure if &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; only would be enough.&lt;br/&gt;
Think we should exit as well in case explicit JVM path was given and not found.&lt;/p&gt;</comment>
                            <comment id="13237577" author="beamerblvd" created="Sat, 24 Mar 2012 15:51:02 +0000"  >&lt;p&gt;I can agree with that completely. It would certainly be the preferable behavior in our environment. And I imagine most other administrators of enterprise production systems would prefer it to fail loudly and obtrusively, instead of silently, when it has been configured incorrectly.&lt;/p&gt;</comment>
                            <comment id="13501748" author="mturk@apache.org" created="Wed, 21 Nov 2012 07:52:56 +0000"  >&lt;p&gt;Fixed in the SVN. Will be part of 1.0.11&lt;br/&gt;
In case explicit jvm.dll is specified and it does not exists procrun will exit with error.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232454</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l727:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121794</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-246] jsvc fails to load libcap.so.2 from /lib64</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-246</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I see this when running jsvc -debug ...&lt;/p&gt;

&lt;p&gt;Attemtping to load library /lib/libcap.so.2&lt;br/&gt;
Attemtping to load library /lib/libcap.so.1&lt;br/&gt;
Attemtping to load library /lib/libcap.so&lt;br/&gt;
Attemtping to load library /usr/lib/libcap.so.2&lt;br/&gt;
Attemtping to load library /usr/lib/libcap.so.1&lt;br/&gt;
Attemtping to load library /usr/lib/libcap.so&lt;br/&gt;
failed loading capabilities library &amp;#8211; /usr/lib/libcap.so: cannot open shared&lt;br/&gt;
object file: No such file or directory.&lt;/p&gt;

&lt;p&gt;This does not work on 64bit Fedora, as the lib directory is /lib64/.&lt;/p&gt;

&lt;p&gt;It also won&apos;t work if you&apos;re using a 32bit copy of jsvc on a 64bit copy of Debian, which has a similar problem (the 32bit copy of libcap.so.2 is found at /lib32/libcap.so.2).&lt;/p&gt;

&lt;p&gt;These alternative library locations are mentioned in the Linux filesystem hierarchy standard (&lt;a href=&quot;http://refspecs.linuxfoundation.org/FHS_2.3/fhs-2.3.html#LIBLTQUALGTALTERNATEFORMATESSENTIAL&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://refspecs.linuxfoundation.org/FHS_2.3/fhs-2.3.html#LIBLTQUALGTALTERNATEFORMATESSENTIAL&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;The hard-coded /lib and /usr/lib paths in jsvc are counter-productive in the environments mentioned, and also in environments where the user expects to be able to control the library search path with the LD_LIBRARY_PATH environment variable.  jsvc should be utilising the normal ld.so search path.  This can be achieved even with a desire to be able to load either version 1 or 2 of libcap (as requested in &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-234&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DAEMON-234&lt;/a&gt;) because you don&apos;t need to give a full path to dlopen, according to its man page on Linux:&lt;/p&gt;

&lt;p&gt;&quot;If filename contains a slash (&quot;/&quot;), then it is interpreted as a (relative or absolute) pathname.  Otherwise, the dynamic linker searches for the library as follows ... (see ld.so(8) for further details)&quot;&lt;/p&gt;

&lt;p&gt;So the issue can be resolved by simply making libcap_locs contain the desired filenames rather than pathnames.  Patch will be attached shortly.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Fedora Core 16 (x86_64, using an x86_64 jsvc), CentOS 5.5 (x86_86, using an x86_64 jsvc), Debian Squeeze (x86_64, using an i686 jsvc), Debian Wheezy (x86_64, using an i686 jsvc)&lt;/p&gt;</environment>
        <key id="12545522">DAEMON-246</key>
            <summary>jsvc fails to load libcap.so.2 from /lib64</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="emily middleton">Emily Middleton</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Mar 2012 15:55:34 +0000</created>
                <updated>Mon, 22 Oct 2012 06:45:40 +0000</updated>
                            <resolved>Mon, 22 Oct 2012 06:45:40 +0000</resolved>
                                    <version>1.0.10</version>
                                    <fixVersion>1.0.11</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>5</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13224448" author="emily middleton" created="Wed, 7 Mar 2012 15:57:10 +0000"  >&lt;p&gt;Let dlopen use the default search path for libraries&lt;/p&gt;</comment>
                            <comment id="13278834" author="knshaum" created="Fri, 18 May 2012 14:40:13 +0000"  >&lt;p&gt;I ran afoul of this too, and I&apos;m dropping back to jsvc 1.0.9 for now as a result.&lt;/p&gt;

&lt;p&gt;I&apos;d suggest one minor change to the patch: check for libcap.so first, before the version-specific names. If a sysadmin has set up libcap.so as a symlink to indicate which version is preferred, jsvc should respect that preference.&lt;/p&gt;</comment>
                            <comment id="13481210" author="mturk@apache.org" created="Mon, 22 Oct 2012 06:45:40 +0000"  >&lt;p&gt;Patch applied.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12517413" name="patch.txt" size="471" author="emily middleton" created="Wed, 7 Mar 2012 15:57:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230708</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 2 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0awh3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>61534</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-244] prunsrv does not propagate exit code</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-244</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;In order to perform recovery actions (e.g. restart service) the Windows Service Controller needs to detect abnormal program terminations (failures). The Service controller detects a failure if either the service process crashes or the process terminates with a non-zero exit code.&lt;/p&gt;

&lt;p&gt;For my Java server application I want to define recovery actions for the following conditions:&lt;br/&gt;
1) VM crash&lt;br/&gt;
2) Error was thrown (e.g. OutOfMemoryError)&lt;br/&gt;
3) System.exit() with non-zero exit code&lt;/p&gt;

&lt;p&gt;When using prunsrv as a wrapper, I observe the following behaviour:&lt;br/&gt;
1) VM crash is detected only when StartMode=jvm, otherwise the Service Controller ignores the failure situation&lt;br/&gt;
2) When an Error is thrown and StartMode=jvm, prunsrv does not terminate but seems to hang. Therefore, the Service Controller is not aware of the failure. For other StartModes, prunsrv terminates, but the Service Controller does not detect the failure.&lt;br/&gt;
3) When System.exit(42) is called, prunsrv terminates but the Service Controller does not detect the non-zero exit code. This applies for all StartModes.&lt;/p&gt;

&lt;p&gt;It seems to me as if prunsrv always terminates with exit code zero. But I expect the following behaviour:&lt;br/&gt;
1) VM crash with StartMode=jvm -&amp;gt; OK as it is now, but with other StartModes, prunsrv should terminate with a non-zero exit code in order to indicate the abnormal termination.&lt;br/&gt;
2) When an Error is thrown, prunsrv should terminate with a non-zero exit code in order to indicate the abnormal termination.&lt;br/&gt;
3) When System.exit() is called, prunsrv should terminate with the exit code passed to System.exit() (transparent behaviour), in order to let the application indicate a failure situation.&lt;/p&gt;

&lt;p&gt;With the current behaviour, it is not possible to let the Windows Service Controller perform recovery actions.&lt;/p&gt;</description>
                <environment>&lt;p&gt;MS Windows&lt;/p&gt;</environment>
        <key id="12544913">DAEMON-244</key>
            <summary>prunsrv does not propagate exit code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="peter.ehrbar">Peter Ehrbar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Mar 2012 10:58:53 +0000</created>
                <updated>Thu, 15 Nov 2012 22:15:19 +0000</updated>
                            <resolved>Mon, 22 Oct 2012 06:39:01 +0000</resolved>
                                    <version>1.0.10</version>
                                    <fixVersion>1.0.11</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13230989" author="peter.ehrbar" created="Fri, 16 Mar 2012 09:23:51 +0000"  >&lt;p&gt;I have attached a patch (to be applied on 1.0.10) that fixes the VM exit code propagation so that it meets my requirements. With this patch, it is possible to terminate a VM with a non-zero exit code, which is then detected and handled by the Windows Service Controller (e.g. automatically restart the service).&lt;/p&gt;</comment>
                            <comment id="13476958" author="mturk@apache.org" created="Tue, 16 Oct 2012 12:28:11 +0000"  >&lt;p&gt;Could you reattach the patch with &apos;diff -u&apos;&lt;/p&gt;</comment>
                            <comment id="13477003" author="peter.ehrbar" created="Tue, 16 Oct 2012 13:51:38 +0000"  >&lt;p&gt;patch generated with diff -u&lt;/p&gt;</comment>
                            <comment id="13477021" author="mturk@apache.org" created="Tue, 16 Oct 2012 14:10:36 +0000"  >&lt;p&gt;Patch looks fine.&lt;br/&gt;
You have tabs instead spaces but that&apos;s fine. I&apos;ll convert those to 4 spaces.&lt;/p&gt;

&lt;p&gt;I&apos;ll apply it to the trunk and should be part of next release.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="13481204" author="mturk@apache.org" created="Mon, 22 Oct 2012 06:39:01 +0000"  >&lt;p&gt;Patch applied.&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="13498261" author="jessh@ptc.com" created="Thu, 15 Nov 2012 19:24:10 +0000"  >&lt;p&gt;This is a rather serious gap.  Is there any possibility of getting 1.0.11 out the door soon to address this?&lt;/p&gt;</comment>
                            <comment id="13498269" author="garydgregory" created="Thu, 15 Nov 2012 19:35:50 +0000"  >&lt;p&gt;+1 to 1.0.11 to pick this up. &lt;/p&gt;</comment>
                            <comment id="13498319" author="mturk@apache.org" created="Thu, 15 Nov 2012 20:38:21 +0000"  >&lt;p&gt;Sure, next week. Monday.&lt;/p&gt;</comment>
                            <comment id="13498391" author="jessh@ptc.com" created="Thu, 15 Nov 2012 22:15:19 +0000"  >&lt;p&gt;Thank you!  Any early binaries for testing would be much appreciated as well.  &lt;span class=&quot;error&quot;&gt;&amp;#91;I don&amp;#39;t have a native Windows build environment set up at the moment.&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12615744">DAEMON-267</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12549303" name="exit_code_patch_on_1_0_10-u.txt" size="7121" author="peter.ehrbar" created="Tue, 16 Oct 2012 13:51:38 +0000"/>
                            <attachment id="12518638" name="exit_code_patch_on_1_0_10.txt" size="8656" author="peter.ehrbar" created="Fri, 16 Mar 2012 09:23:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230099</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0a2vj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>56739</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-242] jsvc cannot find libcap.so on debian-based distributions</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-242</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Debian-based distributions do not symlink the &quot;main&quot; shared object to the major version.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;On RHEL4u4:&lt;br/&gt;
$ ls -l /lib/libcap.so*&lt;br/&gt;
lrwxrwxrwx  1 root root    11 Jun 13  2007 /lib/libcap.so -&amp;gt; libcap.so.1&lt;br/&gt;
lrwxrwxrwx  1 root root    14 Jun 12  2007 /lib/libcap.so.1 -&amp;gt; libcap.so.1.10&lt;br/&gt;
-rwxr-xr-x  1 root root 11784 Oct  7  2006 /lib/libcap.so.1.10&lt;/p&gt;

&lt;p&gt;Notice libcap.so -&amp;gt; libcap.so.1&lt;/p&gt;


&lt;p&gt;On Debian 6.02:&lt;br/&gt;
$ ls -l /lib/libcap.so*&lt;br/&gt;
lrwxrwxrwx 1 root root    14 Jan 25 10:19 /lib/libcap.so.2 -&amp;gt; libcap.so.2.19&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;- 1 root root 16640 Aug 16  2010 /lib/libcap.so.2.19&lt;/p&gt;


&lt;p&gt;On Ubuntu 11.04:&lt;br/&gt;
$ ls -l /lib/libcap.so*&lt;br/&gt;
lrwxrwxrwx 1 root root    14 2011-07-16 09:52 /lib/libcap.so.2 -&amp;gt; libcap.so.2.20&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;- 1 root root 13816 2011-02-15 14:35 /lib/libcap.so.2.20&lt;/p&gt;

&lt;p&gt;Notice there is no libcap.so -&amp;gt; libcap.so.2&lt;/p&gt;

&lt;p&gt;Therefore, when jsvc attempts to load libcap.so, it fails...&lt;/p&gt;

&lt;p&gt;I see this when running jsvc -debug ...&lt;/p&gt;

&lt;p&gt;Attemtping to load library /lib/libcap.so&lt;br/&gt;
Attemtping to load library /usr/lib/libcap.so&lt;br/&gt;
failed loading capabilities library &amp;#8211; /usr/lib/libcap.so: cannot open shared object file: No such file or directory.&lt;br/&gt;
set_caps(CAPS) failed for user &apos;oncommand&apos;&lt;br/&gt;
Service exit with a return value of 4&lt;/p&gt;


&lt;p&gt;If I create the libcap.so -&amp;gt; libcap.so.2 symlink, it works.&lt;/p&gt;

&lt;p&gt;I&apos;m guessing the fix for this would be to load libcap.so, libcap.so.2, libcap.so.1 in progression to see if any work.&lt;/p&gt;

&lt;p&gt;(Note that I have performed the workaround I mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-241&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DAEMON-241&lt;/a&gt; to get this far.)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Debian 6.0.2&lt;br/&gt;
Ubuntu 11.04&lt;/p&gt;</environment>
        <key id="12543561">DAEMON-242</key>
            <summary>jsvc cannot find libcap.so on debian-based distributions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="philsttr">Phil Clay</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Feb 2012 20:50:22 +0000</created>
                <updated>Wed, 28 Nov 2012 19:18:34 +0000</updated>
                            <resolved>Thu, 23 Feb 2012 08:31:29 +0000</resolved>
                                    <version>1.0.9</version>
                                    <fixVersion>1.0.10</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13214407" author="mturk@apache.org" created="Thu, 23 Feb 2012 07:12:37 +0000"  >&lt;p&gt;Right, I was afraid that this feature would be actually useless in many cases.&lt;br/&gt;
The amount of possibilities is endless so it seems that a loop will be needed.&lt;/p&gt;
</comment>
                            <comment id="13214454" author="mturk@apache.org" created="Thu, 23 Feb 2012 08:31:29 +0000"  >&lt;p&gt;Fixed in the svn. Will be part of 1.0.10&lt;br/&gt;
The fix tries to load libcap.so.2, libcap.so.1, libcap.so in that order. If libcap still cannot be found the legacy syscall is used and error message logged.&lt;/p&gt;</comment>
                            <comment id="13505809" author="mhwood" created="Wed, 28 Nov 2012 19:18:34 +0000"  >&lt;p&gt;Of course Gentoo Linux does things differently.  /usr/lib/libcap.so is a linker script.  Dynamically loading it results in error because it&apos;s not a shared object library but a text file.&lt;/p&gt;

&lt;p&gt;johncock lib # head /var/log/tomcat-7/fix.log &lt;br/&gt;
failed loading capabilities library &amp;#8211; /usr/lib/libcap.so: invalid ELF header.&lt;br/&gt;
set_caps(CAPS) failed for user &apos;tomcat&apos;&lt;br/&gt;
Service exit with a return value of 4&lt;/p&gt;

&lt;p&gt;johncock lib # cat libcap.so&lt;br/&gt;
/* GNU ld script&lt;br/&gt;
   Since Gentoo has critical dynamic libraries in /lib, and the static versions&lt;br/&gt;
   in /usr/lib, we need to have a &quot;fake&quot; dynamic lib in /usr/lib, otherwise we&lt;br/&gt;
   run into linking problems.  This &quot;fake&quot; dynamic lib is a linker script that&lt;br/&gt;
   redirects the linker to the real lib.  And yes, this works in the cross-&lt;br/&gt;
   compiling scenario as the sysroot-ed linker will prepend the real path.&lt;/p&gt;

&lt;p&gt;   See bug &lt;a href=&quot;http://bugs.gentoo.org/4411&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugs.gentoo.org/4411&lt;/a&gt; for more info.&lt;br/&gt;
 */&lt;br/&gt;
OUTPUT_FORMAT ( elf64-x86-64 )&lt;br/&gt;
GROUP ( /lib64/libcap.so.2 )&lt;/p&gt;

&lt;p&gt;I had to move it and symlink /usr/lib/libcap.so -&amp;gt; /lib/libcap.so to get jsvc to proceed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12544961">HADOOP-8133</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>228800</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0s9wf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163080</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-241] configure incorrectly includes -lcap in the LIBS variable in Makedefs</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-241</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The unix/configure script included in commons-daemon-1.0.9-native-src.tar.gz incorrectly includes &quot;-lcap&quot; in the LIBS variable in the generated Makedefs file.&lt;/p&gt;

&lt;p&gt;This causes the version of libcap on the linker machine to be required at jsvc runtime.  (Which is what &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-234&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/DAEMON-234&lt;/a&gt; was trying to prevent)&lt;/p&gt;

&lt;p&gt;As a workaround, I ran autoconf to regenerate the configure script.  After doing so, the newly regenerated configure script will properly exclude -lcap from the LIBS variable in Makedefs when configure is executed.&lt;/p&gt;

&lt;p&gt;So, I believe autoconf needs to be executed to regenerate the configure script included in the source tarball.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12543560">DAEMON-241</key>
            <summary>configure incorrectly includes -lcap in the LIBS variable in Makedefs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="philsttr">Phil Clay</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Feb 2012 20:37:13 +0000</created>
                <updated>Thu, 23 Feb 2012 08:33:29 +0000</updated>
                            <resolved>Thu, 23 Feb 2012 08:33:29 +0000</resolved>
                                    <version>1.0.9</version>
                                    <fixVersion>1.0.10</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13214455" author="mturk@apache.org" created="Thu, 23 Feb 2012 08:33:29 +0000"  >&lt;p&gt;It was probably packaging error with old configure being cached. Anyhow fixed the issue by ensuring we only check for header not library. Also warning is shown if in configure stage if libcap headers cannot be found&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>228799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tjev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170454</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-240] Undocumented and inconsistent behaviour of multi-valued registry entries</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-240</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The behaviour of option processing for multi-valued registry entries is partly undocumented, and inconsistent.&lt;/p&gt;

&lt;p&gt;--Option and ++Option are only documented in the context of a single invocation of procrun.&lt;/p&gt;

&lt;p&gt;The documentation should be updated to clarify that ++Option can be used in a separate invocation of procrun (update service) to append values to the registry.&lt;/p&gt;

&lt;p&gt;==&lt;/p&gt;

&lt;p&gt;The documentation implies that --Option resets the value.&lt;br/&gt;
This is only true if the ++Option is not used at the same time - if the ++Option is used anywhere on the command-line, then all the options are appended to any existing value in the registry.&lt;/p&gt;

&lt;p&gt;The behaviour of mixed --Option and ++Option should either be fixed so that --Option clears any existing settings, or the existing behaviour should be documented.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12541398">DAEMON-240</key>
            <summary>Undocumented and inconsistent behaviour of multi-valued registry entries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Feb 2012 11:46:47 +0000</created>
                <updated>Mon, 6 Feb 2012 18:18:38 +0000</updated>
                            <resolved>Mon, 6 Feb 2012 15:59:45 +0000</resolved>
                                    <version>1.0.8</version>
                                    <fixVersion>1.0.9</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13201358" author="mturk@apache.org" created="Mon, 6 Feb 2012 15:59:45 +0000"  >&lt;p&gt;Resolved by ensuring that --option rests the parser state.&lt;br/&gt;
1. In case --option ++option ... is used the resulting&lt;br/&gt;
   value will be overwritten with those command line (combined)&lt;br/&gt;
2. In case ++option ++option ... is used the resulting&lt;br/&gt;
   value will be appended to existing one.&lt;br/&gt;
3. ++option=a --option=b will cause that any options on&lt;br/&gt;
   the command line before last &amp;#8211; are dropped.&lt;br/&gt;
   No error or no warning is reported in that case.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226686</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tjd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170446</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-239] prunsrv //ES (start) option not documented</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-239</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description></description>
                <environment></environment>
        <key id="12540395">DAEMON-239</key>
            <summary>prunsrv //ES (start) option not documented</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jan 2012 17:00:32 +0000</created>
                <updated>Mon, 30 Jan 2012 17:12:11 +0000</updated>
                            <resolved>Mon, 30 Jan 2012 17:12:11 +0000</resolved>
                                    <version>1.0.8</version>
                                    <fixVersion>1.0.9</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225808</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tj53:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170410</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-238] Behaviour of environment variables is not documented, and is unexpected</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-238</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The documentation does not currently state whether environment variables are processed before or after command-line options.&lt;/p&gt;

&lt;p&gt;It appears that they are processed &lt;b&gt;after&lt;/b&gt; any command-line options, at least in 1.0.7 amd 1.0.8.&lt;/p&gt;

&lt;p&gt;They completely override the corresponding command-line option in both versions.&lt;/p&gt;

&lt;p&gt;for example:&lt;/p&gt;

&lt;p&gt;set PR_JVMOPTION=-Da=1&lt;br/&gt;
prunsrv //US//Service --JvmOption -Da=2 ++JvmOption -Db=1&lt;/p&gt;

&lt;p&gt;results in -Da=1 only, as does&lt;/p&gt;

&lt;p&gt;set PR_JVMOPTION=-Da=1&lt;br/&gt;
prunsrv //US//Service --JvmOption -Da2=1 ++JvmOption -Db=1&lt;/p&gt;

&lt;p&gt;If this really is the intended behaviour, it should be documented as such.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540385">DAEMON-238</key>
            <summary>Behaviour of environment variables is not documented, and is unexpected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jan 2012 15:54:17 +0000</created>
                <updated>Mon, 6 Feb 2012 11:32:28 +0000</updated>
                            <resolved>Mon, 6 Feb 2012 11:32:28 +0000</resolved>
                                                    <fixVersion>1.0.9</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13201228" author="sebb@apache.org" created="Mon, 6 Feb 2012 11:32:28 +0000"  >&lt;p&gt;Updated doc.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225798</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 39 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tj7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170420</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-237] ++JvmOptions processed as --JvmOptions</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-237</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=52548&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=52548&lt;/a&gt; and &lt;a href=&quot;http://tomcat.markmail.org/thread/md3ibbv2w3mxtnb2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tomcat.markmail.org/thread/md3ibbv2w3mxtnb2&lt;/a&gt; for details&lt;/p&gt;</description>
                <environment>&lt;p&gt;XP 64-bit, XP 32-bit, Windows 7 64-bit&lt;/p&gt;</environment>
        <key id="12540277">DAEMON-237</key>
            <summary>++JvmOptions processed as --JvmOptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="markt">Mark Thomas</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Jan 2012 20:59:35 +0000</created>
                <updated>Thu, 2 Feb 2012 07:10:33 +0000</updated>
                            <resolved>Wed, 1 Feb 2012 14:37:22 +0000</resolved>
                                    <version>1.0.8</version>
                                    <fixVersion>1.0.9</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13196157" author="sebb@apache.org" created="Mon, 30 Jan 2012 14:58:04 +0000"  >&lt;p&gt;The linked Bugzilla issue expects to use ++JvmOptions to update the options across invocations of the prunsrv application.&lt;/p&gt;

&lt;p&gt;This is not documented as being supported, as far as I can tell, but does (sort of) work in 1.0.7.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;prunsrv107 //US//Service --JvmOptions -Da=1 =&amp;gt; sets -Da=1&lt;br/&gt;
prunsrv107 //US//Service ++JvmOptions -Db=2 =&amp;gt; adds -Db=2&lt;/p&gt;

&lt;p&gt;However the command-line:&lt;/p&gt;

&lt;p&gt;prunsrv107 //US//Service --JvmOptions -Da=1 ++JvmOptions -Db=2 =&amp;gt; adds -Da=1 -Db=2&lt;/p&gt;

&lt;p&gt;i.e. the presence of a single ++ option converts the entire line into an addition.&lt;br/&gt;
This is a bit unexpected.&lt;/p&gt;

&lt;p&gt;In the case of 1.0.8, each invocation command-line is treated as a separate update of the registry; the existing registry entries don&apos;t seem to be taken into account at all.&lt;/p&gt;

&lt;p&gt;The behaviour of previous versions was more flexible, however it was not self-consistent&lt;/p&gt;

&lt;p&gt;I suggest the behavior should be as follows for multi-valued registry entries:&lt;/p&gt;

&lt;p&gt;1) populate values from registry&lt;br/&gt;
2) merge in command-line options:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if --option is detected, replace current values with cmd-line value(s), i.e. reset them.&lt;/li&gt;
	&lt;li&gt;if ++option is detected, append cmd-line value(s) to current value(s)&lt;br/&gt;
Individual &amp;#8211; and ++ options can have multiple # or , separated values, these should be treated as a whole.&lt;br/&gt;
3) update registry with result.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13196217" author="sebb@apache.org" created="Mon, 30 Jan 2012 16:47:38 +0000"  >&lt;p&gt;The code in prunsrv.c depends on the order of entries in the _commands and _altcmds tables.&lt;/p&gt;

&lt;p&gt;Looks like some of the checks against lpCmdline-&amp;gt;dwCmdIndex were not updated when the option //ES (start) was added to _commands.&lt;/p&gt;

&lt;p&gt;Patch should fix the issue.&lt;/p&gt;</comment>
                            <comment id="13197871" author="mturk@apache.org" created="Wed, 1 Feb 2012 14:37:22 +0000"  >&lt;p&gt;Patch applied.&lt;br/&gt;
Like Sebastian said, the logic was not updated when new command was added.&lt;/p&gt;</comment>
                            <comment id="13198006" author="sebb@apache.org" created="Wed, 1 Feb 2012 18:01:12 +0000"  >&lt;p&gt;Maybe the code should use names (#define) rather than magic numbers?&lt;br/&gt;
This should make future maintenance easier, and help document them.&lt;/p&gt;</comment>
                            <comment id="13198571" author="mturk@apache.org" created="Thu, 2 Feb 2012 07:10:33 +0000"  >&lt;p&gt;Well, the 1.0.x branch is frozen for new features, and 1.1.x/2.0.x (trunk)&lt;br/&gt;
will have a java like command lines (from jsvc)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12512428" name="DAEMON-237.patch" size="719" author="sebb" created="Mon, 30 Jan 2012 16:47:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225690</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tj5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170414</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-236] --JvmOption in procrun.html page is not correct </title>
                <link>https://issues.apache.org/jira/browse/DAEMON-236</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;In the examples for command line arguments I read : &quot;--JvmOption=-Done=1 ++JvmOption=-Dtwo=2&quot;&lt;br/&gt;
but I think the parameter name should be &quot;JvmOptions&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12539923">DAEMON-236</key>
            <summary>--JvmOption in procrun.html page is not correct </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="emanuele.granieri">emanuele granieri</reporter>
                        <labels>
                            <label>JvmOptions</label>
                            <label>documentation</label>
                            <label>procrun</label>
                    </labels>
                <created>Thu, 26 Jan 2012 16:20:59 +0000</created>
                <updated>Mon, 30 Jan 2012 13:02:11 +0000</updated>
                            <resolved>Mon, 30 Jan 2012 13:02:11 +0000</resolved>
                                    <version>1.0.8</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12533315">DAEMON-230</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225426</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tkxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170701</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-235] When running java application via procrun (in jvm mode) an RMI thread triggers an EXCEPTION_ACCESS_VIOLATION</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-235</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When running java application via procrun (in jvm mode) an RMI thread triggers an EXCEPTION_ACCESS_VIOLATION&lt;br/&gt;
It happens with both with a series of VM tweaking options and no options at all.&lt;br/&gt;
Using the same options executing from a bat file (with java.exe) does not crash.&lt;br/&gt;
The crashing application is hosting an RMI registry at the moment of the crash. An rmi call to the application is probably triggering the crash.&lt;/p&gt;

&lt;p&gt;Adding an example hs_err_pid file. (Note: the java_home pointing elsewhere doesn&apos;t effect the result).&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x7824f786, pid=5876, tid=3656
#
# JRE version: 6.0_30-b12
# Java VM: Java HotSpot(TM) Server VM (20.5-b03 mixed mode windows-x86 )
# Problematic frame:
# C  [MFC80.DLL+0x7f786]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x20206c00):  JavaThread &quot;RMI TCP Connection(2)-192.168.56.101&quot; daemon [_thread_in_native, id=3656, stack(0x20ba0000,0x20c10000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x21301e90

Registers:
EAX=0x21301e74, EBX=0x22f83170, ECX=0x22f83170, EDX=0x00000000
ESP=0x20c0f0c8, EBP=0x20c0f154, ESI=0x20c0f1c4, EDI=0x00000004
EIP=0x7824f786, EFLAGS=0x00010202

Top of Stack: (sp=0x20c0f0c8)
0x20c0f0c8:   00000002 d8a81ade 00000004 20c0f1d4
0x20c0f0d8:   00000000 00000000 00000000 00000000
0x20c0f0e8:   00000000 20c0f110 206a0000 00000000
0x20c0f0f8:   00139f28 00000000 00000000 00000000
0x20c0f108:   00010000 00000027 20c0f06c 7712556e
0x20c0f118:   20c0f158 7c90e920 7c910060 ffffffff
0x20c0f128:   7c91005d 204cf1b7 206a0000 00000000
0x20c0f138:   22f83170 d92a86cf 00000004 20c0f0cc 

Instructions: (pc=0x7824f786)
0x7824f766:   78 ff 75 10 e8 70 98 fa ff 85 c0 59 59 75 0a b8
0x7824f776:   01 00 02 80 e9 39 04 00 00 ff 75 0c 8b 03 8b cb
0x7824f786:   ff 50 1c 85 c0 75 0a b8 ff ff 00 80 e9 21 04 00
0x7824f796:   00 8d 7d c8 a5 a5 a5 a5 33 ff 39 7d d4 74 18 83 


Register to memory mapping:

EAX=0x21301e74 is an unknown value
EBX=0x22f83170 is an unknown value
ECX=0x22f83170 is an unknown value
EDX=0x00000000 is an unknown value
ESP=0x20c0f0c8 is pointing into the stack for thread: 0x20206c00
EBP=0x20c0f154 is pointing into the stack for thread: 0x20206c00
ESI=0x20c0f1c4 is pointing into the stack for thread: 0x20206c00
EDI=0x00000004 is an unknown value


Stack: [0x20ba0000,0x20c10000],  sp=0x20c0f0c8,  free space=444k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [MFC80.DLL+0x7f786]  Ordinal3901+0x58
C  [cadxwrapper.dll+0x4e90]
C  [cadxwrapper.dll+0x519c]
C  [cadxwrapper.dll+0x133b]  Java_com_esko_webcenter_cadxserver_CadXJNIImpl_OpenDesign+0x3b
j  com.esko.webcenter.cadxserver.CadXServer.generateThumbnail(Ljava/lang/String;Ljava/lang/String;)V+21
v  ~StubRoutines::call_stub
V  [jvm.dll+0x10e3bd]
V  [jvm.dll+0x1a5711]
V  [jvm.dll+0x10e44d]
V  [jvm.dll+0x1185d3]
V  [jvm.dll+0x118f16]
V  [jvm.dll+0xc22ae]
C  [java.dll+0x7225]  Java_sun_reflect_NativeMethodAccessorImpl_invoke0+0x15
j  sun.reflect.NativeMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+87
j  sun.reflect.DelegatingMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+6
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+161
j  sun.rmi.server.UnicastServerRef.dispatch(Ljava/rmi/Remote;Ljava/rmi/server/RemoteCall;)V+242
j  sun.rmi.transport.Transport$1.run()Ljava/lang/Object;+23
v  ~StubRoutines::call_stub
V  [jvm.dll+0x10e3bd]
V  [jvm.dll+0x1a5711]
V  [jvm.dll+0x10e44d]
V  [jvm.dll+0xc68d4]
C  [java.dll+0x1061]  Java_java_security_AccessController_doPrivileged__Ljava_security_PrivilegedExceptionAction_2Ljava_security_AccessControlContext_2+0x17
j  sun.rmi.transport.Transport.serviceCall(Ljava/rmi/server/RemoteCall;)Z+163
j  sun.rmi.transport.tcp.TCPTransport.handleMessages(Lsun/rmi/transport/Connection;Z)V+185
j  sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0()V+685
j  sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run()V+50
j  java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Ljava/lang/Runnable;)V+59
j  java.util.concurrent.ThreadPoolExecutor$Worker.run()V+28
j  java.lang.Thread.run()V+11
v  ~StubRoutines::call_stub
V  [jvm.dll+0x10e3bd]
V  [jvm.dll+0x1a5711]
V  [jvm.dll+0x10e571]
V  [jvm.dll+0x10e5cb]
V  [jvm.dll+0xc07e9]
V  [jvm.dll+0x12dce4]
V  [jvm.dll+0x155fac]
C  [MSVCR71.dll+0x9565]  endthreadex+0xa0
C  [kernel32.dll+0xb729]  GetModuleFileNameA+0x1ba

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  com.esko.webcenter.cadxserver.CadXJNIImpl.OpenDesign(Ljava/lang/String;S)S+0
j  com.esko.webcenter.cadxserver.CadXServer.generateThumbnail(Ljava/lang/String;Ljava/lang/String;)V+21
v  ~StubRoutines::call_stub
j  sun.reflect.NativeMethodAccessorImpl.invoke0(Ljava/lang/reflect/Method;Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+0
j  sun.reflect.NativeMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+87
j  sun.reflect.DelegatingMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+6
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+161
j  sun.rmi.server.UnicastServerRef.dispatch(Ljava/rmi/Remote;Ljava/rmi/server/RemoteCall;)V+242
j  sun.rmi.transport.Transport$1.run()Ljava/lang/Object;+23
v  ~StubRoutines::call_stub
j  java.security.AccessController.doPrivileged(Ljava/security/PrivilegedExceptionAction;Ljava/security/AccessControlContext;)Ljava/lang/Object;+0
j  sun.rmi.transport.Transport.serviceCall(Ljava/rmi/server/RemoteCall;)Z+163
j  sun.rmi.transport.tcp.TCPTransport.handleMessages(Lsun/rmi/transport/Connection;Z)V+185
j  sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0()V+685
j  sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run()V+50
j  java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Ljava/lang/Runnable;)V+59
j  java.util.concurrent.ThreadPoolExecutor$Worker.run()V+28
j  java.lang.Thread.run()V+11
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( =&amp;gt; current thread )
  0x201c7400 JavaThread &quot;Thread-1&quot; daemon [_thread_blocked, id=5240, stack(0x20c80000,0x20cf0000)]
  0x1fd31c00 JavaThread &quot;RMI Scheduler(0)&quot; daemon [_thread_blocked, id=2532, stack(0x20c10000,0x20c80000)]
=&amp;gt;0x20206c00 JavaThread &quot;RMI TCP Connection(2)-192.168.56.101&quot; daemon [_thread_in_native, id=3656, stack(0x20ba0000,0x20c10000)]
  0x20179c00 JavaThread &quot;RMI TCP Connection(1)-127.0.0.1&quot; daemon [_thread_in_native, id=808, stack(0x20b30000,0x20ba0000)]
  0x00936c00 JavaThread &quot;DestroyJavaVM&quot; [_thread_blocked, id=5476, stack(0x00950000,0x009c0000)]
  0x1fd5d400 JavaThread &quot;RMI TCP Accept-2052&quot; daemon [_thread_in_native, id=2944, stack(0x289f0000,0x28a60000)]
  0x1fd5d800 JavaThread &quot;GC Daemon&quot; daemon [_thread_blocked, id=1404, stack(0x20450000,0x204c0000)]
  0x20206400 JavaThread &quot;RMI Reaper&quot; [_thread_blocked, id=4716, stack(0x203e0000,0x20450000)]
  0x20194000 JavaThread &quot;RMI TCP Accept-0&quot; daemon [_thread_in_native, id=3924, stack(0x20370000,0x203e0000)]
  0x1fcfcc00 JavaThread &quot;Low Memory Detector&quot; daemon [_thread_blocked, id=4032, stack(0x20070000,0x200e0000)]
  0x1fcfb400 JavaThread &quot;C2 CompilerThread1&quot; daemon [_thread_blocked, id=5072, stack(0x20000000,0x20070000)]
  0x1fcec800 JavaThread &quot;C2 CompilerThread0&quot; daemon [_thread_blocked, id=4564, stack(0x1ff90000,0x20000000)]
  0x1fceb400 JavaThread &quot;Attach Listener&quot; daemon [_thread_blocked, id=4260, stack(0x1ff20000,0x1ff90000)]
  0x1fce9c00 JavaThread &quot;Signal Dispatcher&quot; daemon [_thread_blocked, id=1652, stack(0x1feb0000,0x1ff20000)]
  0x1fcdac00 JavaThread &quot;Finalizer&quot; daemon [_thread_blocked, id=2104, stack(0x1fe40000,0x1feb0000)]
  0x1fcd6000 JavaThread &quot;Reference Handler&quot; daemon [_thread_blocked, id=4636, stack(0x1fdd0000,0x1fe40000)]

Other Threads:
  0x1fcd2400 VMThread [stack: 0x1fd60000,0x1fdd0000] [id=5812]
  0x1fcff000 WatcherThread [stack: 0x200e0000,0x20150000] [id=5028]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 7488K, used 3973K [0x03ab0000, 0x042c0000, 0x0bab0000)
  eden space 6720K,  59% used [0x03ab0000, 0x03e91780, 0x04140000)
  from space 768K,   0% used [0x04140000, 0x04140000, 0x04200000)
  to   space 768K,   0% used [0x04200000, 0x04200000, 0x042c0000)
 tenured generation   total 16384K, used 503K [0x0bab0000, 0x0cab0000, 0x1bab0000)
   the space 16384K,   3% used [0x0bab0000, 0x0bb2de10, 0x0bb2e000, 0x0cab0000)
 compacting perm gen  total 16384K, used 5029K [0x1bab0000, 0x1cab0000, 0x1fab0000)
   the space 16384K,  30% used [0x1bab0000, 0x1bf99438, 0x1bf99600, 0x1cab0000)
No shared spaces configured.

Code Cache  [0x009f0000, 0x00c30000, 0x039f0000)
 total_blobs=164 nmethods=54 adapters=73 free_code_cache=49934656 largest_free_block=12864

Dynamic libraries:
0x00400000 - 0x00417000 	C:\Esko\new_webcenter\cadx\wcr_cadx_srv.exe
0x7c900000 - 0x7c9b2000 	C:\WINDOWS\system32\ntdll.dll
0x7c800000 - 0x7c8f6000 	C:\WINDOWS\system32\kernel32.dll
0x77dd0000 - 0x77e6b000 	C:\WINDOWS\system32\ADVAPI32.dll
0x77e70000 - 0x77f03000 	C:\WINDOWS\system32\RPCRT4.dll
0x77fe0000 - 0x77ff1000 	C:\WINDOWS\system32\Secur32.dll
0x7c9c0000 - 0x7d1d7000 	C:\WINDOWS\system32\SHELL32.dll
0x77f10000 - 0x77f59000 	C:\WINDOWS\system32\GDI32.dll
0x7e410000 - 0x7e4a1000 	C:\WINDOWS\system32\USER32.dll
0x77c10000 - 0x77c68000 	C:\WINDOWS\system32\msvcrt.dll
0x77f60000 - 0x77fd6000 	C:\WINDOWS\system32\SHLWAPI.dll
0x76390000 - 0x763ad000 	C:\WINDOWS\system32\IMM32.DLL
0x773d0000 - 0x774d3000 	C:\WINDOWS\WinSxS\x86_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.2600.6028_x-ww_61e65202\comctl32.dll
0x5d090000 - 0x5d12a000 	C:\WINDOWS\system32\comctl32.dll
0x6db90000 - 0x6dfe8000 	C:\Esko\new_webcenter\jdk1.6.0_30\jdk1.6.0_30\jre\bin\server\jvm.dll
0x76b40000 - 0x76b6d000 	C:\WINDOWS\system32\WINMM.dll
0x7c340000 - 0x7c396000 	C:\WINDOWS\system32\MSVCR71.dll
0x6d870000 - 0x6d87c000 	C:\Esko\new_webcenter\jdk1.6.0_30\jdk1.6.0_30\jre\bin\verify.dll
0x6d3d0000 - 0x6d3ef000 	C:\Esko\new_webcenter\jdk1.6.0_30\jdk1.6.0_30\jre\bin\java.dll
0x6d8b0000 - 0x6d8bf000 	C:\Esko\new_webcenter\jdk1.6.0_30\jdk1.6.0_30\jre\bin\zip.dll
0x68000000 - 0x68036000 	C:\WINDOWS\system32\rsaenh.dll
0x769c0000 - 0x76a74000 	C:\WINDOWS\system32\USERENV.dll
0x5b860000 - 0x5b8b5000 	C:\WINDOWS\system32\netapi32.dll
0x6d6b0000 - 0x6d6c3000 	C:\Esko\new_webcenter\jdk1.6.0_30\jdk1.6.0_30\jre\bin\net.dll
0x71ab0000 - 0x71ac7000 	C:\WINDOWS\system32\WS2_32.dll
0x71aa0000 - 0x71aa8000 	C:\WINDOWS\system32\WS2HELP.dll
0x71a50000 - 0x71a8f000 	C:\WINDOWS\System32\mswsock.dll
0x76f20000 - 0x76f47000 	C:\WINDOWS\system32\DNSAPI.dll
0x76d60000 - 0x76d79000 	C:\WINDOWS\system32\iphlpapi.dll
0x76fb0000 - 0x76fb8000 	C:\WINDOWS\System32\winrnr.dll
0x76f60000 - 0x76f8c000 	C:\WINDOWS\system32\WLDAP32.dll
0x76fc0000 - 0x76fc6000 	C:\WINDOWS\system32\rasadhlp.dll
0x662b0000 - 0x66308000 	C:\WINDOWS\system32\hnetcfg.dll
0x71a90000 - 0x71a98000 	C:\WINDOWS\System32\wshtcpip.dll
0x204c0000 - 0x204f4000 	C:\Esko\new_webcenter\cadx\lib\cadxwrapper.dll
0x774e0000 - 0x7761e000 	C:\WINDOWS\system32\ole32.dll
0x77120000 - 0x771ab000 	C:\WINDOWS\system32\OLEAUT32.dll
0x61880000 - 0x618ba000 	C:\WINDOWS\system32\OLEACC.dll
0x73000000 - 0x73026000 	C:\WINDOWS\system32\WINSPOOL.DRV
0x74720000 - 0x7476c000 	C:\WINDOWS\system32\MSCTF.dll
0x76fd0000 - 0x7704f000 	C:\WINDOWS\system32\CLBCATQ.DLL
0x77050000 - 0x77115000 	C:\WINDOWS\system32\COMRes.dll
0x77c00000 - 0x77c08000 	C:\WINDOWS\system32\VERSION.dll
0x3fde0000 - 0x40221000 	C:\WINDOWS\system32\msi.dll
0x21b30000 - 0x21b67000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\SolidWorks.dll
0x21b80000 - 0x221d6000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\dlp.dll
0x221f0000 - 0x222ec000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\NCExportDriver.dll
0x22300000 - 0x22322000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\interactIO.dll
0x71ad0000 - 0x71ad9000 	C:\WINDOWS\system32\WSOCK32.dll
0x71b20000 - 0x71b32000 	C:\WINDOWS\system32\MPR.dll
0x22340000 - 0x22589000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\DataSwitch.dll
0x78130000 - 0x781cb000 	C:\WINDOWS\WinSxS\x86_Microsoft.VC80.CRT_1fc8b3b9a1e18e3b_8.0.50727.4027_x-ww_e69378d0\MSVCR80.dll
0x7c420000 - 0x7c4a7000 	C:\WINDOWS\WinSxS\x86_Microsoft.VC80.CRT_1fc8b3b9a1e18e3b_8.0.50727.4027_x-ww_e69378d0\MSVCP80.dll
0x781d0000 - 0x782e0000 	C:\WINDOWS\WinSxS\x86_Microsoft.VC80.MFC_1fc8b3b9a1e18e3b_8.0.50727.4027_x-ww_b779ebd5\MFC80.DLL
0x3d930000 - 0x3da16000 	C:\WINDOWS\system32\WININET.dll
0x225a0000 - 0x225a9000 	C:\WINDOWS\system32\Normaliz.dll
0x225b0000 - 0x226e3000 	C:\WINDOWS\system32\urlmon.dll
0x3dfd0000 - 0x3e1bb000 	C:\WINDOWS\system32\iertutil.dll
0x226f0000 - 0x22716000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\png.dll
0x22720000 - 0x22732000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\zlib.dll
0x22740000 - 0x22766000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\jpeg.dll
0x22770000 - 0x2279b000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\LIBTIFF.dll
0x5ed00000 - 0x5edcc000 	C:\WINDOWS\system32\OPENGL32.dll
0x68b20000 - 0x68b40000 	C:\WINDOWS\system32\GLU32.dll
0x73760000 - 0x737ab000 	C:\WINDOWS\system32\DDRAW.dll
0x73bc0000 - 0x73bc6000 	C:\WINDOWS\system32\DCIMAN32.dll
0x227a0000 - 0x227b2000 	C:\WINDOWS\system32\d3d9.dll
0x227c0000 - 0x227f5000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\U3D.dll
0x22810000 - 0x22928000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\dbghelp.dll
0x22930000 - 0x22a95000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\3DIO.dll
0x22ab0000 - 0x22c7f000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\xerces-c_2_8.dll
0x763b0000 - 0x763f9000 	C:\WINDOWS\system32\comdlg32.dll
0x5d360000 - 0x5d36e000 	C:\WINDOWS\WinSxS\x86_Microsoft.VC80.MFCLOC_1fc8b3b9a1e18e3b_8.0.50727.4027_x-ww_0cc904d3\MFC80ENU.DLL
0x25780000 - 0x25c69000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\inttune.dll
0x25c80000 - 0x25cb1000 	C:\WINDOWS\system32\ARTIOSLM.dll
0x261d0000 - 0x26200000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\plotcal.dll
0x26210000 - 0x26242000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\plotdt.dll
0x26260000 - 0x26293000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\plothp.dll
0x262b0000 - 0x262e7000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\plotkgb.dll
0x26300000 - 0x2632d000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\plotkra.dll
0x26340000 - 0x2636b000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\plotnee.dll
0x26380000 - 0x263c4000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\plotpcl.dll
0x263e0000 - 0x2640f000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\plotpps.dll
0x26420000 - 0x26461000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\plotprtman.dll
0x26480000 - 0x264b7000 	C:\Esko\Artios\ArtiosCAD10.2en\Program\plotwild.dll
0x76ee0000 - 0x76f1c000 	C:\WINDOWS\system32\RASAPI32.dll
0x76e90000 - 0x76ea2000 	C:\WINDOWS\system32\rasman.dll
0x76eb0000 - 0x76edf000 	C:\WINDOWS\system32\TAPI32.dll
0x76e80000 - 0x76e8e000 	C:\WINDOWS\system32\rtutils.dll
0x77c70000 - 0x77c95000 	C:\WINDOWS\system32\msv1_0.dll
0x76790000 - 0x7679c000 	C:\WINDOWS\system32\cryptdll.dll
0x722b0000 - 0x722b5000 	C:\WINDOWS\system32\sensapi.dll
0x6d7a0000 - 0x6d7a6000 	C:\Esko\new_webcenter\jdk1.6.0_30\jdk1.6.0_30\jre\bin\rmi.dll
0x76bf0000 - 0x76bfb000 	C:\WINDOWS\system32\PSAPI.DLL

VM Arguments:
java_command: &amp;lt;unknown&amp;gt;
Launcher Type: generic

Environment Variables:
JAVA_HOME=C:\Program Files\Java\jdk1.5.0_22
PATH=C:\Esko\Artios\ArtiosCAD10.2en\Program;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\Rational\common;C:\Program Files\Rational\ClearCase\bin;C:\Program Files\Perforce;C:\Esko\Artios\Common\Program\;C:\Esko\Artios\WebCenter\ApplicationServer\Program\;C:\Program Files\Windows Imaging\;C:\WINDOWS\system32\WindowsPowerShell\v1.0;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\
USERNAME=jede
OS=Windows_NT
PROCESSOR_IDENTIFIER=x86 Family 6 Model 23 Stepping 10, GenuineIntel



---------------  S Y S T E M  ---------------

OS: Windows XP Build 2600 Service Pack 3

CPU:total 1 (1 cores per cpu, 1 threads per core) family 6 model 23 stepping 10, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3

Memory: 4k page, physical 1572336k(273060k free), swap 3276100k(489260k free)

vm_info: Java HotSpot(TM) Server VM (20.5-b03) for windows-x86 JRE (1.6.0_30-b12), built on Nov 10 2011 01:42:41 by &quot;java_re&quot; with MS VC++ 7.1 (VS2003)

time: Wed Jan 18 16:36:25 2012
elapsed time: 42 seconds



&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Windows XP SP3 and Win 7 SP1 x64&lt;br/&gt;
JDK 1.6.0_30 Server VM (same for client) 32 bit&lt;/p&gt;</environment>
        <key id="12538831">DAEMON-235</key>
            <summary>When running java application via procrun (in jvm mode) an RMI thread triggers an EXCEPTION_ACCESS_VIOLATION</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="spangaer">J-L</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Jan 2012 16:29:38 +0000</created>
                <updated>Thu, 19 Jul 2012 12:31:49 +0000</updated>
                            <resolved>Mon, 30 Jan 2012 18:06:08 +0000</resolved>
                                    <version>1.0.5</version>
                    <version>1.0.6</version>
                    <version>1.0.7</version>
                    <version>1.0.8</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13188567" author="spangaer" created="Wed, 18 Jan 2012 17:54:42 +0000"  >&lt;p&gt;It seems to have to do with user access right.&lt;br/&gt;
I though I had covered all cases.&lt;br/&gt;
But I can get it to work on Win 7 x64, but I had to &apos;manually&apos; redo the user configuration.&lt;/p&gt;

&lt;p&gt;If I run as service or in terminal as &apos;the right&apos; user, it works properly.&lt;br/&gt;
If I run as the current user in terminal I get it to crash.&lt;/p&gt;</comment>
                            <comment id="13189026" author="spangaer" created="Thu, 19 Jan 2012 09:30:51 +0000"  >&lt;p&gt;So this morning I continued my investigation.&lt;br/&gt;
In Window 7 I can get it to run properly, if I run the service installation as the user as whom the service will have to run (using the runas command). (I suppose that behavior is not new. The Tomcat procrun install script makes use of run as to install the service.)&lt;/p&gt;

&lt;p&gt;In Windows XP the problem stays as is however.&lt;br/&gt;
I see that the version of the DLL differ&lt;br/&gt;
On Win 7&lt;br/&gt;
C:\Windows\WinSxS\x86_microsoft.vc80.mfc_1fc8b3b9a1e18e3b_8.0.50727.6195_none_cbf5e994470a1a8f\MFC80.DLL&lt;br/&gt;
On Win XP&lt;br/&gt;
C:\WINDOWS\WinSxS\x86_Microsoft.VC80.MFC_1fc8b3b9a1e18e3b_8.0.50727.4027_x-ww_b779ebd5\MFC80.DLL&lt;/p&gt;

&lt;p&gt;I will do some attempts to change/up the version in XP&lt;/p&gt;</comment>
                            <comment id="13189081" author="spangaer" created="Thu, 19 Jan 2012 12:53:57 +0000"  >&lt;p&gt;Via this security update I was able to bring the version of MFC80 up to the same as on Win 7.&lt;br/&gt;
&lt;a href=&quot;http://www.microsoft.com/download/en/details.aspx?id=26347&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.microsoft.com/download/en/details.aspx?id=26347&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;But it didn&apos;t help the story.&lt;br/&gt;
Looking at the access violation and as a consequence turning of DEP completely also didn&apos;t fix it.&lt;br/&gt;
&lt;a href=&quot;http://www.updatexp.com/0xC0000005.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.updatexp.com/0xC0000005.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m a strongly Java oriented developer so the whole .dll story takes a while for me to figure out. Now it&apos;s clear to me, that MFC80 is part of the MS VC++ 2005 redistributeable and procrun possibly doesn&apos;t rely on it. From the stacktrace it looks like it is some inhouse C++ code being called via JNI that ends up there.&lt;br/&gt;
That of course doesn&apos;t take away the fact that it runs correctly when using the java.exe and not when using the procrun.exe.&lt;/p&gt;

&lt;p&gt;Since the access exception also might imply memory errors, it&apos;s probably important to note that the XP is running in a VirtualBox VM. I haven&apos;t been able to test it on a non VM XP so far.&lt;/p&gt;</comment>
                            <comment id="13189169" author="spangaer" created="Thu, 19 Jan 2012 16:12:12 +0000"  >&lt;p&gt;Next step in the monologue.&lt;br/&gt;
Tested it on a non-VM Windows machine and ran in to the same problems. So not the VM.&lt;/p&gt;</comment>
                            <comment id="13189269" author="sebb@apache.org" created="Thu, 19 Jan 2012 18:32:03 +0000"  >&lt;p&gt;If - as you suspect - the issue is due to the use of JNI by the application, then there&apos;s not a lot the Commons Daemon team can do.&lt;/p&gt;

&lt;p&gt;Can you remove that part of the application and see if the access violation still occurs?&lt;/p&gt;

&lt;p&gt;Most likely the application JNI code is not expecting to be run with the particular security settings used by procrun, and is failing to handle the situation correctly.&lt;/p&gt;</comment>
                            <comment id="13189688" author="spangaer" created="Fri, 20 Jan 2012 08:14:43 +0000"  >&lt;p&gt;I do expect the JNI called code has something to do with it.&lt;br/&gt;
So far JBoss and Tomcat are spinning with procrun, and they communicate over RMI.&lt;/p&gt;

&lt;p&gt;Could you shed some light on what these &apos;security settings&apos; are and how they would differ between Win XP an Win 7. The ideal would be that I can get XP to behave the same way as Win 7. But in either case, something to communicate back to the developer of the C++ code would be interesting.&lt;/p&gt;</comment>
                            <comment id="13189755" author="sebb@apache.org" created="Fri, 20 Jan 2012 12:19:40 +0000"  >&lt;p&gt;Have you tried showing the C++ developers the stack trace?&lt;/p&gt;

&lt;p&gt;Should be enough to give a clue as to the cause.&lt;/p&gt;</comment>
                            <comment id="13189804" author="spangaer" created="Fri, 20 Jan 2012 13:34:42 +0000"  >&lt;p&gt;Well, yes I have. But I&apos;m trying to get these people as much information as possible.&lt;br/&gt;
I don&apos;t think asking this in the place where the only different component is made is that crazy. Currently it is powered by something that runs a service from a .bat file. As far I can tell that works.&lt;br/&gt;
Understanding how the procrun process differs from a standard Java process is quite interesting information. Might also help clarify why Win 7 and XP act differently.&lt;/p&gt;

&lt;p&gt;I just would like to get this to work, otherwise moving to procrun could be undermined altogether. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                            <comment id="13196261" author="sebb@apache.org" created="Mon, 30 Jan 2012 18:06:08 +0000"  >&lt;p&gt;This is clearly not a Commons Daemon bug; the crash is in user JNI code called by the java method:&lt;/p&gt;

&lt;p&gt;com.esko.webcenter.cadxserver.CadXServer.generateThumbnail&lt;/p&gt;</comment>
                            <comment id="13418252" author="spangaer" created="Thu, 19 Jul 2012 12:31:49 +0000"  >&lt;p&gt;Just wanted to give a little update on this story.&lt;br/&gt;
This comment doesn&apos;t imply that procrun needs any fixing. Just posting for people that might hit the same or if in the future similar problems where to surface that do need fixing.&lt;/p&gt;

&lt;p&gt;I &apos;fixed&apos; the issue by having the JNI code running in a separate java process, so the service runner kicking off another VM. That fixed everything for post 2008 (64bit) Windows OS. I only found out recently that for earlier versions of Windows it didn&apos;t work.&lt;/p&gt;

&lt;p&gt;Reason why it wasn&apos;t properly working still on those OS&apos;s was combination of things. One the external process wasn&apos;t started with the -Xrs flag, which caused problems when running as a service.&lt;br/&gt;
Second, in the child process I replaced the system input/output streams with custom ones (as i used the stream to send control signals, but still allowing other things to pass through). Note that the replacing of the streams wasn&apos;t done when running within the same process, I&apos;m mentioning it just because running with procrun might have similar effects. With the replaced streams I ran in to blockages caused by (or at least related to) the RMISecurity manager (which is customized to allow more then the standard one, but still not overly permissive).&lt;br/&gt;
I know it&apos;s these two things clashing as either not replacing the streams or swapping the security manager to allow everything, made the thing work. Eventually I choose the first solution (not in intercepting the streams in the child process) as I had RMI to send control signals to the child process anyway.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
J-L&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>224334</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tl1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170717</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-233] Heap corruption in apxMultiSzToArrayW for windows procrun</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-233</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When I tried to use commons daemon 1.0.8 for a project, after successfully installing the service, starting it on Windows 7 failed reliably, and it failed sporadically on other platforms. I traced the problem to a heap corruption bug due to an over-long pointer write in utils.c, line 321. &lt;/p&gt;

&lt;p&gt;The original line (inside of apxMultiSzToArrayW) reads:&lt;br/&gt;
    AplCopyMemory(p, lpString, (l + 1) * sizeof(WCHAR) + sizeof(WCHAR));&lt;/p&gt;

&lt;p&gt;The fix is to remove the &quot;+ sizeof(WCHAR)&quot; from the line, leaving it as&lt;br/&gt;
    AplCopyMemory(p, lpString, (l + 1) * sizeof(WCHAR));&lt;/p&gt;

&lt;p&gt;Note that you&apos;ve already taken care of the terminating null inside of &quot;l&quot;. After I&apos;d made that change and rebuilt, things worked happily for me. Please could you include this fix in a subsequent release.&lt;/p&gt;


&lt;p&gt;To reproduce:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;1. Ensure that you do NOT have a JRE or a JDK installed on the target machine.
2. Create a folder structure something like
    \MyApp\Jetty
    \MyApp\jre7  &amp;lt;&amp;lt;----- copy a JRE into here, but do NOT run the JRE installation
    \MyApp\Jetty\bin   &amp;lt;&amp;lt;------ place prunsrv.exe here
3. Ensure that you do not have the JRE on your system path
4. Install the service via the command line:
C:\MyApp\Jetty\bin\prunsrv.exe install MyService --DisplayName=&quot;My Service&quot; --Install=C:\MyApp\Jetty\bin\prunsrv.exe 
--LogPath=C:\MyApp\Jetty\logs --LogLevel=Info --StdOutput=auto --StdError=auto --StartMode=jvm --StopMode=jvm 
--JavaHome=&quot;C:\MyApp\jre7&quot; --Jvm=&quot;C:\MyApp\jre7\bin\client\jvm.dll&quot; --Startup=auto --StartPath=C:\MyApp\Jetty 
--Classpath=C:\MyApp\Jetty\start.jar;C:\MyApp\Jetty\commons-daemon-1.0.8.jar
++StartParams=--daemon --StartClass=org.eclipse.jetty.start.Main 
--StopClass=org.eclipse.jetty.start.Main ++StopParams=--stop
++JvmOptions=-Djetty.home=C:\MyApp\Jetty ++JvmOptions=-Djetty.port=80
++JvmOptions=-DSTOP.PORT=9131 ++JvmOptions=-DSTOP.KEY=stopMyApp
5. Start the service via &quot;net start MyService&quot;. Observe that it fails to start. 
Depending on the machine, sometimes it started and sometimes it failed to start. 
The joys of heap corruption ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Anyway, I debugged this with Visual Studio 2010 and used the data change breakpoint to observe the memory write (2 bytes beyond the end of the allocated block).&lt;/p&gt;



</description>
                <environment>&lt;p&gt;All windows versions. &lt;/p&gt;</environment>
        <key id="12535745">DAEMON-233</key>
            <summary>Heap corruption in apxMultiSzToArrayW for windows procrun</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="ajc">Andy Cooper</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Dec 2011 19:27:16 +0000</created>
                <updated>Wed, 1 Feb 2012 14:23:30 +0000</updated>
                            <resolved>Wed, 1 Feb 2012 14:23:30 +0000</resolved>
                                    <version>1.0.8</version>
                                    <fixVersion>1.0.9</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13172555" author="mturk@apache.org" created="Mon, 19 Dec 2011 19:59:56 +0000"  >&lt;p&gt;Sure, good catch.&lt;/p&gt;</comment>
                            <comment id="13196265" author="sebb@apache.org" created="Mon, 30 Jan 2012 18:14:45 +0000"  >&lt;p&gt;Make command easier to read&lt;/p&gt;</comment>
                            <comment id="13197855" author="mturk@apache.org" created="Wed, 1 Feb 2012 14:23:30 +0000"  >&lt;p&gt;Fixed in the 1.0.x branch. Will be part of 1.0.9 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>221429</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tj9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170431</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-232] jsvc should no longer setpgrp() on startup</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-232</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;jsvc-unix.c runs the following code in the child process before &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-comment&quot;&gt;/* create a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; process group to prevent kill 0 killing the monitor process */&lt;/span&gt;
#&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; defined(OS_FREEBSD) || defined(OS_DARWIN)
    setpgid(0, 0);
#&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
    setpgrp();
#endif
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This puts the child in its own process group, breaking some process management tools (such as supervisor) that expect to be able to kill a logical process by sending a SIGKILL to its process group. The su binary, which is somewhat analogous in function to jsvc, doesn&apos;t do this.&lt;/p&gt;

&lt;p&gt;As best I can tell, there&apos;s no code in jsvc that does kill(0, ...). There&apos;s also not enough svn history to provide more context. As for the child process doing a kill(0, ...), I find it highly unlikely that the JVM itself sends signals.&lt;/p&gt;

&lt;p&gt;So is the setpgrp call still necessary? If not, can it be removed?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12535214">DAEMON-232</key>
            <summary>jsvc should no longer setpgrp() on startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adar">Adar Dembo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Dec 2011 22:02:49 +0000</created>
                <updated>Wed, 1 Feb 2012 14:28:21 +0000</updated>
                            <resolved>Wed, 1 Feb 2012 14:28:21 +0000</resolved>
                                                    <fixVersion>1.0.9</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13197867" author="mturk@apache.org" created="Wed, 1 Feb 2012 14:28:21 +0000"  >&lt;p&gt;Removed the code.&lt;br/&gt;
You are right. We don&apos;t call kill(0) neither does JVM&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>220898</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tjef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170452</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-230] Procrun Documentation</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-230</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;the page &lt;a href=&quot;http://commons.apache.org/daemon/procrun.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/daemon/procrun.html&lt;/a&gt; refrences the switch to add JVM options as &quot;--JvmOptions&quot;, but the examples show it as &quot;JvmOption&quot;:&lt;/p&gt;

&lt;p&gt;If a parameter is repeated, then normally the last value takes precedence. However some parameters can take multiple values - for example StartParams and JvmOption. If these parameters are prefixed with ++, then the value will be appended to the existing value. For example:&lt;/p&gt;

&lt;p&gt;--Startup=manual --Startup=auto --JvmOption=-Done=1 ++JvmOption=-Dtwo=2&lt;/p&gt;</description>
                <environment></environment>
        <key id="12533315">DAEMON-230</key>
            <summary>Procrun Documentation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dlhavema">David Haveman</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Nov 2011 17:02:10 +0000</created>
                <updated>Tue, 14 Nov 2017 14:35:51 +0000</updated>
                            <resolved>Tue, 14 Nov 2017 14:35:51 +0000</resolved>
                                                    <fixVersion>1.0.9</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13161277" author="sebb@apache.org" created="Thu, 1 Dec 2011 23:08:11 +0000"  >&lt;p&gt;Thanks for the report; fixed in SVN&lt;/p&gt;</comment>
                            <comment id="13161283" author="dlhavema" created="Thu, 1 Dec 2011 23:10:40 +0000"  >&lt;p&gt;I am currently out of the office, i will be returning Friday December 2nd, 2011. Please contact Bob Falk or Patrick McCormack for assistance.&lt;/p&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12539923">DAEMON-236</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219043</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tk7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170582</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-229] Windows 2003 server 64bit and JDK1.6.0_29 64bit -- Failed creating java</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-229</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I tried to install Commons Daemon on 64 bit Windows 2003 Server with JDK 1.6.0_29 64 bit.&lt;/p&gt;

&lt;p&gt;During starting a service (Cassandra) I receive the error log below.&lt;/p&gt;

&lt;p&gt;As a workaround I installed 32 bit JVM, and configured the \jre6\bin\client\jvm.dll as JVM with the prunmgr //ES//servicename&lt;br/&gt;
(Hint found at &lt;a href=&quot;http://www.mkyong.com/tomcat/tomcat-error-prunsrvc-failed-creating-java-jvmdll/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mkyong.com/tomcat/tomcat-error-prunsrvc-failed-creating-java-jvmdll/&lt;/a&gt;  )&lt;/p&gt;

&lt;p&gt;Compatibility with 64 bit JVM should be established.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2011-11-25 02:50:51] [debug] ( prunsrv.c:1519) Commons Daemon procrun log initialized
[2011-11-25 02:50:51] [info]  (          :0   ) Commons Daemon procrun (1.0.7.0 32-bit) started
[2011-11-25 02:50:51] [info]  (          :0   ) Running &apos;cassandra&apos; Service...
[2011-11-25 02:50:51] [debug] ( prunsrv.c:1259) Inside ServiceMain...
[2011-11-25 02:50:51] [info]  (          :0   ) Starting service...
[2011-11-25 02:50:51] [debug] ( javajni.c:206 ) loading jvm &apos;D:\apps\jre6\bin\server\jvm.dll&apos;
[2011-11-25 02:50:52] [debug] ( javajni.c:251 ) Setting DLL search path to &apos;D:\apps\jre6\bin\server&apos;
[2011-11-25 02:50:52] [debug] ( javajni.c:251 ) Setting DLL search path to &apos;D:\apps\jre6\bin&apos;
[2011-11-25 02:50:52] [error] ( javajni.c:264 ) %1 is not a valid Win32 application.
[2011-11-25 02:50:52] [error] ( prunsrv.c:1045) Failed creating java D:\apps\jre6\bin\server\jvm.dll
[2011-11-25 02:50:52] [error] ( prunsrv.c:1045) %1 is not a valid Win32 application.
[2011-11-25 02:50:52] [error] ( prunsrv.c:1402) ServiceStart returned 1
[2011-11-25 02:50:52] [error] ( prunsrv.c:1402) %1 is not a valid Win32 application.
[2011-11-25 02:50:52] [info]  (          :0   ) Run service finished.
[2011-11-25 02:50:52] [info]  (          :0   ) Commons Daemon procrun finished
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Windows 2003 server 64bit&lt;br/&gt;
Sun JDK1.6.0_29 64bit&lt;/p&gt;</environment>
        <key id="12532690">DAEMON-229</key>
            <summary>Windows 2003 server 64bit and JDK1.6.0_29 64bit -- Failed creating java</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="apache_fan">Apache Fan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Nov 2011 09:43:46 +0000</created>
                <updated>Tue, 14 Nov 2017 14:37:28 +0000</updated>
                            <resolved>Tue, 14 Nov 2017 14:37:28 +0000</resolved>
                                    <version>1.0.7</version>
                                    <fixVersion>1.0.9</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13157080" author="mturk@apache.org" created="Fri, 25 Nov 2011 10:32:31 +0000"  >&lt;p&gt;Please use 64-bit version of procrun if you wish to run 64-bit JVM. It is inside amd64/ distribution directory.&lt;/p&gt;</comment>
                            <comment id="13157099" author="sebb@apache.org" created="Fri, 25 Nov 2011 11:16:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;Commons Daemon procrun (1.0.7.0 32-bit) started&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Also note that you are not using the current version (1.0.8)&lt;/p&gt;</comment>
                            <comment id="13157249" author="apache_fan" created="Fri, 25 Nov 2011 17:14:02 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;thanks for the clarification.&lt;/p&gt;

&lt;p&gt;I checked again, and it seems that the documentation and the naming of the binary directory is not precise enough.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://commons.apache.org/daemon/binaries.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/daemon/binaries.html&lt;/a&gt; states...:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;amd64 - AMD 64-bit
ia64 - Intel 64-bit
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;amd64 directory contains a binary that works on Intel 64 bit (in contrast to the documentation)&lt;/li&gt;
	&lt;li&gt;ia64 contains a binary that does not work on Intel 64 bit Xeon (however would be expected to do so according to the documentation)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Could you please make it clear at least in the provided documentation?&lt;/p&gt;

&lt;p&gt;cheers,&lt;br/&gt;
AF&lt;/p&gt;</comment>
                            <comment id="13157302" author="mturk@apache.org" created="Fri, 25 Nov 2011 21:01:07 +0000"  >&lt;p&gt;Give it couple of hours till the server sync is made and&lt;br/&gt;
&lt;a href=&quot;http://commons.apache.org/daemon/binaries.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/daemon/binaries.html&lt;/a&gt;&lt;br/&gt;
will have better explanation for cpu subdir&lt;/p&gt;

&lt;p&gt;In the mean time:&lt;br/&gt;
adm64 - AMD64/EMT64&lt;br/&gt;
ia64  - Intel Itanium 64&lt;/p&gt;

&lt;p&gt;FYI ia64 is standard naming for Itanium processor.&lt;br/&gt;
amd64 was used for what we now know as x86_64 (or just x64)&lt;br/&gt;
However we will stick with amd64 for 1.0.x branch because&lt;br/&gt;
many users depend on the naming scheme.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>218423</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tjdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170450</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-226] support files have incorrect svn:eol-style</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-226</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I have checked out under Windows and copied an exported tar to a unix system. All files contained ^M. This is not a issue if you checkout under Unix but in my case I do not have an svn client and have to do this way.&lt;/p&gt;

&lt;p&gt;Anyway, the eol-style should always be LF because these files are for Unix only.&lt;br/&gt;
I have attached a patch for.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12529632">DAEMON-226</key>
            <summary>support files have incorrect svn:eol-style</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="michael-o">Michael Osipov</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Nov 2011 09:03:34 +0000</created>
                <updated>Wed, 2 Nov 2011 20:46:15 +0000</updated>
                            <resolved>Wed, 2 Nov 2011 06:38:09 +0000</resolved>
                                    <version>Nightly Builds</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13141958" author="mturk@apache.org" created="Wed, 2 Nov 2011 06:38:09 +0000"  >&lt;p&gt;EOL style is used when on the same platform certain files need to have different line endings. This is not case here.&lt;br/&gt;
In your case you can use either dos2unix or svn export --native-eol LF.&lt;/p&gt;</comment>
                            <comment id="13141996" author="michael-o" created="Wed, 2 Nov 2011 08:15:51 +0000"  >&lt;p&gt;Well, this is a Unix file shouldn&apos;t this always be in LF line endings just to avoid confusions?!&lt;/p&gt;</comment>
                            <comment id="13142020" author="sebb@apache.org" created="Wed, 2 Nov 2011 09:27:38 +0000"  >&lt;p&gt;I&apos;m inclined to agree with the originator here.&lt;/p&gt;

&lt;p&gt;If it helps some users, and does not cause problems for others, why not set a fixed EOL style?&lt;/p&gt;</comment>
                            <comment id="13142089" author="mturk@apache.org" created="Wed, 2 Nov 2011 12:32:56 +0000"  >&lt;p&gt;There are many more files that would have to be changed (almost entire unix directory).&lt;br/&gt;
Even if checking out on windows and compiling on linux (come on lets get serious)&lt;br/&gt;
user has multiple choices from selecting the exported line ending to using cygwin svn&lt;br/&gt;
I&apos;ll -1 such attempt cause there&apos;s no technical reason for such a change.&lt;/p&gt;
</comment>
                            <comment id="13142501" author="michael-o" created="Wed, 2 Nov 2011 20:46:15 +0000"  >&lt;p&gt;Mladen, actually not. Only /bin/sh expects LF formatted files. C and H files are irrelevant.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12501750" name="DAEMON-226.patch" size="1066" author="michael-o" created="Tue, 1 Nov 2011 09:04:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tktr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170683</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-223] configure script has incorrect supported OS for HP-UX on IA64</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-223</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The apsupport.m4 file has an incorrect supported_os value for HP-UX on Itanium. java_md.h cannot be found.&lt;/p&gt;

&lt;p&gt;I have unified the property for all HP-UX systems. It should cover all cases now. jsvc compiles out of the box now on HP-UX 11.x. The supplied patch is attached.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12528471">DAEMON-223</key>
            <summary>configure script has incorrect supported OS for HP-UX on IA64</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="michael-o">Michael Osipov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Oct 2011 11:53:54 +0000</created>
                <updated>Tue, 1 Nov 2011 23:45:16 +0000</updated>
                            <resolved>Sat, 29 Oct 2011 15:19:53 +0000</resolved>
                                    <version>1.0.7</version>
                                    <fixVersion>1.0.8</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13139336" author="mturk@apache.org" created="Sat, 29 Oct 2011 15:19:53 +0000"  >&lt;p&gt;Patch applied, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12500427" name="DAEMON-223.patch" size="838" author="michael-o" created="Mon, 24 Oct 2011 11:54:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214331</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 1 week, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tj1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170395</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-219] prunsrv error 1067 and crash on Windows 7</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-219</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I&apos;ve defined attached cmd file on Windows 7 to install a service.&lt;br/&gt;
I try to run the service with &quot;prunsrv //TS/LdeService3&quot; and I get &quot;Commons Daemon Service Runner has stopped working&quot;&lt;br/&gt;
Attaching all details.&lt;br/&gt;
Is there more debug logging I can turn on? The current debug output seems minimal.&lt;br/&gt;
This is probably a configuration user error but I cannot tell due to the lack of logging.&lt;br/&gt;
Thank you.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Apache Maven 3.0.3 (r1075438; 2011-02-28 12:31:09-0500)&lt;br/&gt;
Maven home: C:\Java\apache-maven-3.0.3\bin\..&lt;br/&gt;
Java version: 1.6.0_24, vendor: Sun Microsystems Inc.&lt;br/&gt;
Java home: C:\Program Files\Java\jdk1.6.0_24\jre&lt;br/&gt;
Default locale: en_US, platform encoding: Cp1252&lt;br/&gt;
OS name: &quot;windows 7&quot;, version: &quot;6.1&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;&lt;/p&gt;</environment>
        <key id="12525548">DAEMON-219</key>
            <summary>prunsrv error 1067 and crash on Windows 7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Oct 2011 16:56:26 +0000</created>
                <updated>Sat, 5 Nov 2011 10:13:55 +0000</updated>
                            <resolved>Fri, 4 Nov 2011 20:20:02 +0000</resolved>
                                    <version>1.0.7</version>
                                    <fixVersion>1.0.8</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13119410" author="sebb@apache.org" created="Mon, 3 Oct 2011 17:12:34 +0000"  >&lt;p&gt;Seems to be a minor bug in the ,cmd file:&lt;/p&gt;

&lt;p&gt;&quot;%PR_HOME%\prunsrv&quot; //DS//LdeService&lt;br/&gt;
&quot;%PR_HOME%\prunsrv&quot; //IS//LdeService3^&lt;/p&gt;

&lt;p&gt;Note the different service names; however this may not be significant.&lt;/p&gt;</comment>
                            <comment id="13119413" author="garydgregory" created="Mon, 3 Oct 2011 17:16:01 +0000"  >&lt;p&gt;You are correct, but it does not matter. You can remove the &quot;DS&quot; line.&lt;/p&gt;</comment>
                            <comment id="13119422" author="mturk@apache.org" created="Mon, 3 Oct 2011 17:34:09 +0000"  >&lt;p&gt;1. Use prunsrv //TS//LdeService3,  not prunsrv //TS/LdeService3!&lt;br/&gt;
2. Inside install&lt;br/&gt;
   --Install=&quot;%PR_HOME%\prunsrv&quot;&lt;br/&gt;
   to&lt;br/&gt;
   --Install=&quot;%PR_HOME%\prunsrv.exe&quot;&lt;/p&gt;

</comment>
                            <comment id="13119443" author="garydgregory" created="Mon, 3 Oct 2011 18:00:56 +0000"  >&lt;p&gt;AFAIK, this kind of stuff does not matter on Windows. The shell with find EXE and CMD files, you do not need to specify the file extension. Never the less, I&apos;ve tried it and it gives me the same results. I&apos;ve updated the cmd file in this ticket.&lt;/p&gt;</comment>
                            <comment id="13119473" author="mturk@apache.org" created="Mon, 3 Oct 2011 18:29:40 +0000"  >&lt;p&gt;Ok.&lt;br/&gt;
Could you export the following registry keys and attach them?&lt;br/&gt;
HKLM\Software\Apache Software Foundation\Procrun 2.0\LdeService3&lt;br/&gt;
and&lt;br/&gt;
HKLM\System\CurrentControlSet\Services\LdeService3&lt;/p&gt;

&lt;p&gt;Right click on the key and then Export (select Save as Type: .txt)&lt;br/&gt;
Thanks&lt;/p&gt;</comment>
                            <comment id="13119486" author="garydgregory" created="Mon, 3 Oct 2011 18:39:16 +0000"  >&lt;p&gt;I attached:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;SystemLdeService3.txt for &lt;tt&gt;HKLM\System\CurrentControlSet\Services\LdeService3&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;A screen shot that shows that no entry is present for &lt;tt&gt;HKLM\Software\Apache Software Foundation\Procrun 2.0\LdeService3&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thank you,&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="13119494" author="garydgregory" created="Mon, 3 Oct 2011 18:45:24 +0000"  >&lt;p&gt;From the dump file: &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Dump Summary
------------
Dump File:	WERA3BD.tmp.mdmp : C:\test\WinService\WERA3BD.tmp.mdmp
Last Write Time:	10/3/2011 14:43:46 PM
Process Name:	prunsrv.exe : C:\Java\commons-daemon-1.0.7\win\amd64\prunsrv.exe
Process Architecture:	x64
Exception Code:	0xC0000005
Exception Information:	The thread tried to read from or write to a virtual address for which it does not have the appropriate access.
Heap Information:	Not Present

System Information
------------------
OS Version:	6.1.7601
CLR Version(s):	

Modules
-------
Module Name	Module Path	Module Version
-----------	-----------	--------------
prunsrv.exe	C:\Java\commons-daemon-1.0.7\win\amd64\prunsrv.exe	1.0.7.0
ntdll.dll	C:\Windows\System32\ntdll.dll	6.1.7601.17514
kernel32.dll	C:\Windows\System32\kernel32.dll	6.1.7601.17651
KERNELBASE.dll	C:\Windows\System32\KERNELBASE.dll	6.1.7601.17651
advapi32.dll	C:\Windows\System32\advapi32.dll	6.1.7600.16385
msvcrt.dll	C:\Windows\System32\msvcrt.dll	7.0.7600.16385
sechost.dll	C:\Windows\System32\sechost.dll	6.1.7600.16385
rpcrt4.dll	C:\Windows\System32\rpcrt4.dll	6.1.7601.17514
shell32.dll	C:\Windows\System32\shell32.dll	6.1.7601.17514
shlwapi.dll	C:\Windows\System32\shlwapi.dll	6.1.7601.17514
gdi32.dll	C:\Windows\System32\gdi32.dll	6.1.7601.17514
user32.dll	C:\Windows\System32\user32.dll	6.1.7601.17514
lpk.dll	C:\Windows\System32\lpk.dll	6.1.7600.16385
usp10.dll	C:\Windows\System32\usp10.dll	1.626.7601.17514
imm32.dll	C:\Windows\System32\imm32.dll	6.1.7600.16385
msctf.dll	C:\Windows\System32\msctf.dll	6.1.7600.16385
nvinitx.dll	C:\Windows\System32\nvinitx.dll	8.17.12.5738
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13119513" author="mturk@apache.org" created="Mon, 3 Oct 2011 19:17:25 +0000"  >&lt;p&gt;So it seems your service didn&apos;t get properly installed.&lt;br/&gt;
I suppose that Windows 2008 and UAC is enabled, so you cannot install services from cmd.exe&lt;/p&gt;

&lt;p&gt;You can try copying cmd.exe to cmda.exe inside \Windows\System32 and&lt;br/&gt;
then right click on cmda,.exe and select &apos;Run As Administrator&apos;&lt;br/&gt;
Doing that on cmd.exe won&apos;t help cause it has to be different .exe name.&lt;br/&gt;
Well, it might not work on your box &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;
</comment>
                            <comment id="13119522" author="garydgregory" created="Mon, 3 Oct 2011 19:26:30 +0000"  >&lt;p&gt;I followed your instructions but the result is the same. I am on Windows 7 with UAC off. &lt;/p&gt;

&lt;p&gt;This might help (or not):&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&amp;gt;	prunsrv.exe!000000014000a460() 	
 	[Frames below may be incorrect and/or missing, no symbols loaded for prunsrv.exe]	
 	prunsrv.exe!000000014000d33f() 	
 	prunsrv.exe!000000014000daba() 	
 	prunsrv.exe!000000014000debd() 	
 	prunsrv.exe!000000014000e3b9() 	
 	kernel32.dll!0000000076eb652d() 	
 	ntdll.dll!0000000076fec521() 	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can you tell where that is? Can we guard against this bomb and log something?&lt;/p&gt;

&lt;p&gt;Bombs at 000000014000A460 in this subset of the whole thing:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;000000014000A448  mov         rbp,qword ptr [rsp+40h]  
000000014000A44D  mov         rsi,qword ptr [rsp+48h]  
000000014000A452  add         rsp,20h  
000000014000A456  pop         r12  
000000014000A458  ret  
000000014000A459  int         3  
000000014000A45A  int         3  
000000014000A45B  int         3  
000000014000A45C  int         3  
000000014000A45D  int         3  
000000014000A45E  int         3  
000000014000A45F  int         3  
000000014000A460  cmp         byte ptr [rcx],0  
000000014000A463  mov         rax,rcx  
000000014000A466  je          000000014000A490  
000000014000A468  nop         dword ptr [rax+rax]  
000000014000A470  movzx       r9d,byte ptr [rcx]  
000000014000A474  cmp         r9b,dl  
000000014000A477  jne         000000014000A47E  
000000014000A479  mov         byte ptr [rax],r8b  
000000014000A47C  jmp         000000014000A481  
000000014000A47E  mov         byte ptr [rax],r9b  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13119576" author="mturk@apache.org" created="Mon, 3 Oct 2011 20:35:50 +0000"  >&lt;p&gt;Look, unless you have the Registry key inside&lt;br/&gt;
HKLM\Software\A S F\Procrun 2.0\YourServiceName&lt;br/&gt;
there&apos;s no point to continue this.&lt;br/&gt;
prunsrv breaks in //TS// probably because the registry is corrupted&lt;br/&gt;
or missing like in your case.&lt;/p&gt;

</comment>
                            <comment id="13119610" author="garydgregory" created="Mon, 3 Oct 2011 21:06:36 +0000"  >&lt;p&gt;Hm, Ok,&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;What should go in &lt;tt&gt;HKLM\Software\A S F\Procrun 2.0\YourServiceName&lt;/tt&gt;, exactly?&lt;/li&gt;
	&lt;li&gt;Why was this reg entry not created? Is that a bug?&lt;/li&gt;
	&lt;li&gt;If the entry could not be created, shouldn&apos;t this important information be logged as an error?&lt;/li&gt;
	&lt;li&gt;Shouldn&apos;t we log an error message instead of crashing when a reg entry is not found?&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Which of these deserve a JIRA?&lt;/p&gt;

&lt;p&gt;Thank you&lt;/p&gt;</comment>
                            <comment id="13120923" author="garydgregory" created="Wed, 5 Oct 2011 13:10:12 +0000"  >&lt;p&gt;Hello, &lt;/p&gt;

&lt;p&gt;Is anyone contemplating answers to these questions?&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="13138568" author="garydgregory" created="Fri, 28 Oct 2011 17:27:10 +0000"  >&lt;p&gt;Bueller? Anyone?&lt;/p&gt;</comment>
                            <comment id="13139192" author="mturk@apache.org" created="Sat, 29 Oct 2011 11:34:31 +0000"  >&lt;p&gt;Working on it. Will be fixed in 1.0.8&lt;/p&gt;</comment>
                            <comment id="13143007" author="mturk@apache.org" created="Thu, 3 Nov 2011 09:54:13 +0000"  >&lt;p&gt;It would be really helpful if you could attach the registry data for the service.&lt;br/&gt;
Note that it should be inside&lt;br/&gt;
HKLM\Software\Wow6432Node\Apache Software Foundation\Procrun 2.0\LdeService3&lt;/p&gt;</comment>
                            <comment id="13143055" author="garydgregory" created="Thu, 3 Nov 2011 12:01:52 +0000"  >&lt;p&gt;Regedit export and cmd files.&lt;/p&gt;</comment>
                            <comment id="13143061" author="garydgregory" created="Thu, 3 Nov 2011 12:12:18 +0000"  >&lt;p&gt;I just attached a regedit export for the requested key. I also attached cmd files that register and unregister the service.&lt;/p&gt;</comment>
                            <comment id="13143081" author="mturk@apache.org" created="Thu, 3 Nov 2011 12:46:06 +0000"  >&lt;p&gt;OK, so it seems the registry is there after all &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. The bug is not in the&lt;br/&gt;
configuration stage. Is there any option for you to provide those classes with&lt;br/&gt;
some dummy executor so I can debug the procrun?&lt;br/&gt;
I see you are executing your com.seagullsw.appinterface.server.AppInterfaceServer&lt;br/&gt;
so if you can just provide that class with some sleep(10000000) instead actual run&lt;br/&gt;
that should do.&lt;/p&gt;</comment>
                            <comment id="13143114" author="garydgregory" created="Thu, 3 Nov 2011 13:02:28 +0000"  >&lt;p&gt;Unfortunately, I cannot provide com.seagullsw.appinterface.server.AppInterfaceServer because it is at the core of our proprietary product. It also depends on 60 megs of jars and has a complex configuration.&lt;/p&gt;

&lt;p&gt;If you describe what you need, I can create something. Is testing with a stub class that does only the sleep help? That would be one .class file, or a jar with one class file. I would hope that such a class would just work and that the problem is somewhere in between the simple and complex example.&lt;/p&gt;</comment>
                            <comment id="13143145" author="mturk@apache.org" created="Thu, 3 Nov 2011 13:26:57 +0000"  >&lt;p&gt;Sure, I mean any class would do which causes the core on your box.&lt;br/&gt;
You can name it the same, but it can have some dummy methods just to cause procrun to break&lt;/p&gt;</comment>
                            <comment id="13143159" author="garydgregory" created="Thu, 3 Nov 2011 13:28:43 +0000"  >&lt;p&gt;Ok, I&apos;ll put something together.&lt;/p&gt;</comment>
                            <comment id="13143419" author="garydgregory" created="Thu, 3 Nov 2011 18:31:22 +0000"  >&lt;p&gt;Reproduces the issue. See readme.txt in the ZIP for instructions.&lt;/p&gt;</comment>
                            <comment id="13143527" author="garydgregory" created="Thu, 3 Nov 2011 21:03:39 +0000"  >&lt;p&gt;This was in the Windows event log for the error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;- &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Event xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://schemas.microsoft.com/win/2004/08/events/event&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
- &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;System&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Provider Name=&lt;span class=&quot;code-quote&quot;&gt;&quot;Application Error&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;EventID Qualifiers=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;1000&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/EventID&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Level&amp;gt;&lt;/span&gt;2&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Level&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Task&amp;gt;&lt;/span&gt;100&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Task&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Keywords&amp;gt;&lt;/span&gt;0x80000000000000&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Keywords&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;TimeCreated SystemTime=&lt;span class=&quot;code-quote&quot;&gt;&quot;2011-11-03T19:56:17.000000000Z&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;EventRecordID&amp;gt;&lt;/span&gt;15806&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/EventRecordID&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Channel&amp;gt;&lt;/span&gt;Application&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Channel&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Computer&amp;gt;&lt;/span&gt;us-l-gg03.rocketsoftware.com&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Computer&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Security /&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/System&amp;gt;&lt;/span&gt;
- &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;EventData&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data&amp;gt;&lt;/span&gt;prunsrv.exe&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data&amp;gt;&lt;/span&gt;1.0.7.0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data&amp;gt;&lt;/span&gt;4e3782fe&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data&amp;gt;&lt;/span&gt;prunsrv.exe&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data&amp;gt;&lt;/span&gt;1.0.7.0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data&amp;gt;&lt;/span&gt;4e3782fe&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data&amp;gt;&lt;/span&gt;c0000005&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data&amp;gt;&lt;/span&gt;000000000000a460&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data&amp;gt;&lt;/span&gt;303c&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data&amp;gt;&lt;/span&gt;01cc9a62a551a9ea&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data&amp;gt;&lt;/span&gt;C:\Java\commons-daemon-1.0.7\win\amd64\prunsrv.exe&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data&amp;gt;&lt;/span&gt;C:\Java\commons-daemon-1.0.7\win\amd64\prunsrv.exe&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data&amp;gt;&lt;/span&gt;e3babb7d-0655-11e1-8b15-f0def14aec54&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/EventData&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Event&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13143530" author="garydgregory" created="Thu, 3 Nov 2011 21:05:45 +0000"  >&lt;p&gt;New version of the test zip which is a little cleaner and generates procrun logs in a logs folder in the project (included).&lt;/p&gt;</comment>
                            <comment id="13143872" author="mturk@apache.org" created="Fri, 4 Nov 2011 09:45:25 +0000"  >&lt;p&gt;Well first of all your example just doesn&apos;t work.&lt;br/&gt;
Try using simple java -cp &quot;%CD%\lde_home\lib&quot; test.Deamon219&lt;br/&gt;
This can&apos;t work cause you have .jar files there, etc...&lt;/p&gt;

&lt;p&gt;Anyhow, procrun cores, but just because it presumes you will give him&lt;br/&gt;
something meaningful. I&apos;ll try to figure out how to fix that and possibly&lt;br/&gt;
print the stack trace.&lt;/p&gt;</comment>
                            <comment id="13143885" author="mturk@apache.org" created="Fri, 4 Nov 2011 10:16:01 +0000"  >&lt;p&gt;Fixed in the trunk.&lt;/p&gt;

&lt;p&gt;You were missing --StopClass which was causing procrun to crash. Now it defaults to java.lang.System, and stopping&lt;br/&gt;
service will call System.exit.&lt;br/&gt;
Implement your own StopClass that will exit the main method cleanly. If you need further assistance use commons users list.&lt;/p&gt;</comment>
                            <comment id="13144110" author="garydgregory" created="Fri, 4 Nov 2011 16:17:42 +0000"  >&lt;p&gt;I must be loosing my marbles. &lt;/p&gt;

&lt;p&gt;I am attaching a new version of the project that uses --StopClass and it still crashes on service start up.&lt;/p&gt;

&lt;p&gt;This is with 1.0.7.&lt;/p&gt;

&lt;p&gt;Everything looks good on start up too:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2011-11-04 12:11:28] [debug] ( prunsrv.c:1519) Commons Daemon procrun log initialized
[2011-11-04 12:11:28] [info]  (          :0   ) Commons Daemon procrun (1.0.7.0 64-bit) started
[2011-11-04 12:11:28] [info]  (          :0   ) Running &apos;Daemon219&apos; Service...
[2011-11-04 12:11:28] [debug] ( prunsrv.c:1259) Inside ServiceMain...
[2011-11-04 12:11:28] [info]  (          :0   ) Starting service...
[2011-11-04 12:11:28] [debug] ( javajni.c:206 ) loading jvm &apos;C:\Program Files\Java\jdk1.6.0_29\jre\bin\server\jvm.dll&apos;
[2011-11-04 12:11:28] [debug] ( javajni.c:660 ) Jvm Option[0] -Xrs
[2011-11-04 12:11:28] [debug] ( javajni.c:660 ) Jvm Option[1] -Djava.endorsed.dirs=C:\Users\ggregory\Documents\eclipse\LDE\Daemon-219\lde_home\lib\endorsed
[2011-11-04 12:11:28] [debug] ( javajni.c:660 ) Jvm Option[2] -Djavax.xml.transform.TransformerFactory=org.apache.xalan.xsltc.trax.SmartTransformerFactoryImpl
[2011-11-04 12:11:28] [debug] ( javajni.c:660 ) Jvm Option[3] -Dorg.apache.cxf.Logger=org.apache.cxf.common.logging.Log4jLogger
[2011-11-04 12:11:28] [debug] ( javajni.c:660 ) Jvm Option[4] -Djava.class.path=C:\Users\ggregory\Documents\eclipse\LDE\Daemon-219\lde_home\lib\daemon-219.jar
[2011-11-04 12:11:29] [debug] ( javajni.c:844 ) argv[0] = --config
[2011-11-04 12:11:29] [debug] ( javajni.c:844 ) argv[1] = C:\Users\ggregory\Documents\eclipse\LDE\Daemon-219\src\test\config
[2011-11-04 12:11:29] [debug] ( javajni.c:896 ) Java Worker thread started test/Daemon219StartService:main
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The Event Log is not much help:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Event xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://schemas.microsoft.com/win/2004/08/events/event&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
- &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;System&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Provider Name=&lt;span class=&quot;code-quote&quot;&gt;&quot;Service Control Manager&quot;&lt;/span&gt; Guid=&lt;span class=&quot;code-quote&quot;&gt;&quot;{555908d1-a6d7-4695-8e1e-26931d2012f4}&quot;&lt;/span&gt; EventSourceName=&lt;span class=&quot;code-quote&quot;&gt;&quot;Service Control Manager&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;EventID Qualifiers=&lt;span class=&quot;code-quote&quot;&gt;&quot;49152&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;7034&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/EventID&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Version&amp;gt;&lt;/span&gt;0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Version&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Level&amp;gt;&lt;/span&gt;2&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Level&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Task&amp;gt;&lt;/span&gt;0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Task&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Opcode&amp;gt;&lt;/span&gt;0&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Opcode&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Keywords&amp;gt;&lt;/span&gt;0x8080000000000000&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Keywords&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;TimeCreated SystemTime=&lt;span class=&quot;code-quote&quot;&gt;&quot;2011-11-04T16:11:29.114553200Z&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;EventRecordID&amp;gt;&lt;/span&gt;106250&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/EventRecordID&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Correlation /&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Execution ProcessID=&lt;span class=&quot;code-quote&quot;&gt;&quot;700&quot;&lt;/span&gt; ThreadID=&lt;span class=&quot;code-quote&quot;&gt;&quot;9424&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Channel&amp;gt;&lt;/span&gt;System&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Channel&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Computer&amp;gt;&lt;/span&gt;us-l-gg03.rocketsoftware.com&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Computer&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Security /&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/System&amp;gt;&lt;/span&gt;
- &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;EventData&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data Name=&lt;span class=&quot;code-quote&quot;&gt;&quot;param1&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Daemon-219&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;Data Name=&lt;span class=&quot;code-quote&quot;&gt;&quot;param2&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;2&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Data&amp;gt;&lt;/span&gt; 
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/EventData&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/Event&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then I get the same 1067 crash&lt;/p&gt;</comment>
                            <comment id="13144112" author="garydgregory" created="Fri, 4 Nov 2011 16:18:27 +0000"  >&lt;p&gt;Using --StopClass still causes a 1067 error.&lt;/p&gt;</comment>
                            <comment id="13144300" author="mturk@apache.org" created="Fri, 4 Nov 2011 20:20:02 +0000"  >&lt;p&gt;No it doesn&apos;t crash any more.&lt;br/&gt;
Tested your latest .zip and it works both with trunk and 1.0.7&lt;br/&gt;
Please do not reopen this issue.&lt;/p&gt;</comment>
                            <comment id="13144328" author="garydgregory" created="Fri, 4 Nov 2011 20:53:43 +0000"  >&lt;p&gt;Thank you for checking my latest test zip.&lt;/p&gt;

&lt;p&gt;The test still crashes here every single time.&lt;/p&gt;

&lt;p&gt;What is your set up? Are you on Windows 7 64 bit too? &lt;/p&gt;

&lt;p&gt;What other debug information can I capture?&lt;/p&gt;

&lt;p&gt;If not in this issue, do you suggest I open a new issue? With what title? It&apos;s the same from my POV.&lt;/p&gt;

&lt;p&gt;Please advise.&lt;/p&gt;</comment>
                            <comment id="13144424" author="mturk@apache.org" created="Fri, 4 Nov 2011 22:41:49 +0000"  >&lt;p&gt;Look for yourself:&lt;/p&gt;

&lt;p&gt;C:\Users\ADMINI~1\DAEMON~1&amp;gt;ver&lt;br/&gt;
Microsoft Windows &lt;span class=&quot;error&quot;&gt;&amp;#91;Version 6.1.7601&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;C:\Users\ADMINI~1\DAEMON~1&amp;gt;java -version&lt;br/&gt;
java version &quot;1.6.0_27&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_27-b07)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 20.2-b06, mixed mode)&lt;/p&gt;

&lt;p&gt;C:\Users\ADMINI~1\DAEMON~1&amp;gt;register&lt;br/&gt;
C:\Users\ADMINI~1\DAEMON~1&amp;gt;set HOME=C:\Users\ADMINI~1\DAEMON~1\&lt;br/&gt;
C:\Users\ADMINI~1\DAEMON~1&amp;gt;set LDE_HOME=C:\Users\ADMINI~1\DAEMON~1\lde_home&lt;br/&gt;
C:\Users\ADMINI~1\DAEMON~1&amp;gt;set LDE_CONFIG=C:\Users\ADMINI~1\DAEMON~1\src\test\config&lt;br/&gt;
C:\Users\ADMINI~1\DAEMON~1&amp;gt;set PR_HOME=C:\Users\ADMINI~1\DAEMON~1\bin&lt;/p&gt;

&lt;p&gt;C:\Users\ADMINI~1\DAEMON~1&amp;gt;&quot;C:\Users\ADMINI~1\DAEMON~1\bin\prunsrv.exe&quot; //IS//Daemon219   --Dis&lt;br/&gt;
playName=&quot;Daemon-219&quot;   --Install=&quot;C:\Users\ADMINI~1\DAEMON~1\\bin\prunsrv.exe&quot;   --Jvm=&quot;\jre\bi&lt;br/&gt;
n\server\jvm.dll&quot;   --StartMode=jvm   --StopMode=jvm   --StartClass=test.Daemon219StartService&lt;br/&gt;
 -&lt;del&gt;StopClass=test.Daemon219StopService   --StartParams=&quot;&lt;/del&gt;-config#C:\Users\ADMINI~1\DAEMON~1\src\&lt;br/&gt;
test\config&quot;   --Classpath=&quot;C:\Users\ADMINI~1\DAEMON~1\lde_home\lib&amp;#42;&quot;   --JvmOptions=-Xrs   ++J&lt;br/&gt;
vmOptions=-Djava.endorsed.dirs=&quot;C:\Users\ADMINI~1\DAEMON~1\lde_home\lib\endorsed&quot;   ++JvmOptions&lt;br/&gt;
=-Djavax.xml.transform.TransformerFactory=org.apache.xalan.xsltc.trax.SmartTransformerFactoryImp&lt;br/&gt;
l   ++JvmOptions=-Dorg.apache.cxf.Logger=org.apache.cxf.common.logging.Log4jLogger   --LogPath=C&lt;br/&gt;
:\Users\ADMINI~1\DAEMON~1\logs   --StdOutput=auto   --StdError=auto   --Type=interactive   --Pid&lt;br/&gt;
File=pid.txt   --LogLevel=Debug&lt;/p&gt;

&lt;p&gt;C:\Users\ADMINI~1\DAEMON~1&amp;gt;bin\prunsrv.exe //TS//Daemon219&lt;br/&gt;
args&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; = --config&lt;br/&gt;
args&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; = C:\Users\ADMINI~1\DAEMON~1\src\test\config&lt;/p&gt;

&lt;p&gt;C:\Users\ADMINI~1\DAEMON~1&amp;gt;bin\prunsrv.exe //VS&lt;br/&gt;
Commons Daemon Service Runner version 1.0.7.0/Win64 (Aug  2 2011)&lt;br/&gt;
Copyright (c) 2000-2011 The Apache Software Foundation.&lt;/p&gt;


&lt;p&gt;I copied prunsrv.exe to you bin directory and modify the register.cmd&lt;br/&gt;
to reflect that (only change)&lt;/p&gt;

&lt;p&gt;So it works on Windows 2008R2 64-bit (that&apos;s server version of Windows7)&lt;br/&gt;
Also tested on Windows XP/32-bit&lt;br/&gt;
No core dumps. I don&apos;t wish to speculate why are you getting one.&lt;/p&gt;


&lt;p&gt;However&lt;br/&gt;
C:\Users\ADMINI~1\DAEMON~1&amp;gt;net start Daemon219&lt;br/&gt;
The Daemon-219 service is starting.&lt;br/&gt;
The Daemon-219 service could not be started.&lt;/p&gt;

&lt;p&gt;A system error has occurred.&lt;br/&gt;
System error 1067 has occurred.&lt;br/&gt;
The process terminated unexpectedly.&lt;/p&gt;


&lt;p&gt;But that means that the process has ended. It didn&apos;t crashed.&lt;br/&gt;
The main method should not return until you get stop command.&lt;br/&gt;
However you just print arguments and call System.exit(0)&lt;/p&gt;

&lt;p&gt;Try with --StartClass test.Daemon219StopService&lt;br/&gt;
(Yes I know, but there you have sleep) so you will get:&lt;/p&gt;

&lt;p&gt;C:\Users\ADMINI~1\DAEMON~1&amp;gt;net start Daemon219&lt;br/&gt;
The Daemon-219 service is starting...&lt;br/&gt;
The Daemon-219 service was started successfully.&lt;/p&gt;


&lt;p&gt;Regarding &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-219&quot; title=&quot;prunsrv error 1067 and crash on Windows 7&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-219&quot;&gt;&lt;del&gt;DAEMON-219&lt;/del&gt;&lt;/a&gt; that&apos;s all from me.&lt;/p&gt;</comment>
                            <comment id="13144538" author="garydgregory" created="Sat, 5 Nov 2011 03:04:26 +0000"  >&lt;p&gt;Thank you for your time Mladen. You&apos;ve been a great help.&lt;/p&gt;

&lt;p&gt;&quot;But that means that the process has ended. It didn&apos;t crashed.&quot;&lt;/p&gt;

&lt;p&gt;Ah, I did not realize that! There must have been other errors in my configuration that caused my server to quit and do a System.exit(0). Our server does a System.exit on normal termination. I&apos;ve changed that so that my StopService class does not cause System.exit() to be called.&lt;/p&gt;

&lt;p&gt;I can now do a &apos;net start&apos; for my server service and it starts and can process requests including a stop service request!&lt;/p&gt;

&lt;p&gt;I found another bug in my set up: in a previous iteration I did not have a &apos;*&apos; at the end of my classpath. I added it to the test example a while back which explains why the simple test started working.&lt;/p&gt;

&lt;p&gt;Now I need to find out why &apos;net stop&apos; on my server service fails with:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;System error 109 has occurred.

The pipe has been ended.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Any quick advice on this one? &lt;/p&gt;

&lt;p&gt;I hope you consider updating the documentation so that other users will avoid the traps I fell in, especially the bit about --StopClass and System.exit().&lt;/p&gt;</comment>
                            <comment id="13144644" author="sebb@apache.org" created="Sat, 5 Nov 2011 10:13:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;I hope you consider updating the documentation so that other users will avoid the traps I fell in, especially the bit about --StopClass and System.exit().&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Documentation patches welcome!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12502474" name="Daemon-219.zip" size="4690525" author="ggregory" created="Fri, 4 Nov 2011 16:18:26 +0000"/>
                            <attachment id="12502220" name="Daemon-219.zip" size="4688079" author="ggregory" created="Thu, 3 Nov 2011 21:05:45 +0000"/>
                            <attachment id="12502195" name="Daemon-219.zip" size="4686862" author="ggregory" created="Thu, 3 Nov 2011 18:31:22 +0000"/>
                            <attachment id="12502135" name="LdeServer3.reg" size="6076" author="ggregory" created="Thu, 3 Nov 2011 12:01:51 +0000"/>
                            <attachment id="12497511" name="NoKey.PNG" size="40844" author="ggregory" created="Mon, 3 Oct 2011 18:38:02 +0000"/>
                            <attachment id="12497513" name="SystemLdeService3.txt" size="2218" author="ggregory" created="Mon, 3 Oct 2011 18:59:47 +0000"/>
                            <attachment id="12497485" name="WER8D3F.tmp.WERInternalMetadata.xml" size="3444" author="ggregory" created="Mon, 3 Oct 2011 17:00:01 +0000"/>
                            <attachment id="12497486" name="WERA3BC.tmp.appcompat.txt" size="5722" author="ggregory" created="Mon, 3 Oct 2011 17:00:01 +0000"/>
                            <attachment id="12497487" name="WERA3BD.tmp.mdmp" size="289570" author="ggregory" created="Mon, 3 Oct 2011 17:00:01 +0000"/>
                            <attachment id="12497488" name="commons-daemon.2011-10-03.log" size="2364" author="ggregory" created="Mon, 3 Oct 2011 17:00:01 +0000"/>
                            <attachment id="12497500" name="install-lde-service.cmd" size="968" author="ggregory" created="Mon, 3 Oct 2011 17:59:21 +0000"/>
                            <attachment id="12497489" name="ldeservice3-stderr.2011-10-03.log" size="195" author="ggregory" created="Mon, 3 Oct 2011 17:00:01 +0000"/>
                            <attachment id="12497490" name="ldeservice3-stdout.2011-10-03.log" size="195" author="ggregory" created="Mon, 3 Oct 2011 17:00:01 +0000"/>
                            <attachment id="12502136" name="register.cmd" size="968" author="ggregory" created="Thu, 3 Nov 2011 12:01:51 +0000"/>
                            <attachment id="12502137" name="unregister.cmd" size="91" author="ggregory" created="Thu, 3 Nov 2011 12:01:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>15.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>43826</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tjbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170439</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-218] CLONE - procrun as tomcat5.exe from Tomcat 5.5.17 does not start, when installed into the file path containing non-ascii character</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-218</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Tomcat Service can not be started if Tomcat was installed into the path, &lt;br/&gt;
containing non-ASCII (e.g. Japanese or Chinese) symbols.&lt;/p&gt;

&lt;p&gt;The problem is apparently due to the improper treatment of non-ascii &lt;br/&gt;
characters in the &quot;Java classpath&quot; section of the Service settings.&lt;/p&gt;

&lt;p&gt;In tomcat5w.exe GUI or windows registry I could see proper PATH, namely&lt;br/&gt;
C:[ONE CHINESE HIEROGLIPH]\Tomcat 5.5\bin\bootstrap.jar&lt;/p&gt;

&lt;p&gt;Unfortunately, service doesn&apos;t get started with the following log:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2006-09-15 18:29:17&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;457  javajni.c&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; FindClass &lt;br/&gt;
org/apache/catalina/startup/Bootstrap failed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2006-09-15 18:29:17&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;935  prunsrv.c&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; Failed loading main &lt;br/&gt;
org/apache/catalina/startup/Bootstrap class C:\ss\Tomcat 5.5\bin\bootstrap.jar&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2006-09-15 18:29:17&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;1179 prunsrv.c&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ServiceStart returned 3&lt;/p&gt;

&lt;p&gt;where the non-ascii symbol gets replaced with improper ascii &apos;ss&apos; sequence.&lt;/p&gt;


&lt;p&gt;Moreover, I tried to define environmental variables PR_CLASSPATH and &lt;br/&gt;
PR_STARTPATH instead of using corresponding service params. The result is &lt;br/&gt;
exactly the same.&lt;/p&gt;

&lt;p&gt;Please, suggest me the workaround to make Tomcat service run.&lt;/p&gt;

&lt;p&gt;P.S. The problem is stable either under JRE 1.5.0_02 or 1.4.2_10 (within &lt;br/&gt;
tomcat compatibility package). The problem exist apparently under all OS (in &lt;br/&gt;
particular, it was detected on Windows 2000 and Windows XP Pro 2002 SP2 either &lt;br/&gt;
Chinese version or standard English with Chinese System locale installed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12525032">DAEMON-218</key>
            <summary>CLONE - procrun as tomcat5.exe from Tomcat 5.5.17 does not start, when installed into the file path containing non-ascii character</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="xelagr">Alexey Grishkov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Sep 2011 09:09:59 +0000</created>
                <updated>Thu, 3 Nov 2011 13:41:32 +0000</updated>
                            <resolved>Thu, 3 Nov 2011 09:05:54 +0000</resolved>
                                    <version>1.0.7</version>
                                    <fixVersion>1.0.8</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13116305" author="xelagr" created="Wed, 28 Sep 2011 09:12:26 +0000"  >&lt;p&gt;I had this problem on tomcat 6.0.20 even with fixes from &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-87&quot; title=&quot;procrun as tomcat5.exe from Tomcat 5.5.17 does not start, when installed into the file path containing non-ascii character&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-87&quot;&gt;&lt;del&gt;DAEMON-87&lt;/del&gt;&lt;/a&gt; included.&lt;br/&gt;
I installed it on Russian and Japanese machines and got the error.&lt;/p&gt;

&lt;p&gt;It seems that java requires classpath and other options in current system encoding, not in UTF-8, so I tried to convert them to ANSI encoding and tomcat started to works.&lt;/p&gt;

&lt;p&gt;I attach fixed files with ANSI conversion (sources are taken from daemon 1.0.2)&lt;/p&gt;</comment>
                            <comment id="13139193" author="mturk@apache.org" created="Sat, 29 Oct 2011 11:36:05 +0000"  >&lt;p&gt;Correct, JVM uses locale-&amp;gt;unicode conversion &lt;br/&gt;
Will be fixed in 1.0.8&lt;/p&gt;</comment>
                            <comment id="13142976" author="mturk@apache.org" created="Thu, 3 Nov 2011 09:05:54 +0000"  >&lt;p&gt;Fixed by using the Wide -&amp;gt; ANSI conversion instead Wide -&amp;gt; UTF8.&lt;/p&gt;</comment>
                            <comment id="13143077" author="mturk@apache.org" created="Thu, 3 Nov 2011 12:37:32 +0000"  >
&lt;p&gt;Didn&apos;t we agree that the Fix Version/s should reflect the version fixed?&lt;br/&gt;
We had that discussion couple of months back and the&lt;br/&gt;
Fix Version/s means: Version fixed not version containing the fix!&lt;br/&gt;
You were even contacting and opened upstream JIRA ticket for that.&lt;/p&gt;

&lt;p&gt;So please stop editing those properties, and revert the changes.&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
&amp;#8211; &lt;br/&gt;
^TM&lt;/p&gt;</comment>
                            <comment id="13143101" author="sebb@apache.org" created="Thu, 3 Nov 2011 12:58:41 +0000"  >&lt;p&gt;My recollection was that:&lt;/p&gt;

&lt;p&gt;&quot;Affects versions&quot; is used to document the versions to which the issue applies.&lt;/p&gt;

&lt;p&gt;&quot;Fix version&quot; means the first version containing the fix, i.e. the fixed version.&lt;/p&gt;

&lt;p&gt;For new features it then corresponds to the @since tag (if used).&lt;/p&gt;

&lt;p&gt;Otherwise, there is little point in having the field.&lt;/p&gt;

&lt;p&gt;AUIU that is how all the other Commons components use the field.&lt;/p&gt;

&lt;p&gt;It&apos;s also useful to be able to extract all the &quot;Fix Version&quot; = 1.0.8 to see what was fixed in 1.0.8; that should agree with the release notes.&lt;/p&gt;</comment>
                            <comment id="13143167" author="mturk@apache.org" created="Thu, 3 Nov 2011 13:41:32 +0000"  >
&lt;p&gt;Seems I&apos;m the one that forgot the agreement. Sorry for the noise.&lt;/p&gt;


&lt;p&gt;Cheers&lt;br/&gt;
&amp;#8211; &lt;br/&gt;
^TM&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12350222">DAEMON-87</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12496862" name="prunsrv.c" size="55123" author="xelagr" created="Wed, 28 Sep 2011 09:12:26 +0000"/>
                            <attachment id="12496861" name="utils.c" size="27210" author="xelagr" created="Wed, 28 Sep 2011 09:12:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>34423</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tjaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170434</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-217] Tomcat 6 and 7 Won&apos;t Start Due to Permissions Issue</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-217</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;I upgraded java-jsvc to the next version available from Arch (1.0.7) as part of a routine box-wide upgrade. From that point, Tomcat started complaining that it didn&apos;t have the right permissions to read either manager.xml or host-manager.xml, under /etc/tomcat6/Catalina/localhost/. Perms look OK though: Catalina&apos;s mode is 0755 for tomcat:tomcat, so is localhost&apos;s; manager.xml and host-manager.xml, under localhost, are both 0644 for tomcat:tomcat. /etc/tomcat6/ is set to mode 0770 for root:root, which was the case previously as well. Nothing appears to have changed on that front as part of the upgrade.&lt;br/&gt;
Tomcat failed to deploy the web application directory host-manager (dixit catalina.err), and as a result I couldn&apos;t access the manager app anymore (got a 404 error page telling me the requested resource wasn&apos;t available).&lt;br/&gt;
Downgrading java-jsvc to the last known working version (1.0.6) solved the issue.&lt;/p&gt;

&lt;p&gt;The Issue also affects Tomcat 7. Please see below link to my post on Arch&apos;s forums for greater detail, incl. a dump of catalina.err and a corroborating post from another Arch user.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bbs.archlinux.org/viewtopic.php?id=125943&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bbs.archlinux.org/viewtopic.php?id=125943&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Arch Linux x86-32&lt;/p&gt;</environment>
        <key id="12522670">DAEMON-217</key>
            <summary>Tomcat 6 and 7 Won&apos;t Start Due to Permissions Issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="aimelynem">Aimelyne Mochiron</reporter>
                        <labels>
                    </labels>
                <created>Sun, 11 Sep 2011 08:21:21 +0000</created>
                <updated>Tue, 13 Sep 2011 09:48:42 +0000</updated>
                            <resolved>Tue, 13 Sep 2011 09:48:42 +0000</resolved>
                                    <version>1.0.7</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13102951" author="mturk@apache.org" created="Mon, 12 Sep 2011 19:29:36 +0000"  >&lt;p&gt;With 1.0.7 we fixed a security issue (CVE-2011-2729)&lt;br/&gt;
As you can see the fix works &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I suppose your jsvc is linked to libcap so that&apos;s the&lt;br/&gt;
reason. Previous versions have wrongly left the jvm&lt;br/&gt;
with the elevated capabilities, which is security issue&lt;br/&gt;
and allows to write to the place where the -user (tomcat)&lt;br/&gt;
shouldn&apos;t. You can easily check that by running the&lt;br/&gt;
catalina.sh directly as tomcat user (without jsvc).&lt;br/&gt;
It will fail at the same place.&lt;/p&gt;</comment>
                            <comment id="13103429" author="aimelynem" created="Tue, 13 Sep 2011 07:41:46 +0000"  >&lt;p&gt;Thanks for your post. jsvc in Arch is linked against libcap indeed; running &apos;ldd /usr/bin/jsvc&apos; returns:&lt;/p&gt;

&lt;p&gt;        linux-gate.so.1 =&amp;gt;  (0xb7839000)&lt;br/&gt;
	libdl.so.2 =&amp;gt; /lib/libdl.so.2 (0xb781f000)&lt;br/&gt;
	libpthread.so.0 =&amp;gt; /lib/libpthread.so.0 (0xb7804000)&lt;br/&gt;
	libcap.so.2 =&amp;gt; /lib/libcap.so.2 (0xb77ff000)&lt;br/&gt;
	libc.so.6 =&amp;gt; /lib/libc.so.6 (0xb7696000)&lt;br/&gt;
	/lib/ld-linux.so.2 (0xb783a000)&lt;br/&gt;
	libattr.so.1 =&amp;gt; /lib/libattr.so.1 (0xb7690000)&lt;/p&gt;

&lt;p&gt;As for running catalina.sh as user tomcat, it fails more completely than using Arch&apos;s startup script (which uses jsvc): Tomcat doesn&apos;t start at all.&lt;/p&gt;</comment>
                            <comment id="13103498" author="mturk@apache.org" created="Tue, 13 Sep 2011 09:48:42 +0000"  >&lt;p&gt;Closing the issue although users can expect this kind of behaviour to happen. With recent security fixes jsvc doesn&apos;t grant the jvm extra file capabilities any more. Users must ensure tha -user has enough privileges to create/read files.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37588</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tl0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170715</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-215] Cannot set local username and password for a Win32 service</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-215</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;installing a new service without supplying the --ServiceUser --ServicePassword installs the service correctly but using the LocalSystem account. If you want to use a local user, which of course has at least the &quot;log on as a service&quot; right, and supply the credentials via the parameters you get an error. To be more specific, in service.c line 211, the CHANGE_SERVICE macro fails with error 87L ERROR_INVALID_PARAMETER. This happens at least when creating and updating a service. Setting other options via this macro work fine, just the username password fail (standalone and in combination with other parameters).&lt;br/&gt;
The solution is specifying SERVICE_WIN32_OWN_PROCESS as ServiceType parameter instead of SERVICE_NO_CHANGE in ChangeServiceConfigW line 27 second parameter.&lt;/p&gt;</description>
                <environment>&lt;p&gt;win32 / server 2003&lt;/p&gt;</environment>
        <key id="12519974">DAEMON-215</key>
            <summary>Cannot set local username and password for a Win32 service</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="wessels">wessels</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Aug 2011 14:27:18 +0000</created>
                <updated>Thu, 3 Nov 2011 11:09:10 +0000</updated>
                            <resolved>Thu, 3 Nov 2011 09:34:25 +0000</resolved>
                                    <version>1.0.7</version>
                                    <fixVersion>1.0.8</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13139198" author="mturk@apache.org" created="Sat, 29 Oct 2011 11:49:54 +0000"  >&lt;p&gt;According to the MSDN this seems to be the case.&lt;br/&gt;
Will be fixed with 1.0.8&lt;/p&gt;</comment>
                            <comment id="13142993" author="mturk@apache.org" created="Thu, 3 Nov 2011 09:34:25 +0000"  >&lt;p&gt;Fixed in the trunk by making sure the option is passes when setting username/password&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37590</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tk4v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170571</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-214] CVE-2011-2729: jsvc fails to drop capabilities on Linux</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-214</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;CVE-2011-2729: Commons Daemon fails to drop capabilities&lt;/p&gt;

&lt;p&gt;Severity: high&lt;/p&gt;

&lt;p&gt;Vendor:&lt;br/&gt;
The Apache Software Foundation&lt;/p&gt;

&lt;p&gt;Versions Affected:&lt;br/&gt;
Commons Daemon 1.0.3 to 1.0.6&lt;br/&gt;
Additionally, these vulnerabilities only occur when all of the&lt;br/&gt;
following are true:&lt;br/&gt;
a) running on Linux operating system&lt;br/&gt;
b) jsvc was compiled with libcap&lt;br/&gt;
c) -user parameter is used&lt;/p&gt;

&lt;p&gt;Description:&lt;br/&gt;
Due to bug in capabilities code, jsvc does not drop capabilities&lt;br/&gt;
allowing the application to access files and directories owned by&lt;br/&gt;
superuser.&lt;/p&gt;

&lt;p&gt;Mitigation:&lt;br/&gt;
Affected users of all versions can mitigate these vulnerabilities by&lt;br/&gt;
taking any of the following actions:&lt;br/&gt;
a) upgrade to a version where the vulnerabilities have been fixed&lt;br/&gt;
   jsvc 1.0.3 - 1.0.6 users should upgrade to 1.0.7 version&lt;br/&gt;
b) do not use -user parameter to switch user&lt;br/&gt;
c) recompile the jsvc without libcap support&lt;/p&gt;

&lt;p&gt;Example:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@fedora jsvctest&amp;#93;&lt;/span&gt;# ./jsvc -cp commons-daemon-1.0.6.jar:. -user jsvc ....&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@fedora jsvctest&amp;#93;&lt;/span&gt;# grep ^Cap /proc/&amp;lt;pid&amp;gt;/status&lt;br/&gt;
CapInh:    0000000000000406&lt;br/&gt;
CapPrm:    0000000000000406&lt;br/&gt;
CapEff:    0000000000000406&lt;br/&gt;
CapBnd:    ffffffffffffffff &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;root@fedora jsvctest&amp;#93;&lt;/span&gt;# ./jsvc -cp commons-daemon-1.0.7.jar:. -user jsvc ....&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;root@fedora jsvctest&amp;#93;&lt;/span&gt;# grep ^Cap /proc/&amp;lt;pid&amp;gt;/status&lt;br/&gt;
CapInh:    0000000000000000&lt;br/&gt;
CapPrm:    0000000000000000&lt;br/&gt;
CapEff:    0000000000000000&lt;br/&gt;
CapBnd:    ffffffffffffffff &lt;/p&gt;


&lt;p&gt;Credit:&lt;br/&gt;
This issue was identified by Wilfried Weissmann.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Linux&lt;/p&gt;</environment>
        <key id="12518690">DAEMON-214</key>
            <summary>CVE-2011-2729: jsvc fails to drop capabilities on Linux</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="mturk@apache.org">Mladen Turk</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Aug 2011 12:12:15 +0000</created>
                <updated>Fri, 12 Aug 2011 12:47:31 +0000</updated>
                            <resolved>Fri, 12 Aug 2011 12:19:39 +0000</resolved>
                                    <version>1.0.3</version>
                    <version>1.0.4</version>
                    <version>1.0.5</version>
                    <version>1.0.6</version>
                                    <fixVersion>1.0.7</fixVersion>
                                    <component>Jsvc</component>
                        <due>Tue, 2 Aug 2011 00:00:00 +0000</due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13084064" author="mturk@apache.org" created="Fri, 12 Aug 2011 12:19:39 +0000"  >&lt;p&gt;Fixed with r1152701&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37591</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tj2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170398</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-207] jsvc for solaris x86_64 uses wrong jre library directory x86_64 instead of amd64</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-207</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The jsvc binary for solaris x86_64 attempts to locate VM library @ /usr/java/jre/lib/x86_64&lt;/p&gt;

&lt;p&gt;The official oracle jdk is installing the x86_64 libraries under the following path /usr/java/jre/lib/amd64&lt;/p&gt;

&lt;p&gt;WORKAROUND:&lt;br/&gt;
cd $JAVA_HOME/jre/lib&lt;br/&gt;
ln -s amd64 x86_64&lt;/p&gt;

&lt;p&gt;Error Messages during startup:&lt;br/&gt;
Attempting to locate VM configuration file /usr/java/lib/x86_64/jvm.cfg&lt;br/&gt;
VM configuration file not found&lt;br/&gt;
.&lt;br/&gt;
.&lt;br/&gt;
.&lt;br/&gt;
Cannot find any VM in Java Home /usr/java&lt;br/&gt;
Cannot locate JVM library file&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Solaris 10&lt;/p&gt;

&lt;p&gt;&quot;uname -a&quot;&lt;br/&gt;
SunOS xxx 5.10 Generic_139556-08 i86pc i386 i86pc Solaris&lt;/p&gt;

&lt;p&gt;&quot;java -version&quot;&lt;br/&gt;
java version &quot;1.6.0_14&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_14-b08)&lt;br/&gt;
Java HotSpot(TM) Client VM (build 14.0-b16, mixed mode, sharing)&lt;/p&gt;

&lt;p&gt;&quot;isainfo -b&quot;&lt;br/&gt;
64&lt;/p&gt;</environment>
        <key id="12509161">DAEMON-207</key>
            <summary>jsvc for solaris x86_64 uses wrong jre library directory x86_64 instead of amd64</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="grandon">Muris Ahmovic</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Jun 2011 08:54:41 +0000</created>
                <updated>Fri, 3 Jun 2011 17:35:23 +0000</updated>
                            <resolved>Fri, 3 Jun 2011 17:35:23 +0000</resolved>
                                    <version>1.0.5</version>
                                    <fixVersion>1.0.6</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13043900" author="mturk@apache.org" created="Fri, 3 Jun 2011 17:35:23 +0000"  >&lt;p&gt;This not an error but rather the faulty binaries we have on our dist site. You can easily rebuild you binaries by making sure you provide&lt;br/&gt;
./configure BUILD_CPU=x86_64 ...&lt;br/&gt;
Internally the x86_64 will be converted to amd64 as compile time defined (-DCPU=\\&quot;amd64&lt;br class=&quot;atl-forced-newline&quot; /&gt;&quot;)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37598</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tkp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170662</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-205] host_cpu=arm* not supported in src/native/unix/support/apsupport.m4</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-205</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Configure script fails for ARM hosts, as &quot;arm*&quot; is not present in the CPU list in src/native/unix/support/apsupport.m4:&lt;/p&gt;

&lt;p&gt;~/dev/commons-daemon/src/native/unix$ ./configure&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Current host ***&lt;br/&gt;
checking build system type... armv7l-unknown-linux-gnu&lt;br/&gt;
checking host system type... armv7l-unknown-linux-gnu&lt;br/&gt;
checking cached host system type... ok&lt;/li&gt;
			&lt;li&gt;C-Language compilation tools ***&lt;br/&gt;
...&lt;/li&gt;
			&lt;li&gt;Host support ***&lt;br/&gt;
checking C flags dependant on host system type... failed&lt;br/&gt;
configure: error: Unsupported CPU architecture &quot;armv7l&quot;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;$ uname -a&lt;br/&gt;
Linux panda0 2.6.38-1002-linaro-omap #3-Ubuntu SMP Fri Apr 15 14:00:54 UTC 2011 armv7l armv7l armv7l GNU/Linux&lt;br/&gt;
$ gcc -v&lt;br/&gt;
Using built-in specs.&lt;br/&gt;
COLLECT_GCC=gcc&lt;br/&gt;
COLLECT_LTO_WRAPPER=/usr/lib/arm-linux-gnueabi/gcc/arm-linux-gnueabi/4.5.2/lto-wrapper&lt;br/&gt;
Target: arm-linux-gnueabi&lt;br/&gt;
Configured with: ../src/configure -v --with-pkgversion=&apos;Ubuntu/Linaro 4.5.2-8ubuntu4&apos; --with-bugurl=&lt;a href=&quot;file:///usr/share/doc/gcc-4.5/README.Bugs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///usr/share/doc/gcc-4.5/README.Bugs&lt;/a&gt; --enable-languages=c,c+&lt;ins&gt;,fortran,objc,obj-c&lt;/ins&gt;+ --prefix=/usr --program-suffix=-4.5 --enable-shared --enable-multiarch --with-multiarch-defaults=arm-linux-gnueabi --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib/arm-linux-gnueabi --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.5 --libdir=/usr/lib/arm-linux-gnueabi --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-plugin --enable-gold --enable-ld=default --with-plugin-ld=ld.gold --enable-objc-gc --disable-sjlj-exceptions --with-arch=armv7-a --with-float=softfp --with-fpu=vfpv3-d16 --with-mode=thumb --disable-werror --enable-checking=release --build=arm-linux-gnueabi --host=arm-linux-gnueabi --target=arm-linux-gnueabi&lt;br/&gt;
Thread model: posix&lt;br/&gt;
gcc version 4.5.2 (Ubuntu/Linaro 4.5.2-8ubuntu4)&lt;/p&gt;</environment>
        <key id="12507057">DAEMON-205</key>
            <summary>host_cpu=arm* not supported in src/native/unix/support/apsupport.m4</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="scurrilous">Trevor Robinson</reporter>
                        <labels>
                            <label>build</label>
                    </labels>
                <created>Thu, 12 May 2011 23:34:43 +0000</created>
                <updated>Mon, 6 Jun 2011 18:54:20 +0000</updated>
                            <resolved>Thu, 2 Jun 2011 15:33:35 +0000</resolved>
                                    <version>1.0.5</version>
                                    <fixVersion>1.0.6</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13032748" author="scurrilous" created="Thu, 12 May 2011 23:38:00 +0000"  >&lt;p&gt;Simply adds an &quot;arm*&quot; case to the host_cpu case statement in apsupport.m4.&lt;/p&gt;</comment>
                            <comment id="13042830" author="mturk@apache.org" created="Thu, 2 Jun 2011 15:33:35 +0000"  >&lt;p&gt;Committed and will be part of 1.0.6 release. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12479032" name="commons-daemon-arm.patch" size="528" author="scurrilous" created="Thu, 12 May 2011 23:38:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37600</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tk1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170557</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-203] unexpected procrun exit (Console LOGOFF event signaled )</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-203</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;The service is installed using a command like the following:&lt;/p&gt;


&lt;p&gt;agent.exe //IS//agent --Install=c:\agentpath\bat\agent.exe --Description=&quot;agent&quot;  --Classpath=[&lt;span class=&quot;error&quot;&gt;&amp;#91;all the needed jars&amp;#93;&lt;/span&gt;] --JvmMs=10 --JvmMx=512 --Jvm=%JREPATH:\=/%\bin\client\jvm.dll --StartMode=java  --StartClass=the.agent.start.class --StartMethod=start --StopClass=the.agent.stop.class --StopMethod=stop --LogPath=c:\log\agent\ --StdOutput=c:\log\agent\service-stdout.log --StdError=c:\log\agent\service-stderr.log --LogLevel=DEBUG&lt;/p&gt;



&lt;p&gt;The application is started using NET START and works fine.&lt;/p&gt;


&lt;p&gt;Sometimes, the application catch a LOGOFF event and stops itself as you can see on the following log:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
[2011-04-11 05:01:38] [debug] ( prunsrv.c:1494) Commons Daemon procrun log initialized
[2011-04-11 05:01:38] [info]  (          :0   ) Commons Daemon procrun (1.0.5.0 32-bit) started
[2011-04-11 05:01:38] [info]  (          :0   ) Running &apos;agent&apos; Service...
[2011-04-11 05:01:38] [debug] ( prunsrv.c:1246) Inside ServiceMain...
[2011-04-11 05:01:38] [info]  (          :0   ) Starting service...
[2011-04-11 05:01:38] [info]  (          :0   ) Service started in 46 ms.
[2011-04-11 05:01:40] [debug] ( prunsrv.c:1369) Waiting for worker to finish...
[2011-04-11 10:27:05] [info]  (          :0   ) Console LOGOFF event signaled
[2011-04-11 10:27:05] [info]  (          :0   ) Console LOGOFF event signaled
[2011-04-11 10:27:06] [debug] ( prunsrv.c:1374) Worker finished.
[2011-04-11 10:27:06] [debug] ( prunsrv.c:1397) Waiting for all threads to exit
[2011-04-11 10:27:06] [debug] ( prunsrv.c:1401) JVM destroyed.
[2011-04-11 10:27:06] [info]  (          :0   ) Run service finished.
[2011-04-11 10:27:06] [info]  (          :0   ) Commons Daemon procrun finished
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment>&lt;p&gt;Procun is used in a Windows 2003 server to manage a java application.&lt;/p&gt;</environment>
        <key id="12503925">DAEMON-203</key>
            <summary>unexpected procrun exit (Console LOGOFF event signaled )</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mpeg">M.G.</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Apr 2011 12:26:51 +0000</created>
                <updated>Thu, 2 Jun 2011 18:49:00 +0000</updated>
                            <resolved>Thu, 2 Jun 2011 18:49:00 +0000</resolved>
                                    <version>1.0.4</version>
                    <version>1.0.5</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13042979" author="mturk@apache.org" created="Thu, 2 Jun 2011 18:49:00 +0000"  >&lt;p&gt;In your example you are using --StartMode=java which will cause to spawn a separate java.exe process. In that case you will need to pass the -Xrs to that process so it doesn&apos;t get killed on logoff. Or I suppose you probably meant to use the --StartMode=jvm since you have --Jvm param.&lt;br/&gt;
Anyhow, Jira is not support forum so make further discussion on commons users list with &lt;span class=&quot;error&quot;&gt;&amp;#91;DAEMON&amp;#93;&lt;/span&gt; subject prefix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37602</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tkyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170705</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-200] commons daemon should be usable with jdk 1.5</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-200</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Would it be possible to publish a new commons daemon release which could be used with jdk 1.5 ? At the moment it throw an Exception:&lt;/p&gt;

&lt;p&gt;ERROR] &amp;lt;&lt;a href=&quot;https://hudson.apache.org/hudson/job/james-server-trunk/org.apache.james$james-server-container-spring/ws/src/main/java/org/apache/james/container/spring/Main.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/james-server-trunk/org.apache.james$james-server-container-spring/ws/src/main/java/org/apache/james/container/spring/Main.java&lt;/a&gt;&amp;gt;:&lt;span class=&quot;error&quot;&gt;&amp;#91;23,-1&amp;#93;&lt;/span&gt; cannot access org.apache.commons.daemon.Daemon&lt;br/&gt;
bad class file: /home/hudson/.m2/repository/commons-daemon/commons-daemon/1.0.5/commons-daemon-1.0.5.jar(org/apache/commons/daemon/Daemon.class)&lt;br/&gt;
class file has wrong version 50.0, should be 49.0&lt;/p&gt;</description>
                <environment>&lt;p&gt;jdk 1.5&lt;/p&gt;</environment>
        <key id="12502182">DAEMON-200</key>
            <summary>commons daemon should be usable with jdk 1.5</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="norman">Norman Maurer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Mar 2011 13:37:33 +0000</created>
                <updated>Mon, 6 Jun 2011 14:21:33 +0000</updated>
                            <resolved>Mon, 6 Jun 2011 14:21:33 +0000</resolved>
                                                    <fixVersion>1.0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13010141" author="sebb@apache.org" created="Wed, 23 Mar 2011 14:25:10 +0000"  >&lt;p&gt;Appears to have been caused by missing source and target attributes in the Ant build file.&lt;/p&gt;</comment>
                            <comment id="13010146" author="sebb@apache.org" created="Wed, 23 Mar 2011 14:28:28 +0000"  >&lt;p&gt;I&apos;ve fixed the Ant build file (Pom was OK).&lt;/p&gt;</comment>
                            <comment id="13010147" author="norman" created="Wed, 23 Mar 2011 14:29:29 +0000"  >&lt;p&gt;cool.. would it be possible to release 1.0.6 with the fix and push it to maven repos ?&lt;/p&gt;</comment>
                            <comment id="13010157" author="sebb@apache.org" created="Wed, 23 Mar 2011 14:53:15 +0000"  >&lt;p&gt;Uploaded 1.6-dev-SNAPSHOT to &lt;br/&gt;
&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/commons-daemon/commons-daemon/1.0.6-dev-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/commons-daemon/commons-daemon/1.0.6-dev-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13044869" author="mturk@apache.org" created="Mon, 6 Jun 2011 14:21:33 +0000"  >&lt;p&gt;This has been fixed as part of r1084599.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37605</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tk1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170555</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-199] DaemonWrapper fails when the wrapped class does not have a (or restricts the visibility of its) no-argument constructor</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-199</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When using DaemonWrapper to wrap an existing Java class, DaemonWrapper assumes that it can instantiate the class using a no-argument constructor. I tried to use DaemonWrapper to wrap a bootstrap class that declared the no-argument constructor as private. The wrapped class had a static main method and so could be used by the ordinary Java bootstrap procedure. The attached patch fixes the issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12500694">DAEMON-199</key>
            <summary>DaemonWrapper fails when the wrapped class does not have a (or restricts the visibility of its) no-argument constructor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tdyas">Tom Dyas</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Mar 2011 22:29:00 +0000</created>
                <updated>Wed, 20 Apr 2011 21:56:33 +0000</updated>
                            <resolved>Wed, 20 Apr 2011 21:56:33 +0000</resolved>
                                    <version>1.0.5</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13020804" author="nicobrevin" created="Sun, 17 Apr 2011 14:40:13 +0000"  >&lt;p&gt;You could always create your own shim to do this, seeing as no-one wants to accept your patch.&lt;/p&gt;</comment>
                            <comment id="13022390" author="tdyas" created="Wed, 20 Apr 2011 21:56:08 +0000"  >&lt;p&gt;I can (and will have to now) create a shim given your resolution of this issue.  However, I still believe that DamonWrapper.Invoker#invoke() should not be passing an instantiated object to java.lang.reflect.Method when trying to invoke a static method. While the javadocs for java.lang.reflect.Method#invoke do state that the object is ignored in the case of a static method, it seems to unnecessarily limit the usefulness of DaemonWrapper to have it require that the wrapped object be instantiated when there is no need to do so as in the case of a static method.&lt;/p&gt;

&lt;p&gt;Also, just so I know how this project&apos;s governance works: Where are technical discussions generally held for the project? I am used to the Mozilla method of conducting the technical discussions in the issue tracking system and not in an offline location where the a patch submitter can&apos;t even attempt to argue the merits of a patch to the project&apos;s developers. The &quot;seeing as no-one wants to accept your patch&quot; phrase seems very gruff in tone to me.&lt;/p&gt;

&lt;p&gt;No matter, I&apos;ll close the issue myself.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12472868" name="commons-daemon.patch" size="1036" author="tdyas" created="Mon, 7 Mar 2011 22:31:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37606</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uzdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178873</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-198] Unexpected behavior parsing arguments to &quot;install service&quot; for procrun</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-198</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When running the command line to install a procrun service, I had a batch script that looked something like:&lt;/p&gt;

&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;set basePath=c:\base path\&lt;br/&gt;
...&lt;br/&gt;
procrun.exe //IS ... ++JvmOptions=-DBASE_PATH=&quot;%basePath%&quot; --JvmMs=...&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Unfortunately when the arguments were parsed the ending slash for the basePath environment variable caused the double quote to be escaped.  This threw off all of the subsequent arguments, causing a large string to be put into the Jvm Options registry key, but the min heap size (for example) to be not set at all.&lt;/p&gt;

&lt;p&gt;The workaround we used was to put a double slash at the end of basePath, e.g. basePath=c:\base path&lt;br class=&quot;atl-forced-newline&quot; /&gt;.  We couldn&apos;t easily switch all of the slashes to front slashes because we were using %cd% to fill in some of the paths.  Though maybe the mixed slashes would be ok.&lt;/p&gt;

&lt;p&gt;In any case, as this is a Windows application a trailing slash I would expect to be common, and in parsing command line arguments with paths in quotes-- this seems like a common point of potential confusion and unexpected results.  Maybe its not worth the trouble, but I wanted to bring it up in any case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12498827">DAEMON-198</key>
            <summary>Unexpected behavior parsing arguments to &quot;install service&quot; for procrun</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="steve.ash">Steve Ash</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Feb 2011 06:27:52 +0000</created>
                <updated>Mon, 6 Jun 2011 14:30:05 +0000</updated>
                            <resolved>Mon, 6 Jun 2011 14:30:05 +0000</resolved>
                                    <version>1.0.3</version>
                                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13044874" author="mturk@apache.org" created="Mon, 6 Jun 2011 14:30:05 +0000"  >&lt;p&gt;Paths ending with backslashes are invalid.&lt;br/&gt;
If you suspect you can have a backslash in the evironment variable you can use the following:&lt;br/&gt;
++JvmOptions=-DBASE_PATH=&quot;%basePath:\=/%&quot;&lt;br/&gt;
This will expand basePath with all back slashes translated to forward slashes.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37607</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uzfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178882</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-195] &quot;net stop serviceName&quot; prints &quot;Error 109: The pipe has been ended.&quot; Stopping via Windows Control Panel hangs.</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-195</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;This issue was reported for Tomcat 7.0.6: &lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=50673&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=50673&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To reproduce:&lt;br/&gt;
1. Install apache-tomcat-7.0.6.exe   I am installing with default options. I am not starting Tomcat after installation.&lt;br/&gt;
2. Launch the command prompt window.&lt;br/&gt;
3. The following command succeeds:&lt;br/&gt;
net stop Tomcat7&lt;br/&gt;
It prints two localized messages that can be translated as&lt;br/&gt;
The &quot;Apache Tomcat 7&quot; service is being started.&lt;br/&gt;
The &quot;Apache Tomcat 7&quot; service started successfully.p&lt;br/&gt;
4. The following command apparently fails, but actually it succeeds:&lt;br/&gt;
net stop Tomcat7&lt;br/&gt;
It prints two localized messages that are, citing from BZ 50673:&lt;br/&gt;
System error 109.&lt;br/&gt;
The pipe has been ended.&lt;br/&gt;
Note that &quot;The service being stopped&quot; message is not printed.&lt;br/&gt;
5. Repeating the command shows that the service has been stopped:&lt;br/&gt;
net stop Tomcat7&lt;br/&gt;
The &quot;Apache Tomcat 7&quot; service has not been started.&lt;/p&gt;

&lt;p&gt;The commons-daemon.&amp;lt;date&amp;gt;.log contains only the following four lines when stopping the service with Debug logging enabled:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-27 20:18:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Stopping service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-27 20:18:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:844 ) argv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; = stop&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-27 20:18:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:891 ) Java Worker thread started org/apache/catalina/startup/Bootstrap:main&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-27 20:19:00&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:871 ) Waiting for java jni stop worker to finish...&lt;/p&gt;

&lt;p&gt;Stopping the service with Stop button in prunmgr app succeeds without any messages.&lt;br/&gt;
Stopping the service from the Services list in the Control Panel quickly goes to 50% of progress but then continues to wait forever, without any changes on the screen.&lt;/p&gt;</description>
                <environment>&lt;p&gt;WinXP SP3 32-bit&lt;/p&gt;</environment>
        <key id="12496962">DAEMON-195</key>
            <summary>&quot;net stop serviceName&quot; prints &quot;Error 109: The pipe has been ended.&quot; Stopping via Windows Control Panel hangs.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kkolinko">Konstantin Kolinko</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Jan 2011 17:46:54 +0000</created>
                <updated>Sat, 5 Nov 2011 18:46:39 +0000</updated>
                            <resolved>Sat, 5 Nov 2011 18:46:39 +0000</resolved>
                                    <version>1.0.5</version>
                                    <fixVersion>1.0.8</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12989234" author="kkolinko" created="Tue, 1 Feb 2011 15:05:57 +0000"  >&lt;p&gt;This issue was also observed on Windows 2003 R2 (with Tomcat 7.0.6):&lt;br/&gt;
&lt;a href=&quot;http://markmail.org/thread/xzvdk6d3ycoc5v7d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://markmail.org/thread/xzvdk6d3ycoc5v7d&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12989289" author="kkolinko" created="Tue, 1 Feb 2011 17:42:17 +0000"  >&lt;p&gt;Looking at the logs (see Description above) and at the source code, it looks that&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;  apxJavaWait(hWorker, INFINITE, FALSE);&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;call in prunsrv.c line 873 (in serviceStop(LPVOID)) never returns and the prunsrv process just disappears.&lt;/p&gt;

&lt;p&gt;1. There is no &quot;Java Worker thread finished %s:%s with status=%d&quot; message from the worker thread (&lt;tt&gt;javajni.c method __apxJavaWorkerThread(LPVOID)&lt;/tt&gt;)&lt;br/&gt;
2. There is no &quot;Java jni stop worker finished.&quot; message from thread executing serviceStop() call (&lt;tt&gt;prunsrv.c method serviceStop(LPVOID))&lt;/tt&gt;&lt;/p&gt;


&lt;p&gt;Tomcat 7.0.6 and recent versions of Tomcat 6.0 (6.0.30+) when being run as a service terminate themselves by calling System.exit(0).&lt;/p&gt;

&lt;p&gt;The lines are, in &lt;tt&gt;org.apache.catalina.startup.Catalina#stopServer(String[])&lt;/tt&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;            // Server object already present. Must be running as a service&lt;br/&gt;
            // Shutdown hook will take care of clean-up&lt;br/&gt;
            System.exit(0);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I see that prunsrv has special support for calling System.exit as the stop method. Thus here is a &lt;b&gt;workaround&lt;/b&gt;:&lt;/p&gt;

&lt;p&gt;1. Open the &lt;em&gt;Configure Tomcat&lt;/em&gt; dialog (the prunmgr application, aka tomcat7w.exe, aka tomcat6w.exe) and &lt;br/&gt;
2. Configure the following settings on the &lt;b&gt;Shutdown&lt;/b&gt; tab:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;b&gt;Class&lt;/b&gt;: &lt;tt&gt;java.lang.System&lt;/tt&gt;&lt;br/&gt;
&lt;b&gt;Method&lt;/b&gt;: &lt;tt&gt;exit&lt;/tt&gt;&lt;br/&gt;
&lt;b&gt;Arguments&lt;/b&gt;: &lt;em&gt;remove any text from this field&lt;/em&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;With the above configuration the service stops successfully.&lt;/p&gt;


&lt;p&gt;--------&lt;br/&gt;
&lt;em&gt;PS&lt;/em&gt;: some thoughts when investigating this (may be not so useful):&lt;br/&gt;
1. In prunsrv.c in method serviceStop(LPVOID) there is the following call: &lt;tt&gt;_onexit(onExitHook);&lt;/tt&gt;  This is executed only if the class name is &quot;java/lang/System&quot;. I wonder whether it were better if the hook was installed unconditionally. Its job is to report &lt;tt&gt;reportServiceStatus(SERVICE_STOPPED, NO_ERROR, 0);&lt;/tt&gt; back to the service management. Maybe that is not enough, because there are also other places where &quot;java/lang/System&quot; processing differs from executing any other Java class.&lt;/p&gt;

&lt;p&gt;2. If java.lang.System.exit() resulted in a call to ExitProcess (I do not actually know. Just speculating), I would expect from &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; that the thread calling this method was continuing to run. In our case the call was done by the worker thread (&lt;tt&gt;__apxJavaWorkerThread(LPVOID)&lt;/tt&gt; method). But, as there was no &quot;Java Worker thread finished %s:%s with status=%d&quot; message, it means that the thread was abruptly terminated, just like any other.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/ms682658%28v=vs.85%29.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/ms682658%28v=vs.85%29.aspx&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12989577" author="mturk@apache.org" created="Wed, 2 Feb 2011 09:59:30 +0000"  >&lt;p&gt;If running trough standard Daemon classes it is expected that embedding client&lt;br/&gt;
doesn&apos;t call System.exit. I&apos;ll see if that can be unconditionally set.&lt;br/&gt;
However calling System.exit is a hack for clients that doesn&apos;t use Daemon&lt;br/&gt;
classes and have shutdown hook installed.&lt;br/&gt;
Of course this prevents clean procrun shutdown cause it will never&lt;br/&gt;
execute code after apxHandleWait (serviceMain)&lt;/p&gt;

&lt;p&gt;rv = apxHandleWait(gWorker, INFINITE, FALSE);&lt;br/&gt;
apxLogWrite(APXLOG_MARK_DEBUG &quot;Worker finished.&quot;);&lt;/p&gt;


&lt;p&gt;System.exit will cause the procrun to exit uncleanly from apxHandleWait&lt;br/&gt;
However I did best to ensure this doesn&apos;t leave anything hanging around,&lt;br/&gt;
so basically it just misses few &quot;finished&quot; log messages.&lt;/p&gt;



</comment>
                            <comment id="13104733" author="licao" created="Wed, 14 Sep 2011 18:07:00 +0000"  >&lt;p&gt;I am trying to wrap a Java application using &quot;JVM&quot; option and when stopping the service from Services list in Control Panel it eventually stops after a long wait with the following message in a popup dialog box:&lt;/p&gt;

&lt;p&gt;Cound not stop the myService service on local Computer.&lt;br/&gt;
Error 1053: The service did not respond to the start or control request in a timely fashion.&lt;/p&gt;

&lt;p&gt;The OS is Microsoft Windows Server 2003 Standard x64 Edition Service Pack 2 and I am using the AMD64 binary. &quot;net stop serviceName&quot; command exhibits the same behavior as reported in the first comment.&lt;/p&gt;</comment>
                            <comment id="13143511" author="mturk@apache.org" created="Thu, 3 Nov 2011 20:34:09 +0000"  >&lt;p&gt;This will always happen if the stop method calls System.exit()&lt;br/&gt;
There is no way to bypass that.&lt;br/&gt;
On Tomcat you can use --StopMode java and it&apos;ll shutdown cleanly.&lt;br/&gt;
Think we will need to make that as default (at least on Tomcat)&lt;/p&gt;</comment>
                            <comment id="13144783" author="mturk@apache.org" created="Sat, 5 Nov 2011 18:46:39 +0000"  >&lt;p&gt;Seems the fix was really trivial.&lt;br/&gt;
Instead waiting on stop thread to finish, return control immediately to the service control manager.&lt;br/&gt;
This prevents broken pipe messages if start or stop method calls System.exit&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37610</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tk5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170576</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-194] deadloop and no return value in logger_child</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-194</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When make run it write to log:&lt;br/&gt;
==== log ====&lt;br/&gt;
...&lt;br/&gt;
gcc -march=i686 -mtune=generic -O2 -pipe -DOS_LINUX -DDSO_DLFCN -DCPU=\&quot;i386\&quot; -Wall -Wstrict-prototypes -DHAVE_LIBCAP  -I/opt/java/include -I/opt/java/include/linux -c jsvc-unix.c -o jsvc-unix.o&lt;br/&gt;
jsvc-unix.c: In function &apos;logger_child&apos;:&lt;br/&gt;
jsvc-unix.c:821:1: warning: no return statement in function returning non-void&lt;br/&gt;
...&lt;br/&gt;
==== /log ====&lt;/p&gt;

&lt;p&gt;I instect jsvc-unix.c and not found any break into while loop body of logger_child.&lt;/p&gt;

&lt;p&gt;I think this bug related with &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-186&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;DAEMON-186&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6, ant 1.8.2, linux&lt;/p&gt;</environment>
        <key id="12495626">DAEMON-194</key>
            <summary>deadloop and no return value in logger_child</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="ur6lad">Vitaliy Berdinskikh</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Jan 2011 21:47:48 +0000</created>
                <updated>Mon, 6 Jun 2011 18:55:47 +0000</updated>
                            <resolved>Mon, 6 Jun 2011 14:18:08 +0000</resolved>
                                    <version>1.0.5</version>
                                    <fixVersion>1.0.6</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12982769" author="mturk@apache.org" created="Mon, 17 Jan 2011 17:51:57 +0000"  >&lt;p&gt;Huh.&lt;/p&gt;

&lt;p&gt;You are correct, the entire logger_child function doesn&apos;t handle any errors.&lt;br/&gt;
It is an infinite loop so if child dies, it&apos;ll just continue lopping.&lt;/p&gt;

&lt;p&gt;Workaround is not to use syslog until this issue is resolved.&lt;/p&gt;</comment>
                            <comment id="12983083" author="mturk@apache.org" created="Tue, 18 Jan 2011 08:59:11 +0000"  >&lt;p&gt;Fixed in the trunk.&lt;br/&gt;
It would be nice if you could confirm the fix resolves the issue so we can release 1.0.6&lt;/p&gt;</comment>
                            <comment id="13044866" author="mturk@apache.org" created="Mon, 6 Jun 2011 14:18:08 +0000"  >&lt;p&gt;Fixed in the trunk.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12479103">DAEMON-186</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37611</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tk07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170550</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-191] High CPU on Solaris x86</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-191</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;jsvc is currently running at approx 60% CPU utilisation. &lt;/p&gt;

&lt;p&gt;Output from server &lt;/p&gt;

&lt;p&gt;prstat show TID&apos;s 47 &amp;amp; 50 are consuming 50% CPU&lt;/p&gt;

&lt;p&gt;   PID USERNAME  SIZE   RSS STATE  PRI NICE      TIME  CPU PROCESS/LWPID&lt;br/&gt;
 16955 efunds   1278M 1208M cpu0    30    0  46:30:36  24% jsvc/47&lt;br/&gt;
 16955 efunds   1278M 1208M cpu3    30    0  46:23:24  24% jsvc/50&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:20:20 1.9% jsvc/23&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   52    0   0:37:54 1.4% jsvc/30&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   52    0   0:15:11 0.8% jsvc/51&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:21:25 0.8% jsvc/27&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:17:19 0.5% jsvc/57&lt;br/&gt;
 16955 efunds   1278M 1208M cpu1    59    0   0:11:58 0.4% jsvc/52&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:20:14 0.3% jsvc/2&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:23:44 0.1% jsvc/24&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:02:51 0.1% jsvc/38&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:14:19 0.0% jsvc/35&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:29:01 0.0% jsvc/32&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:03:06 0.0% jsvc/46&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:33:17 0.0% jsvc/31&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:02:42 0.0% jsvc/45&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:03:12 0.0% jsvc/43&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:01:13 0.0% jsvc/14&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:02:01 0.0% jsvc/8&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:15:24 0.0% jsvc/34&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:24:36 0.0% jsvc/25&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:01:12 0.0% jsvc/12&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:20:16 0.0% jsvc/60&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:03 0.0% jsvc/59&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:04:45 0.0% jsvc/58&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:22:47 0.0% jsvc/56&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:00 0.0% jsvc/55&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:16:56 0.0% jsvc/54&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:11:03 0.0% jsvc/53&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:22:10 0.0% jsvc/49&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:20:47 0.0% jsvc/48&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:02:34 0.0% jsvc/44&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:03:09 0.0% jsvc/42&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:05:27 0.0% jsvc/41&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:08:19 0.0% jsvc/40&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:03:10 0.0% jsvc/39&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:02:41 0.0% jsvc/37&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:03 0.0% jsvc/36&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:04:14 0.0% jsvc/33&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:17:29 0.0% jsvc/29&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:04:24 0.0% jsvc/28&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:20:44 0.0% jsvc/26&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:06:54 0.0% jsvc/22&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:28:35 0.0% jsvc/21&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:27:14 0.0% jsvc/20&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:00 0.0% jsvc/19&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:00 0.0% jsvc/18&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:00 0.0% jsvc/17&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:00 0.0% jsvc/16&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:00 0.0% jsvc/15&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:00 0.0% jsvc/13&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:08 0.0% jsvc/11&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:03 0.0% jsvc/10&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:00 0.0% jsvc/9&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:00 0.0% jsvc/7&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   58    0   0:00:08 0.0% jsvc/6&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:00 0.0% jsvc/5&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:24 0.0% jsvc/4&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:58 0.0% jsvc/3&lt;br/&gt;
 16955 efunds   1278M 1208M sleep   59    0   0:00:07 0.0% jsvc/1&lt;/p&gt;

&lt;p&gt;THREAD DUMP TID 50&lt;/p&gt;

&lt;p&gt;----------------  lwp# 50 / thread# 50  --------------------&lt;br/&gt;
 f95e4a20 ???????? (23d70690, 231cc9a0, 2503e030, 2323e938, f55fcd58, d4967724)&lt;br/&gt;
 f94029e3 ???????? (23160c58, 231cc9a0, 2503e0e8, 2f, 2503e0d0, 250279a8)&lt;br/&gt;
 fa12539c ???????? (21c72ff0, 250000c0, 2323e938, 23d70690, 2503e090, 22fe2f50)&lt;br/&gt;
 fa1931a8 ???????? (21c72ff0, 250000c0, 2323e938, 23d70690, 2503e090, 22fe2f50)&lt;br/&gt;
 fa1370c8 ???????? (21c72ff0, 250000c0, 2323e938, 23d70690, 2503e090, 22fe2f50)&lt;br/&gt;
 fa01a708 ???????? (23d70690, 2503e090, 22fe2f50, 224e9190, 0, 0)&lt;br/&gt;
 fa1807e4 ???????? (23d70690, 2503e090, 217aa900, ffffffff, f55fcf94, f946bd80)&lt;br/&gt;
 fa3b11c8 ???????? (23d70690, 2503e090, 217aa900, 0, d2a88f00, f55fcfc4)&lt;br/&gt;
 f946bd80 ???????? (23d81ab8, 12b7ac20, 217aab10, f55fcfa8, d2a89883, f55fcfe8)&lt;br/&gt;
 f9402b3b ???????? (0, 0, ffffffff, ffffffff, d73378d8, 23d70690)&lt;br/&gt;
 f9988834 ???????? (23d70690, 2503e090, 217aa900, d3b4adf8, 217760d0, feb6dab1)&lt;br/&gt;
 f9947430 ???????? (23d70690, 2503e090, 2503e128, 12b7ab00, 12b7ab00, 2)&lt;br/&gt;
 f9946dc8 ???????? (23d70690, 2503e090, 2503e128, d3b92688, 217760d0, d2818460)&lt;br/&gt;
 f9f84a20 ???????? (2503e170, 23d70690, 2503e090, 2503e148, 5, d2818b08)&lt;br/&gt;
 fa192174 ???????? (2503e170, 23d70690, 2503e190, 2503e148, 12b7ac00, f994febc)&lt;br/&gt;
 fa18df00 ???????? (23d70690, 2503e190, 2503e148, f9493f04, 12b7aa54, 12b7aabc)&lt;br/&gt;
 fa18d408 ???????? (23d70690, 2503e190, 2503e148, 12b7aab0, f55fd2f0, f94addf4)&lt;br/&gt;
 fa1a4074 ???????? (23d70690, 2503e190, 2503e1d0, 22fe2f50, f55fd390, fa246768)&lt;br/&gt;
 fa25f664 ???????? (23d70690, 2503e190, 2503e1d0, 22fe2f50, 219aff90, 21b81b08)&lt;br/&gt;
 fa246768 ???????? (21965220, 23d70690, 2503e190, 22fe2f50, 22fe35d8, 22fe35d8)&lt;br/&gt;
 fa17b160 ???????? (21965220, 23d70690, 2503e190, 22fe2f50, 0, 1)&lt;br/&gt;
 fa135064 ???????? (21965220, 23d70690, 2503e190, 22fe2f50, 12b780f0, 22fe35d8)&lt;br/&gt;
 fa01a730 ???????? (23d70690, 2503e190, 22fe2f50, 224e9190, 538934bd, d2818778)&lt;br/&gt;
 fa1807e4 ???????? (23d70690, 2503e190, 217aa900, ffffffff, f55fd504, f946bd80)&lt;br/&gt;
 fa3b11c8 ???????? (23d70690, 2503e190, 217aa900, 0, d2a88f00, f55fd534)&lt;br/&gt;
 f946bd80 ???????? (23d81ab8, 12b780f0, 217aab10, f55fd518, d2a89883, f55fd558)&lt;br/&gt;
 f9402b3b ???????? (0, 0, ffffffff, ffffffff, d73378d8, 23d70690)&lt;br/&gt;
 f9988834 ???????? (23d70690, 2503e190, 217aa900, d3b4adf8, 217760d0, f94addf4)&lt;br/&gt;
 f9947430 ???????? (23d70690, 2503e190, 2503e200, 12b77fc8, 12b77fc8, 2)&lt;br/&gt;
 f9946dc8 ???????? (23d70690, 2503e190, 2503e200, d3b92688, 217760d0, d2818460)&lt;br/&gt;
 f9f84a20 ???????? (2503e248, 23d70690, 2503e190, 2503e220, 5, d2818b08)&lt;br/&gt;
 fa192174 ???????? (2503e248, 23d70690, 2503e268, 2503e220, 12b780d0, f98c42f8)&lt;br/&gt;
 fa18df00 ???????? (23d70690, 2503e268, 2503e220, f9493f04, 12b77f1c, 12b77f84)&lt;br/&gt;
 fa18d408 ???????? (23d70690, 2503e268, 2503e220, 12b77f78, f55fd860, f94addf4)&lt;br/&gt;
 fa1a4074 ???????? (23d70690, 2503e268, 2503e2a8, 22fe2f50, f55fd900, fa246768)&lt;br/&gt;
 fa25f664 ???????? (23d70690, 2503e268, 2503e2a8, 22fe2f50, 219aff58, 21b81b08)&lt;br/&gt;
 fa246768 ???????? (219651f0, 23d70690, 2503e268, 22fe2f50, 22fe35d8, 22fe35d8)&lt;br/&gt;
 fa17b160 ???????? (219651f0, 23d70690, 2503e268, 22fe2f50, 0, 1)&lt;br/&gt;
 fa135064 ???????? (219651f0, 23d70690, 2503e268, 22fe2f50, 12b63158, 22fe35d8)&lt;br/&gt;
 fa01a730 ???????? (23d70690, 2503e268, 22fe2f50, 224e9190, 34433333, 33343137)&lt;br/&gt;
 fa1807e4 ???????? (23d70690, 2503e268, 217aa900, ffffffff, f55fda74, f946bd80)&lt;br/&gt;
 fa3b11c8 ???????? (23d70690, 2503e268, 217aa900, 0, d2a88f00, f55fdaa4)&lt;br/&gt;
 f946bd80 ???????? (23d81ab8, 12b63158, 217aab10, f55fda88, d2a89883, f55fdac8)&lt;br/&gt;
 f9402b3b ???????? (0, 0, ffffffff, ffffffff, d73378d8, 23d70690)&lt;br/&gt;
 f9988834 ???????? (23d70690, 2503e268, 217aa900, d3b4adf8, 217760d0, f55fdb10)&lt;br/&gt;
 f9947430 ???????? (23d70690, 2503e268, 2503e2d8, 12b63038, 12b63038, 2)&lt;br/&gt;
 f9946dc8 ???????? (23d70690, 2503e268, 2503e2d8, d3b92688, 217760d0, d2818460)&lt;br/&gt;
 f9f84a20 ???????? (2503e320, 23d70690, 2503e268, 2503e2f8, d2818ab8, d28188b0)&lt;br/&gt;
 fa192174 ???????? (2503e320, 23d70690, 2503e340, 2503e2f8, 12b63138, f9b1a92c)&lt;br/&gt;
 fa18df00 ???????? (23d70690, 2503e340, 2503e2f8, f9493f04, 12b62f8c, 12b62ff4)&lt;br/&gt;
 fa18d408 ???????? (23d70690, 2503e340, 2503e2f8, 12b62fe8, f55fddd0, f94addf4)&lt;br/&gt;
 fa1a4074 ???????? (23d70690, 2503e340, 2503e380, 22fe2f50, f55fde70, fa246768)&lt;br/&gt;
 fa25f664 ???????? (23d70690, 2503e340, 2503e380, 22fe2f50, 219aff20, 21b81b08)&lt;br/&gt;
 fa246768 ???????? (219651c0, 23d70690, 2503e340, 22fe2f50, 22fe35d8, 22fe35d8)&lt;br/&gt;
 fa17b160 ???????? (219651c0, 23d70690, 2503e340, 22fe2f50, 0, 1)&lt;br/&gt;
 fa135064 ???????? (219651c0, 23d70690, 2503e340, 22fe2f50, 12b607a0, 22fe35d8)&lt;br/&gt;
 fa01a730 ???????? (23d70690, 2503e340, 22fe2f50, 224e9190, f55fdf90, f94addf4)&lt;br/&gt;
 fa1807e4 ???????? (23d70690, 2503e340, 217aa900, ffffffff, f55fdfe4, f946bd80)&lt;br/&gt;
 fa3b11c8 ???????? (23d70690, 2503e340, 217aa900, 0, d2a88f00, f55fe014)&lt;br/&gt;
 f946bd80 ???????? (23d81ab8, 12b607a0, 217aab10, f55fdff8, d2a89883, f55fe038)&lt;br/&gt;
 f9402b3b ???????? (0, 0, ffffffff, ffffffff, d73378d8, 23d70690)&lt;br/&gt;
 f9988834 ???????? (23d70690, 2503e340, 217aa900, d3b4adf8, 217760d0, f9bc3c7c)&lt;br/&gt;
 f9947430 ???????? (23d70690, 2503e340, 2503e3b0, 12b60638, 12b60638, 2)&lt;br/&gt;
 f9946dc8 ???????? (23d70690, 2503e340, 2503e3b0, d3b92688, 217760d0, 23d7db60)&lt;br/&gt;
 f9f84a20 ???????? (2503e3f8, 23d70690, 2503e340, 2503e3d0, d2818ca8, d2818ca8)&lt;br/&gt;
 fa192174 ???????? (2503e3f8, 23d70690, 23d6f0c8, 2503e3d0, 12b60780, f9b1a92c)&lt;br/&gt;
 fa18df00 ???????? (23d70690, 23d6f0c8, 2503e3d0, f9493f04, 12b6054c, 12b605d4)&lt;br/&gt;
 fa18d408 ???????? (23d70690, 23d6f0c8, 2503e3d0, 12b605c8, f55fe340, f94addf4)&lt;br/&gt;
 fa1a4074 ???????? (23d70690, 23d6f0c8, 2503e418, 22fe2f50, f55fe3e0, fa246768)&lt;br/&gt;
 fa25f664 ???????? (23d70690, 23d6f0c8, 2503e418, 22fe2f50, 219afeb0, 21b81b08)&lt;br/&gt;
 fa246768 ???????? (21965160, 23d70690, 23d6f0c8, 22fe2f50, 22fe35d8, 22fe35d8)&lt;br/&gt;
 fa17b160 ???????? (21965160, 23d70690, 23d6f0c8, 22fe2f50, 0, 1)&lt;br/&gt;
 fa135064 ???????? (21965160, 23d70690, 23d6f0c8, 22fe2f50, 23d804f0, 22fe35d8)&lt;br/&gt;
 fa01a730 ???????? (23d70690, 23d6f0c8, 22fe2f50, 224e9190, 0, d3b13f60)&lt;br/&gt;
 fa1807e4 ???????? (23d70690, 23d6f0c8, 217aa900, ffffffff, f55fe554, f946bd80)&lt;br/&gt;
 fa3b11c8 ???????? (23d70690, 23d6f0c8, 217aa900, 0, d2a88f00, f55fe584)&lt;br/&gt;
 f946bd80 ???????? (23d81ab8, 23d804f0, 217aab10, f55fe568, d2a89883, f55fe5a8)&lt;br/&gt;
 f9402b3b ???????? (0, 0, ffffffff, ffffffff, d73378d8, 23d70690)&lt;br/&gt;
 f9988834 ???????? (23d70690, 23d6f0c8, 217aa900, d3b4adf8, 217760d0, 0)&lt;br/&gt;
 f9947430 ???????? (23d70690, 23d6f0c8, 23d6f078, f55fe6a0, d3b4bda0, 0)&lt;br/&gt;
 f9946dc8 ???????? (23d70690, 23d6f0c8, 23d6f078, f55fe6a4, d324daa9, f55fe6f4)&lt;br/&gt;
 f9402e41 ???????? (0, 0, 0, 2503e460, 2503e448, 24e8fff0)&lt;br/&gt;
 f99474e8 ???????? (23d70690, 23d6f0c8, 23d6f078, 12b5bc18, 0, 0)&lt;br/&gt;
 f9946dc8 ???????? (23d70690, 23d6f0c8, 23d6f078, 21f8cd08, 12b5b0f0, 12b5ba50)&lt;br/&gt;
 f9934b0c ???????? (23d6ca80, 23d6c738, 21776230, 220f6378, 23d7d908, 12b5bbc8)&lt;br/&gt;
 f992fa4c ???????? (23d6ca80, 23d6c738, 216f6ef0, 45, 23d80500, 0)&lt;br/&gt;
 f99835ec ???????? (23d6ca80, 23d6c738, 21530f78, 23d7b360, f55fea28, f9927b94)&lt;br/&gt;
 f992ea60 ???????? (23d6ca80, 23d6c738, 21530fb0, 12b5bb94, 23d86ac8, 23d81f28)&lt;br/&gt;
 f992e304 ???????? (23d6ca80, 23d6c738, 21531438, 23d7ad28, 21563650, 23d7ab98)&lt;br/&gt;
 f992266c ???????? (23d69a00, 23d69900, 21563650, 170421c8, f55feb20, f9dd2198)&lt;br/&gt;
 f9973440 ???????? (250279c0, 23d697a8, 23d7abd0, 21594560, a61b780, f55feb78)&lt;br/&gt;
 f9d8b8e4 ???????? (250279c0, 215944f0, 98, fed36820, 0, 250279c0)&lt;br/&gt;
 fa1850d0 ???????? (23c66160, f55febb4, d660c623, f55febd8, d6e32680, 0)&lt;br/&gt;
 f9402e41 ???????? (23c66100, f55febf8, fedc8000, a61b780, 1, f55fec8c)&lt;br/&gt;
 f9400214 ???????? (f55fec38, f55feddc, a, d6e11fa0, f9407380, f55fed38)&lt;br/&gt;
 feaa8df7 _&lt;em&gt;1cJJavaCallsLcall_helper6FpnJJavaValue_pnMmethodHandle_pnRJavaCallArguments_pnGThread&lt;/em&gt;&lt;em&gt;v&lt;/em&gt; (f55fedd8, f55fecd0, f55fed34, a61b780, f55fecc4, feaa8c48) + 187&lt;br/&gt;
 feaa8c64 _&lt;em&gt;1cCosUos_exception_wrapper6FpFpnJJavaValue_pnMmethodHandle_pnRJavaCallArguments_pnGThread&lt;/em&gt;&lt;em&gt;v2468_v&lt;/em&gt; (feaa8c70, f55fedd8, f55fecd0, f55fed34, a61b780) + 14&lt;br/&gt;
 feaa8c48 _&lt;em&gt;1cJJavaCallsEcall6FpnJJavaValue_nMmethodHandle_pnRJavaCallArguments_pnGThread&lt;/em&gt;&lt;em&gt;v&lt;/em&gt; (f55fedd8, 90a8d70, f55fed34, a61b780) + 28&lt;br/&gt;
 feab66ae _&lt;em&gt;1cJJavaCallsMcall_virtual6FpnJJavaValue_nLKlassHandle_nMsymbolHandle_4pnRJavaCallArguments_pnGThread&lt;/em&gt;&lt;em&gt;v&lt;/em&gt; (f55fedd8, 90a8d64, fedeb49c, fedeb570, f55fed34, a61b780) + be&lt;br/&gt;
 feab65dd _&lt;em&gt;1cJJavaCallsMcall_virtual6FpnJJavaValue_nGHandle_nLKlassHandle_nMsymbolHandle_5pnGThread&lt;/em&gt;&lt;em&gt;v&lt;/em&gt; (f55fedd8, 90a8d60, 90a8d64, fedeb49c, fedeb570, a61b780) + 6d&lt;br/&gt;
 feab6550 _&lt;em&gt;1cMthread_entry6FpnKJavaThread_pnGThread&lt;/em&gt;&lt;em&gt;v&lt;/em&gt; (a61b780, a61b780) + d0&lt;br/&gt;
 feab6451 _&lt;em&gt;1cKJavaThreadRthread_main_inner6M_v&lt;/em&gt; (a61b780) + 51&lt;br/&gt;
 feab63f5 _&lt;em&gt;1cKJavaThreadDrun6M_v&lt;/em&gt; (a61b780) + 105&lt;br/&gt;
 fecd0d22 _&lt;em&gt;1cG_start6Fpv_0&lt;/em&gt; (a61b780) + d2&lt;br/&gt;
 feef70a0 _thr_setup (f3fa8200) + 4e&lt;br/&gt;
 feef7390 _lwp_start (f3fa8200, 0, 0, f55feff8, feef7390, f3fa8200)&lt;/p&gt;

&lt;p&gt;THREAD DUMP TID 47 &lt;/p&gt;

&lt;p&gt;-----------------  lwp# 47 / thread# 47  --------------------&lt;br/&gt;
 fa38c09e ???????? (0, 0, 250133d0, 250133b8, 15ac08f0, feb54085)&lt;br/&gt;
 fa4800d8 ???????? (23e81060, 231cc9a0, 25013380, 2323e938, f592cbd8, d4967724)&lt;br/&gt;
 f94029e3 ???????? (23160c58, 231cc9a0, 25013438, 2f, 25013420, 25012bb0)&lt;br/&gt;
 fa12539c ???????? (21c72ff0, 250000c0, 2323e938, 23e81060, 250133e0, 22fe2f50)&lt;br/&gt;
 fa1931a8 ???????? (21c72ff0, 250000c0, 2323e938, 23e81060, 250133e0, 22fe2f50)&lt;br/&gt;
 fa1370c8 ???????? (21c72ff0, 250000c0, 2323e938, 23e81060, 250133e0, 22fe2f50)&lt;br/&gt;
 fa01a708 ???????? (23e81060, 250133e0, 22fe2f50, 224e9190, 9c2fca8, 9c2fca8)&lt;br/&gt;
 fa1807e4 ???????? (23e81060, 250133e0, 217aa900, ffffffff, f592ce14, f946bd80)&lt;br/&gt;
 fa3b11c8 ???????? (23e81060, 250133e0, 217aa900, 0, d2a88f00, f592ce44)&lt;br/&gt;
 f946bd80 ???????? (23e92530, 15abed30, 217aab10, f592ce28, d2a89883, f592ce68)&lt;br/&gt;
 f9402b3b ???????? (0, 0, ffffffff, ffffffff, d73378d8, 23e81060)&lt;br/&gt;
 f9988834 ???????? (23e81060, 250133e0, 217aa900, d3b4adf8, 217760d0, feb6dab1)&lt;br/&gt;
 f9947430 ???????? (23e81060, 250133e0, 25013478, 15abec10, 15abec10, 2)&lt;br/&gt;
 f9946dc8 ???????? (23e81060, 250133e0, 25013478, d3b92688, 217760d0, d2818460)&lt;br/&gt;
 f9f84a20 ???????? (250134c0, 23e81060, 250133e0, 25013498, 5, d2818b08)&lt;br/&gt;
 fa192174 ???????? (250134c0, 23e81060, 250134e0, 25013498, 15abed10, f994febc)&lt;br/&gt;
 fa18df00 ???????? (23e81060, 250134e0, 25013498, f9493f04, 15abeb64, 15abebcc)&lt;br/&gt;
 fa18d408 ???????? (23e81060, 250134e0, 25013498, 15abebc0, f592d170, f94addf4)&lt;br/&gt;
 fa1a4074 ???????? (23e81060, 250134e0, 25013520, 22fe2f50, f592d210, fa246768)&lt;br/&gt;
 fa25f664 ???????? (23e81060, 250134e0, 25013520, 22fe2f50, 219aff90, 21b81b08)&lt;br/&gt;
 fa246768 ???????? (21965220, 23e81060, 250134e0, 22fe2f50, 22fe35d8, 22fe35d8)&lt;br/&gt;
 fa17b160 ???????? (21965220, 23e81060, 250134e0, 22fe2f50, 0, 1)&lt;br/&gt;
 fa135064 ???????? (21965220, 23e81060, 250134e0, 22fe2f50, 15abc200, 22fe35d8)&lt;br/&gt;
 fa01a730 ???????? (23e81060, 250134e0, 22fe2f50, 224e9190, 538934bd, d2818778)&lt;br/&gt;
 fa1807e4 ???????? (23e81060, 250134e0, 217aa900, ffffffff, f592d384, f946bd80)&lt;br/&gt;
 fa3b11c8 ???????? (23e81060, 250134e0, 217aa900, 0, d2a88f00, f592d3b4)&lt;br/&gt;
 f946bd80 ???????? (23e92530, 15abc200, 217aab10, f592d398, d2a89883, f592d3d8)&lt;br/&gt;
 f9402b3b ???????? (0, 0, ffffffff, ffffffff, d73378d8, 23e81060)&lt;br/&gt;
 f9988834 ???????? (23e81060, 250134e0, 217aa900, d3b4adf8, 217760d0, f94addf4)&lt;br/&gt;
 f9947430 ???????? (23e81060, 250134e0, 25013550, 15abc0d8, 15abc0d8, 2)&lt;br/&gt;
 f9946dc8 ???????? (23e81060, 250134e0, 25013550, d3b92688, 217760d0, d2818460)&lt;br/&gt;
 f9f84a20 ???????? (25013598, 23e81060, 250134e0, 25013570, 5, d2818b08)&lt;br/&gt;
 fa192174 ???????? (25013598, 23e81060, 250135b8, 25013570, 15abc1e0, f98c42f8)&lt;br/&gt;
 fa18df00 ???????? (23e81060, 250135b8, 25013570, f9493f04, 15abc02c, 15abc094)&lt;br/&gt;
 fa18d408 ???????? (23e81060, 250135b8, 25013570, 15abc088, f592d6e0, f94addf4)&lt;br/&gt;
 fa1a4074 ???????? (23e81060, 250135b8, 250135f8, 22fe2f50, f592d780, fa246768)&lt;br/&gt;
 fa25f664 ???????? (23e81060, 250135b8, 250135f8, 22fe2f50, 219aff58, 21b81b08)&lt;br/&gt;
 fa246768 ???????? (219651f0, 23e81060, 250135b8, 22fe2f50, 22fe35d8, 22fe35d8)&lt;br/&gt;
 fa17b160 ???????? (219651f0, 23e81060, 250135b8, 22fe2f50, 0, 1)&lt;br/&gt;
 fa135064 ???????? (219651f0, 23e81060, 250135b8, 22fe2f50, 15aa7268, 22fe35d8)&lt;br/&gt;
 fa01a730 ???????? (23e81060, 250135b8, 22fe2f50, 224e9190, 34433333, 33343137)&lt;br/&gt;
 fa1807e4 ???????? (23e81060, 250135b8, 217aa900, ffffffff, f592d8f4, f946bd80)&lt;br/&gt;
 fa3b11c8 ???????? (23e81060, 250135b8, 217aa900, 0, d2a88f00, f592d924)&lt;br/&gt;
 f946bd80 ???????? (23e92530, 15aa7268, 217aab10, f592d908, d2a89883, f592d948)&lt;br/&gt;
 f9402b3b ???????? (0, 0, ffffffff, ffffffff, d73378d8, 23e81060)&lt;br/&gt;
 f9988834 ???????? (23e81060, 250135b8, 217aa900, d3b4adf8, 217760d0, f592d990)&lt;br/&gt;
 f9947430 ???????? (23e81060, 250135b8, 25013628, 15aa7148, 15aa7148, 2)&lt;br/&gt;
 f9946dc8 ???????? (23e81060, 250135b8, 25013628, d3b92688, 217760d0, d2818460)&lt;br/&gt;
 f9f84a20 ???????? (25013670, 23e81060, 250135b8, 25013648, d2818ab8, d28188b0)&lt;br/&gt;
 fa192174 ???????? (25013670, 23e81060, 25013690, 25013648, 15aa7248, f9b1a92c)&lt;br/&gt;
 fa18df00 ???????? (23e81060, 25013690, 25013648, f9493f04, 15aa709c, 15aa7104)&lt;br/&gt;
 fa18d408 ???????? (23e81060, 25013690, 25013648, 15aa70f8, f592dc50, f94addf4)&lt;br/&gt;
 fa1a4074 ???????? (23e81060, 25013690, 250136d0, 22fe2f50, f592dcf0, fa246768)&lt;br/&gt;
 fa25f664 ???????? (23e81060, 25013690, 250136d0, 22fe2f50, 219aff20, 21b81b08)&lt;br/&gt;
 fa246768 ???????? (219651c0, 23e81060, 25013690, 22fe2f50, 22fe35d8, 22fe35d8)&lt;br/&gt;
 fa17b160 ???????? (219651c0, 23e81060, 25013690, 22fe2f50, 0, 1)&lt;br/&gt;
 fa135064 ???????? (219651c0, 23e81060, 25013690, 22fe2f50, 15aa48b0, 22fe35d8)&lt;br/&gt;
 fa01a730 ???????? (23e81060, 25013690, 22fe2f50, 224e9190, f592de10, f94addf4)&lt;br/&gt;
 fa1807e4 ???????? (23e81060, 25013690, 217aa900, ffffffff, f592de64, f946bd80)&lt;br/&gt;
 fa3b11c8 ???????? (23e81060, 25013690, 217aa900, 0, d2a88f00, f592de94)&lt;br/&gt;
 f946bd80 ???????? (23e92530, 15aa48b0, 217aab10, f592de78, d2a89883, f592deb8)&lt;br/&gt;
 f9402b3b ???????? (0, 0, ffffffff, ffffffff, d73378d8, 23e81060)&lt;br/&gt;
 f9988834 ???????? (23e81060, 25013690, 217aa900, d3b4adf8, 217760d0, f9bc3c7c)&lt;br/&gt;
 f9947430 ???????? (23e81060, 25013690, 25013700, 15aa4748, 15aa4748, 2)&lt;br/&gt;
 f9946dc8 ???????? (23e81060, 25013690, 25013700, d3b92688, 217760d0, 23e92560)&lt;br/&gt;
 f9f84a20 ???????? (25013748, 23e81060, 25013690, 25013720, d2818ca8, d2818ca8)&lt;br/&gt;
 fa192174 ???????? (25013748, 23e81060, 23e81050, 25013720, 15aa4890, f9b1a92c)&lt;br/&gt;
 fa18df00 ???????? (23e81060, 23e81050, 25013720, f9493f04, 15aa465c, 15aa46e4)&lt;br/&gt;
 fa18d408 ???????? (23e81060, 23e81050, 25013720, 15aa46d8, f592e1c0, f94addf4)&lt;br/&gt;
 fa1a4074 ???????? (23e81060, 23e81050, 25013768, 22fe2f50, f592e260, fa246768)&lt;br/&gt;
 fa25f664 ???????? (23e81060, 23e81050, 25013768, 22fe2f50, 219afeb0, 21b81b08)&lt;br/&gt;
 fa246768 ???????? (21965160, 23e81060, 23e81050, 22fe2f50, 22fe35d8, 22fe35d8)&lt;br/&gt;
 fa17b160 ???????? (21965160, 23e81060, 23e81050, 22fe2f50, 0, 1)&lt;br/&gt;
 fa135064 ???????? (21965160, 23e81060, 23e81050, 22fe2f50, 23e92520, 22fe35d8)&lt;br/&gt;
 fa01a730 ???????? (23e81060, 23e81050, 22fe2f50, 224e9190, 0, d3b13f60)&lt;br/&gt;
 fa1807e4 ???????? (23e81060, 23e81050, 217aa900, ffffffff, f592e3d4, f946bd80)&lt;br/&gt;
 fa3b11c8 ???????? (23e81060, 23e81050, 217aa900, 0, d2a88f00, f592e404)&lt;br/&gt;
 f946bd80 ???????? (23e92530, 23e92520, 217aab10, f592e3e8, d2a89883, f592e428)&lt;br/&gt;
 f9402b3b ???????? (0, 0, ffffffff, ffffffff, d73378d8, 23e81060)&lt;br/&gt;
 f9988834 ???????? (23e81060, 23e81050, 217aa900, d3b4adf8, 217760d0, 0)&lt;br/&gt;
 f9947430 ???????? (23e81060, 23e81050, 23e81070, f592e520, d3b4bda0, 0)&lt;br/&gt;
 f9946dc8 ???????? (23e81060, 23e81050, 23e81070, f592e524, d324daa9, f592e574)&lt;br/&gt;
 f9402e41 ???????? (0, 0, 0, 250137b0, 25013798, 24e8fff0)&lt;br/&gt;
 f99474e8 ???????? (23e81060, 23e81050, 23e81070, 15a9fd88, 0, 0)&lt;br/&gt;
 f9946dc8 ???????? (23e81060, 23e81050, 23e81070, 21f8cd08, 15a9f260, 15a9fbc0)&lt;br/&gt;
 f9934b0c ???????? (23e81130, 23e81090, 21776230, 220f6378, 23e985f0, 15a9fd38)&lt;br/&gt;
 f992fa4c ???????? (23e81130, 23e81090, 216f6ef0, 45, 23ebfdf0, 0)&lt;br/&gt;
 f99835ec ???????? (23e81130, 23e81090, 21530f78, 23e952f0, f592e8a8, f9927b94)&lt;br/&gt;
 f992ea60 ???????? (23e81130, 23e81090, 21530fb0, 15a9fd04, 23ea4480, 23e98340)&lt;br/&gt;
 f992e304 ???????? (23e81130, 23e81090, 21531438, 23e92678, 21563650, 23e952b0)&lt;br/&gt;
 f992266c ???????? (23e81248, 23e811a8, 21563650, 141a4398, f592e9a0, f9dd2198)&lt;br/&gt;
 f9973440 ???????? (250137e8, 23e81298, 23e92768, 21594560, 9c2fca8, f592e9f8)&lt;br/&gt;
 f9d8b8e4 ???????? (250137e8, 215944f0, d3aa82d8, f592ea30, f592ea50, 250137e8)&lt;br/&gt;
 fa1850d0 ???????? (239d10b8, f592ea34, d660c623, f592ea58, d6e32680, 0)&lt;br/&gt;
 f9402e41 ???????? (239d0d48, f592ea78, fedc8000, 9c2fca8, 1, f592eb0c)&lt;br/&gt;
 f9400214 ???????? (f592eab8, f592ec5c, a, d6e11fa0, f9407380, f592ebb8)&lt;br/&gt;
 feaa8df7 _&lt;em&gt;1cJJavaCallsLcall_helper6FpnJJavaValue_pnMmethodHandle_pnRJavaCallArguments_pnGThread&lt;/em&gt;&lt;em&gt;v&lt;/em&gt; (f592ec58, f592eb50, f592ebb4, 9c2fca8, f592eb44, feaa8c48) + 187&lt;br/&gt;
 feaa8c64 _&lt;em&gt;1cCosUos_exception_wrapper6FpFpnJJavaValue_pnMmethodHandle_pnRJavaCallArguments_pnGThread&lt;/em&gt;&lt;em&gt;v2468_v&lt;/em&gt; (feaa8c70, f592ec58, f592eb50, f592ebb4, 9c2fca8) + 14&lt;br/&gt;
 feaa8c48 _&lt;em&gt;1cJJavaCallsEcall6FpnJJavaValue_nMmethodHandle_pnRJavaCallArguments_pnGThread&lt;/em&gt;&lt;em&gt;v&lt;/em&gt; (f592ec58, 95ddae0, f592ebb4, 9c2fca8) + 28&lt;br/&gt;
 feab66ae _&lt;em&gt;1cJJavaCallsMcall_virtual6FpnJJavaValue_nLKlassHandle_nMsymbolHandle_4pnRJavaCallArguments_pnGThread&lt;/em&gt;&lt;em&gt;v&lt;/em&gt; (f592ec58, 95ddad4, fedeb49c, fedeb570, f592ebb4, 9c2fca8) + be&lt;br/&gt;
 feab65dd _&lt;em&gt;1cJJavaCallsMcall_virtual6FpnJJavaValue_nGHandle_nLKlassHandle_nMsymbolHandle_5pnGThread&lt;/em&gt;&lt;em&gt;v&lt;/em&gt; (f592ec58, 95ddad0, 95ddad4, fedeb49c, fedeb570, 9c2fca8) + 6d&lt;br/&gt;
 feab6550 _&lt;em&gt;1cMthread_entry6FpnKJavaThread_pnGThread&lt;/em&gt;&lt;em&gt;v&lt;/em&gt; (9c2fca8, 9c2fca8) + d0&lt;br/&gt;
 feab6451 _&lt;em&gt;1cKJavaThreadRthread_main_inner6M_v&lt;/em&gt; (9c2fca8) + 51&lt;br/&gt;
 feab63f5 _&lt;em&gt;1cKJavaThreadDrun6M_v&lt;/em&gt; (9c2fca8) + 105&lt;br/&gt;
 fecd0d22 _&lt;em&gt;1cG_start6Fpv_0&lt;/em&gt; (9c2fca8) + d2&lt;br/&gt;
 feef70a0 _thr_setup (f3fa6a00) + 4e&lt;br/&gt;
 feef7390 _lwp_start (f3fa6a00, 0, 0, f592eff8, feef7390, f3fa6a00)&lt;/p&gt;

</description>
                <environment>&lt;p&gt;Solaris 10 x64 platform &lt;br/&gt;
jsvc 32bit binary&lt;br/&gt;
Generic_141415-08 i86pc i386 i86pc &lt;/p&gt;</environment>
        <key id="12493873">DAEMON-191</key>
            <summary>High CPU on Solaris x86</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ijaveed">IJ</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Dec 2010 14:12:08 +0000</created>
                <updated>Tue, 18 Jan 2011 10:00:13 +0000</updated>
                            <resolved>Tue, 18 Jan 2011 10:00:13 +0000</resolved>
                                    <version>1.0.3</version>
                                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12979775" author="mturk@apache.org" created="Mon, 10 Jan 2011 21:28:36 +0000"  >&lt;p&gt;Couple of things.&lt;/p&gt;

&lt;p&gt;1. Try with latest 1.0.5&lt;br/&gt;
     Since we are not backporting fixes to previous versions&lt;br/&gt;
     this needs to be confirmed with 1.0.5&lt;/p&gt;

&lt;p&gt;2. Why do you think this is Daemon problem?&lt;br/&gt;
     I cannot see anything Daemon related in those two thread dumps&lt;/p&gt;
</comment>
                            <comment id="12983107" author="mturk@apache.org" created="Tue, 18 Jan 2011 10:00:13 +0000"  >&lt;p&gt;Closing this issue cause no further input from the user was given.&lt;br/&gt;
It might be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-194&quot; title=&quot;deadloop and no return value in logger_child&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-194&quot;&gt;&lt;del&gt;DAEMON-194&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-186&quot; title=&quot;jsvc consumes 100% CPU when redirecting errfile (and not outfile) to syslog&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-186&quot;&gt;&lt;del&gt;DAEMON-186&lt;/del&gt;&lt;/a&gt; which is the point of deadloop in the code&lt;br/&gt;
which could cause high CPU usage.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uztb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178943</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-190] Service startup fails at boot time on Windows</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-190</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;Tomcat 6.0.x (a dev build) with Commons-Daemon 2.0.4 was installed and configured to autostart. The problem is that the service fails to start. After the system starts up the service is in stopped state.&lt;/p&gt;

&lt;p&gt;I do not use the PidFile setting (it is blank).&lt;/p&gt;

&lt;p&gt;If I start the service manually, it starts successfully.&lt;/p&gt;

&lt;p&gt;I configured prunsrv logging level to be Debug, and here is what is observed during boot time:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1493) Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Commons Daemon procrun (1.0.4.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Running &apos;Tomcat6&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1241) Inside ServiceMain...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:191 ) loading jvm &apos;C:\Program Files\Java\jre6\bin\client\jvm.dll&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:27&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; -Dcatalina.home=C:\Program Files\Apache Software Foundation\Tomcat 6.0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:27&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; -Dcatalina.base=C:\Program Files\Apache Software Foundation\Tomcat 6.0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:27&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; -Djava.endorsed.dirs=C:\Program Files\Apache Software Foundation\Tomcat 6.0\endorsed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:28&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; -Djava.io.tmpdir=C:\Program Files\Apache Software Foundation\Tomcat 6.0\temp&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:28&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:28&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; -Djava.util.logging.config.file=C:\Program Files\Apache Software Foundation\Tomcat 6.0\conf\logging.properties&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:28&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt; -Djava.class.path=C:\Program Files\Apache Software Foundation\Tomcat 6.0\bin\bootstrap.jar&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:28&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1054) Java started org/apache/catalina/startup/Bootstrap&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:29&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Service started in 3781 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:30&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1364) Waiting for worker to finish...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:30&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1369) Worker finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:31&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1392) Waiting for all threads to exit&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:31&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1396) JVM destroyed.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:45&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:827 ) argv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; = start&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:45&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:874 ) Java Worker thread started org/apache/catalina/startup/Bootstrap:main&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:45&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:14:46&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Commons Daemon procrun finished&lt;/p&gt;

&lt;p&gt;There is nothing in Tomcat logs, nor in stderr/stdout logs, besides &quot;Commons Daemon procrun stderr initialized&quot; or ..stdout... messages.  The odd thing is that &quot;Worker finished.&quot; message above.&lt;/p&gt;

&lt;p&gt;Here is another failed startup at boot time:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:18&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1493) Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:19&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Commons Daemon procrun (1.0.4.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:19&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Running &apos;Tomcat6&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:19&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1241) Inside ServiceMain...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:19&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:20&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:191 ) loading jvm &apos;C:\Program Files\Java\jre6\bin\client\jvm.dll&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:21&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; -Dcatalina.home=C:\Program Files\Apache Software Foundation\Tomcat 6.0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:21&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; -Dcatalina.base=C:\Program Files\Apache Software Foundation\Tomcat 6.0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:21&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; -Djava.endorsed.dirs=C:\Program Files\Apache Software Foundation\Tomcat 6.0\endorsed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:22&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; -Djava.io.tmpdir=C:\Program Files\Apache Software Foundation\Tomcat 6.0\temp&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:22&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:22&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; -Djava.util.logging.config.file=C:\Program Files\Apache Software Foundation\Tomcat 6.0\conf\logging.properties&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:23&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt; -Djava.class.path=C:\Program Files\Apache Software Foundation\Tomcat 6.0\bin\bootstrap.jar&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:22&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1054) Java started org/apache/catalina/startup/Bootstrap&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:24&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Service started in 3375 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:24&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1364) Waiting for worker to finish...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:24&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1369) Worker finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1392) Waiting for all threads to exit&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:24&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:827 ) argv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; = start&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:02:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:889 ) Java Worker thread finished org/apache/catalina/startup/Bootstrap:main with status=3&lt;/p&gt;


&lt;p&gt;For reference, here is successful startup when I start the service manually from prunmgr&apos;s menu:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1493) Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Commons Daemon procrun (1.0.4.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Running &apos;Tomcat6&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1241) Inside ServiceMain...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:191 ) loading jvm &apos;C:\Program Files\Java\jre6\bin\client\jvm.dll&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; -Dcatalina.home=C:\Program Files\Apache Software Foundation\Tomcat 6.0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; -Dcatalina.base=C:\Program Files\Apache Software Foundation\Tomcat 6.0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; -Djava.endorsed.dirs=C:\Program Files\Apache Software Foundation\Tomcat 6.0\endorsed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; -Djava.io.tmpdir=C:\Program Files\Apache Software Foundation\Tomcat 6.0\temp&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; -Djava.util.logging.config.file=C:\Program Files\Apache Software Foundation\Tomcat 6.0\conf\logging.properties&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt; -Djava.class.path=C:\Program Files\Apache Software Foundation\Tomcat 6.0\bin\bootstrap.jar&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:827 ) argv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; = start&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:25&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:874 ) Java Worker thread started org/apache/catalina/startup/Bootstrap:main&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1054) Java started org/apache/catalina/startup/Bootstrap&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Service started in 1062 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-20 15:44:26&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1364) Waiting for worker to finish...&lt;/p&gt;

&lt;p&gt;I originally observed this issue on a WinXP SP3 32-bit system. I am able to reproduce it on another system running the same OS, and on Windows 7 running 64-bit version of procrun.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP SP3 32-bit, Oracle JRE 6u22, Trying to run Tomcat 6.0.x (dev build).&lt;/p&gt;</environment>
        <key id="12493672">DAEMON-190</key>
            <summary>Service startup fails at boot time on Windows</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="kkolinko">Konstantin Kolinko</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Dec 2010 13:07:18 +0000</created>
                <updated>Mon, 10 Jan 2011 20:49:14 +0000</updated>
                            <resolved>Tue, 4 Jan 2011 17:31:47 +0000</resolved>
                                    <version>1.0.4</version>
                                    <fixVersion>1.0.5</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12973216" author="mturk@apache.org" created="Mon, 20 Dec 2010 14:47:19 +0000"  >&lt;p&gt;Quick hack would be to add &apos;--DependsOn Tcpip#Afd&apos;&lt;br/&gt;
to the end of //IS//Tomcat6 both in service.bat and nsis script.&lt;/p&gt;

&lt;p&gt;However since those are system services procrun should be started after those.&lt;br/&gt;
The --DependsOn should be auto adjusted to include those two system services.&lt;br/&gt;
(Same thing like with Apache Httpd)&lt;/p&gt;

&lt;p&gt;I&apos;ll fix that and release 1.0.5 pretty soon&lt;/p&gt;

</comment>
                            <comment id="12973219" author="sebb@apache.org" created="Mon, 20 Dec 2010 15:03:08 +0000"  >&lt;p&gt;Just curious - why is no error being reported?&lt;/p&gt;

&lt;p&gt;Is that a bug in Tomcat or Daemon, or is it not possible to capture the error?&lt;/p&gt;</comment>
                            <comment id="12973223" author="mturk@apache.org" created="Mon, 20 Dec 2010 15:18:16 +0000"  >&lt;p&gt;It&apos;s not reported because JVM refuses to operate since Winsock is not up and running.&lt;br/&gt;
Daemon fails to attach to areated JVM which is reported as error(3) and shuts down.&lt;/p&gt;
</comment>
                            <comment id="12973224" author="sebb@apache.org" created="Mon, 20 Dec 2010 15:21:18 +0000"  >&lt;p&gt;If Daemon always includes Tcpip and Afd as dependencies, won&apos;t that restrict where it can be used?&lt;/p&gt;

&lt;p&gt;There might be other uses for Daemon that don&apos;t depend on Afd and Tcpip.&lt;/p&gt;</comment>
                            <comment id="12973228" author="mturk@apache.org" created="Mon, 20 Dec 2010 15:38:43 +0000"  >&lt;p&gt;Since JVM requires Winsock to operate, there could be no uses of Daemon not requiring that.&lt;br/&gt;
BTW, those services are always on. Dependencies only determine the order in which they are&lt;br/&gt;
started. Meaning: start Daemon after those services.&lt;/p&gt;</comment>
                            <comment id="12973290" author="sebb@apache.org" created="Mon, 20 Dec 2010 18:39:36 +0000"  >&lt;p&gt;I see.&lt;/p&gt;

&lt;p&gt;Since the JVM cannot start without AFP and TCPIP, there is no harm in adding the dependencies &lt;b&gt;when a JVM is being used&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;However, Daemon can also be used without Java, so unconditionally adding the dependencies potentially restricts when Daemon can be used.&lt;/p&gt;

&lt;p&gt;Agreed it&apos;s not all that likely to want to run Daemon if AFP and TCPIP are not (yet) running, but there could perhaps be a use case for such a service.&lt;/p&gt;</comment>
                            <comment id="12973308" author="mturk@apache.org" created="Mon, 20 Dec 2010 19:14:17 +0000"  >&lt;p&gt;AFP and TCPIP are not services. They are windows kernel drivers (aka linux kernel modules)&lt;br/&gt;
The only use case would be to use the daemon for running kernel mode drivers which is&lt;br/&gt;
hardly the sane use case.&lt;/p&gt;
</comment>
                            <comment id="12973326" author="sebb@apache.org" created="Mon, 20 Dec 2010 19:33:52 +0000"  >&lt;p&gt;Surely there could be a user service that needs to run even if AFP and TCPIP are not (yet) loaded?&lt;/p&gt;

&lt;p&gt;I don&apos;t see the point of limiting Daemon unnecessarily.&lt;/p&gt;</comment>
                            <comment id="12973366" author="mturk@apache.org" created="Mon, 20 Dec 2010 21:14:28 +0000"  >&lt;p&gt;Please explain how is that a limitation from technical perspective.&lt;/p&gt;</comment>
                            <comment id="12973369" author="sebb@apache.org" created="Mon, 20 Dec 2010 21:28:43 +0000"  >&lt;p&gt;It&apos;s possible for Windows to boot without loading AFP and TCPIP, either because they failed, or because they have been excluded from startup.&lt;/p&gt;

&lt;p&gt;In those cases, the Daemon service would not run, even though it could do so.&lt;/p&gt;</comment>
                            <comment id="12973486" author="mturk@apache.org" created="Tue, 21 Dec 2010 06:13:25 +0000"  >&lt;p&gt;They can be excluded only if booting in &quot;Safe Mode without Networking&quot; support.&lt;br/&gt;
Having operational Daemon (or any other production) service would be oxymoron in such environment.&lt;br/&gt;
Not to mention that user services cannot be started in safe mode.&lt;/p&gt;</comment>
                            <comment id="12973975" author="kkolinko" created="Tue, 21 Dec 2010 23:30:47 +0000"  >&lt;p&gt;I cannot confirm that this fixes this issue.&lt;br/&gt;
On a WinXP SP3 machine I used registry editor to set up those dependencies on Afd and Tcpip services, by creating the DependOnService registry value, as mentioned in &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; using Apache HTTPD service configuration as an example (it depends on the same two services).&lt;/p&gt;

&lt;p&gt;Looking at the service properties in the Control Panel I am able to verify that those two services are now listed as dependencies for Tomcat 6.&lt;br/&gt;
Regardless of that, the problem still persists. Tomcat fails to start at boot time.&lt;/p&gt;

&lt;p&gt;BTW, &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the Control Panel displays the service as running,&lt;/li&gt;
	&lt;li&gt;prunmgr can a) display the service as running or b) do not display it as running (a): green tray icon and &quot;Stop&quot; button is enabled in the configuration dialog, b): red icon, no buttons are enabled in the dialog;  In both cases &quot;Stop service&quot; is enabled in the menu on the tray icon).&lt;br/&gt;
There are no traces of Tomcat starting in the tomcat logs and &quot;netstat -a&quot; does not show Tomcat as listening on any ports.&lt;br/&gt;
The commons-daemon log messages are the same as earlier.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/ms682450%28VS.85%29.aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://msdn.microsoft.com/en-us/library/ms682450%28VS.85%29.aspx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;commons-daemon log:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:48&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1493) Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:48&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Commons Daemon procrun (1.0.4.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:49&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Running &apos;Tomcat6&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:49&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1241) Inside ServiceMain...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:49&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:49&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:191 ) loading jvm &apos;C:\Program Files\Java\jre6\bin\client\jvm.dll&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; -Dcatalina.home=C:\Program Files\Apache Software Foundation\Tomcat 6.0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; -Dcatalina.base=C:\Program Files\Apache Software Foundation\Tomcat 6.0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:50&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; -Djava.endorsed.dirs=C:\Program Files\Apache Software Foundation\Tomcat 6.0\endorsed&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; -Djava.io.tmpdir=C:\Program Files\Apache Software Foundation\Tomcat 6.0\temp&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt; -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;5&amp;#93;&lt;/span&gt; -Djava.util.logging.config.file=C:\Program Files\Apache Software Foundation\Tomcat 6.0\conf\logging.properties&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:52&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:643 ) Jvm Option&lt;span class=&quot;error&quot;&gt;&amp;#91;6&amp;#93;&lt;/span&gt; -Djava.class.path=C:\Program Files\Apache Software Foundation\Tomcat 6.0\bin\bootstrap.jar&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:51&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1054) Java started org/apache/catalina/startup/Bootstrap&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:54&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Service started in 4326 ms.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:56&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1364) Waiting for worker to finish...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:56&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1369) Worker finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:57&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1392) Waiting for all threads to exit&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:56&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:827 ) argv&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; = start&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2010-12-22 00:38:57&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:889 ) Java Worker thread finished org/apache/catalina/startup/Bootstrap:main with status=3&lt;/p&gt;

&lt;p&gt;Note, that, as I mentioned above, the last line can be&lt;br/&gt;
 ( javajni.c:889 ) Java Worker thread finished org/apache/catalina/startup/Bootstrap:main with status=3&lt;br/&gt;
or can be&lt;br/&gt;
 ( javajni.c:874 ) Java Worker thread started org/apache/catalina/startup/Bootstrap:main&lt;br/&gt;
Regardless of that, there is &quot;Worker finished.&quot; line and the startup is unsuccessful. If JVM start fails, can there be any message about that?&lt;/p&gt;

&lt;p&gt;I tried to revert to the previous versions of commons-daemon, and the result are the following:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;1.0.3: fails in the same way as 1.0.4&lt;/li&gt;
	&lt;li&gt;1.0.2: starts successfully.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;1.0.2 starts successfully even if I remove that DependOnService setting from the registry.&lt;/p&gt;</comment>
                            <comment id="12974060" author="mturk@apache.org" created="Wed, 22 Dec 2010 05:51:51 +0000"  >&lt;p&gt;OK. So we have two separate issues here.&lt;br/&gt;
For testing I have used 6.0.26 and without dependencies Tomcat doesn&apos;t start at boot time and&lt;br/&gt;
Control panel shows the services as not running.&lt;br/&gt;
With patch it works. (JVM is 1.6.0_18-b07)&lt;/p&gt;

&lt;p&gt;However you said that on your box control panel shows the service as running which&lt;br/&gt;
is something different from what I have saw.&lt;/p&gt;

&lt;p&gt;Let me try with your enviroment; 6.0.x trunk and 1.6.22&lt;/p&gt;</comment>
                            <comment id="12974087" author="mturk@apache.org" created="Wed, 22 Dec 2010 06:58:17 +0000"  >&lt;p&gt;OK. I was able to reproduce the problem.&lt;/p&gt;

&lt;p&gt;apache-tomcat-6.0.0.-dev (build from trunk)&lt;br/&gt;
jdk-1.6.23&lt;/p&gt;

&lt;p&gt;1. Cleanup everything&lt;br/&gt;
    Uninstall any previous service&lt;br/&gt;
    Make sure all registry settings are removed (particularly)&lt;br/&gt;
    HKLM\Software\Apache Software Foundation\Procrun 2.0\Tomcat6&lt;br/&gt;
2. service install&lt;br/&gt;
3. Add Full Control to apache-tomcat-6.0.-0-dev folder to LOCAL SERVICE account&lt;br/&gt;
4. Change start mode to auto&lt;/p&gt;

&lt;p&gt;After reboot Tomcat6 service is shown as running but the catalina-&amp;lt;DATETIME&amp;gt;.log is empty&lt;br/&gt;
Service doesn&apos;t work.&lt;/p&gt;

&lt;p&gt;5. Open Windows Firewall and add  apache-tomcat-6.0.-0-dev\bin\tomcat6.exe as Exception&lt;br/&gt;
After reboot everything works fine&lt;/p&gt;

&lt;p&gt;Can you check your firewall settings?&lt;/p&gt;

&lt;p&gt;Also, since it works for me with 1.0.5-dev (dependencies added) and it doesn&apos;t with 1.0.4&lt;br/&gt;
I&apos;m considering this issue resolved. Please bring any further discussion either to&lt;br/&gt;
dev@commons or users@commons&lt;/p&gt;
</comment>
                            <comment id="12975436" author="jpleed3" created="Tue, 28 Dec 2010 06:36:54 +0000"  >&lt;p&gt;I have a similar problem with an application I wrote: the service stalls on reboot, but works fine if I manually start/restart the service. I&apos;ve been trying to deal with this problem for a few weeks and I&apos;m glad to see I&apos;m not the only one.&lt;/p&gt;

&lt;p&gt;Mladen - Please clarify your last comment for me. Does it work for you using 1.0.5-dev without the firewall exception, or with it? &lt;/p&gt;</comment>
                            <comment id="12976579" author="kkolinko" created="Mon, 3 Jan 2011 00:03:39 +0000"  >&lt;p&gt;Firewall is not related: if I turn it off the issue is still reproducible.&lt;/p&gt;

&lt;p&gt;It looks like I found the cause:&lt;br/&gt;
it is caused by the initial value of  &lt;tt&gt;dwWorkerStatus&lt;/tt&gt; in APXJAVAVM structure and a race condition between &lt;tt&gt;serviceMain()&lt;/tt&gt; thread and &lt;tt&gt;__apxJavaWorkerThread()&lt;/tt&gt; thread.&lt;/p&gt;

&lt;p&gt;Note, that the initial value of the &lt;tt&gt;dwWorkerStatus&lt;/tt&gt; field is zero, and then &lt;tt&gt;__apxJavaWorkerThread()&lt;/tt&gt; method sets it to 1 when JVM initialization is successful:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;  lpJava-&amp;gt;dwWorkerStatus = 1;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;At the same time, &lt;tt&gt;serviceMain()&lt;/tt&gt; method in prunsrv.c continues to run, prints &quot;Waiting for worker to finish...&quot; message and calls&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;  rv = apxHandleWait(gWorker, INFINITE, FALSE);&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The apxHandleWait call results in calling &lt;tt&gt;apxJavaWait()&lt;/tt&gt; in javajni.c, and apxJavaWait() does this check:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;    if (!lpJava-&amp;gt;dwWorkerStatus &amp;amp;&amp;amp; lpJava-&amp;gt;hWorkerThread)&lt;br/&gt;
        return WAIT_OBJECT_0;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If &lt;tt&gt;dwWorkerStatus&lt;/tt&gt; has not been set to &quot;1&quot; yet and has its initial value of zero, the above check will succeed and the wait method will return immediately. The &lt;tt&gt;serviceMain()&lt;/tt&gt; prints &quot;Worker finished.&quot; and starts shutting down. That is the issue.&lt;/p&gt;</comment>
                            <comment id="12976580" author="kkolinko" created="Mon, 3 Jan 2011 00:12:06 +0000"  >&lt;p&gt;Patch for javajni.c. (not tested!)&lt;/p&gt;</comment>
                            <comment id="12976620" author="mturk@apache.org" created="Mon, 3 Jan 2011 05:57:42 +0000"  >&lt;p&gt;Test binary with &lt;a href=&quot;https://issues.apache.org/jira/browse/DAEMON-190&quot; title=&quot;Service startup fails at boot time on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DAEMON-190&quot;&gt;&lt;del&gt;DAEMON-190&lt;/del&gt;&lt;/a&gt; fix&lt;/p&gt;</comment>
                            <comment id="12976622" author="mturk@apache.org" created="Mon, 3 Jan 2011 06:00:04 +0000"  >&lt;p&gt;Attached is the fixed binary with the patch that goes in your direction.&lt;br/&gt;
However it uses an event object to fully sync the state of the JVM worker thread and waits until it fully initializes&lt;/p&gt;

&lt;p&gt;Please test with the provided binary. Tell me if you need 64-bit version&lt;/p&gt;</comment>
                            <comment id="12976789" author="jpleed3" created="Mon, 3 Jan 2011 15:58:13 +0000"  >&lt;p&gt;No luck so far. After an uninstall and install, I&apos;m getting the following on service start:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 10:51:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  Commons Daemon procrun (1.0.5.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 10:51:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  Running &apos;RadDataCollector&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 10:51:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 10:51:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; The specified module could not be found.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 10:51:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; Failed creating java &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 10:51:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; The specified module could not be found.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 10:51:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ServiceStart returned 1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 10:51:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; The specified module could not be found.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 10:51:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 10:51:59&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  Commons Daemon procrun finished&lt;/p&gt;</comment>
                            <comment id="12976801" author="mturk@apache.org" created="Mon, 3 Jan 2011 16:25:33 +0000"  >&lt;p&gt;John, please use the users list since your case is not related to this one.&lt;br/&gt;
JIRA is not support forum.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                            <comment id="12976815" author="jpleed3" created="Mon, 3 Jan 2011 16:49:49 +0000"  >&lt;p&gt;Pardon me? I&apos;m not asking for support; I&apos;m reporting a regression!&lt;/p&gt;

&lt;p&gt;I first commented in this JIRA because the issue with my application seems to be the same as Konstantin is having with Tomcat: using 1.0.4, the service does not start correctly after reboot. If you know that to not be the case, then why not make a note of the reason for other people to see?&lt;/p&gt;

&lt;p&gt;I tried the patched version of prunsrv you attached this morning, and it did not start at all - I didn&apos;t even get a chance to test it after a reboot.&lt;/p&gt;

&lt;p&gt;I&apos;ve learned how to use the daemon just fine and I don&apos;t require assistance or a support forum, just a version that works correctly. Would you like me to help you test your fixes, or not?&lt;/p&gt;</comment>
                            <comment id="12976842" author="kkolinko" created="Mon, 3 Jan 2011 17:40:55 +0000"  >&lt;p&gt;&amp;gt; Attached is the fixed binary with the patch that goes in your direction.&lt;/p&gt;

&lt;p&gt;When I replaced old binaries with the new one, the service started successfully.&lt;br/&gt;
(The service configuration already had dependencies on AFP and TCPIP, added manually)&lt;/p&gt;

&lt;p&gt;I.e., it fixed the issue for me.&lt;/p&gt;

&lt;p&gt;==============================================================&lt;br/&gt;
Then I used &lt;tt&gt;service.bat&lt;/tt&gt; from Tomcat 6.0-dev to &quot;remove&quot; and then &quot;install&quot; service.&lt;/p&gt;

&lt;p&gt;After that the service failed to start at boot time, displaying the same series of errors as in the last comment by John Leed: &quot;The specified module could not be found. &quot; (in Russian &amp;#8211; those messages are provided by OS).&lt;/p&gt;


&lt;p&gt;I opened the configuration dialog (tomcat6w, aka prunmgr) and on the &quot;Java&quot; tab of the dialog removed the check from the &lt;b&gt;&quot;Use default&quot;&lt;/b&gt; checkbox.&lt;/p&gt;

&lt;p&gt;(I already had correct path to the jvm.dll specified in the &quot;Java Virtual Machine&quot; field there).&lt;/p&gt;

&lt;p&gt;After that change, the service started successfully after reboot.&lt;/p&gt;

&lt;p&gt;==============================================================&lt;br/&gt;
If I set &lt;span class=&quot;error&quot;&gt;&amp;#91;x&amp;#93;&lt;/span&gt; &quot;Use default&quot; and set log level to Debug,  I see the following in the log:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:28&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1494) Commons Daemon procrun log initialized&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:29&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Commons Daemon procrun (1.0.5.0 32-bit) started&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:29&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Running &apos;Tomcat6&apos; Service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:29&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( prunsrv.c:1246) Inside ServiceMain...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:30&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Starting service...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:30&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:195 ) Invalid RuntimeLib &apos;C:\Program Files\Java\jre6\bin\client\jvm.dll&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:30&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:197 ) Using Jre JavaHome &apos;C:\Program Files\Java\jre6&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:30&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:206 ) loading jvm &apos;C:\Program Files\Java\jre6\bin\server\jvm.dll&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:30&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:249 ) Setting DLL search path to &apos;C:\Program Files\Java\jre6\bin\server&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:30&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;debug&amp;#93;&lt;/span&gt; ( javajni.c:249 ) Setting DLL search path to &apos;C:\Program Files\Java\jre6\bin&apos;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:31&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( javajni.c:262 ) &#1053;&#1077; &#1085;&#1072;&#1081;&#1076;&#1077;&#1085; &#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1085;&#1099;&#1081; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:31&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:1037) Failed creating java &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:31&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:1037) &#1053;&#1077; &#1085;&#1072;&#1081;&#1076;&#1077;&#1085; &#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1085;&#1099;&#1081; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:33&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:1377) ServiceStart returned 1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:34&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;error&amp;#93;&lt;/span&gt; ( prunsrv.c:1377) &#1053;&#1077; &#1085;&#1072;&#1081;&#1076;&#1077;&#1085; &#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1085;&#1099;&#1081; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:43&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Run service finished.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2011-01-03 20:18:44&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;info&amp;#93;&lt;/span&gt;  (          :0   ) Commons Daemon procrun finished&lt;/p&gt;

&lt;p&gt;where &quot;&#1053;&#1077; &#1085;&#1072;&#1081;&#1076;&#1077;&#1085; &#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1085;&#1099;&#1081; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;.&quot; (in Russian) means &quot;The specified module could not be found.&quot;.&lt;/p&gt;

&lt;p&gt;The correct path to jvm.dll on my system is &quot;C:\Program Files\Java\jre6\bin\client\jvm.dll&quot;&lt;/p&gt;

&lt;p&gt;I think the following change is needed in javajni.c:&lt;br/&gt;
in apxJavaStart() - line #190 and in __apxLoadJvmDll() - line 208&lt;br/&gt;
s / if (GetFileAttributesW(szJvmDllPath)  / if (GetFileAttributesW(dllJvmPath) /&lt;/p&gt;


&lt;p&gt;It is somehow strange that &quot;Use default&quot; flag on the Java page is on by default, even though I provided JAVA_HOME when calling service.bat.  Is the &quot;Java Virtual Machine&quot; setting ignored at all when &quot;Use default&quot; is on?&lt;/p&gt;

&lt;p&gt;If prunsvc defaults will stay as they are now, I think that &lt;tt&gt;service.bat&lt;/tt&gt; has to be adjusted to clear that flag.&lt;/p&gt;</comment>
                            <comment id="12976845" author="kkolinko" created="Mon, 3 Jan 2011 17:51:44 +0000"  >&lt;p&gt;Patch for javajni.c to address issue with JVM.dll path validity check (not tested).&lt;/p&gt;</comment>
                            <comment id="12976848" author="jpleed3" created="Mon, 3 Jan 2011 18:01:50 +0000"  >&lt;p&gt;I tried unchecking the Use Default checkbox in prunmgr as Konstantin did; my application also works again, though I haven&apos;t tested it after reboot yet.&lt;/p&gt;</comment>
                            <comment id="12977121" author="mturk@apache.org" created="Tue, 4 Jan 2011 05:14:20 +0000"  >&lt;p&gt;Binary with Konstantin&apos;s patch applied.&lt;/p&gt;</comment>
                            <comment id="12977122" author="mturk@apache.org" created="Tue, 4 Jan 2011 05:15:37 +0000"  >&lt;p&gt;Applied the patch with some minor tweak for checking the msvcrt71.dll&lt;/p&gt;</comment>
                            <comment id="12977350" author="kkolinko" created="Tue, 4 Jan 2011 17:18:05 +0000"  >&lt;p&gt;Confirming that JVM detection issue is fixed.&lt;br/&gt;
The service installs and starts after reboot successfully.&lt;/p&gt;

&lt;p&gt;Regarding what I wrote about jvm path,&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt; (I already had correct path to the jvm.dll specified in the &quot;Java Virtual Machine&quot; field there). &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&amp;#8211; please, ignore that. Looking into what &lt;tt&gt;service.bat&lt;/tt&gt; does, it actually ignored my value of JAVA_HOME when I was installing the service, and installed the service with JVM path equal to &quot;auto&quot;.  So, indeed, the service was configured with &quot;Use default&quot;.&lt;/p&gt;</comment>
                            <comment id="12977365" author="kkolinko" created="Tue, 4 Jan 2011 17:31:47 +0000"  >&lt;p&gt;Marking the issue as Resolved.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12467298" name="2011-01-03_Daemon-190.patch" size="449" author="kkolinko" created="Mon, 3 Jan 2011 00:12:06 +0000"/>
                            <attachment id="12467333" name="2011-01-03_javaini_GetFileAttributesW.patch" size="939" author="kkolinko" created="Mon, 3 Jan 2011 17:51:44 +0000"/>
                            <attachment id="12467398" name="prunsrv-x86.zip" size="31631" author="mturk@apache.org" created="Tue, 4 Jan 2011 05:14:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37615</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tk0v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170553</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-188] PID file not removed when service stops, preventing next start</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-188</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When the Tomcat 7 service is stopped, the pid file is not removed. This prevents the next start from working although a second start will work. I could not see anything wrong with the Tomcat 7 service set up.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Tomcat 7.0.5&lt;br/&gt;
Windows XP x64 fully patched&lt;br/&gt;
1.6.0_20 JREs, both 32-bit and 64-bit&lt;/p&gt;</environment>
        <key id="12480897">DAEMON-188</key>
            <summary>PID file not removed when service stops, preventing next start</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="markt">Mark Thomas</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Nov 2010 10:05:25 +0000</created>
                <updated>Wed, 1 Dec 2010 17:56:05 +0000</updated>
                            <resolved>Wed, 1 Dec 2010 17:56:05 +0000</resolved>
                                    <version>1.0.4</version>
                                    <fixVersion>1.0.5</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37617</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tjp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170500</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-187] (0) An instance of &apos;..&apos; application is already running</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-187</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;To reproduce:&lt;br/&gt;
1. Build Tomcat7 Windows installer from the current trunk, as of rev.1035132 (7.0.5-dev)&lt;br/&gt;
It includes common-daemon 1.0.4.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;svn co &lt;a href=&quot;https://svn.apache.org/repos/asf/tomcat/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/tomcat/trunk&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Create build.properties file and set &quot;base.path&quot; property there&lt;/li&gt;
	&lt;li&gt;Call &quot;ant installer&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;2. Install it.&lt;br/&gt;
3. If Tomcat Monitor is not running, go to the programs menu and call &quot;Monitor Tomcat&quot; shortcut there.&lt;br/&gt;
4. Now every attempt to call &quot;Monitor Tomcat&quot; or &quot;Configure Tomcat&quot; shortcuts results in an ugly message box:&lt;/p&gt;

&lt;p&gt;&quot; (0)&lt;br/&gt;
An instance of &apos;Tomcat7&apos; application is already running&quot;&lt;/p&gt;

&lt;p&gt;Note the &quot;(0)&quot; in the first line.&lt;/p&gt;

&lt;p&gt;Expected result: Display the window of that running application, or provide more pretty error message.&lt;/p&gt;

&lt;p&gt;Additional information:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The &quot;Monitor Tomcat&quot; shortcut calls&lt;br/&gt;
&quot;C:\Program Files\Apache Software Foundation\Tomcat 7.0\bin\tomcat7w.exe&quot; //MS//Tomcat7&lt;/li&gt;
	&lt;li&gt;The &quot;Configure Tomcat&quot; shortcut calls&lt;br/&gt;
&quot;C:\Program Files\Apache Software Foundation\Tomcat 7.0\bin\tomcat7w.exe&quot; //ES//Tomcat7&lt;/li&gt;
	&lt;li&gt;The service was configured to use a PidFile. I do not know whether that is relevant.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;WinXP 32-bit, Oracle JRE 6u22 32-bit, Tomcat 7.0.5-dev&lt;/p&gt;</environment>
        <key id="12479929">DAEMON-187</key>
            <summary>(0) An instance of &apos;..&apos; application is already running</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kkolinko">Konstantin Kolinko</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Nov 2010 04:29:24 +0000</created>
                <updated>Wed, 5 Jan 2011 09:20:12 +0000</updated>
                            <resolved>Wed, 5 Jan 2011 09:20:12 +0000</resolved>
                                    <version>1.0.4</version>
                                    <fixVersion>1.0.5</fixVersion>
                                    <component>Procrun</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12977417" author="sebb@apache.org" created="Tue, 4 Jan 2011 19:07:46 +0000"  >&lt;p&gt;This appears to be a bug in apxDisplayError() - if the file and line-number is not supplied, it ought not to print either.&lt;/p&gt;

&lt;p&gt;I suspect &lt;br/&gt;
line 401:         f = &quot;&quot;;&lt;br/&gt;
is the cause, as it is not false, so it fails the test at &lt;br/&gt;
line 424:         if (f) {&lt;br/&gt;
and thus generates a line with just &apos; (0)&apos; in it&lt;/p&gt;</comment>
                            <comment id="12977694" author="mturk@apache.org" created="Wed, 5 Jan 2011 09:20:12 +0000"  >&lt;p&gt;Committed a fix that will display already running manager instead showing error message box.&lt;br/&gt;
Also fixed the error message to not display &apos;(0)&apos; string. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12459582" name="screenshot-1.jpg" size="14036" author="kkolinko" created="Mon, 15 Nov 2010 04:30:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37618</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tklz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170648</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>


<item>
            <title>[DAEMON-186] jsvc consumes 100% CPU when redirecting errfile (and not outfile) to syslog</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-186</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When you run jsvc redirecting -errfile to syslog but not -outfile to syslog the jsvc process in charge of the redirection to syslog daemon consumes 100% CPU.&lt;br/&gt;
The problem dissapears when redirecting both (-errfile and -outfile) to syslog.&lt;br/&gt;
The problem appears when only one is redirected to syslog and the other parameter is not specified or redirected to a file.&lt;/p&gt;

&lt;p&gt;The problem in the process appears to be the following:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;jsvc  tries to open 2 file descriptors, one for the standard output and one for the error output, and listen to both file descriptors&lt;/li&gt;
	&lt;li&gt;when it receives a message from one of both descriptors it sends the message to syslog daemon.&lt;/li&gt;
	&lt;li&gt;In the case that only -errfile is specified (and not -outfile), when jsvc tries to open the stardard output file descriptor it fails and the file descriptor points to &quot;0&quot; (default value, /dev/null).&lt;/li&gt;
	&lt;li&gt;The jsvc listen to both descriptors, the error output (that was correctly opened) and the 0 file descriptor, and jsvc is receiving data continously from this &quot;broken&quot; file descriptor. So it enters in a loop that consumes 100% of CPU.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;Ubuntu&lt;/p&gt;</environment>
        <key id="12479103">DAEMON-186</key>
            <summary>jsvc consumes 100% CPU when redirecting errfile (and not outfile) to syslog</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mturk@apache.org">Mladen Turk</assignee>
                                    <reporter username="ana.solano.ros">Ana Solano Ros</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Nov 2010 14:14:45 +0000</created>
                <updated>Mon, 6 Jun 2011 14:55:37 +0000</updated>
                            <resolved>Mon, 6 Jun 2011 14:55:37 +0000</resolved>
                                    <version>1.0.1</version>
                    <version>1.0.2</version>
                    <version>1.0.4</version>
                    <version>1.0.5</version>
                                    <fixVersion>1.0.6</fixVersion>
                                    <component>Jsvc</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12928241" author="mturk@apache.org" created="Thu, 4 Nov 2010 15:40:46 +0000"  >&lt;p&gt;You have specified that the affected version is 1.0.1.&lt;br/&gt;
Since we don&apos;t make patches for old releases, can you verify if that&apos;s a case for newest release (1.0.4)&lt;/p&gt;
</comment>
                            <comment id="12928530" author="ana.solano.ros" created="Fri, 5 Nov 2010 07:47:02 +0000"  >&lt;p&gt;I have just tested it and the problem also happens with 1.0.4&lt;/p&gt;</comment>
                            <comment id="12983082" author="mturk@apache.org" created="Tue, 18 Jan 2011 08:58:21 +0000"  >&lt;p&gt;Fixed in the trunk.&lt;br/&gt;
It would be nice if you could confirm the fix resolves the issue so we can release 1.0.6&lt;/p&gt;</comment>
                            <comment id="13044894" author="mturk@apache.org" created="Mon, 6 Jun 2011 14:55:37 +0000"  >&lt;p&gt;Fixed in the trunk&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12495626">DAEMON-194</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37619</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tk9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170592</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>