diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index a9d3b14e..b211a3ce 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -27,6 +27,10 @@
   <body>
     <release version="1.8" date="in SVN"
       description="TBD">
+      <action dev="oheger" type="fix" issue="CONFIGURATION-476">
+        Fixed possible ClassCastExceptions in CompositeConfiguration related to
+        special in-memory configurations.
+      </action>
       <action dev="oheger" type="update" issue="CONFIGURATION-475">
         Class ConfigurationKey was deprecated in favour of DefaultConfigurationKey.
       </action>
diff --git a/src/main/java/org/apache/commons/configuration/CompositeConfiguration.java b/src/main/java/org/apache/commons/configuration/CompositeConfiguration.java
index d09576ae..1716c54b 100644
--- a/src/main/java/org/apache/commons/configuration/CompositeConfiguration.java
+++ b/src/main/java/org/apache/commons/configuration/CompositeConfiguration.java
@@ -327,7 +327,7 @@ implements Cloneable
      */
     public Configuration getConfiguration(int index)
     {
-        return (Configuration) configList.get(index);
+        return configList.get(index);
     }
 
     /**
@@ -393,8 +393,11 @@ implements Cloneable
     @Override
     public void setDelimiterParsingDisabled(boolean delimiterParsingDisabled)
     {
-        ((BaseConfiguration) getInMemoryConfiguration())
-                .setDelimiterParsingDisabled(delimiterParsingDisabled);
+        if (inMemoryConfiguration instanceof AbstractConfiguration)
+        {
+            ((AbstractConfiguration) inMemoryConfiguration)
+                    .setDelimiterParsingDisabled(delimiterParsingDisabled);
+        }
         super.setDelimiterParsingDisabled(delimiterParsingDisabled);
     }
 
@@ -408,8 +411,11 @@ implements Cloneable
     @Override
     public void setListDelimiter(char listDelimiter)
     {
-        ((BaseConfiguration) getInMemoryConfiguration())
-                .setListDelimiter(listDelimiter);
+        if (inMemoryConfiguration instanceof AbstractConfiguration)
+        {
+            ((AbstractConfiguration) inMemoryConfiguration)
+                    .setListDelimiter(listDelimiter);
+        }
         super.setListDelimiter(listDelimiter);
     }
 
diff --git a/src/test/java/org/apache/commons/configuration/TestCompositeConfiguration.java b/src/test/java/org/apache/commons/configuration/TestCompositeConfiguration.java
index 3eff4ba1..0a8dfea2 100644
--- a/src/test/java/org/apache/commons/configuration/TestCompositeConfiguration.java
+++ b/src/test/java/org/apache/commons/configuration/TestCompositeConfiguration.java
@@ -39,6 +39,7 @@ import java.util.NoSuchElementException;
 import org.apache.commons.configuration.event.ConfigurationEvent;
 import org.apache.commons.configuration.event.ConfigurationListener;
 import org.apache.commons.configuration.reloading.FileAlwaysReloadingStrategy;
+import org.easymock.EasyMock;
 import org.junit.Before;
 import org.junit.Test;
 
@@ -846,6 +847,34 @@ public class TestCompositeConfiguration
                 cc.getString("property.one.ref"));
     }
 
+    /**
+     * Tests the behavior of setListDelimiter() if the in-memory configuration
+     * is not derived from BaseConfiguration. This test is related to
+     * CONFIGURATION-476.
+     */
+    @Test
+    public void testSetListDelimiterInMemoryConfigNonBaseConfig()
+    {
+        Configuration inMemoryConfig = EasyMock.createMock(Configuration.class);
+        EasyMock.replay(inMemoryConfig);
+        cc = new CompositeConfiguration(inMemoryConfig);
+        cc.setListDelimiter(';');
+    }
+
+    /**
+     * Tests the behavior of setDelimiterParsingDisabled() if the in-memory
+     * configuration is not derived from BaseConfiguration. This test is related
+     * to CONFIGURATION-476.
+     */
+    @Test
+    public void testSetDelimiterParsingDisabledInMemoryConfigNonBaseConfig()
+    {
+        Configuration inMemoryConfig = EasyMock.createMock(Configuration.class);
+        EasyMock.replay(inMemoryConfig);
+        cc = new CompositeConfiguration(inMemoryConfig);
+        cc.setDelimiterParsingDisabled(true);
+    }
+
     /**
      * A test configuration event listener that counts the number of received
      * events. Used for testing the event facilities.
