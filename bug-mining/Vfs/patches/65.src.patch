diff --git a/core/src/main/java/org/apache/commons/vfs/FileSystemConfigBuilder.java b/core/src/main/java/org/apache/commons/vfs/FileSystemConfigBuilder.java
index 443dd851..9d014027 100644
--- a/core/src/main/java/org/apache/commons/vfs/FileSystemConfigBuilder.java
+++ b/core/src/main/java/org/apache/commons/vfs/FileSystemConfigBuilder.java
@@ -307,5 +307,5 @@ public abstract class FileSystemConfigBuilder
         return value;
     }
 
-    protected abstract Class getConfigClass();
+    protected abstract Class<? extends FileSystem> getConfigClass();
 }
diff --git a/core/src/main/java/org/apache/commons/vfs/FileSystemOptions.java b/core/src/main/java/org/apache/commons/vfs/FileSystemOptions.java
index 8cde2a5a..e25f7d6e 100644
--- a/core/src/main/java/org/apache/commons/vfs/FileSystemOptions.java
+++ b/core/src/main/java/org/apache/commons/vfs/FileSystemOptions.java
@@ -43,14 +43,14 @@ public final class FileSystemOptions implements Cloneable
         private static final int HASH = 29;
 
         /** The FileSystem class */
-        private final Class fileSystemClass;
+        private final Class<? extends FileSystem> fileSystemClass;
 
         /** The option name */
         private final String name;
 
         // TODO the parameter name suggests that the class should only be a 
         // a FileSystem, however some of the tests pass in DefaultFileSystemConfigBuilder
-        private FileSystemOptionKey(Class fileSystemClass, String name)
+        private FileSystemOptionKey(Class<? extends FileSystem> fileSystemClass, String name)
         {
             this.fileSystemClass = fileSystemClass;
             this.name = name;
@@ -106,18 +106,18 @@ public final class FileSystemOptions implements Cloneable
     {
     }
 
-    void setOption(Class<?> fileSystemClass, String name, Object value)
+    void setOption(Class<? extends FileSystem> fileSystemClass, String name, Object value)
     {
         options.put(new FileSystemOptionKey(fileSystemClass, name), value);
     }
 
-    Object getOption(Class<?> fileSystemClass, String name)
+    Object getOption(Class<? extends FileSystem> fileSystemClass, String name)
     {
         FileSystemOptionKey key = new FileSystemOptionKey(fileSystemClass, name);
         return options.get(key);
     }
 
-    boolean hasOption(Class<?> fileSystemClass, String name)
+    boolean hasOption(Class<? extends FileSystem> fileSystemClass, String name)
     {
         FileSystemOptionKey key = new FileSystemOptionKey(fileSystemClass, name);
         return options.containsKey(key);
diff --git a/core/src/main/java/org/apache/commons/vfs/impl/DefaultFileSystemConfigBuilder.java b/core/src/main/java/org/apache/commons/vfs/impl/DefaultFileSystemConfigBuilder.java
index 2285cd50..25d2e6f8 100644
--- a/core/src/main/java/org/apache/commons/vfs/impl/DefaultFileSystemConfigBuilder.java
+++ b/core/src/main/java/org/apache/commons/vfs/impl/DefaultFileSystemConfigBuilder.java
@@ -16,8 +16,17 @@
  */
 package org.apache.commons.vfs.impl;
 
+import java.io.File;
+
+import org.apache.commons.vfs.Capability;
+import org.apache.commons.vfs.FileListener;
+import org.apache.commons.vfs.FileName;
+import org.apache.commons.vfs.FileObject;
+import org.apache.commons.vfs.FileSelector;
+import org.apache.commons.vfs.FileSystem;
 import org.apache.commons.vfs.FileSystemConfigBuilder;
 import org.apache.commons.vfs.FileSystemException;
+import org.apache.commons.vfs.FileSystemManager;
 import org.apache.commons.vfs.FileSystemOptions;
 import org.apache.commons.vfs.UserAuthenticator;
 
@@ -57,9 +66,15 @@ public class DefaultFileSystemConfigBuilder extends FileSystemConfigBuilder
         return (UserAuthenticator) getParam(opts, "userAuthenticator");
     }
 
+    /**
+     * Dummy class that implements FileSystem.
+     */
+    abstract static class DefaultFileSystem implements FileSystem {    
+    }
+
     @Override
-    protected Class getConfigClass()
+    protected Class<? extends FileSystem> getConfigClass()
     {
-        return DefaultFileSystemConfigBuilder.class;
+        return DefaultFileSystem.class;
     }
 }
diff --git a/core/src/main/java/org/apache/commons/vfs/provider/ftp/FtpFileSystemConfigBuilder.java b/core/src/main/java/org/apache/commons/vfs/provider/ftp/FtpFileSystemConfigBuilder.java
index 032f9931..f1945a31 100644
--- a/core/src/main/java/org/apache/commons/vfs/provider/ftp/FtpFileSystemConfigBuilder.java
+++ b/core/src/main/java/org/apache/commons/vfs/provider/ftp/FtpFileSystemConfigBuilder.java
@@ -17,6 +17,7 @@
 package org.apache.commons.vfs.provider.ftp;
 
 import org.apache.commons.net.ftp.parser.FTPFileEntryParserFactory;
+import org.apache.commons.vfs.FileSystem;
 import org.apache.commons.vfs.FileSystemConfigBuilder;
 import org.apache.commons.vfs.FileSystemOptions;
 
@@ -106,7 +107,7 @@ public final class FtpFileSystemConfigBuilder extends FileSystemConfigBuilder
     }
 
     @Override
-    protected Class getConfigClass()
+    protected Class<? extends FileSystem> getConfigClass()
     {
         return FtpFileSystem.class;
     }
diff --git a/core/src/main/java/org/apache/commons/vfs/provider/ftps/FtpsFileSystemConfigBuilder.java b/core/src/main/java/org/apache/commons/vfs/provider/ftps/FtpsFileSystemConfigBuilder.java
index b8dd6b86..702d06ec 100644
--- a/core/src/main/java/org/apache/commons/vfs/provider/ftps/FtpsFileSystemConfigBuilder.java
+++ b/core/src/main/java/org/apache/commons/vfs/provider/ftps/FtpsFileSystemConfigBuilder.java
@@ -17,6 +17,7 @@
 package org.apache.commons.vfs.provider.ftps;
 
 import org.apache.commons.net.ftp.parser.FTPFileEntryParserFactory;
+import org.apache.commons.vfs.FileSystem;
 import org.apache.commons.vfs.FileSystemConfigBuilder;
 import org.apache.commons.vfs.FileSystemOptions;
 import org.apache.commons.vfs.provider.ftp.FtpFileSystem;
@@ -102,7 +103,7 @@ public class FtpsFileSystemConfigBuilder extends FileSystemConfigBuilder {
   }
 
   @Override
-  protected Class getConfigClass() {
+  protected Class<? extends FileSystem> getConfigClass() {
     return FtpFileSystem.class;
   }
 
diff --git a/core/src/main/java/org/apache/commons/vfs/provider/http/HttpFileSystemConfigBuilder.java b/core/src/main/java/org/apache/commons/vfs/provider/http/HttpFileSystemConfigBuilder.java
index 541f0338..08dfac1d 100644
--- a/core/src/main/java/org/apache/commons/vfs/provider/http/HttpFileSystemConfigBuilder.java
+++ b/core/src/main/java/org/apache/commons/vfs/provider/http/HttpFileSystemConfigBuilder.java
@@ -16,6 +16,7 @@
  */
 package org.apache.commons.vfs.provider.http;
 
+import org.apache.commons.vfs.FileSystem;
 import org.apache.commons.vfs.FileSystemConfigBuilder;
 import org.apache.commons.vfs.FileSystemOptions;
 import org.apache.commons.vfs.UserAuthenticator;
@@ -231,7 +232,7 @@ public class HttpFileSystemConfigBuilder extends FileSystemConfigBuilder
 	}
 
 	@Override
-    protected Class getConfigClass()
+    protected Class<? extends FileSystem> getConfigClass()
     {
         return HttpFileSystem.class;
     }
diff --git a/core/src/main/java/org/apache/commons/vfs/provider/ram/RamFileSystemConfigBuilder.java b/core/src/main/java/org/apache/commons/vfs/provider/ram/RamFileSystemConfigBuilder.java
index 8e5c210a..b1ecf4dd 100644
--- a/core/src/main/java/org/apache/commons/vfs/provider/ram/RamFileSystemConfigBuilder.java
+++ b/core/src/main/java/org/apache/commons/vfs/provider/ram/RamFileSystemConfigBuilder.java
@@ -16,6 +16,7 @@
  */
 package org.apache.commons.vfs.provider.ram;
 
+import org.apache.commons.vfs.FileSystem;
 import org.apache.commons.vfs.FileSystemConfigBuilder;
 import org.apache.commons.vfs.FileSystemOptions;
 
@@ -52,7 +53,7 @@ public final class RamFileSystemConfigBuilder extends FileSystemConfigBuilder
      * {@inheritDoc}
      */
     @Override
-    protected Class getConfigClass()
+    protected Class<? extends FileSystem> getConfigClass()
     {
         return RamFileSystem.class;
     }
diff --git a/core/src/main/java/org/apache/commons/vfs/provider/res/ResourceFileSystemConfigBuilder.java b/core/src/main/java/org/apache/commons/vfs/provider/res/ResourceFileSystemConfigBuilder.java
index 44ce19a9..4cee5214 100644
--- a/core/src/main/java/org/apache/commons/vfs/provider/res/ResourceFileSystemConfigBuilder.java
+++ b/core/src/main/java/org/apache/commons/vfs/provider/res/ResourceFileSystemConfigBuilder.java
@@ -16,6 +16,7 @@
  */
 package org.apache.commons.vfs.provider.res;
 
+import org.apache.commons.vfs.FileSystem;
 import org.apache.commons.vfs.FileSystemConfigBuilder;
 import org.apache.commons.vfs.FileSystemOptions;
 import org.apache.commons.vfs.provider.url.UrlFileSystem;
@@ -52,7 +53,7 @@ public final class ResourceFileSystemConfigBuilder extends FileSystemConfigBuild
     }
 
     @Override
-    protected Class getConfigClass()
+    protected Class<? extends FileSystem> getConfigClass()
     {
         return UrlFileSystem.class;
     }
diff --git a/core/src/main/java/org/apache/commons/vfs/provider/sftp/SftpFileSystemConfigBuilder.java b/core/src/main/java/org/apache/commons/vfs/provider/sftp/SftpFileSystemConfigBuilder.java
index dc269e16..a1b2a274 100644
--- a/core/src/main/java/org/apache/commons/vfs/provider/sftp/SftpFileSystemConfigBuilder.java
+++ b/core/src/main/java/org/apache/commons/vfs/provider/sftp/SftpFileSystemConfigBuilder.java
@@ -17,6 +17,8 @@
 package org.apache.commons.vfs.provider.sftp;
 
 import com.jcraft.jsch.UserInfo;
+
+import org.apache.commons.vfs.FileSystem;
 import org.apache.commons.vfs.FileSystemConfigBuilder;
 import org.apache.commons.vfs.FileSystemException;
 import org.apache.commons.vfs.FileSystemOptions;
@@ -262,7 +264,7 @@ public final class SftpFileSystemConfigBuilder extends FileSystemConfigBuilder
     }
 
     @Override
-    protected Class getConfigClass()
+    protected Class<? extends FileSystem> getConfigClass()
     {
         return SftpFileSystem.class;
     }
diff --git a/core/src/main/java/org/apache/commons/vfs/provider/webdav/WebdavFileSystemConfigBuilder.java b/core/src/main/java/org/apache/commons/vfs/provider/webdav/WebdavFileSystemConfigBuilder.java
index d3ff10af..fa3fcc5e 100644
--- a/core/src/main/java/org/apache/commons/vfs/provider/webdav/WebdavFileSystemConfigBuilder.java
+++ b/core/src/main/java/org/apache/commons/vfs/provider/webdav/WebdavFileSystemConfigBuilder.java
@@ -16,6 +16,7 @@
  */
 package org.apache.commons.vfs.provider.webdav;
 
+import org.apache.commons.vfs.FileSystem;
 import org.apache.commons.vfs.FileSystemOptions;
 import org.apache.commons.vfs.provider.http.HttpFileSystemConfigBuilder;
 
@@ -83,7 +84,7 @@ public final class WebdavFileSystemConfigBuilder extends HttpFileSystemConfigBui
      * @return The Webdav FileSystem Class object.
      */
     @Override
-    protected Class getConfigClass()
+    protected Class<? extends FileSystem> getConfigClass()
     {
         return WebdavFileSystem.class;
     }
