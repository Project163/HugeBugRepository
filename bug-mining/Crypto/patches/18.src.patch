diff --git a/.travis.yml b/.travis.yml
index d23d5a56..0f5b2b40 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -25,9 +25,8 @@ before_install:
 
 script:
   - mvn apache-rat:check
-  - mvn clean test
+  - mvn clean test package
   - jdk_switcher use oraclejdk7
-  - mvn test -Pfindbugs
+  - mvn verify site
   - jdk_switcher use oraclejdk8
-  - mvn test -Pfindbugs
-  - mvn clean site
+  - mvn verify site
diff --git a/Makefile b/Makefile
index 9759b065..69ce464d 100644
--- a/Makefile
+++ b/Makefile
@@ -33,19 +33,11 @@ NATIVE_DLL:=$(NATIVE_TARGET_DIR)/$(LIBNAME)
 
 all: $(NATIVE_DLL)
 
-$(TARGET)/jni-classes/org/apache/commons/crypto/cipher/OpensslNative.class : $(SRC)/org/apache/commons/crypto/cipher/OpensslNative.java
-	@mkdir -p $(TARGET)/jni-classes
-	$(JAVAC) -source 1.6 -target 1.6 -d $(TARGET)/jni-classes -sourcepath $(SRC) $<
+$(TARGET)/jni-classes/org/apache/commons/crypto/cipher/OpensslNative.h: $(TARGET)/classes/org/apache/commons/crypto/cipher/OpensslNative.class
+	$(JAVAH) -force -classpath $(TARGET)/jni-classes:$(TARGET)/classes -o $@ org.apache.commons.crypto.cipher.OpensslNative
 
-$(TARGET)/jni-classes/org/apache/commons/crypto/random/OpensslCryptoRandomNative.class : $(SRC)/org/apache/commons/crypto/random/OpensslCryptoRandomNative.java
-	@mkdir -p $(TARGET)/jni-classes
-	$(JAVAC) -source 1.6 -target 1.6 -d $(TARGET)/jni-classes -sourcepath $(SRC) $<
-
-$(TARGET)/jni-classes/org/apache/commons/crypto/cipher/OpensslNative.h: $(TARGET)/jni-classes/org/apache/commons/crypto/cipher/OpensslNative.class
-	$(JAVAH) -force -classpath $(TARGET)/jni-classes -o $@ org.apache.commons.crypto.cipher.OpensslNative
-
-$(TARGET)/jni-classes/org/apache/commons/crypto/random/OpensslCryptoRandomNative.h: $(TARGET)/jni-classes/org/apache/commons/crypto/random/OpensslCryptoRandomNative.class
-	$(JAVAH) -force -classpath $(TARGET)/jni-classes -o $@ org.apache.commons.crypto.random.OpensslCryptoRandomNative
+$(TARGET)/jni-classes/org/apache/commons/crypto/random/OpensslCryptoRandomNative.h: $(TARGET)/classes/org/apache/commons/crypto/random/OpensslCryptoRandomNative.class
+	$(JAVAH) -force -classpath $(TARGET)/jni-classes:$(TARGET)/classes -o $@ org.apache.commons.crypto.random.OpensslCryptoRandomNative
 
 $(COMMONS_CRYPTO_OUT)/OpensslNative.o : $(SRC_NATIVE)/org/apache/commons/crypto/cipher/OpensslNative.c $(TARGET)/jni-classes/org/apache/commons/crypto/cipher/OpensslNative.h
 	@mkdir -p $(@D)
diff --git a/Makefile.common b/Makefile.common
index 6c6bd46c..f8613192 100644
--- a/Makefile.common
+++ b/Makefile.common
@@ -33,16 +33,11 @@ JAVAC := "$$JAVA_HOME/bin/javac"
 JAVAH := "$$JAVA_HOME/bin/javah"
 
 OSINFO_CLASS := org.apache.commons.crypto.utils.OSInfo
-OSINFO_PROG := lib/org/apache/commons/crypto/utils/OSInfo.class
+OSINFO_PROG := $(TARGET)/classes/org/apache/commons/crypto/utils/OSInfo.class
 
-## building OSInfo.java
-$(info compiling OSInfo.java)
-$(shell mkdir -p lib)
-$(shell $(JAVAC) src/main/java/org/apache/commons/crypto/utils/OSInfo.java -d lib)
-
-OS_NAME := $(shell $(JAVA) -cp lib $(OSINFO_CLASS) --os)
-OS_ARCH := $(shell $(JAVA) -cp lib $(OSINFO_CLASS) --arch)
-LIB_FOLDER := $(shell $(JAVA) -cp lib $(OSINFO_CLASS))
+OS_NAME := $(shell $(JAVA) -cp $(TARGET)/classes $(OSINFO_CLASS) --os)
+OS_ARCH := $(shell $(JAVA) -cp $(TARGET)/classes $(OSINFO_CLASS) --arch)
+LIB_FOLDER := $(shell $(JAVA) -cp $(TARGET)/classes $(OSINFO_CLASS))
 IBM_JDK_LIB := lib/inc_ibm
 
 # Windows uses different path separators
diff --git a/pom.xml b/pom.xml
index 641b266a..4965a50e 100644
--- a/pom.xml
+++ b/pom.xml
@@ -332,7 +332,7 @@ The following provides more details on the included cryptographic software:
         <executions>
           <execution>
             <id>make</id>
-            <phase>generate-sources</phase>
+            <phase>process-classes</phase>
             <goals>
               <goal>run</goal>
             </goals>
diff --git a/src/main/java/org/apache/commons/crypto/random/CryptoRandomFactory.java b/src/main/java/org/apache/commons/crypto/random/CryptoRandomFactory.java
index e9b7a55d..b2993531 100644
--- a/src/main/java/org/apache/commons/crypto/random/CryptoRandomFactory.java
+++ b/src/main/java/org/apache/commons/crypto/random/CryptoRandomFactory.java
@@ -40,8 +40,8 @@ private CryptoRandomFactory() {
 
     /**
      * Gets a CryptoRandom instance for specified props.
-     * Uses the {@link #COMMONS_CRYPTO_SECURE_RANDOM_CLASSES_KEY}
-     * from the provided properties.
+     * Uses the COMMONS_CRYPTO_SECURE_RANDOM_CLASSES_KEY from the provided 
+     * properties.
      * If it is not set, then it checks the System properties.
      * Failing that, it defaults to {@link JavaCryptoRandom}
      * The properties are passed to the generated class.
