diff --git a/src/test/java/org/apache/commons/scxml/SCXMLTestHelper.java b/src/test/java/org/apache/commons/scxml/SCXMLTestHelper.java
index 79dddbfc..db4cc40d 100644
--- a/src/test/java/org/apache/commons/scxml/SCXMLTestHelper.java
+++ b/src/test/java/org/apache/commons/scxml/SCXMLTestHelper.java
@@ -125,20 +125,20 @@ public class SCXMLTestHelper {
     }
 
     public static SCXMLExecutor getExecutor(final URL url) {
-        SCXML scxml = digest(url);
+        SCXML scxml = parse(url);
         Evaluator evaluator = new JexlEvaluator();
         return getExecutor(evaluator, scxml);
     }
 
     public static SCXMLExecutor getExecutor(final URL url,
             final Evaluator evaluator) {
-        SCXML scxml = digest(url);
+        SCXML scxml = parse(url);
         return getExecutor(evaluator, scxml);
     }
 
     public static SCXMLExecutor getExecutor(final URL url,
             final ErrorHandler errHandler) {
-        SCXML scxml = digest(url, errHandler);
+        SCXML scxml = parse(url, errHandler);
         Evaluator evaluator = new JexlEvaluator();
         return getExecutor(evaluator, scxml);
     }
@@ -166,7 +166,7 @@ public class SCXMLTestHelper {
 
     public static SCXMLExecutor getExecutor(final URL url, final Context ctx,
             final Evaluator evaluator) {
-        SCXML scxml = digest(url);
+        SCXML scxml = parse(url);
         EventDispatcher ed = new SimpleDispatcher();
         Tracer trc = new Tracer();
         return getExecutor(ctx, evaluator, scxml, ed, trc);
diff --git a/src/test/java/org/apache/commons/scxml/env/jexl/datamodel-03.xml b/src/test/java/org/apache/commons/scxml/env/jexl/datamodel-03.xml
index 9325930e..03571322 100644
--- a/src/test/java/org/apache/commons/scxml/env/jexl/datamodel-03.xml
+++ b/src/test/java/org/apache/commons/scxml/env/jexl/datamodel-03.xml
@@ -21,6 +21,7 @@
      Also serves as testing the underlying functionality of the
      underlying parsing technology (here, Digester 1.8) -->
 <scxml xmlns="http://www.w3.org/2005/07/scxml"
+       xmlns:cs="http://commons.apache.org/scxml"
        version="1.0"
        initialstate="ten">
 
@@ -61,7 +62,7 @@
         </datamodel>
 
         <onentry>
-            <var xmlns:pre1="scheme://namespace.test.domain/1"
+            <cs:var xmlns:pre1="scheme://namespace.test.domain/1"
                  xmlns:pre2="scheme://namespace.test.domain/2"
                  xmlns:pre3="scheme://namespace.test.domain/3"
                  name="tentest"
diff --git a/src/test/java/org/apache/commons/scxml/env/jexl/eventdata-03.xml b/src/test/java/org/apache/commons/scxml/env/jexl/eventdata-03.xml
index 8329b97c..d4c43889 100644
--- a/src/test/java/org/apache/commons/scxml/env/jexl/eventdata-03.xml
+++ b/src/test/java/org/apache/commons/scxml/env/jexl/eventdata-03.xml
@@ -16,6 +16,7 @@
  * limitations under the License.
 -->
 <scxml xmlns="http://www.w3.org/2005/07/scxml"
+       xmlns:cs="http://commons.apache.org/scxml"
       version="1.0"
       initialstate="ten">
 
@@ -34,8 +35,8 @@
 
     <state id="twenty">
         <onentry>
-            <var name="one" expr="Data(rootdata,'root/one')"/>
-            <var name="two" expr="Data(rootdata,'root/two')"/>
+            <cs:var name="one" expr="Data(rootdata,'root/one')"/>
+            <cs:var name="two" expr="Data(rootdata,'root/two')"/>
             <send event="'event.bar'" namelist="one two"/>
         </onentry>
         <transition event="event.bar"
diff --git a/src/test/java/org/apache/commons/scxml/env/jexl/microwave-01.xml b/src/test/java/org/apache/commons/scxml/env/jexl/microwave-01.xml
index af9fdae6..470d156b 100644
--- a/src/test/java/org/apache/commons/scxml/env/jexl/microwave-01.xml
+++ b/src/test/java/org/apache/commons/scxml/env/jexl/microwave-01.xml
@@ -19,6 +19,7 @@
    This document uses Commons JEXL as the expressions language.
 -->
 <scxml xmlns="http://www.w3.org/2005/07/scxml"
+       xmlns:cs="http://commons.apache.org/scxml"
        version="1.0"
        initialstate="off">
   
@@ -38,15 +39,15 @@
       <!-- we assume the cook_time is passed in as a context parameter -->
       <if cond="empty(cook_time)">
         <!-- default setting -->
-        <var name="cook_time" expr="5"/>
+        <cs:var name="cook_time" expr="5"/>
       </if>
       <!-- again, door_closed should be a part of a global context -->
       <if cond="empty(door_closed)">
         <!-- default setting -->
-        <var name="door_closed" expr="true"/>
+        <cs:var name="door_closed" expr="true"/>
       </if>
       <!-- timer variable -->
-      <var name="timer" expr="0"/>
+      <cs:var name="timer" expr="0"/>
     </onentry>
 
     <transition event="turn_off" target="off"/>
diff --git a/src/test/java/org/apache/commons/scxml/env/jexl/microwave-02.xml b/src/test/java/org/apache/commons/scxml/env/jexl/microwave-02.xml
index 566cb465..b2ef9ae7 100644
--- a/src/test/java/org/apache/commons/scxml/env/jexl/microwave-02.xml
+++ b/src/test/java/org/apache/commons/scxml/env/jexl/microwave-02.xml
@@ -18,70 +18,70 @@
 <!--
    This document uses Commons JEXL as the expressions language.
 -->
-<scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0"
+<scxml xmlns="http://www.w3.org/2005/07/scxml" 
+       xmlns:cs="http://commons.apache.org/scxml"
+       version="1.0"
        initialstate="microwave"> 
 
   <!--  trivial microwave oven example -->
   <!-- using parallel and In() predicate -->
 
-  <state id="microwave">
-    <parallel id="parts">
-      <state id="oven">
+  <parallel id="microwave">
+    <state id="oven">
+      <initial>
+        <transition target="off"/>
+      </initial>
+
+      <state id="off">
+        <!-- off state -->
+        <transition event="turn_on" target="on"/>
+      </state>
+      
+      <state id="on">
         <initial>
-          <transition target="off"/>
+          <transition target="idle"/>
         </initial>
 
-        <state id="off">
-          <!-- off state -->
-          <transition event="turn_on" target="on"/>
-        </state>
+        <!-- on/pause state -->
+        <onentry>
+          <!-- we assume the cook_time is passed in as a context parameter -->
+          <if cond="empty(cook_time)">
+            <!-- default setting -->
+            <cs:var name="cook_time" expr="5"/>
+          </if>
+          <!-- timer variable -->
+          <cs:var name="timer" expr="0"/>
+        </onentry>
         
-        <state id="on">
-          <initial>
-            <transition target="idle"/>
-          </initial>
+        <transition event="turn_off" target="off"/>
 
-          <!-- on/pause state -->
-          <onentry>
-            <!-- we assume the cook_time is passed in as a context parameter -->
-            <if cond="empty(cook_time)">
-              <!-- default setting -->
-              <var name="cook_time" expr="5"/>
-            </if>
-            <!-- timer variable -->
-            <var name="timer" expr="0"/>
-          </onentry>
-          
-          <transition event="turn_off" target="off"/>
-
-          <transition cond="timer ge cook_time" target="off"/>
-          
-          <state id="idle">
-            <transition cond="In('closed')" target="cooking"/>
-          </state>
-          
-          <state id="cooking">
-            <transition cond="not In('closed')" target="idle"/>
+        <transition cond="timer ge cook_time" target="off"/>
+        
+        <state id="idle">
+          <transition cond="In('closed')" target="cooking"/>
+        </state>
+        
+        <state id="cooking">
+          <transition cond="not In('closed')" target="idle"/>
 
-            <transition event="time" target="cooking">
-              <assign name="timer" expr="timer + 1"/>
-            </transition>
-          </state>
+          <transition event="time" target="cooking">
+            <assign name="timer" expr="timer + 1"/>
+          </transition>
         </state>
       </state>
+    </state>
 
-      <state id="door">
-        <initial>
-          <transition target="closed"/>
-        </initial>
-        <state id="closed">
-          <transition event="door_open" target="open"/>
-        </state>
-        <state id="open">
-          <transition event="door_close" target="closed"/>
-        </state>
+    <state id="door">
+      <initial>
+        <transition target="closed"/>
+      </initial>
+      <state id="closed">
+        <transition event="door_open" target="open"/>
+      </state>
+      <state id="open">
+        <transition event="door_close" target="closed"/>
       </state>
-    </parallel>
-  </state>
+    </state>
+  </parallel>
 
 </scxml>
diff --git a/src/test/java/org/apache/commons/scxml/env/jexl/wildcard-01.xml b/src/test/java/org/apache/commons/scxml/env/jexl/wildcard-01.xml
index 77d68b13..9f7ddc3e 100644
--- a/src/test/java/org/apache/commons/scxml/env/jexl/wildcard-01.xml
+++ b/src/test/java/org/apache/commons/scxml/env/jexl/wildcard-01.xml
@@ -16,11 +16,12 @@
  * limitations under the License.
 -->
 <scxml xmlns="http://www.w3.org/2005/07/scxml"
-      version="1.0"
-      initialstate="state1">
+       xmlns:cs="http://commons.apache.org/scxml"
+       version="1.0"
+       initialstate="state1">
      <state id="state1">
            <onentry>
-               <var name="switch" expr="4" />
+               <cs:var name="switch" expr="4" />
            </onentry>
            <!-- We'll trigger 'foo.bar.baz' event,
                 and therefore, must end up in state4 -->
diff --git a/src/test/java/org/apache/commons/scxml/env/jsp/datamodel-03.xml b/src/test/java/org/apache/commons/scxml/env/jsp/datamodel-03.xml
index c3443d0a..f8a33105 100644
--- a/src/test/java/org/apache/commons/scxml/env/jsp/datamodel-03.xml
+++ b/src/test/java/org/apache/commons/scxml/env/jsp/datamodel-03.xml
@@ -21,6 +21,7 @@
      Also serves as testing the underlying functionality of the
      underlying parsing technology (here, Digester 1.8) -->
 <scxml xmlns="http://www.w3.org/2005/07/scxml"
+       xmlns:cs="http://commons.apache.org/scxml"
        version="1.0"
        initialstate="ten">
 
@@ -61,7 +62,7 @@
         </datamodel>
 
         <onentry>
-            <var xmlns:pre1="scheme://namespace.test.domain/1"
+            <cs:var xmlns:pre1="scheme://namespace.test.domain/1"
                  xmlns:pre2="scheme://namespace.test.domain/2"
                  xmlns:pre3="scheme://namespace.test.domain/3"
                  name="tentest"
diff --git a/src/test/java/org/apache/commons/scxml/env/jsp/jsp-rootctx-test.xml b/src/test/java/org/apache/commons/scxml/env/jsp/jsp-rootctx-test.xml
index efdb2f32..6a715796 100644
--- a/src/test/java/org/apache/commons/scxml/env/jsp/jsp-rootctx-test.xml
+++ b/src/test/java/org/apache/commons/scxml/env/jsp/jsp-rootctx-test.xml
@@ -15,7 +15,8 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
 -->
-<scxml xmlns="http://www.w3.org/2005/07/scxml"
+<scxml xmlns="http://www.w3.org/2005/07/scxml" 
+       xmlns:cs="http://commons.apache.org/scxml"
        version="1.0"
        initialstate="rootCtxTest">
   
@@ -23,7 +24,7 @@
     <onentry>
       <!-- 'foo' must exist in host JSP context -->
       <assign name="foo" expr="${foo+1}" />
-      <var name="bar" expr="a brand new value" />
+      <cs:var name="bar" expr="a brand new value" />
     </onentry>
   </state>
 
diff --git a/src/test/java/org/apache/commons/scxml/env/jsp/microwave-01.xml b/src/test/java/org/apache/commons/scxml/env/jsp/microwave-01.xml
index 3d3d3f95..86efa26f 100644
--- a/src/test/java/org/apache/commons/scxml/env/jsp/microwave-01.xml
+++ b/src/test/java/org/apache/commons/scxml/env/jsp/microwave-01.xml
@@ -19,6 +19,7 @@
    This document uses JSP 2.0 EL as the expressions language.
 -->
 <scxml xmlns="http://www.w3.org/2005/07/scxml"
+       xmlns:cs="http://commons.apache.org/scxml"
        version="1.0"
        initialstate="off">
   
@@ -38,15 +39,15 @@
       <!-- we assume the cook_time is passed in as a context parameter -->
       <if cond="${empty cook_time}">
         <!-- default setting -->
-        <var name="cook_time" expr="${5}"/>
+        <cs:var name="cook_time" expr="${5}"/>
       </if>
       <!-- again, door_closed should be a part of a global context -->
       <if cond="${empty door_closed}">
         <!-- default setting -->
-        <var name="door_closed" expr="${true}"/>
+        <cs:var name="door_closed" expr="${true}"/>
       </if>
       <!-- timer variable -->
-      <var name="timer" expr="${0}"/>
+      <cs:var name="timer" expr="${0}"/>
     </onentry>
 
     <transition event="turn_off" target="off"/>
diff --git a/src/test/java/org/apache/commons/scxml/env/jsp/microwave-02.xml b/src/test/java/org/apache/commons/scxml/env/jsp/microwave-02.xml
index eaeb14ab..c03fe05c 100644
--- a/src/test/java/org/apache/commons/scxml/env/jsp/microwave-02.xml
+++ b/src/test/java/org/apache/commons/scxml/env/jsp/microwave-02.xml
@@ -18,70 +18,70 @@
 <!--
    This document uses JSP 2.0 EL as the expressions language.
 -->
-<scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0"
+<scxml xmlns="http://www.w3.org/2005/07/scxml" 
+       xmlns:cs="http://commons.apache.org/scxml"
+       version="1.0"
        initialstate="microwave"> 
 
   <!--  trivial microwave oven example -->
   <!-- using parallel and In() predicate -->
 
-  <state id="microwave">
-    <parallel id="parts">
-      <state id="oven">
+  <parallel id="microwave">
+    <state id="oven">
+      <initial>
+        <transition target="off"/>
+      </initial>
+
+      <state id="off">
+        <!-- off state -->
+        <transition event="turn_on" target="on"/>
+      </state>
+      
+      <state id="on">
         <initial>
-          <transition target="off"/>
+          <transition target="idle"/>
         </initial>
 
-        <state id="off">
-          <!-- off state -->
-          <transition event="turn_on" target="on"/>
-        </state>
+        <!-- on/pause state -->
+        <onentry>
+          <!-- we assume the cook_time is passed in as a context parameter -->
+          <if cond="${empty cook_time}">
+            <!-- default setting -->
+            <cs:var name="cook_time" expr="${5}"/>
+          </if>
+          <!-- timer variable -->
+          <cs:var name="timer" expr="${0}"/>
+        </onentry>
         
-        <state id="on">
-          <initial>
-            <transition target="idle"/>
-          </initial>
+        <transition event="turn_off" target="off"/>
 
-          <!-- on/pause state -->
-          <onentry>
-            <!-- we assume the cook_time is passed in as a context parameter -->
-            <if cond="${empty cook_time}">
-              <!-- default setting -->
-              <var name="cook_time" expr="${5}"/>
-            </if>
-            <!-- timer variable -->
-            <var name="timer" expr="${0}"/>
-          </onentry>
-          
-          <transition event="turn_off" target="off"/>
-
-          <transition cond="${timer ge cook_time}" target="off"/>
-          
-          <state id="idle">
-            <transition cond="${In('closed')}" target="cooking"/>
-          </state>
-          
-          <state id="cooking">
-            <transition cond="${not In('closed')}" target="idle"/>
+        <transition cond="${timer ge cook_time}" target="off"/>
+        
+        <state id="idle">
+          <transition cond="${In('closed')}" target="cooking"/>
+        </state>
+        
+        <state id="cooking">
+          <transition cond="${not In('closed')}" target="idle"/>
 
-            <transition event="time" target="cooking">
-              <assign name="timer" expr="${timer + 1}"/>
-            </transition>
-          </state>
+          <transition event="time" target="cooking">
+            <assign name="timer" expr="${timer + 1}"/>
+          </transition>
         </state>
       </state>
+    </state>
 
-      <state id="door">
-        <initial>
-          <transition target="closed"/>
-        </initial>
-        <state id="closed">
-          <transition event="door_open" target="open"/>
-        </state>
-        <state id="open">
-          <transition event="door_close" target="closed"/>
-        </state>
+    <state id="door">
+      <initial>
+        <transition target="closed"/>
+      </initial>
+      <state id="closed">
+        <transition event="door_open" target="open"/>
+      </state>
+      <state id="open">
+        <transition event="door_close" target="closed"/>
       </state>
-    </parallel>
-  </state>
+    </state>
+  </parallel>
 
 </scxml>
diff --git a/src/test/java/org/apache/commons/scxml/io/SCXMLDigesterTest.java b/src/test/java/org/apache/commons/scxml/io/SCXMLDigesterTest.java
index 41a34d18..39a34ebc 100644
--- a/src/test/java/org/apache/commons/scxml/io/SCXMLDigesterTest.java
+++ b/src/test/java/org/apache/commons/scxml/io/SCXMLDigesterTest.java
@@ -59,9 +59,9 @@ public class SCXMLDigesterTest extends TestCase {
         microwave01 = this.getClass().getClassLoader().
             getResource("org/apache/commons/scxml/env/jsp/microwave-01.xml");
         microwave02 = this.getClass().getClassLoader().
-            getResource("org/apache/commons/scxml/env/jsp/microwave-02.xml");
+            getResource("org/apache/commons/scxml/env/jsp/microwave-02-legacy.xml");
         transitions01 = this.getClass().getClassLoader().
-            getResource("org/apache/commons/scxml/transitions-01.xml");
+            getResource("org/apache/commons/scxml/transitions-01-legacy.xml");
         send01 = this.getClass().getClassLoader().
             getResource("org/apache/commons/scxml/send-01.xml");
         prefix01 = this.getClass().getClassLoader().
diff --git a/src/test/java/org/apache/commons/scxml/tie-breaker-05.xml b/src/test/java/org/apache/commons/scxml/tie-breaker-05.xml
index 637801f3..1fcbd350 100644
--- a/src/test/java/org/apache/commons/scxml/tie-breaker-05.xml
+++ b/src/test/java/org/apache/commons/scxml/tie-breaker-05.xml
@@ -15,54 +15,50 @@
  * See the License for the specific language governing permissions and
  * limitations under the License.
 -->
-<scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0" initialstate="main">
+<scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0" initialstate="para">
 
 <!-- 
   Testing dispute resolution in regions
   {s11,s2111,s212} -event1-> {s12,s2112,s212}
 -->
 
-    <state id="main">
-        <parallel id="para"> <!-- Outer parallel -->
+    <parallel id="para"> <!-- Outer parallel -->
 
-            <state id="s1">
-                <initial>
-                    <transition target="s11"/>
-                </initial>
-                <state id="s11">
-                    <transition event="event1" target="s12"/>
-                    <transition event="event1" target="s13"/>
-                </state>
-                <state id="s12"/>
-                <state id="s13"/>
+        <state id="s1">
+            <initial>
+                <transition target="s11"/>
+            </initial>
+            <state id="s11">
+                <transition event="event1" target="s12"/>
+                <transition event="event1" target="s13"/>
             </state>
+            <state id="s12"/>
+            <state id="s13"/>
+        </state>
 
-            <state id="s2">
-                <initial>
-                    <transition target="s21"/>
-                </initial>
-                <state id="s21">
-
-                    <parallel id="para1"> <!-- Inner parallel -->
-                        <state id="s211">
-                            <initial>
-                                <transition target="s2111"/>
-                            </initial>
-                            <state id="s2111">
-                                <transition event="event1" target="s2112"/>
-                                <transition event="event1" target="s2113"/>
-                            </state>
-                            <state id="s2112"/>
-                            <state id="s2113"/>
-                        </state>
-                        <state id="s212"/>                                          
-                    </parallel>
+        <state id="s2">
+            <initial>
+                <transition target="para1"/>
+            </initial>
 
+            <parallel id="para1"> <!-- Inner parallel -->
+                <state id="s211">
+                    <initial>
+                        <transition target="s2111"/>
+                    </initial>
+                    <state id="s2111">
+                        <transition event="event1" target="s2112"/>
+                        <transition event="event1" target="s2113"/>
+                    </state>
+                    <state id="s2112"/>
+                    <state id="s2113"/>
                 </state>
-                <state id="s22"/>
-            </state>
+                <state id="s212"/>                                          
+            </parallel>
+
+            <state id="s22"/>
+        </state>
 
-        </parallel>
-    </state>
+    </parallel>
 
 </scxml>
diff --git a/src/test/java/org/apache/commons/scxml/transitions-01.xml b/src/test/java/org/apache/commons/scxml/transitions-01.xml
index f46bc74d..0fc1c3f4 100644
--- a/src/test/java/org/apache/commons/scxml/transitions-01.xml
+++ b/src/test/java/org/apache/commons/scxml/transitions-01.xml
@@ -46,92 +46,88 @@
     </state>
 
     <!-- Finally, try an orthogonal state -->
-    <state id="thirty">
-
-        <parallel id="thirties_parallel">
-
-            <!-- The first (of three) regions in thirties_parallel -->
-            <state id="thirty_one">
-
-                <initial>
-                    <transition target="thirty_one_child_one"/>
-                </initial>
-                <onentry>
-                    <log expr="'Entering thirty_one'" />
-                </onentry>
-                <transition event="thirty_one.done" target="forty"/>
-
-                <state id="thirty_one_child_one">
-                    <onexit>
-                        <log expr="'Exiting thirty_one_child_one'" />
-                    </onexit>
-                    <transition event="thirty_one_child_one.done"
-                                target="thirty_one_child_two"/>
-                </state>
-
-                <state id="thirty_one_child_two">
-                    <onexit>
-                        <log expr="'Exiting thirty_one_child_two'" />
-                    </onexit>
-                </state>
+    <parallel id="thirty">
+
+        <!-- The first (of three) regions in thirties_parallel -->
+        <state id="thirty_one">
+
+            <initial>
+                <transition target="thirty_one_child_one"/>
+            </initial>
+            <onentry>
+                <log expr="'Entering thirty_one'" />
+            </onentry>
+            <transition event="thirty_one.done" target="forty"/>
+
+            <state id="thirty_one_child_one">
+                <onexit>
+                    <log expr="'Exiting thirty_one_child_one'" />
+                </onexit>
+                <transition event="thirty_one_child_one.done"
+                            target="thirty_one_child_two"/>
+            </state>
 
+            <state id="thirty_one_child_two">
+                <onexit>
+                    <log expr="'Exiting thirty_one_child_two'" />
+                </onexit>
             </state>
 
-            <!-- The second (of three) regions in thirties_parallel -->
-            <state id="thirty_two">
-
-                <initial>
-                    <transition target="thirty_two_child_one"/>
-                </initial>
-                <onentry>
-                    <log expr="'Entering thirty_two'" />
-                </onentry>
-
-                <state id="thirty_two_child_one">
-                    <onexit>
-                        <log expr="'Exiting thirty_two_child_one'" />
-                    </onexit>
-                    <transition event="thirty_two_child_one.done"
-                                target="thirty_two_child_two"/>
-                </state>
-
-                <state id="thirty_two_child_two">
-                    <onexit>
-                        <log expr="'Exiting thirty_two_child_two'" />
-                    </onexit>
-                </state>
+        </state>
 
+        <!-- The second (of three) regions in thirties_parallel -->
+        <state id="thirty_two">
+
+            <initial>
+                <transition target="thirty_two_child_one"/>
+            </initial>
+            <onentry>
+                <log expr="'Entering thirty_two'" />
+            </onentry>
+
+            <state id="thirty_two_child_one">
+                <onexit>
+                    <log expr="'Exiting thirty_two_child_one'" />
+                </onexit>
+                <transition event="thirty_two_child_one.done"
+                            target="thirty_two_child_two"/>
             </state>
 
-            <!-- The third (of three) regions in thirties_parallel -->
-            <state id="thirty_three">
-
-                <initial>
-                    <transition target="thirty_three_child_one"/>
-                </initial>
-                <onentry>
-                    <log expr="'Entering thirty_three'" />
-                </onentry>
-
-                <state id="thirty_three_child_one">
-                    <onexit>
-                        <log expr="'Exiting thirty_three_child_one'" />
-                    </onexit>
-                    <transition event="thirty_three_child_one.done"
-                                target="thirty_three_child_two"/>
-                </state>
-
-                <state id="thirty_three_child_two">
-                    <onexit>
-                        <log expr="'Exiting thirty_three_child_two'" />
-                    </onexit>
-                </state>
+            <state id="thirty_two_child_two">
+                <onexit>
+                    <log expr="'Exiting thirty_two_child_two'" />
+                </onexit>
+            </state>
+
+        </state>
 
+        <!-- The third (of three) regions in thirties_parallel -->
+        <state id="thirty_three">
+
+            <initial>
+                <transition target="thirty_three_child_one"/>
+            </initial>
+            <onentry>
+                <log expr="'Entering thirty_three'" />
+            </onentry>
+
+            <state id="thirty_three_child_one">
+                <onexit>
+                    <log expr="'Exiting thirty_three_child_one'" />
+                </onexit>
+                <transition event="thirty_three_child_one.done"
+                            target="thirty_three_child_two"/>
             </state>
 
-        </parallel>
+            <state id="thirty_three_child_two">
+                <onexit>
+                    <log expr="'Exiting thirty_three_child_two'" />
+                </onexit>
+            </state>
 
-    </state>
+        </state>
+
+    </parallel>
 
     <!-- Declare victory -->
     <state id="forty" final="true" />
diff --git a/src/test/java/org/apache/commons/scxml/transitions-02.xml b/src/test/java/org/apache/commons/scxml/transitions-02.xml
index 3a03a978..7c1dcf57 100644
--- a/src/test/java/org/apache/commons/scxml/transitions-02.xml
+++ b/src/test/java/org/apache/commons/scxml/transitions-02.xml
@@ -16,13 +16,14 @@
  * limitations under the License.
 -->
 <scxml xmlns="http://www.w3.org/2005/07/scxml"
+       xmlns:cs="http://commons.apache.org/scxml"
        version="1.0"
        initialstate="ten">
 
     <state id="ten">
 
         <onentry>
-            <var name="foo" expr="1" />
+            <cs:var name="foo" expr="1" />
             <log expr="'Foo is:' + foo" />
         </onentry>
 
diff --git a/src/test/java/org/apache/commons/scxml/transitions-03.xml b/src/test/java/org/apache/commons/scxml/transitions-03.xml
index 7f58c183..303d673d 100644
--- a/src/test/java/org/apache/commons/scxml/transitions-03.xml
+++ b/src/test/java/org/apache/commons/scxml/transitions-03.xml
@@ -24,67 +24,63 @@
          target="twenty_one_2 twenty_two_2 twenty_three_2" />
     </state>
 
-    <state id="twenty">
+    <parallel id="twenty">
 
-        <parallel id="twenties_parallel">
+        <state id="twenty_one">
 
-            <state id="twenty_one">
+            <initial>
+                <transition target="twenty_one_1"/>
+            </initial>
 
-                <initial>
-                    <transition target="twenty_one_1"/>
-                </initial>
-
-                <state id="twenty_one_1">
-                    <transition event="foo" target="twenty_one_2"/>
-                </state>
-
-                <state id="twenty_one_2">
-                    <onexit>
-                        <log expr="'Exiting twenty_two_2'" />
-                    </onexit>
-                </state>
+            <state id="twenty_one_1">
+                <transition event="foo" target="twenty_one_2"/>
+            </state>
 
+            <state id="twenty_one_2">
+                <onexit>
+                    <log expr="'Exiting twenty_two_2'" />
+                </onexit>
             </state>
 
-            <state id="twenty_two">
+        </state>
 
-                <initial>
-                    <transition target="twenty_two_1"/>
-                </initial>
+        <state id="twenty_two">
 
-                <state id="twenty_two_1">
-                    <transition event="foo" target="twenty_two_2"/>
-                </state>
+            <initial>
+                <transition target="twenty_two_1"/>
+            </initial>
 
-                <state id="twenty_two_2">
-                    <onexit>
-                        <log expr="'Exiting twenty_two_2'" />
-                    </onexit>
-                </state>
+            <state id="twenty_two_1">
+                <transition event="foo" target="twenty_two_2"/>
+            </state>
 
+            <state id="twenty_two_2">
+                <onexit>
+                    <log expr="'Exiting twenty_two_2'" />
+                </onexit>
             </state>
 
-            <state id="twenty_three">
+        </state>
 
-                <initial>
-                    <transition target="twenty_three_1"/>
-                </initial>
+        <state id="twenty_three">
 
-                <state id="twenty_three_1">
-                    <transition event="foo" target="twenty_three_2"/>
-                </state>
+            <initial>
+                <transition target="twenty_three_1"/>
+            </initial>
 
-                <state id="twenty_three_2">
-                    <onexit>
-                        <log expr="'Exiting twenty_three_2'" />
-                    </onexit>
-                </state>
+            <state id="twenty_three_1">
+                <transition event="foo" target="twenty_three_2"/>
+            </state>
 
+            <state id="twenty_three_2">
+                <onexit>
+                    <log expr="'Exiting twenty_three_2'" />
+                </onexit>
             </state>
 
-        </parallel>
+        </state>
 
-    </state>
+    </parallel>
 
     <state id="thirty" final="true" />
 
