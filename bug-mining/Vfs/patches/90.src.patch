diff --git a/core/src/main/java/org/apache/commons/vfs2/provider/ram/RamFileObject.java b/core/src/main/java/org/apache/commons/vfs2/provider/ram/RamFileObject.java
index 16a6cbc6..101b9eb4 100644
--- a/core/src/main/java/org/apache/commons/vfs2/provider/ram/RamFileObject.java
+++ b/core/src/main/java/org/apache/commons/vfs2/provider/ram/RamFileObject.java
@@ -27,6 +27,8 @@ import org.apache.commons.vfs2.FileType;
 import org.apache.commons.vfs2.RandomAccessContent;
 import org.apache.commons.vfs2.provider.AbstractFileName;
 import org.apache.commons.vfs2.provider.AbstractFileObject;
+import org.apache.commons.vfs2.provider.local.LocalFile;
+import org.apache.commons.vfs2.util.FileObjectUtils;
 import org.apache.commons.vfs2.util.RandomAccessMode;
 
 /**
@@ -186,7 +188,8 @@ public class RamFileObject extends AbstractFileObject
     @Override
     protected void doRename(FileObject newFile) throws Exception
     {
-        fs.rename(this, (RamFileObject) newFile);
+        RamFileObject newRamFileObject = (RamFileObject) FileObjectUtils.getAbstractFileObject(newFile);
+        fs.rename(this, newRamFileObject);
     }
 
     /*
diff --git a/core/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileObject.java b/core/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileObject.java
index 3e23b4b6..c6c916d3 100644
--- a/core/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileObject.java
+++ b/core/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpFileObject.java
@@ -33,6 +33,7 @@ import org.apache.commons.vfs2.VFS;
 import org.apache.commons.vfs2.provider.AbstractFileName;
 import org.apache.commons.vfs2.provider.AbstractFileObject;
 import org.apache.commons.vfs2.provider.UriParser;
+import org.apache.commons.vfs2.provider.ram.RamFileObject;
 import org.apache.commons.vfs2.util.FileObjectUtils;
 import org.apache.commons.vfs2.util.MonitorInputStream;
 import org.apache.commons.vfs2.util.MonitorOutputStream;
@@ -288,7 +289,8 @@ public class SftpFileObject extends AbstractFileObject
         final ChannelSftp channel = fileSystem.getChannel();
         try
         {
-            channel.rename(relPath, ((SftpFileObject) newFile).relPath);
+            SftpFileObject newSftpFileObject = (SftpFileObject) FileObjectUtils.getAbstractFileObject(newFile);
+            channel.rename(relPath, newSftpFileObject.relPath);
         }
         finally
         {
diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index 7c1ebdaa..627af7d6 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -23,6 +23,9 @@
 
   <body>
     <release version="2.1" date="TBD" description="">
+      <action issue="VFS-258" dev="ggregory" type="update" due-to="mzawirski">
+        [SFTP][RAM] Unsafe casting to AbstractFileObject subclasses in doRename().
+      </action>
       <action issue="VFS-254" dev="ggregory" type="update" due-to="mzawirski">
         Let FileObject and FileContent extend java.io.Closeable.
       </action>
