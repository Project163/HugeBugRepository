diff --git a/tika-core/src/test/java/org/apache/tika/mime/MimeDetectionTest.java b/tika-core/src/test/java/org/apache/tika/mime/MimeDetectionTest.java
index 181612ee4..27ac8c93f 100644
--- a/tika-core/src/test/java/org/apache/tika/mime/MimeDetectionTest.java
+++ b/tika-core/src/test/java/org/apache/tika/mime/MimeDetectionTest.java
@@ -211,4 +211,31 @@ public class MimeDetectionTest {
        }
     }
 
+    /**
+     * Tests that when two magic matches both apply, and both
+     *  have the same priority, we use the name to pick the
+     *  right one based on the glob, or the first one we
+     *  come across if not. See TIKA-1292 for more details.
+     */
+//  @Test    
+    public void DISABLEDtestMimeMagicClashSamePriority() throws IOException {
+        byte[] helloWorld = "Hello, World!".getBytes("UTF-8");
+        MediaType helloType = MediaType.parse("hello/world-file");
+        MediaType helloXType = MediaType.parse("hello/x-world-hello");
+        Metadata metadata;
+        
+        // With a filename, picks the right one
+        metadata = new Metadata();
+        metadata.set(Metadata.RESOURCE_NAME_KEY, "test.hello.world");
+        assertEquals(helloType, mimeTypes.detect(new ByteArrayInputStream(helloWorld), metadata));
+        
+        metadata = new Metadata();
+        metadata.set(Metadata.RESOURCE_NAME_KEY, "test.x-hello-world");
+        assertEquals(helloXType, mimeTypes.detect(new ByteArrayInputStream(helloWorld), metadata));
+        
+        // Without, goes for the first defined
+        metadata = new Metadata();
+        metadata.set(Metadata.RESOURCE_NAME_KEY, "testingTESTINGtesting");
+        assertEquals(helloType, mimeTypes.detect(new ByteArrayInputStream(helloWorld), metadata));
+    }
 }
diff --git a/tika-core/src/test/resources/org/apache/tika/mime/custom-mimetypes.xml b/tika-core/src/test/resources/org/apache/tika/mime/custom-mimetypes.xml
index 77c253fb0..2408150db 100644
--- a/tika-core/src/test/resources/org/apache/tika/mime/custom-mimetypes.xml
+++ b/tika-core/src/test/resources/org/apache/tika/mime/custom-mimetypes.xml
@@ -33,4 +33,13 @@
      </magic>
      <sub-class-of type="hello/world" />
   </mime-type>
+
+  <!-- This has the same match and priority, but different glob -->
+  <!-- We can use the filename to identify the difference, see TIKA-1292 -->
+  <mime-type type="hello/x-world-hello">
+     <glob pattern="*.x-hello-world" />
+     <magic priority="50">
+        <match value="Hello, World!" type="string" offset="0:13" />
+     </magic>
+  </mime-type>
 </mime-info>
